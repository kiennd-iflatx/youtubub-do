/*! For license information please see web.js.LICENSE.txt */
(()=>{var t={1908:(t,e,i)=>{i(41902),t.exports.AVLTree=i(7522)},7522:(t,e,i)=>{const n=i(41902),r=i(45639);class s{constructor(t){this.tree=new a(t)}checkIsAVLT(){this.tree.checkIsAVLT()}insert(t,e){const i=this.tree.insert(t,e);i&&(this.tree=i)}delete(t,e){const i=this.tree.delete(t,e);i&&(this.tree=i)}}class a extends n{constructor(t){super(),t=t||{},this.left=null,this.right=null,this.parent=void 0!==t.parent?t.parent:null,Object.prototype.hasOwnProperty.call(t,"key")&&(this.key=t.key),this.data=Object.prototype.hasOwnProperty.call(t,"value")?[t.value]:[],this.unique=t.unique||!1,this.compareKeys=t.compareKeys||r.defaultCompareKeysFunction,this.checkValueEquality=t.checkValueEquality||r.defaultCheckValueEquality}checkHeightCorrect(){if(!Object.prototype.hasOwnProperty.call(this,"key"))return;if(this.left&&void 0===this.left.height)throw new Error("Undefined height for node "+this.left.key);if(this.right&&void 0===this.right.height)throw new Error("Undefined height for node "+this.right.key);if(void 0===this.height)throw new Error("Undefined height for node "+this.key);const t=this.left?this.left.height:0,e=this.right?this.right.height:0;if(this.height!==1+Math.max(t,e))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}balanceFactor(){return(this.left?this.left.height:0)-(this.right?this.right.height:0)}checkBalanceFactors(){if(Math.abs(this.balanceFactor())>1)throw new Error("Tree is unbalanced at node "+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()}checkIsAVLT(){super.checkIsBST(),this.checkHeightCorrect(),this.checkBalanceFactors()}rightRotation(){const t=this,e=this.left;if(!e)return t;const i=e.right;t.parent?(e.parent=t.parent,t.parent.left===t?t.parent.left=e:t.parent.right=e):e.parent=null,e.right=t,t.parent=e,t.left=i,i&&(i.parent=t);const n=e.left?e.left.height:0,r=i?i.height:0,s=t.right?t.right.height:0;return t.height=Math.max(r,s)+1,e.height=Math.max(n,t.height)+1,e}leftRotation(){const t=this,e=this.right;if(!e)return this;const i=e.left;t.parent?(e.parent=t.parent,t.parent.left===t?t.parent.left=e:t.parent.right=e):e.parent=null,e.left=t,t.parent=e,t.right=i,i&&(i.parent=t);const n=t.left?t.left.height:0,r=i?i.height:0,s=e.right?e.right.height:0;return t.height=Math.max(n,r)+1,e.height=Math.max(s,t.height)+1,e}rightTooSmall(){return this.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())}leftTooSmall(){return this.balanceFactor()>=-1?this:(this.right.balanceFactor()>0&&this.right.rightRotation(),this.leftRotation())}rebalanceAlongPath(t){let e,i,n=this;if(!Object.prototype.hasOwnProperty.call(this,"key"))return delete this.height,this;for(i=t.length-1;i>=0;i-=1)t[i].height=1+Math.max(t[i].left?t[i].left.height:0,t[i].right?t[i].right.height:0),t[i].balanceFactor()>1&&(e=t[i].rightTooSmall(),0===i&&(n=e)),t[i].balanceFactor()<-1&&(e=t[i].leftTooSmall(),0===i&&(n=e));return n}insert(t,e){const i=[];let n=this;if(!Object.prototype.hasOwnProperty.call(this,"key"))return this.key=t,this.data.push(e),this.height=1,this;for(;;){if(0===n.compareKeys(n.key,t)){if(n.unique){const e=new Error(`Can't insert key ${JSON.stringify(t)}, it violates the unique constraint`);throw e.key=t,e.errorType="uniqueViolated",e}return n.data.push(e),this}if(i.push(n),n.compareKeys(t,n.key)<0){if(!n.left){i.push(n.createLeftChild({key:t,value:e}));break}n=n.left}else{if(!n.right){i.push(n.createRightChild({key:t,value:e}));break}n=n.right}}return this.rebalanceAlongPath(i)}delete(t,e){const i=[];let n,r=this;const s=[];if(!Object.prototype.hasOwnProperty.call(this,"key"))return this;for(;0!==r.compareKeys(t,r.key);)if(s.push(r),r.compareKeys(t,r.key)<0){if(!r.left)return this;r=r.left}else{if(!r.right)return this;r=r.right}if(r.data.length>1&&void 0!==e)return r.data.forEach((function(t){r.checkValueEquality(t,e)||i.push(t)})),r.data=i,this;if(!r.left&&!r.right)return r===this?(delete r.key,r.data=[],delete r.height,this):(r.parent.left===r?r.parent.left=null:r.parent.right=null,this.rebalanceAlongPath(s));if(!r.left||!r.right)return n=r.left?r.left:r.right,r===this?(n.parent=null,n):(r.parent.left===r?(r.parent.left=n,n.parent=r.parent):(r.parent.right=n,n.parent=r.parent),this.rebalanceAlongPath(s));if(s.push(r),n=r.left,!n.right)return r.key=n.key,r.data=n.data,r.left=n.left,n.left&&(n.left.parent=r),this.rebalanceAlongPath(s);for(;n.right;)s.push(n),n=n.right;return r.key=n.key,r.data=n.data,n.parent.right=n.left,n.left&&(n.left.parent=n.parent),this.rebalanceAlongPath(s)}}s._AVLTree=a,["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach((function(t){s.prototype[t]=function(){return this.tree[t].apply(this.tree,arguments)}})),t.exports=s},41902:(t,e,i)=>{const n=i(45639);function r(t,e){for(let i=0;i<e.length;i+=1)t.push(e[i])}t.exports=class{constructor(t){t=t||{},this.left=null,this.right=null,this.parent=void 0!==t.parent?t.parent:null,Object.prototype.hasOwnProperty.call(t,"key")&&(this.key=t.key),this.data=Object.prototype.hasOwnProperty.call(t,"value")?[t.value]:[],this.unique=t.unique||!1,this.compareKeys=t.compareKeys||n.defaultCompareKeysFunction,this.checkValueEquality=t.checkValueEquality||n.defaultCheckValueEquality}getMaxKeyDescendant(){return this.right?this.right.getMaxKeyDescendant():this}getMaxKey(){return this.getMaxKeyDescendant().key}getMinKeyDescendant(){return this.left?this.left.getMinKeyDescendant():this}getMinKey(){return this.getMinKeyDescendant().key}checkAllNodesFullfillCondition(t){Object.prototype.hasOwnProperty.call(this,"key")&&(t(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(t),this.right&&this.right.checkAllNodesFullfillCondition(t))}checkNodeOrdering(){Object.prototype.hasOwnProperty.call(this,"key")&&(this.left&&(this.left.checkAllNodesFullfillCondition((t=>{if(this.compareKeys(t,this.key)>=0)throw new Error(`Tree with root ${this.key} is not a binary search tree`)})),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition((t=>{if(this.compareKeys(t,this.key)<=0)throw new Error(`Tree with root ${this.key} is not a binary search tree`)})),this.right.checkNodeOrdering()))}checkInternalPointers(){if(this.left){if(this.left.parent!==this)throw new Error(`Parent pointer broken for key ${this.key}`);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error(`Parent pointer broken for key ${this.key}`);this.right.checkInternalPointers()}}checkIsBST(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error("The root shouldn't have a parent")}getNumberOfKeys(){let t;return Object.prototype.hasOwnProperty.call(this,"key")?(t=1,this.left&&(t+=this.left.getNumberOfKeys()),this.right&&(t+=this.right.getNumberOfKeys()),t):0}createSimilar(t){return(t=t||{}).unique=this.unique,t.compareKeys=this.compareKeys,t.checkValueEquality=this.checkValueEquality,new this.constructor(t)}createLeftChild(t){const e=this.createSimilar(t);return e.parent=this,this.left=e,e}createRightChild(t){const e=this.createSimilar(t);return e.parent=this,this.right=e,e}insert(t,e){if(!Object.prototype.hasOwnProperty.call(this,"key"))return this.key=t,void this.data.push(e);if(0!==this.compareKeys(this.key,t))this.compareKeys(t,this.key)<0?this.left?this.left.insert(t,e):this.createLeftChild({key:t,value:e}):this.right?this.right.insert(t,e):this.createRightChild({key:t,value:e});else{if(this.unique){const e=new Error(`Can't insert key ${JSON.stringify(t)}, it violates the unique constraint`);throw e.key=t,e.errorType="uniqueViolated",e}this.data.push(e)}}search(t){return Object.prototype.hasOwnProperty.call(this,"key")?0===this.compareKeys(this.key,t)?this.data:this.compareKeys(t,this.key)<0?this.left?this.left.search(t):[]:this.right?this.right.search(t):[]:[]}getLowerBoundMatcher(t){return Object.prototype.hasOwnProperty.call(t,"$gt")||Object.prototype.hasOwnProperty.call(t,"$gte")?Object.prototype.hasOwnProperty.call(t,"$gt")&&Object.prototype.hasOwnProperty.call(t,"$gte")?0===this.compareKeys(t.$gte,t.$gt)?e=>this.compareKeys(e,t.$gt)>0:this.compareKeys(t.$gte,t.$gt)>0?e=>this.compareKeys(e,t.$gte)>=0:e=>this.compareKeys(e,t.$gt)>0:Object.prototype.hasOwnProperty.call(t,"$gt")?e=>this.compareKeys(e,t.$gt)>0:e=>this.compareKeys(e,t.$gte)>=0:()=>!0}getUpperBoundMatcher(t){return Object.prototype.hasOwnProperty.call(t,"$lt")||Object.prototype.hasOwnProperty.call(t,"$lte")?Object.prototype.hasOwnProperty.call(t,"$lt")&&Object.prototype.hasOwnProperty.call(t,"$lte")?0===this.compareKeys(t.$lte,t.$lt)?e=>this.compareKeys(e,t.$lt)<0:this.compareKeys(t.$lte,t.$lt)<0?e=>this.compareKeys(e,t.$lte)<=0:e=>this.compareKeys(e,t.$lt)<0:Object.prototype.hasOwnProperty.call(t,"$lt")?e=>this.compareKeys(e,t.$lt)<0:e=>this.compareKeys(e,t.$lte)<=0:()=>!0}betweenBounds(t,e,i){const n=[];return Object.prototype.hasOwnProperty.call(this,"key")?(e=e||this.getLowerBoundMatcher(t),i=i||this.getUpperBoundMatcher(t),e(this.key)&&this.left&&r(n,this.left.betweenBounds(t,e,i)),e(this.key)&&i(this.key)&&r(n,this.data),i(this.key)&&this.right&&r(n,this.right.betweenBounds(t,e,i)),n):[]}deleteIfLeaf(){return!(this.left||this.right||(this.parent?(this.parent.left===this?this.parent.left=null:this.parent.right=null,0):(delete this.key,this.data=[],0)))}deleteIfOnlyOneChild(){let t;return this.left&&!this.right&&(t=this.left),!this.left&&this.right&&(t=this.right),!!t&&(this.parent?(this.parent.left===this?(this.parent.left=t,t.parent=this.parent):(this.parent.right=t,t.parent=this.parent),!0):(this.key=t.key,this.data=t.data,this.left=null,t.left&&(this.left=t.left,t.left.parent=this),this.right=null,t.right&&(this.right=t.right,t.right.parent=this),!0))}delete(t,e){const i=[];let n;if(Object.prototype.hasOwnProperty.call(this,"key"))if(this.compareKeys(t,this.key)<0)this.left&&this.left.delete(t,e);else if(this.compareKeys(t,this.key)>0)this.right&&this.right.delete(t,e);else if(0!==!this.compareKeys(t,this.key))return this.data.length>1&&void 0!==e?(this.data.forEach((t=>{this.checkValueEquality(t,e)||i.push(t)})),void(this.data=i)):void(this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(Math.random()>=.5?(n=this.left.getMaxKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.left=n.left,n.left&&(n.left.parent=n.parent)):(n.parent.right=n.left,n.left&&(n.left.parent=n.parent))):(n=this.right.getMinKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.right=n.right,n.right&&(n.right.parent=n.parent)):(n.parent.left=n.right,n.right&&(n.right.parent=n.parent)))))}executeOnEveryNode(t){this.left&&this.left.executeOnEveryNode(t),t(this),this.right&&this.right.executeOnEveryNode(t)}prettyPrint(t,e){e=e||"",console.log(`${e}* ${this.key}`),t&&console.log(`${e}* ${this.data}`),(this.left||this.right)&&(this.left?this.left.prettyPrint(t,`${e}  `):console.log(`${e}  *`),this.right?this.right.prettyPrint(t,`${e}  `):console.log(`${e}  *`))}}},45639:t=>{const e=t=>{if(0===t)return[];if(1===t)return[0];const i=e(t-1),n=Math.floor(Math.random()*t);return i.splice(n,0,t-1),i};t.exports.getRandomArray=e,t.exports.defaultCompareKeysFunction=(t,e)=>{if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=new Error("Couldn't compare elements");throw i.a=t,i.b=e,i},t.exports.defaultCheckValueEquality=(t,e)=>t===e},83674:t=>{t.exports={}},91725:t=>{t.exports.uid=t=>(t=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=t.length%3;let n,r="";for(let a=0,o=t.length-i;a<o;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r+=e[(s=n)>>18&63]+e[s>>12&63]+e[s>>6&63]+e[63&s];var s;return 1===i?(n=t[t.length-1],r+=e[n>>2],r+=e[n<<4&63],r+="=="):2===i&&(n=(t[t.length-2]<<8)+t[t.length-1],r+=e[n>>10],r+=e[n>>4&63],r+=e[n<<2&63],r+="="),r})((t=>{const e=new Array(t);for(let i,n=0;n<t;n++)0==(3&n)&&(i=4294967296*Math.random()),e[n]=i>>>((3&n)<<3)&255;return e})(Math.ceil(Math.max(8,2*t)))).replace(/[+/]/g,"").slice(0,t)},70149:(t,e,i)=>{const n=i(69483).createInstance({name:"NeDB",storeName:"nedbdata"}),r=async(t,e,i)=>{try{await n.setItem(t,e)}catch(t){console.warn("An error happened while writing, skip")}};t.exports.existsAsync=async t=>{try{return null!==await n.getItem(t)}catch(t){return!1}},t.exports.renameAsync=async(t,e)=>{try{const i=await n.getItem(t);null===i?await n.removeItem(e):(await n.setItem(e,i),await n.removeItem(t))}catch(t){console.warn("An error happened while renaming, skip")}},t.exports.writeFileAsync=r,t.exports.crashSafeWriteFileLinesAsync=async(t,e)=>{e.push(""),await r(t,e.join("\n"))},t.exports.appendFileAsync=async(t,e,i)=>{try{const i=await n.getItem(t)||"";await n.setItem(t,i+e)}catch(t){console.warn("An error happened appending to file writing, skip")}},t.exports.readFileAsync=async(t,e)=>{try{return await n.getItem(t)||""}catch(t){return console.warn("An error happened while reading, skip"),""}},t.exports.unlinkAsync=async t=>{try{await n.removeItem(t)}catch(t){console.warn("An error happened while unlinking, skip")}},t.exports.mkdirAsync=(t,e)=>Promise.resolve(),t.exports.ensureDatafileIntegrityAsync=t=>Promise.resolve()},52795:(t,e,i)=>{const n=i(60138);t.exports=n},2018:(t,e,i)=>{const n=i(4442),{callbackify:r}=i(89539);t.exports=class{constructor(t,e,i){this.db=t,this.query=e||{},i&&(this.mapFn=i),this._limit=void 0,this._skip=void 0,this._sort=void 0,this._projection=void 0}limit(t){return this._limit=t,this}skip(t){return this._skip=t,this}sort(t){return this._sort=t,this}projection(t){return this._projection=t,this}_project(t){const e=[];let i;if(void 0===this._projection||0===Object.keys(this._projection).length)return t;const r=0!==this._projection._id,{_id:s,...a}=this._projection;this._projection=a;const o=Object.keys(this._projection);return o.forEach((t=>{if(void 0!==i&&this._projection[t]!==i)throw new Error("Can't both keep and omit fields except for _id");i=this._projection[t]})),t.forEach((t=>{let s;1===i?(s={$set:{}},o.forEach((e=>{s.$set[e]=n.getDotValue(t,e),void 0===s.$set[e]&&delete s.$set[e]})),s=n.modify({},s)):(s={$unset:{}},o.forEach((t=>{s.$unset[t]=!0})),s=n.modify(t,s)),r?s._id=t._id:delete s._id,e.push(s)})),e}async _execAsync(){let t=[],e=0,i=0;const r=await this.db._getCandidatesAsync(this.query);for(const s of r)if(n.match(s,this.query))if(this._sort)t.push(s);else if(this._skip&&this._skip>i)i+=1;else if(t.push(s),e+=1,this._limit&&this._limit<=e)break;if(this._sort){const e=Object.entries(this._sort).map((([t,e])=>({key:t,direction:e})));t.sort(((t,i)=>{for(const r of e){const e=r.direction*n.compareThings(n.getDotValue(t,r.key),n.getDotValue(i,r.key),this.db.compareStrings);if(0!==e)return e}return 0}));const i=this._limit||t.length,r=this._skip||0;t=t.slice(r,r+i)}return t=this._project(t),this.mapFn?this.mapFn(t):t}exec(t){r((()=>this.execAsync()))(t)}execAsync(){return this.db.executor.pushAsync((()=>this._execAsync()))}then(t,e){return this.execAsync().then(t,e)}catch(t){return this.execAsync().catch(t)}finally(t){return this.execAsync().finally(t)}}},60138:(t,e,i)=>{const{EventEmitter:n}=i(17187),{callbackify:r,deprecate:s}=i(89539),a=i(2018),o=i(91725),l=i(96454),c=i(97863),u=i(4442),h=i(63717),{isDate:d}=i(67105);t.exports=class extends n{constructor(t){let e;super(),"string"==typeof t?s((()=>{e=t,this.inMemoryOnly=!1}),"@seald-io/nedb: Giving a string to the Datastore constructor is deprecated and will be removed in the next major version. Please use an options object with an argument 'filename'.")():(e=(t=t||{}).filename,this.inMemoryOnly=t.inMemoryOnly||!1,this.autoload=t.autoload||!1,this.timestampData=t.timestampData||!1),e&&"string"==typeof e&&0!==e.length?this.filename=e:(this.filename=null,this.inMemoryOnly=!0),this.compareStrings=t.compareStrings,this.persistence=new h({db:this,afterSerialization:t.afterSerialization,beforeDeserialization:t.beforeDeserialization,corruptAlertThreshold:t.corruptAlertThreshold,modes:t.modes,testSerializationHooks:t.testSerializationHooks}),this.executor=new l,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new c({fieldName:"_id",unique:!0}),this.ttlIndexes={},this.autoload?(this.autoloadPromise=this.loadDatabaseAsync(),this.autoloadPromise.then((()=>{t.onload&&t.onload()}),(e=>{if(!t.onload)throw e;t.onload(e)}))):this.autoloadPromise=null,this._autocompactionIntervalId=null}compactDatafileAsync(){return this.executor.pushAsync((()=>this.persistence.persistCachedDatabaseAsync()))}compactDatafile(t){const e=this.compactDatafileAsync();"function"==typeof t&&r((()=>e))(t)}setAutocompactionInterval(t){if(Number.isNaN(Number(t)))throw new Error("Interval must be a non-NaN number");const e=Math.max(Number(t),5e3);this.stopAutocompaction(),this._autocompactionIntervalId=setInterval((()=>{this.compactDatafile()}),e)}stopAutocompaction(){this._autocompactionIntervalId&&(clearInterval(this._autocompactionIntervalId),this._autocompactionIntervalId=null)}loadDatabase(t){const e=this.loadDatabaseAsync();"function"==typeof t&&r((()=>e))(t)}dropDatabaseAsync(){return this.persistence.dropDatabaseAsync()}dropDatabase(t){const e=this.dropDatabaseAsync();"function"==typeof t&&r((()=>e))(t)}loadDatabaseAsync(){return this.executor.pushAsync((()=>this.persistence.loadDatabaseAsync()),!0)}getAllData(){return this.indexes._id.getAll()}_resetIndexes(t){for(const e of Object.values(this.indexes))e.reset(t)}ensureIndex(t={},e){const i=this.ensureIndexAsync(t);"function"==typeof e&&r((()=>i))(e)}async ensureIndexAsync(t={}){if(!t.fieldName){const t=new Error("Cannot create an index without a fieldName");throw t.missingFieldName=!0,t}if(!this.indexes[t.fieldName]){this.indexes[t.fieldName]=new c(t),void 0!==t.expireAfterSeconds&&(this.ttlIndexes[t.fieldName]=t.expireAfterSeconds);try{this.indexes[t.fieldName].insert(this.getAllData())}catch(e){throw delete this.indexes[t.fieldName],e}await this.executor.pushAsync((()=>this.persistence.persistNewStateAsync([{$$indexCreated:t}])),!0)}}removeIndex(t,e=(()=>{})){const i=this.removeIndexAsync(t);r((()=>i))(e)}async removeIndexAsync(t){delete this.indexes[t],await this.executor.pushAsync((()=>this.persistence.persistNewStateAsync([{$$indexRemoved:t}])),!0)}_addToIndexes(t){let e,i;const n=Object.keys(this.indexes);for(let r=0;r<n.length;r+=1)try{this.indexes[n[r]].insert(t)}catch(t){e=r,i=t;break}if(i){for(let i=0;i<e;i+=1)this.indexes[n[i]].remove(t);throw i}}_removeFromIndexes(t){for(const e of Object.values(this.indexes))e.remove(t)}_updateIndexes(t,e){let i,n;const r=Object.keys(this.indexes);for(let s=0;s<r.length;s+=1)try{this.indexes[r[s]].update(t,e)}catch(t){i=s,n=t;break}if(n){for(let n=0;n<i;n+=1)this.indexes[r[n]].revertUpdate(t,e);throw n}}_getRawCandidates(t){const e=Object.keys(this.indexes);let i;return i=Object.entries(t).filter((([t,i])=>!("string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i&&!d(i)&&null!==i)&&e.includes(t))).pop(),i?this.indexes[i[0]].getMatching(i[1]):(i=Object.entries(t).filter((([i,n])=>!(!t[i]||!Object.prototype.hasOwnProperty.call(t[i],"$in"))&&e.includes(i))).pop(),i?this.indexes[i[0]].getMatching(i[1].$in):(i=Object.entries(t).filter((([i,n])=>!(!t[i]||!(Object.prototype.hasOwnProperty.call(t[i],"$lt")||Object.prototype.hasOwnProperty.call(t[i],"$lte")||Object.prototype.hasOwnProperty.call(t[i],"$gt")||Object.prototype.hasOwnProperty.call(t[i],"$gte")))&&e.includes(i))).pop(),i?this.indexes[i[0]].getBetweenBounds(i[1]):this.getAllData()))}async _getCandidatesAsync(t,e=!1){const i=[],n=this._getRawCandidates(t);if(e)i.push(...n);else{const t=[],e=Object.keys(this.ttlIndexes);n.forEach((n=>{e.every((t=>!(void 0!==n[t]&&d(n[t])&&Date.now()>n[t].getTime()+1e3*this.ttlIndexes[t])))?i.push(n):t.push(n._id)}));for(const e of t)await this._removeAsync({_id:e},{})}return i}async _insertAsync(t){const e=this._prepareDocumentForInsertion(t);return this._insertInCache(e),await this.persistence.persistNewStateAsync(Array.isArray(e)?e:[e]),u.deepCopy(e)}_createNewId(){let t=o.uid(16);return this.indexes._id.getMatching(t).length>0&&(t=this._createNewId()),t}_prepareDocumentForInsertion(t){let e;if(Array.isArray(t))e=[],t.forEach((t=>{e.push(this._prepareDocumentForInsertion(t))}));else{e=u.deepCopy(t),void 0===e._id&&(e._id=this._createNewId());const i=new Date;this.timestampData&&void 0===e.createdAt&&(e.createdAt=i),this.timestampData&&void 0===e.updatedAt&&(e.updatedAt=i),u.checkObject(e)}return e}_insertInCache(t){Array.isArray(t)?this._insertMultipleDocsInCache(t):this._addToIndexes(t)}_insertMultipleDocsInCache(t){let e,i;for(let n=0;n<t.length;n+=1)try{this._addToIndexes(t[n])}catch(t){i=t,e=n;break}if(i){for(let i=0;i<e;i+=1)this._removeFromIndexes(t[i]);throw i}}insert(t,e){const i=this.insertAsync(t);"function"==typeof e&&r((()=>i))(e)}insertAsync(t){return this.executor.pushAsync((()=>this._insertAsync(t)))}count(t,e){const i=this.countAsync(t);if("function"!=typeof e)return i;r(i.execAsync.bind(i))(e)}countAsync(t){return new a(this,t,(t=>t.length))}find(t,e,i){1===arguments.length?e={}:2===arguments.length&&"function"==typeof e&&(i=e,e={});const n=this.findAsync(t,e);if("function"!=typeof i)return n;r(n.execAsync.bind(n))(i)}findAsync(t,e={}){const i=new a(this,t,(t=>t.map((t=>u.deepCopy(t)))));return i.projection(e),i}findOne(t,e,i){1===arguments.length?e={}:2===arguments.length&&"function"==typeof e&&(i=e,e={});const n=this.findOneAsync(t,e);if("function"!=typeof i)return n;r(n.execAsync.bind(n))(i)}findOneAsync(t,e={}){const i=new a(this,t,(t=>1===t.length?u.deepCopy(t[0]):null));return i.projection(e).limit(1),i}async _updateAsync(t,e,i){const n=void 0!==i.multi&&i.multi;if(void 0!==i.upsert&&i.upsert){const i=new a(this,t);if(1!==(await i.limit(1)._execAsync()).length){let i;try{u.checkObject(e),i=e}catch(n){i=u.modify(u.deepCopy(t,!0),e)}return{numAffected:1,affectedDocuments:await this._insertAsync(i),upsert:!0}}}let r,s=0;const o=[];let l;const c=await this._getCandidatesAsync(t);for(const i of c)u.match(i,t)&&(n||0===s)&&(s+=1,this.timestampData&&(l=i.createdAt),r=u.modify(i,e),this.timestampData&&(r.createdAt=l,r.updatedAt=new Date),o.push({oldDoc:i,newDoc:r}));this._updateIndexes(o);const h=o.map((t=>t.newDoc));if(await this.persistence.persistNewStateAsync(h),i.returnUpdatedDocs){let t=[];return h.forEach((e=>{t.push(u.deepCopy(e))})),n||(t=t[0]),{numAffected:s,affectedDocuments:t,upsert:!1}}return{numAffected:s,upsert:!1,affectedDocuments:null}}update(t,e,i,n){"function"==typeof i&&(n=i,i={}),r(((t,e,i)=>this.updateAsync(t,e,i)))(t,e,i,((t,e={})=>{n&&n(t,e.numAffected,e.affectedDocuments,e.upsert)}))}updateAsync(t,e,i={}){return this.executor.pushAsync((()=>this._updateAsync(t,e,i)))}async _removeAsync(t,e={}){const i=void 0!==e.multi&&e.multi,n=await this._getCandidatesAsync(t,!0),r=[];let s=0;return n.forEach((e=>{u.match(e,t)&&(i||0===s)&&(s+=1,r.push({$$deleted:!0,_id:e._id}),this._removeFromIndexes(e))})),await this.persistence.persistNewStateAsync(r),s}remove(t,e,i){"function"==typeof e&&(i=e,e={});const n=i||(()=>{});r(((t,e)=>this.removeAsync(t,e)))(t,e,n)}removeAsync(t,e={}){return this.executor.pushAsync((()=>this._removeAsync(t,e)))}}},96454:(t,e,i)=>{const n=i(82009);t.exports=class{constructor(){this.ready=!1,this.queue=new n,this.buffer=null,this._triggerBuffer=null,this.resetBuffer()}pushAsync(t,e=!1){return this.ready||e?this.queue.waterfall(t)():this.buffer.waterfall(t)()}processBuffer(){this.ready=!0,this._triggerBuffer(),this.queue.waterfall((()=>this.buffer.guardian))}resetBuffer(){this.buffer=new n,this.buffer.chain(new Promise((t=>{this._triggerBuffer=t}))),this.ready&&this._triggerBuffer()}}},97863:(t,e,i)=>{const n=i(1908).AVLTree,r=i(4442),{uniq:s,isDate:a}=i(67105),o=(t,e)=>t===e,l=t=>null===t?"$null":"string"==typeof t?"$string"+t:"boolean"==typeof t?"$boolean"+t:"number"==typeof t?"$number"+t:a(t)?"$date"+t.getTime():t;t.exports=class{constructor(t){this.fieldName=t.fieldName,this.unique=t.unique||!1,this.sparse=t.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:r.compareThings,checkValueEquality:o},this.tree=new n(this.treeOptions)}reset(t){this.tree=new n(this.treeOptions),t&&this.insert(t)}insert(t){let e,i,n;if(Array.isArray(t))return void this.insertMultipleDocs(t);const a=r.getDotValue(t,this.fieldName);if(void 0!==a||!this.sparse)if(Array.isArray(a)){e=s(a,l);for(let r=0;r<e.length;r+=1)try{this.tree.insert(e[r],t)}catch(t){n=t,i=r;break}if(n){for(let n=0;n<i;n+=1)this.tree.delete(e[n],t);throw n}}else this.tree.insert(a,t)}insertMultipleDocs(t){let e,i;for(let n=0;n<t.length;n+=1)try{this.insert(t[n])}catch(t){e=t,i=n;break}if(e){for(let e=0;e<i;e+=1)this.remove(t[e]);throw e}}remove(t){if(Array.isArray(t))return void t.forEach((t=>{this.remove(t)}));const e=r.getDotValue(t,this.fieldName);void 0===e&&this.sparse||(Array.isArray(e)?s(e,l).forEach((e=>{this.tree.delete(e,t)})):this.tree.delete(e,t))}update(t,e){if(Array.isArray(t))this.updateMultipleDocs(t);else{this.remove(t);try{this.insert(e)}catch(e){throw this.insert(t),e}}}updateMultipleDocs(t){let e,i;for(let e=0;e<t.length;e+=1)this.remove(t[e].oldDoc);for(let n=0;n<t.length;n+=1)try{this.insert(t[n].newDoc)}catch(t){i=t,e=n;break}if(i){for(let i=0;i<e;i+=1)this.remove(t[i].newDoc);for(let e=0;e<t.length;e+=1)this.insert(t[e].oldDoc);throw i}}revertUpdate(t,e){const i=[];Array.isArray(t)?(t.forEach((t=>{i.push({oldDoc:t.newDoc,newDoc:t.oldDoc})})),this.update(i)):this.update(e,t)}getMatching(t){if(Array.isArray(t)){const e={},i=[];return t.forEach((t=>{this.getMatching(t).forEach((t=>{e[t._id]=t}))})),Object.keys(e).forEach((t=>{i.push(e[t])})),i}return this.tree.search(t)}getBetweenBounds(t){return this.tree.betweenBounds(t)}getAll(){const t=[];return this.tree.executeOnEveryNode((e=>{t.push(...e.data)})),t}}},4442:(t,e,i)=>{const{uniq:n,isDate:r,isRegExp:s}=i(67105),a=(t,e)=>{if("number"==typeof t&&(t=t.toString()),!("$"!==t[0]||"$$date"===t&&"number"==typeof e||"$$deleted"===t&&!0===e||"$$indexCreated"===t||"$$indexRemoved"===t))throw new Error("Field names cannot begin with the $ character");if(-1!==t.indexOf("."))throw new Error("Field names cannot contain a .")},o=t=>{if(Array.isArray(t)&&t.forEach((t=>{o(t)})),"object"==typeof t&&null!==t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a(e,t[e]),o(t[e]))};function l(t,e){if("boolean"==typeof t||"number"==typeof t||"string"==typeof t||null===t||r(t))return t;if(Array.isArray(t))return t.map((t=>l(t,e)));if("object"==typeof t){const i={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(!e||"$"!==n[0]&&-1===n.indexOf("."))&&(i[n]=l(t[n],e));return i}}const c=t=>"boolean"==typeof t||"number"==typeof t||"string"==typeof t||null===t||r(t)||Array.isArray(t),u=(t,e)=>t<e?-1:t>e?1:0,h=(t,e)=>{const i=Math.min(t.length,e.length);for(let n=0;n<i;n+=1){const i=d(t[n],e[n]);if(0!==i)return i}return u(t.length,e.length)},d=(t,e,i)=>{const n=i||u;if(void 0===t)return void 0===e?0:-1;if(void 0===e)return 1;if(null===t)return null===e?0:-1;if(null===e)return 1;if("number"==typeof t)return"number"==typeof e?u(t,e):-1;if("number"==typeof e)return"number"==typeof t?u(t,e):1;if("string"==typeof t)return"string"==typeof e?n(t,e):-1;if("string"==typeof e)return"string"==typeof t?n(t,e):1;if("boolean"==typeof t)return"boolean"==typeof e?u(t,e):-1;if("boolean"==typeof e)return"boolean"==typeof t?u(t,e):1;if(r(t))return r(e)?u(t.getTime(),e.getTime()):-1;if(r(e))return r(t)?u(t.getTime(),e.getTime()):1;if(Array.isArray(t))return Array.isArray(e)?h(t,e):-1;if(Array.isArray(e))return Array.isArray(t)?h(t,e):1;const s=Object.keys(t).sort(),a=Object.keys(e).sort();for(let i=0;i<Math.min(s.length,a.length);i+=1){const n=d(t[s[i]],e[a[i]]);if(0!==n)return n}return u(s.length,a.length)},p=(t,e=!1)=>(i,n,r)=>{const s=(i,n,r)=>{const a="string"==typeof n?n.split("."):n;if(1===a.length)t(i,n,r);else{if(void 0===i[a[0]]){if(e)return;i[a[0]]={}}s(i[a[0]],a.slice(1),r)}};return s(i,n,r)},f=(t,e,i)=>{if(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),!Array.isArray(t[e]))throw new Error("Can't $addToSet an element on non-array values");if(null!==i&&"object"==typeof i&&i.$each){if(Object.keys(i).length>1)throw new Error("Can't use another field in conjunction with $each");if(!Array.isArray(i.$each))throw new Error("$each requires an array value");i.$each.forEach((i=>{f(t,e,i)}))}else{let n=!0;t[e].forEach((t=>{0===d(t,i)&&(n=!1)})),n&&t[e].push(i)}},m={$set:p(((t,e,i)=>{t[e]=i})),$unset:p(((t,e,i)=>{delete t[e]}),!0),$min:p(((t,e,i)=>{(void 0===t[e]||i<t[e])&&(t[e]=i)})),$max:p(((t,e,i)=>{(void 0===t[e]||i>t[e])&&(t[e]=i)})),$inc:p(((t,e,i)=>{if("number"!=typeof i)throw new Error(`${i} must be a number`);if("number"!=typeof t[e]){if(Object.prototype.hasOwnProperty.call(t,e))throw new Error("Don't use the $inc modifier on non-number fields");t[e]=i}else t[e]+=i})),$pull:p(((t,e,i)=>{if(!Array.isArray(t[e]))throw new Error("Can't $pull an element from non-array values");const n=t[e];for(let t=n.length-1;t>=0;t-=1)T(n[t],i)&&n.splice(t,1)})),$pop:p(((t,e,i)=>{if(!Array.isArray(t[e]))throw new Error("Can't $pop an element from non-array values");if("number"!=typeof i)throw new Error(`${i} isn't an integer, can't use it with $pop`);0!==i&&(t[e]=i>0?t[e].slice(0,t[e].length-1):t[e].slice(1))})),$addToSet:p(f),$push:p(((t,e,i)=>{if(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),!Array.isArray(t[e]))throw new Error("Can't $push an element on non-array values");if(null!==i&&"object"==typeof i&&i.$slice&&void 0===i.$each&&(i.$each=[]),null!==i&&"object"==typeof i&&i.$each){if(Object.keys(i).length>=3||2===Object.keys(i).length&&void 0===i.$slice)throw new Error("Can only use $slice in cunjunction with $each when $push to array");if(!Array.isArray(i.$each))throw new Error("$each requires an array value");if(i.$each.forEach((i=>{t[e].push(i)})),void 0===i.$slice||"number"!=typeof i.$slice)return;if(0===i.$slice)t[e]=[];else{let n,r;const s=t[e].length;i.$slice<0?(n=Math.max(0,s+i.$slice),r=s):i.$slice>0&&(n=0,r=Math.min(s,i.$slice)),t[e]=t[e].slice(n,r)}}else t[e].push(i)}))},g=(t,e)=>{const i="string"==typeof e?e.split("."):e;if(t){if(0===i.length)return t;if(1===i.length)return t[i[0]];if(Array.isArray(t[i[0]])){const e=parseInt(i[1],10);return"number"!=typeof e||isNaN(e)?t[i[0]].map((t=>g(t,i.slice(1)))):g(t[i[0]][e],i.slice(2))}return g(t[i[0]],i.slice(1))}},y=(t,e)=>{if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e)return t===e;if(r(t)||r(e))return r(t)&&r(e)&&t.getTime()===e.getTime();if((!Array.isArray(t)||!Array.isArray(e))&&(Array.isArray(t)||Array.isArray(e))||void 0===t||void 0===e)return!1;let i,n;try{i=Object.keys(t),n=Object.keys(e)}catch(t){return!1}if(i.length!==n.length)return!1;for(const r of i){if(-1===n.indexOf(r))return!1;if(!y(t[r],e[r]))return!1}return!0},v=(t,e)=>!("string"!=typeof t&&"number"!=typeof t&&!r(t)&&"string"!=typeof e&&"number"!=typeof e&&!r(e))&&typeof t==typeof e,b={$lt:(t,e)=>v(t,e)&&t<e,$lte:(t,e)=>v(t,e)&&t<=e,$gt:(t,e)=>v(t,e)&&t>e,$gte:(t,e)=>v(t,e)&&t>=e,$ne:(t,e)=>void 0===t||!y(t,e),$in:(t,e)=>{if(!Array.isArray(e))throw new Error("$in operator called with a non-array");for(const i of e)if(y(t,i))return!0;return!1},$nin:(t,e)=>{if(!Array.isArray(e))throw new Error("$nin operator called with a non-array");return!b.$in(t,e)},$regex:(t,e)=>{if(!s(e))throw new Error("$regex operator called with non regular expression");return"string"==typeof t&&e.test(t)},$exists:(t,e)=>(e=!(!e&&""!==e),void 0===t?!e:e),$size:(t,e)=>{if(!Array.isArray(t))return!1;if(e%1!=0)throw new Error("$size operator called without an integer");return t.length===e},$elemMatch:(t,e)=>!!Array.isArray(t)&&t.some((t=>T(t,e)))},_={$size:!0,$elemMatch:!0},w={$or:(t,e)=>{if(!Array.isArray(e))throw new Error("$or operator used without an array");for(let i=0;i<e.length;i+=1)if(T(t,e[i]))return!0;return!1},$and:(t,e)=>{if(!Array.isArray(e))throw new Error("$and operator used without an array");for(let i=0;i<e.length;i+=1)if(!T(t,e[i]))return!1;return!0},$not:(t,e)=>!T(t,e),$where:(t,e)=>{if("function"!=typeof e)throw new Error("$where operator used without a function");const i=e.call(t);if("boolean"!=typeof i)throw new Error("$where function must return boolean");return i}},T=(t,e)=>{if(c(t)||c(e))return S({needAKey:t},"needAKey",e);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const n=e[i];if("$"===i[0]){if(!w[i])throw new Error(`Unknown logical operator ${i}`);if(!w[i](t,n))return!1}else if(!S(t,i,n))return!1}return!0};function S(t,e,i,n){const r=g(t,e);if(Array.isArray(r)&&!n){if(Array.isArray(i))return S(t,e,i,!0);if(null!==i&&"object"==typeof i&&!s(i))for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&_[n])return S(t,e,i,!0);for(const t of r)if(S({k:t},"k",i))return!0;return!1}if(null!==i&&"object"==typeof i&&!s(i)&&!Array.isArray(i)){const t=Object.keys(i),e=t.map((t=>t[0])),n=e.filter((t=>"$"===t));if(0!==n.length&&n.length!==e.length)throw new Error("You cannot mix operators and normal fields");if(n.length>0){for(const e of t){if(!b[e])throw new Error(`Unknown comparison function ${e}`);if(!b[e](r,i[e]))return!1}return!0}}return s(i)?b.$regex(r,i):y(r,i)}t.exports.serialize=t=>JSON.stringify(t,(function(t,e){if(a(t,e),void 0!==e)return null===e?null:"function"==typeof this[t].getTime?{$$date:this[t].getTime()}:e})),t.exports.deserialize=t=>JSON.parse(t,(function(t,e){return"$$date"===t?new Date(e):"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e?e:e&&e.$$date?e.$$date:e})),t.exports.deepCopy=l,t.exports.checkObject=o,t.exports.isPrimitiveType=c,t.exports.modify=(t,e)=>{const i=Object.keys(e),r=i.map((t=>t[0])),s=r.filter((t=>"$"===t));let a,c;if(-1!==i.indexOf("_id")&&e._id!==t._id)throw new Error("You cannot change a document's _id");if(0!==s.length&&s.length!==r.length)throw new Error("You cannot mix modifiers and normal fields");if(0===s.length?(a=l(e),a._id=t._id):(c=n(i),a=l(t),c.forEach((t=>{if(!m[t])throw new Error(`Unknown modifier ${t}`);if("object"!=typeof e[t])throw new Error(`Modifier ${t}'s argument must be an object`);Object.keys(e[t]).forEach((i=>{m[t](a,i,e[t][i])}))}))),o(a),t._id!==a._id)throw new Error("You can't change a document's _id");return a},t.exports.getDotValue=g,t.exports.match=T,t.exports.areThingsEqual=y,t.exports.compareThings=d},63717:(t,e,i)=>{const n=i(26470),{deprecate:r}=i(89539),s=i(83674),a=i(91725),o=i(97863),l=i(4442),c=i(70149);class u{constructor(t){if(this.db=t.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=void 0!==t.corruptAlertThreshold?t.corruptAlertThreshold:.1,this.modes=void 0!==t.modes?t.modes:{fileMode:420,dirMode:493},void 0===this.modes.fileMode&&(this.modes.fileMode=420),void 0===this.modes.dirMode&&(this.modes.dirMode=493),!this.inMemoryOnly&&this.filename&&"~"===this.filename.charAt(this.filename.length-1))throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files");if(t.afterSerialization&&!t.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss");if(!t.afterSerialization&&t.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss");if(this.afterSerialization=t.afterSerialization||(t=>t),this.beforeDeserialization=t.beforeDeserialization||(t=>t),void 0===t.testSerializationHooks||t.testSerializationHooks)for(let t=1;t<30;t+=1)for(let e=0;e<10;e+=1){const e=a.uid(t);if(this.beforeDeserialization(this.afterSerialization(e))!==e)throw new Error("beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start NeDB to prevent dataloss")}}async persistCachedDatabaseAsync(){const t=[];this.inMemoryOnly||(this.db.getAllData().forEach((e=>{t.push(this.afterSerialization(l.serialize(e)))})),Object.keys(this.db.indexes).forEach((e=>{"_id"!==e&&t.push(this.afterSerialization(l.serialize({$$indexCreated:{fieldName:e,unique:this.db.indexes[e].unique,sparse:this.db.indexes[e].sparse}})))})),await c.crashSafeWriteFileLinesAsync(this.filename,t,this.modes),this.db.emit("compaction.done"))}compactDatafile(t){r((t=>this.db.compactDatafile(t)),"@seald-io/nedb: calling Datastore#persistence#compactDatafile is deprecated, please use Datastore#compactDatafile, it will be removed in the next major version.")(t)}setAutocompactionInterval(t){r((t=>this.db.setAutocompactionInterval(t)),"@seald-io/nedb: calling Datastore#persistence#setAutocompactionInterval is deprecated, please use Datastore#setAutocompactionInterval, it will be removed in the next major version.")(t)}stopAutocompaction(){r((()=>this.db.stopAutocompaction()),"@seald-io/nedb: calling Datastore#persistence#stopAutocompaction is deprecated, please use Datastore#stopAutocompaction, it will be removed in the next major version.")()}async persistNewStateAsync(t){let e="";this.inMemoryOnly||(t.forEach((t=>{e+=this.afterSerialization(l.serialize(t))+"\n"})),0!==e.length&&await c.appendFileAsync(this.filename,e,{encoding:"utf8",mode:this.modes.fileMode}))}treatRawData(t){const e=t.split("\n"),i={},n={};let r=e.length,s=0;for(const t of e)if(""!==t)try{const e=l.deserialize(this.beforeDeserialization(t));e._id?!0===e.$$deleted?delete i[e._id]:i[e._id]=e:e.$$indexCreated&&null!=e.$$indexCreated.fieldName?n[e.$$indexCreated.fieldName]=e.$$indexCreated:"string"==typeof e.$$indexRemoved&&delete n[e.$$indexRemoved]}catch(t){s+=1}else r--;if(r>0){const t=s/r;if(t>this.corruptAlertThreshold){const e=new Error(`${Math.floor(100*t)}% of the data file is corrupt, more than given corruptAlertThreshold (${Math.floor(100*this.corruptAlertThreshold)}%). Cautiously refusing to start NeDB to prevent dataloss.`);throw e.corruptionRate=t,e.corruptItems=s,e.dataLength=r,e}}return{data:Object.values(i),indexes:n}}treatRawStreamAsync(t){return new Promise(((e,i)=>{const n={},r={};let a=0;const o=s(t);let c=0;o.on("data",(t=>{if(""!==t){try{const e=l.deserialize(this.beforeDeserialization(t));e._id?!0===e.$$deleted?delete n[e._id]:n[e._id]=e:e.$$indexCreated&&null!=e.$$indexCreated.fieldName?r[e.$$indexCreated.fieldName]=e.$$indexCreated:"string"==typeof e.$$indexRemoved&&delete r[e.$$indexRemoved]}catch(t){a+=1}c++}})),o.on("end",(()=>{if(c>0){const t=a/c;if(t>this.corruptAlertThreshold){const e=new Error(`${Math.floor(100*t)}% of the data file is corrupt, more than given corruptAlertThreshold (${Math.floor(100*this.corruptAlertThreshold)}%). Cautiously refusing to start NeDB to prevent dataloss.`);return e.corruptionRate=t,e.corruptItems=a,e.dataLength=c,void i(e,null)}}const t=Object.values(n);e({data:t,indexes:r})})),o.on("error",(function(t){i(t,null)}))}))}async loadDatabaseAsync(){if(this.db._resetIndexes(),this.inMemoryOnly)return;let t;if(await u.ensureDirectoryExistsAsync(n.dirname(this.filename),this.modes.dirMode),await c.ensureDatafileIntegrityAsync(this.filename,this.modes.fileMode),c.readFileStream){const e=c.readFileStream(this.filename,{encoding:"utf8",mode:this.modes.fileMode});t=await this.treatRawStreamAsync(e)}else{const e=await c.readFileAsync(this.filename,{encoding:"utf8",mode:this.modes.fileMode});t=this.treatRawData(e)}Object.keys(t.indexes).forEach((e=>{this.db.indexes[e]=new o(t.indexes[e])}));try{this.db._resetIndexes(t.data)}catch(t){throw this.db._resetIndexes(),t}await this.db.persistence.persistCachedDatabaseAsync(),this.db.executor.processBuffer()}async dropDatabaseAsync(){this.db.stopAutocompaction(),this.db.executor.ready=!1,this.db.executor.resetBuffer(),await this.db.executor.queue.guardian,this.db.indexes={},this.db.indexes._id=new o({fieldName:"_id",unique:!0}),this.db.ttlIndexes={},this.db.inMemoryOnly||await this.db.executor.pushAsync((async()=>{await c.existsAsync(this.filename)&&await c.unlinkAsync(this.filename)}),!0)}static async ensureDirectoryExistsAsync(t,e=493){await c.mkdirAsync(t,{recursive:!0,mode:e})}}t.exports=u},67105:t=>{const e=t=>"object"==typeof t&&null!==t;t.exports.uniq=(t,e)=>e?[...new Map(t.map((t=>[e(t),t]))).values()]:[...new Set(t)],t.exports.isDate=t=>e(t)&&"[object Date]"===Object.prototype.toString.call(t),t.exports.isRegExp=t=>e(t)&&"[object RegExp]"===Object.prototype.toString.call(t)},82009:t=>{t.exports=class{constructor(){this.guardian=Promise.resolve()}waterfall(t){return(...e)=>(this.guardian=this.guardian.then((()=>t(...e).then((t=>({error:!1,result:t})),(t=>({error:!0,result:t}))))),this.guardian.then((({error:t,result:e})=>t?Promise.reject(e):Promise.resolve(e))))}chain(t){return this.waterfall((()=>t))()}}},1875:(t,e,i)=>{"use strict";var n=i(66419),r=i(7163);t.exports=function(t){var e=t.getComponent("MenuItem");return t.extend(e,{constructor:function(t,i){var r=i.source;if(!n.isObject(r))throw new Error('was not provided a "source" object, but rather: '+typeof r);i=n.extend({selectable:!0,label:r.label},i),e.call(this,t,i),this.source=r},handleClick:function(t){e.prototype.handleClick.call(this,t),this.player().trigger(r.QUALITY_REQUESTED,this.source)}})}},62864:(t,e,i)=>{"use strict";var n=i(66419),r=i(7163),s=i(1875),a="vjs-quality-changing";t.exports=function(t){var e,i=t.getComponent("MenuButton"),o=s(t);return e=t.extend(i,{constructor:function(t,e){i.call(this,t,e),t.on(r.QUALITY_REQUESTED,function(e,i){this.setSelectedSource(i),t.addClass(a),t.one("loadeddata",(function(){t.removeClass(a)}))}.bind(this)),t.on(r.PLAYER_SOURCES_CHANGED,function(){this.update()}.bind(this)),t.on(r.QUALITY_SELECTED,function(t,e){this.setSelectedSource(e)}.bind(this)),t.one("ready",function(){this.selectedSrc=t.src(),this.update()}.bind(this)),this.controlText("Open quality selector menu")},setSelectedSource:function(t){var e=t?t.src:void 0;this.selectedSrc!==e&&(this.selectedSrc=e,n.each(this.items,(function(t){t.selected(t.source.src===e)})))},createItems:function(){var t=this.player(),e=t.currentSources();return!e||e.length<2?[]:n.map(e,function(e){return new o(t,{source:e,selected:e.src===this.selectedSrc})}.bind(this))},buildWrapperCSSClass:function(){return"vjs-quality-selector "+i.prototype.buildWrapperCSSClass.call(this)}}),t.registerComponent("QualitySelector",e),e}},7163:t=>{"use strict";t.exports={QUALITY_REQUESTED:"qualityRequested",QUALITY_SELECTED:"qualitySelected",PLAYER_SOURCES_CHANGED:"playerSourcesChanged"}},61470:(t,e,i)=>{"use strict";var n=i(66419),r=i(7163),s=i(62864),a=i(69006),o=i(31527);t.exports=function(t){t=t||window.videojs,s(t),a(t),t.hook("setup",(function(t){t.on(r.QUALITY_REQUESTED,(function(e,i){var r=t.currentSources(),s=t.currentTime(),a=t.playbackRate(),l=t.paused();n.each(r,(function(t){t.selected=!1})),n.findWhere(r,{src:i.src}).selected=!0,t._qualitySelectorSafeSeek&&t._qualitySelectorSafeSeek.onQualitySelectionChange(),t.src(r),t.ready((function(){t._qualitySelectorSafeSeek&&!t._qualitySelectorSafeSeek.hasFinished()||(t._qualitySelectorSafeSeek=new o(t,s),t.playbackRate(a)),l||t.play()}))}))}))},t.exports.EVENTS=r},69006:(t,e,i)=>{"use strict";var n=i(66419),r=i(7163);t.exports=function(t){t.use("*",(function(t){return{setSource:function(e,i){var s,a=t.currentSources();t._qualitySelectorSafeSeek&&t._qualitySelectorSafeSeek.onPlayerSourcesChange(),n.isEqual(a,t._qualitySelectorPreviousSources)||(t.trigger(r.PLAYER_SOURCES_CHANGED,a),t._qualitySelectorPreviousSources=a),s=n.find(a,(function(t){return!0===t.selected||"true"===t.selected||"selected"===t.selected}))||e,t.trigger(r.QUALITY_SELECTED,s),i(null,s)}}}))}},31527:(t,e,i)=>{"use strict";var n=i(219);t.exports=n.extend({init:function(t,e){this._player=t,this._seekToTime=e,this._hasFinished=!1,this._keepThisInstanceWhenPlayerSourcesChange=!1,this._seekWhenSafe()},_seekWhenSafe:function(){this._player.readyState()<3?(this._seekFn=this._seek.bind(this),this._player.one("canplay",this._seekFn)):this._seek()},onPlayerSourcesChange:function(){this._keepThisInstanceWhenPlayerSourcesChange?this._keepThisInstanceWhenPlayerSourcesChange=!1:this.cancel()},onQualitySelectionChange:function(){this.hasFinished()||(this._keepThisInstanceWhenPlayerSourcesChange=!0)},_seek:function(){this._player.currentTime(this._seekToTime),this._keepThisInstanceWhenPlayerSourcesChange=!1,this._hasFinished=!0},hasFinished:function(){return this._hasFinished},cancel:function(){this._player.off("canplay",this._seekFn),this._keepThisInstanceWhenPlayerSourcesChange=!1,this._hasFinished=!0}})},13490:(t,e,i)=>{"use strict";var n=i(58908);t.exports=function(t,e){return void 0===e&&(e=!1),function(i,r,s){if(i)t(i);else if(r.statusCode>=400&&r.statusCode<=599){var a=s;if(e)if(n.TextDecoder){var o=(void 0===(l=r.headers&&r.headers["content-type"])&&(l=""),l.toLowerCase().split(";").reduce((function(t,e){var i=e.split("="),n=i[0],r=i[1];return"charset"===n.trim()?r.trim():t}),"utf-8"));try{a=new TextDecoder(o).decode(s)}catch(t){}}else a=String.fromCharCode.apply(null,new Uint8Array(s));t({cause:a})}else t(null,s);var l}}},9603:(t,e,i)=>{"use strict";var n=i(58908),r=i(10434),s=i(27376);l.httpHandler=i(13490);var a=function(t){var e={};return t?(t.trim().split("\n").forEach((function(t){var i=t.indexOf(":"),n=t.slice(0,i).trim().toLowerCase(),r=t.slice(i+1).trim();void 0===e[n]?e[n]=r:Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]})),e):e};function o(t,e,i){var n=t;return s(e)?(i=e,"string"==typeof t&&(n={uri:t})):n=r({},e,{uri:t}),n.callback=i,n}function l(t,e,i){return c(e=o(t,e,i))}function c(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,i=function(i,n,r){e||(e=!0,t.callback(i,n,r))};function n(){var t=void 0;if(t=u.response?u.response:u.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(u),y)try{t=JSON.parse(t)}catch(t){}return t}function r(t){return clearTimeout(h),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,i(t,v)}function s(){if(!c){var e;clearTimeout(h),e=t.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var r=v,s=null;return 0!==e?(r={body:n(),statusCode:e,method:p,headers:{},url:d,rawRequest:u},u.getAllResponseHeaders&&(r.headers=a(u.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),i(s,r,r.body)}}var o,c,u=t.xhr||null;u||(u=t.cors||t.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var h,d=u.url=t.uri||t.url,p=u.method=t.method||"GET",f=t.body||t.data,m=u.headers=t.headers||{},g=!!t.sync,y=!1,v={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:u};if("json"in t&&!1!==t.json&&(y=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),f=JSON.stringify(!0===t.json?f:t.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(s,0)},u.onload=s,u.onerror=r,u.onprogress=function(){},u.onabort=function(){c=!0},u.ontimeout=r,u.open(p,d,!g,t.username,t.password),g||(u.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(h=setTimeout((function(){if(!c){c=!0,u.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)}}),t.timeout)),u.setRequestHeader)for(o in m)m.hasOwnProperty(o)&&u.setRequestHeader(o,m[o]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(u),u.send(f||null),u}t.exports=l,t.exports.default=l,l.XMLHttpRequest=n.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:n.XDomainRequest,function(t,e){for(var i=0;i<t.length;i++)e(t[i])}(["get","put","post","patch","head","delete"],(function(t){l["delete"===t?"del":t]=function(e,i,n){return(i=o(e,i,n)).method=t.toUpperCase(),c(i)}}))},72167:(t,e)=>{"use strict";function i(t,e){return void 0===e&&(e=Object),e&&"function"==typeof e.freeze?e.freeze(t):t}var n=i({HTML:"text/html",isHTML:function(t){return t===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.assign=function(t,e){if(null===t||"object"!=typeof t)throw new TypeError("target is not an object");for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.find=function(t,e,i){if(void 0===i&&(i=Array.prototype),t&&"function"==typeof i.find)return i.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];if(e.call(void 0,r,n,t))return r}},e.freeze=i,e.MIME_TYPE=n,e.NAMESPACE=r},86129:(t,e,i)=>{var n=i(72167),r=i(41146),s=i(31045),a=i(76925),o=r.DOMImplementation,l=n.NAMESPACE,c=a.ParseError,u=a.XMLReader;function h(t){return t.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function d(t){this.options=t||{locator:{}}}function p(){this.cdata=!1}function f(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function m(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function g(t,e,i){return"string"==typeof t?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}function y(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}d.prototype.parseFromString=function(t,e){var i=this.options,n=new u,r=i.domBuilder||new p,a=i.errorHandler,o=i.locator,c=i.xmlns||{},d=/\/x?html?$/.test(e),f=d?s.HTML_ENTITIES:s.XML_ENTITIES;o&&r.setDocumentLocator(o),n.errorHandler=function(t,e,i){if(!t){if(e instanceof p)return e;t=e}var n={},r=t instanceof Function;function s(e){var s=t[e];!s&&r&&(s=2==t.length?function(i){t(e,i)}:t),n[e]=s&&function(t){s("[xmldom "+e+"]\t"+t+m(i))}||function(){}}return i=i||{},s("warning"),s("error"),s("fatalError"),n}(a,r,o),n.domBuilder=i.domBuilder||r,d&&(c[""]=l.HTML),c.xml=c.xml||l.XML;var g=i.normalizeLineEndings||h;return t&&"string"==typeof t?n.parse(g(t),c,f):n.errorHandler.error("invalid doc source"),r.doc},p.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,n){var r=this.doc,s=r.createElementNS(t,i||e),a=n.length;y(this,s),this.currentElement=s,this.locator&&f(this.locator,s);for(var o=0;o<a;o++){t=n.getURI(o);var l=n.getValue(o),c=(i=n.getQName(o),r.createAttributeNS(t,i));this.locator&&f(n.getLocator(o),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(t,e,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&f(this.locator,i),y(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=g.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(t);else n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&f(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=g.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&f(this.locator,n),y(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(t,e,i);this.locator&&f(this.locator,r),y(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]\t"+t,m(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,m(this.locator))},fatalError:function(t){throw new c(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){p.prototype[t]=function(){return null}})),e.DOMParser=d},41146:(t,e,i)=>{var n=i(72167),r=n.find,s=n.NAMESPACE;function a(t){return""!==t}function o(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function l(t){if(!t)return[];var e=function(t){return t?t.split(/[\t\n\f\r ]+/).filter(a):[]}(t);return Object.keys(e.reduce(o,{}))}function c(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function u(t,e){var i=t.prototype;if(!(i instanceof e)){function n(){}n.prototype=e.prototype,c(i,n=new n),t.prototype=i=n}i.constructor!=t&&("function"!=typeof t&&console.error("unknown Class:"+t),i.constructor=t)}var h={},d=h.ELEMENT_NODE=1,p=h.ATTRIBUTE_NODE=2,f=h.TEXT_NODE=3,m=h.CDATA_SECTION_NODE=4,g=h.ENTITY_REFERENCE_NODE=5,y=h.ENTITY_NODE=6,v=h.PROCESSING_INSTRUCTION_NODE=7,b=h.COMMENT_NODE=8,_=h.DOCUMENT_NODE=9,w=h.DOCUMENT_TYPE_NODE=10,T=h.DOCUMENT_FRAGMENT_NODE=11,S=h.NOTATION_NODE=12,x={},k={},C=(x.INDEX_SIZE_ERR=(k[1]="Index size error",1),x.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2),x.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3)),E=(x.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),x.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),x.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),x.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7),x.NOT_FOUND_ERR=(k[8]="Not found",8)),I=(x.NOT_SUPPORTED_ERR=(k[9]="Not supported",9),x.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10));function P(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,k[t]),this.message=k[t],Error.captureStackTrace&&Error.captureStackTrace(this,P);return i.code=t,e&&(this.message=this.message+": "+e),i}function A(){}function L(t,e){this._node=t,this._refresh=e,O(this)}function O(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var i=t._refresh(t._node);vt(t,"length",i.length),c(i,t),t._inc=e}}function D(){}function M(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function R(t,e,i,n){if(n?e[M(e,n)]=i:e[e.length++]=i,t){i.ownerElement=t;var r=t.ownerDocument;r&&(n&&V(r,t,n),function(t,e,i){t&&t._inc++,i.namespaceURI===s.XMLNS&&(e._nsMap[i.prefix?i.localName:""]=i.value)}(r,t,i))}}function N(t,e,i){var n=M(e,i);if(!(n>=0))throw new P(E,new Error(t.tagName+"@"+i));for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,t){var s=t.ownerDocument;s&&(V(s,t,i),i.ownerElement=null)}}function B(){}function F(){}function $(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function U(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(U(t,e))return!0}while(t=t.nextSibling)}function j(){this.ownerDocument=this}function V(t,e,i,n){t&&t._inc++,i.namespaceURI===s.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function H(t,e,i){if(t&&t._inc){t._inc++;var n=e.childNodes;if(i)n[n.length++]=i;else{for(var r=e.firstChild,s=0;r;)n[s++]=r,r=r.nextSibling;n.length=s,delete n[n.length]}}}function q(t,e){var i=e.previousSibling,n=e.nextSibling;return i?i.nextSibling=n:t.firstChild=n,n?n.previousSibling=i:t.lastChild=i,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,H(t.ownerDocument,t),e}function W(t){return t&&t.nodeType===F.DOCUMENT_TYPE_NODE}function z(t){return t&&t.nodeType===F.ELEMENT_NODE}function G(t){return t&&t.nodeType===F.TEXT_NODE}function K(t,e){var i=t.childNodes||[];if(r(i,z)||W(e))return!1;var n=r(i,W);return!(e&&n&&i.indexOf(n)>i.indexOf(e))}function Y(t,e){var i=t.childNodes||[];if(r(i,(function(t){return z(t)&&t!==e})))return!1;var n=r(i,W);return!(e&&n&&i.indexOf(n)>i.indexOf(e))}function X(t,e,i){var n=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===F.DOCUMENT_FRAGMENT_NODE){var a=s.filter(z);if(a.length>1||r(s,G))throw new P(C,"More than one element or text in fragment");if(1===a.length&&!K(t,i))throw new P(C,"Element in fragment can not be inserted before doctype")}if(z(e)&&!K(t,i))throw new P(C,"Only one element can be added and only after doctype");if(W(e)){if(r(n,W))throw new P(C,"Only one doctype is allowed");var o=r(n,z);if(i&&n.indexOf(o)<n.indexOf(i))throw new P(C,"Doctype can only be inserted before an element");if(!i&&o)throw new P(C,"Doctype can not be appended since element is present")}}function Q(t,e,i){var n=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===F.DOCUMENT_FRAGMENT_NODE){var a=s.filter(z);if(a.length>1||r(s,G))throw new P(C,"More than one element or text in fragment");if(1===a.length&&!Y(t,i))throw new P(C,"Element in fragment can not be inserted before doctype")}if(z(e)&&!Y(t,i))throw new P(C,"Only one element can be added and only after doctype");if(W(e)){if(r(n,(function(t){return W(t)&&t!==i})))throw new P(C,"Only one doctype is allowed");var o=r(n,z);if(i&&n.indexOf(o)<n.indexOf(i))throw new P(C,"Doctype can only be inserted before an element")}}function J(t,e,i,n){(function(t,e,i){if(!function(t){return t&&(t.nodeType===F.DOCUMENT_NODE||t.nodeType===F.DOCUMENT_FRAGMENT_NODE||t.nodeType===F.ELEMENT_NODE)}(t))throw new P(C,"Unexpected parent node type "+t.nodeType);if(i&&i.parentNode!==t)throw new P(E,"child not in parent");if(!function(t){return t&&(z(t)||G(t)||W(t)||t.nodeType===F.DOCUMENT_FRAGMENT_NODE||t.nodeType===F.COMMENT_NODE||t.nodeType===F.PROCESSING_INSTRUCTION_NODE)}(e)||W(e)&&t.nodeType!==F.DOCUMENT_NODE)throw new P(C,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)})(t,e,i),t.nodeType===F.DOCUMENT_NODE&&(n||X)(t,e,i);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===T){var s=e.firstChild;if(null==s)return e;var a=e.lastChild}else s=a=e;var o=i?i.previousSibling:t.lastChild;s.previousSibling=o,a.nextSibling=i,o?o.nextSibling=s:t.firstChild=s,null==i?t.lastChild=a:i.previousSibling=a;do{s.parentNode=t}while(s!==a&&(s=s.nextSibling));return H(t.ownerDocument||t,t),e.nodeType==T&&(e.firstChild=e.lastChild=null),e}function Z(){this._nsMap={}}function tt(){}function et(){}function it(){}function nt(){}function rt(){}function st(){}function at(){}function ot(){}function lt(){}function ct(){}function ut(){}function ht(){}function dt(t,e){var i=[],n=9==this.nodeType&&this.documentElement||this,r=n.prefix,s=n.namespaceURI;if(s&&null==r&&null==(r=n.lookupPrefix(s)))var a=[{namespace:s,prefix:null}];return mt(this,i,t,e,a),i.join("")}function pt(t,e,i){var n=t.prefix||"",r=t.namespaceURI;if(!r)return!1;if("xml"===n&&r===s.XML||r===s.XMLNS)return!1;for(var a=i.length;a--;){var o=i[a];if(o.prefix===n)return o.namespace!==r}return!0}function ft(t,e,i){t.push(" ",e,'="',i.replace(/[<>&"\t\n\r]/g,$),'"')}function mt(t,e,i,n,r){if(r||(r=[]),n){if(!(t=n(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case d:var a=t.attributes,o=a.length,l=t.firstChild,c=t.tagName,u=c;if(!(i=s.isHTML(t.namespaceURI)||i)&&!t.prefix&&t.namespaceURI){for(var h,y=0;y<a.length;y++)if("xmlns"===a.item(y).name){h=a.item(y).value;break}if(!h)for(var S=r.length-1;S>=0;S--)if(""===(x=r[S]).prefix&&x.namespace===t.namespaceURI){h=x.namespace;break}if(h!==t.namespaceURI)for(S=r.length-1;S>=0;S--){var x;if((x=r[S]).namespace===t.namespaceURI){x.prefix&&(u=x.prefix+":"+c);break}}}e.push("<",u);for(var k=0;k<o;k++)"xmlns"==(C=a.item(k)).prefix?r.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&r.push({prefix:"",namespace:C.value});for(k=0;k<o;k++){var C,E,I;pt(C=a.item(k),0,r)&&(ft(e,(E=C.prefix||"")?"xmlns:"+E:"xmlns",I=C.namespaceURI),r.push({prefix:E,namespace:I})),mt(C,e,i,n,r)}if(c===u&&pt(t,0,r)&&(ft(e,(E=t.prefix||"")?"xmlns:"+E:"xmlns",I=t.namespaceURI),r.push({prefix:E,namespace:I})),l||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(e.push(">"),i&&/^script$/i.test(c))for(;l;)l.data?e.push(l.data):mt(l,e,i,n,r.slice()),l=l.nextSibling;else for(;l;)mt(l,e,i,n,r.slice()),l=l.nextSibling;e.push("</",u,">")}else e.push("/>");return;case _:case T:for(l=t.firstChild;l;)mt(l,e,i,n,r.slice()),l=l.nextSibling;return;case p:return ft(e,t.name,t.value);case f:return e.push(t.data.replace(/[<&>]/g,$));case m:return e.push("<![CDATA[",t.data,"]]>");case b:return e.push("\x3c!--",t.data,"--\x3e");case w:var P=t.publicId,A=t.systemId;if(e.push("<!DOCTYPE ",t.name),P)e.push(" PUBLIC ",P),A&&"."!=A&&e.push(" ",A),e.push(">");else if(A&&"."!=A)e.push(" SYSTEM ",A,">");else{var L=t.internalSubset;L&&e.push(" [",L,"]"),e.push(">")}return;case v:return e.push("<?",t.target," ",t.data,"?>");case g:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function gt(t,e,i){var n;switch(e.nodeType){case d:(n=e.cloneNode(!1)).ownerDocument=t;case T:break;case p:i=!0}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,i)for(var r=e.firstChild;r;)n.appendChild(gt(t,r,i)),r=r.nextSibling;return n}function yt(t,e,i){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];"object"!=typeof s&&s!=n[r]&&(n[r]=s)}switch(e.childNodes&&(n.childNodes=new A),n.ownerDocument=t,n.nodeType){case d:var a=e.attributes,o=n.attributes=new D,l=a.length;o._ownerElement=n;for(var c=0;c<l;c++)n.setAttributeNode(yt(t,a.item(c),!0));break;case p:i=!0}if(i)for(var u=e.firstChild;u;)n.appendChild(yt(t,u,i)),u=u.nextSibling;return n}function vt(t,e,i){t[e]=i}x.INVALID_STATE_ERR=(k[11]="Invalid state",11),x.SYNTAX_ERR=(k[12]="Syntax error",12),x.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),x.NAMESPACE_ERR=(k[14]="Invalid namespace",14),x.INVALID_ACCESS_ERR=(k[15]="Invalid access",15),P.prototype=Error.prototype,c(x,P),A.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var i=[],n=0;n<this.length;n++)mt(this[n],i,t,e);return i.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}},L.prototype.item=function(t){return O(this),this[t]},u(L,A),D.prototype={length:0,item:A.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new P(I);var i=this.getNamedItem(t.nodeName);return R(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e,i=t.ownerElement;if(i&&i!=this._ownerElement)throw new P(I);return e=this.getNamedItemNS(t.namespaceURI,t.localName),R(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return N(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return N(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var n=this[i];if(n.localName==e&&n.namespaceURI==t)return n}return null}},B.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,i){var n=new j;if(n.implementation=this,n.childNodes=new A,n.doctype=i||null,i&&n.appendChild(i),e){var r=n.createElementNS(t,e);n.appendChild(r)}return n},createDocumentType:function(t,e,i){var n=new st;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=i||"",n}},F.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return J(this,t,e)},replaceChild:function(t,e){J(this,t,e,Q),e&&this.removeChild(e)},removeChild:function(t){return q(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return yt(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==f&&t.nodeType==f?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i)for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===t)return n;e=e.nodeType==p?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,t))return i[t];e=e.nodeType==p?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},c(h,F),c(h,F.prototype),j.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==T){for(var i=t.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,e),i=n}return t}return J(this,t,e),t.ownerDocument=this,null===this.documentElement&&t.nodeType===d&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),q(this,t)},replaceChild:function(t,e){J(this,t,e,Q),t.ownerDocument=this,e&&this.removeChild(e),z(t)&&(this.documentElement=t)},importNode:function(t,e){return gt(this,t,e)},getElementById:function(t){var e=null;return U(this.documentElement,(function(i){if(i.nodeType==d&&i.getAttribute("id")==t)return e=i,!0})),e},getElementsByClassName:function(t){var e=l(t);return new L(this,(function(i){var n=[];return e.length>0&&U(i.documentElement,(function(r){if(r!==i&&r.nodeType===d){var s=r.getAttribute("class");if(s){var a=t===s;if(!a){var o=l(s);a=e.every((c=o,function(t){return c&&-1!==c.indexOf(t)}))}a&&n.push(r)}}var c})),n}))},createElement:function(t){var e=new Z;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new A,(e.attributes=new D)._ownerElement=e,e},createDocumentFragment:function(){var t=new ct;return t.ownerDocument=this,t.childNodes=new A,t},createTextNode:function(t){var e=new it;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new nt;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new rt;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new ut;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new tt;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new lt;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new Z,n=e.split(":"),r=i.attributes=new D;return i.childNodes=new A,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=e,r._ownerElement=i,i},createAttributeNS:function(t,e){var i=new tt,n=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=e,i}},u(j,F),Z.prototype={nodeType:d,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===T?this.insertBefore(t,null):function(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,H(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new L(this,(function(e){var i=[];return U(e,(function(n){n===e||n.nodeType!=d||"*"!==t&&n.tagName!=t||i.push(n)})),i}))},getElementsByTagNameNS:function(t,e){return new L(this,(function(i){var n=[];return U(i,(function(r){r===i||r.nodeType!==d||"*"!==t&&r.namespaceURI!==t||"*"!==e&&r.localName!=e||n.push(r)})),n}))}},j.prototype.getElementsByTagName=Z.prototype.getElementsByTagName,j.prototype.getElementsByTagNameNS=Z.prototype.getElementsByTagNameNS,u(Z,F),tt.prototype.nodeType=p,u(tt,F),et.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(k[C])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){i=this.data.substring(0,t)+i+this.data.substring(t+e),this.nodeValue=this.data=i,this.length=i.length}},u(et,F),it.prototype={nodeName:"#text",nodeType:f,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},u(it,et),nt.prototype={nodeName:"#comment",nodeType:b},u(nt,et),rt.prototype={nodeName:"#cdata-section",nodeType:m},u(rt,et),st.prototype.nodeType=w,u(st,F),at.prototype.nodeType=S,u(at,F),ot.prototype.nodeType=y,u(ot,F),lt.prototype.nodeType=g,u(lt,F),ct.prototype.nodeName="#document-fragment",ct.prototype.nodeType=T,u(ct,F),ut.prototype.nodeType=v,u(ut,F),ht.prototype.serializeToString=function(t,e,i){return dt.call(t,e,i)},F.prototype.toString=dt;try{if(Object.defineProperty){function bt(t){switch(t.nodeType){case d:case T:var e=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&e.push(bt(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}}Object.defineProperty(L.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(F.prototype,"textContent",{get:function(){return bt(this)},set:function(t){switch(this.nodeType){case d:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),vt=function(t,e,i){t["$$"+e]=i}}}catch(_t){}e.DocumentType=st,e.DOMException=P,e.DOMImplementation=B,e.Element=Z,e.Node=F,e.NodeList=A,e.XMLSerializer=ht},31045:(t,e,i)=>{var n=i(72167).freeze;e.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),e.entityMap=e.HTML_ENTITIES},3969:(t,e,i)=>{var n=i(41146);n.DOMImplementation,n.XMLSerializer,e.DOMParser=i(86129).DOMParser},76925:(t,e,i)=>{var n=i(72167).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+r.source+s.source+"*(?::"+r.source+s.source+"*)?$"),o=0,l=1,c=2,u=3,h=4,d=5,p=6,f=7;function m(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,m)}function g(){}function y(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function v(t,e,i,r,s,a){function m(t,e,n){i.attributeNames.hasOwnProperty(t)&&a.fatalError("Attribute "+t+" redefined"),i.addValue(t,e.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),n)}for(var g,y=++e,v=o;;){var b=t.charAt(y);switch(b){case"=":if(v===l)g=t.slice(e,y),v=u;else{if(v!==c)throw new Error("attribute equal must after attrName");v=u}break;case"'":case'"':if(v===u||v===l){if(v===l&&(a.warning('attribute value must after "="'),g=t.slice(e,y)),e=y+1,!((y=t.indexOf(b,e))>0))throw new Error("attribute value no end '"+b+"' match");m(g,_=t.slice(e,y),e-1),v=d}else{if(v!=h)throw new Error('attribute value must after "="');m(g,_=t.slice(e,y),e),a.warning('attribute "'+g+'" missed start quot('+b+")!!"),e=y+1,v=d}break;case"/":switch(v){case o:i.setTagName(t.slice(e,y));case d:case p:case f:v=f,i.closed=!0;case h:case l:case c:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),v==o&&i.setTagName(t.slice(e,y)),y;case">":switch(v){case o:i.setTagName(t.slice(e,y));case d:case p:case f:break;case h:case l:"/"===(_=t.slice(e,y)).slice(-1)&&(i.closed=!0,_=_.slice(0,-1));case c:v===c&&(_=g),v==h?(a.warning('attribute "'+_+'" missed quot(")!'),m(g,_,e)):(n.isHTML(r[""])&&_.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+_+'" missed value!! "'+_+'" instead!!'),m(_,_,e));break;case u:throw new Error("attribute value missed!!")}return y;case"":b=" ";default:if(b<=" ")switch(v){case o:i.setTagName(t.slice(e,y)),v=p;break;case l:g=t.slice(e,y),v=c;break;case h:var _=t.slice(e,y);a.warning('attribute "'+_+'" missed quot(")!!'),m(g,_,e);case d:v=p}else switch(v){case c:i.tagName,n.isHTML(r[""])&&g.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),m(g,g,e),e=y,v=l;break;case d:a.warning('attribute space is required"'+g+'"!!');case p:v=l,e=y;break;case u:v=h,e=y;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}y++}}function b(t,e,i){for(var r=t.tagName,s=null,a=t.length;a--;){var o=t[a],l=o.qName,c=o.value;if((p=l.indexOf(":"))>0)var u=o.prefix=l.slice(0,p),h=l.slice(p+1),d="xmlns"===u&&h;else h=l,u=null,d="xmlns"===l&&"";o.localName=h,!1!==d&&(null==s&&(s={},T(i,i={})),i[d]=s[d]=c,o.uri=n.XMLNS,e.startPrefixMapping(d,c))}for(a=t.length;a--;)(u=(o=t[a]).prefix)&&("xml"===u&&(o.uri=n.XML),"xmlns"!==u&&(o.uri=i[u||""]));var p;(p=r.indexOf(":"))>0?(u=t.prefix=r.slice(0,p),h=t.localName=r.slice(p+1)):(u=null,h=t.localName=r);var f=t.uri=i[u||""];if(e.startElement(f,h,r,t),!t.closed)return t.currentNSMap=i,t.localNSMap=s,!0;if(e.endElement(f,h,r),s)for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&e.endPrefixMapping(u)}function _(t,e,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var s=t.indexOf("</"+i+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(i)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),r.characters(a,0,a.length),s)}return e+1}function w(t,e,i,n){var r=n[i];return null==r&&((r=t.lastIndexOf("</"+i+">"))<e&&(r=t.lastIndexOf("</"+i)),n[i]=r),r<e}function T(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function S(t,e,i,n){if("-"===t.charAt(e+2))return"-"===t.charAt(e+3)?(r=t.indexOf("--\x3e",e+4))>e?(i.comment(t,e+4,r-e-4),r+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==t.substr(e+3,6)){var r=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,r-e-9),i.endCDATA(),r+3}var s=function(t,e){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(t);i=r.exec(t);)if(n.push(i),i[1])return n}(t,e),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var o=s[1][0],l=!1,c=!1;a>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],c=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var u=s[a-1];return i.startDTD(o,l,c),i.endDTD(),u.index+u[0].length}return-1}function x(t,e,i){var n=t.indexOf("?>",e);if(n){var r=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function k(){this.attributeNames={}}m.prototype=new Error,m.prototype.name=m.name,g.prototype={parse:function(t,e,i){var r=this.domBuilder;r.startDocument(),T(e,e={}),function(t,e,i,r,s){function a(t){var e=t.slice(1,-1);return Object.hasOwnProperty.call(i,e)?i[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(s.error("entity not found:"+t),t)}function o(e){if(e>g){var i=t.substring(g,e).replace(/&#?\w+;/g,a);d&&l(g),r.characters(i,0,e-g),g=e}}function l(e,i){for(;e>=u&&(i=h.exec(t));)c=i.index,u=c+i[0].length,d.lineNumber++;d.columnNumber=e-c+1}for(var c=0,u=0,h=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,p=[{currentNSMap:e}],f={},g=0;;){try{var T=t.indexOf("<",g);if(T<0){if(!t.substr(g).match(/^\s*$/)){var C=r.doc,E=C.createTextNode(t.substr(g));C.appendChild(E),r.currentElement=E}return}switch(T>g&&o(T),t.charAt(T+1)){case"/":var I=t.indexOf(">",T+3),P=t.substring(T+2,I).replace(/[ \t\n\r]+$/g,""),A=p.pop();I<0?(P=t.substring(T+2).replace(/[\s<].*/,""),s.error("end tag name: "+P+" is not complete:"+A.tagName),I=T+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),s.error("end tag name: "+P+" maybe not complete"),I=T+1+P.length);var L=A.localNSMap,O=A.tagName==P;if(O||A.tagName&&A.tagName.toLowerCase()==P.toLowerCase()){if(r.endElement(A.uri,A.localName,P),L)for(var D in L)Object.prototype.hasOwnProperty.call(L,D)&&r.endPrefixMapping(D);O||s.fatalError("end tag name: "+P+" is not match the current start tagName:"+A.tagName)}else p.push(A);I++;break;case"?":d&&l(T),I=x(t,T,r);break;case"!":d&&l(T),I=S(t,T,r,s);break;default:d&&l(T);var M=new k,R=p[p.length-1].currentNSMap,N=(I=v(t,T,M,R,a,s),M.length);if(!M.closed&&w(t,I,M.tagName,f)&&(M.closed=!0,i.nbsp||s.warning("unclosed xml attribute")),d&&N){for(var B=y(d,{}),F=0;F<N;F++){var $=M[F];l($.offset),$.locator=y(d,{})}r.locator=B,b(M,r,R)&&p.push(M),r.locator=d}else b(M,r,R)&&p.push(M);n.isHTML(M.uri)&&!M.closed?I=_(t,I,M.tagName,a,r):I++}}catch(t){if(t instanceof m)throw t;s.error("element parse error: "+t),I=-1}I>g?g=I:o(Math.max(T,g)+1)}}(t,e,i,r,this.errorHandler),r.endDocument()}},k.prototype={setTagName:function(t){if(!a.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,i){if(!a.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=g,e.ParseError=m},1234:function(t,e){!function(t){"use strict";var e=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],i=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],n="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},s="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:s,"5module":s+" export import",6:s+" const class extends export import super"},o=/^in(stanceof)?$/,l=new RegExp("["+n+"]"),c=new RegExp("["+n+"-----------------------------------------------------------------------------------------------------------------------------------------------------]");function u(t,e){for(var i=65536,n=0;n<e.length;n+=2){if((i+=e[n])>t)return!1;if((i+=e[n+1])>=t)return!0}return!1}function h(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&u(t,i)))}function d(t,n){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&c.test(String.fromCharCode(t)):!1!==n&&(u(t,i)||u(t,e)))))}var p=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function f(t,e){return new p(t,{beforeExpr:!0,binop:e})}var m={beforeExpr:!0},g={startsExpr:!0},y={};function v(t,e){return void 0===e&&(e={}),e.keyword=t,y[t]=new p(t,e)}var b={num:new p("num",g),regexp:new p("regexp",g),string:new p("string",g),name:new p("name",g),privateId:new p("privateId",g),eof:new p("eof"),bracketL:new p("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new p("]"),braceL:new p("{",{beforeExpr:!0,startsExpr:!0}),braceR:new p("}"),parenL:new p("(",{beforeExpr:!0,startsExpr:!0}),parenR:new p(")"),comma:new p(",",m),semi:new p(";",m),colon:new p(":",m),dot:new p("."),question:new p("?",m),questionDot:new p("?."),arrow:new p("=>",m),template:new p("template"),invalidTemplate:new p("invalidTemplate"),ellipsis:new p("...",m),backQuote:new p("`",g),dollarBraceL:new p("${",{beforeExpr:!0,startsExpr:!0}),eq:new p("=",{beforeExpr:!0,isAssign:!0}),assign:new p("_=",{beforeExpr:!0,isAssign:!0}),incDec:new p("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new p("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:f("||",1),logicalAND:f("&&",2),bitwiseOR:f("|",3),bitwiseXOR:f("^",4),bitwiseAND:f("&",5),equality:f("==/!=/===/!==",6),relational:f("</>/<=/>=",7),bitShift:f("<</>>/>>>",8),plusMin:new p("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:f("%",10),star:f("*",10),slash:f("/",10),starstar:new p("**",{beforeExpr:!0}),coalesce:f("??",1),_break:v("break"),_case:v("case",m),_catch:v("catch"),_continue:v("continue"),_debugger:v("debugger"),_default:v("default",m),_do:v("do",{isLoop:!0,beforeExpr:!0}),_else:v("else",m),_finally:v("finally"),_for:v("for",{isLoop:!0}),_function:v("function",g),_if:v("if"),_return:v("return",m),_switch:v("switch"),_throw:v("throw",m),_try:v("try"),_var:v("var"),_const:v("const"),_while:v("while",{isLoop:!0}),_with:v("with"),_new:v("new",{beforeExpr:!0,startsExpr:!0}),_this:v("this",g),_super:v("super",g),_class:v("class",g),_extends:v("extends",m),_export:v("export"),_import:v("import",g),_null:v("null",g),_true:v("true",g),_false:v("false",g),_in:v("in",{beforeExpr:!0,binop:7}),_instanceof:v("instanceof",{beforeExpr:!0,binop:7}),_typeof:v("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:v("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:v("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_=/\r\n?|\n|\u2028|\u2029/,w=new RegExp(_.source,"g");function T(t){return 10===t||13===t||8232===t||8233===t}function S(t,e,i){void 0===i&&(i=t.length);for(var n=e;n<i;n++){var r=t.charCodeAt(n);if(T(r))return n<i-1&&13===r&&10===t.charCodeAt(n+1)?n+2:n+1}return-1}var x=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,k=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,C=Object.prototype,E=C.hasOwnProperty,I=C.toString,P=Object.hasOwn||function(t,e){return E.call(t,e)},A=Array.isArray||function(t){return"[object Array]"===I.call(t)};function L(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function O(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var D=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,M=function(t,e){this.line=t,this.column=e};M.prototype.offset=function(t){return new M(this.line,this.column+t)};var R=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function N(t,e){for(var i=1,n=0;;){var r=S(t,n,e);if(r<0)return new M(i,e-n);++i,n=r}}var B={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},F=!1;function $(t){var e={};for(var i in B)e[i]=t&&P(t,i)?t[i]:B[i];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!F&&"object"==typeof console&&console.warn&&(F=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),t&&null!=t.allowHashBang||(e.allowHashBang=e.ecmaVersion>=14),A(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return A(e.onComment)&&(e.onComment=function(t,e){return function(i,n,r,s,a,o){var l={type:i?"Block":"Line",value:n,start:r,end:s};t.locations&&(l.loc=new R(this,a,o)),t.ranges&&(l.range=[r,s]),e.push(l)}}(e,e.onComment)),e}var U=2,j=4,V=8,H=256,q=1|U|H;function W(t,e){return U|(t?j:0)|(e?V:0)}var z=function(t,e,i){this.options=t=$(t),this.sourceFile=t.sourceFile,this.keywords=L(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var n="";!0!==t.allowReserved&&(n=r[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(n+=" await")),this.reservedWords=L(n);var s=(n?n+" ":"")+r.strict;this.reservedWordsStrict=L(s),this.reservedWordsStrictBind=L(s+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},G={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};z.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},G.inFunction.get=function(){return(this.currentVarScope().flags&U)>0},G.inGenerator.get=function(){return(this.currentVarScope().flags&V)>0&&!this.currentVarScope().inClassFieldInit},G.inAsync.get=function(){return(this.currentVarScope().flags&j)>0&&!this.currentVarScope().inClassFieldInit},G.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&H)return!1;if(e.flags&U)return(e.flags&j)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},G.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(64&e)>0||i||this.options.allowSuperOutsideMethod},G.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},G.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},G.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&(U|H))>0||i},G.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&H)>0},z.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,n=0;n<t.length;n++)i=t[n](i);return i},z.parse=function(t,e){return new this(e,t).parse()},z.parseExpressionAt=function(t,e,i){var n=new this(i,t,e);return n.nextToken(),n.parseExpression()},z.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(z.prototype,G);var K=z.prototype,Y=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;K.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){k.lastIndex=t,t+=k.exec(this.input)[0].length;var e=Y.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){k.lastIndex=t+e[0].length;var i=k.exec(this.input),n=i.index+i[0].length,r=this.input.charAt(n);return";"===r||"}"===r||_.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(n+1))}t+=e[0].length,k.lastIndex=t,t+=k.exec(this.input)[0].length,";"===this.input[t]&&t++}},K.eat=function(t){return this.type===t&&(this.next(),!0)},K.isContextual=function(t){return this.type===b.name&&this.value===t&&!this.containsEsc},K.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},K.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},K.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||_.test(this.input.slice(this.lastTokEnd,this.start))},K.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},K.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},K.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},K.expect=function(t){this.eat(t)||this.unexpected()},K.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var X=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};K.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,e?"Assigning to rvalue":"Parenthesized pattern")}},K.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},K.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},K.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Q=z.prototype;Q.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==b.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var n=0,r=Object.keys(this.undefinedExports);n<r.length;n+=1){var s=r[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var J={kind:"loop"},Z={kind:"switch"};Q.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;k.lastIndex=this.pos;var e=k.exec(this.input),i=this.pos+e[0].length,n=this.input.charCodeAt(i);if(91===n||92===n)return!0;if(t)return!1;if(123===n||n>55295&&n<56320)return!0;if(h(n,!0)){for(var r=i+1;d(n=this.input.charCodeAt(r),!0);)++r;if(92===n||n>55295&&n<56320)return!0;var s=this.input.slice(i,r);if(!o.test(s))return!0}return!1},Q.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;k.lastIndex=this.pos;var t,e=k.exec(this.input),i=this.pos+e[0].length;return!(_.test(this.input.slice(this.pos,i))||"function"!==this.input.slice(i,i+8)||i+8!==this.input.length&&(d(t=this.input.charCodeAt(i+8))||t>55295&&t<56320))},Q.parseStatement=function(t,e,i){var n,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=b._var,n="let"),r){case b._break:case b._continue:return this.parseBreakContinueStatement(s,r.keyword);case b._debugger:return this.parseDebuggerStatement(s);case b._do:return this.parseDoStatement(s);case b._for:return this.parseForStatement(s);case b._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case b._class:return t&&this.unexpected(),this.parseClass(s,!0);case b._if:return this.parseIfStatement(s);case b._return:return this.parseReturnStatement(s);case b._switch:return this.parseSwitchStatement(s);case b._throw:return this.parseThrowStatement(s);case b._try:return this.parseTryStatement(s);case b._const:case b._var:return n=n||this.value,t&&"var"!==n&&this.unexpected(),this.parseVarStatement(s,n);case b._while:return this.parseWhileStatement(s);case b._with:return this.parseWithStatement(s);case b.braceL:return this.parseBlock(!0,s);case b.semi:return this.parseEmptyStatement(s);case b._export:case b._import:if(this.options.ecmaVersion>10&&r===b._import){k.lastIndex=this.pos;var a=k.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(40===l||46===l)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===b._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var c=this.value,u=this.parseExpression();return r===b.name&&"Identifier"===u.type&&this.eat(b.colon)?this.parseLabeledStatement(s,c,u,t):this.parseExpressionStatement(s,u)}},Q.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var r=this.labels[n];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(i||"loop"===r.kind))break;if(t.label&&i)break}}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},Q.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Q.parseDoStatement=function(t){return this.next(),this.labels.push(J),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Q.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(J),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===b._var||this.type===b._const||i){var n=this.startNode(),r=i?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===n.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n)):(e>-1&&this.unexpected(e),this.parseFor(t,n))}var s=this.isContextual("let"),a=!1,o=new X,l=this.parseExpression(!(e>-1)||"await",o);return this.type===b._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,o),this.checkLValPattern(l),this.parseForIn(t,l)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,l))},Q.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,et|(i?0:it),!1,e)},Q.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Q.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Q.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(Z),this.enterScope(0);for(var i=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var n=this.type===b._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(b.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Q.parseThrowStatement=function(t){return this.next(),_.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var tt=[];Q.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var e=this.startNode();if(this.next(),this.eat(b.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?32:0),this.checkLValPattern(e.param,i?4:2),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Q.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Q.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(J),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Q.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Q.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Q.parseLabeledStatement=function(t,e,i,n){for(var r=0,s=this.labels;r<s.length;r+=1)s[r].name===e&&this.raise(i.start,"Label '"+e+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===b._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},Q.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Q.parseBlock=function(t,e,i){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(b.braceL),t&&this.enterScope(0);this.type!==b.braceR;){var n=this.parseStatement(null);e.body.push(n)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Q.parseFor=function(t,e){return t.init=e,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Q.parseForIn=function(t,e){var i=this.type===b._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")},Q.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var n=this.startNode();if(this.parseVarId(n,i),this.eat(b.eq)?n.init=this.parseMaybeAssign(e):"const"!==i||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||e&&(this.type===b._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(b.comma))break}return t},Q.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var et=1,it=2;function nt(t,e){var i=e.key.name,n=t[i],r="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(r=(e.static?"s":"i")+e.kind),"iget"===n&&"iset"===r||"iset"===n&&"iget"===r||"sget"===n&&"sset"===r||"sset"===n&&"sget"===r?(t[i]="true",!1):!!n||(t[i]=r,!1)}function rt(t,e){var i=t.computed,n=t.key;return!i&&("Identifier"===n.type&&n.name===e||"Literal"===n.type&&n.value===e)}Q.parseFunction=function(t,e,i,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===b.star&&e&it&&this.unexpected(),t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&et&&(t.id=4&e&&this.type!==b.name?null:this.parseIdent(),!t.id||e&it||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(W(t.async,t.generator)),e&et||(t.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&et?"FunctionDeclaration":"FunctionExpression")},Q.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Q.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(b.braceL);this.type!==b.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&nt(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Q.parseClassElement=function(t){if(this.eat(b.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),n="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(b.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===b.star?o=!0:n="static"}if(i.static=o,!n&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==b.star||this.canInsertSemicolon()?n="async":s=!0),!n&&(e>=9||!s)&&this.eat(b.star)&&(r=!0),!n&&!s&&!r){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:n=l)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===b.parenL||"method"!==a||r||s){var c=!i.static&&rt(i,"constructor"),u=c&&t;c&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=c?"constructor":a,this.parseClassMethod(i,r,s,u)}else this.parseClassField(i);return i},Q.isClassElementNameStart=function(){return this.type===b.name||this.type===b.privateId||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword},Q.parseClassElementName=function(t){this.type===b.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},Q.parseClassMethod=function(t,e,i,n){var r=t.key;"constructor"===t.kind?(e&&this.raise(r.start,"Constructor can't be a generator"),i&&this.raise(r.start,"Constructor can't be an async method")):t.static&&rt(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,i,n);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},Q.parseClassField=function(t){if(rt(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&rt(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(b.eq)){var e=this.currentThisScope(),i=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=i}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},Q.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==b.braceR;){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},Q.parseClassId=function(t,e){this.type===b.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Q.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts(null,!1):null},Q.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},Q.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,i=t.used,n=this.privateNameStack.length,r=0===n?null:this.privateNameStack[n-1],s=0;s<i.length;++s){var a=i[s];P(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},Q.parseExport=function(t,e){if(this.next(),this.eat(b.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(b._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===b._function||(i=this.isAsyncFunction())){var n=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(n,4|et,!1,i)}else if(this.type===b._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),"Literal"===o.local.type&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Q.checkExport=function(t,e,i){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),P(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},Q.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e,e.start);else if("ObjectPattern"===i)for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.checkPatternExport(t,s)}else if("ArrayPattern"===i)for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(t,l)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},Q.checkVariableExport=function(t,e){if(t)for(var i=0,n=e;i<n.length;i+=1){var r=n[i];this.checkPatternExport(t,r.id)}},Q.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Q.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(i)i=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var n=this.startNode();n.local=this.parseModuleExportName(),n.exported=this.eatContextual("as")?this.parseModuleExportName():n.local,this.checkExport(t,n.exported,n.exported.start),e.push(this.finishNode(n,"ExportSpecifier"))}return e},Q.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=tt,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Q.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===b.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(b.comma))return t}if(this.type===b.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,"ImportNamespaceSpecifier")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(e)e=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},Q.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===b.string){var t=this.parseLiteral(this.value);return D.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},Q.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Q.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var st=z.prototype;st.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},st.toAssignableList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];r&&this.toAssignable(r,e)}if(i){var s=t[i-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},st.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},st.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},st.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},st.parseBindingList=function(t,e,i){for(var n=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(b.comma),e&&this.type===b.comma)n.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),n.push(a)}return n},st.parseBindingListItem=function(t){return t},st.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},st.checkLValSimple=function(t,e,i){void 0===e&&(e=0);var n=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(n?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(P(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(n?"Binding":"Assigning to")+" rvalue")}},st.checkLValPattern=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,e,i)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,e,i)}break;default:this.checkLValSimple(t,e,i)}},st.checkLValInnerPattern=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var at=function(t,e,i,n,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=n,this.generator=!!r},ot={b_stat:new at("{",!1),b_expr:new at("{",!0),b_tmpl:new at("${",!1),p_stat:new at("(",!1),p_expr:new at("(",!0),q_tmpl:new at("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new at("function",!1),f_expr:new at("function",!0),f_expr_gen:new at("function",!0,!1,null,!0),f_gen:new at("function",!1,!1,null,!0)},lt=z.prototype;lt.initialContext=function(){return[ot.b_stat]},lt.curContext=function(){return this.context[this.context.length-1]},lt.braceIsBlock=function(t){var e=this.curContext();return e===ot.f_expr||e===ot.f_stat||(t!==b.colon||e!==ot.b_stat&&e!==ot.b_expr?t===b._return||t===b.name&&this.exprAllowed?_.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||t===b.arrow||(t===b.braceL?e===ot.b_stat:t!==b._var&&t!==b._const&&t!==b.name&&!this.exprAllowed):!e.isExpr)},lt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},lt.updateContext=function(t){var e,i=this.type;i.keyword&&t===b.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},lt.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ot.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ot.b_stat:ot.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(ot.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var e=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(e?ot.p_stat:ot.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(t){!t.beforeExpr||t===b._else||t===b.semi&&this.curContext()!==ot.p_stat||t===b._return&&_.test(this.input.slice(this.lastTokEnd,this.start))||(t===b.colon||t===b.braceL)&&this.curContext()===ot.b_stat?this.context.push(ot.f_stat):this.context.push(ot.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===ot.q_tmpl?this.context.pop():this.context.push(ot.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(t){if(t===b._function){var e=this.context.length-1;this.context[e]===ot.f_expr?this.context[e]=ot.f_expr_gen:this.context[e]=ot.f_gen}this.exprAllowed=!0},b.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ct=z.prototype;function ut(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&ut(t.expression)}ct.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,r=t.key;switch(r.type){case"Identifier":n=r.name;break;case"Literal":n=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===s&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[n="$"+n];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(r.start,"Redefinition of property"):a=e[n]={init:!1,get:!1,set:!1},a[s]=!0}}},ct.parseExpression=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===b.comma){var s=this.startNodeAt(i,n);for(s.expressions=[r];this.eat(b.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},ct.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new X,n=!0);var o=this.start,l=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var c=this.parseMaybeConditional(t,e);if(i&&(c=i.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,this.type===b.eq&&(c=this.toAssignable(c,!1,e)),n||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===b.eq?this.checkLValPattern(c):this.checkLValSimple(c),u.left=c,this.next(),u.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(u,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),c},ct.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(b.question)){var s=this.startNodeAt(i,n);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(b.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},ct.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===i&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,i,n,-1,t)},ct.parseExprOp=function(t,e,i,n,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==b._in)&&s>n){var a=this.type===b.logicalOR||this.type===b.logicalAND,o=this.type===b.coalesce;o&&(s=b.logicalAND.binop);var l=this.value;this.next();var c=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,u,s,r),d=this.buildBinary(e,i,t,h,l,a||o);return(a&&this.type===b.coalesce||o&&(this.type===b.logicalOR||this.type===b.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,i,n,r)}return t},ct.buildBinary=function(t,e,i,n,r,s){"PrivateIdentifier"===n.type&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=i,a.operator=r,a.right=n,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},ct.parseMaybeUnary=function(t,e,i,n){var r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(n),e=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===b.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,n),this.checkExpressionErrors(t,!0),l?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&ut(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==b.privateId){if(r=this.parseExprSubscripts(t,n),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(s,a);c.operator=this.value,c.prefix=!1,c.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(c,"UpdateExpression")}}else(n||0===this.privateNameStack.length)&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==b._in&&this.unexpected();return i||!this.eat(b.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,n),"**",!1)},ct.parseExprSubscripts=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,i,n,!1,e);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},ct.parseSubscripts=function(t,e,i,n,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,i,n,s,a,r);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var l=this.startNodeAt(e,i);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}t=o}},ct.parseSubscript=function(t,e,i,n,r,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(b.questionDot);n&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(b.bracketL);if(c||l&&this.type!==b.parenL&&this.type!==b.backQuote||this.eat(b.dot)){var u=this.startNodeAt(e,i);u.object=t,c?(u.property=this.parseExpression(),this.expect(b.bracketR)):this.type===b.privateId&&"Super"!==t.type?u.property=this.parsePrivateIdent():u.property=this.parseIdent("never"!==this.options.allowReserved),u.computed=!!c,o&&(u.optional=l),t=this.finishNode(u,"MemberExpression")}else if(!n&&this.eat(b.parenL)){var h=new X,d=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!l&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=f,this.parseArrowExpression(this.startNodeAt(e,i),m,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var g=this.startNodeAt(e,i);g.callee=t,g.arguments=m,o&&(g.optional=l),t=this.finishNode(g,"CallExpression")}else if(this.type===b.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(e,i);y.tag=t,y.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(y,"TaggedTemplateExpression")}return t},ct.parseExprAtom=function(t,e){this.type===b.slash&&this.readRegexp();var i,n=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(i,"Super");case b._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case b.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.overrideContext(ot.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,e);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,e);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===b.name&&!a&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,e)}return o;case b.regexp:var l=this.value;return(i=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},i;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(i=this.startNode()).value=this.type===b._null?null:this.type===b._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case b.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(n,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case b.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(i,"ArrayExpression");case b.braceL:return this.overrideContext(ot.b_expr),this.parseObj(!1,t);case b._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},ct.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case b.parenL:return this.parseDynamicImport(t);case b.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},ct.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var e=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},ct.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},ct.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},ct.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},ct.parseParenAndDistinguishExpression=function(t,e){var i,n=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,l=this.startLoc,c=[],u=!0,h=!1,d=new X,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(u?u=!1:this.expect(b.comma),s&&this.afterTrailingComma(b.parenR,!0)){h=!0;break}if(this.type===b.ellipsis){a=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(n,r,c,e);c.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,c.length>1?((i=this.startNodeAt(o,l)).expressions=c,this.finishNodeAt(i,"SequenceExpression",m,g)):i=c[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}return i},ct.parseParenItem=function(t){return t},ct.parseParenArrowList=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,n)};var ht=[];ct.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var n=this.start,r=this.startLoc,s=this.type===b._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),n,r,!0,!1),s&&"ImportExpression"===t.callee.type&&this.raise(n,"Cannot use new with import()"),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=ht,this.finishNode(t,"NewExpression")},ct.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===b.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===b.backQuote,this.finishNode(i,"TemplateElement")},ct.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(i.quasis=[n];!n.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(b.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},ct.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!_.test(this.input.slice(this.lastTokEnd,this.start))},ct.parseObj=function(t,e){var i=this.startNode(),n=!0,r={};for(i.properties=[],this.next();!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),i.properties.push(s)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},ct.parseProperty=function(t,e){var i,n,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===b.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(i=this.eat(b.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(n=!0,i=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(a)):n=!1,this.parsePropertyValue(a,t,i,n,r,s,e,o),this.finishNode(a,"Property")},ct.parsePropertyValue=function(t,e,i,n,r,s,a,o){if((i||n)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===b.comma||this.type===b.braceR||this.type===b.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===b.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(i||n)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var l="get"===t.kind?0:1;if(t.value.params.length!==l){var c=t.value.start;"get"===t.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},ct.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},ct.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},ct.parseMethod=function(t,e,i){var n=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|W(e,n.generator)|(i?128:0)),this.expect(b.parenL),n.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")},ct.parseArrowExpression=function(t,e,i,n){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|W(i,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,n),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},ct.parseFunctionBody=function(t,e,i,n){var r=e&&this.type!==b.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(n),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=l}this.exitScope()},ct.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1)if("Identifier"!==i[e].type)return!1;return!0},ct.checkParams=function(t,e){for(var i=Object.create(null),n=0,r=t.params;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,1,e?null:i)}},ct.parseExprList=function(t,e,i,n){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(b.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===b.comma?a=null:this.type===b.ellipsis?(a=this.parseSpread(n),n&&this.type===b.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),r.push(a)}return r},ct.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))},ct.parseIdent=function(t){var e=this.startNode();return this.type===b.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},ct.parsePrivateIdent=function(){var t=this.startNode();return this.type===b.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t},ct.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(b.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},ct.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var dt=z.prototype;dt.raise=function(t,e){var i=N(this.input,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n},dt.raiseRecoverable=dt.raise,dt.curPosition=function(){if(this.options.locations)return new M(this.curLine,this.pos-this.lineStart)};var pt=z.prototype,ft=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};pt.enterScope=function(t){this.scopeStack.push(new ft(t))},pt.exitScope=function(){this.scopeStack.pop()},pt.treatFunctionsAsVarInScope=function(t){return t.flags&U||!this.inModule&&1&t.flags},pt.declareName=function(t,e,i){var n=!1;if(2===e){var r=this.currentScope();n=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var s=this.currentScope();n=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){n=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],o.flags&q)break}n&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},pt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},pt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&q)return e}},pt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&q&&!(16&e.flags))return e}};var mt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new R(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},gt=z.prototype;function yt(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}gt.startNode=function(){return new mt(this,this.start,this.startLoc)},gt.startNodeAt=function(t,e){return new mt(this,t,e)},gt.finishNode=function(t,e){return yt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},gt.finishNodeAt=function(t,e,i,n){return yt.call(this,t,e,i,n)},gt.copyNode=function(t){var e=new mt(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var vt,bt,_t="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",wt=_t+" Extended_Pictographic",Tt=wt+" EBase EComp EMod EPres ExtPict",St={9:_t,10:wt,11:wt,12:Tt,13:Tt,14:Tt},xt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",kt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ct=kt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Et=Ct+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",It=Et+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Pt=It+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",At={9:kt,10:Ct,11:Et,12:It,13:Pt,14:Pt+" Kawi Nag_Mundari Nagm"},Lt={};for(var Ot=0,Dt=[9,10,11,12,13,14];Ot<Dt.length;Ot+=1)bt=void 0,(bt=Lt[vt=Dt[Ot]]={binary:L(St[vt]+" "+xt),nonBinary:{General_Category:L(xt),Script:L(At[vt])}}).nonBinary.Script_Extensions=bt.nonBinary.Script,bt.nonBinary.gc=bt.nonBinary.General_Category,bt.nonBinary.sc=bt.nonBinary.Script,bt.nonBinary.scx=bt.nonBinary.Script_Extensions;var Mt=z.prototype,Rt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Lt[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Nt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Bt(t){return t>=65&&t<=90||t>=97&&t<=122}function Ft(t){return Bt(t)||95===t}function $t(t){return Ft(t)||Ut(t)}function Ut(t){return t>=48&&t<=57}function jt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Vt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Ht(t){return t>=48&&t<=55}Rt.prototype.reset=function(t,e,i){var n=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},Rt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Rt.prototype.at=function(t,e){void 0===e&&(e=!1);var i=this.source,n=i.length;if(t>=n)return-1;var r=i.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=n)return r;var s=i.charCodeAt(t+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r},Rt.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var i=this.source,n=i.length;if(t>=n)return n;var r,s=i.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=n||(r=i.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Rt.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Rt.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Rt.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Rt.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Mt.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,n=0;n<i.length;n++){var r=i.charAt(n);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(r,n+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Mt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Mt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var n=i[e];-1===t.groupNames.indexOf(n)&&t.raise("Invalid named capture referenced")}},Mt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Mt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Mt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Mt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},Mt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Mt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Mt.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},Mt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Mt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Mt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Mt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Mt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Mt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Mt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Nt(e)&&(t.lastIntValue=e,t.advance(),!0)},Mt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!Nt(i);)t.advance();return t.pos!==e},Mt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},Mt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Mt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Mt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=O(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=O(t.lastIntValue);return!0}return!1},Mt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),function(t){return h(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Mt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),function(t){return d(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Mt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Mt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},Mt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Mt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Mt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Mt.regexp_eatZero=function(t){return 48===t.current()&&!Ut(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Mt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Mt.regexp_eatControlLetter=function(t){var e=t.current();return!!Bt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Mt.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var i,n=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(r&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((i=t.lastIntValue)>=0&&i<=1114111))return!0;r&&t.raise("Invalid unicode escape"),t.pos=n}return!1},Mt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},Mt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Mt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Mt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,n),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},Mt.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){P(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},Mt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Mt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Ft(e=t.current());)t.lastStringValue+=O(e),t.advance();return""!==t.lastStringValue},Mt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";$t(e=t.current());)t.lastStringValue+=O(e),t.advance();return""!==t.lastStringValue},Mt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Mt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Mt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},Mt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||Ht(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return 93!==n&&(t.lastIntValue=n,t.advance(),!0)},Mt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Mt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Ut(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},Mt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Mt.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;Ut(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},Mt.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;jt(i=t.current());)t.lastIntValue=16*t.lastIntValue+Vt(i),t.advance();return t.pos!==e},Mt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},Mt.regexp_eatOctalDigit=function(t){var e=t.current();return Ht(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Mt.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var r=t.current();if(!jt(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Vt(r),t.advance()}return!0};var qt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new R(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Wt=z.prototype;function zt(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}Wt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new qt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Wt.getToken=function(){return this.next(),new qt(this)},"undefined"!=typeof Symbol&&(Wt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===b.eof,value:e}}}}),Wt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Wt.readToken=function(t){return h(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Wt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},Wt.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var n=void 0,r=e;(n=S(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())},Wt.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!T(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},Wt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&x.test(String.fromCharCode(t))))break t;++this.pos}}},Wt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},Wt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},Wt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},Wt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,n=b.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(b.assign,i+1):this.finishOp(n,i)},Wt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===e?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},Wt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},Wt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!_.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},Wt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(b.assign,i+1):this.finishOp(b.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(b.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Wt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},Wt.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(b.questionDot,2)}if(63===e)return t>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(b.coalesce,2)}return this.finishOp(b.question,1)},Wt.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,h(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(b.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+O(t)+"'")},Wt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(b.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+O(t)+"'")},Wt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},Wt.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(_.test(n)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===n)e=!0;else if("]"===n&&e)e=!1;else if("/"===n&&!e)break;t="\\"===n}++this.pos}var r=this.input.slice(i,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Rt(this));o.reset(i,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(r,a)}catch(t){}return this.finishToken(b.regexp,{pattern:r,flags:a,value:l})},Wt.readInt=function(t,e,i){for(var n=this.options.ecmaVersion>=12&&void 0===e,r=i&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,l=0,c=null==e?1/0:e;l<c;++l,++this.pos){var u=this.input.charCodeAt(this.pos),h=void 0;if(n&&95===u)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=u;else{if((h=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;o=u,a=a*t+h}}return n&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},Wt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return null==i&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i=zt(this.input.slice(e,this.pos)),++this.pos):h(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,i)},Wt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&110===n){var r=zt(this.input.slice(e,this.pos));return++this.pos,h(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,r)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),46!==n||i||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||i||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),h(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),i?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(b.num,a)},Wt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Wt.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):8232===n||8233===n?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(T(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(b.string,e)};var Gt={};Wt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Gt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Wt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Gt;this.raise(t,e)},Wt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(b.template,t)):36===i?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(T(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Wt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Wt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return O(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return T(e)?"":String.fromCharCode(e)}},Wt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},Wt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(d(r,n))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?h:d)(a,n)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=O(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},Wt.readWord=function(){var t=this.readWord1(),e=b.name;return this.keywords.test(t)&&(e=y[t]),this.finishToken(e,t)};var Kt="8.8.2";z.acorn={Parser:z,version:Kt,defaultOptions:B,Position:M,SourceLocation:R,getLineInfo:N,Node:mt,TokenType:p,tokTypes:b,keywordTypes:y,TokContext:at,tokContexts:ot,isIdentifierChar:d,isIdentifierStart:h,Token:qt,isNewLine:T,lineBreak:_,lineBreakG:w,nonASCIIwhitespace:x},t.Node=mt,t.Parser=z,t.Position=M,t.SourceLocation=R,t.TokContext=at,t.Token=qt,t.TokenType=p,t.defaultOptions=B,t.getLineInfo=N,t.isIdentifierChar=d,t.isIdentifierStart=h,t.isNewLine=T,t.keywordTypes=y,t.lineBreak=_,t.lineBreakG=w,t.nonASCIIwhitespace=x,t.parse=function(t,e){return z.parse(t,e)},t.parseExpressionAt=function(t,e,i){return z.parseExpressionAt(t,e,i)},t.tokContexts=ot,t.tokTypes=b,t.tokenizer=function(t,e){return z.tokenizer(t,e)},t.version=Kt}(e)},30794:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(33938),r=i.n(n);let s=null;s=t=>`${t}.db`;const a={};a.settings=r().create({filename:s("settings"),autoload:!0}),a.profiles=r().create({filename:s("profiles"),autoload:!0}),a.playlists=r().create({filename:s("playlists"),autoload:!0}),a.history=r().create({filename:s("history"),autoload:!0});const o=a,l={settings:class{static find(){return o.settings.find({_id:{$ne:"bounds"}})}static upsert(t,e){return o.settings.update({_id:t},{_id:t,value:e},{upsert:!0})}static _findAppReadyRelatedSettings(){return o.settings.find({$or:[{_id:"disableSmoothScrolling"},{_id:"useProxy"},{_id:"proxyProtocol"},{_id:"proxyHostname"},{_id:"proxyPort"}]})}static _findBounds(){return o.settings.findOne({_id:"bounds"})}static _findTheme(){return o.settings.findOne({_id:"baseTheme"})}static _findSidenavSettings(){return{hideTrendingVideos:o.settings.findOne({_id:"hideTrendingVideos"}),hidePopularVideos:o.settings.findOne({_id:"hidePopularVideos"}),hidePlaylists:o.settings.findOne({_id:"hidePlaylists"})}}static _updateBounds(t){return o.settings.update({_id:"bounds"},{_id:"bounds",value:t},{upsert:!0})}},history:class{static find(){return o.history.find({}).sort({timeWatched:-1})}static upsert(t){return o.history.update({videoId:t.videoId},t,{upsert:!0})}static updateWatchProgress(t,e){return o.history.update({videoId:t},{$set:{watchProgress:e}},{upsert:!0})}static updateLastViewedPlaylist(t,e){return o.history.update({videoId:t},{$set:{lastViewedPlaylistId:e}},{upsert:!0})}static delete(t){return o.history.remove({videoId:t})}static deleteAll(){return o.history.remove({},{multi:!0})}static persist(){o.history.persistence.compactDatafile()}},profiles:class{static create(t){return o.profiles.insert(t)}static find(){return o.profiles.find({})}static upsert(t){return o.profiles.update({_id:t._id},t,{upsert:!0})}static delete(t){return o.profiles.remove({_id:t})}static persist(){o.profiles.persistence.compactDatafile()}},playlists:class{static create(t){return o.playlists.insert(t)}static find(){return o.playlists.find({})}static upsertVideoByPlaylistName(t,e){return o.playlists.update({playlistName:t},{$push:{videos:e}},{upsert:!0})}static upsertVideoIdsByPlaylistId(t,e){return o.playlists.update({_id:t},{$push:{videos:{$each:e}}},{upsert:!0})}static delete(t){return o.playlists.remove({_id:t,protected:{$ne:!0}})}static deleteVideoIdByPlaylistName(t,e){return o.playlists.update({playlistName:t},{$pull:{videos:{videoId:e}}},{upsert:!0})}static deleteVideoIdsByPlaylistName(t,e){return o.playlists.update({playlistName:t},{$pull:{videos:{$in:e}}},{upsert:!0})}static deleteAllVideosByPlaylistName(t){return o.playlists.update({playlistName:t},{$set:{videos:[]}},{upsert:!0})}static deleteMultiple(t){return o.playlists.remove({_id:{$in:t},protected:{$ne:!0}})}static deleteAll(){return o.playlists.remove({protected:{$ne:!0}})}}},c={settings:class{static find(){return l.settings.find()}static upsert(t,e){return l.settings.upsert(t,e)}},history:class{static find(){return l.history.find()}static upsert(t){return l.history.upsert(t)}static updateWatchProgress(t,e){return l.history.updateWatchProgress(t,e)}static updateLastViewedPlaylist(t,e){return l.history.updateLastViewedPlaylist(t,e)}static delete(t){return l.history.delete(t)}static deleteAll(){return l.history.deleteAll()}static persist(){l.history.persist()}},profiles:class{static create(t){return l.profiles.create(t)}static find(){return l.profiles.find()}static upsert(t){return l.profiles.upsert(t)}static delete(t){return l.profiles.delete(t)}static persist(){l.profiles.persist()}},playlists:class{static create(t){return l.playlists.create(t)}static find(){return l.playlists.find()}static upsertVideoByPlaylistName(t,e){return l.playlists.upsertVideoByPlaylistName(t,e)}static upsertVideoIdsByPlaylistId(t,e){return l.playlists.upsertVideoIdsByPlaylistId(t,e)}static delete(t){return l.playlists.delete(t)}static deleteVideoIdByPlaylistName(t,e){return l.playlists.deleteVideoIdByPlaylistName(t,e)}static deleteVideoIdsByPlaylistName(t,e){return l.playlists.deleteVideoIdsByPlaylistName(t,e)}static deleteAllVideosByPlaylistName(t){return l.playlists.deleteAllVideosByPlaylistName(t)}static deleteMultiple(t){return l.playlists.deleteMultiple(t)}static deleteAll(){return l.playlists.deleteAll()}}}},79742:(t,e)=>{"use strict";e.byteLength=function(t){var e=l(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,s=l(t),a=s[0],o=s[1],c=new r(function(t,e,i){return 3*(e+i)/4-i}(0,a,o)),u=0,h=o>0?a-4:a;for(i=0;i<h;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===o&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,c[u++]=255&e),1===o&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,s=[],a=16383,o=0,l=n-r;o<l;o+=a)s.push(c(t,o,o+a>l?l:o+a));return 1===r?(e=t[n-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),s.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)i[a]=s[a],n[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,n){for(var r,s,a=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(i[(s=r)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},19382:()=>{},48764:(t,e,i)=>{"use strict";var n=i(79742),r=i(80645);e.lW=o,e.h2=50;var s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return l(t,e,i)}function l(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i=0|p(t,e),n=a(i),r=n.write(t,e);return r!==i&&(n=n.slice(0,r)),n}(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer))return function(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i)).__proto__=o.prototype,n}(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,i);var r=function(t){if(o.isBuffer(t)){var e=0|d(t.length),i=a(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||j(t.length)?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return c(t),a(t<0?0:0|d(t))}function h(t){for(var e=t.length<0?0:0|d(t.length),i=a(e),n=0;n<e;n+=1)i[n]=255&t[n];return i}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function p(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(t).length;default:if(r)return n?-1:B(t).length;e=(""+e).toLowerCase(),r=!0}}function f(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return k(this,e,i);case"ascii":return E(this,e,i);case"latin1":case"binary":return I(this,e,i);case"base64":return x(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),j(i=+i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,r){var s,a=1,o=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,o/=2,l/=2,i/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(s=i;s<o;s++)if(c(t,s)===c(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*a}else-1!==u&&(s-=s-u),u=-1}else for(i+l>o&&(i=o-l),s=i;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(c(t,s+d)!==c(e,d)){h=!1;break}if(h)return s}return-1}function v(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s=e.length;n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(j(o))return a;t[i+a]=o}return a}function b(t,e,i,n){return $(B(e,t.length-i),t,i,n)}function _(t,e,i,n){return $(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function w(t,e,i,n){return _(t,e,i,n)}function T(t,e,i,n){return $(F(e),t,i,n)}function S(t,e,i,n){return $(function(t,e){for(var i,n,r,s=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(i=t.charCodeAt(a))>>8,r=i%256,s.push(r),s.push(n);return s}(e,t.length-i),t,i,n)}function x(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function k(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var s,a,o,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=i)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(s=t[r+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=t[r+1],a=t[r+2],128==(192&s)&&128==(192&a)&&(l=(15&c)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[r+1],a=t[r+2],o=t[r+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var i="",n=0;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=C));return i}(n)}o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,i){return l(t,e,i)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,i){return function(t,e,i){return c(t),t<=0?a(t):void 0!==e?"string"==typeof i?a(t).fill(e,i):a(t).fill(e):a(t)}(t,e,i)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(U(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);r<s;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=o.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(U(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",i=e.h2;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},o.prototype.compare=function(t,e,i,n,r){if(U(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),l=Math.min(s,a),c=this.slice(n,r),u=t.slice(e,i),h=0;h<l;++h)if(c[h]!==u[h]){s=c[h],a=u[h];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},o.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},o.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},o.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return v(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return _(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function E(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function P(t,e,i){var n,r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var s="",a=e;a<i;++a)s+=(n=t[a])<16?"0"+n.toString(16):n.toString(16);return s}function A(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function L(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,n,r,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function D(t,e,i,n,r,s){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,n,s){return e=+e,i>>>=0,s||D(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function R(t,e,i,n,s){return e=+e,i>>>=0,s||D(t,0,i,8),r.write(t,e,i,n,52,8),i+8}o.prototype.slice=function(t,e){var i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n},o.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},o.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);for(var n=e,r=1,s=this[t+--n];n>0&&(r*=256);)s+=this[t+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},o.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),r.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),r.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),r.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),r.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,i,n){t=+t,e>>>=0,i>>>=0,n||O(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[e]=255&t;++s<i&&(r*=256);)this[e+s]=t/r&255;return e+i},o.prototype.writeUIntBE=function(t,e,i,n){t=+t,e>>>=0,i>>>=0,n||O(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+i},o.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e>>>=0,!n){var r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}var s=0,a=1,o=0;for(this[e]=255&t;++s<i&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},o.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e>>>=0,!n){var r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}var s=i-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return R(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return R(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r=n-i;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,i,n);else if(this===t&&i<e&&e<n)for(var s=r-1;s>=0;--s)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,n),e);return r},o.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var r=t.charCodeAt(0);("utf8"===n&&r<128||"latin1"===n)&&(t=r)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,n),l=a.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<i-e;++s)this[s+e]=a[s%l]}return this};var N=/[^+/0-9A-Za-z-_]/g;function B(t,e){var i;e=e||1/0;for(var n=t.length,r=null,s=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function F(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}},21924:(t,e,i)=>{"use strict";var n=i(40210),r=i(55559),s=r(n("String.prototype.indexOf"));t.exports=function(t,e){var i=n(t,!!e);return"function"==typeof i&&s(t,".prototype.")>-1?r(i):i}},55559:(t,e,i)=>{"use strict";var n=i(58612),r=i(40210),s=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||n.call(a,s),l=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=o(n,a,arguments);return l&&c&&l(e,"length").configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))}),e};var h=function(){return o(n,s,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},219:t=>{!function(){var e=!1,i=/xyz/.test((function(){xyz}))?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(t){var n=this.prototype;e=!0;var r=new this;for(var s in e=!1,t)r[s]="function"==typeof t[s]&&"function"==typeof n[s]&&i.test(t[s])?function(t,e){return function(){var i=this._super;this._super=n[t];var r=e.apply(this,arguments);return this._super=i,r}}(s,t[s]):t[s];function a(){!e&&this.init&&this.init.apply(this,arguments)}return a.prototype=r,a.prototype.constructor=a,a.extend=arguments.callee,a},t.exports=Class}()},19662:(t,e,i)=>{var n=i(60614),r=i(66330),s=TypeError;t.exports=function(t){if(n(t))return t;throw s(r(t)+" is not a function")}},39483:(t,e,i)=>{var n=i(4411),r=i(66330),s=TypeError;t.exports=function(t){if(n(t))return t;throw s(r(t)+" is not a constructor")}},96077:(t,e,i)=>{var n=i(60614),r=String,s=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw s("Can't set "+r(t)+" as a prototype")}},51223:(t,e,i)=>{var n=i(5112),r=i(70030),s=i(3070).f,a=n("unscopables"),o=Array.prototype;null==o[a]&&s(o,a,{configurable:!0,value:r(null)}),t.exports=function(t){o[a][t]=!0}},31530:(t,e,i)=>{"use strict";var n=i(28710).charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},25787:(t,e,i)=>{var n=i(47976),r=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw r("Incorrect invocation")}},19670:(t,e,i)=>{var n=i(70111),r=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw s(r(t)+" is not an object")}},23013:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:(t,e,i)=>{var n=i(47293);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},90260:(t,e,i)=>{"use strict";var n,r,s,a=i(23013),o=i(19781),l=i(17854),c=i(60614),u=i(70111),h=i(92597),d=i(70648),p=i(66330),f=i(68880),m=i(98052),g=i(47045),y=i(47976),v=i(79518),b=i(27674),_=i(5112),w=i(69711),T=i(29909),S=T.enforce,x=T.get,k=l.Int8Array,C=k&&k.prototype,E=l.Uint8ClampedArray,I=E&&E.prototype,P=k&&v(k),A=C&&v(C),L=Object.prototype,O=l.TypeError,D=_("toStringTag"),M=w("TYPED_ARRAY_TAG"),R="TypedArrayConstructor",N=a&&!!b&&"Opera"!==d(l.opera),B=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$={BigInt64Array:8,BigUint64Array:8},U=function(t){var e=v(t);if(u(e)){var i=x(e);return i&&h(i,R)?i[R]:U(e)}},j=function(t){if(!u(t))return!1;var e=d(t);return h(F,e)||h($,e)};for(n in F)(s=(r=l[n])&&r.prototype)?S(s)[R]=r:N=!1;for(n in $)(s=(r=l[n])&&r.prototype)&&(S(s)[R]=r);if((!N||!c(P)||P===Function.prototype)&&(P=function(){throw O("Incorrect invocation")},N))for(n in F)l[n]&&b(l[n],P);if((!N||!A||A===L)&&(A=P.prototype,N))for(n in F)l[n]&&b(l[n].prototype,A);if(N&&v(I)!==A&&b(I,A),o&&!h(A,D))for(n in B=!0,g(A,D,{configurable:!0,get:function(){return u(this)?this[M]:void 0}}),F)l[n]&&f(l[n],M,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:B&&M,aTypedArray:function(t){if(j(t))return t;throw O("Target is not a typed array")},aTypedArrayConstructor:function(t){if(c(t)&&(!b||y(P,t)))return t;throw O(p(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,i,n){if(o){if(i)for(var r in F){var s=l[r];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(i){try{s.prototype[t]=e}catch(t){}}}A[t]&&!i||m(A,t,i?e:N&&C[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,i){var n,r;if(o){if(b){if(i)for(n in F)if((r=l[n])&&h(r,t))try{delete r[t]}catch(t){}if(P[t]&&!i)return;try{return m(P,t,i?e:N&&P[t]||e)}catch(t){}}for(n in F)!(r=l[n])||r[t]&&!i||m(r,t,e)}},getTypedArrayConstructor:U,isView:function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(F,e)||h($,e)},isTypedArray:j,TypedArray:P,TypedArrayPrototype:A}},13331:(t,e,i)=>{"use strict";var n=i(17854),r=i(1702),s=i(19781),a=i(23013),o=i(76530),l=i(68880),c=i(47045),u=i(89190),h=i(47293),d=i(25787),p=i(19303),f=i(17466),m=i(57067),g=i(11179),y=i(79518),v=i(27674),b=i(8006).f,_=i(21285),w=i(41589),T=i(58003),S=i(29909),x=o.PROPER,k=o.CONFIGURABLE,C="ArrayBuffer",E="DataView",I="prototype",P="Wrong index",A=S.getterFor(C),L=S.getterFor(E),O=S.set,D=n[C],M=D,R=M&&M[I],N=n[E],B=N&&N[I],F=Object.prototype,$=n.Array,U=n.RangeError,j=r(_),V=r([].reverse),H=g.pack,q=g.unpack,W=function(t){return[255&t]},z=function(t){return[255&t,t>>8&255]},G=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},K=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Y=function(t){return H(t,23,4)},X=function(t){return H(t,52,8)},Q=function(t,e,i){c(t[I],e,{configurable:!0,get:function(){return i(this)[e]}})},J=function(t,e,i,n){var r=m(i),s=L(t);if(r+e>s.byteLength)throw U(P);var a=s.bytes,o=r+s.byteOffset,l=w(a,o,o+e);return n?l:V(l)},Z=function(t,e,i,n,r,s){var a=m(i),o=L(t);if(a+e>o.byteLength)throw U(P);for(var l=o.bytes,c=a+o.byteOffset,u=n(+r),h=0;h<e;h++)l[c+h]=u[s?h:e-h-1]};if(a){var tt=x&&D.name!==C;if(h((function(){D(1)}))&&h((function(){new D(-1)}))&&!h((function(){return new D,new D(1.5),new D(NaN),1!=D.length||tt&&!k})))tt&&k&&l(D,"name",C);else{(M=function(t){return d(this,R),new D(m(t))})[I]=R;for(var et,it=b(D),nt=0;it.length>nt;)(et=it[nt++])in M||l(M,et,D[et]);R.constructor=M}v&&y(B)!==F&&v(B,F);var rt=new N(new M(2)),st=r(B.setInt8);rt.setInt8(0,2147483648),rt.setInt8(1,2147483649),!rt.getInt8(0)&&rt.getInt8(1)||u(B,{setInt8:function(t,e){st(this,t,e<<24>>24)},setUint8:function(t,e){st(this,t,e<<24>>24)}},{unsafe:!0})}else R=(M=function(t){d(this,R);var e=m(t);O(this,{type:C,bytes:j($(e),0),byteLength:e}),s||(this.byteLength=e,this.detached=!1)})[I],B=(N=function(t,e,i){d(this,B),d(t,R);var n=A(t),r=n.byteLength,a=p(e);if(a<0||a>r)throw U("Wrong offset");if(a+(i=void 0===i?r-a:f(i))>r)throw U("Wrong length");O(this,{type:E,buffer:t,byteLength:i,byteOffset:a,bytes:n.bytes}),s||(this.buffer=t,this.byteLength=i,this.byteOffset=a)})[I],s&&(Q(M,"byteLength",A),Q(N,"buffer",L),Q(N,"byteLength",L),Q(N,"byteOffset",L)),u(B,{getInt8:function(t){return J(this,1,t)[0]<<24>>24},getUint8:function(t){return J(this,1,t)[0]},getInt16:function(t){var e=J(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=J(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return K(J(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return K(J(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return q(J(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return q(J(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Z(this,1,t,W,e)},setUint8:function(t,e){Z(this,1,t,W,e)},setInt16:function(t,e){Z(this,2,t,z,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Z(this,2,t,z,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Z(this,4,t,G,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Z(this,4,t,G,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Z(this,4,t,Y,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Z(this,8,t,X,e,arguments.length>2?arguments[2]:void 0)}});T(M,C),T(N,E),t.exports={ArrayBuffer:M,DataView:N}},1048:(t,e,i)=>{"use strict";var n=i(47908),r=i(51400),s=i(26244),a=i(85117),o=Math.min;t.exports=[].copyWithin||function(t,e){var i=n(this),l=s(i),c=r(t,l),u=r(e,l),h=arguments.length>2?arguments[2]:void 0,d=o((void 0===h?l:r(h,l))-u,l-c),p=1;for(u<c&&c<u+d&&(p=-1,u+=d-1,c+=d-1);d-- >0;)u in i?i[c]=i[u]:a(i,c),c+=p,u+=p;return i}},21285:(t,e,i)=>{"use strict";var n=i(47908),r=i(51400),s=i(26244);t.exports=function(t){for(var e=n(this),i=s(e),a=arguments.length,o=r(a>1?arguments[1]:void 0,i),l=a>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);c>o;)e[o++]=t;return e}},18533:(t,e,i)=>{"use strict";var n=i(42092).forEach,r=i(9341)("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},97745:(t,e,i)=>{var n=i(26244);t.exports=function(t,e){for(var i=0,r=n(e),s=new t(r);r>i;)s[i]=e[i++];return s}},48457:(t,e,i)=>{"use strict";var n=i(49974),r=i(46916),s=i(47908),a=i(53411),o=i(97659),l=i(4411),c=i(26244),u=i(86135),h=i(18554),d=i(71246),p=Array;t.exports=function(t){var e=s(t),i=l(this),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m;g&&(m=n(m,f>2?arguments[2]:void 0));var y,v,b,_,w,T,S=d(e),x=0;if(!S||this===p&&o(S))for(y=c(e),v=i?new this(y):p(y);y>x;x++)T=g?m(e[x],x):e[x],u(v,x,T);else for(w=(_=h(e,S)).next,v=i?new this:[];!(b=r(w,_)).done;x++)T=g?a(_,m,[b.value,x],!0):b.value,u(v,x,T);return v.length=x,v}},41318:(t,e,i)=>{var n=i(45656),r=i(51400),s=i(26244),a=function(t){return function(e,i,a){var o,l=n(e),c=s(l),u=r(a,c);if(t&&i!=i){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},9671:(t,e,i)=>{var n=i(49974),r=i(68361),s=i(47908),a=i(26244),o=function(t){var e=1==t;return function(i,o,l){for(var c,u=s(i),h=r(u),d=n(o,l),p=a(h);p-- >0;)if(d(c=h[p],p,u))switch(t){case 0:return c;case 1:return p}return e?-1:void 0}};t.exports={findLast:o(0),findLastIndex:o(1)}},42092:(t,e,i)=>{var n=i(49974),r=i(1702),s=i(68361),a=i(47908),o=i(26244),l=i(65417),c=r([].push),u=function(t){var e=1==t,i=2==t,r=3==t,u=4==t,h=6==t,d=7==t,p=5==t||h;return function(f,m,g,y){for(var v,b,_=a(f),w=s(_),T=n(m,g),S=o(w),x=0,k=y||l,C=e?k(f,S):i||d?k(f,0):void 0;S>x;x++)if((p||x in w)&&(b=T(v=w[x],x,_),t))if(e)C[x]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:c(C,v)}else switch(t){case 4:return!1;case 7:c(C,v)}return h?-1:r||u?u:C}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},86583:(t,e,i)=>{"use strict";var n=i(22104),r=i(45656),s=i(19303),a=i(26244),o=i(9341),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,h=o("lastIndexOf"),d=u||!h;t.exports=d?function(t){if(u)return n(c,this,arguments)||0;var e=r(this),i=a(e),o=i-1;for(arguments.length>1&&(o=l(o,s(arguments[1]))),o<0&&(o=i+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:c},81194:(t,e,i)=>{var n=i(47293),r=i(5112),s=i(7392),a=r("species");t.exports=function(t){return s>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:(t,e,i)=>{"use strict";var n=i(47293);t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){return 1},1)}))}},53671:(t,e,i)=>{var n=i(19662),r=i(47908),s=i(68361),a=i(26244),o=TypeError,l=function(t){return function(e,i,l,c){n(i);var u=r(e),h=s(u),d=a(u),p=t?d-1:0,f=t?-1:1;if(l<2)for(;;){if(p in h){c=h[p],p+=f;break}if(p+=f,t?p<0:d<=p)throw o("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=f)p in h&&(c=i(c,h[p],p,u));return c}};t.exports={left:l(!1),right:l(!0)}},83658:(t,e,i)=>{"use strict";var n=i(19781),r=i(43157),s=TypeError,a=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(r(t)&&!a(t,"length").writable)throw s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},41589:(t,e,i)=>{var n=i(51400),r=i(26244),s=i(86135),a=Array,o=Math.max;t.exports=function(t,e,i){for(var l=r(t),c=n(e,l),u=n(void 0===i?l:i,l),h=a(o(u-c,0)),d=0;c<u;c++,d++)s(h,d,t[c]);return h.length=d,h}},50206:(t,e,i)=>{var n=i(1702);t.exports=n([].slice)},94362:(t,e,i)=>{var n=i(41589),r=Math.floor,s=function(t,e){var i=t.length,l=r(i/2);return i<8?a(t,e):o(t,s(n(t,0,l),e),s(n(t,l),e),e)},a=function(t,e){for(var i,n,r=t.length,s=1;s<r;){for(n=s,i=t[s];n&&e(t[n-1],i)>0;)t[n]=t[--n];n!==s++&&(t[n]=i)}return t},o=function(t,e,i,n){for(var r=e.length,s=i.length,a=0,o=0;a<r||o<s;)t[a+o]=a<r&&o<s?n(e[a],i[o])<=0?e[a++]:i[o++]:a<r?e[a++]:i[o++];return t};t.exports=s},77475:(t,e,i)=>{var n=i(43157),r=i(4411),s=i(70111),a=i(5112)("species"),o=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(r(e)&&(e===o||n(e.prototype))||s(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?o:e}},65417:(t,e,i)=>{var n=i(77475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},21843:(t,e,i)=>{var n=i(26244);t.exports=function(t,e){for(var i=n(t),r=new e(i),s=0;s<i;s++)r[s]=t[i-s-1];return r}},11572:(t,e,i)=>{var n=i(26244),r=i(19303),s=RangeError;t.exports=function(t,e,i,a){var o=n(t),l=r(i),c=l<0?o+l:l;if(c>=o||c<0)throw s("Incorrect index");for(var u=new e(o),h=0;h<o;h++)u[h]=h===c?a:t[h];return u}},14170:t=>{for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i={},n=0;n<66;n++)i[e.charAt(n)]=n;t.exports={itoc:e,ctoi:i}},53411:(t,e,i)=>{var n=i(19670),r=i(99212);t.exports=function(t,e,i,s){try{return s?e(n(i)[0],i[1]):e(i)}catch(e){r(t,"throw",e)}}},17072:(t,e,i)=>{var n=i(5112)("iterator"),r=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){r=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var s={};s[n]=function(){return{next:function(){return{done:i=!0}}}},t(s)}catch(t){}return i}},84326:(t,e,i)=>{var n=i(1702),r=n({}.toString),s=n("".slice);t.exports=function(t){return s(r(t),8,-1)}},70648:(t,e,i)=>{var n=i(51694),r=i(60614),s=i(84326),a=i(5112)("toStringTag"),o=Object,l="Arguments"==s(function(){return arguments}());t.exports=n?s:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=o(t),a))?i:l?s(e):"Object"==(n=s(e))&&r(e.callee)?"Arguments":n}},95631:(t,e,i)=>{"use strict";var n=i(70030),r=i(47045),s=i(89190),a=i(49974),o=i(25787),l=i(68554),c=i(20408),u=i(51656),h=i(76178),d=i(96340),p=i(19781),f=i(62423).fastKey,m=i(29909),g=m.set,y=m.getterFor;t.exports={getConstructor:function(t,e,i,u){var h=t((function(t,r){o(t,d),g(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),p||(t.size=0),l(r)||c(r,t[u],{that:t,AS_ENTRIES:i})})),d=h.prototype,m=y(e),v=function(t,e,i){var n,r,s=m(t),a=b(t,e);return a?a.value=i:(s.last=a={index:r=f(e,!0),key:e,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=a),n&&(n.next=a),p?s.size++:t.size++,"F"!==r&&(s.index[r]=a)),t},b=function(t,e){var i,n=m(t),r=f(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return s(d,{clear:function(){for(var t=m(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var e=this,i=m(e),n=b(e,t);if(n){var r=n.next,s=n.previous;delete i.index[n.index],n.removed=!0,s&&(s.next=r),r&&(r.previous=s),i.first==n&&(i.first=r),i.last==n&&(i.last=s),p?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=m(this),n=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!b(this,t)}}),s(d,i?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),p&&r(d,"size",{configurable:!0,get:function(){return m(this).size}}),h},setStrong:function(t,e,i){var n=e+" Iterator",r=y(e),s=y(n);u(t,e,(function(t,e){g(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=s(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?h("keys"==e?i.key:"values"==e?i.value:[i.key,i.value],!1):(t.target=void 0,h(void 0,!0))}),i?"entries":"values",!i,!0),d(e)}}},29320:(t,e,i)=>{"use strict";var n=i(1702),r=i(89190),s=i(62423).getWeakData,a=i(25787),o=i(19670),l=i(68554),c=i(70111),u=i(20408),h=i(42092),d=i(92597),p=i(29909),f=p.set,m=p.getterFor,g=h.find,y=h.findIndex,v=n([].splice),b=0,_=function(t){return t.frozen||(t.frozen=new w)},w=function(){this.entries=[]},T=function(t,e){return g(t.entries,(function(t){return t[0]===e}))};w.prototype={get:function(t){var e=T(this,t);if(e)return e[1]},has:function(t){return!!T(this,t)},set:function(t,e){var i=T(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=y(this.entries,(function(e){return e[0]===t}));return~e&&v(this.entries,e,1),!!~e}},t.exports={getConstructor:function(t,e,i,n){var h=t((function(t,r){a(t,p),f(t,{type:e,id:b++,frozen:void 0}),l(r)||u(r,t[n],{that:t,AS_ENTRIES:i})})),p=h.prototype,g=m(e),y=function(t,e,i){var n=g(t),r=s(o(e),!0);return!0===r?_(n).set(e,i):r[n.id]=i,t};return r(p,{delete:function(t){var e=g(this);if(!c(t))return!1;var i=s(t);return!0===i?_(e).delete(t):i&&d(i,e.id)&&delete i[e.id]},has:function(t){var e=g(this);if(!c(t))return!1;var i=s(t);return!0===i?_(e).has(t):i&&d(i,e.id)}}),r(p,i?{get:function(t){var e=g(this);if(c(t)){var i=s(t);return!0===i?_(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return y(this,t,e)}}:{add:function(t){return y(this,t,!0)}}),h}}},77710:(t,e,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(1702),a=i(54705),o=i(98052),l=i(62423),c=i(20408),u=i(25787),h=i(60614),d=i(68554),p=i(70111),f=i(47293),m=i(17072),g=i(58003),y=i(79587);t.exports=function(t,e,i){var v=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),_=v?"set":"add",w=r[t],T=w&&w.prototype,S=w,x={},k=function(t){var e=s(T[t]);o(T,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!p(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return b&&!p(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!p(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})};if(a(t,!h(w)||!(b||T.forEach&&!f((function(){(new w).entries().next()})))))S=i.getConstructor(e,t,v,_),l.enable();else if(a(t,!0)){var C=new S,E=C[_](b?{}:-0,1)!=C,I=f((function(){C.has(1)})),P=m((function(t){new w(t)})),A=!b&&f((function(){for(var t=new w,e=5;e--;)t[_](e,e);return!t.has(-0)}));P||((S=e((function(t,e){u(t,T);var i=y(new w,t,S);return d(e)||c(e,i[_],{that:i,AS_ENTRIES:v}),i}))).prototype=T,T.constructor=S),(I||A)&&(k("delete"),k("has"),v&&k("get")),(A||E)&&k(_),b&&T.clear&&delete T.clear}return x[t]=S,n({global:!0,constructor:!0,forced:S!=w},x),g(S,t),b||i.setStrong(S,t,v),S}},99920:(t,e,i)=>{var n=i(92597),r=i(53887),s=i(31236),a=i(3070);t.exports=function(t,e,i){for(var o=r(e),l=a.f,c=s.f,u=0;u<o.length;u++){var h=o[u];n(t,h)||i&&n(i,h)||l(t,h,c(e,h))}}},84964:(t,e,i)=>{var n=i(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},49920:(t,e,i)=>{var n=i(47293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},14230:(t,e,i)=>{var n=i(1702),r=i(84488),s=i(41340),a=/"/g,o=n("".replace);t.exports=function(t,e,i,n){var l=s(r(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+o(s(n),a,"&quot;")+'"'),c+">"+l+"</"+e+">"}},76178:t=>{t.exports=function(t,e){return{value:t,done:e}}},68880:(t,e,i)=>{var n=i(19781),r=i(3070),s=i(79114);t.exports=n?function(t,e,i){return r.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},79114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},86135:(t,e,i)=>{"use strict";var n=i(34948),r=i(3070),s=i(79114);t.exports=function(t,e,i){var a=n(e);a in t?r.f(t,a,s(0,i)):t[a]=i}},85573:(t,e,i)=>{"use strict";var n=i(1702),r=i(47293),s=i(76650).start,a=RangeError,o=isFinite,l=Math.abs,c=Date.prototype,u=c.toISOString,h=n(c.getTime),d=n(c.getUTCDate),p=n(c.getUTCFullYear),f=n(c.getUTCHours),m=n(c.getUTCMilliseconds),g=n(c.getUTCMinutes),y=n(c.getUTCMonth),v=n(c.getUTCSeconds);t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!o(h(this)))throw a("Invalid time value");var t=this,e=p(t),i=m(t),n=e<0?"-":e>9999?"+":"";return n+s(l(e),n?6:4,0)+"-"+s(y(t)+1,2,0)+"-"+s(d(t),2,0)+"T"+s(f(t),2,0)+":"+s(g(t),2,0)+":"+s(v(t),2,0)+"."+s(i,3,0)+"Z"}:u},38709:(t,e,i)=>{"use strict";var n=i(19670),r=i(92140),s=TypeError;t.exports=function(t){if(n(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw s("Incorrect hint");return r(this,t)}},47045:(t,e,i)=>{var n=i(56339),r=i(3070);t.exports=function(t,e,i){return i.get&&n(i.get,e,{getter:!0}),i.set&&n(i.set,e,{setter:!0}),r.f(t,e,i)}},98052:(t,e,i)=>{var n=i(60614),r=i(3070),s=i(56339),a=i(13072);t.exports=function(t,e,i,o){o||(o={});var l=o.enumerable,c=void 0!==o.name?o.name:e;if(n(i)&&s(i,c,o),o.global)l?t[e]=i:a(e,i);else{try{o.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=i:r.f(t,e,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},89190:(t,e,i)=>{var n=i(98052);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},13072:(t,e,i)=>{var n=i(17854),r=Object.defineProperty;t.exports=function(t,e){try{r(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},85117:(t,e,i)=>{"use strict";var n=i(66330),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw r("Cannot delete property "+n(e)+" of "+n(t))}},19781:(t,e,i)=>{var n=i(47293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:t=>{var e="object"==typeof document&&document.all,i=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:i}},80317:(t,e,i)=>{var n=i(17854),r=i(70111),s=n.document,a=r(s)&&r(s.createElement);t.exports=function(t){return a?s.createElement(t):{}}},7207:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},93678:t=>{t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},48324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(t,e,i)=>{var n=i(80317)("span").classList,r=n&&n.constructor&&n.constructor.prototype;t.exports=r===Object.prototype?void 0:r},68886:(t,e,i)=>{var n=i(88113).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},7871:(t,e,i)=>{var n=i(83823),r=i(35268);t.exports=!n&&!r&&"object"==typeof window&&"object"==typeof document},89363:t=>{t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},83823:t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},30256:(t,e,i)=>{var n=i(88113);t.exports=/MSIE|Trident/.test(n)},71528:(t,e,i)=>{var n=i(88113);t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},6833:(t,e,i)=>{var n=i(88113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},35268:(t,e,i)=>{var n=i(34155),r=i(84326);t.exports=void 0!==n&&"process"==r(n)},71036:(t,e,i)=>{var n=i(88113);t.exports=/web0s(?!.*chrome)/i.test(n)},88113:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:(t,e,i)=>{var n,r,s=i(17854),a=i(88113),o=s.process,l=s.Deno,c=o&&o.versions||l&&l.version,u=c&&c.v8;u&&(r=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!r&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(r=+n[1]),t.exports=r},98008:(t,e,i)=>{var n=i(88113).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},98770:(t,e,i)=>{var n=i(17854);t.exports=function(t){return n[t].prototype}},80748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},11060:(t,e,i)=>{var n=i(1702),r=Error,s=n("".replace),a=String(r("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,l=o.test(a);t.exports=function(t,e){if(l&&"string"==typeof t&&!r.prepareStackTrace)for(;e--;)t=s(t,o,"");return t}},5392:(t,e,i)=>{var n=i(68880),r=i(11060),s=i(22914),a=Error.captureStackTrace;t.exports=function(t,e,i,o){s&&(a?a(t,e):n(t,"stack",r(i,o)))}},22914:(t,e,i)=>{var n=i(47293),r=i(79114);t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",r(1,7)),7!==t.stack)}))},7762:(t,e,i)=>{"use strict";var n=i(19781),r=i(47293),s=i(19670),a=i(70030),o=i(56277),l=Error.prototype.toString,c=r((function(){if(n){var t=a(Object.defineProperty({},"name",{get:function(){return this===t}}));if("true"!==l.call(t))return!0}return"2: 1"!==l.call({message:1,name:2})||"Error"!==l.call({})}));t.exports=c?function(){var t=s(this),e=o(t.name,"Error"),i=o(t.message);return e?i?e+": "+i:e:i}:l},82109:(t,e,i)=>{var n=i(17854),r=i(31236).f,s=i(68880),a=i(98052),o=i(13072),l=i(99920),c=i(54705);t.exports=function(t,e){var i,u,h,d,p,f=t.target,m=t.global,g=t.stat;if(i=m?n:g?n[f]||o(f,{}):(n[f]||{}).prototype)for(u in e){if(d=e[u],h=t.dontCallGetSet?(p=r(i,u))&&p.value:i[u],!c(m?u:f+(g?".":"#")+u,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(t.sham||h&&h.sham)&&s(d,"sham",!0),a(i,u,d,t)}}},47293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},27007:(t,e,i)=>{"use strict";i(74916);var n=i(21470),r=i(98052),s=i(22261),a=i(47293),o=i(5112),l=i(68880),c=o("species"),u=RegExp.prototype;t.exports=function(t,e,i,h){var d=o(t),p=!a((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),f=p&&!a((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[c]=function(){return i},i.flags="",i[d]=/./[d]),i.exec=function(){return e=!0,null},i[d](""),!e}));if(!p||!f||i){var m=n(/./[d]),g=e(d,""[t],(function(t,e,i,r,a){var o=n(t),l=e.exec;return l===s||l===u.exec?p&&!a?{done:!0,value:m(e,i,r)}:{done:!0,value:o(i,e,r)}:{done:!1}}));r(String.prototype,t,g[0]),r(u,d,g[1])}h&&l(u[d],"sham",!0)}},6790:(t,e,i)=>{"use strict";var n=i(43157),r=i(26244),s=i(7207),a=i(49974),o=function(t,e,i,l,c,u,h,d){for(var p,f,m=c,g=0,y=!!h&&a(h,d);g<l;)g in i&&(p=y?y(i[g],g,e):i[g],u>0&&n(p)?(f=r(p),m=o(t,e,p,f,m,u-1)-1):(s(m+1),t[m]=p),m++),g++;return m};t.exports=o},76677:(t,e,i)=>{var n=i(47293);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},22104:(t,e,i)=>{var n=i(34374),r=Function.prototype,s=r.apply,a=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(s):function(){return a.apply(s,arguments)})},49974:(t,e,i)=>{var n=i(21470),r=i(19662),s=i(34374),a=n(n.bind);t.exports=function(t,e){return r(t),void 0===e?t:s?a(t,e):function(){return t.apply(e,arguments)}}},34374:(t,e,i)=>{var n=i(47293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},27065:(t,e,i)=>{"use strict";var n=i(1702),r=i(19662),s=i(70111),a=i(92597),o=i(50206),l=i(34374),c=Function,u=n([].concat),h=n([].join),d={},p=function(t,e,i){if(!a(d,e)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";d[e]=c("C,a","return new C("+h(n,",")+")")}return d[e](t,i)};t.exports=l?c.bind:function(t){var e=r(this),i=e.prototype,n=o(arguments,1),a=function(){var i=u(n,o(arguments));return this instanceof a?p(e,i.length,i):e.apply(t,i)};return s(i)&&(a.prototype=i),a}},46916:(t,e,i)=>{var n=i(34374),r=Function.prototype.call;t.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},76530:(t,e,i)=>{var n=i(19781),r=i(92597),s=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=r(s,"name"),l=o&&"something"===function(){}.name,c=o&&(!n||n&&a(s,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},75668:(t,e,i)=>{var n=i(1702),r=i(19662);t.exports=function(t,e,i){try{return n(r(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}},21470:(t,e,i)=>{var n=i(84326),r=i(1702);t.exports=function(t){if("Function"===n(t))return r(t)}},1702:(t,e,i)=>{var n=i(34374),r=Function.prototype,s=r.call,a=n&&r.bind.bind(s,s);t.exports=n?a:function(t){return function(){return s.apply(t,arguments)}}},35005:(t,e,i)=>{var n=i(17854),r=i(60614),s=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(n[t]):n[t]&&n[t][e]}},71246:(t,e,i)=>{var n=i(70648),r=i(58173),s=i(68554),a=i(97497),o=i(5112)("iterator");t.exports=function(t){if(!s(t))return r(t,o)||r(t,"@@iterator")||a[n(t)]}},18554:(t,e,i)=>{var n=i(46916),r=i(19662),s=i(19670),a=i(66330),o=i(71246),l=TypeError;t.exports=function(t,e){var i=arguments.length<2?o(t):e;if(r(i))return s(n(i,t));throw l(a(t)+" is not iterable")}},88044:(t,e,i)=>{var n=i(1702),r=i(43157),s=i(60614),a=i(84326),o=i(41340),l=n([].push);t.exports=function(t){if(s(t))return t;if(r(t)){for(var e=t.length,i=[],n=0;n<e;n++){var c=t[n];"string"==typeof c?l(i,c):"number"!=typeof c&&"Number"!=a(c)&&"String"!=a(c)||l(i,o(c))}var u=i.length,h=!0;return function(t,e){if(h)return h=!1,e;if(r(this))return e;for(var n=0;n<u;n++)if(i[n]===t)return e}}}},58173:(t,e,i)=>{var n=i(19662),r=i(68554);t.exports=function(t,e){var i=t[e];return r(i)?void 0:n(i)}},10647:(t,e,i)=>{var n=i(1702),r=i(47908),s=Math.floor,a=n("".charAt),o=n("".replace),l=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,i,n,h,d){var p=i+t.length,f=n.length,m=u;return void 0!==h&&(h=r(h),m=c),o(d,m,(function(r,o){var c;switch(a(o,0)){case"$":return"$";case"&":return t;case"`":return l(e,0,i);case"'":return l(e,p);case"<":c=h[l(o,1,-1)];break;default:var u=+o;if(0===u)return r;if(u>f){var d=s(u/10);return 0===d?r:d<=f?void 0===n[d-1]?a(o,1):n[d-1]+a(o,1):r}c=n[u-1]}return void 0===c?"":c}))}},17854:(t,e,i)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},92597:(t,e,i)=>{var n=i(1702),r=i(47908),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(r(t),e)}},3501:t=>{t.exports={}},842:t=>{t.exports=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}}},60490:(t,e,i)=>{var n=i(35005);t.exports=n("document","documentElement")},64664:(t,e,i)=>{var n=i(19781),r=i(47293),s=i(80317);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},11179:t=>{var e=Array,i=Math.abs,n=Math.pow,r=Math.floor,s=Math.log,a=Math.LN2;t.exports={pack:function(t,o,l){var c,u,h,d=e(l),p=8*l-o-1,f=(1<<p)-1,m=f>>1,g=23===o?n(2,-24)-n(2,-77):0,y=t<0||0===t&&1/t<0?1:0,v=0;for((t=i(t))!=t||t===1/0?(u=t!=t?1:0,c=f):(c=r(s(t)/a),t*(h=n(2,-c))<1&&(c--,h*=2),(t+=c+m>=1?g/h:g*n(2,1-m))*h>=2&&(c++,h/=2),c+m>=f?(u=0,c=f):c+m>=1?(u=(t*h-1)*n(2,o),c+=m):(u=t*n(2,m-1)*n(2,o),c=0));o>=8;)d[v++]=255&u,u/=256,o-=8;for(c=c<<o|u,p+=o;p>0;)d[v++]=255&c,c/=256,p-=8;return d[--v]|=128*y,d},unpack:function(t,e){var i,r=t.length,s=8*r-e-1,a=(1<<s)-1,o=a>>1,l=s-7,c=r-1,u=t[c--],h=127&u;for(u>>=7;l>0;)h=256*h+t[c--],l-=8;for(i=h&(1<<-l)-1,h>>=-l,l+=e;l>0;)i=256*i+t[c--],l-=8;if(0===h)h=1-o;else{if(h===a)return i?NaN:u?-1/0:1/0;i+=n(2,e),h-=o}return(u?-1:1)*i*n(2,h-e)}}},68361:(t,e,i)=>{var n=i(1702),r=i(47293),s=i(84326),a=Object,o=n("".split);t.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?o(t,""):a(t)}:a},79587:(t,e,i)=>{var n=i(60614),r=i(70111),s=i(27674);t.exports=function(t,e,i){var a,o;return s&&n(a=e.constructor)&&a!==i&&r(o=a.prototype)&&o!==i.prototype&&s(t,o),t}},42788:(t,e,i)=>{var n=i(1702),r=i(60614),s=i(5465),a=n(Function.toString);r(s.inspectSource)||(s.inspectSource=function(t){return a(t)}),t.exports=s.inspectSource},58340:(t,e,i)=>{var n=i(70111),r=i(68880);t.exports=function(t,e){n(e)&&"cause"in e&&r(t,"cause",e.cause)}},62423:(t,e,i)=>{var n=i(82109),r=i(1702),s=i(3501),a=i(70111),o=i(92597),l=i(3070).f,c=i(8006),u=i(1156),h=i(52050),d=i(69711),p=i(76677),f=!1,m=d("meta"),g=0,y=function(t){l(t,m,{value:{objectID:"O"+g++,weakData:{}}})},v=t.exports={enable:function(){v.enable=function(){},f=!0;var t=c.f,e=r([].splice),i={};i[m]=1,t(i).length&&(c.f=function(i){for(var n=t(i),r=0,s=n.length;r<s;r++)if(n[r]===m){e(n,r,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,m)){if(!h(t))return"F";if(!e)return"E";y(t)}return t[m].objectID},getWeakData:function(t,e){if(!o(t,m)){if(!h(t))return!0;if(!e)return!1;y(t)}return t[m].weakData},onFreeze:function(t){return p&&f&&h(t)&&!o(t,m)&&y(t),t}};s[m]=!0},29909:(t,e,i)=>{var n,r,s,a=i(94811),o=i(17854),l=i(70111),c=i(68880),u=i(92597),h=i(5465),d=i(6200),p=i(3501),f="Object already initialized",m=o.TypeError,g=o.WeakMap;if(a||h.state){var y=h.state||(h.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,n=function(t,e){if(y.has(t))throw m(f);return e.facade=t,y.set(t,e),e},r=function(t){return y.get(t)||{}},s=function(t){return y.has(t)}}else{var v=d("state");p[v]=!0,n=function(t,e){if(u(t,v))throw m(f);return e.facade=t,c(t,v,e),e},r=function(t){return u(t,v)?t[v]:{}},s=function(t){return u(t,v)}}t.exports={set:n,get:r,has:s,enforce:function(t){return s(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=r(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return i}}}},97659:(t,e,i)=>{var n=i(5112),r=i(97497),s=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[s]===t)}},43157:(t,e,i)=>{var n=i(84326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},44067:(t,e,i)=>{var n=i(70648);t.exports=function(t){var e=n(t);return"BigInt64Array"==e||"BigUint64Array"==e}},60614:(t,e,i)=>{var n=i(4154),r=n.all;t.exports=n.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4411:(t,e,i)=>{var n=i(1702),r=i(47293),s=i(60614),a=i(70648),o=i(35005),l=i(42788),c=function(){},u=[],h=o("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=n(d.exec),f=!d.exec(c),m=function(t){if(!s(t))return!1;try{return h(c,u,t),!0}catch(t){return!1}},g=function(t){if(!s(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,l(t))}catch(t){return!0}};g.sham=!0,t.exports=!h||r((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?g:m},45032:(t,e,i)=>{var n=i(92597);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},54705:(t,e,i)=>{var n=i(47293),r=i(60614),s=/#|\.prototype\./,a=function(t,e){var i=l[o(t)];return i==u||i!=c&&(r(e)?n(e):!!e)},o=a.normalize=function(t){return String(t).replace(s,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},55988:(t,e,i)=>{var n=i(70111),r=Math.floor;t.exports=Number.isInteger||function(t){return!n(t)&&isFinite(t)&&r(t)===t}},68554:t=>{t.exports=function(t){return null==t}},70111:(t,e,i)=>{var n=i(60614),r=i(4154),s=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:n(t)||t===s}:function(t){return"object"==typeof t?null!==t:n(t)}},31913:t=>{t.exports=!1},47850:(t,e,i)=>{var n=i(70111),r=i(84326),s=i(5112)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},52190:(t,e,i)=>{var n=i(35005),r=i(60614),s=i(47976),a=i(43307),o=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return r(e)&&s(e.prototype,o(t))}},20408:(t,e,i)=>{var n=i(49974),r=i(46916),s=i(19670),a=i(66330),o=i(97659),l=i(26244),c=i(47976),u=i(18554),h=i(71246),d=i(99212),p=TypeError,f=function(t,e){this.stopped=t,this.result=e},m=f.prototype;t.exports=function(t,e,i){var g,y,v,b,_,w,T,S=i&&i.that,x=!(!i||!i.AS_ENTRIES),k=!(!i||!i.IS_RECORD),C=!(!i||!i.IS_ITERATOR),E=!(!i||!i.INTERRUPTED),I=n(e,S),P=function(t){return g&&d(g,"normal",t),new f(!0,t)},A=function(t){return x?(s(t),E?I(t[0],t[1],P):I(t[0],t[1])):E?I(t,P):I(t)};if(k)g=t.iterator;else if(C)g=t;else{if(!(y=h(t)))throw p(a(t)+" is not iterable");if(o(y)){for(v=0,b=l(t);b>v;v++)if((_=A(t[v]))&&c(m,_))return _;return new f(!1)}g=u(t,y)}for(w=k?t.next:g.next;!(T=r(w,g)).done;){try{_=A(T.value)}catch(t){d(g,"throw",t)}if("object"==typeof _&&_&&c(m,_))return _}return new f(!1)}},99212:(t,e,i)=>{var n=i(46916),r=i(19670),s=i(58173);t.exports=function(t,e,i){var a,o;r(t);try{if(!(a=s(t,"return"))){if("throw"===e)throw i;return i}a=n(a,t)}catch(t){o=!0,a=t}if("throw"===e)throw i;if(o)throw a;return r(a),i}},63061:(t,e,i)=>{"use strict";var n=i(13383).IteratorPrototype,r=i(70030),s=i(79114),a=i(58003),o=i(97497),l=function(){return this};t.exports=function(t,e,i,c){var u=e+" Iterator";return t.prototype=r(n,{next:s(+!c,i)}),a(t,u,!1,!0),o[u]=l,t}},51656:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(31913),a=i(76530),o=i(60614),l=i(63061),c=i(79518),u=i(27674),h=i(58003),d=i(68880),p=i(98052),f=i(5112),m=i(97497),g=i(13383),y=a.PROPER,v=a.CONFIGURABLE,b=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,w=f("iterator"),T="keys",S="values",x="entries",k=function(){return this};t.exports=function(t,e,i,a,f,g,C){l(i,e,a);var E,I,P,A=function(t){if(t===f&&R)return R;if(!_&&t in D)return D[t];switch(t){case T:case S:case x:return function(){return new i(this,t)}}return function(){return new i(this)}},L=e+" Iterator",O=!1,D=t.prototype,M=D[w]||D["@@iterator"]||f&&D[f],R=!_&&M||A(f),N="Array"==e&&D.entries||M;if(N&&(E=c(N.call(new t)))!==Object.prototype&&E.next&&(s||c(E)===b||(u?u(E,b):o(E[w])||p(E,w,k)),h(E,L,!0,!0),s&&(m[L]=k)),y&&f==S&&M&&M.name!==S&&(!s&&v?d(D,"name",S):(O=!0,R=function(){return r(M,this)})),f)if(I={values:A(S),keys:g?R:A(T),entries:A(x)},C)for(P in I)(_||O||!(P in D))&&p(D,P,I[P]);else n({target:e,proto:!0,forced:_||O},I);return s&&!C||D[w]===R||p(D,w,R,{name:f}),m[e]=R,I}},13383:(t,e,i)=>{"use strict";var n,r,s,a=i(47293),o=i(60614),l=i(70111),c=i(70030),u=i(79518),h=i(98052),d=i(5112),p=i(31913),f=d("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(r=u(u(s)))!==Object.prototype&&(n=r):m=!0),!l(n)||a((function(){var t={};return n[f].call(t)!==t}))?n={}:p&&(n=c(n)),o(n[f])||h(n,f,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},97497:t=>{t.exports={}},26244:(t,e,i)=>{var n=i(17466);t.exports=function(t){return n(t.length)}},56339:(t,e,i)=>{var n=i(1702),r=i(47293),s=i(60614),a=i(92597),o=i(19781),l=i(76530).CONFIGURABLE,c=i(42788),u=i(29909),h=u.enforce,d=u.get,p=String,f=Object.defineProperty,m=n("".slice),g=n("".replace),y=n([].join),v=o&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),_=t.exports=function(t,e,i){"Symbol("===m(p(e),0,7)&&(e="["+g(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!a(t,"name")||l&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&i&&a(i,"arity")&&t.length!==i.arity&&f(t,"length",{value:i.arity});try{i&&a(i,"constructor")&&i.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=h(t);return a(n,"source")||(n.source=y(b,"string"==typeof e?e:"")),t};Function.prototype.toString=_((function(){return s(this)&&d(this).source||c(this)}),"toString")},75706:(t,e,i)=>{var n=i(1702),r=Map.prototype;t.exports={Map,set:n(r.set),get:n(r.get),has:n(r.has),remove:n(r.delete),proto:r}},66736:t=>{var e=Math.expm1,i=Math.exp;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){var e=+t;return 0==e?e:e>-1e-6&&e<1e-6?e+e*e/2:i(e)-1}:e},26130:(t,e,i)=>{var n=i(64310),r=Math.abs,s=Math.pow,a=s(2,-52),o=s(2,-23),l=s(2,127)*(2-o),c=s(2,-126);t.exports=Math.fround||function(t){var e,i,s=+t,u=r(s),h=n(s);return u<c?h*function(t){return t+1/a-1/a}(u/c/o)*c*o:(i=(e=(1+o/a)*u)-(e-u))>l||i!=i?h*(1/0):h*i}},20403:t=>{var e=Math.log,i=Math.LOG10E;t.exports=Math.log10||function(t){return e(t)*i}},26513:t=>{var e=Math.log;t.exports=Math.log1p||function(t){var i=+t;return i>-1e-8&&i<1e-8?i-i*i/2:e(1+i)}},64310:t=>{t.exports=Math.sign||function(t){var e=+t;return 0==e||e!=e?e:e<0?-1:1}},74758:t=>{var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?i:e)(n)}},95948:(t,e,i)=>{var n,r,s,a,o,l=i(17854),c=i(49974),u=i(31236).f,h=i(20261).set,d=i(18572),p=i(6833),f=i(71528),m=i(71036),g=i(35268),y=l.MutationObserver||l.WebKitMutationObserver,v=l.document,b=l.process,_=l.Promise,w=u(l,"queueMicrotask"),T=w&&w.value;if(!T){var S=new d,x=function(){var t,e;for(g&&(t=b.domain)&&t.exit();e=S.get();)try{e()}catch(t){throw S.head&&n(),t}t&&t.enter()};p||g||m||!y||!v?!f&&_&&_.resolve?((a=_.resolve(void 0)).constructor=_,o=c(a.then,a),n=function(){o(x)}):g?n=function(){b.nextTick(x)}:(h=c(h,l),n=function(){h(x)}):(r=!0,s=v.createTextNode(""),new y(x).observe(s,{characterData:!0}),n=function(){s.data=r=!r}),T=function(t){S.head||n(),S.add(t)}}t.exports=T},78523:(t,e,i)=>{"use strict";var n=i(19662),r=TypeError,s=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw r("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new s(t)}},56277:(t,e,i)=>{var n=i(41340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},3929:(t,e,i)=>{var n=i(47850),r=TypeError;t.exports=function(t){if(n(t))throw r("The method doesn't accept regular expressions");return t}},77023:(t,e,i)=>{var n=i(17854).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},2814:(t,e,i)=>{var n=i(17854),r=i(47293),s=i(1702),a=i(41340),o=i(53111).trim,l=i(81361),c=s("".charAt),u=n.parseFloat,h=n.Symbol,d=h&&h.iterator,p=1/u(l+"-0")!=-1/0||d&&!r((function(){u(Object(d))}));t.exports=p?function(t){var e=o(a(t)),i=u(e);return 0===i&&"-"==c(e,0)?-0:i}:u},83009:(t,e,i)=>{var n=i(17854),r=i(47293),s=i(1702),a=i(41340),o=i(53111).trim,l=i(81361),c=n.parseInt,u=n.Symbol,h=u&&u.iterator,d=/^[+-]?0x/i,p=s(d.exec),f=8!==c(l+"08")||22!==c(l+"0x16")||h&&!r((function(){c(Object(h))}));t.exports=f?function(t,e){var i=o(a(t));return c(i,e>>>0||(p(d,i)?16:10))}:c},21574:(t,e,i)=>{"use strict";var n=i(19781),r=i(1702),s=i(46916),a=i(47293),o=i(81956),l=i(25181),c=i(55296),u=i(47908),h=i(68361),d=Object.assign,p=Object.defineProperty,f=r([].concat);t.exports=!d||a((function(){if(n&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach((function(t){e[t]=t})),7!=d({},t)[i]||o(d({},e)).join("")!=r}))?function(t,e){for(var i=u(t),r=arguments.length,a=1,d=l.f,p=c.f;r>a;)for(var m,g=h(arguments[a++]),y=d?f(o(g),d(g)):o(g),v=y.length,b=0;v>b;)m=y[b++],n&&!s(p,g,m)||(i[m]=g[m]);return i}:d},70030:(t,e,i)=>{var n,r=i(19670),s=i(36048),a=i(80748),o=i(3501),l=i(60490),c=i(80317),u=i(6200),h="prototype",d="script",p=u("IE_PROTO"),f=function(){},m=function(t){return"<"+d+">"+t+"</"+d+">"},g=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;y="undefined"!=typeof document?document.domain&&n?g(n):(e=c("iframe"),i="java"+d+":",e.style.display="none",l.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):g(n);for(var r=a.length;r--;)delete y[h][a[r]];return y()};o[p]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(f[h]=r(t),i=new f,f[h]=null,i[p]=t):i=y(),void 0===e?i:s.f(i,e)}},36048:(t,e,i)=>{var n=i(19781),r=i(3353),s=i(3070),a=i(19670),o=i(45656),l=i(81956);e.f=n&&!r?Object.defineProperties:function(t,e){a(t);for(var i,n=o(e),r=l(e),c=r.length,u=0;c>u;)s.f(t,i=r[u++],n[i]);return t}},3070:(t,e,i)=>{var n=i(19781),r=i(64664),s=i(3353),a=i(19670),o=i(34948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";e.f=n?s?function(t,e,i){if(a(t),e=o(e),a(i),"function"==typeof t&&"prototype"===e&&"value"in i&&p in i&&!i[p]){var n=u(t,e);n&&n[p]&&(t[e]=i.value,i={configurable:d in i?i[d]:n[d],enumerable:h in i?i[h]:n[h],writable:!1})}return c(t,e,i)}:c:function(t,e,i){if(a(t),e=o(e),a(i),r)try{return c(t,e,i)}catch(t){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},31236:(t,e,i)=>{var n=i(19781),r=i(46916),s=i(55296),a=i(79114),o=i(45656),l=i(34948),c=i(92597),u=i(64664),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=o(t),e=l(e),u)try{return h(t,e)}catch(t){}if(c(t,e))return a(!r(s.f,t,e),t[e])}},1156:(t,e,i)=>{var n=i(84326),r=i(45656),s=i(8006).f,a=i(41589),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"Window"==n(t)?function(t){try{return s(t)}catch(t){return a(o)}}(t):s(r(t))}},8006:(t,e,i)=>{var n=i(16324),r=i(80748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},25181:(t,e)=>{e.f=Object.getOwnPropertySymbols},79518:(t,e,i)=>{var n=i(92597),r=i(60614),s=i(47908),a=i(6200),o=i(49920),l=a("IE_PROTO"),c=Object,u=c.prototype;t.exports=o?c.getPrototypeOf:function(t){var e=s(t);if(n(e,l))return e[l];var i=e.constructor;return r(i)&&e instanceof i?i.prototype:e instanceof c?u:null}},52050:(t,e,i)=>{var n=i(47293),r=i(70111),s=i(84326),a=i(7556),o=Object.isExtensible,l=n((function(){o(1)}));t.exports=l||a?function(t){return!!r(t)&&(!a||"ArrayBuffer"!=s(t))&&(!o||o(t))}:o},47976:(t,e,i)=>{var n=i(1702);t.exports=n({}.isPrototypeOf)},16324:(t,e,i)=>{var n=i(1702),r=i(92597),s=i(45656),a=i(41318).indexOf,o=i(3501),l=n([].push);t.exports=function(t,e){var i,n=s(t),c=0,u=[];for(i in n)!r(o,i)&&r(n,i)&&l(u,i);for(;e.length>c;)r(n,i=e[c++])&&(~a(u,i)||l(u,i));return u}},81956:(t,e,i)=>{var n=i(16324),r=i(80748);t.exports=Object.keys||function(t){return n(t,r)}},55296:(t,e)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);e.f=r?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},69026:(t,e,i)=>{"use strict";var n=i(31913),r=i(17854),s=i(47293),a=i(98008);t.exports=n||!s((function(){if(!(a&&a<535)){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete r[t]}}))},27674:(t,e,i)=>{var n=i(75668),r=i(19670),s=i(96077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=n(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return r(i),s(n),e?t(i,n):i.__proto__=n,i}}():void 0)},44699:(t,e,i)=>{var n=i(19781),r=i(1702),s=i(81956),a=i(45656),o=r(i(55296).f),l=r([].push),c=function(t){return function(e){for(var i,r=a(e),c=s(r),u=c.length,h=0,d=[];u>h;)i=c[h++],n&&!o(r,i)||l(d,t?[i,r[i]]:r[i]);return d}};t.exports={entries:c(!0),values:c(!1)}},90288:(t,e,i)=>{"use strict";var n=i(51694),r=i(70648);t.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},92140:(t,e,i)=>{var n=i(46916),r=i(60614),s=i(70111),a=TypeError;t.exports=function(t,e){var i,o;if("string"===e&&r(i=t.toString)&&!s(o=n(i,t)))return o;if(r(i=t.valueOf)&&!s(o=n(i,t)))return o;if("string"!==e&&r(i=t.toString)&&!s(o=n(i,t)))return o;throw a("Can't convert object to primitive value")}},53887:(t,e,i)=>{var n=i(35005),r=i(1702),s=i(8006),a=i(25181),o=i(19670),l=r([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=s.f(o(t)),i=a.f;return i?l(e,i(t)):e}},40857:(t,e,i)=>{var n=i(17854);t.exports=n},12534:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},63702:(t,e,i)=>{var n=i(17854),r=i(2492),s=i(60614),a=i(54705),o=i(42788),l=i(5112),c=i(7871),u=i(83823),h=i(31913),d=i(7392),p=r&&r.prototype,f=l("species"),m=!1,g=s(n.PromiseRejectionEvent),y=a("Promise",(function(){var t=o(r),e=t!==String(r);if(!e&&66===d)return!0;if(h&&(!p.catch||!p.finally))return!0;if(!d||d<51||!/native code/.test(t)){var i=new r((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((i.constructor={})[f]=n,!(m=i.then((function(){}))instanceof n))return!0}return!e&&(c||u)&&!g}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:g,SUBCLASSING:m}},2492:(t,e,i)=>{var n=i(17854);t.exports=n.Promise},69478:(t,e,i)=>{var n=i(19670),r=i(70111),s=i(78523);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=s.f(t);return(0,i.resolve)(e),i.promise}},80612:(t,e,i)=>{var n=i(2492),r=i(17072),s=i(63702).CONSTRUCTOR;t.exports=s||!r((function(t){n.all(t).then(void 0,(function(){}))}))},2626:(t,e,i)=>{var n=i(3070).f;t.exports=function(t,e,i){i in t||n(t,i,{configurable:!0,get:function(){return e[i]},set:function(t){e[i]=t}})}},18572:t=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},i=this.tail;i?i.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},97651:(t,e,i)=>{var n=i(46916),r=i(19670),s=i(60614),a=i(84326),o=i(22261),l=TypeError;t.exports=function(t,e){var i=t.exec;if(s(i)){var c=n(i,t,e);return null!==c&&r(c),c}if("RegExp"===a(t))return n(o,t,e);throw l("RegExp#exec called on incompatible receiver")}},22261:(t,e,i)=>{"use strict";var n,r,s=i(46916),a=i(1702),o=i(41340),l=i(67066),c=i(52999),u=i(72309),h=i(70030),d=i(29909).get,p=i(9441),f=i(38173),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,v=a("".charAt),b=a("".indexOf),_=a("".replace),w=a("".slice),T=(r=/b*/g,s(g,n=/a/,"a"),s(g,r,"a"),0!==n.lastIndex||0!==r.lastIndex),S=c.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(T||x||S||p||f)&&(y=function(t){var e,i,n,r,a,c,u,p=this,f=d(p),k=o(t),C=f.raw;if(C)return C.lastIndex=p.lastIndex,e=s(y,C,k),p.lastIndex=C.lastIndex,e;var E=f.groups,I=S&&p.sticky,P=s(l,p),A=p.source,L=0,O=k;if(I&&(P=_(P,"y",""),-1===b(P,"g")&&(P+="g"),O=w(k,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==v(k,p.lastIndex-1))&&(A="(?: "+A+")",O=" "+O,L++),i=new RegExp("^(?:"+A+")",P)),x&&(i=new RegExp("^"+A+"$(?!\\s)",P)),T&&(n=p.lastIndex),r=s(g,I?i:p,O),I?r?(r.input=w(r.input,L),r[0]=w(r[0],L),r.index=p.lastIndex,p.lastIndex+=r[0].length):p.lastIndex=0:T&&r&&(p.lastIndex=p.global?r.index+r[0].length:n),x&&r&&r.length>1&&s(m,r[0],i,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r&&E)for(r.groups=c=h(null),a=0;a<E.length;a++)c[(u=E[a])[0]]=r[u[1]];return r}),t.exports=y},67066:(t,e,i)=>{"use strict";var n=i(19670);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},34706:(t,e,i)=>{var n=i(46916),r=i(92597),s=i(47976),a=i(67066),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||r(t,"flags")||!s(o,t)?e:n(a,t)}},52999:(t,e,i)=>{var n=i(47293),r=i(17854).RegExp,s=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=s||n((function(){return!r("a","y").sticky})),o=s||n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:o,MISSED_STICKY:a,UNSUPPORTED_Y:s}},9441:(t,e,i)=>{var n=i(47293),r=i(17854).RegExp;t.exports=n((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},38173:(t,e,i)=>{var n=i(47293),r=i(17854).RegExp;t.exports=n((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},84488:(t,e,i)=>{var n=i(68554),r=TypeError;t.exports=function(t){if(n(t))throw r("Can't call method on "+t);return t}},81150:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},17152:(t,e,i)=>{"use strict";var n,r=i(17854),s=i(22104),a=i(60614),o=i(89363),l=i(88113),c=i(50206),u=i(48053),h=r.Function,d=/MSIE .\./.test(l)||o&&((n=r.Bun.version.split(".")).length<3||0==n[0]&&(n[1]<3||3==n[1]&&0==n[2]));t.exports=function(t,e){var i=e?2:1;return d?function(n,r){var o=u(arguments.length,1)>i,l=a(n)?n:h(n),d=o?c(arguments,i):[],p=o?function(){s(l,this,d)}:l;return e?t(p,r):t(p)}:t}},79405:(t,e,i)=>{var n=i(1702),r=Set.prototype;t.exports={Set,add:n(r.add),has:n(r.has),remove:n(r.delete),proto:r,$has:r.has,$keys:r.keys}},96340:(t,e,i)=>{"use strict";var n=i(35005),r=i(47045),s=i(5112),a=i(19781),o=s("species");t.exports=function(t){var e=n(t);a&&e&&!e[o]&&r(e,o,{configurable:!0,get:function(){return this}})}},58003:(t,e,i)=>{var n=i(3070).f,r=i(92597),s=i(5112)("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!r(t,s)&&n(t,s,{configurable:!0,value:e})}},6200:(t,e,i)=>{var n=i(72309),r=i(69711),s=n("keys");t.exports=function(t){return s[t]||(s[t]=r(t))}},5465:(t,e,i)=>{var n=i(17854),r=i(13072),s="__core-js_shared__",a=n[s]||r(s,{});t.exports=a},72309:(t,e,i)=>{var n=i(31913),r=i(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.0",mode:n?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})},36707:(t,e,i)=>{var n=i(19670),r=i(39483),s=i(68554),a=i(5112)("species");t.exports=function(t,e){var i,o=n(t).constructor;return void 0===o||s(i=n(o)[a])?e:r(i)}},43429:(t,e,i)=>{var n=i(47293);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},28710:(t,e,i)=>{var n=i(1702),r=i(19303),s=i(41340),a=i(84488),o=n("".charAt),l=n("".charCodeAt),c=n("".slice),u=function(t){return function(e,i){var n,u,h=s(a(e)),d=r(i),p=h.length;return d<0||d>=p?t?"":void 0:(n=l(h,d))<55296||n>56319||d+1===p||(u=l(h,d+1))<56320||u>57343?t?o(h,d):n:t?c(h,d,d+2):u-56320+(n-55296<<10)+65536}};t.exports={codeAt:u(!1),charAt:u(!0)}},54986:(t,e,i)=>{var n=i(88113);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},76650:(t,e,i)=>{var n=i(1702),r=i(17466),s=i(41340),a=i(38415),o=i(84488),l=n(a),c=n("".slice),u=Math.ceil,h=function(t){return function(e,i,n){var a,h,d=s(o(e)),p=r(i),f=d.length,m=void 0===n?" ":s(n);return p<=f||""==m?d:((h=l(m,u((a=p-f)/m.length))).length>a&&(h=c(h,0,a)),t?d+h:h+d)}};t.exports={start:h(!1),end:h(!0)}},33197:(t,e,i)=>{var n=i(1702),r=2147483647,s=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",l=RangeError,c=n(a.exec),u=Math.floor,h=String.fromCharCode,d=n("".charCodeAt),p=n([].join),f=n([].push),m=n("".replace),g=n("".split),y=n("".toLowerCase),v=function(t){return t+22+75*(t<26)},b=function(t,e,i){var n=0;for(t=i?u(t/700):t>>1,t+=u(t/e);t>455;)t=u(t/35),n+=36;return u(n+36*t/(t+38))},_=function(t){var e=[];t=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=d(t,i++);if(r>=55296&&r<=56319&&i<n){var s=d(t,i++);56320==(64512&s)?f(e,((1023&r)<<10)+(1023&s)+65536):(f(e,r),i--)}else f(e,r)}return e}(t);var i,n,s=t.length,a=128,c=0,m=72;for(i=0;i<t.length;i++)(n=t[i])<128&&f(e,h(n));var g=e.length,y=g;for(g&&f(e,"-");y<s;){var _=r;for(i=0;i<t.length;i++)(n=t[i])>=a&&n<_&&(_=n);var w=y+1;if(_-a>u((r-c)/w))throw l(o);for(c+=(_-a)*w,a=_,i=0;i<t.length;i++){if((n=t[i])<a&&++c>r)throw l(o);if(n==a){for(var T=c,S=36;;){var x=S<=m?1:S>=m+26?26:S-m;if(T<x)break;var k=T-x,C=36-x;f(e,h(v(x+k%C))),T=u(k/C),S+=36}f(e,h(v(T))),m=b(c,w,y==g),c=0,y++}}c++,a++}return p(e,"")};t.exports=function(t){var e,i,n=[],r=g(m(y(t),a,"."),".");for(e=0;e<r.length;e++)i=r[e],f(n,c(s,i)?"xn--"+_(i):i);return p(n,".")}},38415:(t,e,i)=>{"use strict";var n=i(19303),r=i(41340),s=i(84488),a=RangeError;t.exports=function(t){var e=r(s(this)),i="",o=n(t);if(o<0||o==1/0)throw a("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},10365:(t,e,i)=>{"use strict";var n=i(53111).end,r=i(76091);t.exports=r("trimEnd")?function(){return n(this)}:"".trimEnd},76091:(t,e,i)=>{var n=i(76530).PROPER,r=i(47293),s=i(81361);t.exports=function(t){return r((function(){return!!s[t]()||""!==""[t]()||n&&s[t].name!==t}))}},33217:(t,e,i)=>{"use strict";var n=i(53111).start,r=i(76091);t.exports=r("trimStart")?function(){return n(this)}:"".trimStart},53111:(t,e,i)=>{var n=i(1702),r=i(84488),s=i(41340),a=i(81361),o=n("".replace),l=RegExp("^["+a+"]+"),c=RegExp("(^|[^"+a+"])["+a+"]+$"),u=function(t){return function(e){var i=s(r(e));return 1&t&&(i=o(i,l,"")),2&t&&(i=o(i,c,"$1")),i}};t.exports={start:u(1),end:u(2),trim:u(3)}},64124:(t,e,i)=>{var n=i(17854),r=i(47293),s=i(7392),a=i(7871),o=i(83823),l=i(35268),c=n.structuredClone;t.exports=!!c&&!r((function(){if(o&&s>92||l&&s>94||a&&s>97)return!1;var t=new ArrayBuffer(8),e=c(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength}))},36293:(t,e,i)=>{var n=i(7392),r=i(47293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},56532:(t,e,i)=>{var n=i(46916),r=i(35005),s=i(5112),a=i(98052);t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,o=s("toPrimitive");e&&!e[o]&&a(e,o,(function(t){return n(i,this)}),{arity:1})}},2015:(t,e,i)=>{var n=i(36293);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},20261:(t,e,i)=>{var n,r,s,a,o=i(17854),l=i(22104),c=i(49974),u=i(60614),h=i(92597),d=i(47293),p=i(60490),f=i(50206),m=i(80317),g=i(48053),y=i(6833),v=i(35268),b=o.setImmediate,_=o.clearImmediate,w=o.process,T=o.Dispatch,S=o.Function,x=o.MessageChannel,k=o.String,C=0,E={},I="onreadystatechange";d((function(){n=o.location}));var P=function(t){if(h(E,t)){var e=E[t];delete E[t],e()}},A=function(t){return function(){P(t)}},L=function(t){P(t.data)},O=function(t){o.postMessage(k(t),n.protocol+"//"+n.host)};b&&_||(b=function(t){g(arguments.length,1);var e=u(t)?t:S(t),i=f(arguments,1);return E[++C]=function(){l(e,void 0,i)},r(C),C},_=function(t){delete E[t]},v?r=function(t){w.nextTick(A(t))}:T&&T.now?r=function(t){T.now(A(t))}:x&&!y?(a=(s=new x).port2,s.port1.onmessage=L,r=c(a.postMessage,a)):o.addEventListener&&u(o.postMessage)&&!o.importScripts&&n&&"file:"!==n.protocol&&!d(O)?(r=O,o.addEventListener("message",L,!1)):r=I in m("script")?function(t){p.appendChild(m("script"))[I]=function(){p.removeChild(this),P(t)}}:function(t){setTimeout(A(t),0)}),t.exports={set:b,clear:_}},50863:(t,e,i)=>{var n=i(1702);t.exports=n(1..valueOf)},51400:(t,e,i)=>{var n=i(19303),r=Math.max,s=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):s(i,e)}},64599:(t,e,i)=>{var n=i(57593),r=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw r("Can't convert number to bigint");return BigInt(e)}},57067:(t,e,i)=>{var n=i(19303),r=i(17466),s=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw s("Wrong length or index");return i}},45656:(t,e,i)=>{var n=i(68361),r=i(84488);t.exports=function(t){return n(r(t))}},19303:(t,e,i)=>{var n=i(74758);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},17466:(t,e,i)=>{var n=i(19303),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},47908:(t,e,i)=>{var n=i(84488),r=Object;t.exports=function(t){return r(n(t))}},84590:(t,e,i)=>{var n=i(73002),r=RangeError;t.exports=function(t,e){var i=n(t);if(i%e)throw r("Wrong offset");return i}},73002:(t,e,i)=>{var n=i(19303),r=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw r("The argument can't be less than 0");return e}},57593:(t,e,i)=>{var n=i(46916),r=i(70111),s=i(52190),a=i(58173),o=i(92140),l=i(5112),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!r(t)||s(t))return t;var i,l=a(t,u);if(l){if(void 0===e&&(e="default"),i=n(l,t,e),!r(i)||s(i))return i;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},34948:(t,e,i)=>{var n=i(57593),r=i(52190);t.exports=function(t){var e=n(t,"string");return r(e)?e:e+""}},51694:(t,e,i)=>{var n={};n[i(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},41340:(t,e,i)=>{var n=i(70648),r=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},44038:(t,e,i)=>{var n=i(35268);t.exports=function(t){try{if(n)return Function('return require("'+t+'")')()}catch(t){}}},66330:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},19843:(t,e,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(46916),a=i(19781),o=i(63832),l=i(90260),c=i(13331),u=i(25787),h=i(79114),d=i(68880),p=i(55988),f=i(17466),m=i(57067),g=i(84590),y=i(34948),v=i(92597),b=i(70648),_=i(70111),w=i(52190),T=i(70030),S=i(47976),x=i(27674),k=i(8006).f,C=i(97321),E=i(42092).forEach,I=i(96340),P=i(47045),A=i(3070),L=i(31236),O=i(29909),D=i(79587),M=O.get,R=O.set,N=O.enforce,B=A.f,F=L.f,$=Math.round,U=r.RangeError,j=c.ArrayBuffer,V=j.prototype,H=c.DataView,q=l.NATIVE_ARRAY_BUFFER_VIEWS,W=l.TYPED_ARRAY_TAG,z=l.TypedArray,G=l.TypedArrayPrototype,K=l.aTypedArrayConstructor,Y=l.isTypedArray,X="BYTES_PER_ELEMENT",Q="Wrong length",J=function(t,e){K(t);for(var i=0,n=e.length,r=new t(n);n>i;)r[i]=e[i++];return r},Z=function(t,e){P(t,e,{configurable:!0,get:function(){return M(this)[e]}})},tt=function(t){var e;return S(V,t)||"ArrayBuffer"==(e=b(t))||"SharedArrayBuffer"==e},et=function(t,e){return Y(t)&&!w(e)&&e in t&&p(+e)&&e>=0},it=function(t,e){return e=y(e),et(t,e)?h(2,t[e]):F(t,e)},nt=function(t,e,i){return e=y(e),!(et(t,e)&&_(i)&&v(i,"value"))||v(i,"get")||v(i,"set")||i.configurable||v(i,"writable")&&!i.writable||v(i,"enumerable")&&!i.enumerable?B(t,e,i):(t[e]=i.value,t)};a?(q||(L.f=it,A.f=nt,Z(G,"buffer"),Z(G,"byteOffset"),Z(G,"byteLength"),Z(G,"length")),n({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:it,defineProperty:nt}),t.exports=function(t,e,i){var a=t.match(/\d+/)[0]/8,l=t+(i?"Clamped":"")+"Array",c="get"+t,h="set"+t,p=r[l],y=p,v=y&&y.prototype,b={},w=function(t,e){B(t,e,{get:function(){return function(t,e){var i=M(t);return i.view[c](e*a+i.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var r=M(t);i&&(n=(n=$(n))<0?0:n>255?255:255&n),r.view[h](e*a+r.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};q?o&&(y=e((function(t,e,i,n){return u(t,v),D(_(e)?tt(e)?void 0!==n?new p(e,g(i,a),n):void 0!==i?new p(e,g(i,a)):new p(e):Y(e)?J(y,e):s(C,y,e):new p(m(e)),t,y)})),x&&x(y,z),E(k(p),(function(t){t in y||d(y,t,p[t])})),y.prototype=v):(y=e((function(t,e,i,n){u(t,v);var r,o,l,c=0,h=0;if(_(e)){if(!tt(e))return Y(e)?J(y,e):s(C,y,e);r=e,h=g(i,a);var d=e.byteLength;if(void 0===n){if(d%a)throw U(Q);if((o=d-h)<0)throw U(Q)}else if((o=f(n)*a)+h>d)throw U(Q);l=o/a}else l=m(e),r=new j(o=l*a);for(R(t,{buffer:r,byteOffset:h,byteLength:o,length:l,view:new H(r)});c<l;)w(t,c++)})),x&&x(y,z),v=y.prototype=T(G)),v.constructor!==y&&d(v,"constructor",y),N(v).TypedArrayConstructor=y,W&&d(v,W,l);var S=y!=p;b[l]=y,n({global:!0,constructor:!0,forced:S,sham:!q},b),X in y||d(y,X,a),X in v||d(v,X,a),I(l)}):t.exports=function(){}},63832:(t,e,i)=>{var n=i(17854),r=i(47293),s=i(17072),a=i(90260).NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,l=n.Int8Array;t.exports=!a||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!s((function(t){new l,new l(null),new l(1.5),new l(t)}),!0)||r((function(){return 1!==new l(new o(2),1,void 0).length}))},43074:(t,e,i)=>{var n=i(97745),r=i(66304);t.exports=function(t,e){return n(r(t),e)}},97321:(t,e,i)=>{var n=i(49974),r=i(46916),s=i(39483),a=i(47908),o=i(26244),l=i(18554),c=i(71246),u=i(97659),h=i(44067),d=i(90260).aTypedArrayConstructor,p=i(64599);t.exports=function(t){var e,i,f,m,g,y,v,b,_=s(this),w=a(t),T=arguments.length,S=T>1?arguments[1]:void 0,x=void 0!==S,k=c(w);if(k&&!u(k))for(b=(v=l(w,k)).next,w=[];!(y=r(b,v)).done;)w.push(y.value);for(x&&T>2&&(S=n(S,arguments[2])),i=o(w),f=new(d(_))(i),m=h(f),e=0;i>e;e++)g=x?S(w[e],e):w[e],f[e]=m?p(g):+g;return f}},66304:(t,e,i)=>{var n=i(90260),r=i(36707),s=n.aTypedArrayConstructor,a=n.getTypedArrayConstructor;t.exports=function(t){return s(r(t,a(t)))}},69711:(t,e,i)=>{var n=i(1702),r=0,s=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++r+s,36)}},85143:(t,e,i)=>{var n=i(47293),r=i(5112),s=i(19781),a=i(31913),o=r("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,i="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),i+=n+t})),a&&!t.toJSON||!e.size&&(a||!s)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},43307:(t,e,i)=>{var n=i(36293);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,i)=>{var n=i(19781),r=i(47293);t.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48053:t=>{var e=TypeError;t.exports=function(t,i){if(t<i)throw e("Not enough arguments");return t}},94811:(t,e,i)=>{var n=i(17854),r=i(60614),s=n.WeakMap;t.exports=r(s)&&/native code/.test(String(s))},26800:(t,e,i)=>{var n=i(40857),r=i(92597),s=i(6061),a=i(3070).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||a(e,t,{value:s.f(t)})}},6061:(t,e,i)=>{var n=i(5112);e.f=n},5112:(t,e,i)=>{var n=i(17854),r=i(72309),s=i(92597),a=i(69711),o=i(36293),l=i(43307),c=n.Symbol,u=r("wks"),h=l?c.for||c:c&&c.withoutSetter||a;t.exports=function(t){return s(u,t)||(u[t]=o&&s(c,t)?c[t]:h("Symbol."+t)),u[t]}},81361:t=>{t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},89191:(t,e,i)=>{"use strict";var n=i(35005),r=i(92597),s=i(68880),a=i(47976),o=i(27674),l=i(99920),c=i(2626),u=i(79587),h=i(56277),d=i(58340),p=i(5392),f=i(19781),m=i(31913);t.exports=function(t,e,i,g){var y="stackTraceLimit",v=g?2:1,b=t.split("."),_=b[b.length-1],w=n.apply(null,b);if(w){var T=w.prototype;if(!m&&r(T,"cause")&&delete T.cause,!i)return w;var S=n("Error"),x=e((function(t,e){var i=h(g?e:t,void 0),n=g?new w(t):new w;return void 0!==i&&s(n,"message",i),p(n,x,n.stack,2),this&&a(T,this)&&u(n,this,x),arguments.length>v&&d(n,arguments[v]),n}));if(x.prototype=T,"Error"!==_?o?o(x,S):l(x,S,{name:!0}):f&&y in w&&(c(x,w,y),c(x,w,"prepareStackTrace")),l(x,w),!m)try{T.name!==_&&s(T,"name",_),T.constructor=x}catch(t){}return x}}},32120:(t,e,i)=>{var n=i(82109),r=i(35005),s=i(22104),a=i(47293),o=i(89191),l="AggregateError",c=r(l),u=!a((function(){return 1!==c([1]).errors[0]}))&&a((function(){return 7!==c([1],l,{cause:7}).cause}));n({global:!0,constructor:!0,arity:2,forced:u},{AggregateError:o(l,(function(t){return function(e,i){return s(t,this,arguments)}}),u,!0)})},56967:(t,e,i)=>{"use strict";var n=i(82109),r=i(47976),s=i(79518),a=i(27674),o=i(99920),l=i(70030),c=i(68880),u=i(79114),h=i(58340),d=i(5392),p=i(20408),f=i(56277),m=i(5112)("toStringTag"),g=Error,y=[].push,v=function(t,e){var i,n=r(b,this);a?i=a(g(),n?s(this):b):(i=n?this:l(b),c(i,m,"Error")),void 0!==e&&c(i,"message",f(e)),d(i,v,i.stack,1),arguments.length>2&&h(i,arguments[2]);var o=[];return p(t,y,{that:o}),c(i,"errors",o),i};a?a(v,g):o(v,g,{name:!0});var b=v.prototype=l(g.prototype,{constructor:u(1,v),message:u(1,""),name:u(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:v})},9170:(t,e,i)=>{i(56967)},18264:(t,e,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(13331),a=i(96340),o="ArrayBuffer",l=s[o];n({global:!0,constructor:!0,forced:r[o]!==l},{ArrayBuffer:l}),a(o)},76938:(t,e,i)=>{var n=i(82109),r=i(90260);n({target:"ArrayBuffer",stat:!0,forced:!r.NATIVE_ARRAY_BUFFER_VIEWS},{isView:r.isView})},39575:(t,e,i)=>{"use strict";var n=i(82109),r=i(21470),s=i(47293),a=i(13331),o=i(19670),l=i(51400),c=i(17466),u=i(36707),h=a.ArrayBuffer,d=a.DataView,p=d.prototype,f=r(h.prototype.slice),m=r(p.getUint8),g=r(p.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s((function(){return!new h(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(f&&void 0===e)return f(o(this),t);for(var i=o(this).byteLength,n=l(t,i),r=l(void 0===e?i:e,i),s=new(u(this,h))(c(r-n)),a=new d(this),p=new d(s),y=0;n<r;)g(p,y++,m(a,n++));return s}})},52262:(t,e,i)=>{"use strict";var n=i(82109),r=i(47908),s=i(26244),a=i(19303),o=i(51223);n({target:"Array",proto:!0},{at:function(t){var e=r(this),i=s(e),n=a(t),o=n>=0?n:i+n;return o<0||o>=i?void 0:e[o]}}),o("at")},92222:(t,e,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(43157),a=i(70111),o=i(47908),l=i(26244),c=i(7207),u=i(86135),h=i(65417),d=i(81194),p=i(5112),f=i(7392),m=p("isConcatSpreadable"),g=f>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),y=function(t){if(!a(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)};n({target:"Array",proto:!0,arity:1,forced:!g||!d("concat")},{concat:function(t){var e,i,n,r,s,a=o(this),d=h(a,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(y(s=-1===e?a:arguments[e]))for(r=l(s),c(p+r),i=0;i<r;i++,p++)i in s&&u(d,p,s[i]);else c(p+1),u(d,p++,s);return d.length=p,d}})},50545:(t,e,i)=>{var n=i(82109),r=i(1048),s=i(51223);n({target:"Array",proto:!0},{copyWithin:r}),s("copyWithin")},26541:(t,e,i)=>{"use strict";var n=i(82109),r=i(42092).every;n({target:"Array",proto:!0,forced:!i(9341)("every")},{every:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},43290:(t,e,i)=>{var n=i(82109),r=i(21285),s=i(51223);n({target:"Array",proto:!0},{fill:r}),s("fill")},57327:(t,e,i)=>{"use strict";var n=i(82109),r=i(42092).filter;n({target:"Array",proto:!0,forced:!i(81194)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},34553:(t,e,i)=>{"use strict";var n=i(82109),r=i(42092).findIndex,s=i(51223),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(a)},77287:(t,e,i)=>{"use strict";var n=i(82109),r=i(9671).findLastIndex,s=i(51223);n({target:"Array",proto:!0},{findLastIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("findLastIndex")},67635:(t,e,i)=>{"use strict";var n=i(82109),r=i(9671).findLast,s=i(51223);n({target:"Array",proto:!0},{findLast:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("findLast")},69826:(t,e,i)=>{"use strict";var n=i(82109),r=i(42092).find,s=i(51223),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(a)},86535:(t,e,i)=>{"use strict";var n=i(82109),r=i(6790),s=i(19662),a=i(47908),o=i(26244),l=i(65417);n({target:"Array",proto:!0},{flatMap:function(t){var e,i=a(this),n=o(i);return s(t),(e=l(i,0)).length=r(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},84944:(t,e,i)=>{"use strict";var n=i(82109),r=i(6790),s=i(47908),a=i(26244),o=i(19303),l=i(65417);n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=s(this),i=a(e),n=l(e,0);return n.length=r(n,e,e,i,0,void 0===t?1:o(t)),n}})},89554:(t,e,i)=>{"use strict";var n=i(82109),r=i(18533);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},91038:(t,e,i)=>{var n=i(82109),r=i(48457);n({target:"Array",stat:!0,forced:!i(17072)((function(t){Array.from(t)}))},{from:r})},26699:(t,e,i)=>{"use strict";var n=i(82109),r=i(41318).includes,s=i(47293),a=i(51223);n({target:"Array",proto:!0,forced:s((function(){return!Array(1).includes()}))},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},82772:(t,e,i)=>{"use strict";var n=i(82109),r=i(21470),s=i(41318).indexOf,a=i(9341),o=r([].indexOf),l=!!o&&1/o([1],1,-0)<0;n({target:"Array",proto:!0,forced:l||!a("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return l?o(this,t,e)||0:s(this,t,e)}})},79753:(t,e,i)=>{i(82109)({target:"Array",stat:!0},{isArray:i(43157)})},66992:(t,e,i)=>{"use strict";var n=i(45656),r=i(51223),s=i(97497),a=i(29909),o=i(3070).f,l=i(51656),c=i(76178),u=i(31913),h=i(19781),d="Array Iterator",p=a.set,f=a.getterFor(d);t.exports=l(Array,"Array",(function(t,e){p(this,{type:d,target:n(t),index:0,kind:e})}),(function(){var t=f(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,c(void 0,!0)):c("keys"==i?n:"values"==i?e[n]:[n,e[n]],!1)}),"values");var m=s.Arguments=s.Array;if(r("keys"),r("values"),r("entries"),!u&&h&&"values"!==m.name)try{o(m,"name",{value:"values"})}catch(t){}},69600:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(68361),a=i(45656),o=i(9341),l=r([].join);n({target:"Array",proto:!0,forced:s!=Object||!o("join",",")},{join:function(t){return l(a(this),void 0===t?",":t)}})},94986:(t,e,i)=>{var n=i(82109),r=i(86583);n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},21249:(t,e,i)=>{"use strict";var n=i(82109),r=i(42092).map;n({target:"Array",proto:!0,forced:!i(81194)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},26572:(t,e,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(4411),a=i(86135),o=Array;n({target:"Array",stat:!0,forced:r((function(){function t(){}return!(o.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,i=new(s(this)?this:o)(e);e>t;)a(i,t,arguments[t++]);return i.length=e,i}})},57658:(t,e,i)=>{"use strict";var n=i(82109),r=i(47908),s=i(26244),a=i(83658),o=i(7207);n({target:"Array",proto:!0,arity:1,forced:i(47293)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=r(this),i=s(e),n=arguments.length;o(i+n);for(var l=0;l<n;l++)e[i]=arguments[l],i++;return a(e,i),i}})},96644:(t,e,i)=>{"use strict";var n=i(82109),r=i(53671).right,s=i(9341),a=i(7392);n({target:"Array",proto:!0,forced:!i(35268)&&a>79&&a<83||!s("reduceRight")},{reduceRight:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},85827:(t,e,i)=>{"use strict";var n=i(82109),r=i(53671).left,s=i(9341),a=i(7392);n({target:"Array",proto:!0,forced:!i(35268)&&a>79&&a<83||!s("reduce")},{reduce:function(t){var e=arguments.length;return r(this,t,e,e>1?arguments[1]:void 0)}})},65069:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(43157),a=r([].reverse),o=[1,2];n({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),a(this)}})},47042:(t,e,i)=>{"use strict";var n=i(82109),r=i(43157),s=i(4411),a=i(70111),o=i(51400),l=i(26244),c=i(45656),u=i(86135),h=i(5112),d=i(81194),p=i(50206),f=d("slice"),m=h("species"),g=Array,y=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var i,n,h,d=c(this),f=l(d),v=o(t,f),b=o(void 0===e?f:e,f);if(r(d)&&(i=d.constructor,(s(i)&&(i===g||r(i.prototype))||a(i)&&null===(i=i[m]))&&(i=void 0),i===g||void 0===i))return p(d,v,b);for(n=new(void 0===i?g:i)(y(b-v,0)),h=0;v<b;v++,h++)v in d&&u(n,h,d[v]);return n.length=h,n}})},5212:(t,e,i)=>{"use strict";var n=i(82109),r=i(42092).some;n({target:"Array",proto:!0,forced:!i(9341)("some")},{some:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},2707:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(19662),a=i(47908),o=i(26244),l=i(85117),c=i(41340),u=i(47293),h=i(94362),d=i(9341),p=i(68886),f=i(30256),m=i(7392),g=i(98008),y=[],v=r(y.sort),b=r(y.push),_=u((function(){y.sort(void 0)})),w=u((function(){y.sort(null)})),T=d("sort"),S=!u((function(){if(m)return m<70;if(!(p&&p>3)){if(f)return!0;if(g)return g<603;var t,e,i,n,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)y.push({k:e+n,v:i})}for(y.sort((function(t,e){return e.v-t.v})),n=0;n<y.length;n++)e=y[n].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));n({target:"Array",proto:!0,forced:_||!w||!T||!S},{sort:function(t){void 0!==t&&s(t);var e=a(this);if(S)return void 0===t?v(e):v(e,t);var i,n,r=[],u=o(e);for(n=0;n<u;n++)n in e&&b(r,e[n]);for(h(r,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:c(e)>c(i)?1:-1}}(t)),i=o(r),n=0;n<i;)e[n]=r[n++];for(;n<u;)l(e,n++);return e}})},38706:(t,e,i)=>{i(96340)("Array")},40561:(t,e,i)=>{"use strict";var n=i(82109),r=i(47908),s=i(51400),a=i(19303),o=i(26244),l=i(83658),c=i(7207),u=i(65417),h=i(86135),d=i(85117),p=i(81194)("splice"),f=Math.max,m=Math.min;n({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var i,n,p,g,y,v,b=r(this),_=o(b),w=s(t,_),T=arguments.length;for(0===T?i=n=0:1===T?(i=0,n=_-w):(i=T-2,n=m(f(a(e),0),_-w)),c(_+i-n),p=u(b,n),g=0;g<n;g++)(y=w+g)in b&&h(p,g,b[y]);if(p.length=n,i<n){for(g=w;g<_-n;g++)v=g+i,(y=g+n)in b?b[v]=b[y]:d(b,v);for(g=_;g>_-n+i;g--)d(b,g-1)}else if(i>n)for(g=_-n;g>w;g--)v=g+i-1,(y=g+n-1)in b?b[v]=b[y]:d(b,v);for(g=0;g<i;g++)b[g+w]=arguments[g+2];return l(b,_-n+i),p}})},90476:(t,e,i)=>{"use strict";var n=i(82109),r=i(21843),s=i(45656),a=i(51223),o=Array;n({target:"Array",proto:!0},{toReversed:function(){return r(s(this),o)}}),a("toReversed")},76459:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(19662),a=i(45656),o=i(97745),l=i(98770),c=i(51223),u=Array,h=r(l("Array").sort);n({target:"Array",proto:!0},{toSorted:function(t){void 0!==t&&s(t);var e=a(this),i=o(u,e);return h(i,t)}}),c("toSorted")},99892:(t,e,i)=>{"use strict";var n=i(82109),r=i(51223),s=i(7207),a=i(26244),o=i(51400),l=i(45656),c=i(19303),u=Array,h=Math.max,d=Math.min;n({target:"Array",proto:!0},{toSpliced:function(t,e){var i,n,r,p,f=l(this),m=a(f),g=o(t,m),y=arguments.length,v=0;for(0===y?i=n=0:1===y?(i=0,n=m-g):(i=y-2,n=d(h(c(e),0),m-g)),r=s(m+i-n),p=u(r);v<g;v++)p[v]=f[v];for(;v<g+i;v++)p[v]=arguments[v-g+2];for(;v<r;v++)p[v]=f[v+n-i];return p}}),r("toSpliced")},99244:(t,e,i)=>{i(51223)("flatMap")},33792:(t,e,i)=>{i(51223)("flat")},30541:(t,e,i)=>{"use strict";var n=i(82109),r=i(47908),s=i(26244),a=i(83658),o=i(85117),l=i(7207);n({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}()},{unshift:function(t){var e=r(this),i=s(e),n=arguments.length;if(n){l(i+n);for(var c=i;c--;){var u=c+n;c in e?e[u]=e[c]:o(e,u)}for(var h=0;h<n;h++)e[h]=arguments[h]}return a(e,i+n)}})},35581:(t,e,i)=>{"use strict";var n=i(82109),r=i(11572),s=i(45656),a=Array;n({target:"Array",proto:!0},{with:function(t,e){return r(s(this),a,t,e)}})},3690:(t,e,i)=>{var n=i(82109),r=i(13331);n({global:!0,constructor:!0,forced:!i(23013)},{DataView:r.DataView})},16716:(t,e,i)=>{i(3690)},43016:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(47293)((function(){return 120!==new Date(16e11).getYear()})),a=r(Date.prototype.getFullYear);n({target:"Date",proto:!0,forced:s},{getYear:function(){return a(this)-1900}})},3843:(t,e,i)=>{var n=i(82109),r=i(1702),s=Date,a=r(s.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return a(new s)}})},81801:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(19303),a=Date.prototype,o=r(a.getTime),l=r(a.setFullYear);n({target:"Date",proto:!0},{setYear:function(t){o(this);var e=s(t);return l(this,0<=e&&e<=99?e+1900:e)}})},9550:(t,e,i)=>{i(82109)({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},28733:(t,e,i)=>{var n=i(82109),r=i(85573);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==r},{toISOString:r})},5735:(t,e,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(47908),a=i(57593);n({target:"Date",proto:!0,arity:1,forced:r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=s(this),i=a(e,"number");return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},96078:(t,e,i)=>{var n=i(92597),r=i(98052),s=i(38709),a=i(5112)("toPrimitive"),o=Date.prototype;n(o,a)||r(o,a,s)},83710:(t,e,i)=>{var n=i(1702),r=i(98052),s=Date.prototype,a="Invalid Date",o="toString",l=n(s[o]),c=n(s.getTime);String(new Date(NaN))!=a&&r(s,o,(function(){var t=c(this);return t==t?l(this):a}))},21703:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(22104),a=i(89191),o="WebAssembly",l=r[o],c=7!==Error("e",{cause:7}).cause,u=function(t,e){var i={};i[t]=a(t,e,c),n({global:!0,constructor:!0,arity:1,forced:c},i)},h=function(t,e){if(l&&l[t]){var i={};i[t]=a(o+"."+t,e,c),n({target:o,stat:!0,constructor:!0,arity:1,forced:c},i)}};u("Error",(function(t){return function(e){return s(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return s(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return s(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return s(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return s(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return s(t,this,arguments)}})),u("URIError",(function(t){return function(e){return s(t,this,arguments)}})),h("CompileError",(function(t){return function(e){return s(t,this,arguments)}})),h("LinkError",(function(t){return function(e){return s(t,this,arguments)}})),h("RuntimeError",(function(t){return function(e){return s(t,this,arguments)}}))},96647:(t,e,i)=>{var n=i(98052),r=i(7762),s=Error.prototype;s.toString!==r&&n(s,"toString",r)},62130:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(41340),a=r("".charAt),o=r("".charCodeAt),l=r(/./.exec),c=r(1..toString),u=r("".toUpperCase),h=/[\w*+\-./@]/,d=function(t,e){for(var i=c(t,16);i.length<e;)i="0"+i;return i};n({global:!0},{escape:function(t){for(var e,i,n=s(t),r="",c=n.length,p=0;p<c;)e=a(n,p++),l(h,e)?r+=e:r+=(i=o(e,0))<256?"%"+d(i,2):"%u"+u(d(i,4));return r}})},24812:(t,e,i)=>{var n=i(82109),r=i(27065);n({target:"Function",proto:!0,forced:Function.bind!==r},{bind:r})},4855:(t,e,i)=>{"use strict";var n=i(60614),r=i(70111),s=i(3070),a=i(79518),o=i(5112),l=i(56339),c=o("hasInstance"),u=Function.prototype;c in u||s.f(u,c,{value:l((function(t){if(!n(this)||!r(t))return!1;var e=this.prototype;if(!r(e))return t instanceof this;for(;t=a(t);)if(e===t)return!0;return!1}),c)})},68309:(t,e,i)=>{var n=i(19781),r=i(76530).EXISTS,s=i(1702),a=i(47045),o=Function.prototype,l=s(o.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(c.exec);n&&!r&&a(o,"name",{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(t){return""}}})},35837:(t,e,i)=>{var n=i(82109),r=i(17854);n({global:!0,forced:r.globalThis!==r},{globalThis:r})},38862:(t,e,i)=>{var n=i(82109),r=i(35005),s=i(22104),a=i(46916),o=i(1702),l=i(47293),c=i(60614),u=i(52190),h=i(50206),d=i(88044),p=i(36293),f=String,m=r("JSON","stringify"),g=o(/./.exec),y=o("".charAt),v=o("".charCodeAt),b=o("".replace),_=o(1..toString),w=/[\uD800-\uDFFF]/g,T=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,x=!p||l((function(){var t=r("Symbol")();return"[null]"!=m([t])||"{}"!=m({a:t})||"{}"!=m(Object(t))})),k=l((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),C=function(t,e){var i=h(arguments),n=d(e);if(c(n)||void 0!==t&&!u(t))return i[1]=function(t,e){if(c(n)&&(e=a(n,this,f(t),e)),!u(e))return e},s(m,null,i)},E=function(t,e,i){var n=y(i,e-1),r=y(i,e+1);return g(T,t)&&!g(S,r)||g(S,t)&&!g(T,n)?"\\u"+_(v(t,0),16):t};m&&n({target:"JSON",stat:!0,arity:3,forced:x||k},{stringify:function(t,e,i){var n=h(arguments),r=s(x?C:m,null,n);return k&&"string"==typeof r?b(r,w,E):r}})},73706:(t,e,i)=>{var n=i(17854);i(58003)(n.JSON,"JSON",!0)},69098:(t,e,i)=>{"use strict";i(77710)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(95631))},51532:(t,e,i)=>{i(69098)},99752:(t,e,i)=>{var n=i(82109),r=i(26513),s=Math.acosh,a=Math.log,o=Math.sqrt,l=Math.LN2;n({target:"Math",stat:!0,forced:!s||710!=Math.floor(s(Number.MAX_VALUE))||s(1/0)!=1/0},{acosh:function(t){var e=+t;return e<1?NaN:e>94906265.62425156?a(e)+l:r(e-1+o(e-1)*o(e+1))}})},82376:(t,e,i)=>{var n=i(82109),r=Math.asinh,s=Math.log,a=Math.sqrt;n({target:"Math",stat:!0,forced:!(r&&1/r(0)>0)},{asinh:function t(e){var i=+e;return isFinite(i)&&0!=i?i<0?-t(-i):s(i+a(i*i+1)):i}})},73181:(t,e,i)=>{var n=i(82109),r=Math.atanh,s=Math.log;n({target:"Math",stat:!0,forced:!(r&&1/r(-0)<0)},{atanh:function(t){var e=+t;return 0==e?e:s((1+e)/(1-e))/2}})},23484:(t,e,i)=>{var n=i(82109),r=i(64310),s=Math.abs,a=Math.pow;n({target:"Math",stat:!0},{cbrt:function(t){var e=+t;return r(e)*a(s(e),1/3)}})},2388:(t,e,i)=>{var n=i(82109),r=Math.floor,s=Math.log,a=Math.LOG2E;n({target:"Math",stat:!0},{clz32:function(t){var e=t>>>0;return e?31-r(s(e+.5)*a):32}})},88621:(t,e,i)=>{var n=i(82109),r=i(66736),s=Math.cosh,a=Math.abs,o=Math.E;n({target:"Math",stat:!0,forced:!s||s(710)===1/0},{cosh:function(t){var e=r(a(t)-1)+1;return(e+1/(e*o*o))*(o/2)}})},60403:(t,e,i)=>{var n=i(82109),r=i(66736);n({target:"Math",stat:!0,forced:r!=Math.expm1},{expm1:r})},84755:(t,e,i)=>{i(82109)({target:"Math",stat:!0},{fround:i(26130)})},25438:(t,e,i)=>{var n=i(82109),r=Math.hypot,s=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,arity:2,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(t,e){for(var i,n,r=0,o=0,l=arguments.length,c=0;o<l;)c<(i=s(arguments[o++]))?(r=r*(n=c/i)*n+1,c=i):r+=i>0?(n=i/c)*n:i;return c===1/0?1/0:c*a(r)}})},90332:(t,e,i)=>{var n=i(82109),r=i(47293),s=Math.imul;n({target:"Math",stat:!0,forced:r((function(){return-5!=s(4294967295,5)||2!=s.length}))},{imul:function(t,e){var i=65535,n=+t,r=+e,s=i&n,a=i&r;return 0|s*a+((i&n>>>16)*a+s*(i&r>>>16)<<16>>>0)}})},40658:(t,e,i)=>{i(82109)({target:"Math",stat:!0},{log10:i(20403)})},40197:(t,e,i)=>{i(82109)({target:"Math",stat:!0},{log1p:i(26513)})},44914:(t,e,i)=>{var n=i(82109),r=Math.log,s=Math.LN2;n({target:"Math",stat:!0},{log2:function(t){return r(t)/s}})},52420:(t,e,i)=>{i(82109)({target:"Math",stat:!0},{sign:i(64310)})},60160:(t,e,i)=>{var n=i(82109),r=i(47293),s=i(66736),a=Math.abs,o=Math.exp,l=Math.E;n({target:"Math",stat:!0,forced:r((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){var e=+t;return a(e)<1?(s(e)-s(-e))/2:(o(e-1)-o(-e-1))*(l/2)}})},60970:(t,e,i)=>{var n=i(82109),r=i(66736),s=Math.exp;n({target:"Math",stat:!0},{tanh:function(t){var e=+t,i=r(e),n=r(-e);return i==1/0?1:n==1/0?-1:(i-n)/(s(e)+s(-e))}})},10408:(t,e,i)=>{i(58003)(Math,"Math",!0)},73689:(t,e,i)=>{i(82109)({target:"Math",stat:!0},{trunc:i(74758)})},9653:(t,e,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19781),a=i(17854),o=i(40857),l=i(1702),c=i(54705),u=i(92597),h=i(79587),d=i(47976),p=i(52190),f=i(57593),m=i(47293),g=i(8006).f,y=i(31236).f,v=i(3070).f,b=i(50863),_=i(53111).trim,w="Number",T=a[w],S=o[w],x=T.prototype,k=a.TypeError,C=l("".slice),E=l("".charCodeAt),I=function(t){var e=f(t,"number");return"bigint"==typeof e?e:P(e)},P=function(t){var e,i,n,r,s,a,o,l,c=f(t,"number");if(p(c))throw k("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=_(c),43===(e=E(c,0))||45===e){if(88===(i=E(c,2))||120===i)return NaN}else if(48===e){switch(E(c,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(a=(s=C(c,2)).length,o=0;o<a;o++)if((l=E(s,o))<48||l>r)return NaN;return parseInt(s,n)}return+c},A=c(w,!T(" 0o1")||!T("0b1")||T("+0x1")),L=function(t){return d(x,t)&&m((function(){b(t)}))},O=function(t){var e=arguments.length<1?0:T(I(t));return L(this)?h(Object(e),this,O):e};O.prototype=x,A&&!r&&(x.constructor=O),n({global:!0,constructor:!0,wrap:!0,forced:A},{Number:O});var D=function(t,e){for(var i,n=s?g(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),r=0;n.length>r;r++)u(e,i=n[r])&&!u(t,i)&&v(t,i,y(e,i))};r&&S&&D(o[w],S),(A||r)&&D(o[w],T)},93299:(t,e,i)=>{i(82109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})},35192:(t,e,i)=>{i(82109)({target:"Number",stat:!0},{isFinite:i(77023)})},33161:(t,e,i)=>{i(82109)({target:"Number",stat:!0},{isInteger:i(55988)})},44048:(t,e,i)=>{i(82109)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},78285:(t,e,i)=>{var n=i(82109),r=i(55988),s=Math.abs;n({target:"Number",stat:!0},{isSafeInteger:function(t){return r(t)&&s(t)<=9007199254740991}})},44363:(t,e,i)=>{i(82109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},55994:(t,e,i)=>{i(82109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})},61874:(t,e,i)=>{var n=i(82109),r=i(2814);n({target:"Number",stat:!0,forced:Number.parseFloat!=r},{parseFloat:r})},9494:(t,e,i)=>{var n=i(82109),r=i(83009);n({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},31354:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(19303),a=i(50863),o=i(38415),l=i(20403),c=i(47293),u=RangeError,h=String,d=isFinite,p=Math.abs,f=Math.floor,m=Math.pow,g=Math.round,y=r(1..toExponential),v=r(o),b=r("".slice),_="-6.9000e-11"===y(-69e-12,4)&&"1.25e+0"===y(1.255,2)&&"1.235e+4"===y(12345,3)&&"3e+1"===y(25,0);n({target:"Number",proto:!0,forced:!_||!(c((function(){y(1,1/0)}))&&c((function(){y(1,-1/0)})))||!!c((function(){y(1/0,1/0),y(NaN,1/0)}))},{toExponential:function(t){var e=a(this);if(void 0===t)return y(e);var i=s(t);if(!d(e))return String(e);if(i<0||i>20)throw u("Incorrect fraction digits");if(_)return y(e,i);var n="",r="",o=0,c="",w="";if(e<0&&(n="-",e=-e),0===e)o=0,r=v("0",i+1);else{var T=l(e);o=f(T);var S=0,x=m(10,o-i);2*e>=(2*(S=g(e/x))+1)*x&&(S+=1),S>=m(10,i+1)&&(S/=10,o+=1),r=h(S)}return 0!==i&&(r=b(r,0,1)+"."+b(r,1)),0===o?(c="+",w="0"):(c=o>0?"+":"-",w=h(p(o))),n+(r+"e")+c+w}})},56977:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(19303),a=i(50863),o=i(38415),l=i(47293),c=RangeError,u=String,h=Math.floor,d=r(o),p=r("".slice),f=r(1..toFixed),m=function(t,e,i){return 0===e?i:e%2==1?m(t,e-1,i*t):m(t*t,e/2,i)},g=function(t,e,i){for(var n=-1,r=i;++n<6;)r+=e*t[n],t[n]=r%1e7,r=h(r/1e7)},y=function(t,e){for(var i=6,n=0;--i>=0;)n+=t[i],t[i]=h(n/e),n=n%e*1e7},v=function(t){for(var e=6,i="";--e>=0;)if(""!==i||0===e||0!==t[e]){var n=u(t[e]);i=""===i?n:i+d("0",7-n.length)+n}return i};n({target:"Number",proto:!0,forced:l((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!l((function(){f({})}))},{toFixed:function(t){var e,i,n,r,o=a(this),l=s(t),h=[0,0,0,0,0,0],f="",b="0";if(l<0||l>20)throw c("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return u(o);if(o<0&&(f="-",o=-o),o>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(o*m(2,69,1))-69)<0?o*m(2,-e,1):o/m(2,e,1),i*=4503599627370496,(e=52-e)>0){for(g(h,0,i),n=l;n>=7;)g(h,1e7,0),n-=7;for(g(h,m(10,n,1),0),n=e-1;n>=23;)y(h,1<<23),n-=23;y(h,1<<n),g(h,1,1),y(h,2),b=v(h)}else g(h,0,i),g(h,1<<-e,0),b=v(h)+d("0",l);return l>0?f+((r=b.length)<=l?"0."+d("0",l-r)+b:p(b,0,r-l)+"."+p(b,r-l)):f+b}})},55147:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(47293),a=i(50863),o=r(1..toPrecision);n({target:"Number",proto:!0,forced:s((function(){return"1"!==o(1,void 0)}))||!s((function(){o({})}))},{toPrecision:function(t){return void 0===t?o(a(this)):o(a(this),t)}})},19601:(t,e,i)=>{var n=i(82109),r=i(21574);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},78011:(t,e,i)=>{i(82109)({target:"Object",stat:!0,sham:!i(19781)},{create:i(70030)})},59595:(t,e,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),a=i(19662),o=i(47908),l=i(3070);r&&n({target:"Object",proto:!0,forced:s},{__defineGetter__:function(t,e){l.f(o(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},33321:(t,e,i)=>{var n=i(82109),r=i(19781),s=i(36048).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==s,sham:!r},{defineProperties:s})},69070:(t,e,i)=>{var n=i(82109),r=i(19781),s=i(3070).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==s,sham:!r},{defineProperty:s})},35500:(t,e,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),a=i(19662),o=i(47908),l=i(3070);r&&n({target:"Object",proto:!0,forced:s},{__defineSetter__:function(t,e){l.f(o(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},69720:(t,e,i)=>{var n=i(82109),r=i(44699).entries;n({target:"Object",stat:!0},{entries:function(t){return r(t)}})},43371:(t,e,i)=>{var n=i(82109),r=i(76677),s=i(47293),a=i(70111),o=i(62423).onFreeze,l=Object.freeze;n({target:"Object",stat:!0,forced:s((function(){l(1)})),sham:!r},{freeze:function(t){return l&&a(t)?l(o(t)):t}})},38559:(t,e,i)=>{var n=i(82109),r=i(20408),s=i(86135);n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return r(t,(function(t,i){s(e,t,i)}),{AS_ENTRIES:!0}),e}})},38880:(t,e,i)=>{var n=i(82109),r=i(47293),s=i(45656),a=i(31236).f,o=i(19781);n({target:"Object",stat:!0,forced:!o||r((function(){a(1)})),sham:!o},{getOwnPropertyDescriptor:function(t,e){return a(s(t),e)}})},49337:(t,e,i)=>{var n=i(82109),r=i(19781),s=i(53887),a=i(45656),o=i(31236),l=i(86135);n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){for(var e,i,n=a(t),r=o.f,c=s(n),u={},h=0;c.length>h;)void 0!==(i=r(n,e=c[h++]))&&l(u,e,i);return u}})},36210:(t,e,i)=>{var n=i(82109),r=i(47293),s=i(1156).f;n({target:"Object",stat:!0,forced:r((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:s})},29660:(t,e,i)=>{var n=i(82109),r=i(36293),s=i(47293),a=i(25181),o=i(47908);n({target:"Object",stat:!0,forced:!r||s((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(o(t)):[]}})},30489:(t,e,i)=>{var n=i(82109),r=i(47293),s=i(47908),a=i(79518),o=i(49920);n({target:"Object",stat:!0,forced:r((function(){a(1)})),sham:!o},{getPrototypeOf:function(t){return a(s(t))}})},46314:(t,e,i)=>{i(82109)({target:"Object",stat:!0},{hasOwn:i(92597)})},41825:(t,e,i)=>{var n=i(82109),r=i(52050);n({target:"Object",stat:!0,forced:Object.isExtensible!==r},{isExtensible:r})},98410:(t,e,i)=>{var n=i(82109),r=i(47293),s=i(70111),a=i(84326),o=i(7556),l=Object.isFrozen;n({target:"Object",stat:!0,forced:o||r((function(){l(1)}))},{isFrozen:function(t){return!s(t)||!(!o||"ArrayBuffer"!=a(t))||!!l&&l(t)}})},72200:(t,e,i)=>{var n=i(82109),r=i(47293),s=i(70111),a=i(84326),o=i(7556),l=Object.isSealed;n({target:"Object",stat:!0,forced:o||r((function(){l(1)}))},{isSealed:function(t){return!s(t)||!(!o||"ArrayBuffer"!=a(t))||!!l&&l(t)}})},43304:(t,e,i)=>{i(82109)({target:"Object",stat:!0},{is:i(81150)})},47941:(t,e,i)=>{var n=i(82109),r=i(47908),s=i(81956);n({target:"Object",stat:!0,forced:i(47293)((function(){s(1)}))},{keys:function(t){return s(r(t))}})},94869:(t,e,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),a=i(47908),o=i(34948),l=i(79518),c=i(31236).f;r&&n({target:"Object",proto:!0,forced:s},{__lookupGetter__:function(t){var e,i=a(this),n=o(t);do{if(e=c(i,n))return e.get}while(i=l(i))}})},33952:(t,e,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),a=i(47908),o=i(34948),l=i(79518),c=i(31236).f;r&&n({target:"Object",proto:!0,forced:s},{__lookupSetter__:function(t){var e,i=a(this),n=o(t);do{if(e=c(i,n))return e.set}while(i=l(i))}})},57227:(t,e,i)=>{var n=i(82109),r=i(70111),s=i(62423).onFreeze,a=i(76677),o=i(47293),l=Object.preventExtensions;n({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!a},{preventExtensions:function(t){return l&&r(t)?l(s(t)):t}})},67987:(t,e,i)=>{"use strict";var n=i(19781),r=i(47045),s=i(70111),a=i(47908),o=i(84488),l=Object.getPrototypeOf,c=Object.setPrototypeOf,u=Object.prototype,h="__proto__";if(n&&l&&c&&!(h in u))try{r(u,h,{configurable:!0,get:function(){return l(a(this))},set:function(t){var e=o(this);(s(t)||null===t)&&s(e)&&c(e,t)}})}catch(t){}},60514:(t,e,i)=>{var n=i(82109),r=i(70111),s=i(62423).onFreeze,a=i(76677),o=i(47293),l=Object.seal;n({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!a},{seal:function(t){return l&&r(t)?l(s(t)):t}})},68304:(t,e,i)=>{i(82109)({target:"Object",stat:!0},{setPrototypeOf:i(27674)})},41539:(t,e,i)=>{var n=i(51694),r=i(98052),s=i(90288);n||r(Object.prototype,"toString",s,{unsafe:!0})},26833:(t,e,i)=>{var n=i(82109),r=i(44699).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},54678:(t,e,i)=>{var n=i(82109),r=i(2814);n({global:!0,forced:parseFloat!=r},{parseFloat:r})},91058:(t,e,i)=>{var n=i(82109),r=i(83009);n({global:!0,forced:parseInt!=r},{parseInt:r})},17922:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(19662),a=i(78523),o=i(12534),l=i(20408);n({target:"Promise",stat:!0,forced:i(80612)},{allSettled:function(t){var e=this,i=a.f(e),n=i.resolve,c=i.reject,u=o((function(){var i=s(e.resolve),a=[],o=0,c=1;l(t,(function(t){var s=o++,l=!1;c++,r(i,e,t).then((function(t){l||(l=!0,a[s]={status:"fulfilled",value:t},--c||n(a))}),(function(t){l||(l=!0,a[s]={status:"rejected",reason:t},--c||n(a))}))})),--c||n(a)}));return u.error&&c(u.value),i.promise}})},70821:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(19662),a=i(78523),o=i(12534),l=i(20408);n({target:"Promise",stat:!0,forced:i(80612)},{all:function(t){var e=this,i=a.f(e),n=i.resolve,c=i.reject,u=o((function(){var i=s(e.resolve),a=[],o=0,u=1;l(t,(function(t){var s=o++,l=!1;u++,r(i,e,t).then((function(t){l||(l=!0,a[s]=t,--u||n(a))}),c)})),--u||n(a)}));return u.error&&c(u.value),i.promise}})},34668:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(19662),a=i(35005),o=i(78523),l=i(12534),c=i(20408),u=i(80612),h="No one promise resolved";n({target:"Promise",stat:!0,forced:u},{any:function(t){var e=this,i=a("AggregateError"),n=o.f(e),u=n.resolve,d=n.reject,p=l((function(){var n=s(e.resolve),a=[],o=0,l=1,p=!1;c(t,(function(t){var s=o++,c=!1;l++,r(n,e,t).then((function(t){c||p||(p=!0,u(t))}),(function(t){c||p||(c=!0,a[s]=t,--l||d(new i(a,h)))}))})),--l||d(new i(a,h))}));return p.error&&d(p.value),n.promise}})},94164:(t,e,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(63702).CONSTRUCTOR,a=i(2492),o=i(35005),l=i(60614),c=i(98052),u=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&l(a)){var h=o("Promise").prototype.catch;u.catch!==h&&c(u,"catch",h,{unsafe:!0})}},43401:(t,e,i)=>{"use strict";var n,r,s,a=i(82109),o=i(31913),l=i(35268),c=i(17854),u=i(46916),h=i(98052),d=i(27674),p=i(58003),f=i(96340),m=i(19662),g=i(60614),y=i(70111),v=i(25787),b=i(36707),_=i(20261).set,w=i(95948),T=i(842),S=i(12534),x=i(18572),k=i(29909),C=i(2492),E=i(63702),I=i(78523),P="Promise",A=E.CONSTRUCTOR,L=E.REJECTION_EVENT,O=E.SUBCLASSING,D=k.getterFor(P),M=k.set,R=C&&C.prototype,N=C,B=R,F=c.TypeError,$=c.document,U=c.process,j=I.f,V=j,H=!!($&&$.createEvent&&c.dispatchEvent),q="unhandledrejection",W=function(t){var e;return!(!y(t)||!g(e=t.then))&&e},z=function(t,e){var i,n,r,s=e.value,a=1==e.state,o=a?t.ok:t.fail,l=t.resolve,c=t.reject,h=t.domain;try{o?(a||(2===e.rejection&&Q(e),e.rejection=1),!0===o?i=s:(h&&h.enter(),i=o(s),h&&(h.exit(),r=!0)),i===t.promise?c(F("Promise-chain cycle")):(n=W(i))?u(n,i,l,c):l(i)):c(s)}catch(t){h&&!r&&h.exit(),c(t)}},G=function(t,e){t.notified||(t.notified=!0,w((function(){for(var i,n=t.reactions;i=n.get();)z(i,t);t.notified=!1,e&&!t.rejection&&Y(t)})))},K=function(t,e,i){var n,r;H?((n=$.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:e,reason:i},!L&&(r=c["on"+t])?r(n):t===q&&T("Unhandled promise rejection",i)},Y=function(t){u(_,c,(function(){var e,i=t.facade,n=t.value;if(X(t)&&(e=S((function(){l?U.emit("unhandledRejection",n,i):K(q,i,n)})),t.rejection=l||X(t)?2:1,e.error))throw e.value}))},X=function(t){return 1!==t.rejection&&!t.parent},Q=function(t){u(_,c,(function(){var e=t.facade;l?U.emit("rejectionHandled",e):K("rejectionhandled",e,t.value)}))},J=function(t,e,i){return function(n){t(e,n,i)}},Z=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=2,G(t,!0))},tt=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw F("Promise can't be resolved itself");var n=W(e);n?w((function(){var i={done:!1};try{u(n,e,J(tt,i,t),J(Z,i,t))}catch(e){Z(i,e,t)}})):(t.value=e,t.state=1,G(t,!1))}catch(e){Z({done:!1},e,t)}}};if(A&&(B=(N=function(t){v(this,B),m(t),u(n,this);var e=D(this);try{t(J(tt,e),J(Z,e))}catch(t){Z(e,t)}}).prototype,(n=function(t){M(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new x,rejection:!1,state:0,value:void 0})}).prototype=h(B,"then",(function(t,e){var i=D(this),n=j(b(this,N));return i.parent=!0,n.ok=!g(t)||t,n.fail=g(e)&&e,n.domain=l?U.domain:void 0,0==i.state?i.reactions.add(n):w((function(){z(n,i)})),n.promise})),r=function(){var t=new n,e=D(t);this.promise=t,this.resolve=J(tt,e),this.reject=J(Z,e)},I.f=j=function(t){return t===N||void 0===t?new r(t):V(t)},!o&&g(C)&&R!==Object.prototype)){s=R.then,O||h(R,"then",(function(t,e){var i=this;return new N((function(t,e){u(s,i,t,e)})).then(t,e)}),{unsafe:!0});try{delete R.constructor}catch(t){}d&&d(R,B)}a({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:N}),p(N,P,!1,!0),f(P)},17727:(t,e,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(2492),a=i(47293),o=i(35005),l=i(60614),c=i(36707),u=i(69478),h=i(98052),d=s&&s.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!s&&a((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=c(this,o("Promise")),i=l(t);return this.then(i?function(i){return u(e,t()).then((function(){return i}))}:t,i?function(i){return u(e,t()).then((function(){throw i}))}:t)}}),!r&&l(s)){var p=o("Promise").prototype.finally;d.finally!==p&&h(d,"finally",p,{unsafe:!0})}},88674:(t,e,i)=>{i(43401),i(70821),i(94164),i(6027),i(60683),i(96294)},6027:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(19662),a=i(78523),o=i(12534),l=i(20408);n({target:"Promise",stat:!0,forced:i(80612)},{race:function(t){var e=this,i=a.f(e),n=i.reject,c=o((function(){var a=s(e.resolve);l(t,(function(t){r(a,e,t).then(i.resolve,n)}))}));return c.error&&n(c.value),i.promise}})},60683:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(78523);n({target:"Promise",stat:!0,forced:i(63702).CONSTRUCTOR},{reject:function(t){var e=s.f(this);return r(e.reject,void 0,t),e.promise}})},96294:(t,e,i)=>{"use strict";var n=i(82109),r=i(35005),s=i(31913),a=i(2492),o=i(63702).CONSTRUCTOR,l=i(69478),c=r("Promise"),u=s&&!o;n({target:"Promise",stat:!0,forced:s||o},{resolve:function(t){return l(u&&this===c?a:this,t)}})},60224:(t,e,i)=>{var n=i(82109),r=i(22104),s=i(19662),a=i(19670);n({target:"Reflect",stat:!0,forced:!i(47293)((function(){Reflect.apply((function(){}))}))},{apply:function(t,e,i){return r(s(t),e,a(i))}})},12419:(t,e,i)=>{var n=i(82109),r=i(35005),s=i(22104),a=i(27065),o=i(39483),l=i(19670),c=i(70111),u=i(70030),h=i(47293),d=r("Reflect","construct"),p=Object.prototype,f=[].push,m=h((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),g=!h((function(){d((function(){}))})),y=m||g;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(t,e){o(t),l(e);var i=arguments.length<3?t:o(arguments[2]);if(g&&!m)return d(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return s(f,n,e),new(s(a,t,n))}var r=i.prototype,h=u(c(r)?r:p),y=s(t,h,e);return c(y)?y:h}})},69596:(t,e,i)=>{var n=i(82109),r=i(19781),s=i(19670),a=i(34948),o=i(3070);n({target:"Reflect",stat:!0,forced:i(47293)((function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})})),sham:!r},{defineProperty:function(t,e,i){s(t);var n=a(e);s(i);try{return o.f(t,n,i),!0}catch(t){return!1}}})},52586:(t,e,i)=>{var n=i(82109),r=i(19670),s=i(31236).f;n({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var i=s(r(t),e);return!(i&&!i.configurable)&&delete t[e]}})},95683:(t,e,i)=>{var n=i(82109),r=i(19781),s=i(19670),a=i(31236);n({target:"Reflect",stat:!0,sham:!r},{getOwnPropertyDescriptor:function(t,e){return a.f(s(t),e)}})},39361:(t,e,i)=>{var n=i(82109),r=i(19670),s=i(79518);n({target:"Reflect",stat:!0,sham:!i(49920)},{getPrototypeOf:function(t){return s(r(t))}})},74819:(t,e,i)=>{var n=i(82109),r=i(46916),s=i(70111),a=i(19670),o=i(45032),l=i(31236),c=i(79518);n({target:"Reflect",stat:!0},{get:function t(e,i){var n,u,h=arguments.length<3?e:arguments[2];return a(e)===h?e[i]:(n=l.f(e,i))?o(n)?n.value:void 0===n.get?void 0:r(n.get,h):s(u=c(e))?t(u,i,h):void 0}})},51037:(t,e,i)=>{i(82109)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},5898:(t,e,i)=>{var n=i(82109),r=i(19670),s=i(52050);n({target:"Reflect",stat:!0},{isExtensible:function(t){return r(t),s(t)}})},67556:(t,e,i)=>{i(82109)({target:"Reflect",stat:!0},{ownKeys:i(53887)})},14361:(t,e,i)=>{var n=i(82109),r=i(35005),s=i(19670);n({target:"Reflect",stat:!0,sham:!i(76677)},{preventExtensions:function(t){s(t);try{var e=r("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},39532:(t,e,i)=>{var n=i(82109),r=i(19670),s=i(96077),a=i(27674);a&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){r(t),s(e);try{return a(t,e),!0}catch(t){return!1}}})},83593:(t,e,i)=>{var n=i(82109),r=i(46916),s=i(19670),a=i(70111),o=i(45032),l=i(47293),c=i(3070),u=i(31236),h=i(79518),d=i(79114);n({target:"Reflect",stat:!0,forced:l((function(){var t=function(){},e=c.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}))},{set:function t(e,i,n){var l,p,f,m=arguments.length<4?e:arguments[3],g=u.f(s(e),i);if(!g){if(a(p=h(e)))return t(p,i,n,m);g=d(0)}if(o(g)){if(!1===g.writable||!a(m))return!1;if(l=u.f(m,i)){if(l.get||l.set||!1===l.writable)return!1;l.value=n,c.f(m,i,l)}else c.f(m,i,d(0,n))}else{if(void 0===(f=g.set))return!1;r(f,m,n)}return!0}})},81299:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(58003);n({global:!0},{Reflect:{}}),s(r.Reflect,"Reflect",!0)},24603:(t,e,i)=>{var n=i(19781),r=i(17854),s=i(1702),a=i(54705),o=i(79587),l=i(68880),c=i(8006).f,u=i(47976),h=i(47850),d=i(41340),p=i(34706),f=i(52999),m=i(2626),g=i(98052),y=i(47293),v=i(92597),b=i(29909).enforce,_=i(96340),w=i(5112),T=i(9441),S=i(38173),x=w("match"),k=r.RegExp,C=k.prototype,E=r.SyntaxError,I=s(C.exec),P=s("".charAt),A=s("".replace),L=s("".indexOf),O=s("".slice),D=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,R=/a/g,N=new k(M)!==M,B=f.MISSED_STICKY,F=f.UNSUPPORTED_Y;if(a("RegExp",n&&(!N||B||T||S||y((function(){return R[x]=!1,k(M)!=M||k(R)==R||"/a/i"!=k(M,"i")}))))){for(var $=function(t,e){var i,n,r,s,a,c,f=u(C,this),m=h(t),g=void 0===e,y=[],_=t;if(!f&&m&&g&&t.constructor===$)return t;if((m||u(C,t))&&(t=t.source,g&&(e=p(_))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),_=t,T&&"dotAll"in M&&(n=!!e&&L(e,"s")>-1)&&(e=A(e,/s/g,"")),i=e,B&&"sticky"in M&&(r=!!e&&L(e,"y")>-1)&&F&&(e=A(e,/y/g,"")),S&&(s=function(t){for(var e,i=t.length,n=0,r="",s=[],a={},o=!1,l=!1,c=0,u="";n<=i;n++){if("\\"===(e=P(t,n)))e+=P(t,++n);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:I(D,O(t,n+1))&&(n+=2,l=!0),r+=e,c++;continue;case">"===e&&l:if(""===u||v(a,u))throw new E("Invalid capture group name");a[u]=!0,s[s.length]=[u,c],l=!1,u="";continue}l?u+=e:r+=e}return[r,s]}(t),t=s[0],y=s[1]),a=o(k(t,e),f?this:C,$),(n||r||y.length)&&(c=b(a),n&&(c.dotAll=!0,c.raw=$(function(t){for(var e,i=t.length,n=0,r="",s=!1;n<=i;n++)"\\"!==(e=P(t,n))?s||"."!==e?("["===e?s=!0:"]"===e&&(s=!1),r+=e):r+="[\\s\\S]":r+=e+P(t,++n);return r}(t),i)),r&&(c.sticky=!0),y.length&&(c.groups=y)),t!==_)try{l(a,"source",""===_?"(?:)":_)}catch(t){}return a},U=c(k),j=0;U.length>j;)m($,k,U[j++]);C.constructor=$,$.prototype=C,g(r,"RegExp",$,{constructor:!0})}_("RegExp")},28450:(t,e,i)=>{var n=i(19781),r=i(9441),s=i(84326),a=i(47045),o=i(29909).get,l=RegExp.prototype,c=TypeError;n&&r&&a(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!o(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})},74916:(t,e,i)=>{"use strict";var n=i(82109),r=i(22261);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},92087:(t,e,i)=>{var n=i(17854),r=i(19781),s=i(47045),a=i(67066),o=i(47293),l=n.RegExp,c=l.prototype;r&&o((function(){var t=!0;try{l(".","d")}catch(e){t=!1}var e={},i="",n=t?"dgimsy":"gimsy",r=function(t,n){Object.defineProperty(e,t,{get:function(){return i+=n,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in t&&(s.hasIndices="d"),s)r(a,s[a]);return Object.getOwnPropertyDescriptor(c,"flags").get.call(e)!==n||i!==n}))&&s(c,"flags",{configurable:!0,get:a})},88386:(t,e,i)=>{var n=i(19781),r=i(52999).MISSED_STICKY,s=i(84326),a=i(47045),o=i(29909).get,l=RegExp.prototype,c=TypeError;n&&r&&a(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!o(this).sticky;throw c("Incompatible receiver, RegExp required")}}})},77601:(t,e,i)=>{"use strict";i(74916);var n,r,s=i(82109),a=i(46916),o=i(60614),l=i(19670),c=i(41340),u=(n=!1,(r=/[ac]/).exec=function(){return n=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&n),h=/./.test;s({target:"RegExp",proto:!0,forced:!u},{test:function(t){var e=l(this),i=c(t),n=e.exec;if(!o(n))return a(h,e,i);var r=a(n,e,i);return null!==r&&(l(r),!0)}})},39714:(t,e,i)=>{"use strict";var n=i(76530).PROPER,r=i(98052),s=i(19670),a=i(41340),o=i(47293),l=i(34706),c="toString",u=RegExp.prototype[c],h=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=n&&u.name!=c;(h||d)&&r(RegExp.prototype,c,(function(){var t=s(this);return"/"+a(t.source)+"/"+a(l(t))}),{unsafe:!0})},37227:(t,e,i)=>{"use strict";i(77710)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(95631))},70189:(t,e,i)=>{i(37227)},15218:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("anchor")},{anchor:function(t){return r(this,"a","name",t)}})},24506:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(84488),a=i(19303),o=i(41340),l=i(47293),c=r("".charAt);n({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="".at(-2)}))},{at:function(t){var e=o(s(this)),i=e.length,n=a(t),r=n>=0?n:i+n;return r<0||r>=i?void 0:c(e,r)}})},74475:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("big")},{big:function(){return r(this,"big","","")}})},57929:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("blink")},{blink:function(){return r(this,"blink","","")}})},50915:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("bold")},{bold:function(){return r(this,"b","","")}})},79841:(t,e,i)=>{"use strict";var n=i(82109),r=i(28710).codeAt;n({target:"String",proto:!0},{codePointAt:function(t){return r(this,t)}})},27852:(t,e,i)=>{"use strict";var n,r=i(82109),s=i(21470),a=i(31236).f,o=i(17466),l=i(41340),c=i(3929),u=i(84488),h=i(84964),d=i(31913),p=s("".endsWith),f=s("".slice),m=Math.min,g=h("endsWith");r({target:"String",proto:!0,forced:!(!d&&!g&&(n=a(String.prototype,"endsWith"),n&&!n.writable)||g)},{endsWith:function(t){var e=l(u(this));c(t);var i=arguments.length>1?arguments[1]:void 0,n=e.length,r=void 0===i?n:m(o(i),n),s=l(t);return p?p(e,s,r):f(e,r-s.length,r)===s}})},29253:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("fixed")},{fixed:function(){return r(this,"tt","","")}})},42125:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("fontcolor")},{fontcolor:function(t){return r(this,"font","color",t)}})},78830:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("fontsize")},{fontsize:function(t){return r(this,"font","size",t)}})},94953:(t,e,i)=>{var n=i(82109),r=i(1702),s=i(51400),a=RangeError,o=String.fromCharCode,l=String.fromCodePoint,c=r([].join);n({target:"String",stat:!0,arity:1,forced:!!l&&1!=l.length},{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,r=0;n>r;){if(e=+arguments[r++],s(e,1114111)!==e)throw a(e+" is not a valid code point");i[r]=e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320)}return c(i,"")}})},32023:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(3929),a=i(84488),o=i(41340),l=i(84964),c=r("".indexOf);n({target:"String",proto:!0,forced:!l("includes")},{includes:function(t){return!!~c(o(a(this)),o(s(t)),arguments.length>1?arguments[1]:void 0)}})},58734:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("italics")},{italics:function(){return r(this,"i","","")}})},78783:(t,e,i)=>{"use strict";var n=i(28710).charAt,r=i(41340),s=i(29909),a=i(51656),o=i(76178),l="String Iterator",c=s.set,u=s.getterFor(l);a(String,"String",(function(t){c(this,{type:l,string:r(t),index:0})}),(function(){var t,e=u(this),i=e.string,r=e.index;return r>=i.length?o(void 0,!0):(t=n(i,r),e.index+=t.length,o(t,!1))}))},29254:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("link")},{link:function(t){return r(this,"a","href",t)}})},76373:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(21470),a=i(63061),o=i(76178),l=i(84488),c=i(17466),u=i(41340),h=i(19670),d=i(68554),p=i(84326),f=i(47850),m=i(34706),g=i(58173),y=i(98052),v=i(47293),b=i(5112),_=i(36707),w=i(31530),T=i(97651),S=i(29909),x=i(31913),k=b("matchAll"),C="RegExp String",E=C+" Iterator",I=S.set,P=S.getterFor(E),A=RegExp.prototype,L=TypeError,O=s("".indexOf),D=s("".matchAll),M=!!D&&!v((function(){D("a",/./)})),R=a((function(t,e,i,n){I(this,{type:E,regexp:t,string:e,global:i,unicode:n,done:!1})}),C,(function(){var t=P(this);if(t.done)return o(void 0,!0);var e=t.regexp,i=t.string,n=T(e,i);return null===n?(t.done=!0,o(void 0,!0)):t.global?(""===u(n[0])&&(e.lastIndex=w(i,c(e.lastIndex),t.unicode)),o(n,!1)):(t.done=!0,o(n,!1))})),N=function(t){var e,i,n,r=h(this),s=u(t),a=_(r,RegExp),o=u(m(r));return e=new a(a===RegExp?r.source:r,o),i=!!~O(o,"g"),n=!!~O(o,"u"),e.lastIndex=c(r.lastIndex),new R(e,s,i,n)};n({target:"String",proto:!0,forced:M},{matchAll:function(t){var e,i,n,s,a=l(this);if(d(t)){if(M)return D(a,t)}else{if(f(t)&&(e=u(l(m(t))),!~O(e,"g")))throw L("`.matchAll` does not allow non-global regexes");if(M)return D(a,t);if(void 0===(n=g(t,k))&&x&&"RegExp"==p(t)&&(n=N),n)return r(n,t,a)}return i=u(a),s=new RegExp(t,"g"),x?r(N,s,i):s[k](i)}}),x||k in A||y(A,k,N)},4723:(t,e,i)=>{"use strict";var n=i(46916),r=i(27007),s=i(19670),a=i(68554),o=i(17466),l=i(41340),c=i(84488),u=i(58173),h=i(31530),d=i(97651);r("match",(function(t,e,i){return[function(e){var i=c(this),r=a(e)?void 0:u(e,t);return r?n(r,e,i):new RegExp(e)[t](l(i))},function(t){var n=s(this),r=l(t),a=i(e,n,r);if(a.done)return a.value;if(!n.global)return d(n,r);var c=n.unicode;n.lastIndex=0;for(var u,p=[],f=0;null!==(u=d(n,r));){var m=l(u[0]);p[f]=m,""===m&&(n.lastIndex=h(r,o(n.lastIndex),c)),f++}return 0===f?null:p}]}))},66528:(t,e,i)=>{"use strict";var n=i(82109),r=i(76650).end;n({target:"String",proto:!0,forced:i(54986)},{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},83112:(t,e,i)=>{"use strict";var n=i(82109),r=i(76650).start;n({target:"String",proto:!0,forced:i(54986)},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},38992:(t,e,i)=>{var n=i(82109),r=i(1702),s=i(45656),a=i(47908),o=i(41340),l=i(26244),c=r([].push),u=r([].join);n({target:"String",stat:!0},{raw:function(t){var e=s(a(t).raw),i=l(e);if(!i)return"";for(var n=arguments.length,r=[],h=0;;){if(c(r,o(e[h++])),h===i)return u(r,"");h<n&&c(r,o(arguments[h]))}}})},82481:(t,e,i)=>{i(82109)({target:"String",proto:!0},{repeat:i(38415)})},68757:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916),s=i(1702),a=i(84488),o=i(60614),l=i(68554),c=i(47850),u=i(41340),h=i(58173),d=i(34706),p=i(10647),f=i(5112),m=i(31913),g=f("replace"),y=TypeError,v=s("".indexOf),b=s("".replace),_=s("".slice),w=Math.max,T=function(t,e,i){return i>t.length?-1:""===e?i:v(t,e,i)};n({target:"String",proto:!0},{replaceAll:function(t,e){var i,n,s,f,S,x,k,C,E,I=a(this),P=0,A=0,L="";if(!l(t)){if((i=c(t))&&(n=u(a(d(t))),!~v(n,"g")))throw y("`.replaceAll` does not allow non-global regexes");if(s=h(t,g))return r(s,t,I,e);if(m&&i)return b(u(I),t,e)}for(f=u(I),S=u(t),(x=o(e))||(e=u(e)),k=S.length,C=w(1,k),P=T(f,S,0);-1!==P;)E=x?u(e(S,P,f)):p(S,f,P,[],void 0,e),L+=_(f,A,P)+E,A=P+k,P=T(f,S,P+C);return A<f.length&&(L+=_(f,A)),L}})},15306:(t,e,i)=>{"use strict";var n=i(22104),r=i(46916),s=i(1702),a=i(27007),o=i(47293),l=i(19670),c=i(60614),u=i(68554),h=i(19303),d=i(17466),p=i(41340),f=i(84488),m=i(31530),g=i(58173),y=i(10647),v=i(97651),b=i(5112)("replace"),_=Math.max,w=Math.min,T=s([].concat),S=s([].push),x=s("".indexOf),k=s("".slice),C="$0"==="a".replace(/./,"$0"),E=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(t,e,i){var s=E?"$":"$0";return[function(t,i){var n=f(this),s=u(t)?void 0:g(t,b);return s?r(s,t,n,i):r(e,p(n),t,i)},function(t,r){var a=l(this),o=p(t);if("string"==typeof r&&-1===x(r,s)&&-1===x(r,"$<")){var u=i(e,a,o,r);if(u.done)return u.value}var f=c(r);f||(r=p(r));var g=a.global;if(g){var b=a.unicode;a.lastIndex=0}for(var C=[];;){var E=v(a,o);if(null===E)break;if(S(C,E),!g)break;""===p(E[0])&&(a.lastIndex=m(o,d(a.lastIndex),b))}for(var I,P="",A=0,L=0;L<C.length;L++){for(var O=p((E=C[L])[0]),D=_(w(h(E.index),o.length),0),M=[],R=1;R<E.length;R++)S(M,void 0===(I=E[R])?I:String(I));var N=E.groups;if(f){var B=T([O],M,D,o);void 0!==N&&S(B,N);var F=p(n(r,void 0,B))}else F=y(O,o,D,M,N,r);D>=A&&(P+=k(o,A,D)+F,A=D+O.length)}return P+k(o,A)}]}),!!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!C||E)},64765:(t,e,i)=>{"use strict";var n=i(46916),r=i(27007),s=i(19670),a=i(68554),o=i(84488),l=i(81150),c=i(41340),u=i(58173),h=i(97651);r("search",(function(t,e,i){return[function(e){var i=o(this),r=a(e)?void 0:u(e,t);return r?n(r,e,i):new RegExp(e)[t](c(i))},function(t){var n=s(this),r=c(t),a=i(e,n,r);if(a.done)return a.value;var o=n.lastIndex;l(o,0)||(n.lastIndex=0);var u=h(n,r);return l(n.lastIndex,o)||(n.lastIndex=o),null===u?-1:u.index}]}))},37268:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("small")},{small:function(){return r(this,"small","","")}})},23123:(t,e,i)=>{"use strict";var n=i(22104),r=i(46916),s=i(1702),a=i(27007),o=i(19670),l=i(68554),c=i(47850),u=i(84488),h=i(36707),d=i(31530),p=i(17466),f=i(41340),m=i(58173),g=i(41589),y=i(97651),v=i(22261),b=i(52999),_=i(47293),w=b.UNSUPPORTED_Y,T=4294967295,S=Math.min,x=[].push,k=s(/./.exec),C=s(x),E=s("".slice);a("split",(function(t,e,i){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var s=f(u(this)),a=void 0===i?T:i>>>0;if(0===a)return[];if(void 0===t)return[s];if(!c(t))return r(e,s,t,a);for(var o,l,h,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,y=new RegExp(t.source,p+"g");(o=r(v,y,s))&&!((l=y.lastIndex)>m&&(C(d,E(s,m,o.index)),o.length>1&&o.index<s.length&&n(x,d,g(o,1)),h=o[0].length,m=l,d.length>=a));)y.lastIndex===o.index&&y.lastIndex++;return m===s.length?!h&&k(y,"")||C(d,""):C(d,E(s,m)),d.length>a?g(d,0,a):d}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:r(e,this,t,i)}:e,[function(e,i){var n=u(this),a=l(e)?void 0:m(e,t);return a?r(a,e,n,i):r(s,f(n),e,i)},function(t,n){var r=o(this),a=f(t),l=i(s,r,a,n,s!==e);if(l.done)return l.value;var c=h(r,RegExp),u=r.unicode,m=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(w?"g":"y"),g=new c(w?"^(?:"+r.source+")":r,m),v=void 0===n?T:n>>>0;if(0===v)return[];if(0===a.length)return null===y(g,a)?[a]:[];for(var b=0,_=0,x=[];_<a.length;){g.lastIndex=w?0:_;var k,I=y(g,w?E(a,_):a);if(null===I||(k=S(p(g.lastIndex+(w?_:0)),a.length))===b)_=d(a,_,u);else{if(C(x,E(a,b,_)),x.length===v)return x;for(var P=1;P<=I.length-1;P++)if(C(x,I[P]),x.length===v)return x;_=b=k}}return C(x,E(a,b)),x}]}),!!_((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]})),w)},23157:(t,e,i)=>{"use strict";var n,r=i(82109),s=i(21470),a=i(31236).f,o=i(17466),l=i(41340),c=i(3929),u=i(84488),h=i(84964),d=i(31913),p=s("".startsWith),f=s("".slice),m=Math.min,g=h("startsWith");r({target:"String",proto:!0,forced:!(!d&&!g&&(n=a(String.prototype,"startsWith"),n&&!n.writable)||g)},{startsWith:function(t){var e=l(u(this));c(t);var i=o(m(arguments.length>1?arguments[1]:void 0,e.length)),n=l(t);return p?p(e,n,i):f(e,i,i+n.length)===n}})},7397:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("strike")},{strike:function(){return r(this,"strike","","")}})},60086:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("sub")},{sub:function(){return r(this,"sub","","")}})},83650:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(84488),a=i(19303),o=i(41340),l=r("".slice),c=Math.max,u=Math.min;n({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(t,e){var i,n,r=o(s(this)),h=r.length,d=a(t);return d===1/0&&(d=0),d<0&&(d=c(h+d,0)),(i=void 0===e?h:a(e))<=0||i===1/0||d>=(n=u(d+i,h))?"":l(r,d,n)}})},80623:(t,e,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("sup")},{sup:function(){return r(this,"sup","","")}})},48702:(t,e,i)=>{i(83462);var n=i(82109),r=i(10365);n({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==r},{trimEnd:r})},99967:(t,e,i)=>{var n=i(82109),r=i(33217);n({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==r},{trimLeft:r})},83462:(t,e,i)=>{var n=i(82109),r=i(10365);n({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==r},{trimRight:r})},55674:(t,e,i)=>{i(99967);var n=i(82109),r=i(33217);n({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==r},{trimStart:r})},73210:(t,e,i)=>{"use strict";var n=i(82109),r=i(53111).trim;n({target:"String",proto:!0,forced:i(76091)("trim")},{trim:function(){return r(this)}})},72443:(t,e,i)=>{i(26800)("asyncIterator")},4032:(t,e,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(46916),a=i(1702),o=i(31913),l=i(19781),c=i(36293),u=i(47293),h=i(92597),d=i(47976),p=i(19670),f=i(45656),m=i(34948),g=i(41340),y=i(79114),v=i(70030),b=i(81956),_=i(8006),w=i(1156),T=i(25181),S=i(31236),x=i(3070),k=i(36048),C=i(55296),E=i(98052),I=i(47045),P=i(72309),A=i(6200),L=i(3501),O=i(69711),D=i(5112),M=i(6061),R=i(26800),N=i(56532),B=i(58003),F=i(29909),$=i(42092).forEach,U=A("hidden"),j="Symbol",V="prototype",H=F.set,q=F.getterFor(j),W=Object[V],z=r.Symbol,G=z&&z[V],K=r.TypeError,Y=r.QObject,X=S.f,Q=x.f,J=w.f,Z=C.f,tt=a([].push),et=P("symbols"),it=P("op-symbols"),nt=P("wks"),rt=!Y||!Y[V]||!Y[V].findChild,st=l&&u((function(){return 7!=v(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=X(W,e);n&&delete W[e],Q(t,e,i),n&&t!==W&&Q(W,e,n)}:Q,at=function(t,e){var i=et[t]=v(G);return H(i,{type:j,tag:t,description:e}),l||(i.description=e),i},ot=function(t,e,i){t===W&&ot(it,e,i),p(t);var n=m(e);return p(i),h(et,n)?(i.enumerable?(h(t,U)&&t[U][n]&&(t[U][n]=!1),i=v(i,{enumerable:y(0,!1)})):(h(t,U)||Q(t,U,y(1,{})),t[U][n]=!0),st(t,n,i)):Q(t,n,i)},lt=function(t,e){p(t);var i=f(e),n=b(i).concat(dt(i));return $(n,(function(e){l&&!s(ct,i,e)||ot(t,e,i[e])})),t},ct=function(t){var e=m(t),i=s(Z,this,e);return!(this===W&&h(et,e)&&!h(it,e))&&(!(i||!h(this,e)||!h(et,e)||h(this,U)&&this[U][e])||i)},ut=function(t,e){var i=f(t),n=m(e);if(i!==W||!h(et,n)||h(it,n)){var r=X(i,n);return!r||!h(et,n)||h(i,U)&&i[U][n]||(r.enumerable=!0),r}},ht=function(t){var e=J(f(t)),i=[];return $(e,(function(t){h(et,t)||h(L,t)||tt(i,t)})),i},dt=function(t){var e=t===W,i=J(e?it:f(t)),n=[];return $(i,(function(t){!h(et,t)||e&&!h(W,t)||tt(n,et[t])})),n};c||(E(G=(z=function(){if(d(G,this))throw K("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,e=O(t),i=function(t){this===W&&s(i,it,t),h(this,U)&&h(this[U],e)&&(this[U][e]=!1),st(this,e,y(1,t))};return l&&rt&&st(W,e,{configurable:!0,set:i}),at(e,t)})[V],"toString",(function(){return q(this).tag})),E(z,"withoutSetter",(function(t){return at(O(t),t)})),C.f=ct,x.f=ot,k.f=lt,S.f=ut,_.f=w.f=ht,T.f=dt,M.f=function(t){return at(D(t),t)},l&&(I(G,"description",{configurable:!0,get:function(){return q(this).description}}),o||E(W,"propertyIsEnumerable",ct,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:z}),$(b(nt),(function(t){R(t)})),n({target:j,stat:!0,forced:!c},{useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(t,e){return void 0===e?v(t):lt(v(t),e)},defineProperty:ot,defineProperties:lt,getOwnPropertyDescriptor:ut}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ht}),N(),B(z,j),L[U]=!0},41817:(t,e,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(17854),a=i(1702),o=i(92597),l=i(60614),c=i(47976),u=i(41340),h=i(47045),d=i(99920),p=s.Symbol,f=p&&p.prototype;if(r&&l(p)&&(!("description"in f)||void 0!==p().description)){var m={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=c(f,this)?new p(t):void 0===t?p():p(t);return""===t&&(m[e]=!0),e};d(g,p),g.prototype=f,f.constructor=g;var y="Symbol(test)"==String(p("test")),v=a(f.valueOf),b=a(f.toString),_=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),T=a("".slice);h(f,"description",{configurable:!0,get:function(){var t=v(this);if(o(m,t))return"";var e=b(t),i=y?T(e,7,-1):w(e,_,"$1");return""===i?void 0:i}}),n({global:!0,constructor:!0,forced:!0},{Symbol:g})}},40763:(t,e,i)=>{var n=i(82109),r=i(35005),s=i(92597),a=i(41340),o=i(72309),l=i(2015),c=o("string-to-symbol-registry"),u=o("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!l},{for:function(t){var e=a(t);if(s(c,e))return c[e];var i=r("Symbol")(e);return c[e]=i,u[i]=e,i}})},92401:(t,e,i)=>{i(26800)("hasInstance")},8722:(t,e,i)=>{i(26800)("isConcatSpreadable")},32165:(t,e,i)=>{i(26800)("iterator")},82526:(t,e,i)=>{i(4032),i(40763),i(26620),i(38862),i(29660)},26620:(t,e,i)=>{var n=i(82109),r=i(92597),s=i(52190),a=i(66330),o=i(72309),l=i(2015),c=o("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!l},{keyFor:function(t){if(!s(t))throw TypeError(a(t)+" is not a symbol");if(r(c,t))return c[t]}})},16066:(t,e,i)=>{i(26800)("matchAll")},69007:(t,e,i)=>{i(26800)("match")},83510:(t,e,i)=>{i(26800)("replace")},41840:(t,e,i)=>{i(26800)("search")},6982:(t,e,i)=>{i(26800)("species")},32159:(t,e,i)=>{i(26800)("split")},96649:(t,e,i)=>{var n=i(26800),r=i(56532);n("toPrimitive"),r()},39341:(t,e,i)=>{var n=i(35005),r=i(26800),s=i(58003);r("toStringTag"),s(n("Symbol"),"Symbol")},60543:(t,e,i)=>{i(26800)("unscopables")},48675:(t,e,i)=>{"use strict";var n=i(90260),r=i(26244),s=i(19303),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(t){var e=a(this),i=r(e),n=s(t),o=n>=0?n:i+n;return o<0||o>=i?void 0:e[o]}))},92990:(t,e,i)=>{"use strict";var n=i(1702),r=i(90260),s=n(i(1048)),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return s(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},18927:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).every,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},33105:(t,e,i)=>{"use strict";var n=i(90260),r=i(21285),s=i(64599),a=i(70648),o=i(46916),l=i(1702),c=i(47293),u=n.aTypedArray,h=n.exportTypedArrayMethod,d=l("".slice);h("fill",(function(t){var e=arguments.length;u(this);var i="Big"===d(a(this),0,3)?s(t):+t;return o(r,this,i,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),c((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})))},35035:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).filter,s=i(43074),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("filter",(function(t){var e=r(a(this),t,arguments.length>1?arguments[1]:void 0);return s(this,e)}))},7174:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).findIndex,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},14590:(t,e,i)=>{"use strict";var n=i(90260),r=i(9671).findLastIndex,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},63408:(t,e,i)=>{"use strict";var n=i(90260),r=i(9671).findLast,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},74345:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).find,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},44197:(t,e,i)=>{i(19843)("Float32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},76495:(t,e,i)=>{i(19843)("Float64",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},32846:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).forEach,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",(function(t){r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},98145:(t,e,i)=>{"use strict";var n=i(63832);(0,i(90260).exportTypedArrayStaticMethod)("from",i(97321),n)},44731:(t,e,i)=>{"use strict";var n=i(90260),r=i(41318).includes,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},77209:(t,e,i)=>{"use strict";var n=i(90260),r=i(41318).indexOf,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},35109:(t,e,i)=>{i(19843)("Int16",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},65125:(t,e,i)=>{i(19843)("Int32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},87145:(t,e,i)=>{i(19843)("Int8",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},96319:(t,e,i)=>{"use strict";var n=i(17854),r=i(47293),s=i(1702),a=i(90260),o=i(66992),l=i(5112)("iterator"),c=n.Uint8Array,u=s(o.values),h=s(o.keys),d=s(o.entries),p=a.aTypedArray,f=a.exportTypedArrayMethod,m=c&&c.prototype,g=!r((function(){m[l].call([1])})),y=!!m&&m.values&&m[l]===m.values&&"values"===m.values.name,v=function(){return u(p(this))};f("entries",(function(){return d(p(this))}),g),f("keys",(function(){return h(p(this))}),g),f("values",v,g||!y,{name:"values"}),f(l,v,g||!y,{name:"values"})},58867:(t,e,i)=>{"use strict";var n=i(90260),r=i(1702),s=n.aTypedArray,a=n.exportTypedArrayMethod,o=r([].join);a("join",(function(t){return o(s(this),t)}))},37789:(t,e,i)=>{"use strict";var n=i(90260),r=i(22104),s=i(86583),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return r(s,a(this),e>1?[t,arguments[1]]:[t])}))},33739:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).map,s=i(66304),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("map",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(t))(e)}))}))},95206:(t,e,i)=>{"use strict";var n=i(90260),r=i(63832),s=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,i=new(s(this))(e);e>t;)i[t]=arguments[t++];return i}),r)},14483:(t,e,i)=>{"use strict";var n=i(90260),r=i(53671).right,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return r(s(this),t,e,e>1?arguments[1]:void 0)}))},29368:(t,e,i)=>{"use strict";var n=i(90260),r=i(53671).left,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return r(s(this),t,e,e>1?arguments[1]:void 0)}))},12056:(t,e,i)=>{"use strict";var n=i(90260),r=n.aTypedArray,s=n.exportTypedArrayMethod,a=Math.floor;s("reverse",(function(){for(var t,e=this,i=r(e).length,n=a(i/2),s=0;s<n;)t=e[s],e[s++]=e[--i],e[i]=t;return e}))},3462:(t,e,i)=>{"use strict";var n=i(17854),r=i(46916),s=i(90260),a=i(26244),o=i(84590),l=i(47908),c=i(47293),u=n.RangeError,h=n.Int8Array,d=h&&h.prototype,p=d&&d.set,f=s.aTypedArray,m=s.exportTypedArrayMethod,g=!c((function(){var t=new Uint8ClampedArray(2);return r(p,t,{length:1,0:3},1),3!==t[1]})),y=g&&s.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));m("set",(function(t){f(this);var e=o(arguments.length>1?arguments[1]:void 0,1),i=l(t);if(g)return r(p,this,i,e);var n=this.length,s=a(i),c=0;if(s+e>n)throw u("Wrong length");for(;c<s;)this[e+c]=i[c++]}),!g||y)},30678:(t,e,i)=>{"use strict";var n=i(90260),r=i(66304),s=i(47293),a=i(50206),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("slice",(function(t,e){for(var i=a(o(this),t,e),n=r(this),s=0,l=i.length,c=new n(l);l>s;)c[s]=i[s++];return c}),s((function(){new Int8Array(1).slice()})))},27462:(t,e,i)=>{"use strict";var n=i(90260),r=i(42092).some,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0)}))},33824:(t,e,i)=>{"use strict";var n=i(17854),r=i(21470),s=i(47293),a=i(19662),o=i(94362),l=i(90260),c=i(68886),u=i(30256),h=i(7392),d=i(98008),p=l.aTypedArray,f=l.exportTypedArrayMethod,m=n.Uint16Array,g=m&&r(m.prototype.sort),y=!(!g||s((function(){g(new m(2),null)}))&&s((function(){g(new m(2),{})}))),v=!!g&&!s((function(){if(h)return h<74;if(c)return c<67;if(u)return!0;if(d)return d<602;var t,e,i=new m(516),n=Array(516);for(t=0;t<516;t++)e=t%4,i[t]=515-t,n[t]=t-2*e+3;for(g(i,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(i[t]!==n[t])return!0}));f("sort",(function(t){return void 0!==t&&a(t),v?g(this,t):o(p(this),function(t){return function(e,i){return void 0!==t?+t(e,i)||0:i!=i?-1:e!=e?1:0===e&&0===i?1/e>0&&1/i<0?1:-1:e>i}}(t))}),!v||y)},55021:(t,e,i)=>{"use strict";var n=i(90260),r=i(17466),s=i(51400),a=i(66304),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",(function(t,e){var i=o(this),n=i.length,l=s(t,n);return new(a(i))(i.buffer,i.byteOffset+l*i.BYTES_PER_ELEMENT,r((void 0===e?n:s(e,n))-l))}))},12974:(t,e,i)=>{"use strict";var n=i(17854),r=i(22104),s=i(90260),a=i(47293),o=i(50206),l=n.Int8Array,c=s.aTypedArray,u=s.exportTypedArrayMethod,h=[].toLocaleString,d=!!l&&a((function(){h.call(new l(1))}));u("toLocaleString",(function(){return r(h,d?o(c(this)):c(this),o(arguments))}),a((function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()}))||!a((function(){l.prototype.toLocaleString.call([1,2])})))},1439:(t,e,i)=>{"use strict";var n=i(21843),r=i(90260),s=r.aTypedArray,a=r.exportTypedArrayMethod,o=r.getTypedArrayConstructor;a("toReversed",(function(){return n(s(this),o(this))}))},87585:(t,e,i)=>{"use strict";var n=i(90260),r=i(1702),s=i(19662),a=i(97745),o=n.aTypedArray,l=n.getTypedArrayConstructor,c=n.exportTypedArrayMethod,u=r(n.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&s(t);var e=o(this),i=a(l(e),e);return u(i,t)}))},15016:(t,e,i)=>{"use strict";var n=i(90260).exportTypedArrayMethod,r=i(47293),s=i(17854),a=i(1702),o=s.Uint8Array,l=o&&o.prototype||{},c=[].toString,u=a([].join);r((function(){c.call({})}))&&(c=function(){return u(this)});var h=l.toString!=c;n("toString",c,h)},8255:(t,e,i)=>{i(19843)("Uint16",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},29135:(t,e,i)=>{i(19843)("Uint32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},82472:(t,e,i)=>{i(19843)("Uint8",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},49743:(t,e,i)=>{i(19843)("Uint8",(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0)},55315:(t,e,i)=>{"use strict";var n=i(11572),r=i(90260),s=i(44067),a=i(19303),o=i(64599),l=r.aTypedArray,c=r.getTypedArrayConstructor,u=r.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var i=l(this),r=a(t),u=s(i)?o(e):+e;return n(i,c(i),r,u)}}.with,!h)},78221:(t,e,i)=>{"use strict";var n=i(82109),r=i(1702),s=i(41340),a=String.fromCharCode,o=r("".charAt),l=r(/./.exec),c=r("".slice),u=/^[\da-f]{2}$/i,h=/^[\da-f]{4}$/i;n({global:!0},{unescape:function(t){for(var e,i,n=s(t),r="",d=n.length,p=0;p<d;){if("%"===(e=o(n,p++)))if("u"===o(n,p)){if(i=c(n,p+1,p+5),l(h,i)){r+=a(parseInt(i,16)),p+=5;continue}}else if(i=c(n,p,p+2),l(u,i)){r+=a(parseInt(i,16)),p+=2;continue}r+=e}return r}})},41202:(t,e,i)=>{"use strict";var n,r=i(76677),s=i(17854),a=i(1702),o=i(89190),l=i(62423),c=i(77710),u=i(29320),h=i(70111),d=i(29909).enforce,p=i(47293),f=i(94811),m=Object,g=Array.isArray,y=m.isExtensible,v=m.isFrozen,b=m.isSealed,_=m.freeze,w=m.seal,T={},S={},x=!s.ActiveXObject&&"ActiveXObject"in s,k=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},C=c("WeakMap",k,u),E=C.prototype,I=a(E.set);if(f)if(x){n=u.getConstructor(k,"WeakMap",!0),l.enable();var P=a(E.delete),A=a(E.has),L=a(E.get);o(E,{delete:function(t){if(h(t)&&!y(t)){var e=d(this);return e.frozen||(e.frozen=new n),P(this,t)||e.frozen.delete(t)}return P(this,t)},has:function(t){if(h(t)&&!y(t)){var e=d(this);return e.frozen||(e.frozen=new n),A(this,t)||e.frozen.has(t)}return A(this,t)},get:function(t){if(h(t)&&!y(t)){var e=d(this);return e.frozen||(e.frozen=new n),A(this,t)?L(this,t):e.frozen.get(t)}return L(this,t)},set:function(t,e){if(h(t)&&!y(t)){var i=d(this);i.frozen||(i.frozen=new n),A(this,t)?I(this,t,e):i.frozen.set(t,e)}else I(this,t,e);return this}})}else r&&p((function(){var t=_([]);return I(new C,t,1),!v(t)}))&&o(E,{set:function(t,e){var i;return g(t)&&(v(t)?i=T:b(t)&&(i=S)),I(this,t,e),i==T&&_(t),i==S&&w(t),this}})},4129:(t,e,i)=>{i(41202)},72098:(t,e,i)=>{"use strict";i(77710)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(29320))},38478:(t,e,i)=>{i(72098)},75505:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(35005),a=i(1702),o=i(46916),l=i(47293),c=i(41340),u=i(92597),h=i(48053),d=i(14170).ctoi,p=/[^\d+/a-z]/i,f=/[\t\n\f\r ]+/g,m=/[=]{1,2}$/,g=s("atob"),y=String.fromCharCode,v=a("".charAt),b=a("".replace),_=a(p.exec),w=l((function(){return""!==g(" ")})),T=!l((function(){g("a")})),S=!w&&!T&&!l((function(){g()})),x=!w&&!T&&1!==g.length;n({global:!0,bind:!0,enumerable:!0,forced:w||T||S||x},{atob:function(t){if(h(arguments.length,1),S||x)return o(g,r,t);var e,i,n=b(c(t),f,""),a="",l=0,w=0;if(n.length%4==0&&(n=b(n,m,"")),n.length%4==1||_(p,n))throw new(s("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;e=v(n,l++);)u(d,e)&&(i=w%4?64*i+d[e]:d[e],w++%4&&(a+=y(255&i>>(-2*w&6))));return a}})},27479:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(35005),a=i(1702),o=i(46916),l=i(47293),c=i(41340),u=i(48053),h=i(14170).itoc,d=s("btoa"),p=a("".charAt),f=a("".charCodeAt),m=!!d&&!l((function(){d()})),g=!!d&&l((function(){return"bnVsbA=="!==d(null)})),y=!!d&&1!==d.length;n({global:!0,bind:!0,enumerable:!0,forced:m||g||y},{btoa:function(t){if(u(arguments.length,1),m||g||y)return o(d,r,c(t));for(var e,i,n=c(t),a="",l=0,v=h;p(n,l)||(v="=",l%1);){if((i=f(n,l+=3/4))>255)throw new(s("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a+=p(v,63&(e=e<<8|i)>>8-l%1*8)}return a}})},11091:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(20261).clear;n({global:!0,bind:!0,enumerable:!0,forced:r.clearImmediate!==s},{clearImmediate:s})},54747:(t,e,i)=>{var n=i(17854),r=i(48324),s=i(98509),a=i(18533),o=i(68880),l=function(t){if(t&&t.forEach!==a)try{o(t,"forEach",a)}catch(e){t.forEach=a}};for(var c in r)r[c]&&l(n[c]&&n[c].prototype);l(s)},33948:(t,e,i)=>{var n=i(17854),r=i(48324),s=i(98509),a=i(66992),o=i(68880),l=i(5112),c=l("iterator"),u=l("toStringTag"),h=a.values,d=function(t,e){if(t){if(t[c]!==h)try{o(t,c,h)}catch(e){t[c]=h}if(t[u]||o(t,u,e),r[e])for(var i in a)if(t[i]!==a[i])try{o(t,i,a[i])}catch(e){t[i]=a[i]}}};for(var p in r)d(n[p]&&n[p].prototype,p);d(s,"DOMTokenList")},87714:(t,e,i)=>{"use strict";var n=i(82109),r=i(44038),s=i(35005),a=i(47293),o=i(70030),l=i(79114),c=i(3070).f,u=i(98052),h=i(47045),d=i(92597),p=i(25787),f=i(19670),m=i(7762),g=i(56277),y=i(93678),v=i(11060),b=i(29909),_=i(19781),w=i(31913),T="DOMException",S="DATA_CLONE_ERR",x=s("Error"),k=s(T)||function(){try{(new(s("MessageChannel")||r("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(t){if(t.name==S&&25==t.code)return t.constructor}}(),C=k&&k.prototype,E=x.prototype,I=b.set,P=b.getterFor(T),A="stack"in x(T),L=function(t){return d(y,t)&&y[t].m?y[t].c:0},O=function(){p(this,D);var t=arguments.length,e=g(t<1?void 0:arguments[0]),i=g(t<2?void 0:arguments[1],"Error"),n=L(i);if(I(this,{type:T,name:i,message:e,code:n}),_||(this.name=i,this.message=e,this.code=n),A){var r=x(e);r.name=T,c(this,"stack",l(1,v(r.stack,1)))}},D=O.prototype=o(E),M=function(t){return{enumerable:!0,configurable:!0,get:t}},R=function(t){return M((function(){return P(this)[t]}))};_&&(h(D,"code",R("code")),h(D,"message",R("message")),h(D,"name",R("name"))),c(D,"constructor",l(1,O));var N=a((function(){return!(new k instanceof x)})),B=N||a((function(){return E.toString!==m||"2: 1"!==String(new k(1,2))})),F=N||a((function(){return 25!==new k(1,"DataCloneError").code})),$=N||25!==k[S]||25!==C[S],U=w?B||F||$:N;n({global:!0,constructor:!0,forced:U},{DOMException:U?O:k});var j=s(T),V=j.prototype;for(var H in B&&(w||k===j)&&u(V,"toString",m),F&&_&&k===j&&h(V,"code",M((function(){return L(f(this).name)}))),y)if(d(y,H)){var q=y[H],W=q.s,z=l(6,q.c);d(j,W)||c(j,W,z),d(V,W)||c(V,W,z)}},82801:(t,e,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(35005),a=i(79114),o=i(3070).f,l=i(92597),c=i(25787),u=i(79587),h=i(56277),d=i(93678),p=i(11060),f=i(19781),m=i(31913),g="DOMException",y=s("Error"),v=s(g),b=function(){c(this,_);var t=arguments.length,e=h(t<1?void 0:arguments[0]),i=h(t<2?void 0:arguments[1],"Error"),n=new v(e,i),r=y(e);return r.name=g,o(n,"stack",a(1,p(r.stack,1))),u(n,this,b),n},_=b.prototype=v.prototype,w="stack"in y(g),T="stack"in new v(1,2),S=v&&f&&Object.getOwnPropertyDescriptor(r,g),x=!(!S||S.writable&&S.configurable),k=w&&!x&&!T;n({global:!0,constructor:!0,forced:m||k},{DOMException:k?b:v});var C=s(g),E=C.prototype;if(E.constructor!==C)for(var I in m||o(E,"constructor",a(1,C)),d)if(l(d,I)){var P=d[I],A=P.s;l(C,A)||o(C,A,a(6,P.c))}},1174:(t,e,i)=>{var n=i(35005),r="DOMException";i(58003)(n(r),r)},84633:(t,e,i)=>{i(11091),i(12986)},85844:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(95948),a=i(19662),o=i(48053),l=i(35268),c=r.process;n({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){o(arguments.length,1),a(t);var e=l&&c.domain;s(e?e.bind(t):t)}})},71550:(t,e,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(47045),a=i(19781),o=TypeError,l=Object.defineProperty,c=r.self!==r;try{if(a){var u=Object.getOwnPropertyDescriptor(r,"self");!c&&u&&u.get&&u.enumerable||s(r,"self",{get:function(){return r},set:function(t){if(this!==r)throw o("Illegal invocation");l(r,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:c},{self:r})}catch(t){}},12986:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(20261).set,a=i(17152),o=r.setImmediate?a(s,!1):s;n({global:!0,bind:!0,enumerable:!0,forced:r.setImmediate!==o},{setImmediate:o})},96815:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(17152)(r.setInterval,!0);n({global:!0,bind:!0,forced:r.setInterval!==s},{setInterval:s})},88417:(t,e,i)=>{var n=i(82109),r=i(17854),s=i(17152)(r.setTimeout,!0);n({global:!0,bind:!0,forced:r.setTimeout!==s},{setTimeout:s})},61295:(t,e,i)=>{var n,r=i(31913),s=i(82109),a=i(17854),o=i(35005),l=i(1702),c=i(47293),u=i(69711),h=i(60614),d=i(4411),p=i(68554),f=i(70111),m=i(52190),g=i(20408),y=i(19670),v=i(70648),b=i(92597),_=i(86135),w=i(68880),T=i(26244),S=i(48053),x=i(34706),k=i(75706),C=i(79405),E=i(22914),I=i(64124),P=a.Object,A=a.Array,L=a.Date,O=a.Error,D=a.EvalError,M=a.RangeError,R=a.ReferenceError,N=a.SyntaxError,B=a.TypeError,F=a.URIError,$=a.PerformanceMark,U=a.WebAssembly,j=U&&U.CompileError||O,V=U&&U.LinkError||O,H=U&&U.RuntimeError||O,q=o("DOMException"),W=k.Map,z=k.has,G=k.get,K=k.set,Y=C.Set,X=C.add,Q=o("Object","keys"),J=l([].push),Z=l((!0).valueOf),tt=l(1..valueOf),et=l("".valueOf),it=l(L.prototype.getTime),nt=u("structuredClone"),rt="DataCloneError",st="Transferring",at=function(t){return!c((function(){var e=new a.Set([7]),i=t(e),n=t(P(7));return i==e||!i.has(7)||"object"!=typeof n||7!=n}))&&t},ot=function(t,e){return!c((function(){var i=new e,n=t({a:i,b:i});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===i.stack)}))},lt=a.structuredClone,ct=r||!ot(lt,O)||!ot(lt,q)||(n=lt,!!c((function(){var t=n(new a.AggregateError([1],nt,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=nt||3!=t.cause}))),ut=!lt&&at((function(t){return new $(nt,{detail:t}).detail})),ht=at(lt)||ut,dt=function(t){throw new q("Uncloneable type: "+t,rt)},pt=function(t,e){throw new q((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",rt)},ft=function(t,e){if(m(t)&&dt("Symbol"),!f(t))return t;if(e){if(z(e,t))return G(e,t)}else e=new W;var i,n,r,s,l,c,u,d,p,g,y,S=v(t),k=!1;switch(S){case"Array":r=A(T(t)),k=!0;break;case"Object":r={},k=!0;break;case"Map":r=new W,k=!0;break;case"Set":r=new Y,k=!0;break;case"RegExp":r=new RegExp(t.source,x(t));break;case"Error":switch(n=t.name){case"AggregateError":r=o("AggregateError")([]);break;case"EvalError":r=D();break;case"RangeError":r=M();break;case"ReferenceError":r=R();break;case"SyntaxError":r=N();break;case"TypeError":r=B();break;case"URIError":r=F();break;case"CompileError":r=j();break;case"LinkError":r=V();break;case"RuntimeError":r=H();break;default:r=O()}k=!0;break;case"DOMException":r=new q(t.message,t.name),k=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=a[S],f(i)||pt(S),r=new i(ft(t.buffer,e),t.byteOffset,"DataView"===S?t.byteLength:t.length);break;case"DOMQuad":try{r=new DOMQuad(ft(t.p1,e),ft(t.p2,e),ft(t.p3,e),ft(t.p4,e))}catch(e){ht?r=ht(t):pt(S)}break;case"FileList":if(s=function(){var t;try{t=new a.DataTransfer}catch(e){try{t=new a.ClipboardEvent("").clipboardData}catch(t){}}return t&&t.items&&t.files?t:null}()){for(l=0,c=T(t);l<c;l++)s.items.add(ft(t[l],e));r=s.files}else ht?r=ht(t):pt(S);break;case"ImageData":try{r=new ImageData(ft(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(e){ht?r=ht(t):pt(S)}break;default:if(ht)r=ht(t);else switch(S){case"BigInt":r=P(t.valueOf());break;case"Boolean":r=P(Z(t));break;case"Number":r=P(tt(t));break;case"String":r=P(et(t));break;case"Date":r=new L(it(t));break;case"ArrayBuffer":(i=a.DataView)||"function"==typeof t.slice||pt(S);try{if("function"!=typeof t.slice||t.resizable){c=t.byteLength,y="maxByteLength"in t?{maxByteLength:t.maxByteLength}:void 0,r=new ArrayBuffer(c,y),p=new i(t),g=new i(r);for(l=0;l<c;l++)g.setUint8(l,p.getUint8(l))}else r=t.slice(0)}catch(t){throw new q("ArrayBuffer is detached",rt)}break;case"SharedArrayBuffer":r=t;break;case"Blob":try{r=t.slice(0,t.size,t.type)}catch(t){pt(S)}break;case"DOMPoint":case"DOMPointReadOnly":i=a[S];try{r=i.fromPoint?i.fromPoint(t):new i(t.x,t.y,t.z,t.w)}catch(t){pt(S)}break;case"DOMRect":case"DOMRectReadOnly":i=a[S];try{r=i.fromRect?i.fromRect(t):new i(t.x,t.y,t.width,t.height)}catch(t){pt(S)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=a[S];try{r=i.fromMatrix?i.fromMatrix(t):new i(t)}catch(t){pt(S)}break;case"AudioData":case"VideoFrame":h(t.clone)||pt(S);try{r=t.clone()}catch(t){dt(S)}break;case"File":try{r=new File([t],t.name,t)}catch(t){pt(S)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":pt(S);default:dt(S)}}if(K(e,t,r),k)switch(S){case"Array":case"Object":for(u=Q(t),l=0,c=T(u);l<c;l++)d=u[l],_(r,d,ft(t[d],e));break;case"Map":t.forEach((function(t,i){K(r,ft(i,e),ft(t,e))}));break;case"Set":t.forEach((function(t){X(r,ft(t,e))}));break;case"Error":w(r,"message",ft(t.message,e)),b(t,"cause")&&w(r,"cause",ft(t.cause,e)),"AggregateError"==n&&(r.errors=ft(t.errors,e));case"DOMException":E&&w(r,"stack",ft(t.stack,e))}return r},mt=function(t,e){if(!f(t))throw B("Transfer option cannot be converted to a sequence");var i=[];g(t,(function(t){J(i,y(t))}));var n,r,s,o,l,c,u=0,p=T(i);if(I)for(o=lt(i,{transfer:i});u<p;)K(e,i[u],o[u++]);else for(;u<p;){if(n=i[u++],z(e,n))throw new q("Duplicate transferable",rt);switch(r=v(n)){case"ImageBitmap":s=a.OffscreenCanvas,d(s)||pt(r,st);try{(c=new s(n.width,n.height)).getContext("bitmaprenderer").transferFromImageBitmap(n),l=c.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":h(n.clone)&&h(n.close)||pt(r,st);try{l=n.clone(),n.close()}catch(t){}break;case"ArrayBuffer":h(n.transfer)||pt(r,st),l=n.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":pt(r,st)}if(void 0===l)throw new q("This object cannot be transferred: "+r,rt);K(e,n,l)}};s({global:!0,enumerable:!0,sham:!I,forced:ct},{structuredClone:function(t){var e,i=S(arguments.length,1)>1&&!p(arguments[1])?y(arguments[1]):void 0,n=i?i.transfer:void 0;return void 0!==n&&(e=new W,mt(n,e)),ft(t,e)}})},32564:(t,e,i)=>{i(96815),i(88417)},65556:(t,e,i)=>{"use strict";i(66992);var n=i(82109),r=i(17854),s=i(46916),a=i(1702),o=i(19781),l=i(85143),c=i(98052),u=i(47045),h=i(89190),d=i(58003),p=i(63061),f=i(29909),m=i(25787),g=i(60614),y=i(92597),v=i(49974),b=i(70648),_=i(19670),w=i(70111),T=i(41340),S=i(70030),x=i(79114),k=i(18554),C=i(71246),E=i(48053),I=i(5112),P=i(94362),A=I("iterator"),L="URLSearchParams",O=L+"Iterator",D=f.set,M=f.getterFor(L),R=f.getterFor(O),N=Object.getOwnPropertyDescriptor,B=function(t){if(!o)return r[t];var e=N(r,t);return e&&e.value},F=B("fetch"),$=B("Request"),U=B("Headers"),j=$&&$.prototype,V=U&&U.prototype,H=r.RegExp,q=r.TypeError,W=r.decodeURIComponent,z=r.encodeURIComponent,G=a("".charAt),K=a([].join),Y=a([].push),X=a("".replace),Q=a([].shift),J=a([].splice),Z=a("".split),tt=a("".slice),et=/\+/g,it=Array(4),nt=function(t){return it[t-1]||(it[t-1]=H("((?:%[\\da-f]{2}){"+t+"})","gi"))},rt=function(t){try{return W(t)}catch(e){return t}},st=function(t){var e=X(t,et," "),i=4;try{return W(e)}catch(t){for(;i;)e=X(e,nt(i--),rt);return e}},at=/[!'()~]|%20/g,ot={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},lt=function(t){return ot[t]},ct=function(t){return X(z(t),at,lt)},ut=p((function(t,e){D(this,{type:O,iterator:k(M(t).entries),kind:e})}),"Iterator",(function(){var t=R(this),e=t.kind,i=t.iterator.next(),n=i.value;return i.done||(i.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),i}),!0),ht=function(t){this.entries=[],this.url=null,void 0!==t&&(w(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===G(t,0)?tt(t,1):t:T(t)))};ht.prototype={type:L,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,i,n,r,a,o,l,c=C(t);if(c)for(i=(e=k(t,c)).next;!(n=s(i,e)).done;){if(a=(r=k(_(n.value))).next,(o=s(a,r)).done||(l=s(a,r)).done||!s(a,r).done)throw q("Expected sequence with length 2");Y(this.entries,{key:T(o.value),value:T(l.value)})}else for(var u in t)y(t,u)&&Y(this.entries,{key:u,value:T(t[u])})},parseQuery:function(t){if(t)for(var e,i,n=Z(t,"&"),r=0;r<n.length;)(e=n[r++]).length&&(i=Z(e,"="),Y(this.entries,{key:st(Q(i)),value:st(K(i,"="))}))},serialize:function(){for(var t,e=this.entries,i=[],n=0;n<e.length;)t=e[n++],Y(i,ct(t.key)+"="+ct(t.value));return K(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var dt=function(){m(this,pt);var t=D(this,new ht(arguments.length>0?arguments[0]:void 0));o||(this.length=t.entries.length)},pt=dt.prototype;if(h(pt,{append:function(t,e){E(arguments.length,2);var i=M(this);Y(i.entries,{key:T(t),value:T(e)}),o||this.length++,i.updateURL()},delete:function(t){E(arguments.length,1);for(var e=M(this),i=e.entries,n=T(t),r=0;r<i.length;)i[r].key===n?J(i,r,1):r++;o||(this.length=i.length),e.updateURL()},get:function(t){E(arguments.length,1);for(var e=M(this).entries,i=T(t),n=0;n<e.length;n++)if(e[n].key===i)return e[n].value;return null},getAll:function(t){E(arguments.length,1);for(var e=M(this).entries,i=T(t),n=[],r=0;r<e.length;r++)e[r].key===i&&Y(n,e[r].value);return n},has:function(t){E(arguments.length,1);for(var e=M(this).entries,i=T(t),n=0;n<e.length;)if(e[n++].key===i)return!0;return!1},set:function(t,e){E(arguments.length,1);for(var i,n=M(this),r=n.entries,s=!1,a=T(t),l=T(e),c=0;c<r.length;c++)(i=r[c]).key===a&&(s?J(r,c--,1):(s=!0,i.value=l));s||Y(r,{key:a,value:l}),o||(this.length=r.length),n.updateURL()},sort:function(){var t=M(this);P(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,i=M(this).entries,n=v(t,arguments.length>1?arguments[1]:void 0),r=0;r<i.length;)n((e=i[r++]).value,e.key,this)},keys:function(){return new ut(this,"keys")},values:function(){return new ut(this,"values")},entries:function(){return new ut(this,"entries")}},{enumerable:!0}),c(pt,A,pt.entries,{name:"entries"}),c(pt,"toString",(function(){return M(this).serialize()}),{enumerable:!0}),o&&u(pt,"size",{get:function(){return M(this).entries.length},configurable:!0,enumerable:!0}),d(dt,L),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:dt}),!l&&g(U)){var ft=a(V.has),mt=a(V.set),gt=function(t){if(w(t)){var e,i=t.body;if(b(i)===L)return e=t.headers?new U(t.headers):new U,ft(e,"content-type")||mt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(t,{body:x(0,T(i)),headers:x(0,e)})}return t};if(g(F)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return F(t,arguments.length>1?gt(arguments[1]):{})}}),g($)){var yt=function(t){return m(this,j),new $(t,arguments.length>1?gt(arguments[1]):{})};j.constructor=yt,yt.prototype=j,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:yt})}}t.exports={URLSearchParams:dt,getState:M}},41637:(t,e,i)=>{i(65556)},62062:(t,e,i)=>{"use strict";var n=i(19781),r=i(1702),s=i(47045),a=URLSearchParams.prototype,o=r(a.forEach);n&&!("size"in a)&&s(a,"size",{get:function(){var t=0;return o(this,(function(){t++})),t},configurable:!0,enumerable:!0})},68789:(t,e,i)=>{"use strict";i(78783);var n,r=i(82109),s=i(19781),a=i(85143),o=i(17854),l=i(49974),c=i(1702),u=i(98052),h=i(47045),d=i(25787),p=i(92597),f=i(21574),m=i(48457),g=i(41589),y=i(28710).codeAt,v=i(33197),b=i(41340),_=i(58003),w=i(48053),T=i(65556),S=i(29909),x=S.set,k=S.getterFor("URL"),C=T.URLSearchParams,E=T.getState,I=o.URL,P=o.TypeError,A=o.parseInt,L=Math.floor,O=Math.pow,D=c("".charAt),M=c(/./.exec),R=c([].join),N=c(1..toString),B=c([].pop),F=c([].push),$=c("".replace),U=c([].shift),j=c("".split),V=c("".slice),H=c("".toLowerCase),q=c([].unshift),W="Invalid scheme",z="Invalid host",G="Invalid port",K=/[a-z]/i,Y=/[\d+-.a-z]/i,X=/\d/,Q=/^0x/i,J=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,it=/[\0\t\n\r #/:<>?@[\\\]^|]/,nt=/^[\u0000-\u0020]+/,rt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,st=/[\t\n\r]/g,at=function(t){var e,i,n,r;if("number"==typeof t){for(e=[],i=0;i<4;i++)q(e,t%256),t=L(t/256);return R(e,".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,i=1,n=null,r=0,s=0;s<8;s++)0!==t[s]?(r>i&&(e=n,i=r),n=null,r=0):(null===n&&(n=s),++r);return r>i&&(e=n,i=r),e}(t),i=0;i<8;i++)r&&0===t[i]||(r&&(r=!1),n===i?(e+=i?":":"::",r=!0):(e+=N(t[i],16),i<7&&(e+=":")));return"["+e+"]"}return t},ot={},lt=f({},ot,{" ":1,'"':1,"<":1,">":1,"`":1}),ct=f({},lt,{"#":1,"?":1,"{":1,"}":1}),ut=f({},ct,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ht=function(t,e){var i=y(t,0);return i>32&&i<127&&!p(e,t)?t:encodeURIComponent(t)},dt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pt=function(t,e){var i;return 2==t.length&&M(K,D(t,0))&&(":"==(i=D(t,1))||!e&&"|"==i)},ft=function(t){var e;return t.length>1&&pt(V(t,0,2))&&(2==t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===H(t)},gt={},yt={},vt={},bt={},_t={},wt={},Tt={},St={},xt={},kt={},Ct={},Et={},It={},Pt={},At={},Lt={},Ot={},Dt={},Mt={},Rt={},Nt={},Bt=function(t,e,i){var n,r,s,a=b(t);if(e){if(r=this.parse(a))throw P(r);this.searchParams=null}else{if(void 0!==i&&(n=new Bt(i,!0)),r=this.parse(a,null,n))throw P(r);(s=E(new C)).bindURL(this),this.searchParams=s}};Bt.prototype={type:"URL",parse:function(t,e,i){var r,s,a,o,l,c=this,u=e||gt,h=0,d="",f=!1,y=!1,v=!1;for(t=b(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=$(t,nt,""),t=$(t,rt,"$1")),t=$(t,st,""),r=m(t);h<=r.length;){switch(s=r[h],u){case gt:if(!s||!M(K,s)){if(e)return W;u=vt;continue}d+=H(s),u=yt;break;case yt:if(s&&(M(Y,s)||"+"==s||"-"==s||"."==s))d+=H(s);else{if(":"!=s){if(e)return W;d="",u=vt,h=0;continue}if(e&&(c.isSpecial()!=p(dt,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,e)return void(c.isSpecial()&&dt[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?u=Pt:c.isSpecial()&&i&&i.scheme==c.scheme?u=bt:c.isSpecial()?u=St:"/"==r[h+1]?(u=_t,h++):(c.cannotBeABaseURL=!0,F(c.path,""),u=Mt)}break;case vt:if(!i||i.cannotBeABaseURL&&"#"!=s)return W;if(i.cannotBeABaseURL&&"#"==s){c.scheme=i.scheme,c.path=g(i.path),c.query=i.query,c.fragment="",c.cannotBeABaseURL=!0,u=Nt;break}u="file"==i.scheme?Pt:wt;continue;case bt:if("/"!=s||"/"!=r[h+1]){u=wt;continue}u=xt,h++;break;case _t:if("/"==s){u=kt;break}u=Dt;continue;case wt:if(c.scheme=i.scheme,s==n)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=g(i.path),c.query=i.query;else if("/"==s||"\\"==s&&c.isSpecial())u=Tt;else if("?"==s)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=g(i.path),c.query="",u=Rt;else{if("#"!=s){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=g(i.path),c.path.length--,u=Dt;continue}c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=g(i.path),c.query=i.query,c.fragment="",u=Nt}break;case Tt:if(!c.isSpecial()||"/"!=s&&"\\"!=s){if("/"!=s){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,u=Dt;continue}u=kt}else u=xt;break;case St:if(u=xt,"/"!=s||"/"!=D(d,h+1))continue;h++;break;case xt:if("/"!=s&&"\\"!=s){u=kt;continue}break;case kt:if("@"==s){f&&(d="%40"+d),f=!0,a=m(d);for(var _=0;_<a.length;_++){var w=a[_];if(":"!=w||v){var T=ht(w,ut);v?c.password+=T:c.username+=T}else v=!0}d=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()){if(f&&""==d)return"Invalid authority";h-=m(d).length+1,d="",u=Ct}else d+=s;break;case Ct:case Et:if(e&&"file"==c.scheme){u=Lt;continue}if(":"!=s||y){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()){if(c.isSpecial()&&""==d)return z;if(e&&""==d&&(c.includesCredentials()||null!==c.port))return;if(o=c.parseHost(d))return o;if(d="",u=Ot,e)return;continue}"["==s?y=!0:"]"==s&&(y=!1),d+=s}else{if(""==d)return z;if(o=c.parseHost(d))return o;if(d="",u=It,e==Et)return}break;case It:if(!M(X,s)){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()||e){if(""!=d){var S=A(d,10);if(S>65535)return G;c.port=c.isSpecial()&&S===dt[c.scheme]?null:S,d=""}if(e)return;u=Ot;continue}return G}d+=s;break;case Pt:if(c.scheme="file","/"==s||"\\"==s)u=At;else{if(!i||"file"!=i.scheme){u=Dt;continue}if(s==n)c.host=i.host,c.path=g(i.path),c.query=i.query;else if("?"==s)c.host=i.host,c.path=g(i.path),c.query="",u=Rt;else{if("#"!=s){ft(R(g(r,h),""))||(c.host=i.host,c.path=g(i.path),c.shortenPath()),u=Dt;continue}c.host=i.host,c.path=g(i.path),c.query=i.query,c.fragment="",u=Nt}}break;case At:if("/"==s||"\\"==s){u=Lt;break}i&&"file"==i.scheme&&!ft(R(g(r,h),""))&&(pt(i.path[0],!0)?F(c.path,i.path[0]):c.host=i.host),u=Dt;continue;case Lt:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!e&&pt(d))u=Dt;else if(""==d){if(c.host="",e)return;u=Ot}else{if(o=c.parseHost(d))return o;if("localhost"==c.host&&(c.host=""),e)return;d="",u=Ot}continue}d+=s;break;case Ot:if(c.isSpecial()){if(u=Dt,"/"!=s&&"\\"!=s)continue}else if(e||"?"!=s)if(e||"#"!=s){if(s!=n&&(u=Dt,"/"!=s))continue}else c.fragment="",u=Nt;else c.query="",u=Rt;break;case Dt:if(s==n||"/"==s||"\\"==s&&c.isSpecial()||!e&&("?"==s||"#"==s)){if(".."===(l=H(l=d))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(c.shortenPath(),"/"==s||"\\"==s&&c.isSpecial()||F(c.path,"")):mt(d)?"/"==s||"\\"==s&&c.isSpecial()||F(c.path,""):("file"==c.scheme&&!c.path.length&&pt(d)&&(c.host&&(c.host=""),d=D(d,0)+":"),F(c.path,d)),d="","file"==c.scheme&&(s==n||"?"==s||"#"==s))for(;c.path.length>1&&""===c.path[0];)U(c.path);"?"==s?(c.query="",u=Rt):"#"==s&&(c.fragment="",u=Nt)}else d+=ht(s,ct);break;case Mt:"?"==s?(c.query="",u=Rt):"#"==s?(c.fragment="",u=Nt):s!=n&&(c.path[0]+=ht(s,ot));break;case Rt:e||"#"!=s?s!=n&&("'"==s&&c.isSpecial()?c.query+="%27":c.query+="#"==s?"%23":ht(s,ot)):(c.fragment="",u=Nt);break;case Nt:s!=n&&(c.fragment+=ht(s,lt))}h++}},parseHost:function(t){var e,i,n;if("["==D(t,0)){if("]"!=D(t,t.length-1))return z;if(e=function(t){var e,i,n,r,s,a,o,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,d=function(){return D(t,h)};if(":"==d()){if(":"!=D(t,1))return;h+=2,u=++c}for(;d();){if(8==c)return;if(":"!=d()){for(e=i=0;i<4&&M(tt,d());)e=16*e+A(d(),16),h++,i++;if("."==d()){if(0==i)return;if(h-=i,c>6)return;for(n=0;d();){if(r=null,n>0){if(!("."==d()&&n<4))return;h++}if(!M(X,d()))return;for(;M(X,d());){if(s=A(d(),10),null===r)r=s;else{if(0==r)return;r=10*r+s}if(r>255)return;h++}l[c]=256*l[c]+r,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;l[c++]=e}else{if(null!==u)return;h++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)o=l[c],l[c--]=l[u+a-1],l[u+--a]=o;else if(8!=c)return;return l}(V(t,1,-1)),!e)return z;this.host=e}else if(this.isSpecial()){if(t=v(t),M(et,t))return z;if(e=function(t){var e,i,n,r,s,a,o,l=j(t,".");if(l.length&&""==l[l.length-1]&&l.length--,(e=l.length)>4)return t;for(i=[],n=0;n<e;n++){if(""==(r=l[n]))return t;if(s=10,r.length>1&&"0"==D(r,0)&&(s=M(Q,r)?16:8,r=V(r,8==s?1:2)),""===r)a=0;else{if(!M(10==s?Z:8==s?J:tt,r))return t;a=A(r,s)}F(i,a)}for(n=0;n<e;n++)if(a=i[n],n==e-1){if(a>=O(256,5-e))return null}else if(a>255)return null;for(o=B(i),n=0;n<i.length;n++)o+=i[n]*O(256,3-n);return o}(t),null===e)return z;this.host=e}else{if(M(it,t))return z;for(e="",i=m(t),n=0;n<i.length;n++)e+=ht(i[n],ot);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(dt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&pt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,i=t.username,n=t.password,r=t.host,s=t.port,a=t.path,o=t.query,l=t.fragment,c=e+":";return null!==r?(c+="//",t.includesCredentials()&&(c+=i+(n?":"+n:"")+"@"),c+=at(r),null!==s&&(c+=":"+s)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+R(a,"/"):"",null!==o&&(c+="?"+o),null!==l&&(c+="#"+l),c},setHref:function(t){var e=this.parse(t);if(e)throw P(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Ft(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+at(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(b(t)+":",gt)},getUsername:function(){return this.username},setUsername:function(t){var e=m(b(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<e.length;i++)this.username+=ht(e[i],ut)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(b(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<e.length;i++)this.password+=ht(e[i],ut)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?at(t):at(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Ct)},getHostname:function(){var t=this.host;return null===t?"":at(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Et)},getPort:function(){var t=this.port;return null===t?"":b(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=b(t))?this.port=null:this.parse(t,It))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+R(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ot))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=b(t))?this.query=null:("?"==D(t,0)&&(t=V(t,1)),this.query="",this.parse(t,Rt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=b(t))?("#"==D(t,0)&&(t=V(t,1)),this.fragment="",this.parse(t,Nt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ft=function(t){var e=d(this,$t),i=w(arguments.length,1)>1?arguments[1]:void 0,n=x(e,new Bt(t,!1,i));s||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},$t=Ft.prototype,Ut=function(t,e){return{get:function(){return k(this)[t]()},set:e&&function(t){return k(this)[e](t)},configurable:!0,enumerable:!0}};if(s&&(h($t,"href",Ut("serialize","setHref")),h($t,"origin",Ut("getOrigin")),h($t,"protocol",Ut("getProtocol","setProtocol")),h($t,"username",Ut("getUsername","setUsername")),h($t,"password",Ut("getPassword","setPassword")),h($t,"host",Ut("getHost","setHost")),h($t,"hostname",Ut("getHostname","setHostname")),h($t,"port",Ut("getPort","setPort")),h($t,"pathname",Ut("getPathname","setPathname")),h($t,"search",Ut("getSearch","setSearch")),h($t,"searchParams",Ut("getSearchParams")),h($t,"hash",Ut("getHash","setHash"))),u($t,"toJSON",(function(){return k(this).serialize()}),{enumerable:!0}),u($t,"toString",(function(){return k(this).serialize()}),{enumerable:!0}),I){var jt=I.createObjectURL,Vt=I.revokeObjectURL;jt&&u(Ft,"createObjectURL",l(jt,I)),Vt&&u(Ft,"revokeObjectURL",l(Vt,I))}_(Ft,"URL"),r({global:!0,constructor:!0,forced:!a,sham:!s},{URL:Ft})},60285:(t,e,i)=>{i(68789)},83753:(t,e,i)=>{"use strict";var n=i(82109),r=i(46916);n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return r(URL.prototype.toString,this)}})},28594:(t,e,i)=>{i(82526),i(41817),i(72443),i(92401),i(8722),i(32165),i(69007),i(16066),i(83510),i(41840),i(6982),i(32159),i(96649),i(39341),i(60543),i(21703),i(96647),i(9170),i(32120),i(52262),i(92222),i(50545),i(26541),i(43290),i(57327),i(69826),i(34553),i(67635),i(77287),i(84944),i(86535),i(89554),i(91038),i(26699),i(82772),i(79753),i(66992),i(69600),i(94986),i(21249),i(26572),i(57658),i(85827),i(96644),i(65069),i(47042),i(5212),i(2707),i(38706),i(40561),i(90476),i(76459),i(99892),i(33792),i(99244),i(30541),i(35581),i(18264),i(76938),i(39575),i(16716),i(43016),i(3843),i(81801),i(9550),i(28733),i(5735),i(96078),i(83710),i(62130),i(24812),i(4855),i(68309),i(35837),i(38862),i(73706),i(51532),i(99752),i(82376),i(73181),i(23484),i(2388),i(88621),i(60403),i(84755),i(25438),i(90332),i(40658),i(40197),i(44914),i(52420),i(60160),i(60970),i(10408),i(73689),i(9653),i(93299),i(35192),i(33161),i(44048),i(78285),i(44363),i(55994),i(61874),i(9494),i(31354),i(56977),i(55147),i(19601),i(78011),i(59595),i(33321),i(69070),i(35500),i(69720),i(43371),i(38559),i(38880),i(49337),i(36210),i(30489),i(46314),i(43304),i(41825),i(98410),i(72200),i(47941),i(94869),i(33952),i(57227),i(67987),i(60514),i(68304),i(41539),i(26833),i(54678),i(91058),i(88674),i(17922),i(34668),i(17727),i(60224),i(12419),i(69596),i(52586),i(74819),i(95683),i(39361),i(51037),i(5898),i(67556),i(14361),i(83593),i(39532),i(81299),i(24603),i(28450),i(74916),i(92087),i(88386),i(77601),i(39714),i(70189),i(24506),i(79841),i(27852),i(94953),i(32023),i(78783),i(4723),i(76373),i(66528),i(83112),i(38992),i(82481),i(15306),i(68757),i(64765),i(23123),i(23157),i(83650),i(73210),i(48702),i(55674),i(15218),i(74475),i(57929),i(50915),i(29253),i(42125),i(78830),i(58734),i(29254),i(37268),i(7397),i(60086),i(80623),i(44197),i(76495),i(87145),i(35109),i(65125),i(82472),i(49743),i(8255),i(29135),i(48675),i(92990),i(18927),i(33105),i(35035),i(74345),i(7174),i(63408),i(14590),i(32846),i(98145),i(44731),i(77209),i(96319),i(58867),i(37789),i(33739),i(95206),i(29368),i(14483),i(12056),i(3462),i(30678),i(27462),i(33824),i(55021),i(12974),i(1439),i(87585),i(15016),i(55315),i(78221),i(4129),i(38478),i(75505),i(27479),i(54747),i(33948),i(87714),i(82801),i(1174),i(84633),i(85844),i(71550),i(61295),i(32564),i(60285),i(83753),i(41637),i(62062),i(40857)},17187:t=>{"use strict";var e,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(i,n){function r(i){t.removeListener(e,s),n(i)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}m(t,e,s,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,i,n){var r,s,a,c;if(o(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),a=s[e]),void 0===a)a=s[e]=i,++t._eventsCount;else if("function"==typeof a?a=s[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=l(t))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=u.bind(n);return r.listener=i,n.wrapFn=r,r}function d(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):f(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function m(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){n.once&&t.removeEventListener(e,r),i(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[t];if(void 0===l)return!1;if("function"==typeof l)n(l,this,e);else{var c=l.length,u=f(l,c);for(i=0;i<c;++i)n(u[i],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){return o(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,h(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,n,r,s,a;if(o(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){a=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,s=Object.keys(i);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},94029:(t,e,i)=>{"use strict";var n=i(95320),r=Object.prototype.toString,s=Object.prototype.hasOwnProperty,a=function(t,e,i){for(var n=0,r=t.length;n<r;n++)s.call(t,n)&&(null==i?e(t[n],n,t):e.call(i,t[n],n,t))},o=function(t,e,i){for(var n=0,r=t.length;n<r;n++)null==i?e(t.charAt(n),n,t):e.call(i,t.charAt(n),n,t)},l=function(t,e,i){for(var n in t)s.call(t,n)&&(null==i?e(t[n],n,t):e.call(i,t[n],n,t))};t.exports=function(t,e,i){if(!n(e))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=i),"[object Array]"===r.call(t)?a(t,e,s):"string"==typeof t?o(t,e,s):l(t,e,s)}},17648:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,n=Object.prototype.toString,r="[object Function]";t.exports=function(t){var s=this;if("function"!=typeof s||n.call(s)!==r)throw new TypeError(e+s);for(var a,o=i.call(arguments,1),l=Math.max(0,s.length-o.length),c=[],u=0;u<l;u++)c.push("$"+u);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var e=s.apply(this,o.concat(i.call(arguments)));return Object(e)===e?e:this}return s.apply(t,o.concat(i.call(arguments)))})),s.prototype){var h=function(){};h.prototype=s.prototype,a.prototype=new h,h.prototype=null}return a}},58612:(t,e,i)=>{"use strict";var n=i(17648);t.exports=Function.prototype.bind||n},40210:(t,e,i)=>{"use strict";var n,r=SyntaxError,s=Function,a=TypeError,o=function(t){try{return s('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,h=i(41405)(),d=Object.getPrototypeOf||function(t){return t.__proto__},p={},f="undefined"==typeof Uint8Array?n:d(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?d((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?d((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":r,"%ThrowTypeError%":u,"%TypedArray%":f,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};try{null.error}catch(t){var g=d(d(t));m["%Error.prototype%"]=g}var y=function t(e){var i;if("%AsyncFunction%"===e)i=o("async function () {}");else if("%GeneratorFunction%"===e)i=o("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=o("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=d(r.prototype))}return m[e]=i,i},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=i(58612),_=i(17642),w=b.call(Function.call,Array.prototype.concat),T=b.call(Function.apply,Array.prototype.splice),S=b.call(Function.call,String.prototype.replace),x=b.call(Function.call,String.prototype.slice),k=b.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,I=function(t){var e=x(t,0,1),i=x(t,-1);if("%"===e&&"%"!==i)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new r("invalid intrinsic syntax, expected opening `%`");var n=[];return S(t,C,(function(t,e,i,r){n[n.length]=i?S(r,E,"$1"):e||t})),n},P=function(t,e){var i,n=t;if(_(v,n)&&(n="%"+(i=v[n])[0]+"%"),_(m,n)){var s=m[n];if(s===p&&(s=y(n)),void 0===s&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new r("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===k(/^%?[^%]*%?$/,t))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=I(t),n=i.length>0?i[0]:"",s=P("%"+n+"%",e),o=s.name,c=s.value,u=!1,h=s.alias;h&&(n=h[0],T(i,w([0,1],h)));for(var d=1,p=!0;d<i.length;d+=1){var f=i[d],g=x(f,0,1),y=x(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new r("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),_(m,o="%"+(n+="."+f)+"%"))c=m[o];else if(null!=c){if(!(f in c)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&d+1>=i.length){var v=l(c,f);c=(p=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[f]}else p=_(c,f),c=c[f];p&&!u&&(m[o]=c)}}return c}},89144:(t,e,i)=>{var n,r=void 0!==i.g?i.g:"undefined"!=typeof window?window:{},s=i(25893);"undefined"!=typeof document?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"])||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=s),t.exports=n},58908:(t,e,i)=>{var n;n="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},t.exports=n},27296:(t,e,i)=>{"use strict";var n=i(40210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(t){n=null}t.exports=n},41405:(t,e,i)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,r=i(55419);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&r()}},55419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},96410:(t,e,i)=>{"use strict";var n=i(55419);t.exports=function(){return n()&&!!Symbol.toStringTag}},17642:(t,e,i)=>{"use strict";var n=i(58612);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},80645:(t,e)=>{e.read=function(t,e,i,n,r){var s,a,o=8*r-n-1,l=(1<<o)-1,c=l>>1,u=-7,h=i?r-1:0,d=i?-1:1,p=t[e+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=o;u>0;s=256*s+t[e+h],h+=d,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),s-=c}return(p?-1:1)*a*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var a,o,l,c=8*s-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(o=0,a=u):a+h>=1?(o=(e*l-1)*Math.pow(2,r),a+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&o,p+=f,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;t[i+p]=255&a,p+=f,a/=256,c-=8);t[i+p-f]|=128*m}},35717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},82584:(t,e,i)=>{"use strict";var n=i(96410)(),r=i(21924)("Object.prototype.toString"),s=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r(t)},a=function(t){return!!s(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r(t)&&"[object Function]"===r(t.callee)},o=function(){return s(arguments)}();s.isLegacyArguments=a,t.exports=o?s:a},95320:t=>{"use strict";var e,i,n=Function.prototype.toString,r="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof r&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw i}}),i={},r((function(){throw 42}),null,e)}catch(t){t!==i&&(r=null)}else r=null;var s=/^\s*class\b/,a=function(t){try{var e=n.call(t);return s.test(e)}catch(t){return!1}},o=function(t){try{return!a(t)&&(n.call(t),!0)}catch(t){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(h=function(t){if((u||!t)&&(void 0===t||"object"==typeof t))try{var e=l.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=r?function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{r(t,null,e)}catch(t){if(t!==i)return!1}return!a(t)&&o(t)}:function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return o(t);if(a(t))return!1;var e=l.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&o(t)}},27376:t=>{t.exports=function(t){if(!t)return!1;var i=e.call(t);return"[object Function]"===i||"function"==typeof t&&"[object RegExp]"!==i||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var e=Object.prototype.toString},48662:(t,e,i)=>{"use strict";var n,r=Object.prototype.toString,s=Function.prototype.toString,a=/^\s*(?:function)?\*/,o=i(96410)(),l=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(a.test(s.call(t)))return!0;if(!o)return"[object GeneratorFunction]"===r.call(t);if(!l)return!1;if(void 0===n){var e=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(t){}}();n=!!e&&l(e)}return l(t)===n}},85692:(t,e,i)=>{"use strict";var n=i(94029),r=i(63083),s=i(21924),a=s("Object.prototype.toString"),o=i(96410)(),l=i(27296),c="undefined"==typeof globalThis?i.g:globalThis,u=r(),h=s("Array.prototype.indexOf",!0)||function(t,e){for(var i=0;i<t.length;i+=1)if(t[i]===e)return i;return-1},d=s("String.prototype.slice"),p={},f=Object.getPrototypeOf;o&&l&&f&&n(u,(function(t){var e=new c[t];if(Symbol.toStringTag in e){var i=f(e),n=l(i,Symbol.toStringTag);if(!n){var r=f(i);n=l(r,Symbol.toStringTag)}p[t]=n.get}})),t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!o||!(Symbol.toStringTag in t)){var e=d(a(t),8,-1);return h(u,e)>-1}return!!l&&function(t){var e=!1;return n(p,(function(i,n){if(!e)try{e=i.call(t)===n}catch(t){}})),e}(t)}},67432:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Jinter=void 0;const r=n(i(2440));e.Jinter=r.default,e.default=r.default},2440:function(t,e,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},s=this&&this.__classPrivateFieldGet||function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(i(61919)),l=i(1234);e.default=class{constructor(t){n.set(this,void 0);const e=(0,l.parse)(t,{ecmaVersion:2020});r(this,n,e.body,"f"),this.visitor=new o.default(s(this,n,"f")),this.scope=this.visitor.scope,this.scope.set("print",(t=>console.log(...t))),this.visitor.on("console",((t,e)=>{if("Identifier"===t.type)return console;if("CallExpression"===t.type&&"MemberExpression"===t.callee.type){const i=e.visitNode(t.callee.property),n=t.arguments.map((t=>e.visitNode(t))),r=console[i];return r?r(...n):"proceed"}return"proceed"})),this.visitor.on("Math",((t,e)=>{if("Identifier"===t.type)return Math;if("CallExpression"===t.type&&"MemberExpression"===t.callee.type){const i=e.visitNode(t.callee.property),n=t.arguments.map((t=>e.visitNode(t))),r=Math[i];return r?r(...n):"proceed"}return"proceed"})),this.visitor.on("String",((t,e)=>{if("Identifier"===t.type)return String;if("CallExpression"===t.type&&"MemberExpression"===t.callee.type){const i=e.visitNode(t.callee.property),n=t.arguments.map((t=>e.visitNode(t))),r=String[i];return r?r(n):"proceed"}return"proceed"})),this.visitor.on("Date",(t=>{if("Identifier"===t.type)return Date}))}interpret(){return this.visitor.run()}},n=new WeakMap},18678:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(93311)),s=n(i(94354)),a=n(i(93709)),o=n(i(98895)),l=n(i(85070)),c=n(i(36535)),u=n(i(87771)),h=n(i(71704)),d=n(i(22810)),p=n(i(51730)),f=n(i(32185)),m=n(i(5503)),g=n(i(24425)),y=n(i(76007)),v=n(i(48969)),b=n(i(11698)),_=n(i(25669)),w=n(i(5668)),T=n(i(96580)),S=n(i(95218)),x=n(i(96535)),k=n(i(51007)),C=n(i(97580)),E=n(i(40149)),I=n(i(853)),P=n(i(35588)),A=n(i(89083)),L=n(i(72121)),O=n(i(984)),D=n(i(36873)),M=n(i(22689)),R=n(i(44050)),N={ArrayExpression:r.default,ArrowFunctionExpression:s.default,AssignmentExpression:a.default,BinaryExpression:o.default,BlockStatement:l.default,BreakStatement:c.default,CallExpression:u.default,ConditionalExpression:h.default,ContinueStatement:d.default,ExpressionStatement:p.default,ForStatement:f.default,FunctionDeclaration:m.default,FunctionExpression:g.default,Identifier:y.default,IfStatement:v.default,Literal:b.default,LogicalExpression:_.default,MemberExpression:w.default,NewExpression:T.default,ObjectExpression:S.default,Property:x.default,ReturnStatement:k.default,SequenceExpression:C.default,SwitchCase:E.default,SwitchStatement:I.default,ThisExpression:P.default,ThrowStatement:A.default,TryStatement:L.default,UnaryExpression:O.default,UpdateExpression:D.default,VariableDeclaration:M.default,WhileStatement:R.default};e.default=function(t){const e=N[t];if(!e){const e=new Error(`Module not found: ${t}`);throw e.code="MODULE_NOT_FOUND",e}return e}},93311:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return t.elements.map((t=>e.visitNode(t)))}}},94354:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(38401);e.default=class{static visit(t,e){const{params:i,body:r}=t;return(0,n.namedFunction)("anonymous function",(t=>{let n=0;for(const r of i)e.visitNode(r),"Identifier"===r.type?e.scope.set(r.name,t[n]):console.warn("Unhandled param type",r.type),n++;return e.visitNode(r)}))}}},93709:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){const i=t.operator,n=e.visitNode(t.right);switch(i){case"=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]=n;if("Identifier"===t.left.type)return e.scope.set(t.left.name,n),e.scope.get(t.left.name);console.warn("Unhandled left node",t.left);break;case"+=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]+=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)+n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"-=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]-=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)-n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"*=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]*=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)*n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"/=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]/=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)/n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"%=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]%=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)%n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"**=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]**=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)**n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"<<=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]<<=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)<<n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case">>=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]>>=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)>>n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case">>>=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]>>>=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)>>>n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left);break;case"&=":if("MemberExpression"===t.left.type)return e.visitNode(t.left.object)[e.visitNode(t.left.property)]&=n;if("Identifier"===t.left.type){const i=e.visitNode(t.left)&n;return e.scope.set(t.left.name,i),e.scope.get(t.left.name)}console.warn("Unhandled left node",t.left)}}}},98895:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){const i=t.operator,n=e.visitNode(t.left),r=e.visitNode(t.right);switch(i){case"!=":return n!=r;case"!==":return n!==r;case"%":return n%r;case"&":return n&r;case"*":return n*r;case"**":return n**r;case"+":return n+r;case"-":return n-r;case"/":return n/r;case"<":return n<r;case"<<":return n<<r;case"<=":return n<=r;case"==":return n==r;case"===":return n===r;case">":return n>r;case">=":return n>=r;case">>":return n>>r;case">>>":return n>>>r;case"^":return n^r;case"|":return n|r;case"in":return n in r;case"instanceof":return n instanceof r}}}},85070:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){for(const i of t.body){const t=e.visitNode(i);if("ReturnStatement"===i.type)return t;if("break"===t||"continue"===t)return t;if(("WhileStatement"===i.type||"IfStatement"===i.type||"ForStatement"===i.type||"TryStatement"===i.type)&&t)return t}}}},36535:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return"break"}}},87771:function(t,e){"use strict";var i,n,r=this&&this.__classPrivateFieldGet||function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});class s{static visit(t,e){let s,o;if("MemberExpression"===t.callee.type?(s=e.getName(t.callee.object),o=e.getName(t.callee.property)):"Identifier"===t.callee.type&&(o=t.callee.name),s&&e.listeners[s]){const i=e.listeners[s](t,e);if("proceed"!==i)return i}if(o&&"toString"!==o&&e.listeners[o]){const i=e.listeners[o](t,e);if("proceed"!==i)return i}if("MemberExpression"===t.callee.type){if(a.has(t,e))return a.execute(t,e);const s=e.visitNode(t.callee.object),o=t.callee.computed?e.visitNode(t.callee.property):e.getName(t.callee.property),l=t.arguments.map((t=>e.visitNode(t)));return"function"!=typeof s[o]&&r(this,i,"m",n).call(this,t,e),s[o].toString().includes("[native code]")?s[o](...l):s[o](l)}const l=e.visitNode(t.callee),c=t.arguments.map((t=>e.visitNode(t)));return"function"!=typeof l&&r(this,i,"m",n).call(this,t,e),l(c)}}e.default=s,i=s,n=function(t,e){if("MemberExpression"===t.callee.type)throw new Error(`${"Identifier"===t.callee.object.type?t.callee.object.name:"<object>"}.${"Identifier"===t.callee.property.type?t.callee.property.name:"?"} is not a function`);if("Identifier"===t.callee.type)throw new Error(`${t.callee.name} is not a function`);if("SequenceExpression"===t.callee.type){const i=[],n=[];throw i.push("("),t.callee.expressions.forEach((t=>{"Literal"===t.type?n.push(t.raw||""):"Identifier"===t.type?n.push(t.name):"MemberExpression"===t.type&&(t.computed?n.push(`${e.getName(t.object)}[${e.getName(t.property)||"..."}]`):n.push(`${e.getName(t.object)}.${e.getName(t.property)}`))})),i.push(n.join(", ")),i.push(")"),new Error(`${i.join("")} is not a function`)}};class a{static has(t,e){var i;return"MemberExpression"===t.callee.type&&!!(null===(i=this.builtins)||void 0===i?void 0:i[e.getName(t.callee.property)||""])}static execute(t,e){if("MemberExpression"===t.callee.type)return this.builtins[e.getName(t.callee.property)||""](t,e)}}a.builtins={forEach:(t,e)=>{const i=t.arguments.map((t=>e.visitNode(t)));if("MemberExpression"===t.callee.type){const n=e.visitNode(t.callee.object);i.length>1&&e.scope.set("_this",i.slice(-1)[0]);let r=0;for(const t of n)i[0]([t,r++,n])}else console.warn("Unhandled callee type:",t.callee.type)},toString:(t,e)=>{if("MemberExpression"===t.callee.type)return e.visitNode(t.callee.object).toString()}}},71704:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){const{test:i,consequent:n,alternate:r}=t;return e.visitNode(i)?e.visitNode(n):e.visitNode(r)}}},22810:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return"continue"}}},51730:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return e.visitNode(t.expression)}}},32185:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){for(t.init&&e.visitNode(t.init);!t.test||e.visitNode(t.test);){const i=e.visitNode(t.body);if("continue"!==i){if("break"===i)break;if(t.update&&e.visitNode(t.update),i&&"ExpressionStatement"!==t.body.type)return i}}}}},5503:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(38401);e.default=class{static visit(t,e){const{params:i,body:r}=t,s=e.visitNode(t.id),a=(0,n.namedFunction)(s,(t=>{let n=0;for(const r of i)e.visitNode(r),"Identifier"===r.type?e.scope.set(r.name,t[n]):console.warn("Unhandled param type",r.type),n++;return e.visitNode(r)}));e.scope.set(s,a)}}},24425:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(38401);e.default=class{static visit(t,e){const{params:i,body:r}=t;return(0,n.namedFunction)("anonymous function",(t=>{let n=0;for(const r of i)e.visitNode(r),"Identifier"===r.type?e.scope.set(r.name,t[n]):console.warn("Unhandled param type",r.type),n++;return e.visitNode(r)}))}}},76007:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){if(e.listeners[t.name]){const i=e.listeners[t.name](t,e);if("proceed"!==i)return i}return e.scope.has(t.name)?e.scope.get(t.name):t.name}}},48969:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return e.visitNode(t.test)?e.visitNode(t.consequent):t.alternate?e.visitNode(t.alternate):void 0}}},11698:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return t.value}}},25669:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){switch(t.operator){case"&&":{const i=e.visitNode(t.left);return!0===i?e.visitNode(t.right):i}case"||":return e.visitNode(t.left)||e.visitNode(t.right);case"??":{const i=e.visitNode(t.left);return null!=i?i:e.visitNode(t.right)}}}}},5668:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){const{object:i,property:n,computed:r}=t,s=e.visitNode(i),a=r?e.visitNode(n):e.getName(n);if(void 0!==a||null!==a){if(e.listeners[a]){const i=e.listeners[a](t,e);if("proceed"!==i)return i}return null==s?void 0:s[a]}}}},96580:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return new(e.visitNode(t.callee))(t.arguments.map((t=>e.visitNode(t))))}}},95218:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){let i={};for(const n of t.properties){if("Property"!==n.type)throw new Error(`Unhandled property type: ${n.type}`);i=Object.assign(Object.assign({},i),e.visitNode(n))}return i}}},96535:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static init(t,e){const i=t.computed?e.visitNode(t.key):e.getName(t.key),n=e.visitNode(t.value);if(i)return{[i]:n}}static get(t,e){throw new TypeError("Not implemented: Property.get")}static set(t,e){throw new TypeError("Not implemented: Property.set")}static visit(t,e){switch(t.kind){case"init":return this.init(t,e);case"get":return this.get(t,e);case"set":return this.set(t,e);default:throw new Error(`Unhandled property kind: ${t.kind}`)}}}},51007:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){if(t.argument)return e.visitNode(t.argument)}}},97580:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){let i;for(const n of t.expressions)i=e.visitNode(n);return i}}},40149:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){for(const i of t.consequent){const t=e.visitNode(i);if("ContinueStatement"===i.type)return t;if("BreakStatement"===i.type)return t}}}},853:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){const i=e.visitNode(t.discriminant);let n=!1,r=-1,s=0;for(;;){const a=t.cases[s];if(n){const i=e.visitNode(a);if("break"===i)break;if("continue"===i)return i;if(++s,s>=t.cases.length){s=0;break}}else{if(n=a&&i===e.visitNode(a.test),void 0===n&&s>t.cases.length)break;!a||n||a.test?a||n||-1===r?n||++s:(n=!0,s=r):(r=s,s+=1)}}}}},35588:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){return e.scope.get("_this")}}},89083:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){throw e.visitNode(t.argument)}}},72121:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){try{return e.visitNode(t.block)}catch(i){if(t.handler)return t.handler.param&&"Identifier"===t.handler.param.type&&e.scope.set(t.handler.param.name,i),e.visitNode(t.handler.body)}finally{e.visitNode(t.finalizer)}}}},984:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){const i=t.operator;switch(i){case"-":return-e.visitNode(t.argument);case"+":return+e.visitNode(t.argument);case"!":return!e.visitNode(t.argument);case"~":return~e.visitNode(t.argument);case"void":return void e.visitNode(t.argument);case"typeof":return typeof e.visitNode(t.argument);case"delete":return"MemberExpression"===t.argument.type?delete e.visitNode(t.argument.object)[t.argument.computed?e.visitNode(t.argument.property):e.getName(t.argument.property)]:"Identifier"!==t.argument.type||e.scope.delete(t.argument.name);default:console.warn("Unhandled UnaryExpression operator",i)}}}},36873:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){switch(t.operator){case"++":if("MemberExpression"===t.argument.type)return e.visitNode(t.argument.object)[e.visitNode(t.argument.property)]++;if("Identifier"===t.argument.type){let i=e.visitNode(t.argument);return e.scope.set(t.argument.name,i+1),t.prefix?++i:i}break;case"--":if("MemberExpression"===t.argument.type)return e.visitNode(t.argument.object)[e.visitNode(t.argument.property)]--;if("Identifier"===t.argument.type){let i=e.visitNode(t.argument);return e.scope.set(t.argument.name,i-1),t.prefix?--i:i}}}}},22689:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){t.declarations.forEach((t=>{const{id:i,init:n}=t,r=e.getName(i),s=n?e.visitNode(n):void 0;r&&e.scope.set(r,s),"object"==typeof s&&null!==s&&e.scope.set("_this",s)}))}}},44050:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static visit(t,e){for(;e.visitNode(t.test);){const i=e.visitNode(t.body);if("break"===i)break;if("continue"!==i&&i)return i}}}},38401:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.namedFunction=void 0,e.namedFunction=(t,e)=>Object.defineProperty(e,"name",{value:t})},61919:function(t,e,i){"use strict";var n,r,s=this&&this.__classPrivateFieldGet||function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(i(18678)),l=a(i(19144));e.default=class{constructor(t){n.add(this),this.scope=new Map,this.listeners={},this.ast=t}run(){let t;for(const e of this.ast)t=this.visitNode(e);return t}visitNode(t){if(!t)return null;try{return(0,o.default)(t.type).visit(t,this)}catch(e){s(this,n,"m",r).call(this,t,e)}}getName(t){return"Identifier"===t.type?t.name:"Literal"===t.type?t.value:void 0}on(t,e){this.listeners[t]=e}},n=new WeakSet,r=function(t,e){if("MODULE_NOT_FOUND"!==e.code)throw e;console.warn(`Node ${t.type} not found!\nThis is a bug, please report it at ${l.default.bugs.url}.`)}},27537:(t,e)=>{function i(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var i,s=String(t);return(i=n[s.toLowerCase()])?i:(i=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}i.isEventKey=function(t,e){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;if(null==i)return!1;if("string"==typeof e){var s;if(s=n[e.toLowerCase()])return s===i;if(s=r[e.toLowerCase()])return s===i}else if("number"==typeof e)return e===i;return!1}};var n=(e=t.exports=i).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(s=97;s<123;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)n[s-48]=s;for(s=1;s<13;s++)n["f"+s]=s+111;for(s=0;s<10;s++)n["numpad "+s]=s+96;var a=e.names=e.title={};for(s in n)a[n[s]]=s;for(var o in r)n[o]=r[o]},69483:(t,e,i)=>{t.exports=function t(e,i,n){function r(a,o){if(!i[a]){if(!e[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,(function(t){return r(e[a][1][t]||t)}),c,c.exports,t,e,i,n)}return i[a].exports}for(var s=void 0,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,n){(function(t){"use strict";var i,n,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var s=0,a=new r(u),o=t.document.createTextNode("");a.observe(o,{characterData:!0}),i=function(){o.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,i=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;n=!0;for(var i=c.length;i;){for(e=c,c=[],t=-1;++t<i;)e[t]();i=c.length}n=!1}e.exports=function(t){1!==c.push(t)||n||i()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){"use strict";var n=t(1);function r(){}var s={},a=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function u(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function h(t,e,i){n((function(){var n;try{n=e(i)}catch(e){return s.reject(t,e)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var i=!1;function n(e){i||(i=!0,s.reject(t,e))}function r(e){i||(i=!0,s.resolve(t,e))}var a=f((function(){e(r,n)}));"error"===a.status&&n(a.value)}function f(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===a)return this;var i=new this.constructor(r);return this.state!==l?h(i,this.state===o?t:e,this.outcome):this.queue.push(new u(i,t,e)),i},u.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){s.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},s.resolve=function(t,e){var i=f(d,e);if("error"===i.status)return s.reject(t,i.value);var n=i.value;if(n)p(t,n);else{t.state=o,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},s.reject=function(t,e){t.state=a,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:s.resolve(new this(r),t)},c.reject=function(t){var e=new this(r);return s.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var a=new Array(i),o=0,l=-1,c=new this(r);++l<i;)u(t[l],l);return c;function u(t,r){e.resolve(t).then((function(t){a[r]=t,++o!==i||n||(n=!0,s.resolve(c,a))}),(function(t){n||(n=!0,s.reject(c,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i,n=t.length,a=!1;if(!n)return this.resolve([]);for(var o=-1,l=new this(r);++o<n;)i=t[o],e.resolve(i).then((function(t){a||(a=!0,s.resolve(l,t))}),(function(t){a||(a=!0,s.reject(l,t))}));return l}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function s(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)i.append(t[n]);return i.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function o(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,i){"function"==typeof e&&t.then(e),"function"==typeof i&&t.catch(i)}function c(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",d=void 0,p={},f=Object.prototype.toString,m="readonly",g="readwrite";function y(t){for(var e=t.length,i=new ArrayBuffer(e),n=new Uint8Array(i),r=0;r<e;r++)n[r]=t.charCodeAt(r);return i}function v(t){return"boolean"==typeof d?a.resolve(d):function(t){return new a((function(e){var i=t.transaction(h,g),n=s([""]);i.objectStore(h).put(n,"key"),i.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},i.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);e(i||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return d=t}))}function b(t){var e=p[t.name],i={};i.promise=new a((function(t,e){i.resolve=t,i.reject=e})),e.deferredOperations.push(i),e.dbReady?e.dbReady=e.dbReady.then((function(){return i.promise})):e.dbReady=i.promise}function _(t){var e=p[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function w(t,e){var i=p[t.name].deferredOperations.pop();if(i)return i.reject(e),i.promise}function T(t,e){return new a((function(i,n){if(p[t.name]=p[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return i(t.db);b(t),t.db.close()}var s=[t.name];e&&s.push(t.version);var a=r.open.apply(r,s);e&&(a.onupgradeneeded=function(e){var i=a.result;try{i.createObjectStore(t.storeName),e.oldVersion<=1&&i.createObjectStore(h)}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),n(a.error)},a.onsuccess=function(){var e=a.result;e.onversionchange=function(t){t.target.close()},i(e),_(t)}}))}function S(t){return T(t,!1)}function x(t){return T(t,!0)}function k(t,e){if(!t.db)return!0;var i=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,r=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||i){if(i){var s=t.db.version+1;s>t.version&&(t.version=s)}return!0}return!1}function C(t){return s([y(atob(t.data))],{type:t.type})}function E(t){return t&&t.__local_forage_encoded_blob}function I(t){var e=this,i=e._initReady().then((function(){var t=p[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(i,t,t),i}function P(t,e,i,n){void 0===n&&(n=1);try{var r=t.db.transaction(t.storeName,e);i(null,r)}catch(r){if(n>0&&(!t.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===r.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),x(t)})).then((function(){return function(t){b(t);for(var e=p[t.name],i=e.forages,n=0;n<i.length;n++){var r=i[n];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return t.db=null,S(t).then((function(e){return t.db=e,k(t)?x(t):e})).then((function(n){t.db=e.db=n;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=n})).catch((function(e){throw w(t,e),e}))}(t).then((function(){P(t,e,i,n-1)}))})).catch(i);i(r)}}var A={_driver:"asyncStorage",_initStorage:function(t){var e=this,i={db:null};if(t)for(var n in t)i[n]=t[n];var r=p[i.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},p[i.name]=r),r.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=I);var s=[];function o(){return a.resolve()}for(var l=0;l<r.forages.length;l++){var c=r.forages[l];c!==e&&s.push(c._initReady().catch(o))}var u=r.forages.slice(0);return a.all(s).then((function(){return i.db=r.db,S(i)})).then((function(t){return i.db=t,k(i,e._defaultConfig.version)?x(i):t})).then((function(t){i.db=r.db=t,e._dbInfo=i;for(var n=0;n<u.length;n++){var s=u[n];s!==e&&(s._dbInfo.db=i.db,s._dbInfo.version=i.version)}}))},_support:function(){try{if(!r||!r.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var i=this,n=new a((function(e,n){i.ready().then((function(){P(i._dbInfo,m,(function(r,s){if(r)return n(r);try{var a=s.objectStore(i._dbInfo.storeName).openCursor(),o=1;a.onsuccess=function(){var i=a.result;if(i){var n=i.value;E(n)&&(n=C(n));var r=t(n,i.key,o++);void 0!==r?e(r):i.continue()}else e()},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return o(n,e),n},getItem:function(t,e){var i=this;t=c(t);var n=new a((function(e,n){i.ready().then((function(){P(i._dbInfo,m,(function(r,s){if(r)return n(r);try{var a=s.objectStore(i._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),E(t)&&(t=C(t)),e(t)},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return o(n,e),n},setItem:function(t,e,i){var n=this;t=c(t);var r=new a((function(i,r){var s;n.ready().then((function(){return s=n._dbInfo,"[object Blob]"===f.call(e)?v(s.db).then((function(t){return t?e:(i=e,new a((function(t,e){var n=new FileReader;n.onerror=e,n.onloadend=function(e){var n=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:i.type})},n.readAsBinaryString(i)})));var i})):e})).then((function(e){P(n._dbInfo,g,(function(s,a){if(s)return r(s);try{var o=a.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var l=o.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),i(e)},a.onabort=a.onerror=function(){var t=l.error?l.error:l.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return o(r,i),r},removeItem:function(t,e){var i=this;t=c(t);var n=new a((function(e,n){i.ready().then((function(){P(i._dbInfo,g,(function(r,s){if(r)return n(r);try{var a=s.objectStore(i._dbInfo.storeName).delete(t);s.oncomplete=function(){e()},s.onerror=function(){n(a.error)},s.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return o(n,e),n},clear:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){P(e._dbInfo,g,(function(n,r){if(n)return i(n);try{var s=r.objectStore(e._dbInfo.storeName).clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=s.error?s.error:s.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return o(i,t),i},length:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){P(e._dbInfo,m,(function(n,r){if(n)return i(n);try{var s=r.objectStore(e._dbInfo.storeName).count();s.onsuccess=function(){t(s.result)},s.onerror=function(){i(s.error)}}catch(t){i(t)}}))})).catch(i)}));return o(i,t),i},key:function(t,e){var i=this,n=new a((function(e,n){t<0?e(null):i.ready().then((function(){P(i._dbInfo,m,(function(r,s){if(r)return n(r);try{var a=s.objectStore(i._dbInfo.storeName),o=!1,l=a.openKeyCursor();l.onsuccess=function(){var i=l.result;i?0===t||o?e(i.key):(o=!0,i.advance(t)):e(null)},l.onerror=function(){n(l.error)}}catch(t){n(t)}}))})).catch(n)}));return o(n,e),n},keys:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){P(e._dbInfo,m,(function(n,r){if(n)return i(n);try{var s=r.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];s.onsuccess=function(){var e=s.result;e?(a.push(e.key),e.continue()):t(a)},s.onerror=function(){i(s.error)}}catch(t){i(t)}}))})).catch(i)}));return o(i,t),i},dropInstance:function(t,e){e=u.apply(this,arguments);var i,n=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName),t.name){var s=t.name===n.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):S(t).then((function(e){var i=p[t.name],n=i.forages;i.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e}));i=t.storeName?s.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var i=e.version+1;b(t);var n=p[t.name],s=n.forages;e.close();for(var o=0;o<s.length;o++){var l=s[o];l._dbInfo.db=null,l._dbInfo.version=i}var c=new a((function(e,n){var s=r.open(t.name,i);s.onerror=function(t){s.result.close(),n(t)},s.onupgradeneeded=function(){s.result.deleteObjectStore(t.storeName)},s.onsuccess=function(){var t=s.result;t.close(),e(t)}}));return c.then((function(t){n.db=t;for(var e=0;e<s.length;e++){var i=s[e];i._dbInfo.db=t,_(i._dbInfo)}})).catch((function(e){throw(w(t,e)||a.resolve()).catch((function(){})),e}))}})):s.then((function(e){b(t);var i=p[t.name],n=i.forages;e.close();for(var s=0;s<n.length;s++)n[s]._dbInfo.db=null;var o=new a((function(e,i){var n=r.deleteDatabase(t.name);n.onerror=function(){var t=n.result;t&&t.close(),i(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}}));return o.then((function(t){i.db=t;for(var e=0;e<n.length;e++)_(n[e]._dbInfo)})).catch((function(e){throw(w(t,e)||a.resolve()).catch((function(){})),e}))}))}else i=a.reject("Invalid arguments");return o(i,e),i}};var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="~~local_forage_type~",D=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",R=M.length,N="arbf",B="blob",F="si08",$="ui08",U="uic8",j="si16",V="si32",H="ur16",q="ui32",W="fl32",z="fl64",G=R+N.length,K=Object.prototype.toString;function Y(t){var e,i,n,r,s,a=.75*t.length,o=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(e=0;e<o;e+=4)i=L.indexOf(t[e]),n=L.indexOf(t[e+1]),r=L.indexOf(t[e+2]),s=L.indexOf(t[e+3]),u[l++]=i<<2|n>>4,u[l++]=(15&n)<<4|r>>2,u[l++]=(3&r)<<6|63&s;return c}function X(t){var e,i=new Uint8Array(t),n="";for(e=0;e<i.length;e+=3)n+=L[i[e]>>2],n+=L[(3&i[e])<<4|i[e+1]>>4],n+=L[(15&i[e+1])<<2|i[e+2]>>6],n+=L[63&i[e+2]];return i.length%3==2?n=n.substring(0,n.length-1)+"=":i.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var Q={serialize:function(t,e){var i="";if(t&&(i=K.call(t)),t&&("[object ArrayBuffer]"===i||t.buffer&&"[object ArrayBuffer]"===K.call(t.buffer))){var n,r=M;t instanceof ArrayBuffer?(n=t,r+=N):(n=t.buffer,"[object Int8Array]"===i?r+=F:"[object Uint8Array]"===i?r+=$:"[object Uint8ClampedArray]"===i?r+=U:"[object Int16Array]"===i?r+=j:"[object Uint16Array]"===i?r+=H:"[object Int32Array]"===i?r+=V:"[object Uint32Array]"===i?r+=q:"[object Float32Array]"===i?r+=W:"[object Float64Array]"===i?r+=z:e(new Error("Failed to get type for BinaryArray"))),e(r+X(n))}else if("[object Blob]"===i){var s=new FileReader;s.onload=function(){var i=O+t.type+"~"+X(this.result);e(M+B+i)},s.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(i){console.error("Couldn't convert value into a JSON string: ",t),e(null,i)}},deserialize:function(t){if(t.substring(0,R)!==M)return JSON.parse(t);var e,i=t.substring(G),n=t.substring(R,G);if(n===B&&D.test(i)){var r=i.match(D);e=r[1],i=i.substring(r[0].length)}var a=Y(i);switch(n){case N:return a;case B:return s([a],{type:e});case F:return new Int8Array(a);case $:return new Uint8Array(a);case U:return new Uint8ClampedArray(a);case j:return new Int16Array(a);case H:return new Uint16Array(a);case V:return new Int32Array(a);case q:return new Uint32Array(a);case W:return new Float32Array(a);case z:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:Y,bufferToString:X};function J(t,e,i,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,n)}function Z(t,e,i,n,r,s){t.executeSql(i,n,r,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,o){o.rows.length?s(t,a):J(t,e,(function(){t.executeSql(i,n,r,s)}),s)}),s):s(t,a)}),s)}function tt(t,e,i,n){var r=this;t=c(t);var s=new a((function(s,a){r.ready().then((function(){void 0===e&&(e=null);var o=e,l=r._dbInfo;l.serializer.serialize(e,(function(e,c){c?a(c):l.db.transaction((function(i){Z(i,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){s(o)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void s(tt.apply(r,[t,o,i,n-1]));a(e)}}))}))})).catch(a)}));return o(s,i),s}var et={_driver:"webSQLStorage",_initStorage:function(t){var e=this,i={db:null};if(t)for(var n in t)i[n]="string"!=typeof t[n]?t[n].toString():t[n];var r=new a((function(t,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(t){return n(t)}i.db.transaction((function(r){J(r,i,(function(){e._dbInfo=i,t()}),(function(t,e){n(e)}))}),n)}));return i.serializer=Q,r},_support:"function"==typeof openDatabase,iterate:function(t,e){var i=this,n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){Z(i,r,"SELECT * FROM "+r.storeName,[],(function(i,n){for(var s=n.rows,a=s.length,o=0;o<a;o++){var l=s.item(o),c=l.value;if(c&&(c=r.serializer.deserialize(c)),void 0!==(c=t(c,l.key,o+1)))return void e(c)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return o(n,e),n},getItem:function(t,e){var i=this;t=c(t);var n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){Z(i,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,i){var n=i.rows.length?i.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return o(n,e),n},setItem:function(t,e,i){return tt.apply(this,[t,e,i,1])},removeItem:function(t,e){var i=this;t=c(t);var n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){Z(i,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return o(n,e),n},clear:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){Z(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){i(e)}))}))})).catch(i)}));return o(i,t),i},length:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){Z(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,i){var n=i.rows.item(0).c;t(n)}),(function(t,e){i(e)}))}))})).catch(i)}));return o(i,t),i},key:function(t,e){var i=this,n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){Z(i,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,i){var n=i.rows.length?i.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return o(n,e),n},keys:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){Z(e,n,"SELECT key FROM "+n.storeName,[],(function(e,i){for(var n=[],r=0;r<i.rows.length;r++)n.push(i.rows.item(r).key);t(n)}),(function(t,e){i(e)}))}))})).catch(i)}));return o(i,t),i},dropInstance:function(t,e){e=u.apply(this,arguments);var i=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||i.name,t.storeName=t.storeName||i.storeName);var n,r=this;return o(n=t.name?new a((function(e){var n;n=t.name===i.name?r._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(function(t){return new a((function(e,i){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(i,n){for(var r=[],s=0;s<n.rows.length;s++)r.push(n.rows.item(s).name);e({db:t,storeNames:r})}),(function(t,e){i(e)}))}),(function(t){i(t)}))}))}(n))})).then((function(t){return new a((function(e,i){t.db.transaction((function(n){function r(t){return new a((function(e,i){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){i(e)}))}))}for(var s=[],o=0,l=t.storeNames.length;o<l;o++)s.push(r(t.storeNames[o]));a.all(s).then((function(){e()})).catch((function(t){i(t)}))}),(function(t){i(t)}))}))})):a.reject("Invalid arguments"),e),n}};function it(t,e){var i=t.name+"/";return t.storeName!==e.storeName&&(i+=t.storeName+"/"),i}function nt(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||localStorage.length>0}var rt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var i in t)e[i]=t[i];return e.keyPrefix=it(t,this._defaultConfig),nt()?(this._dbInfo=e,e.serializer=Q,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var i=this,n=i.ready().then((function(){for(var e=i._dbInfo,n=e.keyPrefix,r=n.length,s=localStorage.length,a=1,o=0;o<s;o++){var l=localStorage.key(o);if(0===l.indexOf(n)){var c=localStorage.getItem(l);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,l.substring(r),a++)))return c}}}));return o(n,e),n},getItem:function(t,e){var i=this;t=c(t);var n=i.ready().then((function(){var e=i._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return o(n,e),n},setItem:function(t,e,i){var n=this;t=c(t);var r=n.ready().then((function(){void 0===e&&(e=null);var i=e;return new a((function(r,s){var a=n._dbInfo;a.serializer.serialize(e,(function(e,n){if(n)s(n);else try{localStorage.setItem(a.keyPrefix+t,e),r(i)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||s(t),s(t)}}))}))}));return o(r,i),r},removeItem:function(t,e){var i=this;t=c(t);var n=i.ready().then((function(){var e=i._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return o(n,e),n},clear:function(t){var e=this,i=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return o(i,t),i},length:function(t){var e=this.keys().then((function(t){return t.length}));return o(e,t),e},key:function(t,e){var i=this,n=i.ready().then((function(){var e,n=i._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return o(n,e),n},keys:function(t){var e=this,i=e.ready().then((function(){for(var t=e._dbInfo,i=localStorage.length,n=[],r=0;r<i;r++){var s=localStorage.key(r);0===s.indexOf(t.keyPrefix)&&n.push(s.substring(t.keyPrefix.length))}return n}));return o(i,t),i},dropInstance:function(t,e){if(e=u.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var i=this.config();t.name=t.name||i.name,t.storeName=t.storeName||i.storeName}var n,r=this;return n=t.name?new a((function(e){t.storeName?e(it(t,r._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var i=localStorage.key(e);0===i.indexOf(t)&&localStorage.removeItem(i)}})):a.reject("Invalid arguments"),o(n,e),n}},st=function(t,e){for(var i=t.length,n=0;n<i;){if((r=t[n])===(s=e)||"number"==typeof r&&"number"==typeof s&&isNaN(r)&&isNaN(s))return!0;n++}var r,s;return!1},at=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ot={},lt={},ct={INDEXEDDB:A,WEBSQL:et,LOCALSTORAGE:rt},ut=[ct.INDEXEDDB._driver,ct.WEBSQL._driver,ct.LOCALSTORAGE._driver],ht=["dropInstance"],dt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ht),pt={description:"",driver:ut.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ft(t,e){t[e]=function(){var i=arguments;return t.ready().then((function(){return t[e].apply(t,i)}))}}function mt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var i in e)e.hasOwnProperty(i)&&(at(e[i])?arguments[0][i]=e[i].slice():arguments[0][i]=e[i])}return arguments[0]}var gt=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ct)if(ct.hasOwnProperty(i)){var n=ct[i],r=n._driver;this[i]=r,ot[r]||this.defineDriver(n)}this._defaultConfig=mt({},pt),this._config=mt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,i){var n=new a((function(e,i){try{var n=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void i(r);for(var s=dt.concat("_initStorage"),l=0,c=s.length;l<c;l++){var u=s[l];if((!st(ht,u)||t[u])&&"function"!=typeof t[u])return void i(r)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),i=a.reject(e);return o(i,arguments[arguments.length-1]),i}},i=0,n=ht.length;i<n;i++){var r=ht[i];t[r]||(t[r]=e(r))}}();var h=function(i){ot[n]&&console.info("Redefining LocalForage driver: "+n),ot[n]=t,lt[n]=i,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,i):h(!!t._support):h(!0)}catch(t){i(t)}}));return l(n,e,i),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,i){var n=ot[t]?a.resolve(ot[t]):a.reject(new Error("Driver not found."));return l(n,e,i),n},t.prototype.getSerializer=function(t){var e=a.resolve(Q);return l(e,t),e},t.prototype.ready=function(t){var e=this,i=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(i,t,t),i},t.prototype.setDriver=function(t,e,i){var n=this;at(t)||(t=[t]);var r=this._getSupportedDrivers(t);function s(){n._config.driver=n.driver()}function o(t){return n._extend(t),s(),n._ready=n._initStorage(n._config),n._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=c.then((function(){var t=r[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(t){return function(){var e=0;return function i(){for(;e<t.length;){var r=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(r).then(o).catch(i)}s();var l=new Error("No available storage method found.");return n._driverSet=a.reject(l),n._driverSet}()}}(r)}))})).catch((function(){s();var t=new Error("No available storage method found.");return n._driverSet=a.reject(t),n._driverSet})),l(this._driverSet,e,i),this._driverSet},t.prototype.supports=function(t){return!!lt[t]},t.prototype._extend=function(t){mt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=dt.length;t<e;t++)ft(this,dt[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),yt=new gt;e.exports=yt},{3:3}]},{},[4])(4)},91296:(t,e,i)=>{var n=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,h="object"==typeof self&&self&&self.Object===Object&&self,d=u||h||Function("return this")(),p=Object.prototype.toString,f=Math.max,m=Math.min,g=function(){return d.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return n;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var i=o.test(t);return i||l.test(t)?c(t.slice(2),i?2:8):a.test(t)?n:+t}t.exports=function(t,e,i){var n,r,s,a,o,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var i=n,s=r;return n=r=void 0,c=e,a=t.apply(s,i)}function b(t){var i=t-l;return void 0===l||i>=e||i<0||h&&t-c>=s}function _(){var t=g();if(b(t))return w(t);o=setTimeout(_,function(t){var i=e-(t-l);return h?m(i,s-(t-c)):i}(t))}function w(t){return o=void 0,d&&n?p(t):(n=r=void 0,a)}function T(){var t=g(),i=b(t);if(n=arguments,r=this,l=t,i){if(void 0===o)return function(t){return c=t,o=setTimeout(_,e),u?p(t):a}(l);if(h)return o=setTimeout(_,e),p(l)}return void 0===o&&(o=setTimeout(_,e)),a}return e=v(e)||0,y(i)&&(u=!!i.leading,s=(h="maxWait"in i)?f(v(i.maxWait)||0,e):s,d="trailing"in i?!!i.trailing:d),T.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=r=o=void 0},T.flush=function(){return void 0===o?a:w(g())},T}},84221:(t,e,i)=>{var n=i(46894).getUint64;t.exports=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;0===i.version?(i.earliestPresentationTime=e.getUint32(r),i.firstOffset=e.getUint32(r+4),r+=8):(i.earliestPresentationTime=n(t.subarray(r)),i.firstOffset=n(t.subarray(r+8)),r+=16),r+=2;var s=e.getUint16(r);for(r+=2;s>0;r+=12,s--)i.references.push({referenceType:(128&t[r])>>>7,referencedSize:2147483647&e.getUint32(r),subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(128&t[r+8]),sapType:(112&t[r+8])>>>4,sapDeltaTime:268435455&e.getUint32(r+8)});return i}},51489:t=>{var e,i,n,r,s,a,o,l=9e4;e=function(t){return t*l},i=function(t,e){return t*e},n=function(t){return t/l},r=function(t,e){return t/e},s=function(t,i){return e(r(t,i))},a=function(t,e){return i(n(t),e)},o=function(t,e,i){return n(i?t:t-e)},t.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:e,secondsToAudioTs:i,videoTsToSeconds:n,audioTsToSeconds:r,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o}},46894:t=>{var e=Math.pow(2,32);t.exports={getUint64:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getBigUint64?(i=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(i):i:n.getUint32(0)*e+n.getUint32(4)},MAX_UINT32:e}},33938:(t,e,i)=>{t.exports=i(70212)},66203:(t,e,i)=>{const n=i(2018);t.exports=class{constructor(t,e,...i){const r=t.__original[e](...i);if(!(r instanceof n))throw new TypeError(`Unexpected ${typeof original}, expected: Cursor (nedb/lib/cursor)`);Object.defineProperties(this,{__original:{configurable:!1,enumerable:!1,writable:!1,value:r},__datastore:{configurable:!1,enumerable:!1,writable:!1,value:t},__op:{configurable:!1,enumerable:!1,writable:!1,value:e},__args:{configurable:!1,enumerable:!1,writable:!1,value:i}})}sort(...t){return this.__original.sort(...t),this}skip(...t){return this.__original.skip(...t),this}limit(...t){return this.__original.limit(...t),this}project(...t){return this.__original.projection(...t),this}async exec(){await this.__datastore.load();try{const t=await this.__original.execAsync();return this.__datastore.broadcastSuccess(this.__op,t,...this.__args),t}catch(t){throw this.__datastore.broadcastError(this.__op,t,...this.__args),t}}then(t,e){return this.exec().then(t,e)}catch(t){return this.exec().catch(t)}}},70212:(t,e,i)=>{const n=i(17187),r=i(52795),s=i(66203);t.exports=class extends n{static create(t){return new Proxy(new this(t),{get:(t,e)=>t[e]?t[e]:t.__original[e],set:(t,e,i)=>Object.prototype.hasOwnProperty.call(t.__original,e)?t.__original[e]=i:t[e]=i})}constructor(t){super();const e=new r("string"==typeof t?{filename:t}:t);Object.defineProperties(this,{__loaded:{enumerable:!1,writable:!0,value:null},__original:{configurable:!0,enumerable:!1,writable:!1,value:e}}),this.__original.on("compaction.done",(()=>{this.emit("compactionDone",this)}))}load(){return this.__loaded instanceof Promise||(this.__loaded=this.__original.loadDatabaseAsync().then((()=>this.broadcastSuccess("load"))).catch((t=>{throw this.broadcastError("load",t),t}))),this.__loaded}find(t={},e){return"function"==typeof e&&(e={}),new s(this,"find",t,e)}findOne(t={},e){return"function"==typeof e&&(e={}),new s(this,"findOne",t,e)}async insert(t){await this.load();try{const e=await this.__original.insertAsync(t);return this.broadcastSuccess("insert",t),e}catch(e){throw this.broadcastError("insert",e,t),e}}insertOne({...t}){return this.insert(t)}insertMany([...t]){return this.insert(t)}async update(t,e,i={}){await this.load();try{const{numAffected:n,affectedDocuments:r}=await this.__original.updateAsync(t,e,i),s=i.returnUpdatedDocs?r:n;return this.broadcastSuccess("update",s,t,e,i),s}catch(n){throw this.broadcastError("update",n,t,e,i),n}}updateOne(t,e,i={}){return this.update(t,e,{...i,multi:!1})}updateMany(t,e,i={}){return this.update(t,e,{...i,multi:!0})}async remove(t={},e={}){await this.load();try{const i=await this.__original.removeAsync(t,e);return this.broadcastSuccess("remove",i,t,e),i}catch(i){throw this.broadcastError("remove",i,t,e),i}}removeOne(t,e={}){return this.remove(t,{...e,multi:!1})}removeMany(t,e={}){return this.remove(t,{...e,multi:!0})}deleteOne(t,e){return this.removeOne(t,e)}deleteMany(t,e){return this.removeMany(t,e)}count(t={}){return new s(this,"count",t)}async ensureIndex(t){try{const e=await this.__original.ensureIndexAsync(t);return this.broadcastSuccess("ensureIndex",e,t),e}catch(e){throw this.broadcastError("ensureIndex",e,t),e}}async removeIndex(t){try{const e=await this.__original.removeIndexAsync(t);return this.broadcastSuccess("removeIndex",e,t),e}catch(e){throw this.broadcastError("removeIndex",e,t),e}}broadcastSuccess(t,e,...i){return this.emit(t,this,e,...i),this}broadcastError(t,e,...i){return this.emit(`${t}Error`,this,e,...i),this.emit("__error__",this,t,e,...i),this}}},26470:(t,e,i)=>{"use strict";var n=i(34155);function r(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function s(t,e){for(var i,n="",r=0,s=-1,a=0,o=0;o<=t.length;++o){if(o<t.length)i=t.charCodeAt(o);else{if(47===i)break;i=47}if(47===i){if(s===o-1||1===a);else if(s!==o-1&&2===a){if(n.length<2||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",r=0):r=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),s=o,a=0;continue}}else if(2===n.length||1===n.length){n="",r=0,s=o,a=0;continue}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(s+1,o):n=t.slice(s+1,o),r=o-s-1;s=o,a=0}else 46===i&&-1!==a?++a:a=-1}return n}var a={resolve:function(){for(var t,e="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o;a>=0?o=arguments[a]:(void 0===t&&(t=n.cwd()),o=t),r(o),0!==o.length&&(e=o+"/"+e,i=47===o.charCodeAt(0))}return e=s(e,!i),i?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(r(t),0===t.length)return".";var e=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return 0!==(t=s(t,!e)).length||e||(t="."),t.length>0&&i&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return r(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];r(i),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":a.normalize(t)},relative:function(t,e){if(r(t),r(e),t===e)return"";if((t=a.resolve(t))===(e=a.resolve(e)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var n=t.length,s=n-i,o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var l=e.length-o,c=s<l?s:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===e.charCodeAt(o+h))return e.slice(o+h+1);if(0===h)return e.slice(o+h)}else s>c&&(47===t.charCodeAt(i+h)?u=h:0===h&&(u=0));break}var d=t.charCodeAt(i+h);if(d!==e.charCodeAt(o+h))break;47===d&&(u=h)}var p="";for(h=i+u+1;h<=n;++h)h!==n&&47!==t.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+e.slice(o+u):(o+=u,47===e.charCodeAt(o)&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(r(t),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,n=-1,s=!0,a=t.length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!s){n=a;break}}else s=!1;return-1===n?i?"/":".":i&&1===n?"//":t.slice(0,n)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');r(t);var i,n=0,s=-1,a=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var o=e.length-1,l=-1;for(i=t.length-1;i>=0;--i){var c=t.charCodeAt(i);if(47===c){if(!a){n=i+1;break}}else-1===l&&(a=!1,l=i+1),o>=0&&(c===e.charCodeAt(o)?-1==--o&&(s=i):(o=-1,s=l))}return n===s?s=l:-1===s&&(s=t.length),t.slice(n,s)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!a){n=i+1;break}}else-1===s&&(a=!1,s=i+1);return-1===s?"":t.slice(n,s)},extname:function(t){r(t);for(var e=-1,i=0,n=-1,s=!0,a=0,o=t.length-1;o>=0;--o){var l=t.charCodeAt(o);if(47!==l)-1===n&&(s=!1,n=o+1),46===l?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1);else if(!s){i=o+1;break}}return-1===e||-1===n||0===a||1===a&&e===n-1&&e===i+1?"":t.slice(e,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var i=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+n:i+"/"+n:n}(0,t)},parse:function(t){r(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var i,n=t.charCodeAt(0),s=47===n;s?(e.root="/",i=1):i=0;for(var a=-1,o=0,l=-1,c=!0,u=t.length-1,h=0;u>=i;--u)if(47!==(n=t.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===n?-1===a?a=u:1!==h&&(h=1):-1!==a&&(h=-1);else if(!c){o=u+1;break}return-1===a||-1===l||0===h||1===h&&a===l-1&&a===o+1?-1!==l&&(e.base=e.name=0===o&&s?t.slice(1,l):t.slice(o,l)):(0===o&&s?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(o,a),e.base=t.slice(o,l)),e.ext=t.slice(a,l)),o>0?e.dir=t.slice(0,o-1):s&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,t.exports=a},34155:t=>{var e,i,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var o,l=[],c=!1,u=-1;function h(){c&&o&&(c=!1,o.length?l=o.concat(l):u=-1,l.length&&d())}function d(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(o=l,l=[];++u<e;)o&&o[u].run();u=-1,e=l.length}o=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},75974:t=>{t.exports=function(t,e){var i,n=null;try{i=JSON.parse(t,e)}catch(t){n=t}return[n,i]}},49945:function(t){var e,i,n,r,s;e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,h=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=s.normalizePath(h)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(c)},parseURL:function(t){var i=e.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},20384:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},55955:(t,e,i)=>{"use strict";var n=i(82584),r=i(48662),s=i(86430),a=i(85692);function o(t){return t.call.bind(t)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=o(Object.prototype.toString),h=o(Number.prototype.valueOf),d=o(String.prototype.valueOf),p=o(Boolean.prototype.valueOf);if(l)var f=o(BigInt.prototype.valueOf);if(c)var m=o(Symbol.prototype.valueOf);function g(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function y(t){return"[object Map]"===u(t)}function v(t){return"[object Set]"===u(t)}function b(t){return"[object WeakMap]"===u(t)}function _(t){return"[object WeakSet]"===u(t)}function w(t){return"[object ArrayBuffer]"===u(t)}function T(t){return"undefined"!=typeof ArrayBuffer&&(w.working?w(t):t instanceof ArrayBuffer)}function S(t){return"[object DataView]"===u(t)}function x(t){return"undefined"!=typeof DataView&&(S.working?S(t):t instanceof DataView)}e.isArgumentsObject=n,e.isGeneratorFunction=r,e.isTypedArray=a,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):a(t)||x(t)},e.isUint8Array=function(t){return"Uint8Array"===s(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===s(t)},e.isUint16Array=function(t){return"Uint16Array"===s(t)},e.isUint32Array=function(t){return"Uint32Array"===s(t)},e.isInt8Array=function(t){return"Int8Array"===s(t)},e.isInt16Array=function(t){return"Int16Array"===s(t)},e.isInt32Array=function(t){return"Int32Array"===s(t)},e.isFloat32Array=function(t){return"Float32Array"===s(t)},e.isFloat64Array=function(t){return"Float64Array"===s(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===s(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===s(t)},y.working="undefined"!=typeof Map&&y(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(y.working?y(t):t instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(v.working?v(t):t instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(b.working?b(t):t instanceof WeakMap)},_.working="undefined"!=typeof WeakSet&&_(new WeakSet),e.isWeakSet=function(t){return _(t)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),e.isArrayBuffer=T,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=x;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(t){return"[object SharedArrayBuffer]"===u(t)}function E(t){return void 0!==k&&(void 0===C.working&&(C.working=C(new k)),C.working?C(t):t instanceof k)}function I(t){return g(t,h)}function P(t){return g(t,d)}function A(t){return g(t,p)}function L(t){return l&&g(t,f)}function O(t){return c&&g(t,m)}e.isSharedArrayBuffer=E,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===u(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===u(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===u(t)},e.isGeneratorObject=function(t){return"[object Generator]"===u(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===u(t)},e.isNumberObject=I,e.isStringObject=P,e.isBooleanObject=A,e.isBigIntObject=L,e.isSymbolObject=O,e.isBoxedPrimitive=function(t){return I(t)||P(t)||A(t)||L(t)||O(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(T(t)||E(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},89539:(t,e,i)=>{var n=i(34155),r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},n=0;n<e.length;n++)i[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return i},s=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(c(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,r=n.length,a=String(t).replace(s,(function(t){if("%%"===t)return"%";if(i>=r)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}})),o=n[i];i<r;o=n[++i])y(o)||!T(o)?a+=" "+o:a+=" "+c(o);return a},e.deprecate=function(t,i){if(void 0!==n&&!0===n.noDeprecation)return t;if(void 0===n)return function(){return e.deprecate(t,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),r=!0}return t.apply(this,arguments)}};var a={},o=/^$/;if(n.env.NODE_DEBUG){var l=n.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+l+"$","i")}function c(t,i){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(i)?n.showHidden=i:i&&e._extend(n,i),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),d(n,t,n.depth)}function u(t,e){var i=c.styles[e];return i?"["+c.colors[i][0]+"m"+t+"["+c.colors[i][1]+"m":t}function h(t,e){return t}function d(t,i,n){if(t.customInspect&&i&&k(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return b(r)||(r=d(t,r,n)),r}var s=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return v(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,i);if(s)return s;var a=Object.keys(i),o=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(i)),x(i)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(i);if(0===a.length){if(k(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(w(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(S(i))return t.stylize(Date.prototype.toString.call(i),"date");if(x(i))return p(i)}var c,u="",h=!1,T=["{","}"];return m(i)&&(h=!0,T=["[","]"]),k(i)&&(u=" [Function"+(i.name?": "+i.name:"")+"]"),w(i)&&(u=" "+RegExp.prototype.toString.call(i)),S(i)&&(u=" "+Date.prototype.toUTCString.call(i)),x(i)&&(u=" "+p(i)),0!==a.length||h&&0!=i.length?n<0?w(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=h?function(t,e,i,n,r){for(var s=[],a=0,o=e.length;a<o;++a)P(e,String(a))?s.push(f(t,e,i,n,String(a),!0)):s.push("");return r.forEach((function(r){r.match(/^\d+$/)||s.push(f(t,e,i,n,r,!0))})),s}(t,i,n,o,a):a.map((function(e){return f(t,i,n,o,e,h)})),t.seen.pop(),function(t,e,i){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(c,u,T)):T[0]+u+T[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,i,n,r,s){var a,o,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),P(n,r)||(a="["+r+"]"),o||(t.seen.indexOf(l.value)<0?(o=y(i)?d(t,l.value,null):d(t,l.value,i-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),_(a)){if(s&&r.match(/^\d+$/))return o;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+o}function m(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return void 0===t}function w(t){return T(t)&&"[object RegExp]"===C(t)}function T(t){return"object"==typeof t&&null!==t}function S(t){return T(t)&&"[object Date]"===C(t)}function x(t){return T(t)&&("[object Error]"===C(t)||t instanceof Error)}function k(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(o.test(t)){var i=n.pid;a[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else a[t]=function(){};return a[t]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=i(55955),e.isArray=m,e.isBoolean=g,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=_,e.isRegExp=w,e.types.isRegExp=w,e.isObject=T,e.isDate=S,e.types.isDate=S,e.isError=x,e.types.isNativeError=x,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(20384);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(i=[E((t=new Date).getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":"),[t.getDate(),I[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(35717),e._extend=function(t,e){if(!e||!T(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(A&&t[A]){var e;if("function"!=typeof(e=t[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,n=new Promise((function(t,n){e=t,i=n})),r=[],s=0;s<arguments.length;s++)r.push(arguments[s]);r.push((function(t,n){t?i(t):e(n)}));try{t.apply(this,r)}catch(t){i(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),A&&Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=A,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);var r=e.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var s=this,a=function(){return r.apply(s,arguments)};t.apply(this,e).then((function(t){n.nextTick(a.bind(null,null,t))}),(function(t){n.nextTick(L.bind(null,t,a))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,r(t)),e}},61928:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>Yc});var n=i(58908),r=i.n(n),s=i(89144),a=i.n(s),o=i(87462),l=i(27537),c=i.n(l);function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}var p=i(75974),f=i.n(p),m=i(9603),g=i.n(m),y=i(13407),v=i.n(y);function b(t,e,i){return b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&h(r,i.prototype),r},b.apply(null,arguments)}var _=i(49945),w=i.n(_),T="http://example.com";const S=function(t,e){if(/^[a-z]+:/i.test(e))return e;/^data:/.test(t)&&(t=r().location&&r().location.href||"");var i="function"==typeof r().URL,n=/^\/\//.test(t),s=!r().location&&!/\/\//i.test(t);if(i?t=new(r().URL)(t,r().location||T):/\/\//i.test(t)||(t=w().buildAbsoluteURL(r().location&&r().location.href||"",t)),i){var a=new URL(e,t);return s?a.href.slice(T.length):n?a.href.slice(a.protocol.length):a.href}return w().buildAbsoluteURL(t,e)};var x=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=e.length,a=0;a<s;++a)e[a].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}(),k=i(48764).lW,C=function(t){return r().atob?r().atob(t):k.from(t,"base64").toString("binary")};function E(t){for(var e=C(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}var I,P,A,L=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return d(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(x),O=String.fromCharCode(9),D=function(t){var e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},M=function(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((e=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),n[e[0]]=e[1]);return n},R=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}d(e,t);var i=e.prototype;return i.push=function(t){var e,i,n=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,i){var n=i(t);return n===t?e:e.concat([n])}),[t]).forEach((function(t){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void n.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void n.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t))return i=(0,o.Z)(D(e[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var s=M(e[1]);s.URI&&(i.uri=s.URI),s.BYTERANGE&&(i.byterange=D(s.BYTERANGE))}n.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=M(e[1]),i.attributes.RESOLUTION){var a=i.attributes.RESOLUTION.split("x"),l={};a[0]&&(l.width=parseInt(a[0],10)),a[1]&&(l.height=parseInt(a[1],10)),i.attributes.RESOLUTION=l}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=M(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))n.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=M(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=M(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if((e=/^#EXT-X-SKIP:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"skip"}).attributes=M(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(O)),void n.trigger("data",i);if((e=/^#EXT-X-PART:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"part"}).attributes=M(e[1]),["DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=D(i.attributes.BYTERANGE)),void n.trigger("data",i);if((e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"server-control"}).attributes=M(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),void n.trigger("data",i);if((e=/^#EXT-X-PART-INF:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"part-inf"}).attributes=M(e[1]),["PART-TARGET"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),void n.trigger("data",i);if((e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"preload-hint"}).attributes=M(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(i.attributes.hasOwnProperty(t)){i.attributes[t]=parseInt(i.attributes[t],10);var e="BYTERANGE-LENGTH"===t?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[e]=i.attributes[t],delete i.attributes[t]}})),void n.trigger("data",i);if((e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"rendition-report"}).attributes=M(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseInt(i.attributes[t],10))})),void n.trigger("data",i);n.trigger("data",{type:"tag",data:t.slice(4)})}}}else n.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,n=t.customType,r=t.dataParser,s=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push((function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:n,segment:s}),!0}))},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push((function(t){return e.test(t)?i(t):t}))},e}(x),N=function(t){var e={};return Object.keys(t).forEach((function(i){var n;e[(n=i,n.toLowerCase().replace(/-(\w)/g,(function(t){return t[1].toUpperCase()})))]=t[i]})),e},B=function(t){var e=t.serverControl,i=t.targetDuration,n=t.partTargetDuration;if(e){var r="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=i&&3*i,l=n&&2*n;i&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+o+")."})),o&&e[s]<o&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+e[s]+") to targetDuration * 3 ("+o+")"}),e[s]=o),n&&!e.hasOwnProperty(a)&&(e[a]=3*n,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+e[a]+")."})),n&&e[a]<l&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+e[a]+") to partTargetDuration * 2 ("+l+")."}),e[a]=l)}},F=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new L,e.parseStream=new R,e.lineStream.pipe(e.parseStream);var i,n,r=u(e),s=[],a={},l=!1,c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var p=0,f=0;return e.on("end",(function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&i&&(a.map=i),!a.key&&n&&(a.key=n),a.timeline||"number"!=typeof d||(a.timeline=d),e.manifest.preloadSegment=a)})),e.parseStream.on("data",(function(t){var e,u;({tag:function(){({version:function(){t.version&&(this.manifest.version=t.version)},"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(a.byterange=e,e.length=t.length,"offset"in t||(t.offset=p)),"offset"in t&&(a.byterange=e,e.offset=t.offset),p=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("com.microsoft.playready"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:t.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:E(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(n.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,d=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange),n&&(i.key=n)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,t.attributes?(a.attributes||(a.attributes={}),(0,o.Z)(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(u={default:/yes/i.test(t.attributes.DEFAULT)}).default?u.autoselect=!0:u.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(u.language=t.attributes.LANGUAGE),t.attributes.URI&&(u.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(u.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(u.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(u.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=u}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){d+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),a.dateTimeString=t.dateTimeString,a.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,B.call(this,this.manifest))},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":function(){a.cueIn=t.data},skip:function(){this.manifest.skip=N(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part:function(){var e=this;l=!0;var i=this.manifest.segments.length,n=N(t.attributes);a.parts=a.parts||[],a.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=f),f=n.byterange.offset+n.byterange.length);var r=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+i,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(t,i){t.hasOwnProperty("lastPart")||e.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var e=this.manifest.serverControl=N(t.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),B.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,i=N(t.attributes),n=i.type&&"PART"===i.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=n?f:0,n&&(f=i.byterange.offset+i.byterange.length)));var r=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+e,t.attributes,["TYPE","URI"]),i.type)for(var s=0;s<a.preloadHints.length-1;s++){var o=a.preloadHints[s];o.type&&o.type===i.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+e+" has the same TYPE "+i.type+" as preload hint #"+s})}},"rendition-report":function(){var e=N(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);var i=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];l&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,t.attributes,n)},"part-inf":function(){this.manifest.partInf=N(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),B.call(this,this.manifest)}}[t.tagType]||c).call(r)},uri:function(){a.uri=t.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),n&&(a.key=n),a.timeline=d,i&&(a.map=i),f=0,a={}},comment:function(){},custom:function(){t.segment?(a.custom=a.custom||{},a.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)})),e}d(e,t);var i=e.prototype;return i.warnOnMissingAttributes_=function(t,e,i){var n=[];i.forEach((function(t){e.hasOwnProperty(t)||n.push(t)})),n.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+n.join(", ")})},i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(x),$={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},U=["video","audio","text"],j=["Video","Audio","Text"],V=function(t){return t?t.replace(/avc1\.(\d+)\.(\d+)/i,(function(t,e,i){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})):t},H=function(t){void 0===t&&(t="");var e=t.split(","),i=[];return e.forEach((function(t){var e;t=t.trim(),U.forEach((function(n){var r=$[n].exec(t.toLowerCase());if(r&&!(r.length<=1)){e=n;var s=t.substring(0,r[1].length),a=t.replace(s,"");i.push({type:s,details:a,mediaType:n})}})),e||i.push({type:t,details:"",mediaType:"unknown"})})),i},q=function(t){return void 0===t&&(t=""),$.audio.test(t.trim().toLowerCase())},W=function(t){if(t&&"string"==typeof t){var e,i=t.toLowerCase().split(",").map((function(t){return V(t.trim())})),n="video";1===i.length&&q(i[0])?n="audio":1===i.length&&(void 0===(e=i[0])&&(e=""),$.text.test(e.trim().toLowerCase()))&&(n="application");var r="mp4";return i.every((function(t){return $.mp4.test(t)}))?r="mp4":i.every((function(t){return $.webm.test(t)}))?r="webm":i.every((function(t){return $.ogg.test(t)}))&&(r="ogg"),n+"/"+r+';codecs="'+t+'"'}},z=function(t){return void 0===t&&(t=""),r().MediaSource&&r().MediaSource.isTypeSupported&&r().MediaSource.isTypeSupported(W(t))||!1},G=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every((function(t){t=t.trim();for(var e=0;e<j.length;e++)if($["muxer"+j[e]].test(t))return!0;return!1}))},K="mp4a.40.2",Y=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,X=/^application\/dash\+xml/i,Q=function(t){return Y.test(t)?"hls":X.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null},J=function(t){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},Z=function(t){return t instanceof Uint8Array?t:(Array.isArray(t)||J(t)||t instanceof ArrayBuffer||(t="number"!=typeof t||"number"==typeof t&&t!=t?0:[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},tt=r().BigInt||Number,et=[tt("0x1"),tt("0x100"),tt("0x10000"),tt("0x1000000"),tt("0x100000000"),tt("0x10000000000"),tt("0x1000000000000"),tt("0x100000000000000"),tt("0x10000000000000000")],it=(I=new Uint16Array([65484]),255===(P=new Uint8Array(I.buffer,I.byteOffset,I.byteLength))[0]||P[0],function(t,e){var i=void 0===e?{}:e,n=i.signed,r=void 0!==n&&n,s=i.le,a=void 0!==s&&s;t=Z(t);var o=a?"reduce":"reduceRight",l=(t[o]?t[o]:Array.prototype[o]).call(t,(function(e,i,n){var r=a?n:Math.abs(n+1-t.length);return e+tt(i)*et[r]}),tt(0));if(r){var c=et[t.length]/tt(2)-tt(1);(l=tt(l))>c&&(l-=c,l-=c,l-=tt(2))}return Number(l)}),nt=function(t,e){if("string"!=typeof t&&t&&"function"==typeof t.toString&&(t=t.toString()),"string"!=typeof t)return new Uint8Array;e||(t=unescape(encodeURIComponent(t)));for(var i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i},rt=function(t,e,i){var n=void 0===i?{}:i,r=n.offset,s=void 0===r?0:r,a=n.mask,o=void 0===a?[]:a;t=Z(t);var l=(e=Z(e)).every?e.every:Array.prototype.every;return e.length&&t.length-s>=e.length&&l.call(e,(function(e,i){return e===(o[i]?o[i]&t[s+i]:t[s+i])}))},st=i(3969),at=function(t){return!!t&&"object"==typeof t},ot=function t(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.reduce((function(e,i){return"object"!=typeof i||Object.keys(i).forEach((function(n){Array.isArray(e[n])&&Array.isArray(i[n])?e[n]=e[n].concat(i[n]):at(e[n])&&at(i[n])?e[n]=t(e[n],i[n]):e[n]=i[n]})),e}),{})},lt=function(t){return Object.keys(t).map((function(e){return t[e]}))},ct=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},ut=function(t){if(!t.length)return[];for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},ht=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return i;return-1},dt=function(t){var e=t.baseUrl,i=void 0===e?"":e,n=t.source,s=void 0===n?"":n,a=t.range,o=void 0===a?"":a,l=t.indexRange,c=void 0===l?"":l,u={uri:s,resolvedUri:S(i||"",s)};if(o||c){var h,d=(o||c).split("-"),p=r().BigInt?r().BigInt(d[0]):parseInt(d[0],10),f=r().BigInt?r().BigInt(d[1]):parseInt(d[1],10);p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),f<Number.MAX_SAFE_INTEGER&&"bigint"==typeof f&&(f=Number(f)),"bigint"==typeof(h="bigint"==typeof f||"bigint"==typeof p?r().BigInt(f)-r().BigInt(p)+r().BigInt(1):f-p+1)&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),u.byterange={length:h,offset:p}}return u},pt=function(t){return t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},ft={static:function(t){var e=t.duration,i=t.timescale,n=void 0===i?1:i,r=t.sourceDuration,s=t.periodDuration,a=pt(t.endNumber),o=e/n;return"number"==typeof a?{start:0,end:a}:"number"==typeof s?{start:0,end:s/o}:{start:0,end:r/o}},dynamic:function(t){var e=t.NOW,i=t.clientOffset,n=t.availabilityStartTime,r=t.timescale,s=void 0===r?1:r,a=t.duration,o=t.periodStart,l=void 0===o?0:o,c=t.minimumUpdatePeriod,u=void 0===c?0:c,h=t.timeShiftBufferDepth,d=void 0===h?1/0:h,p=pt(t.endNumber),f=(e+i)/1e3,m=n+l,g=f+u-m,y=Math.ceil(g*s/a),v=Math.floor((f-m-d)*s/a),b=Math.floor((f-m)*s/a);return{start:Math.max(0,v),end:"number"==typeof p?p:Math.min(y,b)}}},mt=function(t){var e=t.type,i=t.duration,n=t.timescale,r=void 0===n?1:n,s=t.periodDuration,a=t.sourceDuration,o=ft[e](t),l=function(t,e){for(var i=[],n=t;n<e;n++)i.push(n);return i}(o.start,o.end).map(function(t){return function(e){var i=t.duration,n=t.timescale,r=void 0===n?1:n,s=t.periodStart,a=t.startNumber;return{number:(void 0===a?1:a)+e,duration:i/r,timeline:s,time:e*i}}}(t));if("static"===e){var c=l.length-1,u="number"==typeof s?s:a;l[c].duration=u-i/r*c}return l},gt=function(t){var e=t.baseUrl,i=t.initialization,n=void 0===i?{}:i,r=t.sourceDuration,s=t.indexRange,a=void 0===s?"":s,o=t.periodStart,l=t.presentationTime,c=t.number,u=void 0===c?0:c,h=t.duration;if(!e)throw new Error("NO_BASE_URL");var d=dt({baseUrl:e,source:n.sourceURL,range:n.range}),p=dt({baseUrl:e,source:e,indexRange:a});if(p.map=d,h){var f=mt(t);f.length&&(p.duration=f[0].duration,p.timeline=f[0].timeline)}else r&&(p.duration=r,p.timeline=o);return p.presentationTime=l||o,p.number=u,[p]},yt=function(t,e,i){var n,s=t.sidx.map?t.sidx.map:null,a=t.sidx.duration,o=t.timeline||0,l=t.sidx.byterange,c=l.offset+l.length,u=e.timescale,h=e.references.filter((function(t){return 1!==t.referenceType})),d=[],p=t.endList?"static":"dynamic",f=t.sidx.timeline,m=f,g=t.mediaSequence||0;n="bigint"==typeof e.firstOffset?r().BigInt(c)+e.firstOffset:c+e.firstOffset;for(var y=0;y<h.length;y++){var v,b=e.references[y],_=b.referencedSize,w=b.subsegmentDuration;v="bigint"==typeof n?n+r().BigInt(_)-r().BigInt(1):n+_-1;var T=gt({baseUrl:i,timescale:u,timeline:o,periodStart:f,presentationTime:m,number:g,duration:w,sourceDuration:a,indexRange:n+"-"+v,type:p})[0];s&&(T.map=s),d.push(T),n+="bigint"==typeof n?r().BigInt(_):_,m+=w/u,g++}return t.segments=d,t},vt=["AUDIO","SUBTITLES"],bt=function(t){return(e=t,i=function(t){return t.timeline},lt(e.reduce((function(t,e){return e.forEach((function(e){t[i(e)]=e})),t}),{}))).sort((function(t,e){return t.timeline>e.timeline?1:-1}));var e,i},_t=function(t){var e,i,n=[];return e=t,i=function(t,e,i,r){n=n.concat(t.playlists||[])},vt.forEach((function(t){for(var n in e.mediaGroups[t])for(var r in e.mediaGroups[t][n]){var s=e.mediaGroups[t][n][r];i(s)}})),n},wt=function(t){var e=t.playlist,i=t.mediaSequence;e.mediaSequence=i,e.segments.forEach((function(t,i){t.number=e.mediaSequence+i}))},Tt=function(t){return t&&t.uri+"-"+(i="bigint"==typeof(e=t.byterange).offset||"bigint"==typeof e.length?r().BigInt(e.offset)+r().BigInt(e.length)-r().BigInt(1):e.offset+e.length-1,e.offset+"-"+i);var e,i},St=function(t){return lt(t.reduce((function(t,e){var i,n=e.attributes.id+(e.attributes.lang||"");t[n]?(e.segments&&(e.segments[0]&&(e.segments[0].discontinuity=!0),(i=t[n].segments).push.apply(i,e.segments)),e.attributes.contentProtection&&(t[n].attributes.contentProtection=e.attributes.contentProtection)):(t[n]=e,t[n].attributes.timelineStarts=[]);return t[n].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),t}),{})).map((function(t){var e;return t.discontinuityStarts=(e=t.segments||[],"discontinuity",e.reduce((function(t,e,i){return e.discontinuity&&t.push(i),t}),[])),t}))},xt=function(t,e){var i=Tt(t.sidx),n=i&&e[i]&&e[i].sidx;return n&&yt(t,n,t.sidx.resolvedUri),t},kt=function(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var i in t)t[i]=xt(t[i],e);return t},Ct=function(t){var e,i=t.attributes,n=t.segments,r=t.sidx,s=t.discontinuityStarts,a={attributes:(e={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:s,timelineStarts:i.timelineStarts,segments:n};return i.frameRate&&(a.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a},Et=function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType},It=function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType},Pt=function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType},At=function(t){return t?Object.keys(t).reduce((function(e,i){var n=t[i];return e.concat(n.playlists)}),[]):[]},Lt=function(t){var e,i=t.dashPlaylists,n=t.locations,r=t.sidxMapping,s=void 0===r?{}:r,a=t.previousManifest;if(!i.length)return{};var o=i[0].attributes,l=o.sourceDuration,c=o.type,u=o.suggestedPresentationDelay,h=o.minimumUpdatePeriod,d=St(i.filter(Et)).map(Ct),p=St(i.filter(It)),f=St(i.filter(Pt)),m=i.map((function(t){return t.attributes.captionServices})).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:l,playlists:kt(d,s)};h>=0&&(g.minimumUpdatePeriod=1e3*h),n&&(g.locations=n),"dynamic"===c&&(g.suggestedPresentationDelay=u);var y,v,b,_,w,T,S,x=0===g.playlists.length,k=p.length?function(t,e,i){var n;void 0===e&&(e={}),void 0===i&&(i=!1);var r=t.reduce((function(t,r){var s=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"",o=r.attributes.label||"main";if(a&&!r.attributes.label){var l=s?" ("+s+")":"";o=""+r.attributes.lang+l}t[o]||(t[o]={language:a,autoselect:!0,default:"main"===s,playlists:[],uri:""});var c=xt(function(t,e){var i,n=t.attributes,r=t.segments,s=t.sidx,a=t.mediaSequence,o=t.discontinuitySequence,l=t.discontinuityStarts,c={attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:o,discontinuityStarts:l,timelineStarts:n.timelineStarts,mediaSequence:a,segments:r};return n.contentProtection&&(c.contentProtection=n.contentProtection),s&&(c.sidx=s),e&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c}(r,i),e);return t[o].playlists.push(c),void 0===n&&"main"===s&&((n=r).default=!0),t}),{});return n||(r[Object.keys(r)[0]].default=!0),r}(p,s,x):null,C=f.length?function(t,e){return void 0===e&&(e={}),t.reduce((function(t,i){var n=i.attributes.lang||"text";return t[n]||(t[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),t[n].playlists.push(xt(function(t){var e,i=t.attributes,n=t.segments,r=t.mediaSequence,s=t.discontinuityStarts,a=t.discontinuitySequence;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var o=((e={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,e);return i.codecs&&(o.CODECS=i.codecs),{attributes:o,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:s,discontinuitySequence:a,mediaSequence:r,segments:n}}(i),e)),t}),{})}(f,s):null,E=d.concat(At(k),At(C)),I=E.map((function(t){return t.timelineStarts}));return g.timelineStarts=bt(I),y=E,v=g.timelineStarts,y.forEach((function(t){t.mediaSequence=0,t.discontinuitySequence=ht(v,(function(e){return e.timeline===t.timeline})),t.segments&&t.segments.forEach((function(t,e){t.number=e}))})),k&&(g.mediaGroups.AUDIO.audio=k),C&&(g.mediaGroups.SUBTITLES.subs=C),m.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=m.reduce((function(t,e){return e?(e.forEach((function(e){var i=e.channel,n=e.language;t[n]={autoselect:!1,default:!1,instreamId:i,language:n},e.hasOwnProperty("aspectRatio")&&(t[n].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(t[n].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(t[n]["3D"]=e["3D"])})),t):t}),{})),a?(_=(b={oldManifest:a,newManifest:g}).oldManifest,w=b.newManifest,T=_.playlists.concat(_t(_)),S=w.playlists.concat(_t(w)),w.timelineStarts=bt([_.timelineStarts,w.timelineStarts]),function(t){var e=t.oldPlaylists,i=t.timelineStarts;t.newPlaylists.forEach((function(t){t.discontinuitySequence=ht(i,(function(e){return e.timeline===t.timeline}));var n=function(t,e){for(var i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null}(e,t.attributes.NAME);if(n&&!t.sidx){var r=t.segments[0],s=ht(n.segments,(function(t){return Math.abs(t.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===s)return wt({playlist:t,mediaSequence:n.mediaSequence+n.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!n.segments.length&&t.timeline>n.timeline||n.segments.length&&t.timeline>n.segments[n.segments.length-1].timeline)&&t.discontinuitySequence--);n.segments[s].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),wt({playlist:t,mediaSequence:n.segments[s].number})}}))}({oldPlaylists:T,newPlaylists:S,timelineStarts:w.timelineStarts}),w):g},Ot=function(t,e,i){var n=t.NOW,r=t.clientOffset,s=t.availabilityStartTime,a=t.timescale,o=void 0===a?1:a,l=t.periodStart,c=void 0===l?0:l,u=t.minimumUpdatePeriod,h=(n+r)/1e3+(void 0===u?0:u)-(s+c);return Math.ceil((h*o-e)/i)},Dt=function(t,e){for(var i=t.type,n=t.minimumUpdatePeriod,r=void 0===n?0:n,s=t.media,a=void 0===s?"":s,o=t.sourceDuration,l=t.timescale,c=void 0===l?1:l,u=t.startNumber,h=void 0===u?1:u,d=t.periodStart,p=[],f=-1,m=0;m<e.length;m++){var g=e[m],y=g.d,v=g.r||0,b=g.t||0;f<0&&(f=b),b&&b>f&&(f=b);var _=void 0;if(v<0){var w=m+1;_=w===e.length?"dynamic"===i&&r>0&&a.indexOf("$Number$")>0?Ot(t,f,y):(o*c-f)/y:(e[w].t-f)/y}else _=v+1;for(var T=h+p.length+_,S=h+p.length;S<T;)p.push({number:S,duration:y/c,time:f,timeline:d}),f+=y,S++}return p},Mt=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Rt=function(t,e){return t.replace(Mt,function(t){return function(e,i,n,r){if("$$"===e)return"$";if(void 0===t[i])return e;var s=""+t[i];return"RepresentationID"===i?s:(r=n?parseInt(r,10):1,s.length>=r?s:""+new Array(r-s.length+1).join("0")+s)}}(e))},Nt=function(t,e){var i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},n=t.initialization,r=void 0===n?{sourceURL:"",range:""}:n,s=dt({baseUrl:t.baseUrl,source:Rt(r.sourceURL,i),range:r.range}),a=function(t,e){return t.duration||e?t.duration?mt(t):Dt(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]}(t,e);return a.map((function(e){i.Number=e.number,i.Time=e.time;var n=Rt(t.media||"",i),r=t.timescale||1,a=t.presentationTimeOffset||0,o=t.periodStart+(e.time-a)/r;return{uri:n,timeline:e.timeline,duration:e.duration,resolvedUri:S(t.baseUrl||"",n),map:s,number:e.number,presentationTime:o}}))},Bt=function(t,e){var i=t.duration,n=t.segmentUrls,r=void 0===n?[]:n,s=t.periodStart;if(!i&&!e||i&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,o=r.map((function(e){return function(t,e){var i=t.baseUrl,n=t.initialization,r=void 0===n?{}:n,s=dt({baseUrl:i,source:r.sourceURL,range:r.range}),a=dt({baseUrl:i,source:e.media,range:e.mediaRange});return a.map=s,a}(t,e)}));return i&&(a=mt(t)),e&&(a=Dt(t,e)),a.map((function(e,i){if(o[i]){var n=o[i],r=t.timescale||1,a=t.presentationTimeOffset||0;return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n.presentationTime=s+(e.time-a)/r,n}})).filter((function(t){return t}))},Ft=function(t){var e,i,n=t.attributes,r=t.segmentInfo;r.template?(i=Nt,e=ot(n,r.template)):r.base?(i=gt,e=ot(n,r.base)):r.list&&(i=Bt,e=ot(n,r.list));var s={attributes:n};if(!i)return s;var a=i(e,r.segmentTimeline);if(e.duration){var o=e,l=o.duration,c=o.timescale,u=void 0===c?1:c;e.duration=l/u}else a.length?e.duration=a.reduce((function(t,e){return Math.max(t,Math.ceil(e.duration))}),0):e.duration=0;return s.attributes=e,s.segments=a,r.base&&e.indexRange&&(s.sidx=a[0],s.segments=[]),s},$t=function(t,e){return ut(t.childNodes).filter((function(t){return t.tagName===e}))},Ut=function(t){return t.textContent.trim()},jt=function(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var i=e.slice(1),n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(s||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(l||0)},Vt={mediaPresentationDuration:function(t){return jt(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:function(t){return jt(t)},suggestedPresentationDelay:function(t){return jt(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return jt(t)},start:function(t){return jt(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},frameRate:function(t){return function(t){return parseFloat(t.split("/").reduce((function(t,e){return t/e})))}(t)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?jt(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Ht=function(t){return t&&t.attributes?ut(t.attributes).reduce((function(t,e){var i=Vt[e.name]||Vt.DEFAULT;return t[e.name]=i(e.value),t}),{}):{}},qt={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Wt=function(t,e){return e.length?ct(t.map((function(t){return e.map((function(e){return S(t,Ut(e))}))}))):t},zt=function(t){var e=$t(t,"SegmentTemplate")[0],i=$t(t,"SegmentList")[0],n=i&&$t(i,"SegmentURL").map((function(t){return ot({tag:"SegmentURL"},Ht(t))})),r=$t(t,"SegmentBase")[0],s=i||e,a=s&&$t(s,"SegmentTimeline")[0],o=i||r||e,l=o&&$t(o,"Initialization")[0],c=e&&Ht(e);c&&l?c.initialization=l&&Ht(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,segmentTimeline:a&&$t(a,"S").map((function(t){return Ht(t)})),list:i&&ot(Ht(i),{segmentUrls:n,initialization:Ht(l)}),base:r&&ot(Ht(r),{initialization:Ht(l)})};return Object.keys(u).forEach((function(t){u[t]||delete u[t]})),u},Gt=function(t,e){return function(i,n){var r=Wt(e,$t(i.node,"BaseURL")),s=ot(t,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(s.periodDuration=i.attributes.duration);var a=$t(i.node,"AdaptationSet"),o=zt(i.node);return ct(a.map(function(t,e,i){return function(n){var r,s=Ht(n),a=Wt(e,$t(n,"BaseURL")),o=$t(n,"Role")[0],l={role:Ht(o)},c=ot(t,s,l),u=$t(n,"Accessibility")[0],h="urn:scte:dash:cc:cea-608:2015"===(r=Ht(u)).schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(t){var e,i;if(i=t,/^CC\d=/.test(t)){var n=t.split("=");e=n[0],i=n[1]}else/^CC\d$/.test(t)&&(e=t);return{channel:e,language:i}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(t){var e={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var i=t.split("="),n=i[0],r=i[1],s=void 0===r?"":r;e.channel=n,e.language=t,s.split(",").forEach((function(t){var i=t.split(":"),n=i[0],r=i[1];"lang"===n?e.language=r:"er"===n?e.easyReader=Number(r):"war"===n?e.aspectRatio=Number(r):"3D"===n&&(e["3D"]=Number(r))}))}else e.language=t;return e.channel&&(e.channel="SERVICE"+e.channel),e})):void 0;h&&(c=ot(c,{captionServices:h}));var d=$t(n,"Label")[0];if(d&&d.childNodes.length){var p=d.childNodes[0].nodeValue.trim();c=ot(c,{label:p})}var f=$t(n,"ContentProtection").reduce((function(t,e){var i=Ht(e);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var n=qt[i.schemeIdUri];if(n){t[n]={attributes:i};var r=$t(e,"cenc:pssh")[0];if(r){var s=Ut(r);t[n].pssh=s&&E(s)}}return t}),{});Object.keys(f).length&&(c=ot(c,{contentProtection:f}));var m=zt(n),g=$t(n,"Representation"),y=ot(i,m);return ct(g.map(function(t,e,i){return function(n){var r=$t(n,"BaseURL"),s=Wt(e,r),a=ot(t,Ht(n)),o=zt(n);return s.map((function(t){return{segmentInfo:ot(i,o),attributes:ot(a,{baseUrl:t})}}))}}(c,a,y)))}}(s,r,o)))}},Kt=function(t){if(""===t)throw new Error("DASH_EMPTY_MANIFEST");var e,i,n=new st.DOMParser;try{i=(e=n.parseFromString(t,"application/xml"))&&"MPD"===e.documentElement.tagName?e.documentElement:null}catch(t){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},Yt=i(84221),Xt=i.n(Yt),Qt=Z([73,68,51]),Jt=function t(e,i){return void 0===i&&(i=0),(e=Z(e)).length-i<10||!rt(e,Qt,{offset:i})?i:(i+=function(t,e){void 0===e&&(e=0);var i=(t=Z(t))[e+5],n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&i)>>4?n+20:n+10}(e,i),t(e,i))},Zt=(new Uint8Array([79,112,117,115,72,101,97,100]),function(t){return"string"==typeof t?nt(t):t}),te=function(t){t=Z(t);for(var e=[],i=0;t.length>i;){var n=t[i],r=0,s=0,a=t[++s];for(s++;128&a;)r=(127&a)<<7,a=t[s],s++;r+=127&a;for(var o=0;o<A.length;o++){var l=A[o],c=l.id,u=l.parser;if(n===c){e.push(u(t.subarray(s,s+r)));break}}i+=r+s}return e};A=[{id:3,parser:function(t){var e={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&e.flags&&(e.dependsOnEsId=t[e.size]<<8|t[e.size+1],e.size+=2),64&e.flags){var i=t[e.size];e.url=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var e=String.fromCharCode.apply(null,Z(t));try{return decodeURIComponent(escape(e))}catch(t){}return e}(t.subarray(e.size+1,e.size+1+i)),e.size+=i}return 32&e.flags&&(e.ocrEsId=t[e.size]<<8|t[e.size+1],e.size+=2),e.descriptors=te(t.subarray(e.size))||[],e}},{id:4,parser:function(t){return{tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:te(t.subarray(13))}}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var ee=function t(e,i,n){void 0===n&&(n=!1),i=function(t){return Array.isArray(t)?t.map((function(t){return Zt(t)})):[Zt(t)]}(i),e=Z(e);var r=[];if(!i.length)return r;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(0===a)break;var l=s+a;if(l>e.length){if(n)break;l=e.length}var c=e.subarray(s+8,l);rt(o,i[0])&&(1===i.length?r.push(c):r.push.apply(r,t(c,i.slice(1),n))),s=l}return r},ie={EBML:Z([26,69,223,163]),DocType:Z([66,130]),Segment:Z([24,83,128,103]),SegmentInfo:Z([21,73,169,102]),Tracks:Z([22,84,174,107]),Track:Z([174]),TrackNumber:Z([215]),DefaultDuration:Z([35,227,131]),TrackEntry:Z([174]),TrackType:Z([131]),FlagDefault:Z([136]),CodecID:Z([134]),CodecPrivate:Z([99,162]),VideoTrack:Z([224]),AudioTrack:Z([225]),Cluster:Z([31,67,182,117]),Timestamp:Z([231]),TimestampScale:Z([42,215,177]),BlockGroup:Z([160]),BlockDuration:Z([155]),Block:Z([161]),SimpleBlock:Z([163])},ne=[128,64,32,16,8,4,2,1],re=function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=function(t){for(var e=1,i=0;i<ne.length&&!(t&ne[i]);i++)e++;return e}(t[e]),s=t.subarray(e,e+r);return i&&((s=Array.prototype.slice.call(t,e,e+r))[0]^=ne[r-1]),{length:r,value:it(s,{signed:n}),bytes:s}},se=function t(e){return"string"==typeof e?e.match(/.{1,2}/g).map((function(e){return t(e)})):"number"==typeof e?function(t,e){var i=(void 0===e?{}:e).le,n=void 0!==i&&i;("bigint"!=typeof t&&"number"!=typeof t||"number"==typeof t&&t!=t)&&(t=0);for(var r,s=(r=t=tt(t),Math.ceil(function(t){return t.toString(2).length}(r)/8)),a=new Uint8Array(new ArrayBuffer(s)),o=0;o<s;o++){var l=n?o:Math.abs(o+1-a.length);a[l]=Number(t/et[o]&tt(255)),t<0&&(a[l]=Math.abs(~a[l]),a[l]-=0===o?1:2)}return a}(e):e},ae=function t(e,i,n){if(n>=i.length)return i.length;var r=re(i,n,!1);if(rt(e.bytes,r.bytes))return n;var s=re(i,n+r.length);return t(e,i,n+s.length+s.value+r.length)},oe=function t(e,i){i=function(t){return Array.isArray(t)?t.map((function(t){return se(t)})):[se(t)]}(i),e=Z(e);var n=[];if(!i.length)return n;for(var r=0;r<e.length;){var s=re(e,r,!1),a=re(e,r+s.length),o=r+s.length+a.length;127===a.value&&(a.value=ae(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,c=e.subarray(o,l);rt(i[0],s.bytes)&&(1===i.length?n.push(c):n=n.concat(t(c,i.slice(1)))),r+=s.length+a.length+c.length}return n},le=Z([0,0,0,1]),ce=Z([0,0,1]),ue=Z([0,0,3]),he=function(t){for(var e=[],i=1;i<t.length-2;)rt(t.subarray(i,i+3),ue)&&(e.push(i+2),i++),i++;if(0===e.length)return t;var n=t.length-e.length,r=new Uint8Array(n),s=0;for(i=0;i<n;s++,i++)s===e[0]&&(s++,e.shift()),r[i]=t[s];return r},de=function(t,e,i,n){void 0===n&&(n=1/0),t=Z(t),i=[].concat(i);for(var r,s=0,a=0;s<t.length&&(a<n||r);){var o=void 0;if(rt(t.subarray(s),le)?o=4:rt(t.subarray(s),ce)&&(o=3),o){if(a++,r)return he(t.subarray(r,s));var l=void 0;"h264"===e?l=31&t[s+o]:"h265"===e&&(l=t[s+o]>>1&63),-1!==i.indexOf(l)&&(r=s+o),s+=o+("h264"===e?1:2)}else s++}return t.subarray(0,0)},pe={webm:Z([119,101,98,109]),matroska:Z([109,97,116,114,111,115,107,97]),flac:Z([102,76,97,67]),ogg:Z([79,103,103,83]),ac3:Z([11,119]),riff:Z([82,73,70,70]),avi:Z([65,86,73]),wav:Z([87,65,86,69]),"3gp":Z([102,116,121,112,51,103]),mp4:Z([102,116,121,112]),fmp4:Z([115,116,121,112]),mov:Z([102,116,121,112,113,116]),moov:Z([109,111,111,118]),moof:Z([109,111,111,102])},fe={aac:function(t){var e=Jt(t);return rt(t,[255,16],{offset:e,mask:[255,22]})},mp3:function(t){var e=Jt(t);return rt(t,[255,2],{offset:e,mask:[255,6]})},webm:function(t){var e=oe(t,[ie.EBML,ie.DocType])[0];return rt(e,pe.webm)},mkv:function(t){var e=oe(t,[ie.EBML,ie.DocType])[0];return rt(e,pe.matroska)},mp4:function(t){return!fe["3gp"](t)&&!fe.mov(t)&&(!(!rt(t,pe.mp4,{offset:4})&&!rt(t,pe.fmp4,{offset:4}))||!(!rt(t,pe.moof,{offset:4})&&!rt(t,pe.moov,{offset:4}))||void 0)},mov:function(t){return rt(t,pe.mov,{offset:4})},"3gp":function(t){return rt(t,pe["3gp"],{offset:4})},ac3:function(t){var e=Jt(t);return rt(t,pe.ac3,{offset:e})},ts:function(t){if(t.length<189&&t.length>=1)return 71===t[0];for(var e=0;e+188<t.length&&e<188;){if(71===t[e]&&71===t[e+188])return!0;e+=1}return!1},flac:function(t){var e=Jt(t);return rt(t,pe.flac,{offset:e})},ogg:function(t){return rt(t,pe.ogg)},avi:function(t){return rt(t,pe.riff)&&rt(t,pe.avi,{offset:8})},wav:function(t){return rt(t,pe.riff)&&rt(t,pe.wav,{offset:8})},h264:function(t){return function(t,e,i){return de(t,"h264",7,3)}(t).length},h265:function(t){return function(t,e,i){return de(t,"h265",[32,33],3)}(t).length}},me=Object.keys(fe).filter((function(t){return"ts"!==t&&"h264"!==t&&"h265"!==t})).concat(["ts","h264","h265"]);me.forEach((function(t){var e=fe[t];fe[t]=function(t){return e(Z(t))}}));var ge=fe,ye=function(t){t=Z(t);for(var e=0;e<me.length;e++){var i=me[e];if(ge[i](t))return i}return""},ve=i(51489);function be(t){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},be(t)}function _e(t){var e="function"==typeof Map?new Map:void 0;return _e=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return b(t,arguments,be(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)},_e(t)}for(var we,Te="7.21.3",Se={},xe=function(t,e){return Se[t]=Se[t]||[],e&&(Se[t]=Se[t].concat(e)),Se[t]},ke=function(t,e){var i=xe(t).indexOf(e);return!(i<=-1||(Se[t]=Se[t].slice(),Se[t].splice(i,1),0))},Ce={prefixed:!0},Ee=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Ie=Ee[0],Pe=0;Pe<Ee.length;Pe++)if(Ee[Pe][1]in a()){we=Ee[Pe];break}if(we){for(var Ae=0;Ae<we.length;Ae++)Ce[Ie[Ae]]=we[Ae];Ce.prefixed=we[0]!==Ie[0]}var Le=[],Oe=function t(e){var i,n="info",s=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i("log",n,e)};return i=function(t,e){return function(i,n,s){var a=e.levels[n],o=new RegExp("^("+a+")$");if("log"!==i&&s.unshift(i.toUpperCase()+":"),s.unshift(t+":"),Le){Le.push([].concat(s));var l=Le.length-1e3;Le.splice(0,l>0?l:0)}if(r().console){var c=r().console[i];c||"debug"!==i||(c=r().console.info||r().console.log),c&&a&&o.test(i)&&c[Array.isArray(s)?"apply":"call"](r().console,s)}}}(e,s),s.createLogger=function(i){return t(e+": "+i)},s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},s.level=function(t){if("string"==typeof t){if(!s.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');n=t}return n},(s.history=function(){return Le?[].concat(Le):[]}).filter=function(t){return(Le||[]).filter((function(e){return new RegExp(".*"+t+".*").test(e[0])}))},s.history.clear=function(){Le&&(Le.length=0)},s.history.disable=function(){null!==Le&&(Le.length=0,Le=null)},s.history.enable=function(){null===Le&&(Le=[])},s.error=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("error",n,e)},s.warn=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("warn",n,e)},s.debug=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i("debug",n,e)},s}("VIDEOJS"),De=Oe.createLogger,Me=Object.prototype.toString,Re=function(t){return Fe(t)?Object.keys(t):[]};function Ne(t,e){Re(t).forEach((function(i){return e(t[i],i)}))}function Be(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Object.assign?o.Z.apply(void 0,[t].concat(i)):(i.forEach((function(e){e&&Ne(e,(function(e,i){t[i]=e}))})),t)}function Fe(t){return!!t&&"object"==typeof t}function $e(t){return Fe(t)&&"[object Object]"===Me.call(t)&&t.constructor===Object}function Ue(t,e){if(!t||!e)return"";if("function"==typeof r().getComputedStyle){var i;try{i=r().getComputedStyle(t)}catch(t){return""}return i?i.getPropertyValue(e)||i[e]:""}return""}var je,Ve,He,qe=r().navigator&&r().navigator.userAgent||"",We=/AppleWebKit\/([\d.]+)/i.exec(qe),ze=We?parseFloat(We.pop()):null,Ge=/iPod/i.test(qe),Ke=(je=qe.match(/OS (\d+)_/i))&&je[1]?je[1]:null,Ye=/Android/i.test(qe),Xe=function(){var t=qe.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return e&&i?parseFloat(t[1]+"."+t[2]):e||null}(),Qe=Ye&&Xe<5&&ze<537,Je=/Firefox/i.test(qe),Ze=/Edg/i.test(qe),ti=!Ze&&(/Chrome/i.test(qe)||/CriOS/i.test(qe)),ei=function(){var t=qe.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ii=(Ve=/MSIE\s(\d+)\.\d/.exec(qe),!(He=Ve&&parseFloat(Ve[1]))&&/Trident\/7.0/i.test(qe)&&/rv:11.0/.test(qe)&&(He=11),He),ni=/Safari/i.test(qe)&&!ti&&!Ye&&!Ze,ri=/Windows/i.test(qe),si=Boolean(pi()&&("ontouchstart"in r()||r().navigator.maxTouchPoints||r().DocumentTouch&&r().document instanceof r().DocumentTouch)),ai=/iPad/i.test(qe)||ni&&si&&!/iPhone/i.test(qe),oi=/iPhone/i.test(qe)&&!ai,li=oi||ai||Ge,ci=(ni||li)&&!ti,ui=Object.freeze({__proto__:null,IS_IPOD:Ge,IOS_VERSION:Ke,IS_ANDROID:Ye,ANDROID_VERSION:Xe,IS_NATIVE_ANDROID:Qe,IS_FIREFOX:Je,IS_EDGE:Ze,IS_CHROME:ti,CHROME_VERSION:ei,IE_VERSION:ii,IS_SAFARI:ni,IS_WINDOWS:ri,TOUCH_ENABLED:si,IS_IPAD:ai,IS_IPHONE:oi,IS_IOS:li,IS_ANY_SAFARI:ci});function hi(t){return"string"==typeof t&&Boolean(t.trim())}function di(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function pi(){return a()===r().document}function fi(t){return Fe(t)&&1===t.nodeType}function mi(){try{return r().parent!==r().self}catch(t){return!0}}function gi(t){return function(e,i){if(!hi(e))return a()[t](null);hi(i)&&(i=a().querySelector(i));var n=fi(i)?i:a();return n[t]&&n[t](e)}}function yi(t,e,i,n){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===i&&(i={});var r=a().createElement(t);return Object.getOwnPropertyNames(e).forEach((function(t){var i=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(Oe.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+i+"."),r.setAttribute(t,i)):"textContent"===t?vi(r,i):r[t]===i&&"tabIndex"!==t||(r[t]=i)})),Object.getOwnPropertyNames(i).forEach((function(t){r.setAttribute(t,i[t])})),n&&Bi(r,n),r}function vi(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function bi(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function _i(t,e){return di(e),t.classList?t.classList.contains(e):(i=e,new RegExp("(^|\\s)"+i+"($|\\s)")).test(t.className);var i}function wi(t,e){return t.classList?t.classList.add(e):_i(t,e)||(t.className=(t.className+" "+e).trim()),t}function Ti(t,e){return t?(t.classList?t.classList.remove(e):(di(e),t.className=t.className.split(/\s+/).filter((function(t){return t!==e})).join(" ")),t):(Oe.warn("removeClass was called with an element that doesn't exist"),null)}function Si(t,e,i){var n=_i(t,e);if("function"==typeof i&&(i=i(t,e)),"boolean"!=typeof i&&(i=!n),i!==n)return i?wi(t,e):Ti(t,e),t}function xi(t,e){Object.getOwnPropertyNames(e).forEach((function(i){var n=e[i];null==n||!1===n?t.removeAttribute(i):t.setAttribute(i,!0===n?"":n)}))}function ki(t){var e={};if(t&&t.attributes&&t.attributes.length>0)for(var i=t.attributes,n=i.length-1;n>=0;n--){var r=i[n].name,s=i[n].value;"boolean"!=typeof t[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(s=null!==s),e[r]=s}return e}function Ci(t,e){return t.getAttribute(e)}function Ei(t,e,i){t.setAttribute(e,i)}function Ii(t,e){t.removeAttribute(e)}function Pi(){a().body.focus(),a().onselectstart=function(){return!1}}function Ai(){a().onselectstart=function(){return!0}}function Li(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((function(t){void 0!==e[t]&&(i[t]=e[t])})),i.height||(i.height=parseFloat(Ue(t,"height"))),i.width||(i.width=parseFloat(Ue(t,"width"))),i}}function Oi(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,i=t.offsetHeight,n=0,r=0;t.offsetParent&&t!==a()[Ce.fullscreenElement];)n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:n,top:r,width:e,height:i}}function Di(t,e){var i={x:0,y:0};if(li)for(var n=t;n&&"html"!==n.nodeName.toLowerCase();){var r=Ue(n,"transform");if(/^matrix/.test(r)){var s=r.slice(7,-1).split(/,\s/).map(Number);i.x+=s[4],i.y+=s[5]}else if(/^matrix3d/.test(r)){var a=r.slice(9,-1).split(/,\s/).map(Number);i.x+=a[12],i.y+=a[13]}n=n.parentNode}var o={},l=Oi(e.target),c=Oi(t),u=c.width,h=c.height,d=e.offsetY-(c.top-l.top),p=e.offsetX-(c.left-l.left);return e.changedTouches&&(p=e.changedTouches[0].pageX-c.left,d=e.changedTouches[0].pageY+c.top,li&&(p-=i.x,d-=i.y)),o.y=1-Math.max(0,Math.min(1,d/h)),o.x=Math.max(0,Math.min(1,p/u)),o}function Mi(t){return Fe(t)&&3===t.nodeType}function Ri(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Ni(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map((function(t){return"function"==typeof t&&(t=t()),fi(t)||Mi(t)?t:"string"==typeof t&&/\S/.test(t)?a().createTextNode(t):void 0})).filter((function(t){return t}))}function Bi(t,e){return Ni(e).forEach((function(e){return t.appendChild(e)})),t}function Fi(t,e){return Bi(Ri(t),e)}function $i(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||"mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons}var Ui,ji=gi("querySelector"),Vi=gi("querySelectorAll"),Hi=Object.freeze({__proto__:null,isReal:pi,isEl:fi,isInFrame:mi,createEl:yi,textContent:vi,prependTo:bi,hasClass:_i,addClass:wi,removeClass:Ti,toggleClass:Si,setAttributes:xi,getAttributes:ki,getAttribute:Ci,setAttribute:Ei,removeAttribute:Ii,blockTextSelection:Pi,unblockTextSelection:Ai,getBoundingClientRect:Li,findPosition:Oi,getPointerPosition:Di,isTextNode:Mi,emptyEl:Ri,normalizeContent:Ni,appendContent:Bi,insertContent:Fi,isSingleLeftClick:$i,$:ji,$$:Vi}),qi=!1,Wi=function(){if(!1!==Ui.options.autoSetup){var t=Array.prototype.slice.call(a().getElementsByTagName("video")),e=Array.prototype.slice.call(a().getElementsByTagName("audio")),i=Array.prototype.slice.call(a().getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&n.length>0)for(var r=0,s=n.length;r<s;r++){var o=n[r];if(!o||!o.getAttribute){zi(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&Ui(o)}else qi||zi(1)}};function zi(t,e){pi()&&(e&&(Ui=e),r().setTimeout(Wi,t))}function Gi(){qi=!0,r().removeEventListener("load",Gi)}pi()&&("complete"===a().readyState?Gi():r().addEventListener("load",Gi));var Ki,Yi=function(t){var e=a().createElement("style");return e.className=t,e},Xi=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},Qi=3;function Ji(){return Qi++}r().WeakMap||(Ki=function(){function t(){this.vdata="vdata"+Math.floor(r().performance&&r().performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(t,e){var i=t[this.vdata]||Ji();return t[this.vdata]||(t[this.vdata]=i),this.data[i]=e,this},e.get=function(t){var e=t[this.vdata];if(e)return this.data[e];Oe("We have no data for this element",t)},e.has=function(t){return t[this.vdata]in this.data},e.delete=function(t){var e=t[this.vdata];e&&(delete this.data[e],delete t[this.vdata])},t}());var Zi,tn=r().WeakMap?new WeakMap:new Ki;function en(t,e){if(tn.has(t)){var i=tn.get(t);0===i.handlers[e].length&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&tn.delete(t)}}function nn(t,e,i,n){i.forEach((function(i){t(e,i,n)}))}function rn(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var n=t||r().event;for(var s in t={},n)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&"path"!==s&&("returnValue"===s&&n.preventDefault||(t[s]=n[s]));if(t.target||(t.target=t.srcElement||a()),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!==t.clientX&&void 0!==t.clientX){var o=a().documentElement,l=a().body;t.pageX=t.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}var sn=function(){if("boolean"!=typeof Zi){Zi=!1;try{var t=Object.defineProperty({},"passive",{get:function(){Zi=!0}});r().addEventListener("test",null,t),r().removeEventListener("test",null,t)}catch(t){}}return Zi},an=["touchstart","touchmove"];function on(t,e,i){if(Array.isArray(e))return nn(on,t,e,i);tn.has(t)||tn.set(t,{});var n=tn.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=Ji()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,i){if(!n.disabled){e=rn(e);var r=n.handlers[e.type];if(r)for(var s=r.slice(0),a=0,o=s.length;a<o&&!e.isImmediatePropagationStopped();a++)try{s[a].call(t,e,i)}catch(t){Oe.error(t)}}}),1===n.handlers[e].length)if(t.addEventListener){var r=!1;sn()&&an.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,n.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function ln(t,e,i){if(tn.has(t)){var n=tn.get(t);if(n.handlers){if(Array.isArray(e))return nn(ln,t,e,i);var r=function(t,e){n.handlers[e]=[],en(t,e)};if(void 0!==e){var s=n.handlers[e];if(s)if(i){if(i.guid)for(var a=0;a<s.length;a++)s[a].guid===i.guid&&s.splice(a--,1);en(t,e)}else r(t,e)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(t,o)}}}function cn(t,e,i){var n=tn.has(t)?tn.get(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=rn(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&!0===e.bubbles)cn.call(null,r,e,i);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){tn.has(e.target)||tn.set(e.target,{});var s=tn.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function un(t,e,i){if(Array.isArray(e))return nn(un,t,e,i);var n=function n(){ln(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Ji(),on(t,e,n)}function hn(t,e,i){var n=function n(){ln(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Ji(),on(t,e,n)}var dn,pn=Object.freeze({__proto__:null,fixEvent:rn,on,off:ln,trigger:cn,one:un,any:hn}),fn=30,mn=function(t,e,i){e.guid||(e.guid=Ji());var n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n},gn=function(t,e){var i=r().performance.now();return function(){var n=r().performance.now();n-i>=e&&(t.apply(void 0,arguments),i=n)}},yn=function(t,e,i,n){var s;void 0===n&&(n=r());var a=function(){var r=this,a=arguments,o=function(){s=null,o=null,i||t.apply(r,a)};!s&&i&&t.apply(r,a),n.clearTimeout(s),s=n.setTimeout(o,e)};return a.cancel=function(){n.clearTimeout(s),s=null},a},vn=function(){};vn.prototype.allowedEvents_={},vn.prototype.on=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},on(this,t,e),this.addEventListener=i},vn.prototype.addEventListener=vn.prototype.on,vn.prototype.off=function(t,e){ln(this,t,e)},vn.prototype.removeEventListener=vn.prototype.off,vn.prototype.one=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},un(this,t,e),this.addEventListener=i},vn.prototype.any=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},hn(this,t,e),this.addEventListener=i},vn.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=rn(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),cn(this,t)},vn.prototype.dispatchEvent=vn.prototype.trigger,vn.prototype.queueTrigger=function(t){var e=this;dn||(dn=new Map);var i=t.type||t,n=dn.get(this);n||(n=new Map,dn.set(this,n));var s=n.get(i);n.delete(i),r().clearTimeout(s);var a=r().setTimeout((function(){n.delete(i),0===n.size&&(n=null,dn.delete(e)),e.trigger(t)}),0);n.set(i,a)};var bn=function(t){return"function"==typeof t.name?t.name():"string"==typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},_n=function(t){return t instanceof vn||!!t.eventBusEl_&&["on","one","off","trigger"].every((function(e){return"function"==typeof t[e]}))},wn=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},Tn=function(t,e,i){if(!t||!t.nodeName&&!_n(t))throw new Error("Invalid target for "+bn(e)+"#"+i+"; must be a DOM node or evented object.")},Sn=function(t,e,i){if(!wn(t))throw new Error("Invalid event type for "+bn(e)+"#"+i+"; must be a non-empty string or array.")},xn=function(t,e,i){if("function"!=typeof t)throw new Error("Invalid listener for "+bn(e)+"#"+i+"; must be a function.")},kn=function(t,e,i){var n,r,s,a=e.length<3||e[0]===t||e[0]===t.eventBusEl_;return a?(n=t.eventBusEl_,e.length>=3&&e.shift(),r=e[0],s=e[1]):(n=e[0],r=e[1],s=e[2]),Tn(n,t,i),Sn(r,t,i),xn(s,t,i),{isTargetingSelf:a,target:n,type:r,listener:s=mn(t,s)}},Cn=function(t,e,i,n){Tn(t,t,e),t.nodeName?pn[e](t,i,n):t[e](i,n)},En={on:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=kn(this,i,"on"),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(Cn(a,"on",o,l),!s){var c=function(){return t.off(a,o,l)};c.guid=l.guid;var u=function(){return t.off("dispose",c)};u.guid=l.guid,Cn(this,"on","dispose",c),Cn(a,"on","dispose",u)}},one:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=kn(this,i,"one"),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(s)Cn(a,"one",o,l);else{var c=function e(){t.off(a,o,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,Cn(a,"one",o,c)}},any:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=kn(this,i,"any"),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(s)Cn(a,"any",o,l);else{var c=function e(){t.off(a,o,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,Cn(a,"any",o,c)}},off:function(t,e,i){if(!t||wn(t))ln(this.eventBusEl_,t,e);else{var n=t,r=e;Tn(n,this,"off"),Sn(r,this,"off"),xn(i,this,"off"),i=mn(this,i),this.off("dispose",i),n.nodeName?(ln(n,r,i),ln(n,"dispose",i)):_n(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(t,e){Tn(this.eventBusEl_,this,"trigger");var i=t&&"string"!=typeof t?t.type:t;if(!wn(i)){var n="Invalid event type for "+bn(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!t)throw new Error(n);(this.log||Oe).error(n)}return cn(this.eventBusEl_,t,e)}};function In(t,e){void 0===e&&(e={});var i=e.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=yi("span",{className:"vjs-event-bus"});return Be(t,En),t.eventedCallbacks&&t.eventedCallbacks.forEach((function(t){t()})),t.on("dispose",(function(){t.off(),[t,t.el_,t.eventBusEl_].forEach((function(t){t&&tn.has(t)&&tn.delete(t)})),r().setTimeout((function(){t.eventBusEl_=null}),0)})),t}var Pn={state:{},setState:function(t){var e,i=this;return"function"==typeof t&&(t=t()),Ne(t,(function(t,n){i.state[n]!==t&&((e=e||{})[n]={from:i.state[n],to:t}),i.state[n]=t})),e&&_n(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function An(t,e){return Be(t,Pn),t.state=Be({},t.state,e),"function"==typeof t.handleStateChanged&&_n(t)&&t.on("statechanged",t.handleStateChanged),t}var Ln=function(t){return"string"!=typeof t?t:t.replace(/./,(function(t){return t.toLowerCase()}))},On=function(t){return"string"!=typeof t?t:t.replace(/./,(function(t){return t.toUpperCase()}))};function Dn(){for(var t={},e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach((function(e){e&&Ne(e,(function(e,i){$e(e)?($e(t[i])||(t[i]={}),t[i]=Dn(t[i],e)):t[i]=e}))})),t}var Mn=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(t){return t in this.map_},e.delete=function(t){var e=this.has(t);return delete this.map_[t],e},e.set=function(t,e){return this.map_[t]=e,this},e.forEach=function(t,e){for(var i in this.map_)t.call(e,this.map_[i],i,this)},t}(),Rn=r().Map?r().Map:Mn,Nn=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(t){return t in this.set_},e.delete=function(t){var e=this.has(t);return delete this.set_[t],e},e.add=function(t){return this.set_[t]=1,this},e.forEach=function(t,e){for(var i in this.set_)t.call(e,i,i,this)},t}(),Bn=r().Set?r().Set:Nn,Fn=function(){function t(t,e,i){var n=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Dn({},this.options_),e=this.options_=Dn(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var r=t&&t.id&&t.id()||"no_player";this.id_=r+"_component_"+Ji()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),e.className&&this.el_&&e.className.split(" ").forEach((function(t){return n.addClass(t)})),!1!==e.evented&&(In(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),An(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Bn,this.setIntervalIds_=new Bn,this.rafIds_=new Bn,this.namedRafs_=new Rn,this.clearingTimersOnDispose_=!1,!1!==e.initChildren&&this.initChildren(),this.ready(i),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(t){if(void 0===t&&(t={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(t){return t?(this.options_=Dn(this.options_,t),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(t,e,i){return yi(t,e,i)},e.localize=function(t,e,i){void 0===i&&(i=t);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[n],a=n&&n.split("-")[0],o=r&&r[a],l=i;return s&&s[t]?l=s[t]:o&&o[t]&&(l=o[t]),e&&(l=l.replace(/\{(\d+)\}/g,(function(t,i){var n=e[i-1],r=n;return void 0===n&&(r=t),r}))),l},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(t){return this.childIndex_[t]},e.getChild=function(t){if(t)return this.childNameIndex_[t]},e.getDescendant=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e=e.reduce((function(t,e){return t.concat(e)}),[]);for(var n=this,r=0;r<e.length;r++)if(!(n=n.getChild(e[r]))||!n.getChild)return;return n},e.addChild=function(e,i,n){var r,s;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof e){s=On(e);var a=i.componentClass||s;i.name=s;var o=t.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,i)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(s=s||r.name&&On(r.name()))&&(this.childNameIndex_[s]=r,this.childNameIndex_[Ln(s)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:fi(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},e.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===t){e=!0,this.children_.splice(i,1);break}if(e){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[On(t.name())]=null,this.childNameIndex_[Ln(t.name())]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},e.initChildren=function(){var e=this,i=this.options_.children;if(i){var n,r=this.options_,s=t.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter((function(t){return!n.some((function(e){return"string"==typeof e?t===e:t===e.name}))}))).map((function(t){var n,r;return"string"==typeof t?r=i[n=t]||e.options_[n]||{}:(n=t.name,r=t),{name:n,opts:r}})).filter((function(e){var i=t.getComponent(e.opts.componentClass||On(e.name));return i&&!s.isTech(i)})).forEach((function(t){var i=t.name,n=t.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=e.options_.playerOptions;var s=e.addChild(i,n);s&&(e[i]=s)}}))}},e.buildCSSClass=function(){return""},e.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach((function(t){t.call(this)}),this),this.trigger("ready")}),1)},e.$=function(t,e){return ji(t,e||this.contentEl())},e.$$=function(t,e){return Vi(t,e||this.contentEl())},e.hasClass=function(t){return _i(this.el_,t)},e.addClass=function(t){wi(this.el_,t)},e.removeClass=function(t){Ti(this.el_,t)},e.toggleClass=function(t,e){Si(this.el_,t,e)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(t){return Ci(this.el_,t)},e.setAttribute=function(t,e){Ei(this.el_,t,e)},e.removeAttribute=function(t){Ii(this.el_,t)},e.width=function(t,e){return this.dimension("width",t,e)},e.height=function(t,e){return this.dimension("height",t,e)},e.dimensions=function(t,e){this.width(t,!0),this.height(e)},e.dimension=function(t,e,i){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[t],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+On(t)],10)},e.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(e=Ue(this.el_,t),0===(e=parseFloat(e))||isNaN(e)){var i="offset"+On(t);e=this.el_[i]}return e},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(t){this.player_&&(c().isEventKey(t,"Tab")||t.stopPropagation(),this.player_.handleKeyDown(t))},e.handleKeyPress=function(t){this.handleKeyDown(t)},e.emitTapEvents=function(){var t,e=0,i=null;this.on("touchstart",(function(n){1===n.touches.length&&(i={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=r().performance.now(),t=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)t=!1;else if(i){var n=e.touches[0].pageX-i.pageX,r=e.touches[0].pageY-i.pageY;Math.sqrt(n*n+r*r)>10&&(t=!1)}}));var n=function(){t=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",(function(n){i=null,!0===t&&r().performance.now()-e<200&&(n.preventDefault(),this.trigger("tap"))}))},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,e=mn(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));var i=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}},e.setTimeout=function(t,e){var i,n=this;return t=mn(this,t),this.clearTimersOnDispose_(),i=r().setTimeout((function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),t()}),e),this.setTimeoutIds_.add(i),i},e.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),r().clearTimeout(t)),t},e.setInterval=function(t,e){t=mn(this,t),this.clearTimersOnDispose_();var i=r().setInterval(t,e);return this.setIntervalIds_.add(i),i},e.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),r().clearInterval(t)),t},e.requestAnimationFrame=function(t){var e,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=mn(this,t),e=r().requestAnimationFrame((function(){i.rafIds_.has(e)&&i.rafIds_.delete(e),t()})),this.rafIds_.add(e),e):this.setTimeout(t,1e3/60)},e.requestNamedAnimationFrame=function(t,e){var i=this;if(!this.namedRafs_.has(t)){this.clearTimersOnDispose_(),e=mn(this,e);var n=this.requestAnimationFrame((function(){e(),i.namedRafs_.has(t)&&i.namedRafs_.delete(t)}));return this.namedRafs_.set(t,n),t}},e.cancelNamedAnimationFrame=function(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))},e.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),r().cancelAnimationFrame(t)),t):this.clearTimeout(t)},e.clearTimersOnDispose_=function(){var t=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(e){var i=e[0],n=e[1];t[i].forEach((function(e,i){return t[n](i)}))})),t.clearingTimersOnDispose_=!1})))},t.registerComponent=function(e,i){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n=t.getComponent("Tech"),r=n&&n.isTech(i),s=t===i||t.prototype.isPrototypeOf(i.prototype);if(r||!s)throw new Error('Illegal component, "'+e+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=On(e),t.components_||(t.components_={});var a=t.getComponent("Player");if("Player"===e&&a&&a.players){var o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map((function(t){return o[t]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=i,t.components_[Ln(e)]=i,i},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();function $n(t,e,i,n){return function(t,e,i){if("number"!=typeof e||e<0||e>i)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+i+").")}(t,n,i.length-1),i[n][e]}function Un(t){var e;return e=void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:$n.bind(null,"start",0,t),end:$n.bind(null,"end",1,t)},r().Symbol&&r().Symbol.iterator&&(e[r().Symbol.iterator]=function(){return(t||[]).values()}),e}function jn(t,e){return Array.isArray(t)?Un(t):void 0===t||void 0===e?Un():Un([[t,e]])}function Vn(t,e){var i,n,r=0;if(!e)return 0;t&&t.length||(t=jn(0,0));for(var s=0;s<t.length;s++)i=t.start(s),(n=t.end(s))>e&&(n=e),r+=n-i;return r/e}function Hn(t){if(t instanceof Hn)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:Fe(t)&&("number"==typeof t.code&&(this.code=t.code),Be(this,t)),this.message||(this.message=Hn.defaultMessages[this.code]||"")}Fn.prototype.supportsRaf_="function"==typeof r().requestAnimationFrame&&"function"==typeof r().cancelAnimationFrame,Fn.registerComponent("Component",Fn),Hn.prototype.code=0,Hn.prototype.message="",Hn.prototype.status=null,Hn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Hn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var qn=0;qn<Hn.errorTypes.length;qn++)Hn[Hn.errorTypes[qn]]=qn,Hn.prototype[Hn.errorTypes[qn]]=qn;function Wn(t){return null!=t&&"function"==typeof t.then}function zn(t){Wn(t)&&t.then(null,(function(t){}))}var Gn=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(e,i,n){return t[i]&&(e[i]=t[i]),e}),{cues:t.cues&&Array.prototype.map.call(t.cues,(function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}}))})},Kn="vjs-modal-dialog",Yn=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handleKeyDown_=function(t){return n.handleKeyDown(t)},n.close_=function(t){return n.close(t)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=yi("div",{className:Kn+"-content"},{role:"document"}),n.descEl_=yi("p",{className:Kn+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),vi(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function(){return Kn+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},i.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,i=this.getChild("closeButton");if(e&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close_)}!e&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(t){var e=this.contentEl(),i=e.parentNode,n=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(e),this.empty(),Fi(e,t),this.trigger("modalfill"),n?i.insertBefore(e,n):i.appendChild(e);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),Ri(this.contentEl()),this.trigger("modalempty")},i.content=function(t){return void 0!==t&&(this.content_=t),this.content_},i.conditionalFocus_=function(){var t=a().activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(t){if(t.stopPropagation(),c().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(c().isEventKey(t,"Tab")){for(var e,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){e=r;break}a().activeElement===this.el_&&(e=0),t.shiftKey&&0===e?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||e!==i.length-1||(i[0].focus(),t.preventDefault())}},i.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(t){return(t instanceof r().HTMLAnchorElement||t instanceof r().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof r().HTMLInputElement||t instanceof r().HTMLSelectElement||t instanceof r().HTMLTextAreaElement||t instanceof r().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof r().HTMLIFrameElement||t instanceof r().HTMLObjectElement||t instanceof r().HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")}))},e}(Fn);Yn.prototype.options_={pauseOnOpen:!0,temporary:!0},Fn.registerComponent("ModalDialog",Yn);var Xn=function(t){function e(e){var i;void 0===e&&(e=[]),(i=t.call(this)||this).tracks_=[],Object.defineProperty(u(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<e.length;n++)i.addTrack(e[n]);return i}d(e,t);var i=e.prototype;return i.addTrack=function(t){var e=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){e.trigger({track:t,type:"labelchange",target:e})},_n(t)&&t.addEventListener("labelchange",t.labelchange_)},i.removeTrack=function(t){for(var e,i=0,n=this.length;i<n;i++)if(this[i]===t){(e=this[i]).off&&e.off(),this.tracks_.splice(i,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})},i.getTrackById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},e}(vn);for(var Qn in Xn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Xn.prototype.allowedEvents_)Xn.prototype["on"+Qn]=null;var Jn=function(t,e){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].enabled=!1)},Zn=function(t){function e(e){var i;void 0===e&&(e=[]);for(var n=e.length-1;n>=0;n--)if(e[n].enabled){Jn(e,e[n]);break}return(i=t.call(this,e)||this).changing_=!1,i}d(e,t);var i=e.prototype;return i.addTrack=function(e){var i=this;e.enabled&&Jn(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){i.changing_||(i.changing_=!0,Jn(i,e),i.changing_=!1,i.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},i.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Xn),tr=function(t,e){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].selected=!1)},er=function(t){function e(e){var i;void 0===e&&(e=[]);for(var n=e.length-1;n>=0;n--)if(e[n].selected){tr(e,e[n]);break}return(i=t.call(this,e)||this).changing_=!1,Object.defineProperty(u(i),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),i}d(e,t);var i=e.prototype;return i.addTrack=function(e){var i=this;e.selected&&tr(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){i.changing_||(i.changing_=!0,tr(i,e),i.changing_=!1,i.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},i.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Xn),ir=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var i=e.prototype;return i.addTrack=function(e){var i=this;t.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Xn),nr=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,i=t.length;e<i;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,i=0,n=this.trackElements_.length;i<n;i++)if(t===this.trackElements_[i].track){e=this.trackElements_[i];break}return e},e.removeTrackElement_=function(t){for(var e=0,i=this.trackElements_.length;e<i;e++)if(t===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},t}(),rr=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(t){var e=this.length||0,i=0,n=t.length;this.cues_=t,this.length_=t.length;var r=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<n)for(i=e;i<n;i++)r.call(this,i)},e.getCueById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},t}(),sr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ar={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},or={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},lr={disabled:"disabled",hidden:"hidden",showing:"showing"},cr=function(t){function e(e){var i;void 0===e&&(e={}),i=t.call(this)||this;var n={id:e.id||"vjs_track_"+Ji(),kind:e.kind||"",language:e.language||""},r=e.label||"",s=function(t){Object.defineProperty(u(i),t,{get:function(){return n[t]},set:function(){}})};for(var a in n)s(a);return Object.defineProperty(u(i),"label",{get:function(){return r},set:function(t){t!==r&&(r=t,this.trigger("labelchange"))}}),i}return d(e,t),e}(vn),ur=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],i=a().createElement("a");i.href=t;for(var n={},s=0;s<e.length;s++)n[e[s]]=i[e[s]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=r().location.protocol),n.host||(n.host=r().location.host),n},hr=function(t){if(!t.match(/^https?:\/\//)){var e=a().createElement("a");e.href=t,t=e.href}return t},dr=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""},pr=function(t,e){void 0===e&&(e=r().location);var i=ur(t);return(":"===i.protocol?e.protocol:i.protocol)+i.host!==e.protocol+e.host},fr=Object.freeze({__proto__:null,parseUrl:ur,getAbsoluteURL:hr,getFileExtension:dr,isCrossOrigin:pr}),mr=function(t,e){var i=new(r().WebVTT.Parser)(r(),r().vttjs,r().WebVTT.StringDecoder()),n=[];i.oncue=function(t){e.addCue(t)},i.onparsingerror=function(t){n.push(t)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),n.length>0&&(r().console&&r().console.groupCollapsed&&r().console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach((function(t){return Oe.error(t)})),r().console&&r().console.groupEnd&&r().console.groupEnd()),i.flush()},gr=function(t,e){var i={uri:t},n=pr(t);n&&(i.cors=n);var s="use-credentials"===e.tech_.crossOrigin();s&&(i.withCredentials=s),g()(i,mn(this,(function(t,i,n){if(t)return Oe.error(t,i);e.loaded_=!0,"function"!=typeof r().WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],(function(t){if("vttjserror"!==t.type)return mr(n,e);Oe.error("vttjs failed to load, stopping trying to process "+e.src)})):mr(n,e)})))},yr=function(t){function e(e){var i;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Dn(e,{kind:or[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=lr[n.mode]||"disabled",s=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=t.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var a=new rr(i.cues_),o=new rr(i.activeCues_),l=!1;return i.timeupdateHandler=mn(u(i),(function(t){void 0===t&&(t={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),"timeupdate"!==t.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==t.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),i.tech_.one("dispose",(function(){i.stopTracking()})),"disabled"!==r&&i.startTracking(),Object.defineProperties(u(i),{default:{get:function(){return s},set:function(){}},mode:{get:function(){return r},set:function(t){lr[t]&&r!==t&&(r=t,this.preload_||"disabled"===r||0!==this.cues.length||gr(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var t=this.tech_.currentTime(),e=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=t&&r.endTime>=t||r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t)&&e.push(r)}if(l=!1,e.length!==this.activeCues_.length)l=!0;else for(var s=0;s<e.length;s++)-1===this.activeCues_.indexOf(e[s])&&(l=!0);return this.activeCues_=e,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||"subtitles"!==n.kind&&"captions"!==n.kind)&&gr(i.src,u(i))):i.loaded_=!0,i}d(e,t);var i=e.prototype;return i.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},i.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},i.addCue=function(t){var e=t;if(r().vttjs&&!(t instanceof r().vttjs.VTTCue)){for(var i in e=new(r().vttjs.VTTCue)(t.startTime,t.endTime,t.text),t)i in e||(e[i]=t[i]);e.id=t.id,e.originalCue_=t}for(var n=this.tech_.textTracks(),s=0;s<n.length;s++)n[s]!==this&&n[s].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},i.removeCue=function(t){for(var e=this.cues_.length;e--;){var i=this.cues_[e];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(cr);yr.prototype.allowedEvents_={cuechange:"cuechange"};var vr=function(t){function e(e){var i;void 0===e&&(e={});var n=Dn(e,{kind:ar[e.kind]||""});i=t.call(this,n)||this;var r=!1;return Object.defineProperty(u(i),"enabled",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return d(e,t),e}(cr),br=function(t){function e(e){var i;void 0===e&&(e={});var n=Dn(e,{kind:sr[e.kind]||""});i=t.call(this,n)||this;var r=!1;return Object.defineProperty(u(i),"selected",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return d(e,t),e}(cr),_r=0,wr=2,Tr=function(t){function e(e){var i,n;void 0===e&&(e={}),i=t.call(this)||this;var r=new yr(e);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(u(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=_r,r.addEventListener("loadeddata",(function(){n=wr,i.trigger({type:"load",target:u(i)})})),i}return d(e,t),e}(vn);Tr.prototype.allowedEvents_={load:"load"},Tr.NONE=_r,Tr.LOADING=1,Tr.LOADED=wr,Tr.ERROR=3;var Sr={audio:{ListClass:Zn,TrackClass:vr,capitalName:"Audio"},video:{ListClass:er,TrackClass:br,capitalName:"Video"},text:{ListClass:ir,TrackClass:yr,capitalName:"Text"}};Object.keys(Sr).forEach((function(t){Sr[t].getterName=t+"Tracks",Sr[t].privateName=t+"Tracks_"}));var xr={remoteText:{ListClass:ir,TrackClass:yr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:nr,TrackClass:Tr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},kr=(0,o.Z)({},Sr,xr);xr.names=Object.keys(xr),Sr.names=Object.keys(Sr),kr.names=[].concat(xr.names).concat(Sr.names);var Cr=function(t){function e(e,i){var n;return void 0===e&&(e={}),void 0===i&&(i=function(){}),e.reportTouchActivity=!1,(n=t.call(this,null,e,i)||this).onDurationChange_=function(t){return n.onDurationChange(t)},n.trackProgress_=function(t){return n.trackProgress(t)},n.trackCurrentTime_=function(t){return n.trackCurrentTime(t)},n.stopTrackingCurrentTime_=function(t){return n.stopTrackingCurrentTime(t)},n.disposeSourceHandler_=function(t){return n.disposeSourceHandler(t)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",(function(){this.hasStarted_=!0})),n.on("loadstart",(function(){this.hasStarted_=!1})),kr.names.forEach((function(t){var i=kr[t];e&&e[i.getterName]&&(n[i.privateName]=e[i.getterName])})),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===e["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==e.preloadTextTracks,n.autoRemoteTextTracks_=new kr.text.ListClass,n.initTrackListeners(),e.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}d(e,t);var i=e.prototype;return i.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",(function(){return e.setTimeout((function(){return e.triggerSourceset(t)}),1)})),this.trigger({src:t,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(mn(this,(function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()})),500)},i.onDurationChange=function(t){this.duration_=this.duration()},i.buffered=function(){return jn(0,0)},i.bufferedPercent=function(){return Vn(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(Sr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},i.clearTracks=function(t){var e=this;(t=[].concat(t)).forEach((function(t){for(var i=e[t+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===t&&e.removeRemoteTextTrack(r),i.removeTrack(r)}}))},i.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var i=t[e];this.removeRemoteTextTrack(i)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(t){return void 0!==t&&(this.error_=new Hn(t),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?jn(0,0):jn()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var t=this;Sr.names.forEach((function(e){var i=Sr[e],n=function(){t.trigger(e+"trackchange")},r=t[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),t.on("dispose",(function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)}))}))},i.addWebVttScript_=function(){var t=this;if(!r().WebVTT)if(a().body.contains(this.el())){if(!this.options_["vtt.js"]&&$e(v())&&Object.keys(v()).length>0)return void this.trigger("vttjsloaded");var e=a().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",(function(){e.onload=null,e.onerror=null})),r().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var t=this,e=this.textTracks(),i=this.remoteTextTracks(),n=function(t){return e.addTrack(t.track)},r=function(t){return e.removeTrack(t.track)};i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();var s=function(){return t.trigger("texttrackchange")},a=function(){s();for(var t=0;t<e.length;t++){var i=e[t];i.removeEventListener("cuechange",s),"showing"===i.mode&&i.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",(function(){i.off("addtrack",n),i.off("removetrack",r),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(var t=0;t<e.length;t++)e[t].removeEventListener("cuechange",s)}))},i.addTextTrack=function(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,i,n,r){void 0===r&&(r={});var s=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;var a=new kr.text.TrackClass(r);return s.addTrack(a),a}(this,t,e,i)},i.createRemoteTextTrack=function(t){var e=Dn(t,{tech:this});return new xr.remoteTextEl.TrackClass(e)},i.addRemoteTextTrack=function(t,e){var i=this;void 0===t&&(t={});var n=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(Oe.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==e&&this.ready((function(){return i.autoRemoteTextTracks_.addTrack(n.track)})),n},i.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var t=this.options_.Promise||r().Promise;if(t)return t.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.requestVideoFrameCallback=function(t){var e=this,i=Ji();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",(function(){e.queuedHanders_.has(i)&&(e.queuedHanders_.delete(i),t())}))):this.requestNamedAnimationFrame(i,t),i},i.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,i){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,i){if(e.techs_||(e.techs_={}),!e.isTech(i))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=On(t),e.techs_[t]=i,e.techs_[Ln(t)]=i,"Tech"!==t&&e.defaultTechOrder_.push(t),i},e.getTech=function(t){if(t)return e.techs_&&e.techs_[t]?e.techs_[t]:(t=On(t),r()&&r().videojs&&r().videojs[t]?(Oe.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),r().videojs[t]):void 0)},e}(Fn);kr.names.forEach((function(t){var e=kr[t];Cr.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}})),Cr.prototype.featuresVolumeControl=!0,Cr.prototype.featuresMuteControl=!0,Cr.prototype.featuresFullscreenResize=!1,Cr.prototype.featuresPlaybackRate=!1,Cr.prototype.featuresProgressEvents=!1,Cr.prototype.featuresSourceset=!1,Cr.prototype.featuresTimeupdateEvents=!1,Cr.prototype.featuresNativeTextTracks=!1,Cr.prototype.featuresVideoFrameCallback=!1,Cr.withSourceHandlers=function(t){t.registerSourceHandler=function(e,i){var n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,e)},t.canPlayType=function(e){for(var i,n=t.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(e))return i;return""},t.selectSourceHandler=function(e,i){for(var n=t.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(e,i))return n[r];return null},t.canPlaySource=function(e,i){var n=t.selectSourceHandler(e,i);return n?n.canHandleSource(e,i):""},["seekable","seeking","duration"].forEach((function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})}),t.prototype),t.prototype.setSource=function(e){var i=t.selectSourceHandler(e,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:Oe.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=i.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Fn.registerComponent("Tech",Cr),Cr.registerTech("Tech",Cr),Cr.defaultTechOrder_=[];var Er={},Ir={},Pr={};function Ar(t,e,i){t.setTimeout((function(){return Nr(e,Er[e.type],i,t)}),1)}function Lr(t,e,i,n){void 0===n&&(n=null);var r="call"+On(i),s=t.reduce(Rr(r),n),a=s===Pr,o=a?null:e[i](s);return function(t,e,i,n){for(var r=t.length-1;r>=0;r--){var s=t[r];s[e]&&s[e](n,i)}}(t,i,o,a),o}var Or={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Dr={setCurrentTime:1,setMuted:1,setVolume:1},Mr={play:1,pause:1};function Rr(t){return function(e,i){return e===Pr?Pr:i[t]?i[t](e):e}}function Nr(t,e,i,n,r,s){void 0===t&&(t={}),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===s&&(s=!1);var a=e,o=a[0],l=a.slice(1);if("string"==typeof o)Nr(t,Er[o],i,n,r,s);else if(o){var c=function(t,e){var i=Ir[t.id()],n=null;if(null==i)return n=e(t),Ir[t.id()]=[[e,n]],n;for(var r=0;r<i.length;r++){var s=i[r],a=s[0],o=s[1];a===e&&(n=o)}return null===n&&(n=e(t),i.push([e,n])),n}(n,o);if(!c.setSource)return r.push(c),Nr(t,l,i,n,r,s);c.setSource(Be({},t),(function(e,a){if(e)return Nr(t,l,i,n,r,s);r.push(c),Nr(a,t.type===a.type?l:Er[a.type],i,n,r,s)}))}else l.length?Nr(t,l,i,n,r,s):s?i(t,r):Nr(t,Er["*"],i,n,r,!0)}var Br={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Fr=function(t){void 0===t&&(t="");var e=dr(t);return Br[e.toLowerCase()]||""},$r=function t(e){if(Array.isArray(e)){var i=[];e.forEach((function(e){e=t(e),Array.isArray(e)?i=i.concat(e):Fe(e)&&i.push(e)})),e=i}else e="string"==typeof e&&e.trim()?[Ur({src:e})]:Fe(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Ur(e)]:[];return e};function Ur(t){if(!t.type){var e=Fr(t.src);e&&(t.type=e)}return t}var jr=function(t){function e(e,i,n){var r,s=Dn({createEl:!1},i);if(r=t.call(this,e,s,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)e.src(i.playerOptions.sources);else for(var a=0,o=i.playerOptions.techOrder;a<o.length;a++){var l=On(o[a]),c=Cr.getTech(l);if(l||(c=Fn.getComponent(l)),c&&c.isSupported()){e.loadTech_(l);break}}return r}return d(e,t),e}(Fn);Fn.registerComponent("MediaLoader",jr);var Vr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(t){return n.handleMouseOver(t)},n.handleMouseOut_=function(t){return n.handleMouseOut(t)},n.handleClick_=function(t){return n.handleClick(t)},n.handleKeyDown_=function(t){return n.handleKeyDown(t)},n.emitTapEvents(),n.enable(),n}d(e,t);var i=e.prototype;return i.createEl=function(t,e,i){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===i&&(i={}),e=Be({className:this.buildCSSClass(),tabIndex:0},e),"button"===t&&Oe.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=Be({role:"button"},i),this.tabIndex_=e.tabIndex;var n=yi(t,e,i);return n.appendChild(yi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},i.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},i.createControlTextEl=function(t){return this.controlTextEl_=yi("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},i.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var i=this.localize(t);this.controlText_=t,vi(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||e.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(e){c().isEventKey(e,"Space")||c().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(Fn);Fn.registerComponent("ClickableComponent",Vr);var Hr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update(),n.update_=function(t){return n.update(t)},e.on("posterchange",n.update_),n}d(e,t);var i=e.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},i.createEl=function(){return yi("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},i.setSrc=function(t){var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e},i.handleClick=function(t){if(this.player_.controls()){var e=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(ii||Ze)&&e||this.player_.tech(!0).focus(),this.player_.paused()?zn(this.player_.play()):this.player_.pause()}},e}(Vr);Fn.registerComponent("PosterImage",Hr);var qr="#222",Wr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function zr(t,e){var i;if(4===t.length)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");i=t.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function Gr(t,e,i){try{t.style[e]=i}catch(t){return}}var Kr=function(t){function e(e,i,n){var s;s=t.call(this,e,i,n)||this;var a=function(t){return s.updateDisplay(t)};return e.on("loadstart",(function(t){return s.toggleDisplay(t)})),e.on("texttrackchange",a),e.on("loadedmetadata",(function(t){return s.preselectTrack(t)})),e.ready(mn(u(s),(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",a),e.on("playerresize",a),r().addEventListener("orientationchange",a),e.on("dispose",(function(){return r().removeEventListener("orientationchange",a)}));for(var t=this.options_.playerOptions.tracks||[],i=0;i<t.length;i++)this.player_.addRemoteTextTrack(t[i],!0);this.preselectTrack()}}))),s}d(e,t);var i=e.prototype;return i.preselectTrack=function(){for(var t,e,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var o=r[a];s&&s.enabled&&s.language&&s.language===o.language&&o.kind in n?o.kind===s.kind?i=o:i||(i=o):s&&!s.enabled?(i=null,t=null,e=null):o.default&&("descriptions"!==o.kind||t?o.kind in n&&!e&&(e=o):t=o)}i?i.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof r().WebVTT&&r().WebVTT.processCues(r(),[],this.el_)},i.updateDisplay=function(){var t=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),e){for(var i=[],n=0;n<t.length;++n){var r=t[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var s=null,a=null,o=t.length;o--;){var l=t[o];"showing"===l.mode&&("descriptions"===l.kind?s=l:a=l)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},i.updateDisplayState=function(t){for(var e=this.player_.textTrackSettings.getValues(),i=t.activeCues,n=i.length;n--;){var s=i[n];if(s){var a=s.displayState;if(e.color&&(a.firstChild.style.color=e.color),e.textOpacity&&Gr(a.firstChild,"color",zr(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(a.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&Gr(a.firstChild,"backgroundColor",zr(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?Gr(a,"backgroundColor",zr(e.windowColor,e.windowOpacity)):a.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+qr:"raised"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+qr:"depressed"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+qr:"uniform"===e.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+qr)),e.fontPercent&&1!==e.fontPercent){var o=r().parseFloat(a.style.fontSize);a.style.fontSize=o*e.fontPercent+"px",a.style.height="auto",a.style.top="auto"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Wr[e.fontFamily])}}},i.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof r().WebVTT&&!t.every((function(t){return!t.activeCues}))){for(var e=[],i=0;i<t.length;++i)for(var n=t[i],s=0;s<n.activeCues.length;++s)e.push(n.activeCues[s]);r().WebVTT.processCues(r(),e,this.el_);for(var a=0;a<t.length;++a){for(var o=t[a],l=0;l<o.activeCues.length;++l){var c=o.activeCues[l].displayState;wi(c,"vjs-text-track-cue"),wi(c,"vjs-text-track-cue-"+(o.language?o.language:a)),o.language&&Ei(c,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},e}(Fn);Fn.registerComponent("TextTrackDisplay",Kr);var Yr=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),n=yi("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),r=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},e}(Fn);Fn.registerComponent("LoadingSpinner",Yr);var Xr=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var i=e.prototype;return i.createEl=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i={});var n=yi("button",e=Be({className:this.buildCSSClass()},e),i=Be({type:"button"},i));return n.appendChild(yi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},i.addChild=function(t,e){void 0===e&&(e={});var i=this.constructor.name;return Oe.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Fn.prototype.addChild.call(this,t,e)},i.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(e){c().isEventKey(e,"Space")||c().isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(Vr);Fn.registerComponent("Button",Xr);var Qr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).mouseused_=!1,n.on("mousedown",(function(t){return n.handleMouseDown(t)})),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return zn(e),void(!this.player_.tech(!0)||(ii||Ze)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var s=function(){return r.focus()};Wn(e)?e.then(s,(function(){})):this.setTimeout(s,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(e){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,e)},i.handleMouseDown=function(t){this.mouseused_=!0},e}(Xr);Qr.prototype.controlText_="Play Video",Fn.registerComponent("BigPlayButton",Qr);var Jr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(e){c().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(Xr);Fn.registerComponent("CloseButton",Jr);var Zr=function(t){function e(e,i){var n;return void 0===i&&(i={}),n=t.call(this,e,i)||this,i.replay=void 0===i.replay||i.replay,n.on(e,"play",(function(t){return n.handlePlay(t)})),n.on(e,"pause",(function(t){return n.handlePause(t)})),i.replay&&n.on(e,"ended",(function(t){return n.handleEnded(t)})),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(t){this.player_.paused()?zn(this.player_.play()):this.player_.pause()},i.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},i.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(t){var e=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(t){return e.handleSeeked(t)}))},e}(Xr);Zr.prototype.controlText_="Play",Fn.registerComponent("PlayToggle",Zr);var ts=function(t,e){t=t<0?0:t;var i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600),s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=n=i="-"),(r=r>0||a>0?r+":":"")+(n=((r||s>=10)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)},es=ts;function is(t,e){return void 0===e&&(e=t),es(t,e)}var ns=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,["timeupdate","ended"],(function(t){return n.updateContent(t)})),n.updateTextNode_(),n}d(e,t);var i=e.prototype;return i.createEl=function(){var e=this.buildCSSClass(),i=t.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),n=yi("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return i.appendChild(n),this.contentEl_=yi("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},i.updateTextNode_=function(t){var e=this;void 0===t&&(t=0),t=is(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(e.contentEl_){var t=e.textNode_;t&&e.contentEl_.firstChild!==t&&(t=null,Oe.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),e.textNode_=a().createTextNode(e.formattedTime_),e.textNode_&&(t?e.contentEl_.replaceChild(e.textNode_,t):e.contentEl_.appendChild(e.textNode_))}})))},i.updateContent=function(t){},e}(Fn);ns.prototype.labelText_="Time",ns.prototype.controlText_="Time",Fn.registerComponent("TimeDisplay",ns);var rs=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(t){var e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)},e}(ns);rs.prototype.labelText_="Current Time",rs.prototype.controlText_="Current Time",Fn.registerComponent("CurrentTimeDisplay",rs);var ss=function(t){function e(e,i){var n,r=function(t){return n.updateContent(t)};return(n=t.call(this,e,i)||this).on(e,"durationchange",r),n.on(e,"loadstart",r),n.on(e,"loadedmetadata",r),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(t){var e=this.player_.duration();this.updateTextNode_(e)},e}(ns);ss.prototype.labelText_="Duration",ss.prototype.controlText_="Duration",Fn.registerComponent("DurationDisplay",ss);var as=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=t.prototype.createEl.call(this,"div"),n=t.prototype.createEl.call(this,"span",{textContent:"/"});return i.appendChild(n),e.appendChild(i),e},e}(Fn);Fn.registerComponent("TimeDivider",as);var os=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"durationchange",(function(t){return n.updateContent(t)})),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var e=t.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&e.insertBefore(yi("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},i.updateContent=function(t){var e;"number"==typeof this.player_.duration()&&(e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e))},e}(ns);os.prototype.labelText_="Remaining Time",os.prototype.controlText_="Remaining Time",Fn.registerComponent("RemainingTimeDisplay",os);var ls=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateShowing(),n.on(n.player(),"durationchange",(function(t){return n.updateShowing(t)})),n}d(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=yi("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(yi("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(a().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},i.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},i.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(Fn);Fn.registerComponent("LiveDisplay",ls);var cs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(t){return n.updateLiveEdgeStatus(t)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}d(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=yi("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},e}(Xr);cs.prototype.controlText_="Seek to live, currently playing live",Fn.registerComponent("SeekToLive",cs);var us=function(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))},hs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handleMouseDown_=function(t){return n.handleMouseDown(t)},n.handleMouseUp_=function(t){return n.handleMouseUp(t)},n.handleKeyDown_=function(t){return n.handleKeyDown(t)},n.handleClick_=function(t){return n.handleClick(t)},n.handleMouseMove_=function(t){return n.handleMouseMove(t)},n.update_=function(t){return n.update(t)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}d(e,t);var i=e.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(e,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=Be({tabIndex:0},i),n=Be({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),t.prototype.createEl.call(this,e,i,n)},i.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||ti||t.preventDefault(),Pi(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove_),this.on(e,"mouseup",this.handleMouseUp_),this.on(e,"touchmove",this.handleMouseMove_),this.on(e,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},i.handleMouseMove=function(t){},i.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;Ai(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var t=this;if(this.el_&&this.bar){var e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(function(){var i=t.vertical()?"height":"width";t.bar.el().style[i]=(100*e).toFixed(2)+"%"}))),e}},i.getProgress=function(){return Number(us(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(t){var e=Di(this.el_,t);return this.vertical()?e.y:e.x},i.handleKeyDown=function(e){c().isEventKey(e,"Left")||c().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):c().isEventKey(e,"Right")||c().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,e)},i.handleClick=function(t){t.stopPropagation(),t.preventDefault()},i.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Fn);Fn.registerComponent("Slider",hs);var ds=function(t,e){return us(t/e*100,0,100).toFixed(2)+"%"},ps=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).partEls_=[],n.on(e,"progress",(function(t){return n.update(t)})),n}d(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=yi("span",{className:"vjs-control-text"}),n=yi("span",{textContent:this.localize("Loaded")}),r=a().createTextNode(": ");return this.percentageEl_=yi("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),e},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},i.update=function(t){var e=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var t=e.player_.liveTracker,i=e.player_.buffered(),n=t&&t.isLive()?t.seekableEnd():e.player_.duration(),r=e.player_.bufferedEnd(),s=e.partEls_,a=ds(r,n);e.percent_!==a&&(e.el_.style.width=a,vi(e.percentageEl_,a),e.percent_=a);for(var o=0;o<i.length;o++){var l=i.start(o),c=i.end(o),u=s[o];u||(u=e.el_.appendChild(yi()),s[o]=u),u.dataset.start===l&&u.dataset.end===c||(u.dataset.start=l,u.dataset.end=c,u.style.left=ds(l,r),u.style.width=ds(c-l,r))}for(var h=s.length;h>i.length;h--)e.el_.removeChild(s[h-1]);s.length=i.length}))},e}(Fn);Fn.registerComponent("LoadProgressBar",ps);var fs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=gn(mn(u(n),n.update),fn),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(t,e,i){var n=Oi(this.el_),r=Li(this.player_.el()),s=t.width*e;if(r&&n){var a=t.left-r.left+s,o=t.width-s+(r.right-t.right),l=n.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(t){vi(this.el_,t)},i.updateTime=function(t,e,i,n){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var s,a=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-e*o;s=(l<1?"":"-")+is(l,o)}else s=is(i,a);r.update(t,e,s),n&&n()}))},e}(Fn);Fn.registerComponent("TimeTooltip",fs);var ms=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=gn(mn(u(n),n.update),fn),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(t,e){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,e,n)}},e}(Fn);ms.prototype.options_={children:[]},li||Ye||ms.prototype.options_.children.push("timeTooltip"),Fn.registerComponent("PlayProgressBar",ms);var gs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=gn(mn(u(n),n.update),fn),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,e){var i=this,n=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,n,(function(){i.el_.style.left=t.width*e+"px"}))},e}(Fn);gs.prototype.options_={children:["timeTooltip"]},Fn.registerComponent("MouseTimeDisplay",gs);var ys=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).setEventHandlers_(),n}d(e,t);var i=e.prototype;return i.setEventHandlers_=function(){var t=this;this.update_=mn(this,this.update),this.update=gn(this.update_,fn),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(e){return t.enableInterval_(e)},this.disableIntervalHandler_=function(e){return t.disableInterval_(e)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a()&&"visibilityState"in a()&&this.on(a(),"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(t){"hidden"===a().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,fn))},i.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(e){var i=this;if("hidden"!==a().visibilityState){var n=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var t=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),e=i.player_.liveTracker,r=i.player_.duration();e&&e.isLive()&&(r=i.player_.liveTracker.liveCurrentTime()),i.percent_!==n&&(i.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),i.percent_=n),i.currentTime_===t&&i.duration_===r||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[is(t,r),is(r,r)],"{1} of {2}")),i.currentTime_=t,i.duration_=r),i.bar&&i.bar.update(Li(i.el()),i.getProgress())})),n}},i.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var t,e=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},i.handleMouseDown=function(e){$i(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},i.handleMouseMove=function(t,e){if(void 0===e&&(e=!1),$i(t)){var i;e||this.player_.scrubbing()||this.player_.scrubbing(!0);var n=this.calculateDistance(t),r=this.player_.liveTracker;if(r&&r.isLive()){if(n>=.99)return void r.seekToLiveEdge();var s=r.seekableStart(),a=r.liveCurrentTime();if((i=s+n*r.liveWindow())>=a&&(i=a),i<=s&&(i=s+.1),i===1/0)return}else(i=n*this.player_.duration())===this.player_.duration()&&(i-=.1);this.userSeek_(i)}},i.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},i.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},i.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?zn(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},i.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(e){var i=this.player_.liveTracker;if(c().isEventKey(e,"Space")||c().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(c().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(c().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(c()(e))){e.preventDefault(),e.stopPropagation();var n=10*(c().codes[c()(e)]-c().codes[0])/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else c().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):c().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):t.prototype.handleKeyDown.call(this,e)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a()&&"visibilityState"in a()&&this.off(a(),"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(hs);ys.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},li||Ye||ys.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Fn.registerComponent("SeekBar",ys);var vs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handleMouseMove=gn(mn(u(n),n.handleMouseMove),fn),n.throttledHandleMouseSeek=gn(mn(u(n),n.handleMouseSeek),fn),n.handleMouseUpHandler_=function(t){return n.handleMouseUp(t)},n.handleMouseDownHandler_=function(t){return n.handleMouseDown(t)},n.enable(),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var i=e.getChild("playProgressBar"),n=e.getChild("mouseTimeDisplay");if(i||n){var r=e.el(),s=Oi(r),a=Di(r,t).x;a=us(a,0,1),n&&n.update(s,a),i&&i.update(s,e.getProgress())}}},i.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach((function(t){return t.disable&&t.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&zn(this.player_.play())}},i.enable=function(){this.children().forEach((function(t){return t.enable&&t.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(t){var e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(t){var e=this.getChild("seekBar");e&&e.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},e}(Fn);vs.prototype.options_={children:["seekBar"]},Fn.registerComponent("ProgressControl",vs);var bs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],(function(t){return n.handlePictureInPictureChange(t)})),n.on(e,["disablepictureinpicturechanged","loadedmetadata"],(function(t){return n.handlePictureInPictureEnabledChange(t)})),n.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===e.currentType().substring(0,5)||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),n.hide()):n.show()})),n.disable(),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){a().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Xr);bs.prototype.controlText_="Picture-in-Picture",Fn.registerComponent("PictureInPictureToggle",bs);var _s=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"fullscreenchange",(function(t){return n.handleFullscreenChange(t)})),!1===a()[e.fsApi_.fullscreenEnabled]&&n.disable(),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Xr);_s.prototype.controlText_="Fullscreen",Fn.registerComponent("FullscreenToggle",_s);var ws=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",(function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))},Ts=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},e}(Fn);Fn.registerComponent("VolumeLevel",Ts);var Ss=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=gn(mn(u(n),n.update),fn),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(t,e,i,n){if(!i){var r=Li(this.el_),s=Li(this.player_.el()),a=t.width*e;if(!s||!r)return;var o=t.left-s.left+a,l=t.width-a+(s.right-t.right),c=r.width/2;o<c?c+=c-o:l<c&&(c=l),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right="-"+c+"px"}this.write(n+"%")},i.write=function(t){vi(this.el_,t)},i.updateVolume=function(t,e,i,n,r){var s=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){s.update(t,e,i,n.toFixed(0)),r&&r()}))},e}(Fn);Fn.registerComponent("VolumeLevelTooltip",Ss);var xs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=gn(mn(u(n),n.update),fn),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,e,i){var n=this,r=100*e;this.getChild("volumeLevelTooltip").updateVolume(t,e,i,r,(function(){i?n.el_.style.bottom=t.height*e+"px":n.el_.style.left=t.width*e+"px"}))},e}(Fn);xs.prototype.options_={children:["volumeLevelTooltip"]},Fn.registerComponent("MouseVolumeLevelDisplay",xs);var ks=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on("slideractive",(function(t){return n.updateLastVolume_(t)})),n.on(e,"volumechange",(function(t){return n.updateARIAAttributes(t)})),e.ready((function(){return n.updateARIAAttributes()})),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(e){$i(e)&&t.prototype.handleMouseDown.call(this,e)},i.handleMouseMove=function(t){var e=this.getChild("mouseVolumeLevelDisplay");if(e){var i=this.el(),n=Li(i),r=this.vertical(),s=Di(i,t);s=r?s.y:s.x,s=us(s,0,1),e.update(n,s,r)}$i(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",(function(){0===t.player_.volume()&&t.player_.lastVolume_(e)}))},e}(hs);ks.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},li||Ye||ks.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ks.prototype.playerEvent="volumechange",Fn.registerComponent("VolumeBar",ks);var Cs=function(t){function e(e,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||$e(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=t.call(this,e,i)||this,ws(u(n),e),n.throttledHandleMouseMove=gn(mn(u(n),n.handleMouseMove),fn),n.handleMouseUpHandler_=function(t){return n.handleMouseUp(t)},n.on("mousedown",(function(t){return n.handleMouseDown(t)})),n.on("touchstart",(function(t){return n.handleMouseDown(t)})),n.on("mousemove",(function(t){return n.handleMouseMove(t)})),n.on(n.volumeBar,["focus","slideractive"],(function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")})),n.on(n.volumeBar,["blur","sliderinactive"],(function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")})),n}d(e,t);var i=e.prototype;return i.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},i.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(Fn);Cs.prototype.options_={children:["volumeBar"]},Fn.registerComponent("VolumeControl",Cs);var Es=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",(function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))},Is=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,Es(u(n),e),n.on(e,["loadstart","volumechange"],(function(t){return n.update(t)})),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(t){var e=this.player_.volume(),i=this.player_.lastVolume_();if(0===e){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(t){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var t=this.player_.volume(),e=3;li&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var i=0;i<4;i++)Ti(this.el_,"vjs-vol-"+i);wi(this.el_,"vjs-vol-"+e)},i.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},e}(Xr);Is.prototype.controlText_="Mute",Fn.registerComponent("MuteToggle",Is);var Ps=function(t){function e(e,i){var n;return void 0===i&&(i={}),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||$e(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=t.call(this,e,i)||this).handleKeyPressHandler_=function(t){return n.handleKeyPress(t)},n.on(e,["loadstart"],(function(t){return n.volumePanelState_(t)})),n.on(n.muteToggle,"keyup",(function(t){return n.handleKeyPress(t)})),n.on(n.volumeControl,"keyup",(function(t){return n.handleVolumeControlKeyUp(t)})),n.on("keydown",(function(t){return n.handleKeyPress(t)})),n.on("mouseover",(function(t){return n.handleMouseOver(t)})),n.on("mouseout",(function(t){return n.handleMouseOut(t)})),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}d(e,t);var i=e.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},i.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(t){c().isEventKey(t,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(t){this.addClass("vjs-hover"),on(a(),"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(t){this.removeClass("vjs-hover"),ln(a(),"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(t){c().isEventKey(t,"Esc")&&this.handleMouseOut()},e}(Fn);Ps.prototype.options_={children:["muteToggle","volumeControl"]},Fn.registerComponent("VolumePanel",Ps);var As=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",(function(t){return n.handleKeyDown(t)})),n.boundHandleBlur_=function(t){return n.handleBlur(t)},n.boundHandleTapClick_=function(t){return n.handleTapClick(t)},n}d(e,t);var i=e.prototype;return i.addEventListenerForItem=function(t){t instanceof Fn&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(t){t instanceof Fn&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),t.prototype.removeChild.call(this,e)},i.addItem=function(t){var e=this.addChild(t);e&&this.addEventListenerForItem(e)},i.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=yi(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),on(i,"click",(function(t){t.preventDefault(),t.stopImmediatePropagation()})),i},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},i.handleBlur=function(t){var e=t.relatedTarget||a().activeElement;if(!this.children().some((function(t){return t.el()===e}))){var i=this.menuButton_;i&&i.buttonPressed_&&e!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var i=e.filter((function(e){return e.el()===t.target}))[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(t){c().isEventKey(t,"Left")||c().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(c().isEventKey(t,"Right")||c().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},i.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},i.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},i.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(Fn);Fn.registerComponent("Menu",As);var Ls=function(t){function e(e,i){var n;void 0===i&&(i={}),(n=t.call(this,e,i)||this).menuButton_=new Xr(e,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=Xr.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var s=function(t){return n.handleClick(t)};return n.handleMenuKeyUp_=function(t){return n.handleMenuKeyUp(t)},n.on(n.menuButton_,"tap",s),n.on(n.menuButton_,"click",s),n.on(n.menuButton_,"keydown",(function(t){return n.handleKeyDown(t)})),n.on(n.menuButton_,"mouseenter",(function(){n.addClass("vjs-hover"),n.menu.show(),on(a(),"keyup",n.handleMenuKeyUp_)})),n.on("mouseleave",(function(t){return n.handleMouseLeave(t)})),n.on("keydown",(function(t){return n.handleSubmenuKeyDown(t)})),n}d(e,t);var i=e.prototype;return i.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},i.createMenu=function(){var t=new As(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=yi("li",{className:"vjs-menu-title",textContent:On(this.options_.title),tabIndex:-1}),i=new Fn(this.player_,{el:e});t.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},i.createItems=function(){},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Xr.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},i.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},i.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},i.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(t){this.removeClass("vjs-hover"),ln(a(),"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(t){c().isEventKey(t,"Esc")||c().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),c().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(c().isEventKey(t,"Up")||c().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(t){(c().isEventKey(t,"Esc")||c().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},i.handleSubmenuKeyDown=function(t){(c().isEventKey(t,"Esc")||c().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),c().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),li&&mi())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Fn);Fn.registerComponent("MenuButton",Ls);var Os=function(t){function e(e,i){var n,r=i.tracks;if((n=t.call(this,e,i)||this).items.length<=1&&n.hide(),!r)return u(n);var s=mn(u(n),n.update);return r.addEventListener("removetrack",s),r.addEventListener("addtrack",s),r.addEventListener("labelchange",s),n.player_.on("ready",s),n.player_.on("dispose",(function(){r.removeEventListener("removetrack",s),r.removeEventListener("addtrack",s),r.removeEventListener("labelchange",s)})),n}return d(e,t),e}(Ls);Fn.registerComponent("TrackButton",Os);var Ds=["Tab","Esc","Up","Down","Right","Left"],Ms=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}d(e,t);var i=e.prototype;return i.createEl=function(e,i,n){this.nonIconControl=!0;var r=t.prototype.createEl.call(this,"li",Be({className:"vjs-menu-item",tabIndex:-1},i),n);return r.replaceChild(yi("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},i.handleKeyDown=function(e){Ds.some((function(t){return c().isEventKey(e,t)}))||t.prototype.handleKeyDown.call(this,e)},i.handleClick=function(t){this.selected(!0)},i.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Vr);Fn.registerComponent("MenuItem",Ms);var Rs=function(t){function e(e,i){var n,s=i.track,o=e.textTracks();i.label=s.label||s.language||"Unknown",i.selected="showing"===s.mode,(n=t.call(this,e,i)||this).track=s,n.kinds=(i.kinds||[i.kind||n.track.kind]).filter(Boolean);var l,c=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.handleTracksChange.apply(u(n),e)},h=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.handleSelectedLanguageChange.apply(u(n),e)};return e.on(["loadstart","texttrackchange"],c),o.addEventListener("change",c),o.addEventListener("selectedlanguagechange",h),n.on("dispose",(function(){e.off(["loadstart","texttrackchange"],c),o.removeEventListener("change",c),o.removeEventListener("selectedlanguagechange",h)})),void 0===o.onchange&&n.on(["tap","click"],(function(){if("object"!=typeof r().Event)try{l=new(r().Event)("change")}catch(t){}l||(l=a().createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(l)})),n.handleTracksChange(),n}d(e,t);var i=e.prototype;return i.handleClick=function(e){var i=this.track,n=this.player_.textTracks();if(t.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var s=n[r];-1!==this.kinds.indexOf(s.kind)&&(s===i?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}},i.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},i.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(Ms);Fn.registerComponent("TextTrackMenuItem",Rs);var Ns=function(t){function e(e,i){return i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,e,i)||this}d(e,t);var i=e.prototype;return i.handleTracksChange=function(t){for(var e=this.player().textTracks(),i=!0,n=0,r=e.length;n<r;n++){var s=e[n];if(this.options_.kinds.indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),i=!0,n=0,r=e.length;n<r;n++){var s=e[n];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Rs);Fn.registerComponent("OffTextTrackMenuItem",Ns);var Bs=function(t){function e(e,i){return void 0===i&&(i={}),i.tracks=e.textTracks(),t.call(this,e,i)||this}return d(e,t),e.prototype.createItems=function(t,e){var i;void 0===t&&(t=[]),void 0===e&&(e=Rs),this.label_&&(i=this.label_+" off"),t.push(new Ns(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var s=n[r];if(this.kinds_.indexOf(s.kind)>-1){var a=new e(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+s.kind+"-menu-item"),t.push(a)}}return t},e}(Os);Fn.registerComponent("TextTrackButton",Bs);var Fs=function(t){function e(e,i){var n,r=i.track,s=i.cue,a=e.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=s.text,i.selected=s.startTime<=a&&a<s.endTime,(n=t.call(this,e,i)||this).track=r,n.cue=s,n}return d(e,t),e.prototype.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(Ms);Fn.registerComponent("ChaptersTrackMenuItem",Fs);var $s=function(t){function e(e,i,n){var r;return(r=t.call(this,e,i,n)||this).selectCurrentItem_=function(){r.items.forEach((function(t){t.selected(r.track_.activeCues[0]===t.cue)}))},r}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},i.update=function(e){if(!e||!e.track||"chapters"===e.track.kind){var i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),t.prototype.update.call(this)):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&t.prototype.update.call(this)}},i.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},i.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var i=t[e];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(On(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},i.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var i=0,n=e.length;i<n;i++){var r=e[i],s=new Fs(this.player_,{track:this.track_,cue:r});t.push(s)}return t},e}(Bs);$s.prototype.kind_="chapters",$s.prototype.controlText_="Chapters",Fn.registerComponent("ChaptersButton",$s);var Us=function(t){function e(e,i,n){var r;r=t.call(this,e,i,n)||this;var s=e.textTracks(),a=mn(u(r),r.handleTracksChange);return s.addEventListener("change",a),r.on("dispose",(function(){s.removeEventListener("change",a)})),r}d(e,t);var i=e.prototype;return i.handleTracksChange=function(t){for(var e=this.player().textTracks(),i=!1,n=0,r=e.length;n<r;n++){var s=e[n];if(s.kind!==this.kind_&&"showing"===s.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Bs);Us.prototype.kind_="descriptions",Us.prototype.controlText_="Descriptions",Fn.registerComponent("DescriptionsButton",Us);var js=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Bs);js.prototype.kind_="subtitles",js.prototype.controlText_="Subtitles",Fn.registerComponent("SubtitlesButton",js);var Vs=function(t){function e(e,i){var n;return i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=t.call(this,e,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return d(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(Rs);Fn.registerComponent("CaptionSettingsMenuItem",Vs);var Hs=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Vs(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(Bs);Hs.prototype.kind_="captions",Hs.prototype.controlText_="Captions",Fn.registerComponent("CaptionsButton",Hs);var qs=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.createEl=function(e,i,n){var r=t.prototype.createEl.call(this,e,i,n),s=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(s.appendChild(yi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(yi("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},e}(Rs);Fn.registerComponent("SubsCapsMenuItem",qs);var Ws=function(t){function e(e,i){var n;return void 0===i&&(i={}),(n=t.call(this,e,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(On(n.label_)),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Vs(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e,qs)},e}(Bs);Ws.prototype.kinds_=["captions","subtitles"],Ws.prototype.controlText_="Subtitles",Fn.registerComponent("SubsCapsButton",Ws);var zs=function(t){function e(e,i){var n,r=i.track,s=e.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(n=t.call(this,e,i)||this).track=r,n.addClass("vjs-"+r.kind+"-menu-item");var a=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.handleTracksChange.apply(u(n),e)};return s.addEventListener("change",a),n.on("dispose",(function(){s.removeEventListener("change",a)})),n}d(e,t);var i=e.prototype;return i.createEl=function(e,i,n){var r=t.prototype.createEl.call(this,e,i,n),s=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(s.appendChild(yi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(yi("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r},i.handleClick=function(e){if(t.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var i=this.player_.audioTracks(),n=0;n<i.length;n++){var r=i[n];r!==this.track&&(r.enabled=r===this.track)}},i.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(Ms);Fn.registerComponent("AudioTrackMenuItem",zs);var Gs=function(t){function e(e,i){return void 0===i&&(i={}),i.tracks=e.audioTracks(),t.call(this,e,i)||this}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),i=0;i<e.length;i++){var n=e[i];t.push(new zs(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t},e}(Os);Gs.prototype.controlText_="Audio Track",Fn.registerComponent("AudioTrackButton",Gs);var Ks=function(t){function e(e,i){var n,r=i.rate,s=parseFloat(r,10);return i.label=r,i.selected=s===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,(n=t.call(this,e,i)||this).label=r,n.rate=s,n.on(e,"ratechange",(function(t){return n.update(t)})),n}d(e,t);var i=e.prototype;return i.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(Ms);Ks.prototype.contentElType="button",Fn.registerComponent("PlaybackRateMenuItem",Ks);var Ys=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(e,"loadstart",(function(t){return n.updateVisibility(t)})),n.on(e,"ratechange",(function(t){return n.updateLabel(t)})),n.on(e,"playbackrateschange",(function(t){return n.handlePlaybackRateschange(t)})),n}d(e,t);var i=e.prototype;return i.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=yi("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},i.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){for(var t=this.playbackRates(),e=[],i=t.length-1;i>=0;i--)e.push(new Ks(this.player(),{rate:t[i]+"x"}));return e},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(t){var e=this.player().playbackRate(),i=this.playbackRates(),n=(i.indexOf(e)+1)%i.length;this.player().playbackRate(i[n])},i.handlePlaybackRateschange=function(t){this.update()},i.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(Ls);Ys.prototype.controlText_="Playback Rate",Fn.registerComponent("PlaybackRateMenuButton",Ys);var Xs=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(e,i,n){return void 0===e&&(e="div"),void 0===i&&(i={}),void 0===n&&(n={}),i.className||(i.className=this.buildCSSClass()),t.prototype.createEl.call(this,e,i,n)},e}(Fn);Fn.registerComponent("Spacer",Xs);var Qs=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},e}(Xs);Fn.registerComponent("CustomControlSpacer",Qs);var Js=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Fn);Js.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in a()&&Js.prototype.options_.children.splice(Js.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Fn.registerComponent("ControlBar",Js);var Zs=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"error",(function(t){return n.open(t)})),n}d(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},i.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Yn);Zs.prototype.options_=(0,o.Z)({},Yn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Fn.registerComponent("ErrorDisplay",Zs);var ta="vjs-text-track-settings",ea=["#000","Black"],ia=["#00F","Blue"],na=["#0FF","Cyan"],ra=["#0F0","Green"],sa=["#F0F","Magenta"],aa=["#F00","Red"],oa=["#FFF","White"],la=["#FF0","Yellow"],ca=["1","Opaque"],ua=["0.5","Semi-Transparent"],ha=["0","Transparent"],da={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ea,oa,aa,ra,ia,la,sa,na]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ca,ua,ha]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[oa,ea,aa,ra,ia,la,sa,na]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ca,ua]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ha,ua,ca]}};function pa(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}da.windowColor.options=da.backgroundColor.options;var fa=function(t){function e(e,i){var n;return i.temporary=!1,(n=t.call(this,e,i)||this).updateDisplay=n.updateDisplay.bind(u(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=yi("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===i.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",(function(){n.saveSettings(),n.close()})),n.on(n.$(".vjs-default-button"),"click",(function(){n.setDefaults(),n.updateDisplay()})),Ne(da,(function(t){n.on(n.$(t.selector),"change",n.updateDisplay)})),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}d(e,t);var i=e.prototype;return i.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},i.createElSelect_=function(t,e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i="label");var r=da[t],s=r.id.replace("%s",this.id_),a=[e,s].join(" ").trim();return["<"+i+' id="'+s+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+a+'">'].concat(r.options.map((function(t){var e=s+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+a+" "+e+'">',n.localize(t[1]),"</option>"].join("")}))).concat("</select>").join("")},i.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return yi("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return yi("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var t=this.localize("restore all settings to the default values");return yi("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var t,e,i,n=this;return e=function(t,e,i){var r,s,a=(r=n.$(e.selector),s=e.parser,pa(r.options[r.options.selectedIndex].value,s));return void 0!==a&&(t[i]=a),t},void 0===(i={})&&(i=0),Re(t=da).reduce((function(i,n){return e(i,t[n],n)}),i)},i.setValues=function(t){var e=this;Ne(da,(function(i,n){!function(t,e,i){if(e)for(var n=0;n<t.options.length;n++)if(pa(t.options[n].value,i)===e){t.selectedIndex=n;break}}(e.$(i.selector),t[n],i.parser)}))},i.setDefaults=function(){var t=this;Ne(da,(function(e){var i=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=i}))},i.restoreSettings=function(){var t;try{t=JSON.parse(r().localStorage.getItem(ta))}catch(t){Oe.warn(t)}t&&this.setValues(t)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?r().localStorage.setItem(ta,JSON.stringify(t)):r().localStorage.removeItem(ta)}catch(t){Oe.warn(t)}}},i.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,e=t&&t.subsCapsButton,i=t&&t.captionsButton;e?e.focus():i&&i.focus()},e}(Yn);Fn.registerComponent("TextTrackSettings",fa);var ma=function(t){function e(e,i){var n,s=i.ResizeObserver||r().ResizeObserver;null===i.ResizeObserver&&(s=!1);var a=Dn({createEl:!s,reportTouchActivity:!1},i);return(n=t.call(this,e,a)||this).ResizeObserver=i.ResizeObserver||r().ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=yn((function(){n.resizeHandler()}),100,!1,u(n)),s?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(e.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var t=n.debouncedHandler_,e=n.unloadListener_=function(){ln(this,"resize",t),ln(this,"unload",e),e=null};on(n.el_.contentWindow,"unload",e),on(n.el_.contentWindow,"resize",t)}},n.one("load",n.loadListener_)),n}d(e,t);var i=e.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(Fn);Fn.registerComponent("ResizeManager",ma);var ga={trackingThreshold:20,liveTolerance:15},ya=function(t){function e(e,i){var n,r=Dn(ga,i,{createEl:!1});return(n=t.call(this,e,r)||this).handleVisibilityChange_=function(t){return n.handleVisibilityChange(t)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(t){return n.handlePlay(t)},n.handleFirstTimeupdate_=function(t){return n.handleFirstTimeupdate(t)},n.handleSeeked_=function(t){return n.handleSeeked(t)},n.seekToLiveEdge_=function(t){return n.seekToLiveEdge(t)},n.reset_(),n.on(n.player_,"durationchange",(function(t){return n.handleDurationchange(t)})),n.on(n.player_,"canplay",(function(){return n.toggleTracking()})),ii&&"hidden"in a()&&"visibilityState"in a()&&n.on(a(),"visibilitychange",n.handleVisibilityChange_),n}d(e,t);var i=e.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(a().hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var e=Number(r().performance.now().toFixed(4)),i=-1===this.lastTime_?0:(e-this.lastTime_)/1e3;this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+i;var n=this.liveCurrentTime(),s=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-s)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,fn),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var t=this.player_.seekable(),e=[],i=t?t.length:0;i--;)e.push(t.end(i));return e.length?e.sort()[e.length-1]:1/0},i.seekableStart=function(){for(var t=this.player_.seekable(),e=[],i=t?t.length:0;i--;)e.push(t.start(i));return e.length?e.sort()[0]:0},i.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(a(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},e}(Fn);Fn.registerComponent("LiveTracker",ya);var va,ba=function(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var i=t.$$("source"),n=[],r="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var a=i[s].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(r=n[0]),t.triggerSourceset(r),!0)},_a=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=a().createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var i=a().createDocumentFragment();e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",r().Element.prototype.appendChild.call(this,i),this.innerHTML}}),wa=function(t,e){for(var i={},n=0;n<t.length&&!((i=Object.getOwnPropertyDescriptor(t[n],e))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},Ta=function(t){var e=t.el();if(!e.resetSourceWatch_){var i={},n=function(t){return wa([t.el(),r().HTMLMediaElement.prototype,r().Element.prototype,_a],"innerHTML")}(t),s=function(i){return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i.apply(e,r);return ba(t),a}};["append","appendChild","insertAdjacentHTML"].forEach((function(t){e[t]&&(i[t]=e[t],e[t]=s(i[t]))})),Object.defineProperty(e,"innerHTML",Dn(n,{set:s(n.set)})),e.resetSourceWatch_=function(){e.resetSourceWatch_=null,Object.keys(i).forEach((function(t){e[t]=i[t]})),Object.defineProperty(e,"innerHTML",n)},t.one("sourceset",e.resetSourceWatch_)}},Sa=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?hr(r().Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return r().Element.prototype.setAttribute.call(this,"src",t),t}}),xa=function(t,e,i,n){void 0===n&&(n=!0);var r=function(i){return Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var t=i();return r(t),t}};return n&&(s.set=r),Object.defineProperty(t,e,s)},ka=function(t){function e(e,i){var n;n=t.call(this,e,i)||this;var r=e.source,s=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&"VIDEO"===n.el_.tagName,r&&(n.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var a=n.el_.childNodes,o=a.length,l=[];o--;){var c=a[o];"track"===c.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(c),n.remoteTextTracks().addTrack(c.track),n.textTracks().addTrack(c.track),s||n.el_.hasAttribute("crossorigin")||!pr(c.src)||(s=!0)):l.push(c))}for(var u=0;u<l.length;u++)n.el_.removeChild(l[u])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&s&&Oe.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(si||oi||Qe)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}d(e,t);var i=e.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){!function(t){if(t.featuresSourceset){var e=t.el();if(!e.resetSourceset_){var i=function(t){return wa([t.el(),r().HTMLMediaElement.prototype,Sa],"src")}(t),n=e.setAttribute,s=e.load;Object.defineProperty(e,"src",Dn(i,{set:function(n){var r=i.set.call(e,n);return t.triggerSourceset(e.src),r}})),e.setAttribute=function(i,r){var s=n.call(e,i,r);return/src/i.test(i)&&t.triggerSourceset(e.src),s},e.load=function(){var i=s.call(e);return ba(t)||(t.triggerSourceset(""),Ta(t)),i},e.currentSrc?t.triggerSourceset(e.currentSrc):ba(t)||Ta(t),e.resetSourceset_=function(){e.resetSourceset_=null,e.load=s,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}}}}(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var t,e=this.textTracks(),i=function(){t=[];for(var i=0;i<e.length;i++){var n=e[i];"metadata"===n.kind&&t.push({track:n,storedMode:n.mode})}};i(),e.addEventListener("change",i),this.on("dispose",(function(){return e.removeEventListener("change",i)}));var n=function i(){for(var n=0;n<t.length;n++){var r=t[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(function(){e.removeEventListener("change",i),e.removeEventListener("change",n),e.addEventListener("change",n)})),this.on("webkitendfullscreen",(function(){e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",n)}))},i.overrideNative_=function(t,e){var i=this;if(e===this["featuresNative"+t+"Tracks"]){var n=t.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach((function(t){i.el()[n+"Tracks"].removeEventListener(t,i[n+"TracksListeners_"][t])})),this["featuresNative"+t+"Tracks"]=!e,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},i.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},i.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},i.proxyNativeTracksForType_=function(t){var e=this,i=Sr[t],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var s={change:function(i){var n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===t&&e[xr.remoteText.getterName]().trigger(n)},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}},a=function(){for(var t=[],e=0;e<r.length;e++){for(var i=!1,s=0;s<n.length;s++)if(n[s]===r[e]){i=!0;break}i||t.push(r[e])}for(;t.length;)r.removeTrack(t.shift())};this[i.getterName+"Listeners_"]=s,Object.keys(s).forEach((function(t){var i=s[t];n.addEventListener(t,i),e.on("dispose",(function(e){return n.removeEventListener(t,i)}))})),this.on("loadstart",a),this.on("dispose",(function(t){return e.off("loadstart",a)}))}},i.proxyNativeTracks_=function(){var t=this;Sr.names.forEach((function(e){t.proxyNativeTracksForType_(e)}))},i.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var i=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(i,t),e.disposeMediaElement(t),t=i}else{t=a().createElement("video");var n=Dn({},this.options_.tag&&ki(this.options_.tag));si&&!0===this.options_.nativeControlsForTouch||delete n.controls,xi(t,Be(n,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&Ei(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],s=0;s<r.length;s++){var o=r[s],l=this.options_[o];void 0!==l&&(l?Ei(t,o,o):Ii(t,o),t[o]=l)}return t},i.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,i=function(){e=!0};this.on("loadstart",i);var n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",i),this.off("loadedmetadata",n),e||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),t.readyState>=2&&r.push("loadeddata"),t.readyState>=3&&r.push("canplay"),t.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(t){this.trigger(t)}),this)}))}},i.setScrubbing=function(t){this.isScrubbing_=t},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&ci?this.el_.fastSeek(t):this.el_.currentTime=t}catch(t){Oe(t,"Video is not ready. (Video.js)")}},i.duration=function(){var t=this;return this.el_.duration===1/0&&Ye&&ti&&0===this.el_.currentTime?(this.on("timeupdate",(function e(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))})),NaN):this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",(function(){t.off("webkitbeginfullscreen",i),t.off("webkitendfullscreen",e)}))}},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=r().navigator&&r().navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},i.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)zn(this.el_.play()),this.setTimeout((function(){t.pause();try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):t.prototype.requestVideoFrameCallback.call(this,e)},i.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):t.prototype.cancelVideoFrameCallback.call(this,e)},i.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},i.reset=function(){e.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(t){this.el_.controls=!!t},i.addTextTrack=function(e,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,n):t.prototype.addTextTrack.call(this,e,i,n)},i.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var i=a().createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},i.addRemoteTextTrack=function(e,i){var n=t.prototype.addRemoteTextTrack.call(this,e,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var i=this.$$("track"),n=i.length;n--;)e!==i[n]&&e!==i[n].track||this.el().removeChild(i[n])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),r().performance&&"function"==typeof r().performance.now?t.creationTime=r().performance.now():r().performance&&r().performance.timing&&"number"==typeof r().performance.timing.navigationStart&&(t.creationTime=r().Date.now()-r().performance.timing.navigationStart),t},e}(Cr);xa(ka,"TEST_VID",(function(){if(pi()){var t=a().createElement("video"),e=a().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}})),ka.isSupported=function(){try{ka.TEST_VID.volume=.5}catch(t){return!1}return!(!ka.TEST_VID||!ka.TEST_VID.canPlayType)},ka.canPlayType=function(t){return ka.TEST_VID.canPlayType(t)},ka.canPlaySource=function(t,e){return ka.canPlayType(t.type)},ka.canControlVolume=function(){try{var t=ka.TEST_VID.volume;ka.TEST_VID.volume=t/2+.1;var e=t!==ka.TEST_VID.volume;return e&&li?(r().setTimeout((function(){ka&&ka.prototype&&(ka.prototype.featuresVolumeControl=t!==ka.TEST_VID.volume)})),!1):e}catch(t){return!1}},ka.canMuteVolume=function(){try{var t=ka.TEST_VID.muted;return ka.TEST_VID.muted=!t,ka.TEST_VID.muted?Ei(ka.TEST_VID,"muted","muted"):Ii(ka.TEST_VID,"muted"),t!==ka.TEST_VID.muted}catch(t){return!1}},ka.canControlPlaybackRate=function(){if(Ye&&ti&&ei<58)return!1;try{var t=ka.TEST_VID.playbackRate;return ka.TEST_VID.playbackRate=t/2+.1,t!==ka.TEST_VID.playbackRate}catch(t){return!1}},ka.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(a().createElement("video"),"src",{get:t,set:t}),Object.defineProperty(a().createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(a().createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(a().createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},ka.supportsNativeTextTracks=function(){return ci||li&&ti},ka.supportsNativeVideoTracks=function(){return!(!ka.TEST_VID||!ka.TEST_VID.videoTracks)},ka.supportsNativeAudioTracks=function(){return!(!ka.TEST_VID||!ka.TEST_VID.audioTracks)},ka.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(t){var e=t[0],i=t[1];xa(ka.prototype,e,(function(){return ka[i]()}),!0)})),ka.prototype.featuresVolumeControl=ka.canControlVolume(),ka.prototype.movingMediaElementInDOM=!li,ka.prototype.featuresFullscreenResize=!0,ka.prototype.featuresProgressEvents=!0,ka.prototype.featuresTimeupdateEvents=!0,ka.prototype.featuresVideoFrameCallback=!(!ka.TEST_VID||!ka.TEST_VID.requestVideoFrameCallback),ka.patchCanPlayType=function(){Xe>=4&&!Je&&!ti&&(va=ka.TEST_VID&&ka.TEST_VID.constructor.prototype.canPlayType,ka.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(t)?"maybe":va.call(this,t)})},ka.unpatchCanPlayType=function(){var t=ka.TEST_VID.constructor.prototype.canPlayType;return va&&(ka.TEST_VID.constructor.prototype.canPlayType=va),t},ka.patchCanPlayType(),ka.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},ka.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),i=e.length;i--;)t.removeChild(e[i]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(t){ka.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(t){ka.prototype["set"+On(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(t){ka.prototype[t]=function(){return this.el_[t]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(t){ka.prototype["set"+On(t)]=function(e){this.el_[t]=e}})),["pause","load","play"].forEach((function(t){ka.prototype[t]=function(){return this.el_[t]()}})),Cr.withSourceHandlers(ka),ka.nativeSourceHandler={},ka.nativeSourceHandler.canPlayType=function(t){try{return ka.TEST_VID.canPlayType(t)}catch(t){return""}},ka.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return ka.nativeSourceHandler.canPlayType(t.type);if(t.src){var i=dr(t.src);return ka.nativeSourceHandler.canPlayType("video/"+i)}return""},ka.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)},ka.nativeSourceHandler.dispose=function(){},ka.registerSourceHandler(ka.nativeSourceHandler),Cr.registerTech("Html5",ka);var Ca=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ea={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ia=["tiny","xsmall","small","medium","large","xlarge","huge"],Pa={};Ia.forEach((function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;Pa[t]="vjs-layout-"+e}));var Aa={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},La=function(t){function e(i,n,r){var s;if(i.id=i.id||n.id||"vjs_video_"+Ji(),(n=Be(e.getTagSettings(i),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof i.closest){var o=i.closest("[lang]");o&&o.getAttribute&&(n.language=o.getAttribute("lang"))}else for(var l=i;l&&1===l.nodeType;){if(ki(l).hasOwnProperty("lang")){n.language=l.getAttribute("lang");break}l=l.parentNode}if((s=t.call(this,null,n,r)||this).boundDocumentFullscreenChange_=function(t){return s.documentFullscreenChange_(t)},s.boundFullWindowOnEscKey_=function(t){return s.fullWindowOnEscKey(t)},s.boundUpdateStyleEl_=function(t){return s.updateStyleEl_(t)},s.boundApplyInitTime_=function(t){return s.applyInitTime_(t)},s.boundUpdateCurrentBreakpoint_=function(t){return s.updateCurrentBreakpoint_(t)},s.boundHandleTechClick_=function(t){return s.handleTechClick_(t)},s.boundHandleTechDoubleClick_=function(t){return s.handleTechDoubleClick_(t)},s.boundHandleTechTouchStart_=function(t){return s.handleTechTouchStart_(t)},s.boundHandleTechTouchMove_=function(t){return s.handleTechTouchMove_(t)},s.boundHandleTechTouchEnd_=function(t){return s.handleTechTouchEnd_(t)},s.boundHandleTechTap_=function(t){return s.handleTechTap_(t)},s.isFullscreen_=!1,s.log=De(s.id_),s.fsApi_=Ce,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=i,s.tagAttributes=i&&ki(i),s.language(s.options_.language),n.languages){var c={};Object.getOwnPropertyNames(n.languages).forEach((function(t){c[t.toLowerCase()]=n.languages[t]})),s.languages_=c}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=n.poster||"",s.controls_=!!n.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach((function(t){if("function"!=typeof s[t])throw new Error('plugin "'+t+'" does not exist')})),s.scrubbing_=!1,s.el_=s.createEl(),In(u(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(on(a(),s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var h=Dn(s.options_);n.plugins&&Object.keys(n.plugins).forEach((function(t){s[t](n.plugins[t])})),n.debug&&s.debug(!0),s.options_.playerOptions=h,s.middleware_=[],s.playbackRates(n.playbackRates),s.initChildren(),s.isAudio("audio"===i.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),si&&s.addClass("vjs-touch-enabled"),li||s.addClass("vjs-workinghover"),e.players[s.id_]=u(s);var d=Te.split(".")[0];return s.addClass("vjs-v"+d),s.userActive(!0),s.reportUserActivity(),s.one("play",(function(t){return s.listenForUserActivity_(t)})),s.on("stageclick",(function(t){return s.handleStageClick_(t)})),s.on("keydown",(function(t){return s.handleKeyDown(t)})),s.on("languagechange",(function(t){return s.handleLanguagechange(t)})),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",(function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)})),s}d(e,t);var i=e.prototype;return i.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),ln(a(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ln(a(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Ir[this.id()]=null,kr.names.forEach((function(t){var e=kr[t],n=i[e.getterName]();n&&n.off&&n.off()})),t.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},i.createEl=function(){var e,i=this.tag,n=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),s="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=i.parentNode:s||(e=this.el_=t.prototype.createEl.call(this,"div"));var o=ki(i);if(s){for(e=this.el_=i,i=this.tag=a().createElement("video");e.children.length;)i.appendChild(e.firstChild);_i(e,"video-js")||wi(e,"video-js"),e.appendChild(i),n=this.playerElIngest_=e,Object.keys(e).forEach((function(t){try{i[t]=e[t]}catch(t){}}))}if(i.setAttribute("tabindex","-1"),o.tabindex="-1",(ii||ti&&ri)&&(i.setAttribute("role","application"),o.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(t){s&&"class"===t||e.setAttribute(t,o[t]),s&&i.setAttribute(t,o[t])})),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=e.player=this,this.addClass("vjs-paused"),!0!==r().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Yi("vjs-styles-dimensions");var l=ji(".vjs-styles-defaults"),c=ji("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var u=i.getElementsByTagName("a"),h=0;h<u.length;h++){var d=u.item(h);wi(d,"vjs-hidden"),d.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!n&&i.parentNode.insertBefore(e,i),bi(i,e),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e},i.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):Oe.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},i.width=function(t){return this.dimension("width",t)},i.height=function(t){return this.dimension("height",t)},i.dimension=function(t,e){var i=t+"_";if(void 0===e)return this[i]||0;if(""===e||"auto"===e)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(e);isNaN(n)?Oe.error('Improper value "'+e+'" supplied for for '+t):(this[i]=n,this.updateStyleEl_())},i.fluid=function(t){var e,i,n=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,_n(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),i=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},_n(e=this)?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(!0!==r().VIDEOJS_NO_DYNAMIC_STYLE){var t,e,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),s=n[1]/n[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*s,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Xi(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+i+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*s+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(a>=0&&(l.width=a),o>=0&&(l.height=o))}},i.loadTech_=function(t,e){var i=this;this.tech_&&this.unloadTech_();var n=On(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==n&&this.tag&&(Cr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var s=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);var a={source:e,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};kr.names.forEach((function(t){var e=kr[t];a[e.getterName]=i[e.privateName]})),Be(a,this.options_[n]),Be(a,this.options_[r]),Be(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var o,l,c=Cr.getTech(t);if(!c)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new c(a),this.tech_.ready(mn(this,this.handleTechReady_),!0),o=this.textTracksJson_||[],l=this.tech_,o.forEach((function(t){var e=l.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach((function(t){return e.addCue(t)}))})),l.textTracks(),Ca.forEach((function(t){i.on(i.tech_,t,(function(e){return i["handleTech"+On(t)+"_"](e)}))})),Object.keys(Ea).forEach((function(t){i.on(i.tech_,t,(function(e){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+Ea[t]+"_"].bind(i),event:e}):i["handleTech"+Ea[t]+"_"](e)}))})),this.on(this.tech_,"loadstart",(function(t){return i.handleTechLoadStart_(t)})),this.on(this.tech_,"sourceset",(function(t){return i.handleTechSourceset_(t)})),this.on(this.tech_,"waiting",(function(t){return i.handleTechWaiting_(t)})),this.on(this.tech_,"ended",(function(t){return i.handleTechEnded_(t)})),this.on(this.tech_,"seeking",(function(t){return i.handleTechSeeking_(t)})),this.on(this.tech_,"play",(function(t){return i.handleTechPlay_(t)})),this.on(this.tech_,"firstplay",(function(t){return i.handleTechFirstPlay_(t)})),this.on(this.tech_,"pause",(function(t){return i.handleTechPause_(t)})),this.on(this.tech_,"durationchange",(function(t){return i.handleTechDurationChange_(t)})),this.on(this.tech_,"fullscreenchange",(function(t,e){return i.handleTechFullscreenChange_(t,e)})),this.on(this.tech_,"fullscreenerror",(function(t,e){return i.handleTechFullscreenError_(t,e)})),this.on(this.tech_,"enterpictureinpicture",(function(t){return i.handleTechEnterPictureInPicture_(t)})),this.on(this.tech_,"leavepictureinpicture",(function(t){return i.handleTechLeavePictureInPicture_(t)})),this.on(this.tech_,"error",(function(t){return i.handleTechError_(t)})),this.on(this.tech_,"posterchange",(function(t){return i.handleTechPosterChange_(t)})),this.on(this.tech_,"textdata",(function(t){return i.handleTechTextData_(t)})),this.on(this.tech_,"ratechange",(function(t){return i.handleTechRateChange_(t)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||bi(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var t,e,i,n=this;kr.names.forEach((function(t){var e=kr[t];n[e.privateName]=n[e.getterName]()})),this.textTracksJson_=(t=this.tech_,e=t.$$("track"),i=Array.prototype.map.call(e,(function(t){return t.track})),Array.prototype.map.call(e,(function(t){var e=Gn(t.track);return t.src&&(e.src=t.src),e})).concat(Array.prototype.filter.call(t.textTracks(),(function(t){return-1===i.indexOf(t)})).map(Gn))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(t){return void 0===t&&Oe.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"==typeof t){var i,n=function(){var t=e.muted();e.muted(!0);var i=function(){e.muted(t)};e.playTerminatedQueue_.push(i);var n=e.play();if(Wn(n))return n.catch((function(t){throw i(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))}))};if("any"!==t||this.muted()?i="muted"!==t||this.muted()?this.play():n():Wn(i=this.play())&&(i=i.catch(n)),Wn(i))return i.then((function(){e.trigger({type:"autoplay-success",autoplay:t})})).catch((function(){e.trigger({type:"autoplay-failure",autoplay:t})}))}},i.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,i="";"string"!=typeof e&&(e=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!i&&(i=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var i=t.cache_.sources.filter((function(t){return t.src===e}));if(i.length)return i[0].type;for(var n=t.$$("source"),r=0;r<n.length;r++){var s=n[r];if(s.type&&s.src&&s.src===e)return s.type}return Fr(e)}(this,e)),this.cache_.source=Dn({},t,{src:e,type:i});for(var n=this.cache_.sources.filter((function(t){return t.src&&t.src===e})),r=[],s=this.$$("source"),a=[],o=0;o<s.length;o++){var l=ki(s[o]);r.push(l),l.src&&l.src===e&&a.push(l.src)}a.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},i.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_){var i=function(t){return e.updateSourceCaches_(t)},n=this.currentSource().src,r=t.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=function(){}),i(r),t.src||this.tech_.any(["sourceset","loadstart"],(function(t){if("sourceset"!==t.type){var i=e.techGet("currentSrc");e.lastSource_.tech=i,e.updateSourceCaches_(i)}}))}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},i.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(t){return t.callback(t.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",(function i(){e!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",i))}))},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(Oe.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(t){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?zn(this.play()):this.pause()))},i.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(e){return e.contains(t.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(t){var e=t.target.player;if(!e||e===this){var i=this.el(),n=a()[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},i.handleTechFullscreenChange_=function(t,e){var i=this;e&&(e.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){i.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(e.isFullscreen))},i.handleTechFullscreenError_=function(t,e){this.trigger("fullscreenerror",e)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var t=this.tech_.error();this.error(t)},i.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(t,e){this.ready((function(){if(t in Dr)return function(t,e,i,n){return e[i](t.reduce(Rr(i),n))}(this.middleware_,this.tech_,t,e);if(t in Mr)return Lr(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(t){throw Oe(t),t}}),!0)},i.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Or)return function(t,e,i){return t.reduceRight(Rr(i),e[i]())}(this.middleware_,this.tech_,t);if(t in Mr)return Lr(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw Oe("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw Oe("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw Oe(e),e}}},i.play=function(){var t=this,e=this.options_.Promise||r().Promise;return e?new e((function(e){t.play_(e)})):this.play_()},i.play_=function(t){var e=this;void 0===t&&(t=zn),this.playCallbacks_.push(t);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(t){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!ci&&!li||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},i.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach((function(t){t()}))},i.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach((function(e){e(t)}))},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||jn(0,0)},i.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(t){return void 0!==t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=jn(0,0)),t},i.bufferedPercent=function(){return Vn(this.buffered(),this.duration())},i.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),i=t.end(t.length-1);return i>e&&(i=e),i},i.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},i.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},i.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(t){if(void 0!==t){var e=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},i.requestFullscreen=function(t){var e=this.options_.Promise||r().Promise;if(e){var i=this;return new e((function(e,n){function r(){i.off("fullscreenerror",a),i.off("fullscreenchange",s)}function s(){r(),e()}function a(t,e){r(),n(e)}i.one("fullscreenchange",s),i.one("fullscreenerror",a);var o=i.requestFullscreenHelper_(t);o&&(o.then(r,r),o.then(e,n))}))}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(t){var e,i=this;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(e=t)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](e);return n&&n.then((function(){return i.isFullscreen(!0)}),(function(){return i.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var t=this.options_.Promise||r().Promise;if(t){var e=this;return new t((function(t,i){function n(){e.off("fullscreenerror",s),e.off("fullscreenchange",r)}function r(){n(),t()}function s(t,e){n(),i(e)}e.one("fullscreenchange",r),e.one("fullscreenerror",s);var a=e.exitFullscreenHelper_();a&&(a.then(n,n),a.then(t,i))}))}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var e=a()[this.fsApi_.exitFullscreen]();return e&&zn(e.then((function(){return t.isFullscreen(!1)}))),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=a().documentElement.style.overflow,on(a(),"keydown",this.boundFullWindowOnEscKey_),a().documentElement.style.overflow="hidden",wi(a().body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(t){c().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,ln(a(),"keydown",this.boundFullWindowOnEscKey_),a().documentElement.style.overflow=this.docOrigOverflow,Ti(a().body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in a()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in a())return a().exitPictureInPicture()},i.handleKeyDown=function(t){var e,i,n=this.options_.userActions;n&&n.hotkeys&&(e=this.el_.ownerDocument.activeElement,i=e.tagName.toLowerCase(),e.isContentEditable||("input"===i?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(i))||("function"==typeof n.hotkeys?n.hotkeys.call(this,t):this.handleHotkeys(t)))},i.handleHotkeys=function(t){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},i=e.fullscreenKey,n=void 0===i?function(t){return c().isEventKey(t,"f")}:i,r=e.muteKey,s=void 0===r?function(t){return c().isEventKey(t,"m")}:r,o=e.playPauseKey,l=void 0===o?function(t){return c().isEventKey(t,"k")||c().isEventKey(t,"Space")}:o;if(n.call(this,t)){t.preventDefault(),t.stopPropagation();var u=Fn.getComponent("FullscreenToggle");!1!==a()[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,t)}else s.call(this,t)?(t.preventDefault(),t.stopPropagation(),Fn.getComponent("MuteToggle").prototype.handleClick.call(this,t)):l.call(this,t)&&(t.preventDefault(),t.stopPropagation(),Fn.getComponent("PlayToggle").prototype.handleClick.call(this,t))},i.canPlayType=function(t){for(var e,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],s=Cr.getTech(r);if(s||(s=Fn.getComponent(r)),s){if(s.isSupported()&&(e=s.canPlayType(t)))return e}else Oe.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(t){var e,i,n=this,r=this.options_.techOrder.map((function(t){return[t,Cr.getTech(t)]})).filter((function(t){var e=t[0],i=t[1];return i?i.isSupported():(Oe.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),s=function(t,e,i){var n;return t.some((function(t){return e.some((function(e){if(n=i(t,e))return!0}))})),n},a=function(t,e){var i=t[0];if(t[1].canPlaySource(e,n.options_[i.toLowerCase()]))return{source:e,tech:i}};return e=this.options_.sourceOrder?s(t,r,(i=a,function(t,e){return i(e,t)})):s(r,t,a),e||!1},i.handleSrc_=function(t,e){var i=this;if(void 0===t)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var n=$r(t);if(n.length){if(this.changingSrc_=!0,e||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),Ar(this,n[0],(function(t,r){var s,a;if(i.middleware_=r,e||(i.cache_.sources=n),i.updateSourceCaches_(t),i.src_(t))return n.length>1?i.handleSrc_(n.slice(1)):(i.changingSrc_=!1,i.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void i.triggerReady());s=r,a=i.tech_,s.forEach((function(t){return t.setTech&&t.setTech(a)}))})),this.options_.retryOnError&&n.length>1){var r=function(){i.error(null),i.handleSrc_(n.slice(1),!0)},s=function(){i.off("error",r)};this.one("error",r),this.one("playing",s),this.resetRetryOnError_=function(){i.off("error",r),i.off("playing",s)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},i.src=function(t){return this.handleSrc_(t,!1)},i.src_=function(t){var e,i,n=this,r=this.selectSource([t]);return!r||(e=r.tech,i=this.techName_,On(e)!==On(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){n.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1}),!0),!1))},i.load=function(){this.techCall_("load")},i.reset=function(){var t=this,e=this.options_.Promise||r().Promise;this.paused()||!e?this.doReset_():zn(this.play().then((function(){return t.doReset_()})))},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),_n(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar||{},e=t.durationDisplay,i=t.remainingTimeDisplay;e&&e.updateContent(),i&&i.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},i.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),e=!1):this.options_.autoplay=!!t,e=void 0===e?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)},i.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},i.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},i.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(t){var e=this;if(void 0===t)return this.error_||null;if(xe("beforeerror").forEach((function(i){var n=i(e,t);Fe(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?t=n:e.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&t&&4===t.code){var i=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),void this.one("loadstart",(function(){this.off(["click","touchstart"],i)}))}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Hn(t),this.addClass("vjs-error"),Oe.error("(CODE:"+this.error_.code+" "+Hn.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),xe("error").forEach((function(t){return t(e,e.error_)}))},i.reportUserActivity=function(t){this.userActivity_=!0},i.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(t){t.stopPropagation(),t.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var t,e,i,n=mn(this,this.reportUserActivity),r=function(e){n(),this.clearInterval(t)};this.on("mousedown",(function(){n(),this.clearInterval(t),t=this.setInterval(n,250)})),this.on("mousemove",(function(t){t.screenX===e&&t.screenY===i||(e=t.screenX,i=t.screenY,n())})),this.on("mouseup",r),this.on("mouseleave",r);var s,a=this.getChild("controlBar");!a||li||Ye||(a.on("mouseenter",(function(t){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(t){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",n),this.on("keyup",n),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t<=0||(s=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),t))}}),250)},i.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},i.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},i.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var e=this.children(),i=this.getChild("ControlBar"),n=i&&i.currentHeight();e.forEach((function(e){e!==i&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),t.audioOnlyCache_.hiddenChildren.push(e))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")},i.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(t){return t.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},i.audioOnlyMode=function(t){var e=this;if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var i=this.options_.Promise||r().Promise;if(i){if(t){var n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),i.all(n).then((function(){return e.enableAudioOnlyUI_()}))}return i.resolve().then((function(){return e.disableAudioOnlyUI_()}))}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},i.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.audioPosterMode=function(t){var e=this;if("boolean"!=typeof t||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var i=this.options_.Promise||r().Promise;return i?t?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){e.enablePosterModeUI_()})):i.resolve().then((function(){e.enablePosterModeUI_()})):i.resolve().then((function(){e.disablePosterModeUI_()})):t?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},i.addTextTrack=function(t,e,i){if(this.tech_)return this.tech_.addTextTrack(t,e,i)},i.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},i.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=t.track;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),_n(this)&&this.trigger("languagechange"))},i.languages=function(){return Dn(e.prototype.options_.languages,this.languages_)},i.toJSON=function(){var t=Dn(this.options_),e=t.tracks;t.tracks=[];for(var i=0;i<e.length;i++){var n=e[i];(n=Dn(n)).player=void 0,t.tracks[i]=n}return t},i.createModal=function(t,e){var i=this;(e=e||{}).content=t||"";var n=new Yn(this,e);return this.addChild(n),n.on("dispose",(function(){i.removeChild(n)})),n.open(),n},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),i=0;i<Ia.length;i++){var n=Ia[i];if(e<=this.breakpoints_[n]){if(t===n)return;t&&this.removeClass(Pa[t]),this.addClass(Pa[n]),this.breakpoint_=n;break}}},i.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},i.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=Be({},Aa,t),this.updateCurrentBreakpoint_()),Be(this.breakpoints_)},i.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return Pa[this.breakpoint_]||""},i.loadMedia=function(t,e){var i=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=Dn(t);var n=this.cache_.media,r=n.artwork,s=n.poster,a=n.src,o=n.textTracks;!r&&s&&(this.cache_.media.artwork=[{src:s,type:Fr(s)}]),a&&this.src(a),s&&this.poster(s),Array.isArray(o)&&o.forEach((function(t){return i.addRemoteTextTrack(t,!1)})),this.ready(e)}},i.getMedia=function(){if(!this.cache_.media){var t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}}))};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Fr(e.poster)}]),e}return Dn(this.cache_.media)},e.getTagSettings=function(t){var e={sources:[],tracks:[]},i=ki(t),n=i["data-setup"];if(_i(t,"vjs-fill")&&(i.fill=!0),_i(t,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=f()(n||"{}"),s=r[0],a=r[1];s&&Oe.error(s),Be(i,a)}if(Be(e,i),t.hasChildNodes())for(var o=t.childNodes,l=0,c=o.length;l<c;l++){var u=o[l],h=u.nodeName.toLowerCase();"source"===h?e.sources.push(ki(u)):"track"===h&&e.tracks.push(ki(u))}return e},i.flexNotSupported_=function(){var t=a().createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},i.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every((function(t){return"number"==typeof t}))&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},e}(Fn);kr.names.forEach((function(t){var e=kr[t];La.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}})),La.prototype.crossorigin=La.prototype.crossOrigin,La.players={};var Oa=r().navigator;La.prototype.options_={techOrder:Cr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Oa&&(Oa.languages&&Oa.languages[0]||Oa.userLanguage||Oa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(t){La.prototype[t]=function(){return this.techGet_(t)}})),Ca.forEach((function(t){La.prototype["handleTech"+On(t)+"_"]=function(){return this.trigger(t)}})),Fn.registerComponent("Player",La);var Da="plugin",Ma="activePlugins_",Ra={},Na=function(t){return Ra.hasOwnProperty(t)},Ba=function(t){return Na(t)?Ra[t]:void 0},Fa=function(t,e){t[Ma]=t[Ma]||{},t[Ma][e]=!0},$a=function(t,e,i){var n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)},Ua=function(t,e){return e.prototype.name=t,function(){$a(this,{name:t,plugin:e,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=b(e,[this].concat(n));return this[t]=function(){return s},$a(this,s.getEventHash()),s}},ja=function(){function t(e){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),In(this),delete this.trigger,An(this,this.constructor.defaultState),Fa(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},e.trigger=function(t,e){return void 0===e&&(e={}),cn(this.eventBusEl_,t,this.getEventHash(e))},e.handleStateChanged=function(t){},e.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Ma][t]=!1,this.player=this.state=null,e[t]=Ua(t,Ra[t])},t.isBasic=function(e){var i="string"==typeof e?Ba(e):e;return"function"==typeof i&&!t.prototype.isPrototypeOf(i.prototype)},t.registerPlugin=function(e,i){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Na(e))Oe.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(La.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof i+".");return Ra[e]=i,e!==Da&&(t.isBasic(i)?La.prototype[e]=function(t,e){var i=function(){$a(this,{name:t,plugin:e,instance:null},!0);var i=e.apply(this,arguments);return Fa(this,t),$a(this,{name:t,plugin:e,instance:i}),i};return Object.keys(e).forEach((function(t){i[t]=e[t]})),i}(e,i):La.prototype[e]=Ua(e,i)),i},t.deregisterPlugin=function(t){if(t===Da)throw new Error("Cannot de-register base plugin.");Na(t)&&(delete Ra[t],delete La.prototype[t])},t.getPlugins=function(t){var e;return void 0===t&&(t=Object.keys(Ra)),t.forEach((function(t){var i=Ba(t);i&&((e=e||{})[t]=i)})),e},t.getPluginVersion=function(t){var e=Ba(t);return e&&e.VERSION||""},t}();ja.getPlugin=Ba,ja.BASE_PLUGIN_NAME=Da,ja.registerPlugin(Da,ja),La.prototype.usingPlugin=function(t){return!!this[Ma]&&!0===this[Ma][t]},La.prototype.hasPlugin=function(t){return!!Na(t)};var Va=!1,Ha=function(t){return 0===t.indexOf("#")?t.slice(1):t};function qa(t,e,i){var n=qa.getPlayer(t);if(n)return e&&Oe.warn('Player "'+t+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var r="string"==typeof t?ji("#"+Ha(t)):t;if(!fi(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||Oe.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),xe("beforesetup").forEach((function(t){var i=t(r,Dn(e));Fe(i)&&!Array.isArray(i)?e=Dn(e,i):Oe.error("please return an object in beforesetup hooks")}));var s=Fn.getComponent("Player");return n=new s(r,e,i),xe("setup").forEach((function(t){return t(n)})),n}if(qa.hooks_=Se,qa.hooks=xe,qa.hook=function(t,e){xe(t,e)},qa.hookOnce=function(t,e){xe(t,[].concat(e).map((function(e){return function i(){return ke(t,i),e.apply(void 0,arguments)}})))},qa.removeHook=ke,!0!==r().VIDEOJS_NO_DYNAMIC_STYLE&&pi()){var Wa=ji(".vjs-styles-defaults");if(!Wa){Wa=Yi("vjs-styles-defaults");var za=ji("head");za&&za.insertBefore(Wa,za.firstChild),Xi(Wa,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}zi(1,qa),qa.VERSION=Te,qa.options=La.prototype.options_,qa.getPlayers=function(){return La.players},qa.getPlayer=function(t){var e,i=La.players;if("string"==typeof t){var n=Ha(t),r=i[n];if(r)return r;e=ji("#"+n)}else e=t;if(fi(e)){var s=e,a=s.player,o=s.playerId;if(a||i[o])return a||i[o]}},qa.getAllPlayers=function(){return Object.keys(La.players).map((function(t){return La.players[t]})).filter(Boolean)},qa.players=La.players,qa.getComponent=Fn.getComponent,qa.registerComponent=function(t,e){Cr.isTech(e)&&Oe.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Fn.registerComponent.call(Fn,t,e)},qa.getTech=Cr.getTech,qa.registerTech=Cr.registerTech,qa.use=function(t,e){Er[t]=Er[t]||[],Er[t].push(e)},Object.defineProperty(qa,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(qa.middleware,"TERMINATOR",{value:Pr,writeable:!1,enumerable:!0}),qa.browser=ui,qa.TOUCH_ENABLED=si,qa.extend=function(t,e){void 0===e&&(e={}),Va||(Oe.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Va=!0);var i=function(){t.apply(this,arguments)},n={};for(var r in"object"==typeof e?(e.constructor!==Object.prototype.constructor&&(i=e.constructor),n=e):"function"==typeof e&&(i=e),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(i,t),t&&(i.super_=t),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},qa.mergeOptions=Dn,qa.bind=mn,qa.registerPlugin=ja.registerPlugin,qa.deregisterPlugin=ja.deregisterPlugin,qa.plugin=function(t,e){return Oe.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ja.registerPlugin(t,e)},qa.getPlugins=ja.getPlugins,qa.getPlugin=ja.getPlugin,qa.getPluginVersion=ja.getPluginVersion,qa.addLanguage=function(t,e){var i;return t=(""+t).toLowerCase(),qa.options.languages=Dn(qa.options.languages,((i={})[t]=e,i)),qa.options.languages[t]},qa.log=Oe,qa.createLogger=De,qa.createTimeRange=qa.createTimeRanges=jn,qa.formatTime=is,qa.setFormatTime=function(t){es=t},qa.resetFormatTime=function(){es=ts},qa.parseUrl=ur,qa.isCrossOrigin=pr,qa.EventTarget=vn,qa.on=on,qa.one=un,qa.off=ln,qa.trigger=cn,qa.xhr=g(),qa.TextTrack=yr,qa.AudioTrack=vr,qa.VideoTrack=br,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(t){qa[t]=function(){return Oe.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Hi[t].apply(null,arguments)}})),qa.computedStyle=Ue,qa.dom=Hi,qa.url=fr,qa.defineLazyProperty=xa,qa.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ga=S,Ka=function(t,e,i){return t&&i&&i.responseURL&&e!==i.responseURL?i.responseURL:e},Ya=function(t){return qa.log.debug?qa.log.debug.bind(qa,"VHS:",t+" >"):function(){}},Xa=1/30,Qa=.1,Ja=function(t,e){var i,n=[];if(t&&t.length)for(i=0;i<t.length;i++)e(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return qa.createTimeRanges(n)},Za=function(t,e){return Ja(t,(function(t,i){return t-Qa<=e&&i+Qa>=e}))},to=function(t,e){return Ja(t,(function(t){return t-Xa>=e}))},eo=function(t){var e=[];if(!t||!t.length)return"";for(var i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},io=function(t){for(var e=[],i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},no=function(t){if(t&&t.length&&t.end)return t.end(t.length-1)},ro=function(t,e){var i=0;if(!t||!t.length)return i;for(var n=0;n<t.length;n++){var r=t.start(n),s=t.end(n);e>s||(i+=e>r&&e<=s?s-e:s-r)}return i},so=qa.createTimeRange,ao=function(t,e){if(!e.preload)return e.duration;var i=0;return(e.parts||[]).forEach((function(t){i+=t.duration})),(e.preloadHints||[]).forEach((function(e){"PART"===e.type&&(i+=t.partTargetDuration)})),i},oo=function(t){return(t.segments||[]).reduce((function(t,e,i){return e.parts?e.parts.forEach((function(n,r){t.push({duration:n.duration,segmentIndex:i,partIndex:r,part:n,segment:e})})):t.push({duration:e.duration,segmentIndex:i,partIndex:null,segment:e,part:null}),t}),[])},lo=function(t){var e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},co=function(t){var e=t.preloadSegment;if(e){var i=e.parts;return(e.preloadHints||[]).reduce((function(t,e){return t+("PART"===e.type?1:0)}),0)+(i&&i.length?i.length:0)}},uo=function(t,e){if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var i=lo(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},ho=function(t,e,i){if(void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;var n=function(t,e){var i=0,n=e-t.mediaSequence,r=t.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=t.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=ao(t,r),void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(t,e);if(n.precise)return n.result;var r=function(t,e){for(var i,n=0,r=e-t.mediaSequence;r<t.segments.length;r++){if(void 0!==(i=t.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=ao(t,i),void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e);return r.precise?r.result:n.result+i},po=function(t,e,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return r()[1/0]}return ho(t,e,i)},fo=function(t){var e=t.defaultDuration,i=t.durationList,n=t.startIndex,r=t.endIndex,s=0;if(n>r){var a=[r,n];n=a[0],r=a[1]}if(n<0){for(var o=n;o<Math.min(0,r);o++)s+=e;n=0}for(var l=n;l<r;l++)s+=i[l].duration;return s},mo=function(t,e,i,n){if(!t||!t.segments)return null;if(t.endList)return po(t);if(null===e)return null;e=e||0;var r=ho(t,t.mediaSequence+t.segments.length,e);return i&&(r-=n="number"==typeof n?n:uo(null,t)),Math.max(0,r)},go=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},yo=function(t){return t.excludeUntil&&t.excludeUntil===1/0},vo=function(t){var e=go(t);return!t.disabled&&!e},bo=function(t,e){return e.attributes&&e.attributes[t]},_o=function(t,e){if(1===t.playlists.length)return!0;var i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter((function(t){return!!vo(t)&&(t.attributes.BANDWIDTH||0)<i})).length},wo=function(t,e){return!(!t&&!e||!t&&e||t&&!e||t!==e&&(!t.id||!e.id||t.id!==e.id)&&(!t.resolvedUri||!e.resolvedUri||t.resolvedUri!==e.resolvedUri)&&(!t.uri||!e.uri||t.uri!==e.uri))},To=function(t,e){var i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},n=!1;for(var r in i){for(var s in i[r])if(n=e(i[r][s]))break;if(n)break}return!!n},So=function(t){if(!t||!t.playlists||!t.playlists.length)return To(t,(function(t){return t.playlists&&t.playlists.length||t.uri}));for(var e=function(e){var i=t.playlists[e],n=i.attributes&&i.attributes.CODECS;return n&&n.split(",").every((function(t){return q(t)}))||To(t,(function(t){return wo(i,t)}))?"continue":{v:!1}},i=0;i<t.playlists.length;i++){var n=e(i);if("continue"!==n&&"object"==typeof n)return n.v}return!0},xo={liveEdgeDelay:uo,duration:po,seekable:function(t,e,i){var n=e||0,r=mo(t,e,!0,i);return null===r?so():so(n,r)},getMediaInfoForTime:function(t){for(var e=t.playlist,i=t.currentTime,n=t.startingSegmentIndex,r=t.startingPartIndex,s=t.startTime,a=t.experimentalExactManifestTimings,o=i-s,l=oo(e),c=0,u=0;u<l.length;u++){var h=l[u];if(n===h.segmentIndex&&("number"!=typeof r||"number"!=typeof h.partIndex||r===h.partIndex)){c=u;break}}if(o<0){if(c>0)for(var d=c-1;d>=0;d--){var p=l[d];if(o+=p.duration,a){if(o<0)continue}else if(o+Xa<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:s-fo({defaultDuration:e.targetDuration,durationList:l,startIndex:c,endIndex:d})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i}}if(c<0){for(var f=c;f<0;f++)if((o-=e.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i};c=0}for(var m=c;m<l.length;m++){var g=l[m];if(o-=g.duration,a){if(o>0)continue}else if(o-Xa>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:s+fo({defaultDuration:e.targetDuration,durationList:l,startIndex:c,endIndex:m})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:i}},isEnabled:vo,isDisabled:function(t){return t.disabled},isBlacklisted:go,isIncompatible:yo,playlistEnd:mo,isAes:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hasAttribute:bo,estimateSegmentRequestTime:function(t,e,i,n){return void 0===n&&(n=0),bo("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-8*n)/e:NaN},isLowestEnabledRendition:_o,isAudioOnly:So,playlistMatch:wo,segmentDurationWithParts:ao},ko=qa.log,Co=function(t,e){return t+"-"+e},Eo=function(t,e,i){return"placeholder-uri-"+t+"-"+e+"-"+i},Io=function(t,e){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(i){if(t.mediaGroups[i])for(var n in t.mediaGroups[i])for(var r in t.mediaGroups[i][n]){var s=t.mediaGroups[i][n][r];e(s,i,n,r)}}))},Po=function(t){var e=t.playlist,i=t.uri,n=t.id;e.id=n,e.playlistErrors_=0,i&&(e.uri=i),e.attributes=e.attributes||{}},Ao=function(t,e,i){void 0===i&&(i=Eo),t.uri=e;for(var n=0;n<t.playlists.length;n++)if(!t.playlists[n].uri){var r="placeholder-uri-"+n;t.playlists[n].uri=r}var s=So(t);Io(t,(function(e,n,r,a){if(!e.playlists||!e.playlists.length){if(s&&"AUDIO"===n&&!e.uri)for(var l=0;l<t.playlists.length;l++){var c=t.playlists[l];if(c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===r)return}e.playlists=[(0,o.Z)({},e)]}e.playlists.forEach((function(e,s){var o=i(n,r,a,e),l=Co(s,o);e.uri?e.resolvedUri=e.resolvedUri||Ga(t.uri,e.uri):(e.uri=0===s?o:l,e.resolvedUri=e.uri),e.id=e.id||l,e.attributes=e.attributes||{},t.playlists[e.id]=e,t.playlists[e.uri]=e}))})),function(t){for(var e=t.playlists.length;e--;){var i=t.playlists[e];Po({playlist:i,id:Co(e,i.uri)}),i.resolvedUri=Ga(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||ko.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(t),function(t){Io(t,(function(e){e.uri&&(e.resolvedUri=Ga(t.uri,e.uri))}))}(t)},Lo=qa.mergeOptions,Oo=qa.EventTarget,Do=function(t,e){if(!t)return e;var i=Lo(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(var n=0;n<e.parts.length;n++)t.parts&&t.parts[n]&&(i.parts[n]=Lo(t.parts[n],e.parts[n]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},Mo=function(t,e){!t.resolvedUri&&t.uri&&(t.resolvedUri=Ga(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Ga(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Ga(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Ga(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach((function(t){t.resolvedUri||(t.resolvedUri=Ga(e,t.uri))})),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach((function(t){t.resolvedUri||(t.resolvedUri=Ga(e,t.uri))}))},Ro=function(t){var e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(var n=0;n<i.preloadHints.length;n++)if("MAP"===i.preloadHints[n].type)return e;i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},No=function(t,e){return t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment},Bo=function(t,e,i){void 0===i&&(i=No);var n=Lo(t,{}),r=n.playlists[e.id];if(!r)return null;if(i(r,e))return null;e.segments=Ro(e);var s=Lo(r,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(var a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=function(t,e,i){var n=t.slice(),r=e.slice();i=i||0;for(var s,a=[],o=0;o<r.length;o++){var l=n[o+i],c=r[o];l?(s=l.map||s,a.push(Do(l,c))):(s&&!c.map&&(c.map=s),a.push(c))}return a}(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}s.segments.forEach((function(t){Mo(t,s.resolvedUri)}));for(var o=0;o<n.playlists.length;o++)n.playlists[o].id===e.id&&(n.playlists[o]=s);return n.playlists[e.id]=s,n.playlists[e.uri]=s,Io(t,(function(t,i,n,r){if(t.playlists)for(var a=0;a<t.playlists.length;a++)e.id===t.playlists[a].id&&(t.playlists[a]=s)})),n},Fo=function(t,e){var i=t.segments||[],n=i[i.length-1],r=n&&n.parts&&n.parts[n.parts.length-1],s=r&&r.duration||n&&n.duration;return e&&s?1e3*s:500*(t.partTargetDuration||t.targetDuration||10)},$o=function(t){function e(e,i,n){var r;if(void 0===n&&(n={}),r=t.call(this)||this,!e)throw new Error("A non-empty playlist URL or object is required");r.logger_=Ya("PlaylistLoader");var s=n,a=s.withCredentials,o=void 0!==a&&a,l=s.handleManifestRedirects,c=void 0!==l&&l;r.src=e,r.vhs_=i,r.withCredentials=o,r.handleManifestRedirects=c;var h=i.options_;return r.customTagParsers=h&&h.customTagParsers||[],r.customTagMappers=h&&h.customTagMappers||[],r.experimentalLLHLS=h&&h.experimentalLLHLS||!1,qa.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(u(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}d(e,t);var i=e.prototype;return i.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var e=this.media(),i=Ga(this.master.uri,e.uri);this.experimentalLLHLS&&(i=function(t,e){if(e.endList||!e.serverControl)return t;var i={};if(e.serverControl.canBlockReload){var n=e.preloadSegment,s=e.mediaSequence+e.segments.length;if(n){var a=n.parts||[],o=co(e)-1;o>-1&&o!==a.length-1&&(i._HLS_part=o),(o>-1||a.length)&&s--}i._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var l=new(r().URL)(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(t){i.hasOwnProperty(t)&&l.searchParams.set(t,i[t])})),t=l.toString()}return t}(i,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials},(function(e,i){if(t.request)return e?t.playlistRequestError(t.request,t.media(),"HAVE_METADATA"):void t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}))}},i.playlistRequestError=function(t,e,i){var n=e.uri,r=e.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:t.status,message:"HLS playlist request error at URL: "+n+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(t){var e=this,i=t.url;return function(t){var e=t.onwarn,i=t.oninfo,n=t.manifestString,r=t.customTagParsers,s=void 0===r?[]:r,a=t.customTagMappers,o=void 0===a?[]:a,l=t.experimentalLLHLS,c=new F;e&&c.on("warn",e),i&&c.on("info",i),s.forEach((function(t){return c.addParser(t)})),o.forEach((function(t){return c.addTagMapper(t)})),c.push(n),c.end();var u=c.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(t){u.hasOwnProperty(t)&&delete u[t]})),u.segments&&u.segments.forEach((function(t){["parts","preloadHints"].forEach((function(e){t.hasOwnProperty(e)&&delete t[e]}))}))),!u.targetDuration){var h=10;u.segments&&u.segments.length&&(h=u.segments.reduce((function(t,e){return Math.max(t,e.duration)}),0)),e&&e("manifest has no targetDuration defaulting to "+h),u.targetDuration=h}var d=lo(u);if(d.length&&!u.partTargetDuration){var p=d.reduce((function(t,e){return Math.max(t,e.duration)}),0);e&&(e("manifest has no partTargetDuration defaulting to "+p),ko.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),u.partTargetDuration=p}return u}({onwarn:function(t){var n=t.message;return e.logger_("m3u8-parser warn for "+i+": "+n)},oninfo:function(t){var n=t.message;return e.logger_("m3u8-parser info for "+i+": "+n)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(t){var e=t.playlistString,i=t.playlistObject,n=t.url,r=t.id;this.request=null,this.state="HAVE_METADATA";var s=i||this.parseManifest_({url:n,manifestString:e});s.lastRequest=Date.now(),Po({playlist:s,uri:n,id:r});var a=Bo(this.master,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,a?(this.master=a,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Fo(this.media(),!!a)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),r().clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t,e){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(r().clearTimeout(this.finalRenditionTimeout),e){var n=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=r().setTimeout(this.media.bind(this,t,!1),n)}else{var s=this.state,a=!this.media_||t.id!==this.media_.id,o=this.master.playlists[t.id];if(o&&o.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===s?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Fo(t,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(function(e,n){if(i.request){if(t.lastRequest=Date.now(),t.resolvedUri=Ka(i.handleManifestRedirects,t.resolvedUri,n),e)return i.playlistRequestError(i.request,t,s);i.haveMetadata({playlistString:n.responseText,url:t.uri,id:t.id}),"HAVE_MASTER"===s?i.trigger("loadedmetadata"):i.trigger("mediachange")}}))}}},i.pause=function(){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(t){var e=this;this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var i=this.media();if(t){var n=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout((function(){e.mediaUpdateTimeout=null,e.load()}),n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.updateMediaUpdateTimeout_=function(t){var e=this;this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=r().setTimeout((function(){e.mediaUpdateTimeout=null,e.trigger("mediaupdatetimeout"),e.updateMediaUpdateTimeout_(t)}),t))},i.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=r().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){t.setupInitialPlaylist(t.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(e,i){if(t.request){if(t.request=null,e)return t.error={status:i.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Ka(t.handleManifestRedirects,t.src,i);var n=t.parseManifest_({manifestString:i.responseText,url:t.src});t.setupInitialPlaylist(n)}}))},i.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,Ao(this.master,this.srcUri()),t.playlists.forEach((function(t){t.segments=Ro(t),t.segments.forEach((function(e){Mo(e,t.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var e=this.srcUri()||r().location.href;this.master=function(t,e){var i=Co(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:r().location.href,resolvedUri:r().location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n}(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(Oo),Uo=qa.xhr,jo=qa.mergeOptions,Vo=function(t,e,i,n){var r="arraybuffer"===t.responseType?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&"ETIMEDOUT"===e.code&&(t.timedout=!0),e||t.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),n(e,t)},Ho=function(){var t=function t(e,i){e=jo({timeout:45e3},e);var n=t.beforeRequest||qa.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(e);r&&(e=r)}var s=(!0===qa.Vhs.xhr.original?Uo:qa.Vhs.xhr)(e,(function(t,e){return Vo(s,t,e,i)})),a=s.abort;return s.abort=function(){return s.aborted=!0,a.apply(s,arguments)},s.uri=e.uri,s.requestTime=Date.now(),s};return t.original=!0,t},qo=function(t){var e,i={};return t.byterange&&(i.Range="bytes="+(e=t.byterange).offset+"-"+("bigint"==typeof e.offset||"bigint"==typeof e.length?r().BigInt(e.offset)+r().BigInt(e.length)-r().BigInt(1):e.offset+e.length-1)),i},Wo=function(t,e){return t.start(e)+"-"+t.end(e)},zo=function(t,e){var i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},Go=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},Ko=function(t){var e={};return Object.keys(t).forEach((function(i){var n=t[i];J(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n})),e},Yo=function(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},Xo=function(t){return t.resolvedUri},Qo=function(t){for(var e=Array.prototype.slice.call(t),i=16,n="",r=0;r<e.length/i;r++)n+=e.slice(r*i,r*i+i).map(zo).join("")+" "+e.slice(r*i,r*i+i).map(Go).join("")+"\n";return n},Jo=Object.freeze({__proto__:null,createTransferableMessage:Ko,initSegmentId:Yo,segmentKeyId:Xo,hexDump:Qo,tagDump:function(t){var e=t.bytes;return Qo(e)},textRanges:function(t){var e,i="";for(e=0;e<t.length;e++)i+=Wo(t,e)+" ";return i}}),Zo=function t(e){var i=e.programTime,n=e.playlist,r=e.retryCount,s=void 0===r?2:r,a=e.seekTo,o=e.pauseAfterSeek,l=void 0===o||o,c=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!a)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!c.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0}(n))return u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=function(t,e){var i;try{i=new Date(t)}catch(t){return null}if(!e||!e.segments||0===e.segments.length)return null;var n=e.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<e.segments.length-1&&(n=e.segments[r],!(i<e.segments[r+1].dateTimeObject));r++);var s,a=e.segments[e.segments.length-1],o=a.dateTimeObject,l=a.videoTimingInfo?(s=a.videoTimingInfo).transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds:a.duration+.25*a.duration;return i>new Date(o.getTime()+1e3*l)?null:(i>o&&(n=a),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:xo.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(i,n);if(!h)return u({message:i+" was not found in the stream"});var d=h.segment,p=function(t,e){var i,n;try{i=new Date(t),n=new Date(e)}catch(t){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,i);if("estimate"===h.type)return 0===s?u({message:i+" is not buffered yet. Try again"}):(a(h.estimatedStart+p),void c.one("seeked",(function(){t({programTime:i,playlist:n,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:c,callback:u})})));var f=d.start+p;c.one("seeked",(function(){return u(null,c.currentTime())})),l&&c.pause(),a(f)},tl=function(t,e){if(4===t.readyState)return e()},el=qa.EventTarget,il=qa.mergeOptions,nl=function(t,e){if(!No(t,e))return!1;if(t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx)return!1;if(t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(var i=0;i<t.segments.length;i++){var n=t.segments[i],r=e.segments[i];if(n.uri!==r.uri)return!1;if(n.byterange||r.byterange){var s=n.byterange,a=r.byterange;if(s&&!a||!s&&a)return!1;if(s.offset!==a.offset||s.length!==a.length)return!1}}return!0},rl=function(t,e,i,n){return"placeholder-uri-"+t+"-"+e+"-"+(n.attributes.NAME||i)},sl=function(t,e){return(Boolean(!t.map&&!e.map)||Boolean(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length},al=function(t,e){var i={};for(var n in t){var r=t[n].sidx;if(r){var s=Tt(r);if(!e[s])break;var a=e[s].sidxInfo;sl(a,r)&&(i[s]=e[s])}}return i},ol=function(t){function e(e,i,n,r){var s;void 0===n&&(n={}),(s=t.call(this)||this).masterPlaylistLoader_=r||u(s),r||(s.isMaster_=!0);var a=n,o=a.withCredentials,l=void 0!==o&&o,c=a.handleManifestRedirects,h=void 0!==c&&c;if(s.vhs_=i,s.withCredentials=l,s.handleManifestRedirects=h,!e)throw new Error("A non-empty playlist URL or object is required");return s.on("minimumUpdatePeriod",(function(){s.refreshXml_()})),s.on("mediaupdatetimeout",(function(){s.refreshMedia_(s.media().id)})),s.state="HAVE_NOTHING",s.loadedPlaylists_={},s.logger_=Ya("DashPlaylistLoader"),s.isMaster_?(s.masterPlaylistLoader_.srcUrl=e,s.masterPlaylistLoader_.sidxMapping_={}):s.childPlaylist_=e,s}d(e,t);var i=e.prototype;return i.requestErrored_=function(t,e,i){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:e.status,message:"DASH request error at URL: "+e.uri,response:e.response,code:2}:t,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(t,e,i){var n=this,s=t.sidx&&Tt(t.sidx);if(t.sidx&&s&&!this.masterPlaylistLoader_.sidxMapping_[s]){var a=Ka(this.handleManifestRedirects,t.sidx.resolvedUri),o=function(r,a){if(!n.requestErrored_(r,a,e)){var o,l=n.masterPlaylistLoader_.sidxMapping_;try{o=Xt()(Z(a.response).subarray(8))}catch(t){return void n.requestErrored_(t,a,e)}return l[s]={sidxInfo:t.sidx,sidx:o},yt(t,o,t.sidx.resolvedUri),i(!0)}};this.request=function(t,e,i){var n,r=[],s=!1,a=function(t,e,n,r){return e.abort(),s=!0,i(t,e,n,r)},o=function(t,e){if(!s){if(t)return a(t,e,"",r);var i=e.responseText.substring(r&&r.byteLength||0,e.responseText.length);if(r=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e=e.filter((function(t){return t&&(t.byteLength||t.length)&&"string"!=typeof t})),e.length<=1)return Z(e[0]);var n=e.reduce((function(t,e,i){return t+(e.byteLength||e.length)}),0),r=new Uint8Array(n),s=0;return e.forEach((function(t){t=Z(t),r.set(t,s),s+=t.byteLength})),r}(r,nt(i,!0)),n=n||Jt(r),r.length<10||n&&r.length<n+2)return tl(e,(function(){return a(t,e,"",r)}));var o=ye(r);return"ts"===o&&r.length<188||!o&&r.length<376?tl(e,(function(){return a(t,e,"",r)})):a(null,e,o,r)}},l={uri:t,beforeSend:function(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",(function(e){return e.total,e.loaded,Vo(t,null,{statusCode:t.status},o)}))}},c=e(l,(function(t,e){return Vo(c,t,e,o)}));return c}(a,this.vhs_.xhr,(function(e,i,r,s){if(e)return o(e,i);if(!r||"mp4"!==r)return o({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},i);var l=t.sidx.byterange,c=l.offset,u=l.length;if(s.length>=u+c)return o(e,{response:s.subarray(c,c+u),status:i.status,uri:i.uri});n.request=n.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:qo({byterange:t.sidx.byterange})},o)}))}else this.mediaRequest_=r().setTimeout((function(){return i(!1)}),0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},r().clearTimeout(this.minimumUpdatePeriodTimeout_),r().clearTimeout(this.mediaRequest_),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t){var e=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var n=!this.media_||t.id!==this.media_.id;if(n&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,i,(function(n){e.haveMetadata({startingState:i,playlist:t})})))},i.haveMetadata=function(t){var e=t.startingState,i=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(r().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(t){var e=this;r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var i=this.media();if(t){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout((function(){return e.load()}),n)}else this.started?i&&!i.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},i.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_((function(e,i){t.haveMaster_(),t.hasPendingRequest()||t.media_||t.media(t.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=r().setTimeout((function(){return t.haveMaster_()}),0)},i.requestMaster_=function(t){var e=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(i,n){if(!e.requestErrored_(i,n)){var r=n.responseText!==e.masterPlaylistLoader_.masterXml_;return e.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?e.masterLoaded_=Date.parse(n.responseHeaders.date):e.masterLoaded_=Date.now(),e.masterPlaylistLoader_.srcUrl=Ka(e.handleManifestRedirects,e.masterPlaylistLoader_.srcUrl,n),r?(e.handleMaster_(),void e.syncClientServerClock_((function(){return t(n,r)}))):t(n,r)}"HAVE_NOTHING"===e.state&&(e.started=!1)}))},i.syncClientServerClock_=function(t){var e,i=this,n=(e=this.masterPlaylistLoader_.masterXml_,function(t){var e=$t(t,"UTCTiming")[0];if(!e)return null;var i=Ht(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(Kt(e)));return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:Ga(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(e,r){if(i.request){if(e)return i.masterPlaylistLoader_.clientOffset_=i.masterLoaded_-Date.now(),t();var s;s="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):i.masterLoaded_:Date.parse(r.responseText),i.masterPlaylistLoader_.clientOffset_=s-Date.now(),t()}})))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var t,e,i,n=this.masterPlaylistLoader_.master,r=(i=function(t,e){void 0===e&&(e={});var i=function(t,e){void 0===e&&(e={});var i=e,n=i.manifestUri,r=void 0===n?"":n,s=i.NOW,a=void 0===s?Date.now():s,o=i.clientOffset,l=void 0===o?0:o,c=$t(t,"Period");if(!c.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var u=$t(t,"Location"),h=Ht(t),d=Wt([r],$t(t,"BaseURL"));h.type=h.type||"static",h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=a,h.clientOffset=l,u.length&&(h.locations=u.map(Ut));var p=[];return c.forEach((function(t,e){var i=Ht(t),n=p[e-1];i.start=function(t){var e=t.attributes,i=t.priorPeriodAttributes,n=t.mpdType;return"number"==typeof e.start?e.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==n?null:0}({attributes:i,priorPeriodAttributes:n?n.attributes:null,mpdType:h.type}),p.push({node:t,attributes:i})})),{locations:h.locations,representationInfo:ct(p.map(Gt(h,d)))}}(Kt(t),e),n=i.representationInfo.map(Ft);return Lt({dashPlaylists:n,locations:i.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest})}((t={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:n}).masterXml,{manifestUri:e=t.srcUrl,clientOffset:t.clientOffset,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest}),Ao(i,e,rl),i);n&&(r=function(t,e,i){for(var n=!0,r=il(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts}),s=0;s<e.playlists.length;s++){var a=e.playlists[s];if(a.sidx){var o=Tt(a.sidx);i&&i[o]&&i[o].sidx&&yt(a,i[o].sidx,a.sidx.resolvedUri)}var l=Bo(r,a,nl);l&&(r=l,n=!1)}return Io(e,(function(t,e,i,s){if(t.playlists&&t.playlists.length){var a=t.playlists[0].id,o=Bo(r,t.playlists[0],nl);o&&(s in(r=o).mediaGroups[e][i]||(r.mediaGroups[e][i][s]=t),r.mediaGroups[e][i][s].playlists[0]=r.playlists[a],n=!1)}})),function(t,e){Io(t,(function(i,n,r,s){s in e.mediaGroups[n][r]||delete t.mediaGroups[n][r][s]}))}(r,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(n=!1),n?null:r}(n,r,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=r||n;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!n||r&&r.minimumUpdatePeriod!==n.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(r)},i.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(r().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var e=t.master&&t.master.minimumUpdatePeriod;0===e&&(t.media()?e=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof e||e<=0?e<0&&this.logger_("found invalid minimumUpdatePeriod of "+e+", not setting a timeout"):this.createMUPTimeout_(e)},i.createMUPTimeout_=function(t){var e=this.masterPlaylistLoader_;e.minimumUpdatePeriodTimeout_=r().setTimeout((function(){e.minimumUpdatePeriodTimeout_=null,e.trigger("minimumUpdatePeriod"),e.createMUPTimeout_(t)}),t)},i.refreshXml_=function(){var t=this;this.requestMaster_((function(e,i){var n,r,s;i&&(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=(n=t.masterPlaylistLoader_.master,r=t.masterPlaylistLoader_.sidxMapping_,s=al(n.playlists,r),Io(n,(function(t,e,i,n){if(t.playlists&&t.playlists.length){var a=t.playlists;s=il(s,al(a,r))}})),s),t.addSidxSegments_(t.media(),t.state,(function(e){t.refreshMedia_(t.media().id)})))}))},i.refreshMedia_=function(t){var e=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[t];n?this.media_=i[t]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function t(){e.media().endList||(e.mediaUpdateTimeout=r().setTimeout((function(){e.trigger("mediaupdatetimeout"),t()}),Fo(e.media(),Boolean(n))))}(),this.trigger("loadedplaylist")},e}(el),ll={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},cl=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},ul=function(t){return function(){var e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch(i){var e=new BlobBuilder;return e.append(t),URL.createObjectURL(e.getBlob())}}(t),i=cl(new Worker(e));i.objURL=e;var n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},i}},hl=function(t){return"var browserWorkerPolyFill = "+cl.toString()+";\nbrowserWorkerPolyFill(self);\n"+t},dl=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},pl=hl(dl((function(){var t=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),n>-1)},this.trigger=function(e){var i,n,r,s;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(s=[],n=arguments.length,n=1;n<arguments.length;++n)s.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,s)}},this.dispose=function(){t={}}}};t.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),this.on("partialdone",(function(e){t.partialFlush(e)})),this.on("endedtimeline",(function(e){t.endTimeline(e)})),this.on("reset",(function(e){t.reset(e)})),t},t.prototype.push=function(t){this.trigger("data",t)},t.prototype.flush=function(t){this.trigger("done",t)},t.prototype.partialFlush=function(t){this.trigger("partialdone",t)},t.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},t.prototype.reset=function(t){this.trigger("reset",t)};var e,n,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,b,_,w,T,S,x,k,C,E,I,P,A,L,O,D,M,R,N,B,F,$,U,j,V=t,H=Math.pow(2,32),q={getUint64:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getBigUint64?(e=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:i.getUint32(0)*H+i.getUint32(4)},MAX_UINT32:H},W=q.MAX_UINT32;!function(){var t;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in S)S.hasOwnProperty(t)&&(S[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);x=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:E,audio:I},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=D,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=D,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(t){var e,i,n=[],r=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)r+=n[e].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,r=8;e<n.length;e++)i.set(n[e],r),r+=n[e].byteLength;return i},n=function(){return e(S.dinf,e(S.dref,O))},r=function(t){return e(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},g=function(t){return e(S.hdlr,P[t])},m=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(i[12]=t.samplerate>>>24&255,i[13]=t.samplerate>>>16&255,i[14]=t.samplerate>>>8&255,i[15]=255&t.samplerate),e(S.mdhd,i)},f=function(t){return e(S.mdia,m(t),g(t.type),o(t))},a=function(t){return e(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},o=function(t){return e(S.minf,"video"===t.type?e(S.vmhd,A):e(S.smhd,L),n(),v(t))},l=function(t,i){for(var n=[],r=i.length;r--;)n[r]=_(i[r]);return e.apply(null,[S.moof,a(t)].concat(n))},c=function(t){for(var i=t.length,n=[];i--;)n[i]=d(t[i]);return e.apply(null,[S.moov,h(4294967295)].concat(n).concat(u(t)))},u=function(t){for(var i=t.length,n=[];i--;)n[i]=w(t[i]);return e.apply(null,[S.mvex].concat(n))},h=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(S.mvhd,i)},y=function(t){var i,n,r=t.samples||[],s=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,s[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e(S.sdtp,s)},v=function(t){return e(S.stbl,b(t),e(S.stts,N),e(S.stsc,M),e(S.stsz,R),e(S.stco,D))},b=function(t){return e(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?B(t):F(t))},B=function(t){var i,n,r=t.sps||[],s=t.pps||[],a=[],o=[];for(i=0;i<r.length;i++)a.push((65280&r[i].byteLength)>>>8),a.push(255&r[i].byteLength),a=a.concat(Array.prototype.slice.call(r[i]));for(i=0;i<s.length;i++)o.push((65280&s[i].byteLength)>>>8),o.push(255&s[i].byteLength),o=o.concat(Array.prototype.slice.call(s[i]));if(n=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(S.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length],a,[s.length],o))),e(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var l=t.sarRatio[0],c=t.sarRatio[1];n.push(e(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return e.apply(null,n)},F=function(t){return e(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),r(t))},p=function(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return e(S.tkhd,i)},_=function(t){var i,n,r,s,a,o;return i=e(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/W),o=Math.floor(t.baseMediaDecodeTime%W),n=e(S.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===t.type?(r=T(t,92),e(S.traf,i,n,r)):(s=y(t),r=T(t,s.length+92),e(S.traf,i,n,r,s))},d=function(t){return t.duration=t.duration||4294967295,e(S.trak,p(t),f(t))},w=function(t){var i=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(i[i.length-1]=0),e(S.trex,i)},j=function(t,e){var i=0,n=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,i|n|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},U=function(t,i){var n,r,s,a,o,l;for(i+=20+16*(a=t.samples||[]).length,s=j(a,i),(r=new Uint8Array(s.length+16*a.length)).set(s),n=s.length,l=0;l<a.length;l++)o=a[l],r[n++]=(4278190080&o.duration)>>>24,r[n++]=(16711680&o.duration)>>>16,r[n++]=(65280&o.duration)>>>8,r[n++]=255&o.duration,r[n++]=(4278190080&o.size)>>>24,r[n++]=(16711680&o.size)>>>16,r[n++]=(65280&o.size)>>>8,r[n++]=255&o.size,r[n++]=o.flags.isLeading<<2|o.flags.dependsOn,r[n++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,r[n++]=61440&o.flags.degradationPriority,r[n++]=15&o.flags.degradationPriority,r[n++]=(4278190080&o.compositionTimeOffset)>>>24,r[n++]=(16711680&o.compositionTimeOffset)>>>16,r[n++]=(65280&o.compositionTimeOffset)>>>8,r[n++]=255&o.compositionTimeOffset;return e(S.trun,r)},$=function(t,i){var n,r,s,a,o,l;for(i+=20+8*(a=t.samples||[]).length,s=j(a,i),(n=new Uint8Array(s.length+8*a.length)).set(s),r=s.length,l=0;l<a.length;l++)o=a[l],n[r++]=(4278190080&o.duration)>>>24,n[r++]=(16711680&o.duration)>>>16,n[r++]=(65280&o.duration)>>>8,n[r++]=255&o.duration,n[r++]=(4278190080&o.size)>>>24,n[r++]=(16711680&o.size)>>>16,n[r++]=(65280&o.size)>>>8,n[r++]=255&o.size;return e(S.trun,n)},T=function(t,e){return"audio"===t.type?$(t,e):U(t,e)},s=function(){return e(S.ftyp,x,k,x,C)};var z,G,K,Y,X,Q,J,Z,tt=function(t){return e(S.mdat,t)},et=l,it=function(t,e){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},nt=[33,16,5,32,164,27],rt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],st=function(t){for(var e=[];t--;)e.push(0);return e},at=9e4;Q=function(t,e){return G(X(t,e))},J=function(t,e){return K(Y(t),e)},Z=function(t,e,i){return Y(i?t:t-e)};var ot=at,lt=G=function(t){return t*at},ct=(K=function(t,e){return t*e},Y=function(t){return t/at}),ut=(X=function(t,e){return t/e},Q),ht=J,dt=Z,pt=function(t,e,i,n){var r,s,a,o,l,c=0,u=0,h=0;if(e.length&&(r=ut(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(ot/(t.samplerate/1024)),i&&n&&(c=r-Math.max(i,n),h=(u=Math.floor(c/s))*s),!(u<1||h>45e3))){for((a=function(){if(!z){var t={96e3:[nt,[227,64],st(154),[56]],88200:[nt,[231],st(170),[56]],64e3:[nt,[248,192],st(240),[56]],48e3:[nt,[255,192],st(268),[55,148,128],st(54),[112]],44100:[nt,[255,192],st(268),[55,163,128],st(84),[112]],32e3:[nt,[255,192],st(268),[55,234],st(226),[112]],24e3:[nt,[255,192],st(268),[55,255,128],st(268),[111,112],st(126),[224]],16e3:[nt,[255,192],st(268),[55,255,128],st(268),[111,255],st(269),[223,108],st(195),[1,192]],12e3:[rt,st(268),[3,127,248],st(268),[6,255,240],st(268),[13,255,224],st(268),[27,253,128],st(259),[56]],11025:[rt,st(268),[3,127,248],st(268),[6,255,240],st(268),[13,255,224],st(268),[27,255,192],st(268),[55,175,128],st(108),[112]],8e3:[rt,st(268),[3,121,16],st(47),[7]]};e=t,z=Object.keys(e).reduce((function(t,i){return t[i]=new Uint8Array(e[i].reduce((function(t,e){return t.concat(e)}),[])),t}),{})}var e;return z}()[t.samplerate])||(a=e[0].data),o=0;o<u;o++)l=e[0],e.splice(0,0,{data:a,dts:l.dts-s,pts:l.pts-s});return t.baseMediaDecodeTime-=Math.floor(ht(h,t.samplerate)),h}},ft=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},mt=function(t,e){var i,n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/9e4,i=Math.floor(i)),i},gt=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},yt=function t(e){e=e||{},t.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Et(0,0),new Et(0,1),new Et(1,0),new Et(1,1)],this.parse708captions_&&(this.cc708Stream_=new Tt({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(yt.prototype=new V).push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&4===n){if("GA94"===String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6])){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}i.payload=void 0}e+=r,n=0,r=0}return i}(t.escapedRBSP)).payload&&4===e.payloadType&&(i=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)}(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(t,e){var i,n,r,s,a=[];if(!(64&e[0]))return a;for(n=31&e[0],i=0;i<n;i++)s={type:3&e[2+(r=3*i)],pts:t},4&e[r+2]&&(s.ccData=e[r+3]<<8|e[r+4],a.push(s));return a}(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},yt.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(e){return"flush"===t?e.flush():e.partialFlush()}),this)},yt.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,e){t.presortIndex=e})),this.captionPackets_.sort((function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},yt.prototype.flush=function(){return this.flushStream("flush")},yt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},yt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},yt.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},yt.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},yt.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},yt.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},yt.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var vt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},bt=function(t){return 32<=t&&t<=127||160<=t&&t<=255},_t=function(t){this.windowNum=t,this.reset()};_t.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_t.prototype.getText=function(){return this.rows.join("\n")},_t.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},_t.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},_t.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},_t.prototype.addText=function(t){this.rows[this.rowIdx]+=t},_t.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var wt=function(t,e,i){this.serviceNum=t,this.text="",this.currentWindow=new _t(-1),this.windows=[],this.stream=i,"string"==typeof e&&this.createTextDecoder(e)};wt.prototype.init=function(t,e){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new _t(i),"function"==typeof e&&(this.windows[i].beforeRowOverflow=e)},wt.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]},wt.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(e){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+e})}};var Tt=function t(e){e=e||{},t.prototype.init.call(this);var i,n=this,r=e.captionServices||{},s={};Object.keys(r).forEach((function(t){i=r[t],/^SERVICE/.test(t)&&(s[t]=i.encoding)})),this.serviceEncodings=s,this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(n.new708Packet(),n.add708Bytes(t)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(t))}};Tt.prototype=new V,Tt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Tt.prototype.add708Bytes=function(t){var e=t.ccData,i=e>>>8,n=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Tt.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,i=null,n=null,r=0,s=e[r++];for(t.seq=s>>6,t.sizeCode=63&s;r<e.length;r++)n=31&(s=e[r++]),7==(i=s>>5)&&n>0&&(i=s=e[r++]),this.pushServiceBlock(i,r,n),n>0&&(r+=n-1)},Tt.prototype.pushServiceBlock=function(t,e,i){var n,r=e,s=this.current708Packet.data,a=this.services[t];for(a||(a=this.initService(t,r));r<e+i&&r<s.length;r++)n=s[r],bt(n)?r=this.handleText(r,a):24===n?r=this.multiByteCharacter(r,a):16===n?r=this.extendedCommands(r,a):128<=n&&n<=135?r=this.setCurrentWindow(r,a):152<=n&&n<=159?r=this.defineWindow(r,a):136===n?r=this.clearWindows(r,a):140===n?r=this.deleteWindows(r,a):137===n?r=this.displayWindows(r,a):138===n?r=this.hideWindows(r,a):139===n?r=this.toggleWindows(r,a):151===n?r=this.setWindowAttributes(r,a):144===n?r=this.setPenAttributes(r,a):145===n?r=this.setPenColor(r,a):146===n?r=this.setPenLocation(r,a):143===n?a=this.reset(r,a):8===n?a.currentWindow.backspace():12===n?a.currentWindow.clearText():13===n?a.currentWindow.pendingNewLine=!0:14===n?a.currentWindow.clearText():141===n&&r++},Tt.prototype.extendedCommands=function(t,e){var i=this.current708Packet.data[++t];return bt(i)&&(t=this.handleText(t,e,{isExtended:!0})),t},Tt.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},Tt.prototype.initService=function(t,e){var i,n,r=this;return(i="SERVICE"+t)in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[t]=new wt(t,n,r),this.services[t].init(this.getPts(e),(function(e){r.flushDisplayed(e,r.services[t])})),this.services[t]},Tt.prototype.handleText=function(t,e,i){var n,r,s,a,o=i&&i.isExtended,l=i&&i.isMultiByte,c=this.current708Packet.data,u=o?4096:0,h=c[t],d=c[t+1],p=e.currentWindow;return e.textDecoder_&&!o?(l?(r=[h,d],t++):r=[h],n=e.textDecoder_.decode(new Uint8Array(r))):(a=vt[s=u|h]||s,n=4096&s&&s===a?"":String.fromCharCode(a)),p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(t)),p.pendingNewLine=!1,p.addText(n),t},Tt.prototype.multiByteCharacter=function(t,e){var i=this.current708Packet.data,n=i[t+1],r=i[t+2];return bt(n)&&bt(r)&&(t=this.handleText(++t,e,{isMultiByte:!0})),t},Tt.prototype.setCurrentWindow=function(t,e){var i=7&this.current708Packet.data[t];return e.setCurrentWindow(i),t},Tt.prototype.defineWindow=function(t,e){var i=this.current708Packet.data,n=i[t],r=7&n;e.setCurrentWindow(r);var s=e.currentWindow;return n=i[++t],s.visible=(32&n)>>5,s.rowLock=(16&n)>>4,s.columnLock=(8&n)>>3,s.priority=7&n,n=i[++t],s.relativePositioning=(128&n)>>7,s.anchorVertical=127&n,n=i[++t],s.anchorHorizontal=n,n=i[++t],s.anchorPoint=(240&n)>>4,s.rowCount=15&n,n=i[++t],s.columnCount=63&n,n=i[++t],s.windowStyle=(56&n)>>3,s.penStyle=7&n,s.virtualRowCount=s.rowCount+1,t},Tt.prototype.setWindowAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.winAttr;return n=i[++t],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++t],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++t],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++t],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,t},Tt.prototype.flushDisplayed=function(t,e){for(var i=[],n=0;n<8;n++)e.windows[n].visible&&!e.windows[n].isEmpty()&&i.push(e.windows[n].getText());e.endPts=t,e.text=i.join("\n\n"),this.pushCaption(e),e.startPts=t},Tt.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},Tt.prototype.displayWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=1);return t},Tt.prototype.hideWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=0);return t},Tt.prototype.toggleWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible^=1);return t},Tt.prototype.clearWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].clearText();return t},Tt.prototype.deleteWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].reset();return t},Tt.prototype.setPenAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penAttr;return n=i[++t],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++t],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,t},Tt.prototype.setPenColor=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penColor;return n=i[++t],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++t],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++t],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,t},Tt.prototype.setPenLocation=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,n=i[++t],r.row=15&n,n=i[++t],r.column=63&n,t},Tt.prototype.reset=function(t,e){var i=this.getPts(t);return this.flushDisplayed(i,e),this.initService(e.serviceNum,t)};var St={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},xt=function(t){return null===t?"":(t=St[t]||t,String.fromCharCode(t))},kt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ct=function(){for(var t=[],e=15;e--;)t.push("");return t},Et=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,s;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=Ct();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ct();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=Ct()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))s=xt((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=xt((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var a=kt.indexOf(7968&e);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(t.pts,a)),a!==this.row_&&(this.clearFormatting(t.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),s=xt(n),s+=xt(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Et.prototype=new V,Et.prototype.flushDisplayed=function(t){var e=this.displayed_.map((function(t,e){try{return t.trim()}catch(t){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},Et.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ct(),this.nonDisplayed_=Ct(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Et.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Et.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},Et.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},Et.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},Et.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},Et.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},Et.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},Et.prototype.isNormalChar=function(t){return t>=32&&t<=127},Et.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=Ct(),this.displayed_=Ct()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Et.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce((function(t,e){return t+"<"+e+">"}),"");this[this.mode_](t,i)},Et.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce((function(t,e){return t+"</"+e+">"}),"");this.formatting_=[],this[this.mode_](t,e)}},Et.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},Et.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},Et.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Et.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var It={CaptionStream:yt,Cea608Stream:Et,Cea708Stream:Tt},Pt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},At="shared",Lt=function(t,e){var i=1;for(t>e&&(i=-1);Math.abs(e-t)>4294967296;)t+=8589934592*i;return t},Ot=function t(e){var i,n;t.prototype.init.call(this),this.type_=e||At,this.push=function(t){this.type_!==At&&t.type!==this.type_||(void 0===n&&(n=t.dts),t.dts=Lt(t.dts,n),t.pts=Lt(t.pts,n),i=t.dts,this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ot.prototype=new V;var Dt,Mt=Ot,Rt=Lt,Nt=function(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r},Bt=function(t,e,i){return decodeURIComponent(Nt(t,e,i))},Ft=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},$t={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Bt(t.data,1,e),t.value=Bt(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Bt(t.data,1,e),t.url=Bt(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,i;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(i=t.data,unescape(Nt(i,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};Dt=function(t){var e,i={descriptor:t&&t.descriptor},n=0,r=[],s=0;if(Dt.prototype.init.call(this),this.dispatchType=Pt.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(e=0;e<i.descriptor.length;e++)this.dispatchType+=("00"+i.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,a,o,l;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(t),s+=t.data.byteLength,1===r.length&&(n=Ft(t.data.subarray(6,10)),n+=10),!(s<n)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<n;)e.data.set(r[0].data.subarray(0,n-l),l),l+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();i=10,64&e.data[5]&&(i+=4,i+=Ft(e.data.subarray(10,14)),n-=Ft(e.data.subarray(16,20)));do{if((a=Ft(e.data.subarray(i+4,i+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((o={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+a+10)}).key=o.id,$t[o.id]&&($t[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var c=o.data,u=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;u*=4,u+=3&c[7],o.timeStamp=u,void 0===e.pts&&void 0===e.dts&&(e.pts=o.timeStamp,e.dts=o.timeStamp),this.trigger("timestamp",o)}e.frames.push(o),i+=10,i+=a}while(i<n);this.trigger("data",e)}}},Dt.prototype=new V;var Ut,jt,Vt,Ht=Dt,qt=Mt,Wt=188;(Ut=function(){var t=new Uint8Array(Wt),e=0;Ut.prototype.init.call(this),this.push=function(i){var n,r=0,s=Wt;for(e?((n=new Uint8Array(i.byteLength+e)).set(t.subarray(0,e)),n.set(i,e),e=0):n=i;s<n.byteLength;)71!==n[r]||71!==n[s]?(r++,s++):(this.trigger("data",n.subarray(r,s)),r+=Wt,s+=Wt);r<n.byteLength&&(t.set(n.subarray(r),0),e=n.byteLength-r)},this.flush=function(){e===Wt&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new V,jt=function(){var t,e,i,n;jt.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,n){var r=0;n.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===n.type?e(t.subarray(r),n):i(t.subarray(r),n)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},i=function(t,e){var i,r;if(1&t[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<i;){var s=t[r],a=(31&t[r+1])<<8|t[r+2];s===Pt.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=a:s===Pt.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=a:s===Pt.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][a]=s),r+=5+((15&t[r+3])<<8|t[r+4])}e.programMapTable=n.programMapTable}},this.push=function(e){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&e[1]),i.pid=31&e[1],i.pid<<=8,i.pid|=e[2],(48&e[3])>>>4>1&&(n+=e[n]+1),0===i.pid)i.type="pat",t(e.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(e.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,i]):this.processPes_(e,n,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=Pt.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Pt.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}},jt.prototype=new V,jt.STREAM_TYPES={h264:27,adts:15},Vt=function(){var t,e=this,i=!1,n={data:[],size:0},r={data:[],size:0},s={data:[],size:0},a=function(t,i,n){var r,s,a=new Uint8Array(t.size),o={type:i},l=0,c=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,l=0;l<t.data.length;l++)s=t.data[l],a.set(s.data,c),c+=s.data.byteLength;var u,h,d,p;h=o,p=(u=a)[0]<<16|u[1]<<8|u[2],h.data=new Uint8Array,1===p&&(h.packetLength=6+(u[4]<<8|u[5]),h.dataAlignmentIndicator=0!=(4&u[6]),192&(d=u[7])&&(h.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,h.pts*=4,h.pts+=(6&u[13])>>>1,h.dts=h.pts,64&d&&(h.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,h.dts*=4,h.dts+=(6&u[18])>>>1)),h.data=u.subarray(9+u[8])),r="video"===i||o.packetLength<=t.size,(n||r)&&(t.size=0,t.data.length=0),r&&e.trigger("data",o)}};Vt.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var t,e;switch(o.streamType){case Pt.H264_STREAM_TYPE:t=n,e="video";break;case Pt.ADTS_STREAM_TYPE:t=r,e="audio";break;case Pt.METADATA_STREAM_TYPE:t=s,e="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&a(t,e,!0),t.data.push(o),t.size+=o.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(t=o.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,e.trigger("data",n)}})[o.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(n,"video"),a(r,"audio"),a(s,"timed-metadata")},this.flush=function(){if(!i&&t){var n={type:"metadata",tracks:[]};null!==t.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),e.trigger("data",n)}i=!1,this.flushStreams_(),this.trigger("done")}},Vt.prototype=new V;var zt={PAT_PID:0,MP2T_PACKET_LENGTH:Wt,TransportPacketStream:Ut,TransportParseStream:jt,ElementaryStream:Vt,TimestampRolloverStream:qt,CaptionStream:It.CaptionStream,Cea608Stream:It.Cea608Stream,Cea708Stream:It.Cea708Stream,MetadataStream:Ht};for(var Gt in Pt)Pt.hasOwnProperty(Gt)&&(zt[Gt]=Pt[Gt]);var Kt,Yt=zt,Xt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Kt=function(t){var e,i=0;Kt.prototype.init.call(this),this.skipWarn_=function(t,e){this.trigger("log",{level:"warn",message:"adts skiping bytes "+t+" to "+e+" in frame "+i+" outside syncword"})},this.push=function(n){var r,s,a,o,l,c=0;if(t||(i=0),"audio"===n.type){var u;for(e&&e.length?(a=e,(e=new Uint8Array(a.byteLength+n.data.byteLength)).set(a),e.set(n.data,a.byteLength)):e=n.data;c+7<e.length;)if(255===e[c]&&240==(246&e[c+1])){if("number"==typeof u&&(this.skipWarn_(u,c),u=null),s=2*(1&~e[c+1]),r=(3&e[c+3])<<11|e[c+4]<<3|(224&e[c+5])>>5,l=9e4*(o=1024*(1+(3&e[c+6])))/Xt[(60&e[c+2])>>>2],e.byteLength-c<r)break;this.trigger("data",{pts:n.pts+i*l,dts:n.dts+i*l,sampleCount:o,audioobjecttype:1+(e[c+2]>>>6&3),channelcount:(1&e[c+2])<<2|(192&e[c+3])>>>6,samplerate:Xt[(60&e[c+2])>>>2],samplingfrequencyindex:(60&e[c+2])>>>2,samplesize:16,data:e.subarray(c+7+s,c+r)}),i++,c+=r}else"number"!=typeof u&&(u=c),c++;"number"==typeof u&&(this.skipWarn_(u,c),u=null),e=e.subarray(c)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}},Kt.prototype=new V;var Qt,Jt,Zt,te=Kt,ee=function(t){var e=t.byteLength,i=0,n=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+n},this.loadWord=function(){var r=t.byteLength-e,s=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");s.set(t.subarray(r,r+a)),i=new DataView(s.buffer).getUint32(0),n=8*a,e-=a},this.skipBits=function(t){var r;n>t?(i<<=t,n-=t):(t-=n,t-=8*(r=Math.floor(t/8)),e-=r,this.loadWord(),i<<=t,n-=t)},this.readBits=function(t){var r=Math.min(n,t),s=i>>>32-r;return(n-=r)>0?i<<=r:e>0&&this.loadWord(),(r=t-r)>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var t;for(t=0;t<n;++t)if(0!=(i&2147483648>>>t))return i<<=t,n-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};Jt=function(){var t,e,i=0;Jt.prototype.init.call(this),this.push=function(n){var r;e?((r=new Uint8Array(e.byteLength+n.data.byteLength)).set(e),r.set(n.data,e.byteLength),e=r):e=n.data;for(var s=e.byteLength;i<s-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<s;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}i+3!==t-2&&this.trigger("data",e.subarray(i+3,t-2));do{t++}while(1!==e[t]&&t<s);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.reset=function(){e=null,i=0,this.trigger("reset")},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Jt.prototype=new V,Zt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Qt=function(){var t,e,i,n,r,s,a,o=new Jt;Qt.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,i=t.pts,n=t.dts,o.push(t))},o.on("data",(function(a){var o={trackId:e,pts:i,dts:n,data:a,nalUnitTypeCode:31&a[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(a.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(a.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",o)})),o.on("done",(function(){t.trigger("done")})),o.on("partialdone",(function(){t.trigger("partialdone")})),o.on("reset",(function(){t.trigger("reset")})),o.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},a=function(t,e){var i,n=8,r=8;for(i=0;i<t;i++)0!==r&&(r=(n+e.readExpGolomb()+256)%256),n=0===r?n:r},r=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},s=function(t){var e,i,n,r,s,o,l,c,u,h,d,p,f=0,m=0,g=0,y=0,v=[1,1];if(i=(e=new ee(t)).readUnsignedByte(),r=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),Zt[i]&&(3===(s=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(d=3!==s?8:12,p=0;p<d;p++)e.readBoolean()&&a(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),l=e.readUnsignedExpGolomb(),p=0;p<l;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),c=e.readUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===(h=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:16*(c+1)-2*f-2*m,height:(2-h)*(u+1)*16-2*g-2*y,sarRatio:v}}},Qt.prototype=new V;var ie,ne={H264Stream:Qt,NalByteStream:Jt},re=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],se=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=i>=0?i:0,(16&t[e+5])>>4?i+20:i+10},ae=function t(e,i){return e.length-i<10||e[i]!=="I".charCodeAt(0)||e[i+1]!=="D".charCodeAt(0)||e[i+2]!=="3".charCodeAt(0)?i:t(e,i+=se(e,i))},oe=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},le={isLikelyAacData:function(t){var e=ae(t,0);return t.length>=e+2&&255==(255&t[e])&&240==(240&t[e+1])&&16==(22&t[e+1])},parseId3TagSize:se,parseAdtsSize:function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return re[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,i,n;e=10,64&t[5]&&(e+=4,e+=oe(t.subarray(10,14)));do{if((i=oe(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){n=t.subarray(e+10,e+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){var s=unescape(function(t,e,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r}(n,0,r));if("com.apple.streaming.transportStreamTimestamp"===s){var a=n.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(o*=4)+(3&a[7])}break}}e+=10,e+=i}while(e<t.byteLength);return null}};(ie=function(){var t=new Uint8Array,e=0;ie.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(i){var n,r,s,a,o=0,l=0;for(t.length?(a=t.length,(t=new Uint8Array(i.byteLength+a)).set(t.subarray(0,a)),t.set(i,a)):t=i;t.length-l>=3;)if(t[l]!=="I".charCodeAt(0)||t[l+1]!=="D".charCodeAt(0)||t[l+2]!=="3".charCodeAt(0))if(255!=(255&t[l])||240!=(240&t[l+1]))l++;else{if(t.length-l<7)break;if(l+(o=le.parseAdtsSize(t,l))>t.length)break;s={type:"audio",data:t.subarray(l,l+o),pts:e,dts:e},this.trigger("data",s),l+=o}else{if(t.length-l<10)break;if(l+(o=le.parseId3TagSize(t,l))>t.length)break;r={type:"timed-metadata",data:t.subarray(l,l+o)},this.trigger("data",r),l+=o}n=t.length-l,t=n>0?t.subarray(l):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var ce,ue,he,de,pe=ie,fe=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],me=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ge=ne.H264Stream,ye=le.isLikelyAacData,ve=function(t,e){e.stream=t,this.trigger("log",e)},be=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n];"headOfPipeline"!==r&&e[r].on&&e[r].on("log",ve.bind(t,r))}},_e=function(t,e){var i;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},we=function(t,e,i,n,r,s){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(n-e),pts:t+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:t}};ue=function(t,e){var i,n=[],r=0,s=0,a=1/0;i=(e=e||{}).firstSequenceNumber||0,ue.prototype.init.call(this),this.push=function(e){gt(t,e),t&&fe.forEach((function(i){t[i]=e[i]})),n.push(e)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){a=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var o,l,c,u,h,d,p;0!==n.length?(o=function(t,e,i){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))}(n,t,r),t.baseMediaDecodeTime=mt(t,e.keepOriginalTimestamps),p=pt(t,o,s,a),t.samples=function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=t[e],n.push({size:i.data.byteLength,duration:1024});return n}(o),c=tt(function(t){var e,i,n=0,r=new Uint8Array(function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i}(t));for(e=0;e<t.length;e++)i=t[e],r.set(i.data,n),n+=i.data.byteLength;return r}(o)),n=[],l=et(i,[t]),u=new Uint8Array(l.byteLength+c.byteLength),i++,u.set(l),u.set(c,l.byteLength),ft(t),h=Math.ceil(9216e4/t.samplerate),o.length&&(d=o.length*h,this.trigger("segmentTimingInfo",we(ut(t.baseMediaDecodeTime,t.samplerate),o[0].dts,o[0].pts,o[0].dts+d,o[0].pts+d,p||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+d})),this.trigger("data",{track:t,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){ft(t),n=[],this.trigger("reset")}},ue.prototype=new V,ce=function(t,e){var i,n,r,s=[],a=[];i=(e=e||{}).firstSequenceNumber||0,ce.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){gt(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],me.forEach((function(e){t[e]=n[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),s.push(e)},this.flush=function(){for(var n,r,o,l,c,u,h,d,p=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(t){var e,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r}(s),(o=function(t){var e,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r}(n))[0][0].keyFrame||((r=this.getGopForFusion_(s[0],t))?(p=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t}(o)),a.length){var f;if(!(f=e.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ft(t),o=f}gt(t,o),t.samples=function(t,e){var i,n,r,s,a,o=e||0,l=[];for(i=0;i<t.length;i++)for(s=t[i],n=0;n<s.length;n++)a=s[n],o+=(r=it(a,o)).size,l.push(r);return l}(o),c=tt(function(t){var e,i,n,r,s,a,o=0,l=t.byteLength,c=t.nalCount,u=new Uint8Array(l+4*c),h=new DataView(u.buffer);for(e=0;e<t.length;e++)for(r=t[e],i=0;i<r.length;i++)for(s=r[i],n=0;n<s.length;n++)a=s[n],h.setUint32(o,a.data.byteLength),o+=4,u.set(a.data,o),o+=a.data.byteLength;return u}(o)),t.baseMediaDecodeTime=mt(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),h=o[0],d=o[o.length-1],this.trigger("segmentTimingInfo",we(t.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),l=et(i,[t]),u=new Uint8Array(l.byteLength+c.byteLength),i++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:t,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){ft(t),n=void 0,r=void 0},this.getGopForFusion_=function(e){var i,n,r,s,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(s=this.gopCache_[a]).gop,t.pps&&_e(t.pps[0],s.pps[0])&&t.sps&&_e(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts||(i=e.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||o>i)&&(n=s,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,s,o,l,c;for(s=t.byteLength,o=t.nalCount,l=t.duration,e=i=0;e<a.length&&i<t.length&&(n=a[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,s-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?t:i===t.length?null:((c=t.slice(i)).byteLength=s,c.duration=l,c.nalCount=o,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(t){var e,i,n,r,s,o,l;for(e=a.length-1,i=t.length-1,s=null,o=!1;e>=0&&i>=0;){if(n=a[e],r=t[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?e--:(e===a.length-1&&(s=i),i--)}if(!o&&null===s)return null;if(0===(l=o?i:s))return t;var c=t.slice(l),u=c.reduce((function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(t){a=t}},ce.prototype=new V,de=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,de.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}},de.prototype=new V,de.prototype.flush=function(t){var e,i,n,r,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},l=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(l=this.videoTrack.timelineStartInfo.pts,me.forEach((function(t){o.info[t]=this.videoTrack[t]}),this)):this.audioTrack&&(l=this.audioTrack.timelineStartInfo.pts,fe.forEach((function(t){o.info[t]=this.audioTrack[t]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,n=function(t){var e,i=s(),n=c(t);return(e=new Uint8Array(i.byteLength+n.byteLength)).set(i),e.set(n,i.byteLength),e}(this.pendingTracks),o.initSegment=new Uint8Array(n.byteLength),o.initSegment.set(n),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=dt(e.startPts,l,this.keepOriginalTimestamps),e.endTime=dt(e.endPts,l,this.keepOriginalTimestamps),o.captionStreams[e.stream]=!0,o.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=dt(i.pts,l,this.keepOriginalTimestamps),o.metadata.push(i);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)e=o.captions[r],this.trigger("caption",e);for(r=0;r<o.metadata.length;r++)i=o.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},de.prototype.setRemux=function(t){this.remuxTracks=t},he=function(t){var e,i,n=this,r=!0;he.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Yt.MetadataStream,r.aacStream=new pe,r.audioTimestampRolloverStream=new Yt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Yt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new te,r.coalesceStream=new de(t,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(t){r.aacStream.setTimestamp(t.timeStamp)})),r.aacStream.on("data",(function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ue(i,t),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),be(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Yt.MetadataStream,r.packetStream=new Yt.TransportPacketStream,r.parseStream=new Yt.TransportParseStream,r.elementaryStream=new Yt.ElementaryStream,r.timestampRolloverStream=new Yt.TimestampRolloverStream,r.adtsStream=new te,r.h264Stream=new ge,r.captionStream=new Yt.CaptionStream(t),r.coalesceStream=new de(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(s){var a;if("metadata"===s.type){for(a=s.tracks.length;a--;)e||"video"!==s.tracks[a].type?i||"audio"!==s.tracks[a].type||((i=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(e=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;e&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ce(e,t),r.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(e){i&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(t){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ue(i,t),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(t){t.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",t)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),be(this,r)},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,ft(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,ft(e),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var e=this;return function(i){i.stream=t,e.trigger("log",i)}},this.push=function(t){if(r){var e=ye(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},he.prototype=new V;var Te,Se,xe,ke={Transmuxer:he,VideoSegmentStream:ce,AudioSegmentStream:ue,AUDIO_PROPERTIES:fe,VIDEO_PROPERTIES:me,generateSegmentTimingInfo:we},Ce=function(t){return t>>>0},Ee=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},Ie=Ce,Pe=function t(e,i){var n,r,s,a,o,l=[];if(!i.length)return null;for(n=0;n<e.byteLength;)r=Ie(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),s=Ee(e.subarray(n+4,n+8)),a=r>1?n+r:e.byteLength,s===i[0]&&(1===i.length?l.push(e.subarray(n+8,a)):(o=t(e.subarray(n+8,a),i.slice(1))).length&&(l=l.concat(o))),n=a;return l},Ae=Ce,Le=q.getUint64,Oe=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},De="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},Me="undefined"!=typeof window?window:void 0!==De?De:"undefined"!=typeof self?self:{},Re=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},Ne=It.CaptionStream,Be=function(t,e){for(var i=t,n=0;n<e.length;n++){var r=e[n];if(i<r.size)return r;i-=r.size}return null},Fe=function(t,e){var i=Pe(t,["moof","traf"]),n=Pe(t,["mdat"]),r={},s=[];return n.forEach((function(t,e){var n=i[e];s.push({mdat:t,traf:n})})),s.forEach((function(t){var i,n,s=t.mdat,a=t.traf,o=function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],s=2&n.flags[2],a=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return e=8,r&&(e+=4,n.baseDataOffset=i.getUint32(12),e+=4),s&&(n.sampleDescriptionIndex=i.getUint32(e),e+=4),a&&(n.defaultSampleDuration=i.getUint32(e),e+=4),o&&(n.defaultSampleSize=i.getUint32(e),e+=4),l&&(n.defaultSampleFlags=i.getUint32(e)),c&&(n.durationIsEmpty=!0),!r&&u&&(n.baseDataOffsetIsMoof=!0),n}(Pe(a,["tfhd"])[0]),l=o.trackId,c=Pe(a,["tfdt"]),u=c.length>0?function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?e.baseMediaDecodeTime=Le(t.subarray(4)):e.baseMediaDecodeTime=Ae(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),e}(c[0]).baseMediaDecodeTime:0,h=Pe(a,["trun"]);e===l&&h.length>0&&(i=function(t,e,i){var n=e,r=i.defaultSampleDuration||0,s=i.defaultSampleSize||0,a=i.trackId,o=[];return t.forEach((function(t){var e=function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&i.flags[2],s=4&i.flags[2],a=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),h=8;for(r&&(i.dataOffset=n.getInt32(h),h+=4),s&&u&&(e={flags:Oe(t.subarray(h,h+4))},h+=4,a&&(e.duration=n.getUint32(h),h+=4),o&&(e.size=n.getUint32(h),h+=4),c&&(1===i.version?e.compositionTimeOffset=n.getInt32(h):e.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(e),u--);u--;)e={},a&&(e.duration=n.getUint32(h),h+=4),o&&(e.size=n.getUint32(h),h+=4),l&&(e.flags=Oe(t.subarray(h,h+4)),h+=4),c&&(1===i.version?e.compositionTimeOffset=n.getInt32(h):e.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(e);return i}(t).samples;e.forEach((function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=s),t.trackId=a,t.dts=n,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),"bigint"==typeof n?(t.pts=n+Me.BigInt(t.compositionTimeOffset),n+=Me.BigInt(t.duration)):(t.pts=n+t.compositionTimeOffset,n+=t.duration)})),o=o.concat(e)})),o}(h,u,o),n=function(t,e,i){var n,r,s,a,o=new DataView(t.buffer,t.byteOffset,t.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<t.length;r+=s)if(s=o.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var c=t.subarray(r+1,r+1+s),u=Be(r,e);if(n={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:Re(c),trackId:i},u)n.pts=u.pts,n.dts=u.dts,a=u;else{if(!a){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+i+". See mux.js#223."});break}n.pts=a.pts,n.dts=a.dts}l.seiNals.push(n)}return l}(s,i,l),r[l]||(r[l]={seiNals:[],logs:[]}),r[l].seiNals=r[l].seiNals.concat(n.seiNals),r[l].logs=r[l].logs.concat(n.logs))})),r},$e=function(){var t,e,i,n,r,s,a=!1;this.isInitialized=function(){return a},this.init=function(e){t=new Ne,a=!0,s=!!e&&e.isPartial,t.on("data",(function(t){t.startTime=t.startPts/n,t.endTime=t.endPts/n,r.captions.push(t),r.captionStreams[t.stream]=!0})),t.on("log",(function(t){r.logs.push(t)}))},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length||i===t[0]&&n===e[i])},this.parse=function(t,s,a){var o;if(!this.isInitialized())return null;if(!s||!a)return null;if(this.isNewInit(s,a))i=s[0],n=a[i];else if(null===i||!n)return e.push(t),null;for(;e.length>0;){var l=e.shift();this.parse(l,s,a)}return o=function(t,e,i){if(null===e)return null;var n=Fe(t,e)[e]||{};return{seiNals:n.seiNals,logs:n.logs,timescale:i}}(t,i,n),o&&o.logs&&(r.logs=r.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach((function(e){t.push(e)}))},this.flushStream=function(){if(!this.isInitialized())return null;s?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ue=Ce,je=function(t){return("00"+t.toString(16)).slice(-2)},Ve=q.getUint64;Te=function(t,e){var i=Pe(e,["moof","traf"]).reduce((function(e,i){var n,r,s=Pe(i,["tfhd"])[0],a=Ue(s[4]<<24|s[5]<<16|s[6]<<8|s[7]),o=t[a]||9e4,l=Pe(i,["tfdt"])[0],c=new DataView(l.buffer,l.byteOffset,l.byteLength);return"bigint"==typeof(n=1===l[0]?Ve(l.subarray(4,12)):c.getUint32(4))?r=n/Me.BigInt(o):"number"!=typeof n||isNaN(n)||(r=n/o),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<e&&(e=r),e}),1/0);return"bigint"==typeof i||isFinite(i)?i:0},xe=function(t){var e=0===t[0]?12:20;return Ue(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])},Se=function(t){var e=Pe(t,["moov","trak"]),i=[];return e.forEach((function(t){var e,n,r={},s=Pe(t,["tkhd"])[0];s&&(n=(e=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),r.id=0===n?e.getUint32(12):e.getUint32(20));var a=Pe(t,["mdia","hdlr"])[0];if(a){var o=Ee(a.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=Pe(t,["mdia","minf","stbl","stsd"])[0];if(l){var c=l.subarray(8);r.codec=Ee(c.subarray(4,8));var u,h=Pe(c,[r.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(r.codec)?(u=h.subarray(78),"avcC"===Ee(u.subarray(4,8))&&u.length>11?(r.codec+=".",r.codec+=je(u[9]),r.codec+=je(u[10]),r.codec+=je(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=h.subarray(28),"esds"===Ee(u.subarray(4,8))&&u.length>20&&0!==u[19]?(r.codec+="."+je(u[19]),r.codec+="."+je(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var d=Pe(t,["mdia","mdhd"])[0];d&&(r.timescale=xe(d)),i.push(r)})),i};var He=Te,qe=Se,We=function(t){var e=31&t[1];return(e<<=8)|t[2]},ze=function(t){return!!(64&t[1])},Ge=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},Ke=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ye={parseType:function(t,e){var i=We(t);return 0===i?"pat":i===e?"pmt":e?"pes":null},parsePat:function(t){var e=ze(t),i=4+Ge(t);return e&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var e={},i=ze(t),n=4+Ge(t);if(i&&(n+=t[n]+1),1&t[n+5]){var r;r=3+((15&t[n+1])<<8|t[n+2])-4;for(var s=12+((15&t[n+10])<<8|t[n+11]);s<r;){var a=n+s;e[(31&t[a+1])<<8|t[a+2]]=t[a],s+=5+((15&t[a+3])<<8|t[a+4])}return e}},parsePayloadUnitStartIndicator:ze,parsePesType:function(t,e){switch(e[We(t)]){case Pt.H264_STREAM_TYPE:return"video";case Pt.ADTS_STREAM_TYPE:return"audio";case Pt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!ze(t))return null;var e=4+Ge(t);if(e>=t.byteLength)return null;var i,n=null;return 192&(i=t[e+7])&&((n={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,n.pts*=4,n.pts+=(6&t[e+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,n.dts*=4,n.dts+=(6&t[e+18])>>>1)),n},videoPacketContainsKeyFrame:function(t){for(var e=4+Ge(t),i=t.subarray(e),n=0,r=0,s=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Ke(31&i[r+3])&&(s=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Ke(31&i[r+3])&&(s=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Ke(31&i[r+3])&&(s=!0),s}},Xe=Rt,Qe={};Qe.ts=Ye,Qe.aac=le;var Je=ot,Ze=188,ti=71,ei=function(t,e,i){for(var n,r,s,a,o=0,l=Ze,c=!1;l<=t.byteLength;)if(t[o]!==ti||t[l]!==ti&&l!==t.byteLength)o++,l++;else{if(n=t.subarray(o,l),"pes"===Qe.ts.parseType(n,e.pid)&&(r=Qe.ts.parsePesType(n,e.table),s=Qe.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=Qe.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)),c)break;o+=Ze,l+=Ze}for(o=(l=t.byteLength)-Ze,c=!1;o>=0;)if(t[o]!==ti||t[l]!==ti&&l!==t.byteLength)o--,l--;else{if(n=t.subarray(o,l),"pes"===Qe.ts.parseType(n,e.pid)&&(r=Qe.ts.parsePesType(n,e.table),s=Qe.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=Qe.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)),c)break;o-=Ze,l-=Ze}},ii=function(t,e,i){for(var n,r,s,a,o,l,c,u=0,h=Ze,d=!1,p={data:[],size:0};h<t.byteLength;)if(t[u]!==ti||t[h]!==ti)u++,h++;else{if(n=t.subarray(u,h),"pes"===Qe.ts.parseType(n,e.pid)&&(r=Qe.ts.parsePesType(n,e.table),s=Qe.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(s&&!d&&(a=Qe.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),d=!0),!i.firstKeyFrame))){if(s&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),o.set(c,l),l+=c.byteLength;if(Qe.ts.videoPacketContainsKeyFrame(o)){var f=Qe.ts.parsePesTime(o);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(n),p.size+=n.byteLength}if(d&&i.firstKeyFrame)break;u+=Ze,h+=Ze}for(u=(h=t.byteLength)-Ze,d=!1;u>=0;)if(t[u]!==ti||t[h]!==ti)u--,h--;else{if(n=t.subarray(u,h),"pes"===Qe.ts.parseType(n,e.pid)&&(r=Qe.ts.parsePesType(n,e.table),s=Qe.ts.parsePayloadUnitStartIndicator(n),"video"===r&&s&&(a=Qe.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),d=!0)),d)break;u-=Ze,h-=Ze}},ni=function(t,e){var i;return i=Qe.aac.isLikelyAacData(t)?function(t){for(var e,i=!1,n=0,r=null,s=null,a=0,o=0;t.length-o>=3;){switch(Qe.aac.parseType(t,o)){case"timed-metadata":if(t.length-o<10){i=!0;break}if((a=Qe.aac.parseId3TagSize(t,o))>t.length){i=!0;break}null===s&&(e=t.subarray(o,o+a),s=Qe.aac.parseAacTimestamp(e)),o+=a;break;case"audio":if(t.length-o<7){i=!0;break}if((a=Qe.aac.parseAdtsSize(t,o))>t.length){i=!0;break}null===r&&(e=t.subarray(o,o+a),r=Qe.aac.parseSampleRate(e)),n++,o+=a;break;default:o++}if(i)return null}if(null===r||null===s)return null;var l=Je/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*n*l,pts:s+1024*n*l}]}}(t):function(t){var e={pid:null,table:null},i={};for(var n in function(t,e){for(var i,n=0,r=Ze;r<t.byteLength;)if(t[n]!==ti||t[r]!==ti)n++,r++;else{switch(i=t.subarray(n,r),Qe.ts.parseType(i,e.pid)){case"pat":e.pid=Qe.ts.parsePat(i);break;case"pmt":var s=Qe.ts.parsePmt(i);e.table=e.table||{},Object.keys(s).forEach((function(t){e.table[t]=s[t]}))}n+=Ze,r+=Ze}}(t,e),e.table)if(e.table.hasOwnProperty(n))switch(e.table[n]){case Pt.H264_STREAM_TYPE:i.video=[],ii(t,e,i),0===i.video.length&&delete i.video;break;case Pt.ADTS_STREAM_TYPE:i.audio=[],ei(t,e,i),0===i.audio.length&&delete i.audio}return i}(t),i&&(i.audio||i.video)?(function(t,e){if(t.audio&&t.audio.length){var i=e;(void 0===i||isNaN(i))&&(i=t.audio[0].dts),t.audio.forEach((function(t){t.dts=Xe(t.dts,i),t.pts=Xe(t.pts,i),t.dtsTime=t.dts/Je,t.ptsTime=t.pts/Je}))}if(t.video&&t.video.length){var n=e;if((void 0===n||isNaN(n))&&(n=t.video[0].dts),t.video.forEach((function(t){t.dts=Xe(t.dts,n),t.pts=Xe(t.pts,n),t.dtsTime=t.dts/Je,t.ptsTime=t.pts/Je})),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=Xe(r.dts,n),r.pts=Xe(r.pts,n),r.dtsTime=r.dts/Je,r.ptsTime=r.pts/Je}}}(i,e),i):null},ri=function(){function t(t,e){this.options=e||{},this.self=t,this.init()}var e=t.prototype;return e.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ke.Transmuxer(this.options),function(t,e){e.on("data",(function(e){var i=e.initSegment;e.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=e.data;e.data=n.buffer,t.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])})),e.on("done",(function(e){t.postMessage({action:"done"})})),e.on("gopInfo",(function(e){t.postMessage({action:"gopInfo",gopInfo:e})})),e.on("videoSegmentTimingInfo",(function(e){var i={start:{decode:ct(e.start.dts),presentation:ct(e.start.pts)},end:{decode:ct(e.end.dts),presentation:ct(e.end.pts)},baseMediaDecodeTime:ct(e.baseMediaDecodeTime)};e.prependedContentDuration&&(i.prependedContentDuration=ct(e.prependedContentDuration)),t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})),e.on("audioSegmentTimingInfo",(function(e){var i={start:{decode:ct(e.start.dts),presentation:ct(e.start.pts)},end:{decode:ct(e.end.dts),presentation:ct(e.end.pts)},baseMediaDecodeTime:ct(e.baseMediaDecodeTime)};e.prependedContentDuration&&(i.prependedContentDuration=ct(e.prependedContentDuration)),t.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})})),e.on("id3Frame",(function(e){t.postMessage({action:"id3Frame",id3Frame:e})})),e.on("caption",(function(e){t.postMessage({action:"caption",caption:e})})),e.on("trackinfo",(function(e){t.postMessage({action:"trackinfo",trackInfo:e})})),e.on("audioTimingInfo",(function(e){t.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ct(e.start),end:ct(e.end)}})})),e.on("videoTimingInfo",(function(e){t.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ct(e.start),end:ct(e.end)}})})),e.on("log",(function(e){t.postMessage({action:"log",log:e})}))}(this.self,this.transmuxer)},e.pushMp4Captions=function(t){this.captionParser||(this.captionParser=new $e,this.captionParser.init());var e=new Uint8Array(t.data,t.byteOffset,t.byteLength),i=this.captionParser.parse(e,t.trackIds,t.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],logs:i&&i.logs||[],data:e.buffer},[e.buffer])},e.probeMp4StartTime=function(t){var e=t.timescales,i=t.data,n=He(e,i);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:i},[i.buffer])},e.probeMp4Tracks=function(t){var e=t.data,i=qe(e);this.self.postMessage({action:"probeMp4Tracks",tracks:i,data:e},[e.buffer])},e.probeTs=function(t){var e=t.data,i=t.baseStartTime,n="number"!=typeof i||isNaN(i)?void 0:i*ot,r=ni(e,n),s=null;r&&((s={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(s.videoStart=r.video[0].ptsTime),s.hasAudio&&(s.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:s,data:e},[e.buffer])},e.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},e.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},e.push=function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)},e.reset=function(){this.transmuxer.reset()},e.setTimestampOffset=function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(lt(e)))},e.setAudioAppendStart=function(t){this.transmuxer.setAudioAppendStart(Math.ceil(lt(t.appendStart)))},e.setRemux=function(t){this.transmuxer.setRemux(t.remux)},e.flush=function(t){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},e.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},e.alignGopsWith=function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())},t}();self.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new ri(self,t.data.options):(this.messageHandlers||(this.messageHandlers=new ri(self)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}))),fl=ul(pl),ml=function(t){var e=t.transmuxer,i=t.bytes,n=t.audioAppendStart,r=t.gopsToAlignWith,s=t.remux,a=t.onData,o=t.onTrackInfo,l=t.onAudioTimingInfo,c=t.onVideoTimingInfo,u=t.onVideoSegmentTimingInfo,h=t.onAudioSegmentTimingInfo,d=t.onId3,p=t.onCaptions,f=t.onDone,m=t.onEndedTimeline,g=t.onTransmuxerLog,y=t.isEndOfTimeline,v={buffer:[]},b=y;if(e.onmessage=function(i){e.currentTransmux===t&&("data"===i.data.action&&function(t,e,i){var n=t.data.segment,r=n.type,s=n.initSegment,a=n.captions,o=n.captionStreams,l=n.metadata,c=n.videoFrameDtsTime,u=n.videoFramePtsTime;e.buffer.push({captions:a,captionStreams:o,metadata:l});var h=t.data.segment.boxes||{data:t.data.segment.data},d={type:r,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};void 0!==c&&(d.videoFrameDtsTime=c),void 0!==u&&(d.videoFramePtsTime=u),i(d)}(i,v,a),"trackinfo"===i.data.action&&o(i.data.trackInfo),"gopInfo"===i.data.action&&function(t,e){e.gopInfo=t.data.gopInfo}(i,v),"audioTimingInfo"===i.data.action&&l(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&c(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&u(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&h(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&d([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&p(i.data.caption),"endedtimeline"===i.data.action&&(b=!1,m()),"log"===i.data.action&&g(i.data.log),"transmuxed"===i.data.type&&(b||(e.onmessage=null,function(t){var e=t.transmuxedData,i=t.callback;e.buffer=[],i(e)}({transmuxedData:v,callback:f}),gl(e))))},n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&e.postMessage({action:"setRemux",remux:s}),i.byteLength){var _=i instanceof ArrayBuffer?i:i.buffer,w=i instanceof ArrayBuffer?0:i.byteOffset;e.postMessage({action:"push",data:_,byteOffset:w,byteLength:i.byteLength},[_])}y&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},gl=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),"function"==typeof t.currentTransmux?t.currentTransmux():ml(t.currentTransmux))},yl=function(t,e){t.postMessage({action:e}),gl(t)},vl=function(t){!function(t,e){if(!e.currentTransmux)return e.currentTransmux=t,void yl(e,t);e.transmuxQueue.push(yl.bind(null,e,t))}("reset",t)},bl=function(t){var e=t.transmuxer,i=t.endAction||t.action,n=t.callback,r=(0,o.Z)({},t,{endAction:null,transmuxer:null,callback:null});if(e.addEventListener("message",(function r(s){s.data.action===i&&(e.removeEventListener("message",r),s.data.data&&(s.data.data=new Uint8Array(s.data.data,t.byteOffset||0,t.byteLength||s.data.data.byteLength),t.data&&(t.data=s.data.data)),n(s.data))})),t.data){var s=t.data instanceof ArrayBuffer;r.byteOffset=s?0:t.data.byteOffset,r.byteLength=t.data.byteLength;var a=[s?t.data:t.data.buffer];e.postMessage(r,a)}else e.postMessage(r)},_l=-101,wl=-102,Tl=function(t){t.forEach((function(t){t.abort()}))},Sl=function(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:_l,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:wl,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:2,xhr:e}:null},xl=function(t,e,i){return function(n,r){var s=r.response,a=Sl(n,r);if(a)return i(a,t);if(16!==s.byteLength)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},t);for(var o=new DataView(s),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),c=0;c<e.length;c++)e[c].bytes=l;return i(null,t)}},kl=function(t,e){var i=ye(t.map.bytes);if("mp4"!==i){var n=t.map.resolvedUri||t.map.uri;return e({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+n,code:2})}bl({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(i){var n=i.tracks,r=i.data;return t.map.bytes=r,n.forEach((function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,"number"==typeof e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),e(null)}})},Cl=function(t){var e=t.segment,i=t.bytes,n=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.isEndOfTimeline,u=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog,f=e.map&&e.map.tracks||{},m=Boolean(f.audio&&f.video),g=r.bind(null,e,"audio","start"),y=r.bind(null,e,"audio","end"),v=r.bind(null,e,"video","start"),b=r.bind(null,e,"video","end");bl({action:"probeTs",transmuxer:e.transmuxer,data:i,baseStartTime:e.baseStartTime,callback:function(t){e.bytes=i=t.data;var r=t.result;r&&(n(e,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:m}),n=null,r.hasAudio&&!m&&g(r.audioStart),r.hasVideo&&v(r.videoStart),g=null,v=null),function(t){if(!t.transmuxer.currentTransmux)return t.transmuxer.currentTransmux=t,void ml(t);t.transmuxer.transmuxQueue.push(t)}({bytes:i,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:m,onData:function(t){t.type="combined"===t.type?"video":t.type,h(e,t)},onTrackInfo:function(t){n&&(m&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:function(t){g&&void 0!==t.start&&(g(t.start),g=null),y&&void 0!==t.end&&y(t.end)},onVideoTimingInfo:function(t){v&&void 0!==t.start&&(v(t.start),v=null),b&&void 0!==t.end&&b(t.end)},onVideoSegmentTimingInfo:function(t){s(t)},onAudioSegmentTimingInfo:function(t){a(t)},onId3:function(t,i){o(e,t,i)},onCaptions:function(t){l(e,[t])},isEndOfTimeline:c,onEndedTimeline:function(){u()},onTransmuxerLog:p,onDone:function(t){d&&(t.type="combined"===t.type?"video":t.type,d(null,e,t))}})}})},El=function(t){var e=t.segment,i=t.bytes,n=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.isEndOfTimeline,u=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog,f=new Uint8Array(i);if(function(t){return ee(t,["moof"]).length>0}(f)){e.isFmp4=!0;var m=e.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),n(e,g);var y=function(t){h(e,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),t&&t.length&&l(e,t),d(null,e,{})};bl({action:"probeMp4StartTime",timescales:e.map.timescales,data:f,transmuxer:e.transmuxer,callback:function(t){var n=t.data,s=t.startTime;i=n.buffer,e.bytes=f=n,g.hasAudio&&!g.isMuxed&&r(e,"audio","start",s),g.hasVideo&&r(e,"video","start",s),m.video&&n.byteLength&&e.transmuxer?bl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:f,timescales:e.map.timescales,trackIds:[m.video.id],callback:function(t){i=t.data.buffer,e.bytes=f=t.data,t.logs.forEach((function(t){p(qa.mergeOptions(t,{stream:"mp4CaptionParser"}))})),y(t.captions)}}):y()}})}else if(e.transmuxer){if(void 0===e.container&&(e.container=ye(f)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void d(null,e,{});Cl({segment:e,bytes:i,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d,onTransmuxerLog:p})}else d(null,e,{})},Il=function(t,e){var i,n=t.id,r=t.key,s=t.encryptedBytes,a=t.decryptionWorker;a.addEventListener("message",(function t(i){if(i.data.source===n){a.removeEventListener("message",t);var r=i.data.decrypted;e(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),i=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),a.postMessage(Ko({source:n,encrypted:s,key:i,iv:r.iv}),[s.buffer,i.buffer])},Pl=function(t){var e=t.xhr,i=t.xhrOptions,n=t.decryptionWorker,r=t.segment,s=t.abortFn,a=t.progressFn,o=t.trackInfoFn,l=t.timingInfoFn,c=t.videoSegmentTimingInfoFn,u=t.audioSegmentTimingInfoFn,h=t.id3Fn,d=t.captionsFn,p=t.isEndOfTimeline,f=t.endedTimelineFn,m=t.dataFn,g=t.doneFn,y=t.onTransmuxerLog,v=[],b=function(t){var e=t.activeXhrs,i=t.decryptionWorker,n=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.isEndOfTimeline,u=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog,f=0,m=!1;return function(t,g){if(!m){if(t)return m=!0,Tl(e),d(t,g);if((f+=1)===e.length){var y=function(){if(g.encryptedBytes)return function(t){var e=t.decryptionWorker,i=t.segment,n=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,c=t.isEndOfTimeline,u=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog;Il({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:e},(function(t){i.bytes=t,El({segment:i,bytes:i.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d,onTransmuxerLog:p})}))}({decryptionWorker:i,segment:g,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d,onTransmuxerLog:p});El({segment:g,bytes:g.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:u,dataFn:h,doneFn:d,onTransmuxerLog:p})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Il({decryptionWorker:i,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(t){g.map.bytes=t,kl(g,(function(t){if(t)return Tl(e),d(t,g);y()}))}));y()}}}}({activeXhrs:v,decryptionWorker:n,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m,doneFn:g,onTransmuxerLog:y});if(r.key&&!r.key.bytes){var _=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&_.push(r.map.key);var w=e(qa.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),xl(r,_,b));v.push(w)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var T=e(qa.mergeOptions(i,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),xl(r,[r.map.key],b));v.push(T)}var S=qa.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:qo(r.map)}),x=function(t){var e=t.segment,i=t.finishProcessingFn;return function(t,n){var r=Sl(t,n);if(r)return i(r,e);var s=new Uint8Array(n.response);if(e.map.key)return e.map.encryptedBytes=s,i(null,e);e.map.bytes=s,kl(e,(function(t){if(t)return t.xhr=n,t.status=n.status,i(t,e);i(null,e)}))}}({segment:r,finishProcessingFn:b}),k=e(S,x);v.push(k)}var C=qa.mergeOptions(i,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:qo(r)}),E=e(C,function(t){var e=t.segment,i=t.finishProcessingFn,n=t.responseType;return function(t,r){var s=Sl(t,r);if(s)return i(s,e);var a="arraybuffer"!==n&&r.responseText?function(t){for(var e=new Uint8Array(new ArrayBuffer(t.length)),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer}(r.responseText.substring(e.lastReachedChar||0)):r.response;return e.stats=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(a):e.bytes=new Uint8Array(a),i(null,e)}}({segment:r,finishProcessingFn:b,responseType:C.responseType}));E.addEventListener("progress",function(t){var e=t.segment,i=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(t){if(!t.target.aborted)return e.stats=qa.mergeOptions(e.stats,(r=(n=t).target,(s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0}).bytesReceived=n.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),i(t,e);var n,r,s}}({segment:r,progressFn:a,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m})),v.push(E);var I={};return v.forEach((function(t){t.addEventListener("loadend",function(t){var e=t.loadendState,i=t.abortFn;return function(t){t.target.aborted&&i&&!e.calledAbortFn&&(i(),e.calledAbortFn=!0)}}({loadendState:I,abortFn:s}))})),function(){return Tl(v)}},Al=Ya("CodecUtils"),Ll=function(t,e){var i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},Ol=function(t){var e={};return t.forEach((function(t){var i=t.mediaType,n=t.type,r=t.details;e[i]=e[i]||[],e[i].push(V(""+n+r))})),Object.keys(e).forEach((function(t){if(e[t].length>1)return Al("multiple "+t+" codecs found as attributes: "+e[t].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(e[t]=null);e[t]=e[t][0]})),e},Dl=function(t){var e=0;return t.audio&&e++,t.video&&e++,e},Ml=function(t,e){var i=e.attributes||{},n=Ol(function(t){var e=t.attributes||{};if(e.CODECS)return H(e.CODECS)}(e)||[]);if(Ll(t,e)&&!n.audio&&!function(t,e){if(!Ll(t,e))return!0;var i=e.attributes||{},n=t.mediaGroups.AUDIO[i.AUDIO];for(var r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1}(t,e)){var r=Ol(function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var i=t.mediaGroups.AUDIO[e];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return H(r.playlists[0].attributes.CODECS)}return null}(t,i.AUDIO)||[]);r.audio&&(n.audio=r.audio)}return n},Rl=Ya("PlaylistSelector"),Nl=function(t){if(t&&t.playlist){var e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})}},Bl=function(t,e){if(!t)return"";var i=r().getComputedStyle(t);return i?i[e]:""},Fl=function(t,e){var i=t.slice();t.sort((function(t,n){var r=e(t,n);return 0===r?i.indexOf(t)-i.indexOf(n):r}))},$l=function(t,e){var i,n;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||r().Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),i-(n||r().Number.MAX_VALUE)},Ul=function(t,e,i,n,s,a){if(t){var o={bandwidth:e,width:i,height:n,limitRenditionByPlayerDimensions:s},l=t.playlists;xo.isAudioOnly(t)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var c=l.map((function(t){var e=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,i=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height;return{bandwidth:t.attributes&&t.attributes.BANDWIDTH||r().Number.MAX_VALUE,width:e,height:i,playlist:t}}));Fl(c,(function(t,e){return t.bandwidth-e.bandwidth}));var u=(c=c.filter((function(t){return!xo.isIncompatible(t.playlist)}))).filter((function(t){return xo.isEnabled(t.playlist)}));u.length||(u=c.filter((function(t){return!xo.isDisabled(t.playlist)})));var h=u.filter((function(t){return t.bandwidth*ll.BANDWIDTH_VARIANCE<e})),d=h[h.length-1],p=h.filter((function(t){return t.bandwidth===d.bandwidth}))[0];if(!1===s){var f=p||u[0]||c[0];if(f&&f.playlist){var m="sortedPlaylistReps";return p&&(m="bandwidthBestRep"),u[0]&&(m="enabledPlaylistReps"),Rl("choosing "+Nl(f)+" using "+m+" with options",o),f.playlist}return Rl("could not choose a playlist with options",o),null}var g=h.filter((function(t){return t.width&&t.height}));Fl(g,(function(t,e){return t.width-e.width}));var y=g.filter((function(t){return t.width===i&&t.height===n}));d=y[y.length-1];var v,b,_,w,T=y.filter((function(t){return t.bandwidth===d.bandwidth}))[0];if(T||(b=(v=g.filter((function(t){return t.width>i||t.height>n}))).filter((function(t){return t.width===v[0].width&&t.height===v[0].height})),d=b[b.length-1],_=b.filter((function(t){return t.bandwidth===d.bandwidth}))[0]),a.experimentalLeastPixelDiffSelector){var S=g.map((function(t){return t.pixelDiff=Math.abs(t.width-i)+Math.abs(t.height-n),t}));Fl(S,(function(t,e){return t.pixelDiff===e.pixelDiff?e.bandwidth-t.bandwidth:t.pixelDiff-e.pixelDiff})),w=S[0]}var x=w||_||T||p||u[0]||c[0];if(x&&x.playlist){var k="sortedPlaylistReps";return w?k="leastPixelDiffRep":_?k="resolutionPlusOneRep":T?k="resolutionBestRep":p?k="bandwidthBestRep":u[0]&&(k="enabledPlaylistReps"),Rl("choosing "+Nl(x)+" using "+k+" with options",o),x.playlist}return Rl("could not choose a playlist with options",o),null}},jl=function(){var t=this.useDevicePixelRatio&&r().devicePixelRatio||1;return Ul(this.playlists.master,this.systemBandwidth,parseInt(Bl(this.tech_.el(),"width"),10)*t,parseInt(Bl(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Vl=function(t,e,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=t&&r.endTime<=e&&i.removeCue(r)},Hl=function(t){return"number"==typeof t&&isFinite(t)},ql=1/60,Wl=function(t){var e=t.startOfSegment,i=t.duration,n=t.segment,r=t.part,s=t.playlist,a=s.mediaSequence,o=s.id,l=s.segments,c=void 0===l?[]:l,u=t.mediaIndex,h=t.partIndex,d=t.timeline,p=c.length-1,f="mediaIndex/partIndex increment";t.getMediaInfoForTime?f="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(f+=" with independent "+t.independent);var m="number"==typeof h,g=t.segment.uri?"segment":"pre-segment",y=m?co({preloadSegment:n})-1:0;return g+" ["+(a+u)+"/"+(a+p)+"]"+(m?" part ["+h+"/"+y+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+(m?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+e+"] duration ["+i+"] timeline ["+d+"] selected by ["+f+"] playlist ["+o+"]"},zl=function(t){return t+"TimingInfo"},Gl=function(t){var e=t.timelineChangeController,i=t.currentTimeline,n=t.segmentTimeline,r=t.loaderType,s=t.audioDisabled;if(i===n)return!1;if("audio"===r){var a=e.lastTimelineChange({type:"main"});return!a||a.to!==n}if("main"===r&&s){var o=e.pendingTimelineChange({type:"audio"});return!o||o.to!==n}return!1},Kl=function(t){var e=t.segmentDuration,i=t.maxDuration;return!!e&&Math.round(e)>i+Xa},Yl=function(t){function e(e,i){var n;if(n=t.call(this)||this,!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=e.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=e.hasPlayed,n.currentTime_=e.currentTime,n.seekable_=e.seekable,n.seeking_=e.seeking,n.duration_=e.duration,n.mediaSource_=e.mediaSource,n.vhs_=e.vhs,n.loaderType_=e.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=e.segmentMetadataTrack,n.goalBufferLength_=e.goalBufferLength,n.sourceType_=e.sourceType,n.sourceUpdater_=e.sourceUpdater,n.inbandTextTracks_=e.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=e.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=e.parse708captions,n.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,n.captionServices_=e.captionServices,n.experimentalExactManifestTimings=e.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=qa.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=e.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=e.decrypter,n.syncController_=e.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",(function(){n.isEndOfStream_()||(n.ended_=!1)})),n.fetchAtBuffer_=!1,n.logger_=Ya("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(u(n),"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",(function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),n}d(e,t);var i=e.prototype;return i.createTransmuxer_=function(){return function(t){var e=new fl;e.currentTransmux=null,e.transmuxQueue=[];var i=e.terminate;return e.terminate=function(){return e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)},e.postMessage({action:"init",options:t}),e}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,r().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},i.error=function(t){return void 0!==t&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&vl(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return qa.createTimeRanges();if("main"===this.loaderType_){var e=t.hasAudio,i=t.hasVideo,n=t.isMuxed;if(i&&e&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(t,e){if(void 0===e&&(e=!1),!t)return null;var i=Yo(t),n=this.initSegments_[i];return e&&!n&&t.bytes&&(this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),n||t},i.segmentKey=function(t,e){if(void 0===e&&(e=!1),!t)return null;var i=Xo(t),n=this.keyCache_[i];this.cacheEncryptionKeys_&&e&&!n&&t.bytes&&(this.keyCache_[i]=n={resolvedUri:t.resolvedUri,bytes:t.bytes});var r={resolvedUri:(n||t).resolvedUri};return n&&(r.bytes=n.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(t,e){if(void 0===e&&(e={}),t){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=e,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var s=t.mediaSequence-i.mediaSequence;if(this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var a=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!a.parts||!a.parts.length||!a.parts[this.partIndex])){var o=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=o}}n&&(n.mediaIndex-=s,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=t.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,t)}},i.pause=function(){this.checkBufferTimeout_&&(r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&vl(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(t,e,i,n){if(void 0===i&&(i=function(){}),void 0===n&&(n=!1),e===1/0&&(e=this.duration_()),e<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,s=function(){0==--r&&i()};for(var a in!n&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(t,e,s)),(n||"main"===this.loaderType_)&&(this.gopBuffer_=function(t,e,i,n){for(var r=Math.ceil((e-n)*ve.ONE_SECOND_IN_TS),s=Math.ceil((i-n)*ve.ONE_SECOND_IN_TS),a=t.slice(),o=t.length;o--&&!(t[o].pts<=s););if(-1===o)return a;for(var l=o+1;l--&&!(t[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a}(this.gopBuffer_,t,e,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(t,e,s)),this.inbandTextTracks_)Vl(t,e,this.inbandTextTracks_[a]);Vl(t,e,this.segmentMetadataTrack_),s()}else this.logger_("skipping remove because no source updater or starting media info")},i.monitorBuffer_=function(){this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),500)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();t&&("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},i.isEndOfStream_=function(t,e,i){if(void 0===t&&(t=this.mediaIndex),void 0===e&&(e=this.playlist_),void 0===i&&(i=this.partIndex),!e||!this.mediaSource_)return!1;var n="number"==typeof t&&e.segments[t],r=t+1===e.segments.length,s=!n||!n.parts||i+1===n.parts.length;return e.endList&&"open"===this.mediaSource_.readyState&&r&&s},i.chooseNextRequest_=function(){var t=this.buffered_(),e=no(t)||0,i=ro(t,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||n||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=function(t,e,i){e=e||[];for(var n=[],r=0,s=0;s<e.length;s++){var a=e[s];if(t===a.timeline&&(n.push(s),(r+=a.duration)>i))return s}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,s,e);else if(null!==this.mediaIndex){var o=s[this.mediaIndex],l="number"==typeof this.partIndex?this.partIndex:-1;a.startOfSegment=o.end?o.end:e,o.parts&&o.parts[l+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=l+1):a.mediaIndex=this.mediaIndex+1}else{var c=xo.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?e:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),u=c.segmentIndex,h=c.startTime,d=c.partIndex;a.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+e:"currentTime "+this.currentTime_(),a.mediaIndex=u,a.startOfSegment=h,a.partIndex=d}var p=s[a.mediaIndex],f=p&&"number"==typeof a.partIndex&&p.parts&&p.parts[a.partIndex];if(!p||"number"==typeof a.partIndex&&!f)return null;if("number"!=typeof a.partIndex&&p.parts&&(a.partIndex=0,f=p.parts[0]),!i&&f&&!f.independent)if(0===a.partIndex){var m=s[a.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(a.mediaIndex-=1,a.partIndex=m.parts.length-1,a.independent="previous segment")}else p.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");var y=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=s.length-1&&y&&!this.seeking_()?null:this.generateSegmentInfo_(a)},i.generateSegmentInfo_=function(t){var e=t.independent,i=t.playlist,n=t.mediaIndex,r=t.startOfSegment,s=t.isSyncRequest,a=t.partIndex,o=t.forceTimestampOffset,l=t.getMediaInfoForTime,c=i.segments[n],u="number"==typeof a&&c.parts[a],h={requestId:"segment-loader-"+Math.random(),uri:u&&u.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:u?a:null,isSyncRequest:s,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:u&&u.duration||c.duration,segment:c,part:u,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:e},d=void 0!==o?o:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:d});var p=no(this.sourceUpdater_.audioBuffered());return"number"==typeof p&&(h.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=function(t,e,i){if(null==e||!t.length)return[];var n,r=Math.ceil((e-i+3)*ve.ONE_SECOND_IN_TS);for(n=0;n<t.length&&!(t[n].pts>r);n++);return t.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h},i.timestampOffsetForSegment_=function(t){return i=(e=t).segmentTimeline,n=e.currentTimeline,r=e.startOfSegment,s=e.buffered,e.overrideCheck||i!==n?i<n?r:s.length?s.end(s.length-1):r:null;var e,i,n,r,s},i.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var e=this.currentTime_(),i=t.bandwidth,n=this.pendingSegment_.duration,r=xo.estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived),s=function(t,e,i){return void 0===i&&(i=1),((t.length?t.end(t.length-1):0)-e)/i}(this.buffered_(),e,this.vhs_.tech_.playbackRate())-1;if(!(r<=s)){var a=function(t){var e=t.currentTime,i=t.bandwidth,n=t.duration,r=t.segmentDuration,s=t.timeUntilRebuffer,a=t.currentTimeline,o=t.syncController,l=t.master.playlists.filter((function(t){return!xo.isIncompatible(t)})),c=l.filter(xo.isEnabled);c.length||(c=l.filter((function(t){return!xo.isDisabled(t)})));var u=c.filter(xo.hasAttribute.bind(null,"BANDWIDTH")).map((function(t){var l=o.getSyncPoint(t,n,a,e)?1:2;return{playlist:t,rebufferingImpact:xo.estimateSegmentRequestTime(r,i,t)*l-s}})),h=u.filter((function(t){return t.rebufferingImpact<=0}));return Fl(h,(function(t,e){return $l(e.playlist,t.playlist)})),h.length?h[0]:(Fl(u,(function(t,e){return t.rebufferingImpact-e.rebufferingImpact})),u[0]||null)}({master:this.vhs_.playlists.master,currentTime:e,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var o=r-s-a.rebufferingImpact,l=.5;s<=Xa&&(l=1),!a.playlist||a.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=a.playlist.attributes.BANDWIDTH*ll.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(t){this.logger_("Aborting "+Wl(t)),this.mediaRequestsAborted+=1},i.handleProgress_=function(t,e){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(t,e){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(e)||(e=e||{},function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;var i=Object.keys(t).sort(),n=Object.keys(e).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var s=i[r];if(s!==n[r])return!1;if(t[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,e)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=e,this.currentMediaInfo_=e,this.logger_("trackinfo update",e),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=e,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(t,e,i,n){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var r=this.pendingSegment_,s=zl(e);r[s]=r[s]||{},r[s][i]=n,this.logger_("timinginfo: "+e+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(t,e){var i=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(0!==e.length)if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};e.forEach((function(t){s[t.stream]=s[t.stream]||{startTime:1/0,captions:[],endTime:0};var e=s[t.stream];e.startTime=Math.min(e.startTime,t.startTime+n),e.endTime=Math.max(e.endTime,t.endTime+n),e.captions.push(t)})),Object.keys(s).forEach((function(t){var e=s[t],a=e.startTime,o=e.endTime,l=e.captions,c=i.inbandTextTracks_;i.logger_("adding cues from "+a+" -> "+o+" for "+t),function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"}),e.trigger({type:"usage",name:"hls-608"});var n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);var r=e.textTracks().getTrackById(n);if(r)t[i]=r;else{var s=i,a=i,o=!1,l=(e.options_.vhs&&e.options_.vhs.captionServices||{})[n];l&&(s=l.label,a=l.language,o=l.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:n,default:o,label:s,language:a},!1).track}}}(c,i.vhs_.tech_,t),Vl(a,o,c[t]),function(t){var e=t.inbandTextTracks,i=t.captionArray,n=t.timestampOffset;if(i){var s=r().WebKitDataCue||r().VTTCue;i.forEach((function(t){var i=t.stream;e[i].addCue(new s(t.startTime+n,t.endTime+n,t.text))}))}}({captionArray:l,inbandTextTracks:c,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,e));else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(t,e,i){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(t,e,i){t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e)}(this.inbandTextTracks_,i,this.vhs_.tech_),function(t){var e=t.inbandTextTracks,i=t.metadataArray,n=t.timestampOffset,s=t.videoDuration;if(i){var a=r().WebKitDataCue||r().VTTCue,o=e.metadataTrack_;if(o&&(i.forEach((function(t){var e=t.cueTime+n;!("number"!=typeof e||r().isNaN(e)||e<0)&&e<1/0&&t.frames.forEach((function(t){var i=new a(e,e,t.value||t.url||t.data||"");i.frame=t,i.value=t,function(t){Object.defineProperties(t.frame,{id:{get:function(){return qa.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return qa.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return qa.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(i),o.addCue(i)}))})),o.cues&&o.cues.length)){for(var l=o.cues,c=[],u=0;u<l.length;u++)l[u]&&c.push(l[u]);var h=c.reduce((function(t,e){var i=t[e.startTime]||[];return i.push(e),t[e.startTime]=i,t}),{}),d=Object.keys(h).sort((function(t,e){return Number(t)-Number(e)}));d.forEach((function(t,e){var i=h[t],n=Number(d[e+1])||s;i.forEach((function(t){t.endTime=n}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:e,timestampOffset:n,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,e,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(t){return t()})),this.metadataQueue_.caption.forEach((function(t){return t()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach((function(t){return t()}))},i.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach((function(t){return t()}))},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&Gl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},i.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,e=this.getCurrentMediaInfo_();if(!t||!e)return!1;var i=e.hasAudio,n=e.hasVideo,r=e.isMuxed;return!(n&&!t.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!t.audioTimingInfo||Gl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(t,e){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),i.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),i.isFmp4=t.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[zl(e.type)].start;else{var n,r=this.getCurrentMediaInfo_(),s="main"===this.loaderType_&&r&&r.hasVideo;s&&(n=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,e.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var a=this.chooseNextRequest_();if(a.mediaIndex!==i.mediaIndex||a.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,e)}}else this.callQueue_.push(this.handleData_.bind(this,t,e))},i.updateAppendInitSegmentStatus=function(t,e){"main"!==this.loaderType_||"number"!=typeof t.timestampOffset||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[e]!==t.playlist&&(this.appendInitSegment_[e]=!0)},i.getInitSegmentAndUpdateState_=function(t){var e=t.type,i=t.initSegment,n=t.map,r=t.playlist;if(n){var s=Yo(n);if(this.activeInitSegmentId_===s)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=s}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,i):null},i.handleQuotaExceededError_=function(t,e){var i=this,n=t.segmentInfo,s=t.type,a=t.bytes,o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+io(o).join(", ")),l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+io(l).join(", "));var c=o.length?o.start(0):0,u=o.length?o.end(o.length-1):0,h=l.length?l.start(0):0,d=l.length?l.end(l.length-1):0;if(u-c<=1&&d-h<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+io(o).join(", ")+", video buffer: "+io(l).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:n,type:s,bytes:a}));var p=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=r().setTimeout((function(){i.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),i.quotaExceededErrorRetryTimeout_=null,i.processCallQueue_()}),1e3)}),!0)},i.handleAppendError_=function(t,e){var i=t.segmentInfo,n=t.type,r=t.bytes;e&&(22!==e.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",e),this.error(n+" append of "+r.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:n,bytes:r}))},i.appendToSourceBuffer_=function(t){var e,i,n,r=t.segmentInfo,s=t.type,a=t.initSegment,o=t.data,l=t.bytes;if(!l){var c=[o],u=o.byteLength;a&&(c.unshift(a),u+=a.byteLength),n=0,(e={bytes:u,segments:c}).bytes&&(i=new Uint8Array(e.bytes),e.segments.forEach((function(t){i.set(t,n),n+=t.byteLength}))),l=i}this.sourceUpdater_.appendBuffer({segmentInfo:r,type:s,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:r,type:s,bytes:l}))},i.handleSegmentTimingInfo_=function(t,e,i){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment,r=t+"TimingInfo";n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=function(t,e){var i=e.type,n=e.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:e.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:r,data:n})}},i.loadSegment_=function(t){var e=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push((function(){var i=(0,o.Z)({},t,{forceTimestampOffset:!0});(0,o.Z)(t,e.generateSegmentInfo_(i)),e.isPendingTimestampOffset_=!1,e.updateTransmuxerAndRequestSegment_(t)}))},i.updateTransmuxerAndRequestSegment_=function(t){var e=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var i=this.createSimplifiedSegmentObj_(t),n=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),r=null!==this.mediaIndex,s=t.timeline!==this.currentTimeline_&&t.timeline>0,a=n||r&&s;this.logger_("Requesting "+Wl(t)),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Pl({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:function(){e.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(i){var n=i.message,r=i.level,s=i.stream;e.logger_(Wl(t)+" logged from transmuxer stream "+s+" as a "+r+": "+n)}})},i.trimBackBuffer_=function(t){var e=function(t,e,i){var n=e-ll.BACK_BUFFER_LENGTH;t.length&&(n=Math.max(n,t.start(0)));var r=e-i;return Math.min(r,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)},i.createSimplifiedSegmentObj_=function(t){var e=t.segment,i=t.part,n={resolvedUri:i?i.resolvedUri:e.resolvedUri,byterange:i?i.byterange:e.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},r=t.playlist.segments[t.mediaIndex-1];if(r&&r.timeline===e.timeline&&(r.videoTimingInfo?n.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(n.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),e.key){var s=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key=this.segmentKey(e.key),n.key.iv=s}return e.map&&(n.map=this.initSegmentForMap(e.map)),n},i.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},i.saveBandwidthRelatedStats_=function(t,e){this.pendingSegment_.byteLength=e.bytesReceived,t<ql?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+ql):(this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},i.segmentRequestFinished_=function(t,e,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,e,i));else if(this.saveTransferStats_(e.stats),this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",t.code===wl)return;return this.pause(),t.code===_l?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,e.stats),n.endOfAllRequests=e.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(t,e,i){if(!e.length)return t;if(i)return e.slice();for(var n=e[0].pts,r=0;r<t.length&&!(t[r].pts>=n);r++);return t.slice(0,r).concat(e)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}},i.setTimeMapping_=function(t){var e=this.syncController_.mappingForTimeline(t);null!==e&&(this.timeMapping_=e)},i.updateMediaSecondsLoaded_=function(t){"number"==typeof t.start&&"number"==typeof t.end?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(t){var e=t.currentStart,i=t.playlist,n=t.mediaIndex,r=t.firstVideoFrameTimeForData,s=t.currentVideoTimestampOffset,a=t.useVideoTimingInfo,o=t.videoTimingInfo,l=t.audioTimingInfo;if(void 0!==e)return e;if(!a)return l.start;var c=i.segments[n-1];return 0!==n&&c&&void 0!==c.start&&c.end===r+s?o.start:r},i.waitForAppendsToComplete_=function(t){var e=this.getCurrentMediaInfo_(t);if(!e)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var i=e.hasAudio,n=e.hasVideo,r=e.isMuxed,s="main"===this.loaderType_&&n,a=!this.audioDisabled_&&i&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||"number"!=typeof t.timestampOffset||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);s&&t.waitingOnAppends++,a&&t.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},i.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(t){var e=function(t,e,i){return"main"===t&&e&&i?i.hasAudio||i.hasVideo?e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!e&&(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var e=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),e=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),e=!0),e&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(t){var e=t.videoTimingInfo,i=t.audioTimingInfo,n=t.timingInfo;return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:i&&"number"==typeof i.transmuxedDecodeStart?i.transmuxedDecodeStart:n.start:n.start},i.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var e=this.getMediaInfo_(),i="main"===this.loaderType_&&e&&e.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;i&&(t.timingInfo.end="number"==typeof i.end?i.end:i.start+t.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var e=function(t,e){if("hls"!==e)return null;var i,n,s=(i={audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo},n=0,["video","audio"].forEach((function(t){var e=i[t+"TimingInfo"];if(e){var s,a=e.start,o=e.end;"bigint"==typeof a||"bigint"==typeof o?s=r().BigInt(o)-r().BigInt(a):"number"==typeof a&&"number"==typeof o&&(s=o-a),void 0!==s&&s>n&&(n=s)}})),"bigint"==typeof n&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),n);if(!s)return null;var a=t.playlist.targetDuration,o=Kl({segmentDuration:s,maxDuration:2*a}),l=Kl({segmentDuration:s,maxDuration:a}),c="Segment with index "+t.mediaIndex+" from playlist "+t.playlist.id+" has a duration of "+s+" when the reported duration is "+t.duration+" and the target duration is "+a+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return o||l?{severity:o?"warn":"info",message:c}:null}(t,this.sourceType_);if(e&&("warn"===e.severity?qa.log.warn(e.message):this.logger_(e.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+Wl(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var i=t.segment,n=t.part,s=i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration,a=n&&n.end&&this.currentTime_()-n.end>3*t.playlist.partTargetDuration;if(s||a)return this.logger_("bad "+(s?"segment":"part")+" "+Wl(t)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Wl(t))},i.recordThroughput_=function(t){if(t.duration<ql)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+ql);else{var e=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}},i.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var e=t.segment,i=e.start,n=e.end;if(Hl(i)&&Hl(n)){Vl(i,n,this.segmentMetadataTrack_);var s=r().WebKitDataCue||r().VTTCue,a={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:n},o=new s(i,n,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}},e}(qa.EventTarget);function Xl(){}var Ql,Jl=function(t){return"string"!=typeof t?t:t.replace(/./,(function(t){return t.toUpperCase()}))},Zl=["video","audio"],tc=function(t,e){var i=e[t+"Buffer"];return i&&i.updating||e.queuePending[t]},ec=function t(e,i){if(0!==i.queue.length){var n=0,r=i.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==e&&i.ready()&&"closed"!==i.mediaSource.readyState&&!tc(e,i)){if(r.type!==e){if(n=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if("mediaSource"===n.type)return null;if(n.type===t)return i}return null}(e,i.queue),null===n)return;r=i.queue[n]}return i.queue.splice(n,1),i.queuePending[e]=r,r.action(e,i),r.doneFn?void 0:(i.queuePending[e]=null,void t(e,i))}}else i.updating()||"closed"===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&&r.doneFn(),t("audio",i),t("video",i))}},ic=function(t,e){var i=e[t+"Buffer"],n=Jl(t);i&&(i.removeEventListener("updateend",e["on"+n+"UpdateEnd_"]),i.removeEventListener("error",e["on"+n+"Error_"]),e.codecs[t]=null,e[t+"Buffer"]=null)},nc=function(t,e){return t&&e&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,e)},rc=function(t,e,i){return function(n,r){var s=r[n+"Buffer"];if(nc(r.mediaSource,s)){r.logger_("Appending segment "+e.mediaIndex+"'s "+t.length+" bytes to "+n+"Buffer");try{s.appendBuffer(t)}catch(t){r.logger_("Error with code "+t.code+" "+(22===t.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+e.mediaIndex+" to "+n+"Buffer"),r.queuePending[n]=null,i(t)}}}},sc=function(t,e){return function(i,n){var r=n[i+"Buffer"];if(nc(n.mediaSource,r)){n.logger_("Removing "+t+" to "+e+" from "+i+"Buffer");try{r.remove(t,e)}catch(r){n.logger_("Remove "+t+" to "+e+" from "+i+"Buffer failed")}}}},ac=function(t){return function(e,i){var n=i[e+"Buffer"];nc(i.mediaSource,n)&&(i.logger_("Setting "+e+"timestampOffset to "+t),n.timestampOffset=t)}},oc=function(t){return function(e,i){t()}},lc=function(t){return function(e){if("open"===e.mediaSource.readyState){e.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{e.mediaSource.endOfStream(t)}catch(t){qa.log.warn("Failed to call media source endOfStream",t)}}}},cc=function(t,e){return function(i){var n=Jl(t),r=W(e);i.logger_("Adding "+t+"Buffer with codec "+e+" to mediaSource");var s=i.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),s.addEventListener("error",i["on"+n+"Error_"]),i.codecs[t]=e,i[t+"Buffer"]=s}},uc=function(t){return function(e){var i=e[t+"Buffer"];if(ic(t,e),nc(e.mediaSource,i)){e.logger_("Removing "+t+"Buffer with codec "+e.codecs[t]+" from mediaSource");try{e.mediaSource.removeSourceBuffer(i)}catch(e){qa.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},hc=function(t){return function(e,i){var n=i[e+"Buffer"],r=W(t);nc(i.mediaSource,n)&&i.codecs[e]!==t&&(i.logger_("changing "+e+"Buffer codec from "+i.codecs[e]+" to "+t),n.changeType(r),i.codecs[e]=t)}},dc=function(t){var e=t.type,i=t.sourceUpdater,n=t.action,r=t.doneFn,s=t.name;i.queue.push({type:e,action:n,doneFn:r,name:s}),ec(e,i)},pc=function(t,e){return function(i){if(e.queuePending[t]){var n=e.queuePending[t].doneFn;e.queuePending[t]=null,n&&n(e[t+"Error_"])}ec(t,e)}},fc=function(t){function e(e){var i;return(i=t.call(this)||this).mediaSource=e,i.sourceopenListener_=function(){return ec("mediaSource",u(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Ya("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=pc("video",u(i)),i.onAudioUpdateEnd_=pc("audio",u(i)),i.onVideoError_=function(t){i.videoError_=t},i.onAudioError_=function(t){i.audioError_=t},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}d(e,t);var i=e.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(t,e){dc({type:"mediaSource",sourceUpdater:this,action:cc(t,e),name:"addSourceBuffer"})},i.abort=function(t){dc({type:t,sourceUpdater:this,action:function(t,e){if("open"===e.mediaSource.readyState){var i=e[t+"Buffer"];if(nc(e.mediaSource,i)){e.logger_("calling abort on "+t+"Buffer");try{i.abort()}catch(e){qa.log.warn("Failed to abort on "+t+"Buffer",e)}}}},name:"abort"})},i.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?dc({type:"mediaSource",sourceUpdater:this,action:uc(t),name:"removeSourceBuffer"}):qa.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!qa.browser.IE_VERSION&&!qa.browser.IS_FIREFOX&&r().MediaSource&&r().MediaSource.prototype&&"function"==typeof r().MediaSource.prototype.removeSourceBuffer},e.canChangeType=function(){return r().SourceBuffer&&r().SourceBuffer.prototype&&"function"==typeof r().SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(t,e){this.canChangeType()?dc({type:t,sourceUpdater:this,action:hc(e),name:"changeType"}):qa.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(t){var e=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach((function(i){var n=t[i];if(!e.hasCreatedSourceBuffers())return e.addSourceBuffer(i,n);e.canChangeType()&&e.changeType(i,n)}))},i.appendBuffer=function(t,e){var i=this,n=t.segmentInfo,r=t.type,s=t.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,e]),void this.logger_("delayed audio append of "+s.length+" until video append");if(dc({type:r,sourceUpdater:this,action:rc(s,n||{mediaIndex:-1},e),doneFn:e,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var a=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+a.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,a.forEach((function(t){i.appendBuffer.apply(i,t)}))}},i.audioBuffered=function(){return nc(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:qa.createTimeRange()},i.videoBuffered=function(){return nc(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:qa.createTimeRange()},i.buffered=function(){var t=nc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,e=nc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return e&&!t?this.audioBuffered():t&&!e?this.videoBuffered():function(t,e){var i=null,n=null,r=0,s=[],a=[];if(!(t&&t.length&&e&&e.length))return qa.createTimeRange();for(var o=t.length;o--;)s.push({time:t.start(o),type:"start"}),s.push({time:t.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort((function(t,e){return t.time-e.time})),o=0;o<s.length;o++)"start"===s[o].type?2==++r&&(i=s[o].time):"end"===s[o].type&&1==--r&&(n=s[o].time),null!==i&&null!==n&&(a.push([i,n]),i=null,n=null);return qa.createTimeRanges(a)}(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(t,e){var i;void 0===e&&(e=Xl),dc({type:"mediaSource",sourceUpdater:this,action:(i=t,function(t){t.logger_("Setting mediaSource duration to "+i);try{t.mediaSource.duration=i}catch(t){qa.log.warn("Failed to set media source duration",t)}}),name:"duration",doneFn:e})},i.endOfStream=function(t,e){void 0===t&&(t=null),void 0===e&&(e=Xl),"string"!=typeof t&&(t=void 0),dc({type:"mediaSource",sourceUpdater:this,action:lc(t),name:"endOfStream",doneFn:e})},i.removeAudio=function(t,e,i){void 0===i&&(i=Xl),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?dc({type:"audio",sourceUpdater:this,action:sc(t,e),doneFn:i,name:"remove"}):i()},i.removeVideo=function(t,e,i){void 0===i&&(i=Xl),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?dc({type:"video",sourceUpdater:this,action:sc(t,e),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!tc("audio",this)&&!tc("video",this))},i.audioTimestampOffset=function(t){return void 0!==t&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(dc({type:"audio",sourceUpdater:this,action:ac(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},i.videoTimestampOffset=function(t){return void 0!==t&&this.videoBuffer&&this.videoTimestampOffset!==t&&(dc({type:"video",sourceUpdater:this,action:ac(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},i.audioQueueCallback=function(t){this.audioBuffer&&dc({type:"audio",sourceUpdater:this,action:oc(t),name:"callback"})},i.videoQueueCallback=function(t){this.videoBuffer&&dc({type:"video",sourceUpdater:this,action:oc(t),name:"callback"})},i.dispose=function(){var t=this;this.trigger("dispose"),Zl.forEach((function(e){t.abort(e),t.canRemoveSourceBuffer()?t.removeSourceBuffer(e):t[e+"QueueCallback"]((function(){return ic(e,t)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(qa.EventTarget),mc=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},gc=new Uint8Array("\n\n".split("").map((function(t){return t.charCodeAt(0)}))),yc=function(t){function e(){return t.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return d(e,t),e}(_e(Error)),vc=function(t){function e(e,i){var n;return void 0===i&&(i={}),(n=t.call(this,e,i)||this).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=e.featuresNativeTextTracks,n.loadVttJs=e.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}d(e,t);var i=e.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return qa.createTimeRanges();var t=this.subtitlesTrack_.cues,e=t[0].startTime,i=t[t.length-1].startTime;return qa.createTimeRanges([[e,i]])},i.initSegmentForMap=function(t,e){if(void 0===e&&(e=!1),!t)return null;var i=Yo(t),n=this.initSegments_[i];if(e&&!n&&t.bytes){var r=gc.byteLength+t.bytes.byteLength,s=new Uint8Array(r);s.set(t.bytes),s.set(gc,t.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(t,e){Vl(t,e,this.subtitlesTrack_)},i.fillBuffer_=function(){var t=this,e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",(function(){t.state="READY",t.paused()||t.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},i.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(t,e,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===_l&&this.handleTimeout_(),t.code===wl?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,e.stats),e.key&&this.segmentKey(e.key,!0),this.state="APPENDING",this.trigger("appending");var a=s.segment;if(a.map&&(a.map.bytes=e.map.bytes),s.bytes=e.bytes,"function"!=typeof r().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((function(){return n.segmentRequestFinished_(t,e,i)}),(function(){return n.stopForError({message:"Error loading vtt.js"})}));a.requested=!0;try{this.parseVTTCues_(s)}catch(t){return void this.stopForError({message:t.message})}if(this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,s.cues.forEach((function(t){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new(r().VTTCue)(t.startTime,t.endTime,t.text):t)})),function(t){var e=t.cues;if(e)for(var i=0;i<e.length;i++){for(var n=[],r=0,s=0;s<e.length;s++)e[i].startTime===e[s].startTime&&e[i].endTime===e[s].endTime&&e[i].text===e[s].text&&++r>1&&n.push(e[s]);n.length&&n.forEach((function(e){return t.removeCue(e)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(t){var e,i=!1;if("function"!=typeof r().WebVTT)throw new yc;"function"==typeof r().TextDecoder?e=new(r().TextDecoder)("utf8"):(e=r().WebVTT.StringDecoder(),i=!0);var n=new(r().WebVTT.Parser)(r(),r().vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=function(e){t.timestampmap=e},n.onparsingerror=function(t){qa.log.warn("Error encountered when parsing cues: "+t.message)},t.segment.map){var s=t.segment.map.bytes;i&&(s=mc(s)),n.parse(s)}var a=t.bytes;i&&(a=mc(a)),n.parse(a),n.flush()},i.updateTimeMapping_=function(t,e,i){var n=t.segment;if(e)if(t.cues.length){var r=t.timestampmap,s=r.MPEGTS/ve.ONE_SECOND_IN_TS-r.LOCAL+e.mapping;if(t.cues.forEach((function(t){t.startTime+=s,t.endTime+=s})),!i.syncInfo){var a=t.cues[0].startTime,o=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(a,o-n.duration)}}}else n.empty=!0},e}(Yl),bc=function(t,e){for(var i=t.cues,n=0;n<i.length;n++){var r=i[n];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},_c=[{name:"VOD",run:function(t,e,i,n,r){return i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(t,e,i,n,r){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,a=null,o=oo(e);r=r||0;for(var l=0;l<o.length;l++){var c=o[e.endList||0===r?l:o.length-(l+1)],u=c.segment,h=t.timelineToDatetimeMappings[u.timeline];if(h&&u.dateTimeObject){var d=u.dateTimeObject.getTime()/1e3+h;if(u.parts&&"number"==typeof c.partIndex)for(var p=0;p<c.partIndex;p++)d+=u.parts[p].duration;var f=Math.abs(r-d);if(null!==a&&(0===f||a<f))break;a=f,s={time:d,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}}return s}},{name:"Segment",run:function(t,e,i,n,r){var s=null,a=null;r=r||0;for(var o=oo(e),l=0;l<o.length;l++){var c=o[e.endList||0===r?l:o.length-(l+1)],u=c.segment,h=c.part&&c.part.start||u&&u.start;if(u.timeline===n&&void 0!==h){var d=Math.abs(r-h);if(null!==a&&a<d)break;(!s||null===a||a>=d)&&(a=d,s={time:h,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:function(t,e,i,n,r){var s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var a=null,o=0;o<e.discontinuityStarts.length;o++){var l=e.discontinuityStarts[o],c=e.discontinuitySequence+o+1,u=t.discontinuities[c];if(u){var h=Math.abs(r-u.time);if(null!==a&&a<h)break;(!s||null===a||a>=h)&&(a=h,s={time:u.time,segmentIndex:l,partIndex:null})}}return s}},{name:"Playlist",run:function(t,e,i,n,r){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}}],wc=function(t){function e(e){var i;return(i=t.call(this)||this).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=Ya("SyncController"),i}d(e,t);var i=e.prototype;return i.getSyncPoint=function(t,e,i,n){var r=this.runStrategies_(t,e,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(t,e){if(!t||!t.segments)return null;var i=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+fo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:n.segmentIndex,endIndex:0}))},i.runStrategies_=function(t,e,i,n){for(var r=[],s=0;s<_c.length;s++){var a=_c[s],o=a.run(this,t,e,i,n);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r},i.selectSyncPoint_=function(t,e){for(var i=t[0].syncPoint,n=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy,s=1;s<t.length;s++){var a=Math.abs(t[s].syncPoint[e.key]-e.value);a<n&&(n=a,i=t[s].syncPoint,r=t[s].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+("number"==typeof i.partIndex?",partIndex:"+i.partIndex:"")+"]"),i},i.saveExpiredSegmentInfo=function(t,e){var i=e.mediaSequence-t.mediaSequence;if(i>86400)qa.log.warn("Not saving expired segment info. Media sequence gap "+i+" is too large.");else for(var n=i-1;n>=0;n--){var r=t.segments[n];if(r&&void 0!==r.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var e=t.segments[0],i=e.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[e.timeline]=-i}},i.saveSegmentTimingInfo=function(t){var e=t.segmentInfo,i=t.shouldSaveTimelineMapping,n=this.calculateSegmentTimeMapping_(e,e.timingInfo,i),r=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));var s=r.dateTimeObject;r.discontinuity&&i&&s&&(this.timelineToDatetimeMappings[r.timeline]=-s.getTime()/1e3)},i.timestampOffsetForTimeline=function(t){return void 0===this.timelines[t]?null:this.timelines[t].time},i.mappingForTimeline=function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping},i.calculateSegmentTimeMapping_=function(t,e,i){var n,r,s=t.segment,a=t.part,o=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)o={time:t.startOfSegment,mapping:t.startOfSegment-e.start},i&&(this.timelines[t.timeline]=o,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+o.time+"] [mapping: "+o.mapping+"]")),n=t.startOfSegment,r=e.end+o.mapping;else{if(!o)return!1;n=e.start+o.mapping,r=e.end+o.mapping}return a&&(a.start=n,a.end=r),(!s.start||n<s.start)&&(s.start=n),s.end=r,!0},i.saveDiscontinuitySyncInfo_=function(t){var e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(var n=0;n<e.discontinuityStarts.length;n++){var r=e.discontinuityStarts[n],s=e.discontinuitySequence+n+1,a=r-t.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){var l;l=a<0?i.start-fo({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex,endIndex:r}):i.end+fo({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:l,accuracy:o}}}},i.dispose=function(){this.trigger("dispose"),this.off()},e}(qa.EventTarget),Tc=function(t){function e(){var e;return(e=t.call(this)||this).pendingTimelineChanges_={},e.lastTimelineChanges_={},e}d(e,t);var i=e.prototype;return i.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(t){var e=t.type,i=t.from,n=t.to;return"number"==typeof i&&"number"==typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]},i.lastTimelineChange=function(t){var e=t.type,i=t.from,n=t.to;return"number"==typeof i&&"number"==typeof n&&(this.lastTimelineChanges_[e]={type:e,from:i,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(qa.EventTarget),Sc=hl(dl((function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function e(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}var n=e((function(t){function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0})),r=e((function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(i,n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),s=e((function(t){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})),a=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=e.length,a=0;a<s;++a)e[a].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}(),o=function(){var t,e,i,n,r,s,a,o,l=[[[],[],[],[],[]],[[],[],[],[],[]]],c=l[0],u=l[1],h=c[4],d=u[4],p=[],f=[];for(t=0;t<256;t++)f[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=i=0;!h[e];e^=n||1,i=f[i]||1)for(s=(s=i^i<<1^i<<2^i<<3^i<<4)>>8^255&s^99,h[e]=s,d[s]=e,o=16843009*p[r=p[n=p[e]]]^65537*r^257*n^16843008*e,a=257*p[s]^16843008*s,t=0;t<4;t++)c[t][e]=a=a<<24^a>>>8,u[t][s]=o=o<<24^o>>>8;for(t=0;t<5;t++)c[t]=c[t].slice(0),u[t]=u[t].slice(0);return l},l=null,c=function(){function t(t){var e,i,n;l||(l=o()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var r=this._tables[0][4],s=this._tables[1],a=t.length,c=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");var u=t.slice(0),h=[];for(this._key=[u,h],e=a;e<4*a+28;e++)n=u[e-1],(e%a==0||8===a&&e%a==4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],e%a==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),u[e]=u[e-a]^n;for(i=0;e;i++,e--)n=u[3&i?e:e-4],h[i]=e<=4||i<4?n:s[0][r[n>>>24]]^s[1][r[n>>16&255]]^s[2][r[n>>8&255]]^s[3][r[255&n]]}return t.prototype.decrypt=function(t,e,i,n,r,s){var a,o,l,c,u=this._key[1],h=t^u[0],d=n^u[1],p=i^u[2],f=e^u[3],m=u.length/4-2,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],w=y[3],T=y[4];for(c=0;c<m;c++)a=v[h>>>24]^b[d>>16&255]^_[p>>8&255]^w[255&f]^u[g],o=v[d>>>24]^b[p>>16&255]^_[f>>8&255]^w[255&h]^u[g+1],l=v[p>>>24]^b[f>>16&255]^_[h>>8&255]^w[255&d]^u[g+2],f=v[f>>>24]^b[h>>16&255]^_[d>>8&255]^w[255&p]^u[g+3],g+=4,h=a,d=o,p=l;for(c=0;c<4;c++)r[(3&-c)+s]=T[h>>>24]<<24^T[d>>16&255]<<16^T[p>>8&255]<<8^T[255&f]^u[g++],a=h,h=d,d=p,p=f,f=a},t}(),u=function(t){function e(){var e;return(e=t.call(this,a)||this).jobs=[],e.delay=1,e.timeout_=null,e}s(e,t);var i=e.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(a),h=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},d=function(){function t(e,i,n,r){var s=t.STEP,a=new Int32Array(e.buffer),o=new Uint8Array(e.byteLength),l=0;for(this.asyncStream_=new u,this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+s),i,n,o)),l=s;l<a.length;l+=s)n=new Uint32Array([h(a[l-4]),h(a[l-3]),h(a[l-2]),h(a[l-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(l,l+s),i,n,o));this.asyncStream_.push((function(){var t;r(null,(t=o).subarray(0,t.byteLength-t[t.byteLength-1]))}))}return t.prototype.decryptChunk_=function(t,e,i,n){return function(){var r=function(t,e,i){var n,r,s,a,o,l,u,d,p,f=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),m=new c(Array.prototype.slice.call(e)),g=new Uint8Array(t.byteLength),y=new Int32Array(g.buffer);for(n=i[0],r=i[1],s=i[2],a=i[3],p=0;p<f.length;p+=4)o=h(f[p]),l=h(f[p+1]),u=h(f[p+2]),d=h(f[p+3]),m.decrypt(o,l,u,d,y,p),y[p]=h(y[p]^n),y[p+1]=h(y[p+1]^r),y[p+2]=h(y[p+2]^s),y[p+3]=h(y[p+3]^a),n=o,r=l,s=u,a=d;return g}(t,e,i);n.set(r,t.byteOffset)}},n(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}(),p=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000");self.onmessage=function(t){var e=t.data,i=new Uint8Array(e.encrypted.bytes,e.encrypted.byteOffset,e.encrypted.byteLength),n=new Uint32Array(e.key.bytes,e.key.byteOffset,e.key.byteLength/4),r=new Uint32Array(e.iv.bytes,e.iv.byteOffset,e.iv.byteLength/4);new d(i,n,r,(function(t,i){var n,r;self.postMessage((n={source:e.source,decrypted:i},r={},Object.keys(n).forEach((function(t){var e,i=n[t];e=i,("function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer)?r[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:r[t]=i})),r),[i.buffer])}))}}))),xc=ul(Sc),kc=function(t){var e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},Cc=function(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Ec=function(t,e){e.activePlaylistLoader=t,t.load()},Ic={AUDIO:function(t,e){return function(){var i=e.segmentLoaders[t],n=e.mediaTypes[t],r=e.blacklistCurrentPlaylist;Cc(i,n);var s=n.activeTrack(),a=n.activeGroup(),o=(a.filter((function(t){return t.default}))[0]||a[0]).id,l=n.tracks[o];if(s!==l){for(var c in qa.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[c].enabled=n.tracks[c]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,e){return function(){var i=e.segmentLoaders[t],n=e.mediaTypes[t];qa.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Cc(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},Pc={AUDIO:function(t,e,i){if(e){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[t];e.on("loadedmetadata",(function(){var t=e.media();s.playlist(t,r),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()})),e.on("loadedplaylist",(function(){s.playlist(e.media(),r),n.paused()||s.load()})),e.on("error",Ic[t](t,i))}},SUBTITLES:function(t,e,i){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[t],a=i.mediaTypes[t];e.on("loadedmetadata",(function(){var t=e.media();s.playlist(t,r),s.track(a.activeTrack()),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()})),e.on("loadedplaylist",(function(){s.playlist(e.media(),r),n.paused()||s.load()})),e.on("error",Ic[t](t,i))}},Ac={AUDIO:function(t,e){var i=e.vhs,n=e.sourceType,r=e.segmentLoaders[t],s=e.requestOptions,a=e.master.mediaGroups,o=e.mediaTypes[t],l=o.groups,c=o.tracks,u=o.logger_,h=e.masterPlaylistLoader,d=So(h.master);for(var p in a[t]&&0!==Object.keys(a[t]).length||(a[t]={main:{default:{default:!0}}},d&&(a[t].main.default.playlists=h.master.playlists)),a[t])for(var f in l[p]||(l[p]=[]),a[t][p]){var m=a[t][p][f],g=void 0;if(d?(u("AUDIO group '"+p+"' label '"+f+"' is a master playlist"),m.isMasterPlaylist=!0,g=null):g="vhs-json"===n&&m.playlists?new $o(m.playlists[0],i,s):m.resolvedUri?new $o(m.resolvedUri,i,s):m.playlists&&"dash"===n?new ol(m.playlists[0],i,s,h):null,m=qa.mergeOptions({id:f,playlistLoader:g},m),Pc[t](t,m.playlistLoader,e),l[p].push(m),void 0===c[f]){var y=new qa.AudioTrack({id:f,kind:kc(m),enabled:!1,language:m.language,default:m.default,label:f});c[f]=y}}r.on("error",Ic[t](t,e))},SUBTITLES:function(t,e){var i=e.tech,n=e.vhs,r=e.sourceType,s=e.segmentLoaders[t],a=e.requestOptions,o=e.master.mediaGroups,l=e.mediaTypes[t],c=l.groups,u=l.tracks,h=e.masterPlaylistLoader;for(var d in o[t])for(var p in c[d]||(c[d]=[]),o[t][d])if(!o[t][d][p].forced){var f=o[t][d][p],m=void 0;if("hls"===r)m=new $o(f.resolvedUri,n,a);else if("dash"===r){if(!f.playlists.filter((function(t){return t.excludeUntil!==1/0})).length)return;m=new ol(f.playlists[0],n,a,h)}else"vhs-json"===r&&(m=new $o(f.playlists?f.playlists[0]:f.resolvedUri,n,a));if(f=qa.mergeOptions({id:p,playlistLoader:m},f),Pc[t](t,f.playlistLoader,e),c[d].push(f),void 0===u[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;u[p]=g}}s.on("error",Ic[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var i=e.tech,n=e.master.mediaGroups,r=e.mediaTypes[t],s=r.groups,a=r.tracks;for(var o in n[t])for(var l in s[o]||(s[o]=[]),n[t][o]){var c=n[t][o][l];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var u=i.options_.vhs&&i.options_.vhs.captionServices||{},h={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(u[h.instreamId]&&(h=qa.mergeOptions(h,u[h.instreamId])),void 0===h.default&&delete h.default,s[o].push(qa.mergeOptions({id:l},c)),void 0===a[l]){var d=i.addRemoteTextTrack({id:h.instreamId,kind:"captions",default:h.default,language:h.language,label:h.label},!1).track;a[l]=d}}}}},Lc=function t(e,i){for(var n=0;n<e.length;n++){if(wo(i,e[n]))return!0;if(e[n].playlists&&t(e[n].playlists,i))return!0}return!1},Oc={AUDIO:function(t,e){return function(){var i=e.mediaTypes[t].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(t,e){return function(){var i=e.mediaTypes[t].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},Dc=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Xl,activeTrack:Xl,getActiveGroup:Xl,onGroupChanged:Xl,onTrackChanged:Xl,lastTrack_:null,logger_:Ya("MediaGroups["+e+"]")}})),t},Mc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Rc=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},Nc=function(t){function e(e){var i;i=t.call(this)||this;var n=e.src,s=e.handleManifestRedirects,a=e.withCredentials,o=e.tech,l=e.bandwidth,c=e.externVhs,h=e.useCueTags,d=e.blacklistDuration,p=e.enableLowInitialPlaylist,f=e.sourceType,m=e.cacheEncryptionKeys,g=e.experimentalBufferBasedABR,y=e.experimentalLeastPixelDiffSelector,v=e.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var b=e.maxPlaylistRetries;null==b&&(b=1/0),Ql=c,i.experimentalBufferBasedABR=Boolean(g),i.experimentalLeastPixelDiffSelector=Boolean(y),i.withCredentials=a,i.tech_=o,i.vhs_=o.vhs,i.sourceType_=f,i.useCueTags_=h,i.blacklistDuration=d,i.maxPlaylistRetries=b,i.enableLowInitialPlaylist=p,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:s,maxPlaylistRetries:b,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=Dc(),i.mediaSource=new(r().MediaSource),i.handleDurationChange_=i.handleDurationChange_.bind(u(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(u(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(u(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=qa.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new wc(e),i.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new xc,i.sourceUpdater_=new fc(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Tc;var _={vhs:i.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:v,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:l,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:e.experimentalExactManifestTimings};i.masterPlaylistLoader_="dash"===i.sourceType_?new ol(n,i.vhs_,i.requestOptions_):new $o(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Yl(qa.mergeOptions(_,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new Yl(qa.mergeOptions(_,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new vc(qa.mergeOptions(_,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise((function(t,e){function i(){o.off("vttjserror",n),t()}function n(){o.off("vttjsloaded",i),e()}o.one("vttjsloaded",i),o.one("vttjserror",n),o.addWebVttScript_()}))}}),e),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",(function(){return i.startABRTimer_()})),i.tech_.on("pause",(function(){return i.stopABRTimer_()})),i.tech_.on("play",(function(){return i.startABRTimer_()}))),Mc.forEach((function(t){i[t+"_"]=Rc.bind(u(i),t)})),i.logger_=Ya("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var w="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(w,(function(){var t=Date.now();i.tech_.one("loadeddata",(function(){i.timeToLoadedData__=Date.now()-t,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends}))})),i}d(e,t);var i=e.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),e=this.audioAppendsToLoadedData_();return-1===t||-1===e?-1:t+e},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(t){void 0===t&&(t="abr");var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,t)},i.switchMedia_=function(t,e,i){var n=this.media(),r=n&&(n.id||n.uri),s=t.id||t.uri;r&&r!==s&&(this.logger_("switch media "+r+" -> "+s+" from "+e),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+e})),this.masterPlaylistLoader_.media(t,i)},i.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=r().setInterval((function(){return t.checkABR_()}),250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(r().clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var t=this.master(),e=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return e;var i,n=t.mediaGroups.AUDIO,r=Object.keys(n);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{var s=n.main||r.length&&n[r[0]];for(var a in s)if(s[a].default){i={label:a};break}}if(!i)return e;var o=[];for(var l in n)if(n[l][i.label]){var c=n[l][i.label];if(c.playlists&&c.playlists.length)o.push.apply(o,c.playlists);else if(c.uri)o.push(c);else if(t.playlists.length)for(var u=0;u<t.playlists.length;u++){var h=t.playlists[u];h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===l&&o.push(h)}}return o.length?o:e},i.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var e=t.masterPlaylistLoader_.media(),i=1.5*e.targetDuration*1e3;_o(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=i,e.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load()),function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){Ac[e](e,t)}));var e=t.mediaTypes,i=t.masterPlaylistLoader,n=t.tech,r=t.vhs,s=t.segmentLoaders,a=s.AUDIO,o=s.main;["AUDIO","SUBTITLES"].forEach((function(i){e[i].activeGroup=function(t,e){return function(i){var n=e.masterPlaylistLoader,r=e.mediaTypes[t].groups,s=n.media();if(!s)return null;var a=null;s.attributes[t]&&(a=r[s.attributes[t]]);var o=Object.keys(r);if(!a)if("AUDIO"===t&&o.length>1&&So(e.master))for(var l=0;l<o.length;l++){var c=r[o[l]];if(Lc(c,s)){a=c;break}}else r.main?a=r.main:1===o.length&&(a=r[o[0]]);return void 0===i?a:null!==i&&a&&a.filter((function(t){return t.id===i.id}))[0]||null}}(i,t),e[i].activeTrack=Oc[i](i,t),e[i].onGroupChanged=function(t,e){return function(){var i=e.segmentLoaders,n=i[t],r=i.main,s=e.mediaTypes[t],a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastGroup_;o&&c&&o.id===c.id||(s.lastGroup_=o,s.lastTrack_=a,Cc(n,s),o&&!o.isMasterPlaylist&&(o.playlistLoader?(n.resyncLoader(),Ec(o.playlistLoader,s)):l&&r.resetEverything()))}}(i,t),e[i].onGroupChanging=function(t,e){return function(){var i=e.segmentLoaders[t];e.mediaTypes[t].lastGroup_=null,i.abort(),i.pause()}}(i,t),e[i].onTrackChanged=function(t,e){return function(){var i=e.masterPlaylistLoader,n=e.segmentLoaders,r=n[t],s=n.main,a=e.mediaTypes[t],o=a.activeTrack(),l=a.getActiveGroup(),c=a.activePlaylistLoader,u=a.lastTrack_;if((!u||!o||u.id!==o.id)&&(a.lastGroup_=l,a.lastTrack_=o,Cc(r,a),l)){if(l.isMasterPlaylist){if(!o||!u||o.id===u.id)return;var h=e.vhs.masterPlaylistController_,d=h.selectPlaylist();if(h.media()===d)return;return a.logger_("track change. Switching master audio from "+u.id+" to "+o.id),i.pause(),s.resetEverything(),void h.fastQualityChange_(d)}if("AUDIO"===t){if(!l.playlistLoader)return s.setAudio(!0),void s.resetEverything();r.setAudio(!0),s.setAudio(!1)}c!==l.playlistLoader?(r.track&&r.track(o),r.resetEverything(),Ec(l.playlistLoader,a)):Ec(l.playlistLoader,a)}}}(i,t),e[i].getActiveGroup=function(t,e){var i=e.mediaTypes;return function(){var e=i[t].activeTrack();return e?i[t].activeGroup(e):null}}(i,t)}));var l=e.AUDIO.activeGroup();if(l){var c=(l.filter((function(t){return t.default}))[0]||l[0]).id;e.AUDIO.tracks[c].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),a.setAudio(!0)):o.setAudio(!0)}i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(t){return e[t].onGroupChanged()}))})),i.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(t){return e[t].onGroupChanging()}))}));var u=function(){e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var h in n.audioTracks().addEventListener("change",u),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",(function(){n.audioTracks().removeEventListener("change",u),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)})),n.clearTracks("audio"),e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[h])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),e),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){t.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var e=t.masterPlaylistLoader_.media();if(!e){var i;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(i=t.selectInitialPlaylist()),i||(i=t.selectPlaylist()),!i||!t.shouldSwitchToMedia_(i))return;if(t.initialMedia_=i,t.switchMedia_(t.initialMedia_,"initial"),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments)return;e=t.initialMedia_}t.handleUpdatedMediaPlaylist(e)})),this.masterPlaylistLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var e=t.masterPlaylistLoader_.media(),i=1.5*e.targetDuration*1e3;_o(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=i,t.masterPlaylistLoader_.load(),t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var e=t.masterPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&t.stuckAtPlaylistEnd_(e)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},i.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(t,e){var i=t.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var s in i.AUDIO)for(var a in i.AUDIO[s])i.AUDIO[s][a].uri||(n=!1);n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ql.Playlist.isAes(e)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(t){var e=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(t){var e=t.currentPlaylist,i=t.buffered,n=t.currentTime,r=t.nextPlaylist,s=t.bufferLowWaterLine,a=t.bufferHighWaterLine,o=t.duration,l=t.experimentalBufferBasedABR,c=t.log;if(!r)return qa.log.warn("We received no playlist to switch to. Please check your stream."),!1;var u="allowing switch "+(e&&e.id||"null")+" -> "+r.id;if(!e)return c(u+" as current playlist is not set"),!0;if(r.id===e.id)return!1;var h=Boolean(Za(i,n).length);if(!e.endList)return h||"number"!=typeof e.partTargetDuration?(c(u+" as current playlist is live"),!0):(c("not "+u+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var d=ro(i,n),p=l?ll.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ll.MAX_BUFFER_LOW_WATER_LINE;if(o<p)return c(u+" as duration < max low water line ("+o+" < "+p+")"),!0;var f=r.attributes.BANDWIDTH,m=e.attributes.BANDWIDTH;if(f<m&&(!l||d<a)){var g=u+" as next bandwidth < current bandwidth ("+f+" < "+m+")";return l&&(g+=" and forwardBuffer < bufferHighWaterLine ("+d+" < "+a+")"),c(g),!0}if((!l||f>m)&&d>=s){var y=u+" as forwardBuffer >= bufferLowWaterLine ("+d+" >= "+s+")";return l&&(y+=" and next bandwidth > current bandwidth ("+f+" > "+m+")"),c(y),!0}return c("not "+u+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:i,currentPlaylist:e,nextPlaylist:t,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){t.checkABR_("bandwidthupdate"),t.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){t.experimentalBufferBasedABR&&t.mainSegmentLoader_.load()})),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",(function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){t.logger_("main segment loader ended"),t.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(e){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var e=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var e=t.getCodecsOrExclude_();e&&t.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()}))},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},i.fastQualityChange_=function(t){var e=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){qa.browser.IE_VERSION||qa.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}},i.setupFirstPlay=function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){var i=this.seekable();if(!i.length)return!1;if(qa.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){t.trigger("firstplay"),t.tech_.setCurrentTime(i.end(0)),t.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,(function(t){}))}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var e=this.duration();t[t.length-1].endTime=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var e=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!e||e.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.duration());if(null===e)return!1;var i=Ql.Playlist.playlistEnd(t,e),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=Qa;var s=r.end(r.length-1);return s-n<=Qa&&i-s<=Qa},i.blacklistCurrentPlaylist=function(t,e){void 0===t&&(t={});var i=t.playlist||this.masterPlaylistLoader_.media();if(e=e||t.blacklistDuration||this.blacklistDuration,!i)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));i.playlistErrors_++;var n,r=this.masterPlaylistLoader_.master.playlists,s=r.filter(vo),a=1===s.length&&s[0]===i;if(1===r.length&&e!==1/0)return qa.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a);if(a){var o=!1;r.forEach((function(t){if(t!==i){var e=t.excludeUntil;void 0!==e&&e!==1/0&&(o=!0,delete t.excludeUntil)}})),o&&(qa.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}n=i.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*e,i.excludeUntil=n,t.reason&&(i.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var l=this.selectPlaylist();if(!l)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var c=t.internal?this.logger_:qa.log.warn,u=t.message?" "+t.message:"";c((t.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+u+" Switching to playlist "+l.id+"."),l.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var h=l.targetDuration/2*1e3||5e3,d="number"==typeof l.lastRequest&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||d)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(t,e){var i=this,n=[],r="all"===t;(r||"main"===t)&&n.push(this.masterPlaylistLoader_);var s=[];(r||"audio"===t)&&s.push("AUDIO"),(r||"subtitle"===t)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach((function(t){var e=i.mediaTypes_[t]&&i.mediaTypes_[t].activePlaylistLoader;e&&n.push(e)})),["main","audio","subtitle"].forEach((function(e){var r=i[e+"SegmentLoader_"];!r||t!==e&&"all"!==t||n.push(r)})),n.forEach((function(t){return e.forEach((function(e){"function"==typeof t[e]&&t[e]()}))}))},i.setCurrentTime=function(t){var e=Za(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Ql.Playlist.duration(t):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var e=this.masterPlaylistLoader_.media();if(e){var i=this.syncController_.getExpiredTime(e,this.duration());if(null!==i){var n=this.masterPlaylistLoader_.master,r=Ql.Playlist.seekable(e,i,Ql.Playlist.liveEdgeDelay(n,e));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(e=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(e,this.duration())))return;if(0===(t=Ql.Playlist.seekable(e,i,Ql.Playlist.liveEdgeDelay(n,e))).length)return}var s,a;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>r.end(0)||r.start(0)>t.end(0)?this.seekable_=r:this.seekable_=qa.createTimeRanges([[t.start(0)>r.start(0)?t.start(0):r.start(0),t.end(0)<r.end(0)?t.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+eo(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var e=this.seekable();if(!e.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1))}else{var i=this.tech_.buffered(),n=Ql.Playlist.duration(this.masterPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},i.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(e){var i=t.mediaTypes_[e].groups;for(var n in i)i[n].forEach((function(t){t.playlistLoader&&t.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,e=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!e||!i)},i.getCodecsOrExclude_=function(){var t=this,e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;var n=Ml(this.master(),i),r={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=n.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(r.video+=","+(n.audio||e.main.audioCodec||K)),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(r.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||K,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),r.audio||r.video){var a,o={};if(["video","audio"].forEach((function(t){if(r.hasOwnProperty(t)&&(n=e[t].isFmp4,s=r[t],!(n?z(s):G(s)))){var i=e[t].isFmp4?"browser":"muxer";o[i]=o[i]||[],o[i].push(r[t]),"audio"===t&&(a=i)}var n,s})),s&&a&&i.attributes.AUDIO){var l=i.attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===l&&t!==i&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+l+" as "+a+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var c=[];if(["video","audio"].forEach((function(e){var i=(H(t.sourceUpdater_.codecs[e]||"")[0]||{}).type,n=(H(r[e]||"")[0]||{}).type;i&&n&&i.toLowerCase()!==n.toLowerCase()&&c.push('"'+t.sourceUpdater_.codecs[e]+'" -> "'+r[e]+'"')})),c.length)return void this.blacklistCurrentPlaylist({playlist:i,message:"Codec switching not supported: "+c.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var u=Object.keys(o).reduce((function(t,e){return t&&(t+=", "),t+(e+' does not support codec(s): "')+o[e].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:i,internal:!0,message:u,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:i,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var e=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(e)}}},i.excludeUnsupportedVariants_=function(){var t=this,e=this.master().playlists,i=[];Object.keys(e).forEach((function(n){var r=e[n];if(-1===i.indexOf(r.id)){i.push(r.id);var s=Ml(t.master,r),a=[];!s.audio||G(s.audio)||z(s.audio)||a.push("audio codec "+s.audio),!s.video||G(s.video)||z(s.video)||a.push("video codec "+s.video),s.text&&"stpp.ttml.im1t"===s.text&&a.push("text codec "+s.text),a.length&&(r.excludeUntil=1/0,t.logger_("excluding "+r.id+" for unsupported: "+a.join(", ")))}}))},i.excludeIncompatibleVariants_=function(t){var e=this,i=[],n=this.master().playlists,r=Ol(H(t)),s=Dl(r),a=r.video&&H(r.video)[0]||null,o=r.audio&&H(r.audio)[0]||null;Object.keys(n).forEach((function(t){var r=n[t];if(-1===i.indexOf(r.id)&&r.excludeUntil!==1/0){i.push(r.id);var l=[],c=Ml(e.masterPlaylistLoader_.master,r),u=Dl(c);if(c.audio||c.video){if(u!==s&&l.push('codec count "'+u+'" !== "'+s+'"'),!e.sourceUpdater_.canChangeType()){var h=c.video&&H(c.video)[0]||null,d=c.audio&&H(c.audio)[0]||null;h&&a&&h.type.toLowerCase()!==a.type.toLowerCase()&&l.push('video codec "'+h.type+'" !== "'+a.type+'"'),d&&o&&d.type.toLowerCase()!==o.type.toLowerCase()&&l.push('audio codec "'+d.type+'" !== "'+o.type+'"')}l.length&&(r.excludeUntil=1/0,e.logger_("blacklisting "+r.id+": "+l.join(" && ")))}}}))},i.updateAdCues_=function(t){var e=0,i=this.seekable();i.length&&(e=i.start(0)),function(t,e,i){if(void 0===i&&(i=0),t.segments)for(var n,s=i,a=0;a<t.segments.length;a++){var o=t.segments[a];if(n||(n=bc(e,s+o.duration/2)),n){if("cueIn"in o){n.endTime=s,n.adEndTime=s,s+=o.duration,n=null;continue}if(s<n.endTime){s+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&((n=new(r().VTTCue)(s,s+o.duration,o.cueOut)).adStartTime=s,n.adEndTime=s+parseFloat(o.cueOut),e.addCue(n)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),c=l[0],u=l[1];(n=new(r().VTTCue)(s,s+o.duration,"")).adStartTime=s-c,n.adEndTime=n.adStartTime+u,e.addCue(n)}s+=o.duration}}(t,this.cueTagsTrack_,e)},i.goalBufferLength=function(){var t=this.tech_.currentTime(),e=ll.GOAL_BUFFER_LENGTH,i=ll.GOAL_BUFFER_LENGTH_RATE,n=Math.max(e,ll.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*i,n)},i.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),e=ll.BUFFER_LOW_WATER_LINE,i=ll.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(e,ll.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(e,ll.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*i,this.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=function(){return ll.BUFFER_HIGH_WATER_LINE},e}(qa.EventTarget),Bc=function(t,e,i){var n,r,s,a=t.masterPlaylistController_,o=a[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(a);if(e.attributes){var l=e.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=e.attributes.BANDWIDTH,this.frameRate=e.attributes["FRAME-RATE"]}this.codecs=Ml(a.master(),e),this.playlist=e,this.id=i,this.enabled=(n=t.playlists,r=e.id,s=o,function(t){var e=n.master.playlists[r],i=yo(e),a=vo(e);return void 0===t?a:(t?delete e.disabled:e.disabled=!0,t===a||i||(s(),t?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),t)})},Fc=["seeking","seeked","pause","playing","error"],$c=function(){function t(t){var e=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ya("PlaybackWatcher"),this.logger_("initialize");var i=function(){return e.monitorCurrentTime_()},n=function(){return e.monitorCurrentTime_()},s=function(){return e.techWaiting_()},a=function(){return e.cancelTimer_()},o=this.masterPlaylistController_,l=["main","subtitle","audio"],c={};l.forEach((function(t){c[t]={reset:function(){return e.resetSegmentDownloads_(t)},updateend:function(){return e.checkSegmentDownloads_(t)}},o[t+"SegmentLoader_"].on("appendsdone",c[t].updateend),o[t+"SegmentLoader_"].on("playlistupdate",c[t].reset),e.tech_.on(["seeked","seeking"],c[t].reset)}));var u=function(t){["main","audio"].forEach((function(i){o[i+"SegmentLoader_"][t]("appended",e.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){e.fixesBadSeeks_()&&(e.consecutiveUpdates=0,e.lastRecordedTime=e.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=function(){return u("off")},this.watchForBadSeeking_=function(){e.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(Fc,a),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=function(){e.clearSeekingAppendCheck_(),e.logger_("dispose"),e.tech_.off("waiting",s),e.tech_.off(Fc,a),e.tech_.off("canplay",n),e.tech_.off("play",i),e.tech_.off("seeking",e.watchForBadSeeking_),e.tech_.off("seeked",e.clearSeekingAppendCheck_),l.forEach((function(t){o[t+"SegmentLoader_"].off("appendsdone",c[t].updateend),o[t+"SegmentLoader_"].off("playlistupdate",c[t].reset),e.tech_.off(["seeked","seeking"],c[t].reset)})),e.checkCurrentTimeTimeout_&&r().clearTimeout(e.checkCurrentTimeTimeout_),e.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&r().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=r().setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(t){var e=this.masterPlaylistController_[t+"SegmentLoader_"];this[t+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+t+" loader"),this[t+"StalledDownloads_"]=0,this[t+"Buffered_"]=e.buffered_()},e.checkSegmentDownloads_=function(t){var e=this.masterPlaylistController_,i=e[t+"SegmentLoader_"],n=i.buffered_(),r=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t)return!0;if(t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1}(this[t+"Buffered_"],n);this[t+"Buffered_"]=n,r?this.resetSegmentDownloads_(t):(this[t+"StalledDownloads_"]++,this.logger_("found #"+this[t+"StalledDownloads_"]+" "+t+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:io(n)}),this[t+"StalledDownloads_"]<10||(this.logger_(t+" loader stalled download exclusion"),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:"vhs-"+t+"-download-exclusion"}),"subtitle"!==t&&e.blacklistCurrentPlaylist({message:"Excessive "+t+" segment downloading detected."},1/0)))},e.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+Qa>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var t,e=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(e,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(t=e.end(e.length-1)),this.beforeSeekableWindow_(e,i)){var n=e.start(0);t=n+(n===e.end(0)?0:Qa)}if(void 0!==t)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+eo(e)+". Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0;for(var r=this.masterPlaylistController_.sourceUpdater_,s=this.tech_.buffered(),a=r.audioBuffer?r.audioBuffered():null,o=r.videoBuffer?r.videoBuffered():null,l=this.media(),c=l.partTargetDuration?l.partTargetDuration:2*(l.targetDuration-Xa),u=[a,o],h=0;h<u.length;h++)if(u[h]&&ro(u[h],i)<c)return!1;var d=to(s,i);return 0!==d.length&&(t=d.start(0)+Qa,this.logger_("Buffered region starts ("+d.start(0)+")  just beyond seek point ("+i+"). Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0)},e.waiting_=function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=this.tech_.buffered(),i=Za(e,t);return i.length&&t+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},e.techWaiting_=function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var i=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:e}))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var s=to(r,e);if(s.length>0){var a=s.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+a+", seeking to "+s.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,e),!0}return!1},e.afterSeekableWindow_=function(t,e,i,n){if(void 0===n&&(n=!1),!t.length)return!1;var r=t.end(t.length-1)+Qa;return!i.endList&&n&&(r=t.end(t.length-1)+3*i.targetDuration),e>r},e.beforeSeekableWindow_=function(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(t){var e=t.videoBuffered,i=t.audioBuffered,n=t.currentTime;if(e){var r;if(e.length&&i.length){var s=Za(e,n-3),a=Za(e,n),o=Za(i,n);o.length&&!a.length&&s.length&&(r={start:s.end(0),end:o.end(0)})}else to(e,n).length||(r=this.gapFromVideoUnderflow_(e,n));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},e.skipTheGap_=function(t){var e=this.tech_.buffered(),i=this.tech_.currentTime(),n=to(e,i);this.cancelTimer_(),0!==n.length&&i===t&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Xa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(t,e){for(var i=function(t){if(t.length<2)return qa.createTimeRanges();for(var e=[],i=1;i<t.length;i++){var n=t.end(i-1),r=t.start(i);e.push([n,r])}return qa.createTimeRanges(e)}(t),n=0;n<i.length;n++){var r=i.start(n),s=i.end(n);if(e-r<4&&e-r>2)return{start:r,end:s}}return null},t}(),Uc={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},jc=function t(e,i){var n=0,r=0,s=qa.mergeOptions(Uc,i);e.ready((function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var a=function(){r&&e.currentTime(r)},o=function(t){null!=t&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){return Date.now()-n<1e3*s.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(n=Date.now(),s.getSource.call(e,o)):void qa.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},c=function t(){e.off("loadedmetadata",a),e.off("error",l),e.off("dispose",t)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=function(i){c(),t(e,i)}},Vc="2.16.2",Hc={PlaylistLoader:$o,Playlist:xo,utils:Jo,STANDARD_PLAYLIST_SELECTOR:jl,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,e=this.playlists.master.playlists.filter(xo.isEnabled);return Fl(e,(function(t,e){return $l(t,e)})),e.filter((function(e){return!!Ml(t.playlists.master,e).video}))[0]||null},lastBandwidthSelector:jl,movingAverageBandwidthSelector:function(t){var e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&r().devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),Ul(this.playlists.master,e,parseInt(Bl(this.tech_.el(),"width"),10)*n,parseInt(Bl(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:$l,comparePlaylistResolution:function(t,e){var i,n;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||r().Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),i===(n=n||r().Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n},xhr:Ho()};Object.keys(ll).forEach((function(t){Object.defineProperty(Hc,t,{get:function(){return qa.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),ll[t]},set:function(e){qa.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?qa.log.warn("value of Vhs."+t+" must be greater than or equal to 0"):ll[t]=e}})}));var qc="videojs-vhs",Wc=function(t,e){for(var i=e.media(),n=-1,r=0;r<t.length;r++)if(t[r].id===i.id){n=r;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})};Hc.canPlaySource=function(){return qa.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var zc=function(){if(!r().localStorage)return null;var t=r().localStorage.getItem(qc);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}};Hc.supportsNativeHls=function(){if(!a()||!a().createElement)return!1;var t=a().createElement("video");return!!qa.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(e){return/maybe|probably/i.test(t.canPlayType(e))}))}(),Hc.supportsNativeDash=!!(a()&&a().createElement&&qa.getTech("Html5").isSupported())&&/maybe|probably/i.test(a().createElement("video").canPlayType("application/dash+xml")),Hc.supportsTypeNatively=function(t){return"hls"===t?Hc.supportsNativeHls:"dash"===t&&Hc.supportsNativeDash},Hc.isSupported=function(){return qa.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Gc=function(t){function e(e,i,n){var r;if(r=t.call(this,i,qa.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&qa.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof n.initialBandwidth&&(r.options_.bandwidth=n.initialBandwidth),r.logger_=Ya("VhsHandler"),i.options_&&i.options_.playerId){var s=qa(i.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return qa.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),u(r)},configurable:!0}),s.hasOwnProperty("vhs")||Object.defineProperty(s,"vhs",{get:function(){return qa.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),u(r)},configurable:!0}),s.hasOwnProperty("dash")||Object.defineProperty(s,"dash",{get:function(){return qa.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),u(r)},configurable:!0}),r.player_=s}if(r.tech_=i,r.source_=e,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(a(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(t){var e=a().fullscreenElement||a().webkitFullscreenElement||a().mozFullScreenElement||a().msFullscreenElement;e&&e.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}d(e,t);var i=e.prototype;return i.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=zc();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=ll.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ll.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(t,e){var i=this;if(t){var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=Hc,this.options_.sourceType=Q(e),this.options_.seekTo=function(t){i.tech_.setCurrentTime(t)},this.options_.smoothQualityChange&&qa.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Nc(this.options_);var s=qa.mergeOptions({liveRangeSafeTimeDelta:Qa},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new $c(s),this.masterPlaylistController_.on("error",(function(){var t=qa.players[i.tech_.options_.playerId],e=i.masterPlaylistController_.error;"object"!=typeof e||e.code?"string"==typeof e&&(e={message:e,code:3}):e.code=3,t.error(e)}));var a=this.options_.experimentalBufferBasedABR?Hc.movingAverageBandwidthSelector(.55):Hc.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Hc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var t=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,e=r().navigator.connection||r().navigator.mozConnection||r().navigator.webkitConnection,i=1e7;if(this.options_.useNetworkInformationApi&&e){var n=1e3*e.downlink*1e3;t=n>=i&&t>=i?Math.max(t,n):n}return t},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t,e=1/(this.bandwidth||1);return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){qa.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return i.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return i.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return i.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return io(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return io(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){i.options_.useBandwidthFromLocalStorage&&function(t){if(!r().localStorage)return!1;var e=zc();e=e?qa.mergeOptions(e,t):t;try{r().localStorage.setItem(qc,JSON.stringify(e))}catch(t){return!1}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t;(t=i).representations=function(){var e=t.masterPlaylistController_.master(),i=So(e)?t.masterPlaylistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter((function(t){return!yo(t)})).map((function(e,i){return new Bc(t,e,e.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){i.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=r().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var t=this,e=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(t){var e=t.player,i=t.sourceKeySystems,n=t.audioMedia,r=t.mainPlaylists;if(!e.eme.initializeMediaKeys)return Promise.resolve();var s,a,o=(s=n?r.concat([n]):r,a=Object.keys(i),s.reduce((function(t,e){if(!e.contentProtection)return t;var i=a.reduce((function(t,i){var n=e.contentProtection[i];return n&&n.pssh&&(t[i]={pssh:n.pssh}),t}),{});return Object.keys(i).length&&t.push(i),t}),[])),l=[],c=[];return o.forEach((function(t){c.push(new Promise((function(t,i){e.tech_.one("keysessioncreated",t)}))),l.push(new Promise((function(i,n){e.eme.initializeMediaKeys({keySystems:t},(function(t){t?n(t):i()}))})))})),Promise.race([Promise.all(l),Promise.race(c)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(e){t.logger_("error while creating EME key session",e),t.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var t,e,i,n=this,r=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=(t={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:r&&r.media()},e=t.player,!(!(i=function(t,e,i){if(!t)return t;var n={};e&&e.attributes&&e.attributes.CODECS&&(n=Ol(H(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);var r=W(n.video),s=W(n.audio),a={};for(var o in t)a[o]={},s&&(a[o].audioContentType=s),r&&(a[o].videoContentType=r),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),"string"==typeof t[o]&&(a[o].url=t[o]);return qa.mergeOptions(t,a)}(t.sourceKeySystems,t.media,t.audioMedia))||(e.currentSource().keySystems=i,i&&!e.eme&&(qa.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",(function(t){if("output-restricted"===t.status){var e=n.masterPlaylistController_.master();if(e&&e.playlists){var i,r=[];e.playlists.forEach((function(t){t&&t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height>=720&&(!t.excludeUntil||t.excludeUntil<1/0)&&(t.excludeUntil=1/0,r.push(t))})),r.length&&((i=qa.log).warn.apply(i,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(r)),n.masterPlaylistController_.fastQualityChange_())}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==qa.browser.IE_VERSION&&s?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var t=this,e=qa.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,i;e=t.qualityLevels_,(i=t).representations().forEach((function(t){e.addQualityLevel(t)})),Wc(e,i.playlists)})),this.playlists.on("mediachange",(function(){Wc(t.qualityLevels_,t.playlists)})))},e.version=function(){return{"@videojs/http-streaming":Vc,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return fc.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&r().URL.revokeObjectURL&&(r().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),t.prototype.dispose.call(this)},i.convertToProgramTime=function(t,e){return function(t){var e=t.playlist,i=t.time,n=void 0===i?void 0:i,r=t.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var s=function(t,e){if(!e||!e.segments||0===e.segments.length)return null;for(var i,n=0,r=0;r<e.segments.length&&!(t<=(n=(i=e.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+.25*s.duration)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,e);if(!s)return r({message:"valid programTime was not found"});if("estimate"===s.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var a={mediaSeconds:n},o=function(t,e){if(!e.dateTimeObject)return null;var i=e.videoTimingInfo.transmuxerPrependedSeconds,n=t-(e.videoTimingInfo.transmuxedPresentationStart+i);return new Date(e.dateTimeObject.getTime()+1e3*n)}(n,s.segment);return o&&(a.programDateTime=o.toISOString()),r(null,a)}({playlist:this.masterPlaylistController_.media(),time:t,callback:e})},i.seekToProgramTime=function(t,e,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),Zo({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})},e}(qa.getComponent("Component")),Kc={name:"videojs-http-streaming",VERSION:Vc,canHandleSource:function(t,e){void 0===e&&(e={});var i=qa.mergeOptions(qa.options,e);return Kc.canPlayType(t.type,i)},handleSource:function(t,e,i){void 0===i&&(i={});var n=qa.mergeOptions(qa.options,i);return e.vhs=new Gc(t,e,n),qa.hasOwnProperty("hls")||Object.defineProperty(e,"hls",{get:function(){return qa.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),e.vhs},configurable:!0}),e.vhs.xhr=Ho(),e.vhs.src(t.src,t.type),e.vhs},canPlayType:function(t,e){var i=Q(t);if(!i)return"";var n=Kc.getOverrideNative(e);return!Hc.supportsTypeNatively(i)||n?"maybe":""},getOverrideNative:function(t){void 0===t&&(t={});var e=t,i=e.vhs,n=void 0===i?{}:i,r=e.hls,s=void 0===r?{}:r,a=!(qa.browser.IS_ANY_SAFARI||qa.browser.IS_IOS),o=n.overrideNative,l=void 0===o?a:o,c=s.overrideNative;return void 0!==c&&c||l}};z("avc1.4d400d,mp4a.40.2")&&qa.getTech("Html5").registerSourceHandler(Kc,0),qa.VhsHandler=Gc,Object.defineProperty(qa,"HlsHandler",{get:function(){return qa.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Gc},configurable:!0}),qa.VhsSourceHandler=Kc,Object.defineProperty(qa,"HlsSourceHandler",{get:function(){return qa.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Kc},configurable:!0}),qa.Vhs=Hc,Object.defineProperty(qa,"Hls",{get:function(){return qa.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Hc},configurable:!0}),qa.use||(qa.registerComponent("Hls",Hc),qa.registerComponent("Vhs",Hc)),qa.options.vhs=qa.options.vhs||{},qa.options.hls=qa.options.hls||{},qa.getPlugin&&qa.getPlugin("reloadSourceOnError")||(qa.registerPlugin||qa.plugin)("reloadSourceOnError",(function(t){jc(this,t)}));const Yc=qa},78984:function(t,e,i){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(t);class n{constructor(t){let e=this;return e.id=t.id,e.label=e.id,e.width=t.width,e.height=t.height,e.bitrate=t.bandwidth,e.frameRate=t.frameRate,e.enabled_=t.enabled,Object.defineProperty(e,"enabled",{get:()=>e.enabled_(),set(t){e.enabled_(t)}}),e}}class r extends i.default.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get:()=>t.selectedIndex_}),Object.defineProperty(t,"length",{get:()=>t.levels_.length}),t}addQualityLevel(t){let e=this.getQualityLevelById(t.id);if(e)return e;const i=this.levels_.length;return e=new n(t),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(e),this.trigger({qualityLevel:e,type:"addqualitylevel"}),e}removeQualityLevel(t){let e=null;for(let i=0,n=this.length;i<n;i++)if(this[i]===t){e=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return e&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),e}getQualityLevelById(t){for(let e=0,i=this.length;e<i;e++){const i=this[e];if(i.id===t)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}r.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in r.prototype.allowedEvents_)r.prototype["on"+t]=null;var s="3.0.0";const a=i.default.registerPlugin||i.default.plugin,o=function(t){return function(t,e){const i=t.qualityLevels,n=new r,a=function(){n.dispose(),t.qualityLevels=i,t.off("dispose",a)};return t.on("dispose",a),t.qualityLevels=()=>n,t.qualityLevels.VERSION=s,n}(this,i.default.mergeOptions({},t))};return a("qualityLevels",o),o.VERSION=s,o}(i(61928))},68390:function(t,e,i){t.exports=function(t,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=i(t),r=i(e);function s(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}var a=s((function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(i,n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),o=s((function(t){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})),l=n.default.getComponent("Component"),c=n.default.dom||n.default,u=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).seekSeconds=i.seekSeconds,n.tapTimeout=i.tapTimeout,n.addChild("playToggle",{}),e.on(["playing","userinactive"],(function(t){n.removeClass("show-play-toggle")})),0===n.player_.options_.inactivityTimeout&&(n.player_.options_.inactivityTimeout=5e3),n.enable(),n}o(e,t);var i=e.prototype;return i.createEl=function(){return c.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1})},i.handleTap=function(t){var e=this;t.target===this.el_&&(t.preventDefault(),this.firstTapCaptured?(this.firstTapCaptured=!1,this.timeout&&r.default.clearTimeout(this.timeout),this.handleDoubleTap(t)):(this.firstTapCaptured=!0,this.timeout=r.default.setTimeout((function(){e.firstTapCaptured=!1,e.handleSingleTap(t)}),this.tapTimeout)))},i.handleSingleTap=function(t){this.removeClass("skip"),this.toggleClass("show-play-toggle")},i.handleDoubleTap=function(t){var e=this,i=this.el_.getBoundingClientRect(),n=t.changedTouches[0].clientX-i.left;if(n<.4*i.width)this.player_.currentTime(Math.max(0,this.player_.currentTime()-this.seekSeconds)),this.addClass("reverse");else{if(!(n>i.width-.4*i.width))return;this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+this.seekSeconds)),this.removeClass("reverse")}this.removeClass("show-play-toggle"),this.removeClass("skip"),r.default.requestAnimationFrame((function(){e.addClass("skip")}))},i.enable=function(){this.firstTapCaptured=!1,this.on("touchend",this.handleTap)},i.disable=function(){this.off("touchend",this.handleTap)},e}(l);l.registerComponent("TouchOverlay",u);var h={fullscreen:{enterOnRotate:!0,exitOnRotate:!0,lockOnRotate:!0,lockToLandscapeOnEnter:!1,iOS:!1,disabled:!1},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1,disabled:!1}},d=r.default.screen,p=function(){if(d){var t=((d.orientation||{}).type||d.mozOrientation||d.msOrientation||"").split("-")[0];if("landscape"===t||"portrait"===t)return t}return"number"==typeof r.default.orientation?0===r.default.orientation||180===r.default.orientation?"portrait":"landscape":"portrait"},f=n.default.registerPlugin||n.default.plugin,m=function(t){var e=this;void 0===t&&(t={}),(t.forceForTesting||n.default.browser.IS_ANDROID||n.default.browser.IS_IOS)&&this.ready((function(){!function(t,e){if(t.addClass("vjs-mobile-ui"),e.fullscreen.iOS&&(n.default.log.warn("videojs-mobile-ui: `fullscreen.iOS` is deprecated. Use Video.js option `preferFullWindow` instead."),n.default.browser.IS_IOS&&n.default.browser.IOS_VERSION>9&&!t.el_.ownerDocument.querySelector(".bc-iframe")&&(t.tech_.el_.setAttribute("playsinline","playsinline"),t.tech_.supportsFullScreen=function(){return!1})),!e.touchControls.disabled){var i;(e.touchControls.disableOnEnd||"function"==typeof t.endscreen)&&t.addClass("vjs-mobile-ui-disable-end");var s=n.default.VERSION.split("."),a=parseInt(s[0],10),o=parseInt(s[1],10);i=a<7||7===a&&o<7?Array.prototype.indexOf.call(t.el_.children,t.getChild("ControlBar").el_):t.children_.indexOf(t.getChild("ControlBar")),t.touchOverlay=t.addChild("TouchOverlay",e.touchControls,i)}if(!e.fullscreen.disabled){var l=!1,c=function(){var i=p();"landscape"===i&&e.fullscreen.enterOnRotate?!1===t.paused()&&(t.requestFullscreen(),(e.fullscreen.lockOnRotate||e.fullscreen.lockToLandscapeOnEnter)&&d.orientation&&d.orientation.lock&&d.orientation.lock("landscape").then((function(){l=!0})).catch((function(t){n.default.log("Browser refused orientation lock:",t)}))):"portrait"===i&&e.fullscreen.exitOnRotate&&!l&&t.isFullscreen()&&t.exitFullscreen()};(e.fullscreen.enterOnRotate||e.fullscreen.exitOnRotate)&&(n.default.browser.IS_IOS?(r.default.addEventListener("orientationchange",c),t.on("dispose",(function(){r.default.removeEventListener("orientationchange",c)}))):d.orientation&&(d.orientation.onchange=c,t.on("dispose",(function(){d.orientation.onchange=null})))),t.on("fullscreenchange",(function(i){t.isFullscreen()&&e.fullscreen.lockToLandscapeOnEnter&&"portrait"===p()?d.orientation.lock("landscape").then((function(){l=!0})).catch((function(t){n.default.log("Browser refused orientation lock:",t)})):!t.isFullscreen()&&l&&(d.orientation.unlock(),l=!1)})),t.on("ended",(function(t){!0===l&&(d.orientation.unlock(),l=!1)}))}}(e,n.default.mergeOptions(h,t))}))};return f("mobileUi",m),m.VERSION="0.8.0",m}(i(61928),i(58908))},86453:function(t,e,i){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(t);const n={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},r=i.default.getComponent("Component"),s=i.default.dom||i.default,a=i.default.registerPlugin||i.default.plugin,o=t=>"number"==typeof t&&t==t,l=t=>"string"==typeof t&&/^\S+$/.test(t);class c extends r{constructor(t,e){super(t,e),["start","end"].forEach((t=>{const e=this.options_[t];if(o(e))this[t+"Event_"]="timeupdate";else if(l(e))this[t+"Event_"]=e;else if("start"===t)throw new Error('invalid "start" option; expected number or string')})),["endListener_","rewindListener_","startListener_"].forEach((t=>{this[t]=e=>c.prototype[t].call(this,e)})),"timeupdate"===this.startEvent_&&this.on(t,"timeupdate",this.rewindListener_),this.debug(`created, listening to "${this.startEvent_}" for "start" and "${this.endEvent_||"nothing"}" for "end"`),this.hide()}createEl(){const t=this.options_,e=t.content,i=t.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",n=s.createEl("div",{className:`\n        vjs-overlay\n        vjs-overlay-${t.align}\n        ${t.class}\n        ${i}\n        vjs-hidden\n      `});return"string"==typeof e?n.innerHTML=e:e instanceof window.DocumentFragment?n.appendChild(e):s.appendContent(n,e),n}debug(...t){if(!this.options_.debug)return;const e=i.default.log;let n=e;e.hasOwnProperty(t[0])&&"function"==typeof e[t[0]]&&(n=e[t.shift()]),n(`overlay#${this.id()}: `,...t)}hide(){return super.hide(),this.debug("hidden"),this.debug(`bound \`startListener_\` to "${this.startEvent_}"`),this.endEvent_&&(this.debug(`unbound \`endListener_\` from "${this.endEvent_}"`),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this}shouldHide_(t,e){const i=this.options_.end;return o(i)?t>=i:i===e}show(){return super.show(),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug(`unbound \`startListener_\` from "${this.startEvent_}"`),this.endEvent_&&(this.debug(`bound \`endListener_\` to "${this.endEvent_}"`),this.on(this.player(),this.endEvent_,this.endListener_)),this}shouldShow_(t,e){const i=this.options_.start,n=this.options_.end;return o(i)?o(n)?t>=i&&t<n:this.hasShownSinceSeek_?Math.floor(t)===i:(this.hasShownSinceSeek_=!0,t>=i):i===e}startListener_(t){const e=this.player().currentTime();this.shouldShow_(e,t.type)&&this.show()}endListener_(t){const e=this.player().currentTime();this.shouldHide_(e,t.type)&&this.hide()}rewindListener_(t){const e=this.player().currentTime(),i=this.previousTime_,n=this.options_.start,r=this.options_.end;e<i&&(this.debug("rewind detected"),o(r)&&!this.shouldShow_(e)?(this.debug(`hiding; ${r} is an integer and overlay should not show at this time`),this.hasShownSinceSeek_=!1,this.hide()):l(r)&&e<n&&(this.debug(`hiding; show point (${n}) is before now (${e}) and end point (${r}) is an event`),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=e}}i.default.registerComponent("Overlay",c);const u=function(t){const e=i.default.mergeOptions(n,t);Array.isArray(this.overlays_)&&this.overlays_.forEach((t=>{this.removeChild(t),this.controlBar&&this.controlBar.removeChild(t),t.dispose()}));const r=e.overlays;delete e.overlays,this.overlays_=r.map((t=>{const n=i.default.mergeOptions(e,t),r="string"==typeof n.attachToControlBar||!0===n.attachToControlBar;if(!this.controls()||!this.controlBar)return this.addChild("overlay",n);if(r&&-1!==n.align.indexOf("bottom")){let t=this.controlBar.children()[0];if(void 0!==this.controlBar.getChild(n.attachToControlBar)&&(t=this.controlBar.getChild(n.attachToControlBar)),t){const e=this.controlBar.children().indexOf(t);return this.controlBar.addChild("overlay",n,e)}}const s=this.addChild("overlay",n);return this.el().insertBefore(s.el(),this.controlBar.el()),s}))};return u.VERSION="3.0.0",a("overlay",u),u}(i(46412))},97976:(t,e)=>{function i(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var i,s=String(t);return(i=n[s.toLowerCase()])?i:(i=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}i.isEventKey=function(t,e){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;if(null==i)return!1;if("string"==typeof e){var s;if(s=n[e.toLowerCase()])return s===i;if(s=r[e.toLowerCase()])return s===i}else if("number"==typeof e)return e===i;return!1}};var n=(e=t.exports=i).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(s=97;s<123;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)n[s-48]=s;for(s=1;s<13;s++)n["f"+s]=s+111;for(s=0;s<10;s++)n["numpad "+s]=s+96;var a=e.names=e.title={};for(s in n)a[n[s]]=s;for(var o in r)n[o]=r[o]},29217:(t,e,i)=>{var n=i(5909).getUint64;t.exports=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;0===i.version?(i.earliestPresentationTime=e.getUint32(r),i.firstOffset=e.getUint32(r+4),r+=8):(i.earliestPresentationTime=n(t.subarray(r)),i.firstOffset=n(t.subarray(r+8)),r+=16),r+=2;var s=e.getUint16(r);for(r+=2;s>0;r+=12,s--)i.references.push({referenceType:(128&t[r])>>>7,referencedSize:2147483647&e.getUint32(r),subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(128&t[r+8]),sapType:(112&t[r+8])>>>4,sapDeltaTime:268435455&e.getUint32(r+8)});return i}},25274:t=>{var e,i,n,r,s,a,o,l=9e4;e=function(t){return t*l},i=function(t,e){return t*e},n=function(t){return t/l},r=function(t,e){return t/e},s=function(t,i){return e(r(t,i))},a=function(t,e){return i(n(t),e)},o=function(t,e,i){return n(i?t:t-e)},t.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:e,secondsToAudioTs:i,videoTsToSeconds:n,audioTsToSeconds:r,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o}},5909:t=>{var e=Math.pow(2,32);t.exports={getUint64:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getBigUint64?(i=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(i):i:n.getUint32(0)*e+n.getUint32(4)},MAX_UINT32:e}},46412:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>pa});var n=i(58908),r=i.n(n),s=i(89144),a=i.n(s),o=i(97976),l=i.n(o),c=i(75974),u=i.n(c),h=i(9603),d=i.n(h),p=i(13407),f=i.n(p),m=i(49945),g=i.n(m),y="http://example.com";var v=i(87462),b=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=e.length,a=0;a<s;++a)e[a].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}(),_=i(48764).lW,w=function(t){return r().atob?r().atob(t):_.from(t,"base64").toString("binary")};function T(t){for(var e=w(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}class S extends b{constructor(){super(),this.buffer=""}push(t){let e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}const x=String.fromCharCode(9),k=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},C=function(t){const e={};if(!t)return e;const i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let n,r=i.length;for(;r--;)""!==i[r]&&(n=/([^=]*)=(.*)/.exec(i[r]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e};class E extends b{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let e,i;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(((e,i)=>{const n=i(t);return n===t?e:e.concat([n])}),[t]).forEach((t=>{for(let e=0;e<this.customParsers.length;e++)if(this.customParsers[e].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t),e)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(t),e)return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-VERSION:([0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void this.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:(.*)?$/.exec(t),e)return i=(0,v.Z)(k(e[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(t),e)return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-MAP:(.*)$/.exec(t),e){if(i={type:"tag",tagType:"map"},e[1]){const t=C(e[1]);t.URI&&(i.uri=t.URI),t.BYTERANGE&&(i.byterange=k(t.BYTERANGE))}this.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:(.*)$/.exec(t),e){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=C(e[1]),i.attributes.RESOLUTION){const t=i.attributes.RESOLUTION.split("x"),e={};t[0]&&(e.width=parseInt(t[0],10)),t[1]&&(e.height=parseInt(t[1],10)),i.attributes.RESOLUTION=e}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:(.*)$/.exec(t),e)return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=C(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t),e)this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t),e)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(t),e)return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-KEY:(.*)$/.exec(t),e)return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=C(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(e=/^#EXT-X-START:(.*)$/.exec(t),e)return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=C(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-IN:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-SKIP:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"skip"},i.attributes=C(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(x)),void this.trigger("data",i);if(e=/^#EXT-X-PART:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"part"},i.attributes=C(e[1]),["DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=k(i.attributes.BYTERANGE)),void this.trigger("data",i);if(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"server-control"},i.attributes=C(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),void this.trigger("data",i);if(e=/^#EXT-X-PART-INF:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"part-inf"},i.attributes=C(e[1]),["PART-TARGET"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),void this.trigger("data",i);if(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"preload-hint"},i.attributes=C(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(i.attributes.hasOwnProperty(t)){i.attributes[t]=parseInt(i.attributes[t],10);const e="BYTERANGE-LENGTH"===t?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[e]=i.attributes[t],delete i.attributes[t]}})),void this.trigger("data",i);if(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"rendition-report"},i.attributes=C(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseInt(i.attributes[t],10))})),void this.trigger("data",i);this.trigger("data",{type:"tag",data:t.slice(4)})}}}else this.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))}addParser({expression:t,customType:e,dataParser:i,segment:n}){"function"!=typeof i&&(i=t=>t),this.customParsers.push((r=>{if(t.exec(r))return this.trigger("data",{type:"custom",data:i(r),customType:e,segment:n}),!0}))}addTagMapper({expression:t,map:e}){this.tagMappers.push((i=>t.test(i)?e(i):i))}}const I=function(t){const e={};return Object.keys(t).forEach((function(i){var n;e[(n=i,n.toLowerCase().replace(/-(\w)/g,(t=>t[1].toUpperCase())))]=t[i]})),e},P=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:n}=t;if(!e)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=i&&3*i,l=n&&2*n;i&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),n&&!e.hasOwnProperty(a)&&(e[a]=3*n,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<l&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class A extends b{constructor(){super(),this.lineStream=new S,this.parseStream=new E,this.lineStream.pipe(this.parseStream);const t=this,e=[];let i,n,r={},s=!1;const a=function(){},o={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let l=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let c=0,u=0;this.on("end",(()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&n&&(r.key=n),r.timeline||"number"!=typeof l||(r.timeline=l),this.manifest.preloadSegment=r)})),this.parseStream.on("data",(function(h){let d,p;({tag(){({version(){h.version&&(this.manifest.version=h.version)},"allow-cache"(){this.manifest.allowCache=h.allowed,"allowed"in h||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const t={};"length"in h&&(r.byterange=t,t.length=h.length,"offset"in h||(h.offset=c)),"offset"in h&&(r.byterange=t,t.offset=h.offset),c=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),h.duration>0&&(r.duration=h.duration),0===h.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=e},key(){if(h.attributes)if("NONE"!==h.attributes.METHOD)if(h.attributes.URI){if("com.apple.streamingkeydelivery"===h.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:h.attributes});if("com.microsoft.playready"===h.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:h.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===h.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(h.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===h.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==h.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):h.attributes.KEYID&&"0x"===h.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:h.attributes.KEYFORMAT,keyId:h.attributes.KEYID.substring(2)},pssh:T(h.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));h.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:h.attributes.METHOD||"AES-128",uri:h.attributes.URI},void 0!==h.attributes.IV&&(n.iv=h.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(h.number)?this.manifest.mediaSequence=h.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+h.number})},"discontinuity-sequence"(){isFinite(h.number)?(this.manifest.discontinuitySequence=h.number,l=h.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+h.number})},"playlist-type"(){/VOD|EVENT/.test(h.playlistType)?this.manifest.playlistType=h.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+h.playlist})},map(){i={},h.uri&&(i.uri=h.uri),h.byterange&&(i.byterange=h.byterange),n&&(i.key=n)},"stream-inf"(){this.manifest.playlists=e,this.manifest.mediaGroups=this.manifest.mediaGroups||o,h.attributes?(r.attributes||(r.attributes={}),(0,v.Z)(r.attributes,h.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||o,!(h.attributes&&h.attributes.TYPE&&h.attributes["GROUP-ID"]&&h.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const t=this.manifest.mediaGroups[h.attributes.TYPE];t[h.attributes["GROUP-ID"]]=t[h.attributes["GROUP-ID"]]||{},d=t[h.attributes["GROUP-ID"]],p={default:/yes/i.test(h.attributes.DEFAULT)},p.default?p.autoselect=!0:p.autoselect=/yes/i.test(h.attributes.AUTOSELECT),h.attributes.LANGUAGE&&(p.language=h.attributes.LANGUAGE),h.attributes.URI&&(p.uri=h.attributes.URI),h.attributes["INSTREAM-ID"]&&(p.instreamId=h.attributes["INSTREAM-ID"]),h.attributes.CHARACTERISTICS&&(p.characteristics=h.attributes.CHARACTERISTICS),h.attributes.FORCED&&(p.forced=/yes/i.test(h.attributes.FORCED)),d[h.attributes.NAME]=p},discontinuity(){l+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(e.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=h.dateTimeString,this.manifest.dateTimeObject=h.dateTimeObject),r.dateTimeString=h.dateTimeString,r.dateTimeObject=h.dateTimeObject},targetduration(){!isFinite(h.duration)||h.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+h.duration}):(this.manifest.targetDuration=h.duration,P.call(this,this.manifest))},start(){h.attributes&&!isNaN(h.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:h.attributes["TIME-OFFSET"],precise:h.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=h.data},"cue-out-cont"(){r.cueOutCont=h.data},"cue-in"(){r.cueIn=h.data},skip(){this.manifest.skip=I(h.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",h.attributes,["SKIPPED-SEGMENTS"])},part(){s=!0;const t=this.manifest.segments.length,e=I(h.attributes);r.parts=r.parts||[],r.parts.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=u),u=e.byterange.offset+e.byterange.length);const i=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${i} for segment #${t}`,h.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((t,e)=>{t.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${e} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const t=this.manifest.serverControl=I(h.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),P.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const t=this.manifest.segments.length,e=I(h.attributes),i=e.type&&"PART"===e.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=i?u:0,i&&(u=e.byterange.offset+e.byterange.length)));const n=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${n} for segment #${t}`,h.attributes,["TYPE","URI"]),e.type)for(let i=0;i<r.preloadHints.length-1;i++){const s=r.preloadHints[i];s.type&&s.type===e.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${n} for segment #${t} has the same TYPE ${e.type} as preload hint #${i}`})}},"rendition-report"(){const t=I(h.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);const e=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];s&&i.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${e}`,h.attributes,i)},"part-inf"(){this.manifest.partInf=I(h.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",h.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),P.call(this,this.manifest)}}[h.tagType]||a).call(t)},uri(){r.uri=h.uri,e.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),n&&(r.key=n),r.timeline=l,i&&(r.map=i),u=0,r={}},comment(){},custom(){h.segment?(r.custom=r.custom||{},r.custom[h.customType]=h.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[h.customType]=h.data)}})[h.type].call(t)}))}warnOnMissingAttributes_(t,e,i){const n=[];i.forEach((function(t){e.hasOwnProperty(t)||n.push(t)})),n.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${n.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}var L,O,D={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},M=["video","audio","text"],R=["Video","Audio","Text"],N=function(t){return t?t.replace(/avc1\.(\d+)\.(\d+)/i,(function(t,e,i){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})):t},B=function(t){void 0===t&&(t="");var e=t.split(","),i=[];return e.forEach((function(t){var e;t=t.trim(),M.forEach((function(n){var r=D[n].exec(t.toLowerCase());if(r&&!(r.length<=1)){e=n;var s=t.substring(0,r[1].length),a=t.replace(s,"");i.push({type:s,details:a,mediaType:n})}})),e||i.push({type:t,details:"",mediaType:"unknown"})})),i},F=function(t){return void 0===t&&(t=""),D.audio.test(t.trim().toLowerCase())},$=function(t){if(t&&"string"==typeof t){var e,i=t.toLowerCase().split(",").map((function(t){return N(t.trim())})),n="video";1===i.length&&F(i[0])?n="audio":1===i.length&&(void 0===(e=i[0])&&(e=""),D.text.test(e.trim().toLowerCase()))&&(n="application");var r="mp4";return i.every((function(t){return D.mp4.test(t)}))?r="mp4":i.every((function(t){return D.webm.test(t)}))?r="webm":i.every((function(t){return D.ogg.test(t)}))&&(r="ogg"),n+"/"+r+';codecs="'+t+'"'}},U=function(t){return void 0===t&&(t=""),r().MediaSource&&r().MediaSource.isTypeSupported&&r().MediaSource.isTypeSupported($(t))||!1},j=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every((function(t){t=t.trim();for(var e=0;e<R.length;e++)if(D["muxer"+R[e]].test(t))return!0;return!1}))},V="mp4a.40.2",H=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,q=/^application\/dash\+xml/i,W=function(t){return H.test(t)?"hls":q.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null},z=function(t){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},G=function(t){return t instanceof Uint8Array?t:(Array.isArray(t)||z(t)||t instanceof ArrayBuffer||(t="number"!=typeof t||"number"==typeof t&&t!=t?0:[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},K=r().BigInt||Number,Y=[K("0x1"),K("0x100"),K("0x10000"),K("0x1000000"),K("0x100000000"),K("0x10000000000"),K("0x1000000000000"),K("0x100000000000000"),K("0x10000000000000000")],X=(L=new Uint16Array([65484]),255===(O=new Uint8Array(L.buffer,L.byteOffset,L.byteLength))[0]||O[0],function(t,e){var i=void 0===e?{}:e,n=i.signed,r=void 0!==n&&n,s=i.le,a=void 0!==s&&s;t=G(t);var o=a?"reduce":"reduceRight",l=(t[o]?t[o]:Array.prototype[o]).call(t,(function(e,i,n){var r=a?n:Math.abs(n+1-t.length);return e+K(i)*Y[r]}),K(0));if(r){var c=Y[t.length]/K(2)-K(1);(l=K(l))>c&&(l-=c,l-=c,l-=K(2))}return Number(l)}),Q=function(t,e){if("string"!=typeof t&&t&&"function"==typeof t.toString&&(t=t.toString()),"string"!=typeof t)return new Uint8Array;e||(t=unescape(encodeURIComponent(t)));for(var i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i},J=function(t,e,i){var n=void 0===i?{}:i,r=n.offset,s=void 0===r?0:r,a=n.mask,o=void 0===a?[]:a;t=G(t);var l=(e=G(e)).every?e.every:Array.prototype.every;return e.length&&t.length-s>=e.length&&l.call(e,(function(e,i){return e===(o[i]?o[i]&t[s+i]:t[s+i])}))},Z="http://example.com";const tt=function(t,e){if(/^[a-z]+:/i.test(e))return e;/^data:/.test(t)&&(t=r().location&&r().location.href||"");var i="function"==typeof r().URL,n=/^\/\//.test(t),s=!r().location&&!/\/\//i.test(t);if(i?t=new(r().URL)(t,r().location||Z):/\/\//i.test(t)||(t=g().buildAbsoluteURL(r().location&&r().location.href||"",t)),i){var a=new URL(e,t);return s?a.href.slice(Z.length):n?a.href.slice(a.protocol.length):a.href}return g().buildAbsoluteURL(t,e)};var et=i(48764).lW,it=i(3969);const nt=t=>!!t&&"object"==typeof t,rt=(...t)=>t.reduce(((t,e)=>("object"!=typeof e||Object.keys(e).forEach((i=>{Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=t[i].concat(e[i]):nt(t[i])&&nt(e[i])?t[i]=rt(t[i],e[i]):t[i]=e[i]})),t)),{}),st=t=>Object.keys(t).map((e=>t[e])),at=t=>t.reduce(((t,e)=>t.concat(e)),[]),ot=t=>{if(!t.length)return[];const e=[];for(let i=0;i<t.length;i++)e.push(t[i]);return e};const lt=({baseUrl:t="",source:e="",range:i="",indexRange:n=""})=>{const s={uri:e,resolvedUri:tt(t||"",e)};if(i||n){const t=(i||n).split("-");let e,a=r().BigInt?r().BigInt(t[0]):parseInt(t[0],10),o=r().BigInt?r().BigInt(t[1]):parseInt(t[1],10);a<Number.MAX_SAFE_INTEGER&&"bigint"==typeof a&&(a=Number(a)),o<Number.MAX_SAFE_INTEGER&&"bigint"==typeof o&&(o=Number(o)),e="bigint"==typeof o||"bigint"==typeof a?r().BigInt(o)-r().BigInt(a)+r().BigInt(1):o-a+1,"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),s.byterange={length:e,offset:a}}return s},ct=t=>(t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t),ut={static(t){const{duration:e,timescale:i=1,sourceDuration:n,periodDuration:r}=t,s=ct(t.endNumber),a=e/i;return"number"==typeof s?{start:0,end:s}:"number"==typeof r?{start:0,end:r/a}:{start:0,end:n/a}},dynamic(t){const{NOW:e,clientOffset:i,availabilityStartTime:n,timescale:r=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=t,c=ct(t.endNumber),u=(e+i)/1e3,h=n+a,d=u+o-h,p=Math.ceil(d*r/s),f=Math.floor((u-h-l)*r/s),m=Math.floor((u-h)*r/s);return{start:Math.max(0,f),end:"number"==typeof c?c:Math.min(p,m)}}},ht=t=>{const{type:e,duration:i,timescale:n=1,periodDuration:r,sourceDuration:s}=t,{start:a,end:o}=ut[e](t),l=((t,e)=>{const i=[];for(let n=t;n<e;n++)i.push(n);return i})(a,o).map((t=>e=>{const{duration:i,timescale:n=1,periodStart:r,startNumber:s=1}=t;return{number:s+e,duration:i/n,timeline:r,time:e*i}})(t));if("static"===e){const t=l.length-1,e="number"==typeof r?r:s;l[t].duration=e-i/n*t}return l},dt=t=>{const{baseUrl:e,initialization:i={},sourceDuration:n,indexRange:r="",periodStart:s,presentationTime:a,number:o=0,duration:l}=t;if(!e)throw new Error("NO_BASE_URL");const c=lt({baseUrl:e,source:i.sourceURL,range:i.range}),u=lt({baseUrl:e,source:e,indexRange:r});if(u.map=c,l){const e=ht(t);e.length&&(u.duration=e[0].duration,u.timeline=e[0].timeline)}else n&&(u.duration=n,u.timeline=s);return u.presentationTime=a||s,u.number=o,[u]},pt=(t,e,i)=>{const n=t.sidx.map?t.sidx.map:null,s=t.sidx.duration,a=t.timeline||0,o=t.sidx.byterange,l=o.offset+o.length,c=e.timescale,u=e.references.filter((t=>1!==t.referenceType)),h=[],d=t.endList?"static":"dynamic",p=t.sidx.timeline;let f,m=p,g=t.mediaSequence||0;f="bigint"==typeof e.firstOffset?r().BigInt(l)+e.firstOffset:l+e.firstOffset;for(let t=0;t<u.length;t++){const o=e.references[t],l=o.referencedSize,u=o.subsegmentDuration;let y;y="bigint"==typeof f?f+r().BigInt(l)-r().BigInt(1):f+l-1;const v=dt({baseUrl:i,timescale:c,timeline:a,periodStart:p,presentationTime:m,number:g,duration:u,sourceDuration:s,indexRange:`${f}-${y}`,type:d})[0];n&&(v.map=n),h.push(v),f+="bigint"==typeof f?r().BigInt(l):l,m+=u/c,g++}return t.segments=h,t},ft=["AUDIO","SUBTITLES"],mt=t=>{return(e=t,i=({timeline:t})=>t,st(e.reduce(((t,e)=>(e.forEach((e=>{t[i(e)]=e})),t)),{}))).sort(((t,e)=>t.timeline>e.timeline?1:-1));var e,i},gt=t=>{let e=[];var i,n;return i=t,n=(t,i,n,r)=>{e=e.concat(t.playlists||[])},ft.forEach((function(t){for(var e in i.mediaGroups[t])for(var r in i.mediaGroups[t][e]){var s=i.mediaGroups[t][e][r];n(s)}})),e},yt=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach(((e,i)=>{e.number=t.mediaSequence+i}))},vt=t=>t&&t.uri+"-"+(t=>{let e;return e="bigint"==typeof t.offset||"bigint"==typeof t.length?r().BigInt(t.offset)+r().BigInt(t.length)-r().BigInt(1):t.offset+t.length-1,`${t.offset}-${e}`})(t.byterange),bt=t=>st(t.reduce(((t,e)=>{const i=e.attributes.id+(e.attributes.lang||"");return t[i]?(e.segments&&(e.segments[0]&&(e.segments[0].discontinuity=!0),t[i].segments.push(...e.segments)),e.attributes.contentProtection&&(t[i].attributes.contentProtection=e.attributes.contentProtection)):(t[i]=e,t[i].attributes.timelineStarts=[]),t[i].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),t}),{})).map((t=>{var e;return t.discontinuityStarts=(e=t.segments||[],"discontinuity",e.reduce(((t,e,i)=>(e.discontinuity&&t.push(i),t)),[])),t})),_t=(t,e)=>{const i=vt(t.sidx),n=i&&e[i]&&e[i].sidx;return n&&pt(t,n,t.sidx.resolvedUri),t},wt=(t,e={})=>{if(!Object.keys(e).length)return t;for(const i in t)t[i]=_t(t[i],e);return t},Tt=({attributes:t,segments:e,sidx:i,discontinuityStarts:n})=>{const r={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuityStarts:n,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(r.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(r.contentProtection=t.contentProtection),i&&(r.sidx=i),r},St=({attributes:t})=>"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType,xt=({attributes:t})=>"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType,kt=({attributes:t})=>"text/vtt"===t.mimeType||"text"===t.contentType,Ct=t=>t?Object.keys(t).reduce(((e,i)=>{const n=t[i];return e.concat(n.playlists)}),[]):[],Et=({dashPlaylists:t,locations:e,sidxMapping:i={},previousManifest:n})=>{if(!t.length)return{};const{sourceDuration:r,type:s,suggestedPresentationDelay:a,minimumUpdatePeriod:o}=t[0].attributes,l=bt(t.filter(St)).map(Tt),c=bt(t.filter(xt)),u=bt(t.filter(kt)),h=t.map((t=>t.attributes.captionServices)).filter(Boolean),d={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:r,playlists:wt(l,i)};o>=0&&(d.minimumUpdatePeriod=1e3*o),e&&(d.locations=e),"dynamic"===s&&(d.suggestedPresentationDelay=a);const p=0===d.playlists.length,f=c.length?((t,e={},i=!1)=>{let n;const r=t.reduce(((t,r)=>{const s=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"";let o=r.attributes.label||"main";if(a&&!r.attributes.label){const t=s?` (${s})`:"";o=`${r.attributes.lang}${t}`}t[o]||(t[o]={language:a,autoselect:!0,default:"main"===s,playlists:[],uri:""});const l=_t((({attributes:t,segments:e,sidx:i,mediaSequence:n,discontinuitySequence:r,discontinuityStarts:s},a)=>{const o={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:t.timelineStarts,mediaSequence:n,segments:e};return t.contentProtection&&(o.contentProtection=t.contentProtection),i&&(o.sidx=i),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o})(r,i),e);return t[o].playlists.push(l),void 0===n&&"main"===s&&(n=r,n.default=!0),t}),{});return n||(r[Object.keys(r)[0]].default=!0),r})(c,i,p):null,m=u.length?((t,e={})=>t.reduce(((t,i)=>{const n=i.attributes.lang||"text";return t[n]||(t[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),t[n].playlists.push(_t((({attributes:t,segments:e,mediaSequence:i,discontinuityStarts:n,discontinuitySequence:r})=>{void 0===e&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const s={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};return t.codecs&&(s.CODECS=t.codecs),{attributes:s,uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:n,discontinuitySequence:r,mediaSequence:i,segments:e}})(i),e)),t}),{}))(u,i):null,g=l.concat(Ct(f),Ct(m)),y=g.map((({timelineStarts:t})=>t));var v,b;return d.timelineStarts=mt(y),v=g,b=d.timelineStarts,v.forEach((t=>{t.mediaSequence=0,t.discontinuitySequence=b.findIndex((function({timeline:e}){return e===t.timeline})),t.segments&&t.segments.forEach(((t,e)=>{t.number=e}))})),f&&(d.mediaGroups.AUDIO.audio=f),m&&(d.mediaGroups.SUBTITLES.subs=m),h.length&&(d.mediaGroups["CLOSED-CAPTIONS"].cc=h.reduce(((t,e)=>e?(e.forEach((e=>{const{channel:i,language:n}=e;t[n]={autoselect:!1,default:!1,instreamId:i,language:n},e.hasOwnProperty("aspectRatio")&&(t[n].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(t[n].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(t[n]["3D"]=e["3D"])})),t):t),{})),n?(({oldManifest:t,newManifest:e})=>{const i=t.playlists.concat(gt(t)),n=e.playlists.concat(gt(e));return e.timelineStarts=mt([t.timelineStarts,e.timelineStarts]),(({oldPlaylists:t,newPlaylists:e,timelineStarts:i})=>{e.forEach((e=>{e.discontinuitySequence=i.findIndex((function({timeline:t}){return t===e.timeline}));const n=((t,e)=>{for(let i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null})(t,e.attributes.NAME);if(!n)return;if(e.sidx)return;const r=e.segments[0],s=n.segments.findIndex((function(t){return Math.abs(t.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===s)return yt({playlist:e,mediaSequence:n.mediaSequence+n.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!n.segments.length&&e.timeline>n.timeline||n.segments.length&&e.timeline>n.segments[n.segments.length-1].timeline)&&e.discontinuitySequence--);n.segments[s].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),yt({playlist:e,mediaSequence:n.segments[s].number})}))})({oldPlaylists:i,newPlaylists:n,timelineStarts:e.timelineStarts}),e})({oldManifest:n,newManifest:d}):d},It=(t,e,i)=>{const{NOW:n,clientOffset:r,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=t,c=(n+r)/1e3+l-(s+o);return Math.ceil((c*a-e)/i)},Pt=(t,e)=>{const{type:i,minimumUpdatePeriod:n=0,media:r="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=t,c=[];let u=-1;for(let h=0;h<e.length;h++){const d=e[h],p=d.d,f=d.r||0,m=d.t||0;let g;if(u<0&&(u=m),m&&m>u&&(u=m),f<0){const o=h+1;g=o===e.length?"dynamic"===i&&n>0&&r.indexOf("$Number$")>0?It(t,u,p):(s*a-u)/p:(e[o].t-u)/p}else g=f+1;const y=o+c.length+g;let v=o+c.length;for(;v<y;)c.push({number:v,duration:p/a,time:u,timeline:l}),u+=p,v++}return c},At=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Lt=(t,e)=>t.replace(At,(t=>(e,i,n,r)=>{if("$$"===e)return"$";if(void 0===t[i])return e;const s=""+t[i];return"RepresentationID"===i?s:(r=n?parseInt(r,10):1,s.length>=r?s:`${new Array(r-s.length+1).join("0")}${s}`)})(e)),Ot=(t,e)=>{const i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=t,r=lt({baseUrl:t.baseUrl,source:Lt(n.sourceURL,i),range:n.range}),s=((t,e)=>t.duration||e?t.duration?ht(t):Pt(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}])(t,e);return s.map((e=>{i.Number=e.number,i.Time=e.time;const n=Lt(t.media||"",i),s=t.timescale||1,a=t.presentationTimeOffset||0,o=t.periodStart+(e.time-a)/s;return{uri:n,timeline:e.timeline,duration:e.duration,resolvedUri:tt(t.baseUrl||"",n),map:r,number:e.number,presentationTime:o}}))},Dt=(t,e)=>{const{duration:i,segmentUrls:n=[],periodStart:r}=t;if(!i&&!e||i&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=n.map((e=>((t,e)=>{const{baseUrl:i,initialization:n={}}=t,r=lt({baseUrl:i,source:n.sourceURL,range:n.range}),s=lt({baseUrl:i,source:e.media,range:e.mediaRange});return s.map=r,s})(t,e)));let a;return i&&(a=ht(t)),e&&(a=Pt(t,e)),a.map(((e,i)=>{if(s[i]){const n=s[i],a=t.timescale||1,o=t.presentationTimeOffset||0;return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n.presentationTime=r+(e.time-o)/a,n}})).filter((t=>t))},Mt=({attributes:t,segmentInfo:e})=>{let i,n;e.template?(n=Ot,i=rt(t,e.template)):e.base?(n=dt,i=rt(t,e.base)):e.list&&(n=Dt,i=rt(t,e.list));const r={attributes:t};if(!n)return r;const s=n(i,e.segmentTimeline);if(i.duration){const{duration:t,timescale:e=1}=i;i.duration=t/e}else s.length?i.duration=s.reduce(((t,e)=>Math.max(t,Math.ceil(e.duration))),0):i.duration=0;return r.attributes=i,r.segments=s,e.base&&i.indexRange&&(r.sidx=s[0],r.segments=[]),r},Rt=(t,e)=>ot(t.childNodes).filter((({tagName:t})=>t===e)),Nt=t=>t.textContent.trim(),Bt=t=>{const e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;const[i,n,r,s,a,o]=e.slice(1);return 31536e3*parseFloat(i||0)+2592e3*parseFloat(n||0)+86400*parseFloat(r||0)+3600*parseFloat(s||0)+60*parseFloat(a||0)+parseFloat(o||0)},Ft={mediaPresentationDuration:t=>Bt(t),availabilityStartTime(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:t=>Bt(t),suggestedPresentationDelay:t=>Bt(t),type:t=>t,timeShiftBufferDepth:t=>Bt(t),start:t=>Bt(t),width:t=>parseInt(t,10),height:t=>parseInt(t,10),bandwidth:t=>parseInt(t,10),frameRate:t=>(t=>parseFloat(t.split("/").reduce(((t,e)=>t/e))))(t),startNumber:t=>parseInt(t,10),timescale:t=>parseInt(t,10),presentationTimeOffset:t=>parseInt(t,10),duration(t){const e=parseInt(t,10);return isNaN(e)?Bt(t):e},d:t=>parseInt(t,10),t:t=>parseInt(t,10),r:t=>parseInt(t,10),DEFAULT:t=>t},$t=t=>t&&t.attributes?ot(t.attributes).reduce(((t,e)=>{const i=Ft[e.name]||Ft.DEFAULT;return t[e.name]=i(e.value),t}),{}):{},Ut={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},jt=(t,e)=>e.length?at(t.map((function(t){return e.map((function(e){return tt(t,Nt(e))}))}))):t,Vt=t=>{const e=Rt(t,"SegmentTemplate")[0],i=Rt(t,"SegmentList")[0],n=i&&Rt(i,"SegmentURL").map((t=>rt({tag:"SegmentURL"},$t(t)))),r=Rt(t,"SegmentBase")[0],s=i||e,a=s&&Rt(s,"SegmentTimeline")[0],o=i||r||e,l=o&&Rt(o,"Initialization")[0],c=e&&$t(e);c&&l?c.initialization=l&&$t(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});const u={template:c,segmentTimeline:a&&Rt(a,"S").map((t=>$t(t))),list:i&&rt($t(i),{segmentUrls:n,initialization:$t(l)}),base:r&&rt($t(r),{initialization:$t(l)})};return Object.keys(u).forEach((t=>{u[t]||delete u[t]})),u},Ht=t=>t.reduce(((t,e)=>{const i=$t(e);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const n=Ut[i.schemeIdUri];if(n){t[n]={attributes:i};const s=Rt(e,"cenc:pssh")[0];if(s){const e=Nt(s);t[n].pssh=e&&function(t){for(var e=(s=t,r().atob?r().atob(s):et.from(s,"base64").toString("binary")),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);var s;return i}(e)}}return t}),{}),qt=(t,e)=>(i,n)=>{const r=jt(e,Rt(i.node,"BaseURL")),s=rt(t,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(s.periodDuration=i.attributes.duration);const a=Rt(i.node,"AdaptationSet"),o=Vt(i.node);return at(a.map(((t,e,i)=>n=>{const r=$t(n),s=jt(e,Rt(n,"BaseURL")),a=Rt(n,"Role")[0],o={role:$t(a)};let l=rt(t,r,o);const c=Rt(n,"Accessibility")[0],u="urn:scte:dash:cc:cea-608:2015"===(h=$t(c)).schemeIdUri?("string"!=typeof h.value?[]:h.value.split(";")).map((t=>{let e,i;return i=t,/^CC\d=/.test(t)?[e,i]=t.split("="):/^CC\d$/.test(t)&&(e=t),{channel:e,language:i}})):"urn:scte:dash:cc:cea-708:2015"===h.schemeIdUri?("string"!=typeof h.value?[]:h.value.split(";")).map((t=>{const e={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[i,n=""]=t.split("=");e.channel=i,e.language=t,n.split(",").forEach((t=>{const[i,n]=t.split(":");"lang"===i?e.language=n:"er"===i?e.easyReader=Number(n):"war"===i?e.aspectRatio=Number(n):"3D"===i&&(e["3D"]=Number(n))}))}else e.language=t;return e.channel&&(e.channel="SERVICE"+e.channel),e})):void 0;var h;u&&(l=rt(l,{captionServices:u}));const d=Rt(n,"Label")[0];if(d&&d.childNodes.length){const t=d.childNodes[0].nodeValue.trim();l=rt(l,{label:t})}const p=Ht(Rt(n,"ContentProtection"));Object.keys(p).length&&(l=rt(l,{contentProtection:p}));const f=Vt(n),m=Rt(n,"Representation"),g=rt(i,f);return at(m.map(((t,e,i)=>n=>{const r=Rt(n,"BaseURL"),s=jt(e,r),a=rt(t,$t(n)),o=Vt(n);return s.map((t=>({segmentInfo:rt(i,o),attributes:rt(a,{baseUrl:t})})))})(l,s,g)))})(s,r,o)))},Wt=t=>{if(""===t)throw new Error("DASH_EMPTY_MANIFEST");const e=new it.DOMParser;let i,n;try{i=e.parseFromString(t,"application/xml"),n=i&&"MPD"===i.documentElement.tagName?i.documentElement:null}catch(t){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n};var zt,Gt=i(29217),Kt=i.n(Gt),Yt=G([73,68,51]),Xt=function t(e,i){return void 0===i&&(i=0),(e=G(e)).length-i<10||!J(e,Yt,{offset:i})?i:(i+=function(t,e){void 0===e&&(e=0);var i=(t=G(t))[e+5],n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&i)>>4?n+20:n+10}(e,i),t(e,i))},Qt=(new Uint8Array([79,112,117,115,72,101,97,100]),function(t){return"string"==typeof t?Q(t):t}),Jt=function(t){t=G(t);for(var e=[],i=0;t.length>i;){var n=t[i],r=0,s=0,a=t[++s];for(s++;128&a;)r=(127&a)<<7,a=t[s],s++;r+=127&a;for(var o=0;o<zt.length;o++){var l=zt[o],c=l.id,u=l.parser;if(n===c){e.push(u(t.subarray(s,s+r)));break}}i+=r+s}return e};zt=[{id:3,parser:function(t){var e={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&e.flags&&(e.dependsOnEsId=t[e.size]<<8|t[e.size+1],e.size+=2),64&e.flags){var i=t[e.size];e.url=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var e=String.fromCharCode.apply(null,G(t));try{return decodeURIComponent(escape(e))}catch(t){}return e}(t.subarray(e.size+1,e.size+1+i)),e.size+=i}return 32&e.flags&&(e.ocrEsId=t[e.size]<<8|t[e.size+1],e.size+=2),e.descriptors=Jt(t.subarray(e.size))||[],e}},{id:4,parser:function(t){return{tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:Jt(t.subarray(13))}}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var Zt=function t(e,i,n){void 0===n&&(n=!1),i=function(t){return Array.isArray(t)?t.map((function(t){return Qt(t)})):[Qt(t)]}(i),e=G(e);var r=[];if(!i.length)return r;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(0===a)break;var l=s+a;if(l>e.length){if(n)break;l=e.length}var c=e.subarray(s+8,l);J(o,i[0])&&(1===i.length?r.push(c):r.push.apply(r,t(c,i.slice(1),n))),s=l}return r},te={EBML:G([26,69,223,163]),DocType:G([66,130]),Segment:G([24,83,128,103]),SegmentInfo:G([21,73,169,102]),Tracks:G([22,84,174,107]),Track:G([174]),TrackNumber:G([215]),DefaultDuration:G([35,227,131]),TrackEntry:G([174]),TrackType:G([131]),FlagDefault:G([136]),CodecID:G([134]),CodecPrivate:G([99,162]),VideoTrack:G([224]),AudioTrack:G([225]),Cluster:G([31,67,182,117]),Timestamp:G([231]),TimestampScale:G([42,215,177]),BlockGroup:G([160]),BlockDuration:G([155]),Block:G([161]),SimpleBlock:G([163])},ee=[128,64,32,16,8,4,2,1],ie=function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=function(t){for(var e=1,i=0;i<ee.length&&!(t&ee[i]);i++)e++;return e}(t[e]),s=t.subarray(e,e+r);return i&&((s=Array.prototype.slice.call(t,e,e+r))[0]^=ee[r-1]),{length:r,value:X(s,{signed:n}),bytes:s}},ne=function t(e){return"string"==typeof e?e.match(/.{1,2}/g).map((function(e){return t(e)})):"number"==typeof e?function(t,e){var i=(void 0===e?{}:e).le,n=void 0!==i&&i;("bigint"!=typeof t&&"number"!=typeof t||"number"==typeof t&&t!=t)&&(t=0);for(var r,s=(r=t=K(t),Math.ceil(function(t){return t.toString(2).length}(r)/8)),a=new Uint8Array(new ArrayBuffer(s)),o=0;o<s;o++){var l=n?o:Math.abs(o+1-a.length);a[l]=Number(t/Y[o]&K(255)),t<0&&(a[l]=Math.abs(~a[l]),a[l]-=0===o?1:2)}return a}(e):e},re=function t(e,i,n){if(n>=i.length)return i.length;var r=ie(i,n,!1);if(J(e.bytes,r.bytes))return n;var s=ie(i,n+r.length);return t(e,i,n+s.length+s.value+r.length)},se=function t(e,i){i=function(t){return Array.isArray(t)?t.map((function(t){return ne(t)})):[ne(t)]}(i),e=G(e);var n=[];if(!i.length)return n;for(var r=0;r<e.length;){var s=ie(e,r,!1),a=ie(e,r+s.length),o=r+s.length+a.length;127===a.value&&(a.value=re(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,c=e.subarray(o,l);J(i[0],s.bytes)&&(1===i.length?n.push(c):n=n.concat(t(c,i.slice(1)))),r+=s.length+a.length+c.length}return n},ae=G([0,0,0,1]),oe=G([0,0,1]),le=G([0,0,3]),ce=function(t){for(var e=[],i=1;i<t.length-2;)J(t.subarray(i,i+3),le)&&(e.push(i+2),i++),i++;if(0===e.length)return t;var n=t.length-e.length,r=new Uint8Array(n),s=0;for(i=0;i<n;s++,i++)s===e[0]&&(s++,e.shift()),r[i]=t[s];return r},ue=function(t,e,i,n){void 0===n&&(n=1/0),t=G(t),i=[].concat(i);for(var r,s=0,a=0;s<t.length&&(a<n||r);){var o=void 0;if(J(t.subarray(s),ae)?o=4:J(t.subarray(s),oe)&&(o=3),o){if(a++,r)return ce(t.subarray(r,s));var l=void 0;"h264"===e?l=31&t[s+o]:"h265"===e&&(l=t[s+o]>>1&63),-1!==i.indexOf(l)&&(r=s+o),s+=o+("h264"===e?1:2)}else s++}return t.subarray(0,0)},he={webm:G([119,101,98,109]),matroska:G([109,97,116,114,111,115,107,97]),flac:G([102,76,97,67]),ogg:G([79,103,103,83]),ac3:G([11,119]),riff:G([82,73,70,70]),avi:G([65,86,73]),wav:G([87,65,86,69]),"3gp":G([102,116,121,112,51,103]),mp4:G([102,116,121,112]),fmp4:G([115,116,121,112]),mov:G([102,116,121,112,113,116]),moov:G([109,111,111,118]),moof:G([109,111,111,102])},de={aac:function(t){var e=Xt(t);return J(t,[255,16],{offset:e,mask:[255,22]})},mp3:function(t){var e=Xt(t);return J(t,[255,2],{offset:e,mask:[255,6]})},webm:function(t){var e=se(t,[te.EBML,te.DocType])[0];return J(e,he.webm)},mkv:function(t){var e=se(t,[te.EBML,te.DocType])[0];return J(e,he.matroska)},mp4:function(t){return!de["3gp"](t)&&!de.mov(t)&&(!(!J(t,he.mp4,{offset:4})&&!J(t,he.fmp4,{offset:4}))||!(!J(t,he.moof,{offset:4})&&!J(t,he.moov,{offset:4}))||void 0)},mov:function(t){return J(t,he.mov,{offset:4})},"3gp":function(t){return J(t,he["3gp"],{offset:4})},ac3:function(t){var e=Xt(t);return J(t,he.ac3,{offset:e})},ts:function(t){if(t.length<189&&t.length>=1)return 71===t[0];for(var e=0;e+188<t.length&&e<188;){if(71===t[e]&&71===t[e+188])return!0;e+=1}return!1},flac:function(t){var e=Xt(t);return J(t,he.flac,{offset:e})},ogg:function(t){return J(t,he.ogg)},avi:function(t){return J(t,he.riff)&&J(t,he.avi,{offset:8})},wav:function(t){return J(t,he.riff)&&J(t,he.wav,{offset:8})},h264:function(t){return function(t,e,i){return ue(t,"h264",7,3)}(t).length},h265:function(t){return function(t,e,i){return ue(t,"h265",[32,33],3)}(t).length}},pe=Object.keys(de).filter((function(t){return"ts"!==t&&"h264"!==t&&"h265"!==t})).concat(["ts","h264","h265"]);pe.forEach((function(t){var e=de[t];de[t]=function(t){return e(G(t))}}));var fe=de,me=function(t){t=G(t);for(var e=0;e<pe.length;e++){var i=pe[e];if(fe[i](t))return i}return""},ge=i(25274),ye="8.0.4";const ve={},be=function(t,e){return ve[t]=ve[t]||[],e&&(ve[t]=ve[t].concat(e)),ve[t]},_e=function(t,e){const i=be(t).indexOf(e);return!(i<=-1||(ve[t]=ve[t].slice(),ve[t].splice(i,1),0))},we={prefixed:!0},Te=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Se=Te[0];let xe;for(let t=0;t<Te.length;t++)if(Te[t][1]in a()){xe=Te[t];break}if(xe){for(let t=0;t<xe.length;t++)we[Se[t]]=xe[t];we.prefixed=xe[0]!==Se[0]}let ke=[];const Ce=function t(e){let i,n="info";const s=function(...t){i("log",n,t)};return i=((t,e)=>(i,n,s)=>{const a=e.levels[n],o=new RegExp(`^(${a})$`);if("log"!==i&&s.unshift(i.toUpperCase()+":"),s.unshift(t+":"),ke){ke.push([].concat(s));const t=ke.length-1e3;ke.splice(0,t>0?t:0)}if(!r().console)return;let l=r().console[i];l||"debug"!==i||(l=r().console.info||r().console.log),l&&a&&o.test(i)&&l[Array.isArray(s)?"apply":"call"](r().console,s)})(e,s),s.createLogger=i=>t(e+": "+i),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},s.level=t=>{if("string"==typeof t){if(!s.levels.hasOwnProperty(t))throw new Error(`"${t}" in not a valid log level`);n=t}return n},(s.history=()=>ke?[].concat(ke):[]).filter=t=>(ke||[]).filter((e=>new RegExp(`.*${t}.*`).test(e[0]))),s.history.clear=()=>{ke&&(ke.length=0)},s.history.disable=()=>{null!==ke&&(ke.length=0,ke=null)},s.history.enable=()=>{null===ke&&(ke=[])},s.error=(...t)=>i("error",n,t),s.warn=(...t)=>i("warn",n,t),s.debug=(...t)=>i("debug",n,t),s}("VIDEOJS"),Ee=Ce.createLogger,Ie=Object.prototype.toString,Pe=function(t){return Oe(t)?Object.keys(t):[]};function Ae(t,e){Pe(t).forEach((i=>e(t[i],i)))}function Le(t,e,i=0){return Pe(t).reduce(((i,n)=>e(i,t[n],n)),i)}function Oe(t){return!!t&&"object"==typeof t}function De(t){return Oe(t)&&"[object Object]"===Ie.call(t)&&t.constructor===Object}function Me(...t){const e={};return t.forEach((t=>{t&&Ae(t,((t,i)=>{De(t)?(De(e[i])||(e[i]={}),e[i]=Me(e[i],t)):e[i]=t}))})),e}function Re(t,e,i,n=!0){const r=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const t=i();return r(t),t}};return n&&(s.set=r),Object.defineProperty(t,e,s)}var Ne=Object.freeze({__proto__:null,each:Ae,reduce:Le,isObject:Oe,isPlain:De,merge:Me,defineLazyProperty:Re});let Be,Fe=!1,$e=null,Ue=!1,je=!1,Ve=!1,He=!1,qe=!1,We=null,ze=null,Ge=null,Ke=!1,Ye=!1,Xe=!1,Qe=!1;const Je=Boolean(ri()&&("ontouchstart"in r()||r().navigator.maxTouchPoints||r().DocumentTouch&&r().document instanceof r().DocumentTouch)),Ze=r().navigator&&r().navigator.userAgentData;if(Ze&&(Ue="Android"===Ze.platform,Ve=Boolean(Ze.brands.find((t=>"Microsoft Edge"===t.brand))),He=Boolean(Ze.brands.find((t=>"Chromium"===t.brand))),qe=!Ve&&He,We=ze=(Ze.brands.find((t=>"Chromium"===t.brand))||{}).version||null,Ye="Windows"===Ze.platform),!He){const t=r().navigator&&r().navigator.userAgent||"";Fe=/iPod/i.test(t),$e=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Ue=/Android/i.test(t),Be=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return i&&n?parseFloat(e[1]+"."+e[2]):i||null}(),je=/Firefox/i.test(t),Ve=/Edg/i.test(t),He=/Chrome/i.test(t)||/CriOS/i.test(t),qe=!Ve&&He,We=ze=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Ge=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);return!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11),i}(),Ke=/Safari/i.test(t)&&!qe&&!Ue&&!Ve,Ye=/Windows/i.test(t),Xe=/iPad/i.test(t)||Ke&&Je&&!/iPhone/i.test(t),Qe=/iPhone/i.test(t)&&!Xe}const ti=Qe||Xe||Fe,ei=(Ke||ti)&&!qe;var ii=Object.freeze({__proto__:null,get IS_IPOD(){return Fe},get IOS_VERSION(){return $e},get IS_ANDROID(){return Ue},get ANDROID_VERSION(){return Be},get IS_FIREFOX(){return je},get IS_EDGE(){return Ve},get IS_CHROMIUM(){return He},get IS_CHROME(){return qe},get CHROMIUM_VERSION(){return We},get CHROME_VERSION(){return ze},get IE_VERSION(){return Ge},get IS_SAFARI(){return Ke},get IS_WINDOWS(){return Ye},get IS_IPAD(){return Xe},get IS_IPHONE(){return Qe},TOUCH_ENABLED:Je,IS_IOS:ti,IS_ANY_SAFARI:ei});function ni(t){return"string"==typeof t&&Boolean(t.trim())}function ri(){return a()===r().document}function si(t){return Oe(t)&&1===t.nodeType}function ai(){try{return r().parent!==r().self}catch(t){return!0}}function oi(t){return function(e,i){if(!ni(e))return a()[t](null);ni(i)&&(i=a().querySelector(i));const n=si(i)?i:a();return n[t]&&n[t](e)}}function li(t="div",e={},i={},n){const r=a().createElement(t);return Object.getOwnPropertyNames(e).forEach((function(t){const i=e[t];"textContent"===t?ci(r,i):r[t]===i&&"tabIndex"!==t||(r[t]=i)})),Object.getOwnPropertyNames(i).forEach((function(t){r.setAttribute(t,i[t])})),n&&Ii(r,n),r}function ci(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function ui(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function hi(t,e){return function(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(e),t.classList.contains(e)}function di(t,...e){return t.classList.add(...e.reduce(((t,e)=>t.concat(e.split(/\s+/))),[])),t}function pi(t,...e){return t?(t.classList.remove(...e.reduce(((t,e)=>t.concat(e.split(/\s+/))),[])),t):(Ce.warn("removeClass was called with an element that doesn't exist"),null)}function fi(t,e,i){return"function"==typeof i&&(i=i(t,e)),"boolean"!=typeof i&&(i=void 0),e.split(/\s+/).forEach((e=>t.classList.toggle(e,i))),t}function mi(t,e){Object.getOwnPropertyNames(e).forEach((function(i){const n=e[i];null==n||!1===n?t.removeAttribute(i):t.setAttribute(i,!0===n?"":n)}))}function gi(t){const e={};if(t&&t.attributes&&t.attributes.length>0){const i=t.attributes;for(let n=i.length-1;n>=0;n--){const r=i[n].name;let s=i[n].value;"boolean"!=typeof t[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(s=null!==s),e[r]=s}}return e}function yi(t,e){return t.getAttribute(e)}function vi(t,e,i){t.setAttribute(e,i)}function bi(t,e){t.removeAttribute(e)}function _i(){a().body.focus(),a().onselectstart=function(){return!1}}function wi(){a().onselectstart=function(){return!0}}function Ti(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((t=>{void 0!==e[t]&&(i[t]=e[t])})),i.height||(i.height=parseFloat(Di(t,"height"))),i.width||(i.width=parseFloat(Di(t,"width"))),i}}function Si(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let n=0,r=0;for(;t.offsetParent&&t!==a()[we.fullscreenElement];)n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:n,top:r,width:e,height:i}}function xi(t,e){const i={x:0,y:0};if(ti){let e=t;for(;e&&"html"!==e.nodeName.toLowerCase();){const t=Di(e,"transform");if(/^matrix/.test(t)){const e=t.slice(7,-1).split(/,\s/).map(Number);i.x+=e[4],i.y+=e[5]}else if(/^matrix3d/.test(t)){const e=t.slice(9,-1).split(/,\s/).map(Number);i.x+=e[12],i.y+=e[13]}e=e.parentNode}}const n={},r=Si(e.target),s=Si(t),a=s.width,o=s.height;let l=e.offsetY-(s.top-r.top),c=e.offsetX-(s.left-r.left);return e.changedTouches&&(c=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,ti&&(c-=i.x,l-=i.y)),n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,c/a)),n}function ki(t){return Oe(t)&&3===t.nodeType}function Ci(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Ei(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map((t=>("function"==typeof t&&(t=t()),si(t)||ki(t)?t:"string"==typeof t&&/\S/.test(t)?a().createTextNode(t):void 0))).filter((t=>t))}function Ii(t,e){return Ei(e).forEach((e=>t.appendChild(e))),t}function Pi(t,e){return Ii(Ci(t),e)}function Ai(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||"mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons}const Li=oi("querySelector"),Oi=oi("querySelectorAll");function Di(t,e){if(!t||!e)return"";if("function"==typeof r().getComputedStyle){let i;try{i=r().getComputedStyle(t)}catch(t){return""}return i?i.getPropertyValue(e)||i[e]:""}return""}var Mi=Object.freeze({__proto__:null,isReal:ri,isEl:si,isInFrame:ai,createEl:li,textContent:ci,prependTo:ui,hasClass:hi,addClass:di,removeClass:pi,toggleClass:fi,setAttributes:mi,getAttributes:gi,getAttribute:yi,setAttribute:vi,removeAttribute:bi,blockTextSelection:_i,unblockTextSelection:wi,getBoundingClientRect:Ti,findPosition:Si,getPointerPosition:xi,isTextNode:ki,emptyEl:Ci,normalizeContent:Ei,appendContent:Ii,insertContent:Pi,isSingleLeftClick:Ai,$:Li,$$:Oi,computedStyle:Di});let Ri,Ni=!1;const Bi=function(){if(!1===Ri.options.autoSetup)return;const t=Array.prototype.slice.call(a().getElementsByTagName("video")),e=Array.prototype.slice.call(a().getElementsByTagName("audio")),i=Array.prototype.slice.call(a().getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&n.length>0)for(let t=0,e=n.length;t<e;t++){const e=n[t];if(!e||!e.getAttribute){Fi(1);break}void 0===e.player&&null!==e.getAttribute("data-setup")&&Ri(e)}else Ni||Fi(1)};function Fi(t,e){ri()&&(e&&(Ri=e),r().setTimeout(Bi,t))}function $i(){Ni=!0,r().removeEventListener("load",$i)}ri()&&("complete"===a().readyState?$i():r().addEventListener("load",$i));const Ui=function(t){const e=a().createElement("style");return e.className=t,e},ji=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var Vi=new WeakMap;let Hi,qi=3;function Wi(){return qi++}function zi(t,e){if(!Vi.has(t))return;const i=Vi.get(t);0===i.handlers[e].length&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Vi.delete(t)}function Gi(t,e,i,n){i.forEach((function(i){t(e,i,n)}))}function Ki(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const n=t||r().event;t={};for(const e in n)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&"path"!==e&&("returnValue"===e&&n.preventDefault||(t[e]=n[e]));if(t.target||(t.target=t.srcElement||a()),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!==t.clientX&&void 0!==t.clientX){const e=a().documentElement,i=a().body;t.pageX=t.clientX+(e&&e.scrollLeft||i&&i.scrollLeft||0)-(e&&e.clientLeft||i&&i.clientLeft||0),t.pageY=t.clientY+(e&&e.scrollTop||i&&i.scrollTop||0)-(e&&e.clientTop||i&&i.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}const Yi=function(){if("boolean"!=typeof Hi){Hi=!1;try{const t=Object.defineProperty({},"passive",{get(){Hi=!0}});r().addEventListener("test",null,t),r().removeEventListener("test",null,t)}catch(t){}}return Hi},Xi=["touchstart","touchmove"];function Qi(t,e,i){if(Array.isArray(e))return Gi(Qi,t,e,i);Vi.has(t)||Vi.set(t,{});const n=Vi.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=Wi()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,i){if(n.disabled)return;e=Ki(e);const r=n.handlers[e.type];if(r){const n=r.slice(0);for(let r=0,s=n.length;r<s&&!e.isImmediatePropagationStopped();r++)try{n[r].call(t,e,i)}catch(t){Ce.error(t)}}}),1===n.handlers[e].length)if(t.addEventListener){let i=!1;Yi()&&Xi.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,n.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function Ji(t,e,i){if(!Vi.has(t))return;const n=Vi.get(t);if(!n.handlers)return;if(Array.isArray(e))return Gi(Ji,t,e,i);const r=function(t,e){n.handlers[e]=[],zi(t,e)};if(void 0===e){for(const e in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},e)&&r(t,e);return}const s=n.handlers[e];if(s)if(i){if(i.guid)for(let t=0;t<s.length;t++)s[t].guid===i.guid&&s.splice(t--,1);zi(t,e)}else r(t,e)}function Zi(t,e,i){const n=Vi.has(t)?Vi.get(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=Ki(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&!0===e.bubbles)Zi.call(null,r,e,i);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){Vi.has(e.target)||Vi.set(e.target,{});const t=Vi.get(e.target);e.target[e.type]&&(t.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),t.disabled=!1)}return!e.defaultPrevented}function tn(t,e,i){if(Array.isArray(e))return Gi(tn,t,e,i);const n=function(){Ji(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Wi(),Qi(t,e,n)}function en(t,e,i){const n=function(){Ji(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Wi(),Qi(t,e,n)}var nn=Object.freeze({__proto__:null,fixEvent:Ki,on:Qi,off:Ji,trigger:Zi,one:tn,any:en});const rn=30,sn=function(t,e,i){e.guid||(e.guid=Wi());const n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n},an=function(t,e){let i=r().performance.now();return function(...n){const s=r().performance.now();s-i>=e&&(t(...n),i=s)}},on=function(t,e,i,n=r()){let s;const a=function(){const r=this,a=arguments;let o=function(){s=null,o=null,i||t.apply(r,a)};!s&&i&&t.apply(r,a),n.clearTimeout(s),s=n.setTimeout(o,e)};return a.cancel=()=>{n.clearTimeout(s),s=null},a};var ln=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:rn,bind_:sn,throttle:an,debounce:on});let cn;class un{on(t,e){const i=this.addEventListener;this.addEventListener=()=>{},Qi(this,t,e),this.addEventListener=i}off(t,e){Ji(this,t,e)}one(t,e){const i=this.addEventListener;this.addEventListener=()=>{},tn(this,t,e),this.addEventListener=i}any(t,e){const i=this.addEventListener;this.addEventListener=()=>{},en(this,t,e),this.addEventListener=i}trigger(t){const e=t.type||t;"string"==typeof t&&(t={type:e}),t=Ki(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Zi(this,t)}queueTrigger(t){cn||(cn=new Map);const e=t.type||t;let i=cn.get(this);i||(i=new Map,cn.set(this,i));const n=i.get(e);i.delete(e),r().clearTimeout(n);const s=r().setTimeout((()=>{i.delete(e),0===i.size&&(i=null,cn.delete(this)),this.trigger(t)}),0);i.set(e,s)}}un.prototype.allowedEvents_={},un.prototype.addEventListener=un.prototype.on,un.prototype.removeEventListener=un.prototype.off,un.prototype.dispatchEvent=un.prototype.trigger;const hn=t=>"function"==typeof t.name?t.name():"string"==typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,dn=t=>t instanceof un||!!t.eventBusEl_&&["on","one","off","trigger"].every((e=>"function"==typeof t[e])),pn=t=>"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length,fn=(t,e,i)=>{if(!t||!t.nodeName&&!dn(t))throw new Error(`Invalid target for ${hn(e)}#${i}; must be a DOM node or evented object.`)},mn=(t,e,i)=>{if(!pn(t))throw new Error(`Invalid event type for ${hn(e)}#${i}; must be a non-empty string or array.`)},gn=(t,e,i)=>{if("function"!=typeof t)throw new Error(`Invalid listener for ${hn(e)}#${i}; must be a function.`)},yn=(t,e,i)=>{const n=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let r,s,a;return n?(r=t.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):[r,s,a]=e,fn(r,t,i),mn(s,t,i),gn(a,t,i),a=sn(t,a),{isTargetingSelf:n,target:r,type:s,listener:a}},vn=(t,e,i,n)=>{fn(t,t,e),t.nodeName?nn[e](t,i,n):t[e](i,n)},bn={on(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=yn(this,t,"on");if(vn(i,"on",n,r),!e){const t=()=>this.off(i,n,r);t.guid=r.guid;const e=()=>this.off("dispose",t);e.guid=r.guid,vn(this,"on","dispose",t),vn(i,"on","dispose",e)}},one(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=yn(this,t,"one");if(e)vn(i,"one",n,r);else{const t=(...e)=>{this.off(i,n,t),r.apply(null,e)};t.guid=r.guid,vn(i,"one",n,t)}},any(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=yn(this,t,"any");if(e)vn(i,"any",n,r);else{const t=(...e)=>{this.off(i,n,t),r.apply(null,e)};t.guid=r.guid,vn(i,"any",n,t)}},off(t,e,i){if(!t||pn(t))Ji(this.eventBusEl_,t,e);else{const n=t,r=e;fn(n,this,"off"),mn(r,this,"off"),gn(i,this,"off"),i=sn(this,i),this.off("dispose",i),n.nodeName?(Ji(n,r,i),Ji(n,"dispose",i)):dn(n)&&(n.off(r,i),n.off("dispose",i))}},trigger(t,e){fn(this.eventBusEl_,this,"trigger");const i=t&&"string"!=typeof t?t.type:t;if(!pn(i))throw new Error(`Invalid event type for ${hn(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Zi(this.eventBusEl_,t,e)}};function _n(t,e={}){const{eventBusKey:i}=e;if(i){if(!t[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);t.eventBusEl_=t[i]}else t.eventBusEl_=li("span",{className:"vjs-event-bus"});return Object.assign(t,bn),t.eventedCallbacks&&t.eventedCallbacks.forEach((t=>{t()})),t.on("dispose",(()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach((function(t){t&&Vi.has(t)&&Vi.delete(t)})),r().setTimeout((()=>{t.eventBusEl_=null}),0)})),t}const wn={state:{},setState(t){let e;return"function"==typeof t&&(t=t()),Ae(t,((t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t})),e&&dn(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function Tn(t,e){return Object.assign(t,wn),t.state=Object.assign({},t.state,e),"function"==typeof t.handleStateChanged&&dn(t)&&t.on("statechanged",t.handleStateChanged),t}const Sn=function(t){return"string"!=typeof t?t:t.replace(/./,(t=>t.toLowerCase()))},xn=function(t){return"string"!=typeof t?t:t.replace(/./,(t=>t.toUpperCase()))},kn=function(t,e){return xn(t)===xn(e)};var Cn=Object.freeze({__proto__:null,toLowerCase:Sn,toTitleCase:xn,titleCaseEquals:kn});class En{constructor(t,e,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Me({},this.options_),e=this.options_=Me(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){const e=t&&t.id&&t.id()||"no_player";this.id_=`${e}_component_${Wi()}`}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),e.className&&this.el_&&e.className.split(" ").forEach((t=>this.addClass(t))),!1!==e.evented&&(_n(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Tn(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==e.initChildren&&this.initChildren(),this.ready(i),!1!==e.reportTouchActivity&&this.enableTouchActivity()}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(t){return t?(this.options_=Me(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,e,i){return li(t,e,i)}localize(t,e,i=t){const n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[n],a=n&&n.split("-")[0],o=r&&r[a];let l=i;return s&&s[t]?l=s[t]:o&&o[t]&&(l=o[t]),e&&(l=l.replace(/\{(\d+)\}/g,(function(t,i){const n=e[i-1];let r=n;return void 0===n&&(r=t),r}))),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce(((t,e)=>t.concat(e)),[]);let e=this;for(let i=0;i<t.length;i++)if(e=e.getChild(t[i]),!e||!e.getChild)return;return e}addChild(t,e={},i=this.children_.length){let n,r;if("string"==typeof t){r=xn(t);const i=e.componentClass||r;e.name=r;const s=En.getComponent(i);if(!s)throw new Error(`Component ${i} does not exist`);if("function"!=typeof s)return null;n=new s(this.player_||this,e)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,"function"==typeof n.id&&(this.childIndex_[n.id()]=n),r=r||n.name&&xn(n.name()),r&&(this.childNameIndex_[r]=n,this.childNameIndex_[Sn(r)]=n),"function"==typeof n.el&&n.el()){let t=null;this.children_[i+1]&&(this.children_[i+1].el_?t=this.children_[i+1].el_:si(this.children_[i+1])&&(t=this.children_[i+1])),this.contentEl().insertBefore(n.el(),t)}return n}removeChild(t){if("string"==typeof t&&(t=this.getChild(t)),!t||!this.children_)return;let e=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===t){e=!0,this.children_.splice(i,1);break}if(!e)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[xn(t.name())]=null,this.childNameIndex_[Sn(t.name())]=null;const i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){const t=this.options_.children;if(t){const e=this.options_,i=t=>{const i=t.name;let n=t.opts;if(void 0!==e[i]&&(n=e[i]),!1===n)return;!0===n&&(n={}),n.playerOptions=this.options_.playerOptions;const r=this.addChild(i,n);r&&(this[i]=r)};let n;const r=En.getComponent("Tech");n=Array.isArray(t)?t:Object.keys(t),n.concat(Object.keys(this.options_).filter((function(t){return!n.some((function(e){return"string"==typeof e?t===e:t===e.name}))}))).map((e=>{let i,n;return"string"==typeof e?(i=e,n=t[i]||this.options_[i]||{}):(i=e.name,n=e),{name:i,opts:n}})).filter((t=>{const e=En.getComponent(t.opts.componentClass||xn(t.name));return e&&!r.isTech(e)})).forEach(i)}}buildCSSClass(){return""}ready(t,e=!1){if(t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))}triggerReady(){this.isReady_=!0,this.setTimeout((function(){const t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach((function(t){t.call(this)}),this),this.trigger("ready")}),1)}$(t,e){return Li(t,e||this.contentEl())}$$(t,e){return Oi(t,e||this.contentEl())}hasClass(t){return hi(this.el_,t)}addClass(...t){di(this.el_,...t)}removeClass(...t){pi(this.el_,...t)}toggleClass(t,e){fi(this.el_,t,e)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return yi(this.el_,t)}setAttribute(t,e){vi(this.el_,t,e)}removeAttribute(t){bi(this.el_,t)}width(t,e){return this.dimension("width",t,e)}height(t,e){return this.dimension("height",t,e)}dimensions(t,e){this.width(t,!0),this.height(e)}dimension(t,e,i){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;const n=this.el_.style[t],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+xn(t)],10)}currentDimension(t){let e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(e=Di(this.el_,t),e=parseFloat(e),0===e||isNaN(e)){const i=`offset${xn(t)}`;e=this.el_[i]}return e}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(l().isEventKey(t,"Tab")||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t,e=0,i=null;this.on("touchstart",(function(n){1===n.touches.length&&(i={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=r().performance.now(),t=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)t=!1;else if(i){const n=e.touches[0].pageX-i.pageX,r=e.touches[0].pageY-i.pageY;Math.sqrt(n*n+r*r)>10&&(t=!1)}}));const n=function(){t=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",(function(n){i=null,!0===t&&r().performance.now()-e<200&&(n.preventDefault(),this.trigger("tap"))}))}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const t=sn(this.player(),this.player().reportUserActivity);let e;this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));const i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(t,e){var i;return t=sn(this,t),this.clearTimersOnDispose_(),i=r().setTimeout((()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),t()}),e),this.setTimeoutIds_.add(i),i}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),r().clearTimeout(t)),t}setInterval(t,e){t=sn(this,t),this.clearTimersOnDispose_();const i=r().setInterval(t,e);return this.setIntervalIds_.add(i),i}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),r().clearInterval(t)),t}requestAnimationFrame(t){var e;return this.clearTimersOnDispose_(),t=sn(this,t),e=r().requestAnimationFrame((()=>{this.rafIds_.has(e)&&this.rafIds_.delete(e),t()})),this.rafIds_.add(e),e}requestNamedAnimationFrame(t,e){if(this.namedRafs_.has(t))return;this.clearTimersOnDispose_(),e=sn(this,e);const i=this.requestAnimationFrame((()=>{e(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)}));return this.namedRafs_.set(t,i),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),r().cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((([t,e])=>{this[t].forEach(((t,i)=>this[e](i)))})),this.clearingTimersOnDispose_=!1})))}static registerComponent(t,e){if("string"!=typeof t||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);const i=En.getComponent("Tech"),n=i&&i.isTech(e),r=En===e||En.prototype.isPrototypeOf(e.prototype);if(n||!r){let e;throw e=n?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${t}"; ${e}.`)}t=xn(t),En.components_||(En.components_={});const s=En.getComponent("Player");if("Player"===t&&s&&s.players){const t=s.players,e=Object.keys(t);if(t&&e.length>0&&e.map((e=>t[e])).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return En.components_[t]=e,En.components_[Sn(t)]=e,e}static getComponent(t){if(t&&En.components_)return En.components_[t]}}function In(t,e,i,n){return function(t,e,i){if("number"!=typeof e||e<0||e>i)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${i}).`)}(t,n,i.length-1),i[n][e]}function Pn(t){let e;return e=void 0===t||0===t.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:In.bind(null,"start",0,t),end:In.bind(null,"end",1,t)},r().Symbol&&r().Symbol.iterator&&(e[r().Symbol.iterator]=()=>(t||[]).values()),e}function An(t,e){return Array.isArray(t)?Pn(t):void 0===t||void 0===e?Pn():Pn([[t,e]])}En.registerComponent("Component",En);const Ln=function(t,e){t=t<0?0:t;let i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=n=i="-"),r=r>0||a>0?r+":":"",n=((r||s>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,r+n+i};let On=Ln;function Dn(t){On=t}function Mn(){On=Ln}function Rn(t,e=t){return On(t,e)}var Nn=Object.freeze({__proto__:null,createTimeRanges:An,createTimeRange:An,setFormatTime:Dn,resetFormatTime:Mn,formatTime:Rn});function Bn(t,e){let i,n,r=0;if(!e)return 0;t&&t.length||(t=An(0,0));for(let s=0;s<t.length;s++)i=t.start(s),n=t.end(s),n>e&&(n=e),r+=n-i;return r/e}function Fn(t){if(t instanceof Fn)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:Oe(t)&&("number"==typeof t.code&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=Fn.defaultMessages[this.code]||"")}Fn.prototype.code=0,Fn.prototype.message="",Fn.prototype.status=null,Fn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Fn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let t=0;t<Fn.errorTypes.length;t++)Fn[Fn.errorTypes[t]]=t,Fn.prototype[Fn.errorTypes[t]]=t;function $n(t){return null!=t&&"function"==typeof t.then}function Un(t){$n(t)&&t.then(null,(t=>{}))}const jn=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(((e,i,n)=>(t[i]&&(e[i]=t[i]),e)),{cues:t.cues&&Array.prototype.map.call(t.cues,(function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}}))})};const Vn="vjs-modal-dialog";class Hn extends En{constructor(t,e){super(t,e),this.handleKeyDown_=t=>this.handleKeyDown(t),this.close_=t=>this.close(t),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=li("div",{className:`${Vn}-content`},{role:"document"}),this.descEl_=li("p",{className:`${Vn}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),ci(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Vn} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(!this.opened_){const t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if("boolean"==typeof t){const e=this.closeable_=!!t;let i=this.getChild("closeButton");if(e&&!i){const t=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=t,this.on(i,"close",this.close_)}!e&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){const e=this.contentEl(),i=e.parentNode,n=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(e),this.empty(),Pi(e,t),this.trigger("modalfill"),n?i.insertBefore(e,n):i.appendChild(e);const r=this.getChild("closeButton");r&&i.appendChild(r.el_)}empty(){this.trigger("beforemodalempty"),Ci(this.contentEl()),this.trigger("modalempty")}content(t){return void 0!==t&&(this.content_=t),this.content_}conditionalFocus_(){const t=a().activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(t.stopPropagation(),l().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(!l().isEventKey(t,"Tab"))return;const e=this.focusableEls_(),i=this.el_.querySelector(":focus");let n;for(let t=0;t<e.length;t++)if(i===e[t]){n=t;break}a().activeElement===this.el_&&(n=0),t.shiftKey&&0===n?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||n!==e.length-1||(e[0].focus(),t.preventDefault())}focusableEls_(){const t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(t=>(t instanceof r().HTMLAnchorElement||t instanceof r().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof r().HTMLInputElement||t instanceof r().HTMLSelectElement||t instanceof r().HTMLTextAreaElement||t instanceof r().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof r().HTMLIFrameElement||t instanceof r().HTMLObjectElement||t instanceof r().HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")))}}Hn.prototype.options_={pauseOnOpen:!0,temporary:!0},En.registerComponent("ModalDialog",Hn);class qn extends un{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let e=0;e<t.length;e++)this.addTrack(t[e])}addTrack(t){const e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},dn(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let e;for(let i=0,n=this.length;i<n;i++)if(this[i]===t){e=this[i],e.off&&e.off(),this.tracks_.splice(i,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})}getTrackById(t){let e=null;for(let i=0,n=this.length;i<n;i++){const n=this[i];if(n.id===t){e=n;break}}return e}}qn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in qn.prototype.allowedEvents_)qn.prototype["on"+t]=null;const Wn=function(t,e){for(let i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].enabled=!1)},zn=function(t,e){for(let i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].selected=!1)};class Gn extends qn{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Kn{constructor(t){Kn.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){const e=this.length||0;let i=0;const n=t.length;this.cues_=t,this.length_=t.length;const r=function(t){""+t in this||Object.defineProperty(this,""+t,{get(){return this.cues_[t]}})};if(e<n)for(i=e;i<n;i++)r.call(this,i)}getCueById(t){let e=null;for(let i=0,n=this.length;i<n;i++){const n=this[i];if(n.id===t){e=n;break}}return e}}const Yn={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Xn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Qn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Jn={disabled:"disabled",hidden:"hidden",showing:"showing"};class Zn extends un{constructor(t={}){super();const e={id:t.id||"vjs_track_"+Wi(),kind:t.kind||"",language:t.language||""};let i=t.label||"";for(const t in e)Object.defineProperty(this,t,{get:()=>e[t],set(){}});Object.defineProperty(this,"label",{get:()=>i,set(t){t!==i&&(i=t,this.trigger("labelchange"))}})}}const tr=function(t){const e=["protocol","hostname","port","pathname","search","hash","host"],i=a().createElement("a");i.href=t;const n={};for(let t=0;t<e.length;t++)n[e[t]]=i[e[t]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=r().location.protocol),n.host||(n.host=r().location.host),n},er=function(t){if(!t.match(/^https?:\/\//)){const e=a().createElement("a");e.href=t,t=e.href}return t},ir=function(t){if("string"==typeof t){const e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""},nr=function(t,e=r().location){const i=tr(t);return(":"===i.protocol?e.protocol:i.protocol)+i.host!==e.protocol+e.host};var rr=Object.freeze({__proto__:null,parseUrl:tr,getAbsoluteURL:er,getFileExtension:ir,isCrossOrigin:nr});const sr=function(t,e){const i=new(r().WebVTT.Parser)(r(),r().vttjs,r().WebVTT.StringDecoder()),n=[];i.oncue=function(t){e.addCue(t)},i.onparsingerror=function(t){n.push(t)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),n.length>0&&(r().console&&r().console.groupCollapsed&&r().console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach((t=>Ce.error(t))),r().console&&r().console.groupEnd&&r().console.groupEnd()),i.flush()},ar=function(t,e){const i={uri:t},n=nr(t);n&&(i.cors=n);const s="use-credentials"===e.tech_.crossOrigin();s&&(i.withCredentials=s),d()(i,sn(this,(function(t,i,n){if(t)return Ce.error(t,i);e.loaded_=!0,"function"!=typeof r().WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],(t=>{if("vttjserror"!==t.type)return sr(n,e);Ce.error(`vttjs failed to load, stopping trying to process ${e.src}`)})):sr(n,e)})))};class or extends Zn{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");const e=Me(t,{kind:Qn[t.kind]||"subtitles",language:t.language||t.srclang||""});let i=Jn[e.mode]||"disabled";const n=e.default;"metadata"!==e.kind&&"chapters"!==e.kind||(i="hidden"),super(e),this.tech_=e.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const r=new Kn(this.cues_),s=new Kn(this.activeCues_);let a=!1;this.timeupdateHandler=sn(this,(function(t={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1),"timeupdate"!==t.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==t.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),this.tech_.one("dispose",(()=>{this.stopTracking()})),"disabled"!==i&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>n,set(){}},mode:{get:()=>i,set(t){Jn[t]&&i!==t&&(i=t,this.preload_||"disabled"===i||0!==this.cues.length||ar(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return s;const t=this.tech_.currentTime(),e=[];for(let i=0,n=this.cues.length;i<n;i++){const n=this.cues[i];n.startTime<=t&&n.endTime>=t&&e.push(n)}if(a=!1,e.length!==this.activeCues_.length)a=!0;else for(let t=0;t<e.length;t++)-1===this.activeCues_.indexOf(e[t])&&(a=!0);return this.activeCues_=e,s.setCues_(this.activeCues_),s},set(){}}}),e.src?(this.src=e.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==e.kind&&"captions"!==e.kind)&&ar(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let e=t;if(r().vttjs&&!(t instanceof r().vttjs.VTTCue)){e=new(r().vttjs.VTTCue)(t.startTime,t.endTime,t.text);for(const i in t)i in e||(e[i]=t[i]);e.id=t.id,e.originalCue_=t}const i=this.tech_.textTracks();for(let t=0;t<i.length;t++)i[t]!==this&&i[t].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)}removeCue(t){let e=this.cues_.length;for(;e--;){const i=this.cues_[e];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}}}or.prototype.allowedEvents_={cuechange:"cuechange"};class lr extends Zn{constructor(t={}){const e=Me(t,{kind:Xn[t.kind]||""});super(e);let i=!1;Object.defineProperty(this,"enabled",{get:()=>i,set(t){"boolean"==typeof t&&t!==i&&(i=t,this.trigger("enabledchange"))}}),e.enabled&&(this.enabled=e.enabled),this.loaded_=!0}}class cr extends Zn{constructor(t={}){const e=Me(t,{kind:Yn[t.kind]||""});super(e);let i=!1;Object.defineProperty(this,"selected",{get:()=>i,set(t){"boolean"==typeof t&&t!==i&&(i=t,this.trigger("selectedchange"))}}),e.selected&&(this.selected=e.selected)}}class ur extends un{constructor(t={}){let e;super();const i=new or(t);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get:()=>e},track:{get:()=>i}}),e=ur.NONE,i.addEventListener("loadeddata",(()=>{e=ur.LOADED,this.trigger({type:"load",target:this})}))}}ur.prototype.allowedEvents_={load:"load"},ur.NONE=0,ur.LOADING=1,ur.LOADED=2,ur.ERROR=3;const hr={audio:{ListClass:class extends qn{constructor(t=[]){for(let e=t.length-1;e>=0;e--)if(t[e].enabled){Wn(t,t[e]);break}super(t),this.changing_=!1}addTrack(t){t.enabled&&Wn(this,t),super.addTrack(t),t.addEventListener&&(t.enabledChange_=()=>{this.changing_||(this.changing_=!0,Wn(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}},TrackClass:lr,capitalName:"Audio"},video:{ListClass:class extends qn{constructor(t=[]){for(let e=t.length-1;e>=0;e--)if(t[e].selected){zn(t,t[e]);break}super(t),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(t){t.selected&&zn(this,t),super.addTrack(t),t.addEventListener&&(t.selectedChange_=()=>{this.changing_||(this.changing_=!0,zn(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)}},TrackClass:cr,capitalName:"Video"},text:{ListClass:Gn,TrackClass:or,capitalName:"Text"}};Object.keys(hr).forEach((function(t){hr[t].getterName=`${t}Tracks`,hr[t].privateName=`${t}Tracks_`}));const dr={remoteText:{ListClass:Gn,TrackClass:or,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(t=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let e=0,i=t.length;e<i;e++)this.addTrackElement_(t[e])}addTrackElement_(t){const e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)}getTrackElementByTrack_(t){let e;for(let i=0,n=this.trackElements_.length;i<n;i++)if(t===this.trackElements_[i].track){e=this.trackElements_[i];break}return e}removeTrackElement_(t){for(let e=0,i=this.trackElements_.length;e<i;e++)if(t===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}}},TrackClass:ur,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},pr=Object.assign({},hr,dr);dr.names=Object.keys(dr),hr.names=Object.keys(hr),pr.names=[].concat(dr.names).concat(hr.names);class fr extends En{constructor(t={},e=function(){}){t.reportTouchActivity=!1,super(null,t,e),this.onDurationChange_=t=>this.onDurationChange(t),this.trackProgress_=t=>this.trackProgress(t),this.trackCurrentTime_=t=>this.trackCurrentTime(t),this.stopTrackingCurrentTime_=t=>this.stopTrackingCurrentTime(t),this.disposeSourceHandler_=t=>this.disposeSourceHandler(t),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",(function(){this.hasStarted_=!0})),this.on("loadstart",(function(){this.hasStarted_=!1})),pr.names.forEach((e=>{const i=pr[e];t&&t[i.getterName]&&(this[i.privateName]=t[i.getterName])})),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((e=>{!1===t[`native${e}Tracks`]&&(this[`featuresNative${e}Tracks`]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==t.preloadTextTracks,this.autoRemoteTextTracks_=new pr.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",(()=>this.setTimeout((()=>this.triggerSourceset(t)),1))),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(sn(this,(function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()})),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return An(0,0)}bufferedPercent(){return Bn(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(hr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){(t=[].concat(t)).forEach((t=>{const e=this[`${t}Tracks`]()||[];let i=e.length;for(;i--;){const n=e[i];"text"===t&&this.removeRemoteTextTrack(n),e.removeTrack(n)}}))}cleanupAutoTextTracks(){const t=this.autoRemoteTextTracks_||[];let e=t.length;for(;e--;){const i=t[e];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return void 0!==t&&(this.error_=new Fn(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?An(0,0):An()}play(){}setScrubbing(){}scrubbing(){}setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){hr.names.forEach((t=>{const e=hr[t],i=()=>{this.trigger(`${t}trackchange`)},n=this[e.getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),this.on("dispose",(()=>{n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)}))}))}addWebVttScript_(){if(!r().WebVTT)if(a().body.contains(this.el())){if(!this.options_["vtt.js"]&&De(f())&&Object.keys(f()).length>0)return void this.trigger("vttjsloaded");const t=a().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",(()=>{t.onload=null,t.onerror=null})),r().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const t=this.textTracks(),e=this.remoteTextTracks(),i=e=>t.addTrack(e.track),n=e=>t.removeTrack(e.track);e.on("addtrack",i),e.on("removetrack",n),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),s=()=>{r();for(let e=0;e<t.length;e++){const i=t[e];i.removeEventListener("cuechange",r),"showing"===i.mode&&i.addEventListener("cuechange",r)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){e.off("addtrack",i),e.off("removetrack",n),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(let e=0;e<t.length;e++)t[e].removeEventListener("cuechange",r)}))}addTextTrack(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,i,n,r={}){const s=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;const a=new pr.text.TrackClass(r);return s.addTrack(a),a}(this,t,e,i)}createRemoteTextTrack(t){const e=Me(t,{tech:this});return new dr.remoteTextEl.TrackClass(e)}addRemoteTextTrack(t={},e){const i=this.createRemoteTextTrack(t);return"boolean"!=typeof e&&(e=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!1===e&&this.ready((()=>this.autoRemoteTextTracks_.addTrack(i.track))),i}removeRemoteTextTrack(t){const e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){const e=Wi();return!this.isReady_||this.paused()?(this.queuedHanders_.add(e),this.one("playing",(()=>{this.queuedHanders_.has(e)&&(this.queuedHanders_.delete(e),t())}))):this.requestNamedAnimationFrame(e,t),e}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(){}overrideNativeVideoTracks(){}canPlayType(){return""}static canPlayType(){return""}static canPlaySource(t,e){return fr.canPlayType(t.type)}static isTech(t){return t.prototype instanceof fr||t instanceof fr||t===fr}static registerTech(t,e){if(fr.techs_||(fr.techs_={}),!fr.isTech(e))throw new Error(`Tech ${t} must be a Tech`);if(!fr.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!fr.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=xn(t),fr.techs_[t]=e,fr.techs_[Sn(t)]=e,"Tech"!==t&&fr.defaultTechOrder_.push(t),e}static getTech(t){if(t)return fr.techs_&&fr.techs_[t]?fr.techs_[t]:(t=xn(t),r()&&r().videojs&&r().videojs[t]?(Ce.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),r().videojs[t]):void 0)}}pr.names.forEach((function(t){const e=pr[t];fr.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}})),fr.prototype.featuresVolumeControl=!0,fr.prototype.featuresMuteControl=!0,fr.prototype.featuresFullscreenResize=!1,fr.prototype.featuresPlaybackRate=!1,fr.prototype.featuresProgressEvents=!1,fr.prototype.featuresSourceset=!1,fr.prototype.featuresTimeupdateEvents=!1,fr.prototype.featuresNativeTextTracks=!1,fr.prototype.featuresVideoFrameCallback=!1,fr.withSourceHandlers=function(t){t.registerSourceHandler=function(e,i){let n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,e)},t.canPlayType=function(e){const i=t.sourceHandlers||[];let n;for(let t=0;t<i.length;t++)if(n=i[t].canPlayType(e),n)return n;return""},t.selectSourceHandler=function(e,i){const n=t.sourceHandlers||[];let r;for(let t=0;t<n.length;t++)if(r=n[t].canHandleSource(e,i),r)return n[t];return null},t.canPlaySource=function(e,i){const n=t.selectSourceHandler(e,i);return n?n.canHandleSource(e,i):""},["seekable","seeking","duration"].forEach((function(t){const e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})}),t.prototype),t.prototype.setSource=function(e){let i=t.selectSourceHandler(e,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:Ce.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=i.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},En.registerComponent("Tech",fr),fr.registerTech("Tech",fr),fr.defaultTechOrder_=[];const mr={},gr={},yr={};function vr(t,e,i){t.setTimeout((()=>xr(e,mr[e.type],i,t)),1)}function br(t,e,i,n=null){const r="call"+xn(i),s=t.reduce(Sr(r),n),a=s===yr,o=a?null:e[i](s);return function(t,e,i,n){for(let r=t.length-1;r>=0;r--){const s=t[r];s[e]&&s[e](n,i)}}(t,i,o,a),o}const _r={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},wr={setCurrentTime:1,setMuted:1,setVolume:1},Tr={play:1,pause:1};function Sr(t){return(e,i)=>e===yr?yr:i[t]?i[t](e):e}function xr(t={},e=[],i,n,r=[],s=!1){const[a,...o]=e;if("string"==typeof a)xr(t,mr[a],i,n,r,s);else if(a){const e=function(t,e){const i=gr[t.id()];let n=null;if(null==i)return n=e(t),gr[t.id()]=[[e,n]],n;for(let t=0;t<i.length;t++){const[r,s]=i[t];r===e&&(n=s)}return null===n&&(n=e(t),i.push([e,n])),n}(n,a);if(!e.setSource)return r.push(e),xr(t,o,i,n,r,s);e.setSource(Object.assign({},t),(function(a,l){if(a)return xr(t,o,i,n,r,s);r.push(e),xr(l,t.type===l.type?o:mr[l.type],i,n,r,s)}))}else o.length?xr(t,o,i,n,r,s):s?i(t,r):xr(t,mr["*"],i,n,r,!0)}const kr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Cr=function(t=""){const e=ir(t);return kr[e.toLowerCase()]||""},Er=function(t){if(Array.isArray(t)){let e=[];t.forEach((function(t){t=Er(t),Array.isArray(t)?e=e.concat(t):Oe(t)&&e.push(t)})),t=e}else t="string"==typeof t&&t.trim()?[Ir({src:t})]:Oe(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Ir(t)]:[];return t};function Ir(t){if(!t.type){const e=Cr(t.src);e&&(t.type=e)}return t}En.registerComponent("MediaLoader",class extends En{constructor(t,e,i){if(super(t,Me({createEl:!1},e),i),e.playerOptions.sources&&0!==e.playerOptions.sources.length)t.src(e.playerOptions.sources);else for(let i=0,n=e.playerOptions.techOrder;i<n.length;i++){const e=xn(n[i]);let r=fr.getTech(e);if(e||(r=En.getComponent(e)),r&&r.isSupported()){t.loadTech_(e);break}}}});class Pr extends En{constructor(t,e){super(t,e),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=t=>this.handleMouseOver(t),this.handleMouseOut_=t=>this.handleMouseOut(t),this.handleClick_=t=>this.handleClick(t),this.handleKeyDown_=t=>this.handleKeyDown(t),this.emitTapEvents(),this.enable()}createEl(t="div",e={},i={}){e=Object.assign({className:this.buildCSSClass(),tabIndex:0},e),"button"===t&&Ce.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=e.tabIndex;const n=li(t,e,i);return n.appendChild(li("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=li("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,e=this.el()){if(void 0===t)return this.controlText_||"Need Text";const i=this.localize(t);this.controlText_=t,ci(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||e.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){l().isEventKey(t,"Space")||l().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}En.registerComponent("ClickableComponent",Pr);class Ar extends Pr{constructor(t,e){super(t,e),this.update(),this.update_=t=>this.update(t),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return li("picture",{className:"vjs-poster",tabIndex:-1},{},li("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))}crossOrigin(t){if(void 0===t)return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===t||"anonymous"===t||"use-credentials"===t?this.el_.querySelector("img").crossOrigin=t:this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}update(t){const e=this.player().poster();this.setSrc(e),e?this.show():this.hide()}setSrc(t){this.el_.querySelector("img").src=t}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Un(this.player_.play()):this.player_.pause())}}Ar.prototype.crossorigin=Ar.prototype.crossOrigin,En.registerComponent("PosterImage",Ar);const Lr="#222",Or="#ccc",Dr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Mr(t,e){let i;if(4===t.length)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");i=t.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function Rr(t,e,i){try{t.style[e]=i}catch(t){return}}En.registerComponent("TextTrackDisplay",class extends En{constructor(t,e,i){super(t,e,i);const n=t=>this.updateDisplay(t);t.on("loadstart",(t=>this.toggleDisplay(t))),t.on("texttrackchange",n),t.on("loadedmetadata",(t=>this.preselectTrack(t))),t.ready(sn(this,(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)return void this.hide();t.on("fullscreenchange",n),t.on("playerresize",n);const e=r().screen.orientation||r(),i=r().screen.orientation?"change":"orientationchange";e.addEventListener(i,n),t.on("dispose",(()=>e.removeEventListener(i,n)));const s=this.options_.playerOptions.tracks||[];for(let t=0;t<s.length;t++)this.player_.addRemoteTextTrack(s[t],!0);this.preselectTrack()})))}preselectTrack(){const t={captions:1,subtitles:1},e=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let n,r,s;for(let a=0;a<e.length;a++){const o=e[a];i&&i.enabled&&i.language&&i.language===o.language&&o.kind in t?o.kind===i.kind?s=o:s||(s=o):i&&!i.enabled?(s=null,n=null,r=null):o.default&&("descriptions"!==o.kind||n?o.kind in t&&!r&&(r=o):n=o)}s?s.mode="showing":r?r.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof r().WebVTT&&r().WebVTT.processCues(r(),[],this.el_)}updateDisplay(){const t=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),e){const e=[];for(let i=0;i<t.length;++i){const n=t[i];"showing"===n.mode&&e.push(n)}return void this.updateForTrack(e)}let i=null,n=null,r=t.length;for(;r--;){const e=t[r];"showing"===e.mode&&("descriptions"===e.kind?i=e:n=e)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):i&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))}updateDisplayState(t){const e=this.player_.textTrackSettings.getValues(),i=t.activeCues;let n=i.length;for(;n--;){const t=i[n];if(!t)continue;const s=t.displayState;if(e.color&&(s.firstChild.style.color=e.color),e.textOpacity&&Rr(s.firstChild,"color",Mr(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(s.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&Rr(s.firstChild,"backgroundColor",Mr(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?Rr(s,"backgroundColor",Mr(e.windowColor,e.windowOpacity)):s.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?s.firstChild.style.textShadow=`2px 2px 3px ${Lr}, 2px 2px 4px ${Lr}, 2px 2px 5px ${Lr}`:"raised"===e.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${Lr}, 2px 2px ${Lr}, 3px 3px ${Lr}`:"depressed"===e.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${Or}, 0 1px ${Or}, -1px -1px ${Lr}, 0 -1px ${Lr}`:"uniform"===e.edgeStyle&&(s.firstChild.style.textShadow=`0 0 4px ${Lr}, 0 0 4px ${Lr}, 0 0 4px ${Lr}, 0 0 4px ${Lr}`)),e.fontPercent&&1!==e.fontPercent){const t=r().parseFloat(s.style.fontSize);s.style.fontSize=t*e.fontPercent+"px",s.style.height="auto",s.style.top="auto"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Dr[e.fontFamily])}}updateForTrack(t){if(Array.isArray(t)||(t=[t]),"function"!=typeof r().WebVTT||t.every((t=>!t.activeCues)))return;const e=[];for(let i=0;i<t.length;++i){const n=t[i];for(let t=0;t<n.activeCues.length;++t)e.push(n.activeCues[t])}r().WebVTT.processCues(r(),e,this.el_);for(let e=0;e<t.length;++e){const i=t[e];for(let t=0;t<i.activeCues.length;++t){const n=i.activeCues[t].displayState;di(n,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:e)),i.language&&vi(n,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),En.registerComponent("LoadingSpinner",class extends En{createEl(){const t=this.player_.isAudio(),e=this.localize(t?"Audio Player":"Video Player"),i=li("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[e])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n}});class Nr extends Pr{createEl(t,e={},i={}){const n=li("button",e=Object.assign({className:this.buildCSSClass()},e),i=Object.assign({type:"button"},i));return n.appendChild(li("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(t,e={}){const i=this.constructor.name;return Ce.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),En.prototype.addChild.call(this,t,e)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){l().isEventKey(t,"Space")||l().isEventKey(t,"Enter")?t.stopPropagation():super.handleKeyDown(t)}}En.registerComponent("Button",Nr);class Br extends Nr{constructor(t,e){super(t,e),this.mouseused_=!1,this.on("mousedown",(t=>this.handleMouseDown(t)))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){const e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)return Un(e),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(!n)return void this.player_.tech(!0).focus();const r=()=>n.focus();$n(e)?e.then(r,(()=>{})):this.setTimeout(r,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}}Br.prototype.controlText_="Play Video",En.registerComponent("BigPlayButton",Br),En.registerComponent("CloseButton",class extends Nr{constructor(t,e){super(t,e),this.controlText(e&&e.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(t){this.trigger({type:"close",bubbles:!1})}handleKeyDown(t){l().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}});class Fr extends Nr{constructor(t,e={}){super(t,e),e.replay=void 0===e.replay||e.replay,this.on(t,"play",(t=>this.handlePlay(t))),this.on(t,"pause",(t=>this.handlePause(t))),e.replay&&this.on(t,"ended",(t=>this.handleEnded(t)))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?Un(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(t=>this.handleSeeked(t)))}}Fr.prototype.controlText_="Play",En.registerComponent("PlayToggle",Fr);class $r extends En{constructor(t,e){super(t,e),this.on(t,["timeupdate","ended"],(t=>this.updateContent(t))),this.updateTextNode_()}createEl(){const t=this.buildCSSClass(),e=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),i=li("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return e.appendChild(i),this.contentEl_=li("span",{className:`${t}-display`},{"aria-live":"off",role:"presentation"}),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(t=0){t=Rn(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Ce.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=a().createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))})))}updateContent(t){}}$r.prototype.labelText_="Time",$r.prototype.controlText_="Time",En.registerComponent("TimeDisplay",$r);class Ur extends $r{buildCSSClass(){return"vjs-current-time"}updateContent(t){let e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)}}Ur.prototype.labelText_="Current Time",Ur.prototype.controlText_="Current Time",En.registerComponent("CurrentTimeDisplay",Ur);class jr extends $r{constructor(t,e){super(t,e);const i=t=>this.updateContent(t);this.on(t,"durationchange",i),this.on(t,"loadstart",i),this.on(t,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(t){const e=this.player_.duration();this.updateTextNode_(e)}}jr.prototype.labelText_="Duration",jr.prototype.controlText_="Duration",En.registerComponent("DurationDisplay",jr),En.registerComponent("TimeDivider",class extends En{createEl(){const t=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),e=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return e.appendChild(i),t.appendChild(e),t}});class Vr extends $r{constructor(t,e){super(t,e),this.on(t,"durationchange",(t=>this.updateContent(t)))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const t=super.createEl();return!1!==this.options_.displayNegative&&t.insertBefore(li("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if("number"!=typeof this.player_.duration())return;let e;e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e)}}Vr.prototype.labelText_="Remaining Time",Vr.prototype.controlText_="Remaining Time",En.registerComponent("RemainingTimeDisplay",Vr),En.registerComponent("LiveDisplay",class extends En{constructor(t,e){super(t,e),this.updateShowing(),this.on(this.player(),"durationchange",(t=>this.updateShowing(t)))}createEl(){const t=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=li("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(li("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(a().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,super.dispose()}updateShowing(t){this.player().duration()===1/0?this.show():this.hide()}});class Hr extends Nr{constructor(t,e){super(t,e),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=t=>this.updateLiveEdgeStatus(t),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=li("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function qr(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}Hr.prototype.controlText_="Seek to live, currently playing live",En.registerComponent("SeekToLive",Hr);var Wr=Object.freeze({__proto__:null,clamp:qr});class zr extends En{constructor(t,e){super(t,e),this.handleMouseDown_=t=>this.handleMouseDown(t),this.handleMouseUp_=t=>this.handleMouseUp(t),this.handleKeyDown_=t=>this.handleKeyDown(t),this.handleClick_=t=>this.handleClick(t),this.handleMouseMove_=t=>this.handleMouseMove(t),this.update_=t=>this.update(t),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,e={},i={}){return e.className=e.className+" vjs-slider",e=Object.assign({tabIndex:0},e),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(t,e,i)}handleMouseDown(t){const e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||qe||t.preventDefault(),_i(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove_),this.on(e,"mouseup",this.handleMouseUp_),this.on(e,"touchmove",this.handleMouseMove_),this.on(e,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(){const t=this.bar.el_.ownerDocument;wi(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(()=>{const e=this.vertical()?"height":"width";this.bar.el().style[e]=(100*t).toFixed(2)+"%"}))),t}getProgress(){return Number(qr(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){const e=xi(this.el_,t);return this.vertical()?e.y:e.x}handleKeyDown(t){l().isEventKey(t,"Left")||l().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):l().isEventKey(t,"Right")||l().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}En.registerComponent("Slider",zr);const Gr=(t,e)=>qr(t/e*100,0,100).toFixed(2)+"%";En.registerComponent("LoadProgressBar",class extends En{constructor(t,e){super(t,e),this.partEls_=[],this.on(t,"progress",(t=>this.update(t)))}createEl(){const t=super.createEl("div",{className:"vjs-load-progress"}),e=li("span",{className:"vjs-control-text"}),i=li("span",{textContent:this.localize("Loaded")}),n=a().createTextNode(": ");return this.percentageEl_=li("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(e),e.appendChild(i),e.appendChild(n),e.appendChild(this.percentageEl_),t}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(t){this.requestNamedAnimationFrame("LoadProgressBar#update",(()=>{const t=this.player_.liveTracker,e=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),n=this.player_.bufferedEnd(),r=this.partEls_,s=Gr(n,i);this.percent_!==s&&(this.el_.style.width=s,ci(this.percentageEl_,s),this.percent_=s);for(let t=0;t<e.length;t++){const i=e.start(t),s=e.end(t);let a=r[t];a||(a=this.el_.appendChild(li()),r[t]=a),a.dataset.start===i&&a.dataset.end===s||(a.dataset.start=i,a.dataset.end=s,a.style.left=Gr(i,n),a.style.width=Gr(s-i,n))}for(let t=r.length;t>e.length;t--)this.el_.removeChild(r[t-1]);r.length=e.length}))}}),En.registerComponent("TimeTooltip",class extends En{constructor(t,e){super(t,e),this.update=an(sn(this,this.update),rn)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(t,e,i){const n=Si(this.el_),r=Ti(this.player_.el()),s=t.width*e;if(!r||!n)return;const a=t.left-r.left+s,o=t.width-s+(r.right-t.right);let l=n.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(i)}write(t){ci(this.el_,t)}updateTime(t,e,i,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",(()=>{let r;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const t=this.player_.liveTracker.liveWindow(),i=t-e*t;r=(i<1?"":"-")+Rn(i,t)}else r=Rn(i,s);this.update(t,e,r),n&&n()}))}});class Kr extends En{constructor(t,e){super(t,e),this.update=an(sn(this,this.update),rn)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,e){const i=this.getChild("timeTooltip");if(!i)return;const n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,e,n)}}Kr.prototype.options_={children:[]},ti||Ue||Kr.prototype.options_.children.push("timeTooltip"),En.registerComponent("PlayProgressBar",Kr);class Yr extends En{constructor(t,e){super(t,e),this.update=an(sn(this,this.update),rn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,e){const i=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,i,(()=>{this.el_.style.left=t.width*e+"px"}))}}Yr.prototype.options_={children:["timeTooltip"]},En.registerComponent("MouseTimeDisplay",Yr);class Xr extends zr{constructor(t,e){super(t,e),this.setEventHandlers_()}setEventHandlers_(){this.update_=sn(this,this.update),this.update=an(this.update_,rn),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a()&&"visibilityState"in a()&&this.on(a(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){"hidden"===a().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,rn))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if("hidden"===a().visibilityState)return;const e=super.update();return this.requestNamedAnimationFrame("SeekBar#update",(()=>{const t=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let n=this.player_.duration();i&&i.isLive()&&(n=this.player_.liveTracker.liveCurrentTime()),this.percent_!==e&&(this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.percent_=e),this.currentTime_===t&&this.duration_===n||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Rn(t,n),Rn(n,n)],"{1} of {2}")),this.currentTime_=t,this.duration_=n),this.bar&&this.bar.update(Ti(this.el()),this.getProgress())})),e}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const t=this.getCurrentTime_();let e;const i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e}handleMouseDown(t){Ai(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,e=!1){if(!Ai(t))return;let i;e||this.player_.scrubbing()||this.player_.scrubbing(!0);const n=this.calculateDistance(t),r=this.player_.liveTracker;if(r&&r.isLive()){if(n>=.99)return void r.seekToLiveEdge();const t=r.seekableStart(),e=r.liveCurrentTime();if(i=t+n*r.liveWindow(),i>=e&&(i=e),i<=t&&(i=t+.1),i===1/0)return}else i=n*this.player_.duration(),i===this.player_.duration()&&(i-=.1);this.userSeek_(i)}enable(){super.enable();const t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();const t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Un(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){const e=this.player_.liveTracker;if(l().isEventKey(t,"Space")||l().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(l().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(l().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),e&&e.isLive()?this.userSeek_(e.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(l()(t))){t.preventDefault(),t.stopPropagation();const i=10*(l().codes[l()(t)]-l().codes[0])/100;e&&e.isLive()?this.userSeek_(e.seekableStart()+e.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else l().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):l().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a()&&"visibilityState"in a()&&this.off(a(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Xr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ti||Ue||Xr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),En.registerComponent("SeekBar",Xr);class Qr extends En{constructor(t,e){super(t,e),this.handleMouseMove=an(sn(this,this.handleMouseMove),rn),this.throttledHandleMouseSeek=an(sn(this,this.handleMouseSeek),rn),this.handleMouseUpHandler_=t=>this.handleMouseUp(t),this.handleMouseDownHandler_=t=>this.handleMouseDown(t),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){const e=this.getChild("seekBar");if(!e)return;const i=e.getChild("playProgressBar"),n=e.getChild("mouseTimeDisplay");if(!i&&!n)return;const r=e.el(),s=Si(r);let a=xi(r,t).x;a=qr(a,0,1),n&&n.update(s,a),i&&i.update(s,e.getProgress())}handleMouseSeek(t){const e=this.getChild("seekBar");e&&e.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach((t=>t.disable&&t.disable())),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Un(this.player_.play())}}enable(){this.children().forEach((t=>t.enable&&t.enable())),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){const e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const e=this.getChild("seekBar");e&&e.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}}Qr.prototype.options_={children:["seekBar"]},En.registerComponent("ProgressControl",Qr);class Jr extends Nr{constructor(t,e){super(t,e),this.on(t,["enterpictureinpicture","leavepictureinpicture"],(t=>this.handlePictureInPictureChange(t))),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],(t=>this.handlePictureInPictureEnabledChange(t))),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(()=>{"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),this.hide()):this.show()})),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){a().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}Jr.prototype.controlText_="Picture-in-Picture",En.registerComponent("PictureInPictureToggle",Jr);class Zr extends Nr{constructor(t,e){super(t,e),this.on(t,"fullscreenchange",(t=>this.handleFullscreenChange(t))),!1===a()[t.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Zr.prototype.controlText_="Fullscreen",En.registerComponent("FullscreenToggle",Zr),En.registerComponent("VolumeLevel",class extends En{createEl(){const t=super.createEl("div",{className:"vjs-volume-level"});return t.appendChild(super.createEl("span",{className:"vjs-control-text"})),t}}),En.registerComponent("VolumeLevelTooltip",class extends En{constructor(t,e){super(t,e),this.update=an(sn(this,this.update),rn)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t,e,i,n){if(!i){const i=Ti(this.el_),n=Ti(this.player_.el()),r=t.width*e;if(!n||!i)return;const s=t.left-n.left+r,a=t.width-r+(n.right-t.right);let o=i.width/2;s<o?o+=o-s:a<o&&(o=a),o<0?o=0:o>i.width&&(o=i.width),this.el_.style.right=`-${o}px`}this.write(`${n}%`)}write(t){ci(this.el_,t)}updateVolume(t,e,i,n,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(()=>{this.update(t,e,i,n.toFixed(0)),r&&r()}))}});class ts extends En{constructor(t,e){super(t,e),this.update=an(sn(this,this.update),rn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,e,i){const n=100*e;this.getChild("volumeLevelTooltip").updateVolume(t,e,i,n,(()=>{i?this.el_.style.bottom=t.height*e+"px":this.el_.style.left=t.width*e+"px"}))}}ts.prototype.options_={children:["volumeLevelTooltip"]},En.registerComponent("MouseVolumeLevelDisplay",ts);class es extends zr{constructor(t,e){super(t,e),this.on("slideractive",(t=>this.updateLastVolume_(t))),this.on(t,"volumechange",(t=>this.updateARIAAttributes(t))),t.ready((()=>this.updateARIAAttributes()))}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){Ai(t)&&super.handleMouseDown(t)}handleMouseMove(t){const e=this.getChild("mouseVolumeLevelDisplay");if(e){const i=this.el(),n=Ti(i),r=this.vertical();let s=xi(i,t);s=r?s.y:s.x,s=qr(s,0,1),e.update(n,s,r)}Ai(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){const e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const t=this.player_.volume();this.one("sliderinactive",(()=>{0===this.player_.volume()&&this.player_.lastVolume_(t)}))}}es.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ti||Ue||es.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),es.prototype.playerEvent="volumechange",En.registerComponent("VolumeBar",es);class is extends En{constructor(t,e={}){e.vertical=e.vertical||!1,(void 0===e.volumeBar||De(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),super(t,e),function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",(function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))}(this,t),this.throttledHandleMouseMove=an(sn(this,this.handleMouseMove),rn),this.handleMouseUpHandler_=t=>this.handleMouseUp(t),this.on("mousedown",(t=>this.handleMouseDown(t))),this.on("touchstart",(t=>this.handleMouseDown(t))),this.on("mousemove",(t=>this.handleMouseMove(t))),this.on(this.volumeBar,["focus","slideractive"],(()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){const e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}}is.prototype.options_={children:["volumeBar"]},En.registerComponent("VolumeControl",is);class ns extends Nr{constructor(t,e){super(t,e),function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",(function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))}(this,t),this.on(t,["loadstart","volumechange"],(t=>this.update(t)))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){const e=this.player_.volume(),i=this.player_.lastVolume_();if(0===e){const t=i<.1?.1:i;this.player_.volume(t),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const t=this.player_.volume();let e=3;ti&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2),pi(this.el_,[0,1,2,3].reduce(((t,e)=>t+`${e?" ":""}vjs-vol-${e}`),"")),di(this.el_,`vjs-vol-${e}`)}updateControlText_(){const t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}ns.prototype.controlText_="Mute",En.registerComponent("MuteToggle",ns);class rs extends En{constructor(t,e={}){void 0!==e.inline?e.inline=e.inline:e.inline=!0,(void 0===e.volumeControl||De(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),super(t,e),this.handleKeyPressHandler_=t=>this.handleKeyPress(t),this.on(t,["loadstart"],(t=>this.volumePanelState_(t))),this.on(this.muteToggle,"keyup",(t=>this.handleKeyPress(t))),this.on(this.volumeControl,"keyup",(t=>this.handleVolumeControlKeyUp(t))),this.on("keydown",(t=>this.handleKeyPress(t))),this.on("mouseover",(t=>this.handleMouseOver(t))),this.on("mouseout",(t=>this.handleMouseOut(t))),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){l().isEventKey(t,"Esc")&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),Qi(a(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),Ji(a(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){l().isEventKey(t,"Esc")&&this.handleMouseOut()}}rs.prototype.options_={children:["muteToggle","volumeControl"]},En.registerComponent("VolumePanel",rs);class ss extends En{constructor(t,e){super(t,e),e&&(this.menuButton_=e.menuButton),this.focusedChild_=-1,this.on("keydown",(t=>this.handleKeyDown(t))),this.boundHandleBlur_=t=>this.handleBlur(t),this.boundHandleTapClick_=t=>this.handleTapClick(t)}addEventListenerForItem(t){t instanceof En&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof En&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){const e=this.addChild(t);e&&this.addEventListenerForItem(e)}createEl(){const t=this.options_.contentElType||"ul";this.contentEl_=li(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const e=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),Qi(e,"click",(function(t){t.preventDefault(),t.stopImmediatePropagation()})),e}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){const e=t.relatedTarget||a().activeElement;if(!this.children().some((t=>t.el()===e))){const t=this.menuButton_;t&&t.buttonPressed_&&e!==t.el().firstChild&&t.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();const e=this.children();if(!Array.isArray(e))return;const i=e.filter((e=>e.el()===t.target))[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}}handleKeyDown(t){l().isEventKey(t,"Left")||l().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(l().isEventKey(t,"Right")||l().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){const e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())}}En.registerComponent("Menu",ss);class as extends En{constructor(t,e={}){super(t,e),this.menuButton_=new Nr(t,e),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Nr.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=t=>this.handleClick(t);this.handleMenuKeyUp_=t=>this.handleMenuKeyUp(t),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",(t=>this.handleKeyDown(t))),this.on(this.menuButton_,"mouseenter",(()=>{this.addClass("vjs-hover"),this.menu.show(),Qi(a(),"keyup",this.handleMenuKeyUp_)})),this.on("mouseleave",(t=>this.handleMouseLeave(t))),this.on("keydown",(t=>this.handleSubmenuKeyDown(t)))}update(){const t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const t=new ss(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const e=li("li",{className:"vjs-menu-title",textContent:xn(this.options_.title),tabIndex:-1}),i=new En(this.player_,{el:e});t.addItem(i)}if(this.items=this.createItems(),this.items)for(let e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${Nr.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,e=this.menuButton_.el()){return this.menuButton_.controlText(t,e)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),Ji(a(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){l().isEventKey(t,"Esc")||l().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),l().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(l().isEventKey(t,"Up")||l().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))}handleMenuKeyUp(t){(l().isEventKey(t,"Esc")||l().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){(l().isEventKey(t,"Esc")||l().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),l().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ti&&ai())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}En.registerComponent("MenuButton",as);class os extends as{constructor(t,e){const i=e.tracks;if(super(t,e),this.items.length<=1&&this.hide(),!i)return;const n=sn(this,this.update);i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),i.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",(function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n),i.removeEventListener("labelchange",n)}))}}En.registerComponent("TrackButton",os);const ls=["Tab","Esc","Up","Down","Right","Left"];class cs extends Pr{constructor(t,e){super(t,e),this.selectable=e.selectable,this.isSelected_=e.selected||!1,this.multiSelectable=e.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,e,i){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},e),i);return n.replaceChild(li("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(t){ls.some((e=>l().isEventKey(t,e)))||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}En.registerComponent("MenuItem",cs);class us extends cs{constructor(t,e){const i=e.track,n=t.textTracks();e.label=i.label||i.language||"Unknown",e.selected="showing"===i.mode,super(t,e),this.track=i,this.kinds=(e.kinds||[e.kind||this.track.kind]).filter(Boolean);const s=(...t)=>{this.handleTracksChange.apply(this,t)},o=(...t)=>{this.handleSelectedLanguageChange.apply(this,t)};if(t.on(["loadstart","texttrackchange"],s),n.addEventListener("change",s),n.addEventListener("selectedlanguagechange",o),this.on("dispose",(function(){t.off(["loadstart","texttrackchange"],s),n.removeEventListener("change",s),n.removeEventListener("selectedlanguagechange",o)})),void 0===n.onchange){let t;this.on(["tap","click"],(function(){if("object"!=typeof r().Event)try{t=new(r().Event)("change")}catch(t){}t||(t=a().createEvent("Event"),t.initEvent("change",!0,!0)),n.dispatchEvent(t)}))}this.handleTracksChange()}handleClick(t){const e=this.track,i=this.player_.textTracks();if(super.handleClick(t),i)for(let t=0;t<i.length;t++){const n=i[t];-1!==this.kinds.indexOf(n.kind)&&(n===e?"showing"!==n.mode&&(n.mode="showing"):"disabled"!==n.mode&&(n.mode="disabled"))}}handleTracksChange(t){const e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)}handleSelectedLanguageChange(t){if("showing"===this.track.mode){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}En.registerComponent("TextTrackMenuItem",us);class hs extends us{constructor(t,e){e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,super(t,e)}handleTracksChange(t){const e=this.player().textTracks();let i=!0;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(this.options_.kinds.indexOf(n.kind)>-1&&"showing"===n.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(t){const e=this.player().textTracks();let i=!0;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(["captions","descriptions","subtitles"].indexOf(n.kind)>-1&&"showing"===n.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}}En.registerComponent("OffTextTrackMenuItem",hs);class ds extends os{constructor(t,e={}){e.tracks=t.textTracks(),super(t,e)}createItems(t=[],e=us){let i;this.label_&&(i=`${this.label_} off`),t.push(new hs(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let i=0;i<n.length;i++){const r=n[i];if(this.kinds_.indexOf(r.kind)>-1){const i=new e(this.player_,{track:r,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});i.addClass(`vjs-${r.kind}-menu-item`),t.push(i)}}return t}}En.registerComponent("TextTrackButton",ds);class ps extends cs{constructor(t,e){const i=e.track,n=e.cue,r=t.currentTime();e.selectable=!0,e.multiSelectable=!1,e.label=n.text,e.selected=n.startTime<=r&&r<n.endTime,super(t,e),this.track=i,this.cue=n}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}En.registerComponent("ChaptersTrackMenuItem",ps);class fs extends ds{constructor(t,e,i){super(t,e,i),this.selectCurrentItem_=()=>{this.items.forEach((t=>{t.selected(this.track_.activeCues[0]===t.cue)}))}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&"chapters"!==t.track.kind)return;const e=this.findChaptersTrack();e!==this.track_?(this.setTrack(e),super.update()):(!this.items||e&&e.cues&&e.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const t=this.player_.textTracks()||[];for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(xn(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const t=[];if(!this.track_)return t;const e=this.track_.cues;if(!e)return t;for(let i=0,n=e.length;i<n;i++){const n=e[i],r=new ps(this.player_,{track:this.track_,cue:n});t.push(r)}return t}}fs.prototype.kind_="chapters",fs.prototype.controlText_="Chapters",En.registerComponent("ChaptersButton",fs);class ms extends ds{constructor(t,e,i){super(t,e,i);const n=t.textTracks(),r=sn(this,this.handleTracksChange);n.addEventListener("change",r),this.on("dispose",(function(){n.removeEventListener("change",r)}))}handleTracksChange(t){const e=this.player().textTracks();let i=!1;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n.kind!==this.kind_&&"showing"===n.mode){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}ms.prototype.kind_="descriptions",ms.prototype.controlText_="Descriptions",En.registerComponent("DescriptionsButton",ms);class gs extends ds{constructor(t,e,i){super(t,e,i)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}gs.prototype.kind_="subtitles",gs.prototype.controlText_="Subtitles",En.registerComponent("SubtitlesButton",gs);class ys extends us{constructor(t,e){e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",super(t,e),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+e.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}}En.registerComponent("CaptionSettingsMenuItem",ys);class vs extends ds{constructor(t,e,i){super(t,e,i)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ys(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}}vs.prototype.kind_="captions",vs.prototype.controlText_="Captions",En.registerComponent("CaptionsButton",vs);class bs extends us{createEl(t,e,i){const n=super.createEl(t,e,i),r=n.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(r.appendChild(li("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(li("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}}En.registerComponent("SubsCapsMenuItem",bs);class _s extends ds{constructor(t,e={}){super(t,e),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(xn(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ys(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,bs),t}}_s.prototype.kinds_=["captions","subtitles"],_s.prototype.controlText_="Subtitles",En.registerComponent("SubsCapsButton",_s);class ws extends cs{constructor(t,e){const i=e.track,n=t.audioTracks();e.label=i.label||i.language||"Unknown",e.selected=i.enabled,super(t,e),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const r=(...t)=>{this.handleTracksChange.apply(this,t)};n.addEventListener("change",r),this.on("dispose",(()=>{n.removeEventListener("change",r)}))}createEl(t,e,i){const n=super.createEl(t,e,i),r=n.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(r.appendChild(li("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(li("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let e=0;e<t.length;e++){const i=t[e];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}}En.registerComponent("AudioTrackMenuItem",ws);class Ts extends os{constructor(t,e={}){e.tracks=t.audioTracks(),super(t,e)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;const e=this.player_.audioTracks();for(let i=0;i<e.length;i++){const n=e[i];t.push(new ws(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t}}Ts.prototype.controlText_="Audio Track",En.registerComponent("AudioTrackButton",Ts);class Ss extends cs{constructor(t,e){const i=e.rate,n=parseFloat(i,10);e.label=i,e.selected=n===t.playbackRate(),e.selectable=!0,e.multiSelectable=!1,super(t,e),this.label=i,this.rate=n,this.on(t,"ratechange",(t=>this.update(t)))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}}Ss.prototype.contentElType="button",En.registerComponent("PlaybackRateMenuItem",Ss);class xs extends as{constructor(t,e){super(t,e),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",(t=>this.updateVisibility(t))),this.on(t,"ratechange",(t=>this.updateLabel(t))),this.on(t,"playbackrateschange",(t=>this.handlePlaybackRateschange(t)))}createEl(){const t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=li("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const t=this.playbackRates(),e=[];for(let i=t.length-1;i>=0;i--)e.push(new Ss(this.player(),{rate:t[i]+"x"}));return e}handlePlaybackRateschange(t){this.update()}playbackRates(){const t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}xs.prototype.controlText_="Playback Rate",En.registerComponent("PlaybackRateMenuButton",xs);class ks extends En{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",e={},i={}){return e.className||(e.className=this.buildCSSClass()),super.createEl(t,e,i)}}En.registerComponent("Spacer",ks),En.registerComponent("CustomControlSpacer",class extends ks{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}});class Cs extends En{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Cs.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in a()&&Cs.prototype.options_.children.splice(Cs.prototype.options_.children.length-1,0,"pictureInPictureToggle"),En.registerComponent("ControlBar",Cs);class Es extends Hn{constructor(t,e){super(t,e),this.on(t,"error",(t=>this.open(t)))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const t=this.player().error();return t?this.localize(t.message):""}}Es.prototype.options_=Object.assign({},Hn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),En.registerComponent("ErrorDisplay",Es);const Is="vjs-text-track-settings",Ps=["#000","Black"],As=["#00F","Blue"],Ls=["#0FF","Cyan"],Os=["#0F0","Green"],Ds=["#F0F","Magenta"],Ms=["#F00","Red"],Rs=["#FFF","White"],Ns=["#FF0","Yellow"],Bs=["1","Opaque"],Fs=["0.5","Semi-Transparent"],$s=["0","Transparent"],Us={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ps,Rs,Ms,Os,As,Ns,Ds,Ls]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Bs,Fs,$s]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Rs,Ps,Ms,Os,As,Ns,Ds,Ls]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>"1.00"===t?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Bs,Fs]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[$s,Fs,Bs]}};function js(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}Us.windowColor.options=Us.backgroundColor.options,En.registerComponent("TextTrackSettings",class extends Hn{constructor(t,e){e.temporary=!1,super(t,e),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=li("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===e.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",(()=>{this.saveSettings(),this.close()})),this.on(this.$(".vjs-default-button"),"click",(()=>{this.setDefaults(),this.updateDisplay()})),Ae(Us,(t=>{this.on(this.$(t.selector),"change",this.updateDisplay)})),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(t,e="",i="label"){const n=Us[t],r=n.id.replace("%s",this.id_),s=[e,r].join(" ").trim();return[`<${i} id="${r}" class="${"label"===i?"vjs-label":""}">`,this.localize(n.label),`</${i}>`,`<select aria-labelledby="${s}">`].concat(n.options.map((t=>{const e=r+"-"+t[1].replace(/\W+/g,"");return[`<option id="${e}" value="${t[0]}" `,`aria-labelledby="${s} ${e}">`,this.localize(t[1]),"</option>"].join("")}))).concat("</select>").join("")}createElFgColor_(){const t=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg-color vjs-track-setting">',`<legend id="${t}">`,this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")}createElBgColor_(){const t=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg-color vjs-track-setting">',`<legend id="${t}">`,this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")}createElWinColor_(){const t=`captions-window-${this.id_}`;return['<fieldset class="vjs-window-color vjs-track-setting">',`<legend id="${t}">`,this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")}createElColors_(){return li("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return li("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const t=this.localize("restore all settings to the default values");return li("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${t}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${t}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Le(Us,((t,e,i)=>{const n=(r=this.$(e.selector),s=e.parser,js(r.options[r.options.selectedIndex].value,s));var r,s;return void 0!==n&&(t[i]=n),t}),{})}setValues(t){Ae(Us,((e,i)=>{!function(t,e,i){if(e)for(let n=0;n<t.options.length;n++)if(js(t.options[n].value,i)===e){t.selectedIndex=n;break}}(this.$(e.selector),t[i],e.parser)}))}setDefaults(){Ae(Us,(t=>{const e=t.hasOwnProperty("default")?t.default:0;this.$(t.selector).selectedIndex=e}))}restoreSettings(){let t;try{t=JSON.parse(r().localStorage.getItem(Is))}catch(t){Ce.warn(t)}t&&this.setValues(t)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const t=this.getValues();try{Object.keys(t).length?r().localStorage.setItem(Is,JSON.stringify(t)):r().localStorage.removeItem(Is)}catch(t){Ce.warn(t)}}updateDisplay(){const t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const t=this.player_.controlBar,e=t&&t.subsCapsButton,i=t&&t.captionsButton;e?e.focus():i&&i.focus()}}),En.registerComponent("ResizeManager",class extends En{constructor(t,e){let i=e.ResizeObserver||r().ResizeObserver;null===e.ResizeObserver&&(i=!1),super(t,Me({createEl:!i,reportTouchActivity:!1},e)),this.ResizeObserver=e.ResizeObserver||r().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=on((()=>{this.resizeHandler()}),100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(t.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const t=this.debouncedHandler_;let e=this.unloadListener_=function(){Ji(this,"resize",t),Ji(this,"unload",e),e=null};Qi(this.el_.contentWindow,"unload",e),Qi(this.el_.contentWindow,"resize",t)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const Vs={trackingThreshold:20,liveTolerance:15};En.registerComponent("LiveTracker",class extends En{constructor(t,e){super(t,Me(Vs,e,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=t=>this.handlePlay(t),this.handleFirstTimeupdate_=t=>this.handleFirstTimeupdate(t),this.handleSeeked_=t=>this.handleSeeked(t),this.seekToLiveEdge_=t=>this.seekToLiveEdge(t),this.reset_(),this.on(this.player_,"durationchange",(t=>this.handleDurationchange(t))),this.on(this.player_,"canplay",(()=>this.toggleTracking()))}trackLive_(){const t=this.player_.seekable();if(!t||!t.length)return;const e=Number(r().performance.now().toFixed(4)),i=-1===this.lastTime_?0:(e-this.lastTime_)/1e3;this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+i;const n=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-s)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,rn),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const t=this.player_.seekable(),e=[];let i=t?t.length:0;for(;i--;)e.push(t.end(i));return e.length?e.sort()[e.length-1]:1/0}seekableStart(){const t=this.player_.seekable(),e=[];let i=t?t.length:0;for(;i--;)e.push(t.start(i));return e.length?e.sort()[0]:0}liveWindow(){const t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),En.registerComponent("TitleBar",class extends En{constructor(t,e){super(t,e),this.on("statechanged",(t=>this.updateDom_())),this.updateDom_()}createEl(){return this.els={title:li("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Wi()}`}),description:li("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Wi()}`})},li("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const t=this.player_.tech_,e=t&&t.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((t=>{const n=this.state[t],r=this.els[t],s=i[t];Ci(r),n&&ci(r,n),e&&(e.removeAttribute(s),n&&e.setAttribute(s,r.id))})),this.state.title||this.state.description?this.show():this.hide()}update(t){this.setState(t)}dispose(){const t=this.player_.tech_,e=t&&t.el_;e&&(e.removeAttribute("aria-labelledby"),e.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const Hs=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const i=t.$$("source"),n=[];let r="";if(!i.length)return!1;for(let t=0;t<i.length;t++){const e=i[t].src;e&&-1===n.indexOf(e)&&n.push(e)}return!!n.length&&(1===n.length&&(r=n[0]),t.triggerSourceset(r),!0)},qs=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=a().createElement(this.nodeName.toLowerCase());e.innerHTML=t;const i=a().createDocumentFragment();for(;e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",r().Element.prototype.appendChild.call(this,i),this.innerHTML}}),Ws=(t,e)=>{let i={};for(let n=0;n<t.length&&(i=Object.getOwnPropertyDescriptor(t[n],e),!(i&&i.set&&i.get));n++);return i.enumerable=!0,i.configurable=!0,i},zs=function(t){const e=t.el();if(e.resetSourceWatch_)return;const i={},n=(t=>Ws([t.el(),r().HTMLMediaElement.prototype,r().Element.prototype,qs],"innerHTML"))(t),s=i=>(...n)=>{const r=i.apply(e,n);return Hs(t),r};["append","appendChild","insertAdjacentHTML"].forEach((t=>{e[t]&&(i[t]=e[t],e[t]=s(i[t]))})),Object.defineProperty(e,"innerHTML",Me(n,{set:s(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(i).forEach((t=>{e[t]=i[t]})),Object.defineProperty(e,"innerHTML",n)},t.one("sourceset",e.resetSourceWatch_)},Gs=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?er(r().Element.prototype.getAttribute.call(this,"src")):""},set(t){return r().Element.prototype.setAttribute.call(this,"src",t),t}});class Ks extends fr{constructor(t,e){super(t,e);const i=t.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,i&&(this.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?this.setSource(i):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const t=this.el_.childNodes;let e=t.length;const i=[];for(;e--;){const r=t[e];"track"===r.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),this.textTracks().addTrack(r.track),n||this.el_.hasAttribute("crossorigin")||!nr(r.src)||(n=!0)):i.push(r))}for(let t=0;t<i.length;t++)this.el_.removeChild(i[t])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&Ce.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Je||Qe)&&!0===t.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ks.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=(t=>Ws([t.el(),r().HTMLMediaElement.prototype,Gs],"src"))(t),n=e.setAttribute,s=e.load;Object.defineProperty(e,"src",Me(i,{set:n=>{const r=i.set.call(e,n);return t.triggerSourceset(e.src),r}})),e.setAttribute=(i,r)=>{const s=n.call(e,i,r);return/src/i.test(i)&&t.triggerSourceset(e.src),s},e.load=()=>{const i=s.call(e);return Hs(t)||(t.triggerSourceset(""),zs(t)),i},e.currentSrc?t.triggerSourceset(e.currentSrc):Hs(t)||zs(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const t=this.textTracks();let e;const i=()=>{e=[];for(let i=0;i<t.length;i++){const n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",(()=>t.removeEventListener("change",i)));const n=()=>{for(let t=0;t<e.length;t++){const i=e[t];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(()=>{t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)})),this.on("webkitendfullscreen",(()=>{t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)}))}overrideNative_(t,e){if(e!==this[`featuresNative${t}Tracks`])return;const i=t.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach((t=>{this.el()[`${i}Tracks`].removeEventListener(t,this[`${i}TracksListeners_`][t])})),this[`featuresNative${t}Tracks`]=!e,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){const e=hr[t],i=this.el()[e.getterName],n=this[e.getterName]();if(!this[`featuresNative${e.capitalName}Tracks`]||!i||!i.addEventListener)return;const r={change:e=>{const i={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(i),"text"===t&&this[dr.remoteText.getterName]().trigger(i)},addtrack(t){n.addTrack(t.track)},removetrack(t){n.removeTrack(t.track)}},s=function(){const t=[];for(let e=0;e<n.length;e++){let r=!1;for(let t=0;t<i.length;t++)if(i[t]===n[e]){r=!0;break}r||t.push(n[e])}for(;t.length;)n.removeTrack(t.shift())};this[e.getterName+"Listeners_"]=r,Object.keys(r).forEach((t=>{const e=r[t];i.addEventListener(t,e),this.on("dispose",(n=>i.removeEventListener(t,e)))})),this.on("loadstart",s),this.on("dispose",(t=>this.off("loadstart",s)))}proxyNativeTracks_(){hr.names.forEach((t=>{this.proxyNativeTracksForType_(t)}))}createEl(){let t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){const e=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(e,t),Ks.disposeMediaElement(t),t=e}else{t=a().createElement("video");const e=Me({},this.options_.tag&&gi(this.options_.tag));Je&&!0===this.options_.nativeControlsForTouch||delete e.controls,mi(t,Object.assign(e,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&vi(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);const e=["loop","muted","playsinline","autoplay"];for(let i=0;i<e.length;i++){const n=e[i],r=this.options_[n];void 0!==r&&(r?vi(t,n,n):bi(t,n),t[n]=r)}return t}handleLateInit_(t){if(0===t.networkState||3===t.networkState)return;if(0===t.readyState){let t=!1;const e=function(){t=!0};this.on("loadstart",e);const i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",e),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}const e=["loadstart"];e.push("loadedmetadata"),t.readyState>=2&&e.push("loadeddata"),t.readyState>=3&&e.push("canplay"),t.readyState>=4&&e.push("canplaythrough"),this.ready((function(){e.forEach((function(t){this.trigger(t)}),this)}))}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&ei?this.el_.fastSeek(t):this.el_.currentTime=t}catch(t){Ce(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Ue&&qe&&0===this.el_.currentTime){const t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},e=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",e),this.on("dispose",(()=>{this.off("webkitbeginfullscreen",e),this.off("webkitendfullscreen",t)}))}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Un(this.el_.play()),this.setTimeout((function(){t.pause();try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(void 0===t)return this.el_.src;this.setSrc(t)}reset(){Ks.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,e,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,i):super.addTextTrack(t,e,i)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);const e=a().createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e}addRemoteTextTrack(t,e){const i=super.addRemoteTextTrack(t,e);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){const e=this.$$("track");let i=e.length;for(;i--;)t!==e[i]&&t!==e[i].track||this.el().removeChild(e[i])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),r().performance&&(t.creationTime=r().performance.now()),t}}Re(Ks,"TEST_VID",(function(){if(!ri())return;const t=a().createElement("video"),e=a().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t})),Ks.isSupported=function(){try{Ks.TEST_VID.volume=.5}catch(t){return!1}return!(!Ks.TEST_VID||!Ks.TEST_VID.canPlayType)},Ks.canPlayType=function(t){return Ks.TEST_VID.canPlayType(t)},Ks.canPlaySource=function(t,e){return Ks.canPlayType(t.type)},Ks.canControlVolume=function(){try{const t=Ks.TEST_VID.volume;Ks.TEST_VID.volume=t/2+.1;const e=t!==Ks.TEST_VID.volume;return e&&ti?(r().setTimeout((()=>{Ks&&Ks.prototype&&(Ks.prototype.featuresVolumeControl=t!==Ks.TEST_VID.volume)})),!1):e}catch(t){return!1}},Ks.canMuteVolume=function(){try{const t=Ks.TEST_VID.muted;return Ks.TEST_VID.muted=!t,Ks.TEST_VID.muted?vi(Ks.TEST_VID,"muted","muted"):bi(Ks.TEST_VID,"muted"),t!==Ks.TEST_VID.muted}catch(t){return!1}},Ks.canControlPlaybackRate=function(){if(Ue&&qe&&ze<58)return!1;try{const t=Ks.TEST_VID.playbackRate;return Ks.TEST_VID.playbackRate=t/2+.1,t!==Ks.TEST_VID.playbackRate}catch(t){return!1}},Ks.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(a().createElement("video"),"src",{get:t,set:t}),Object.defineProperty(a().createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(a().createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(a().createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Ks.supportsNativeTextTracks=function(){return ei||ti&&qe},Ks.supportsNativeVideoTracks=function(){return!(!Ks.TEST_VID||!Ks.TEST_VID.videoTracks)},Ks.supportsNativeAudioTracks=function(){return!(!Ks.TEST_VID||!Ks.TEST_VID.audioTracks)},Ks.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function([t,e]){Re(Ks.prototype,t,(()=>Ks[e]()),!0)})),Ks.prototype.featuresVolumeControl=Ks.canControlVolume(),Ks.prototype.movingMediaElementInDOM=!ti,Ks.prototype.featuresFullscreenResize=!0,Ks.prototype.featuresProgressEvents=!0,Ks.prototype.featuresTimeupdateEvents=!0,Ks.prototype.featuresVideoFrameCallback=!(!Ks.TEST_VID||!Ks.TEST_VID.requestVideoFrameCallback),Ks.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Ks.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let i=e.length;for(;i--;)t.removeChild(e[i]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(t){Ks.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(t){Ks.prototype["set"+xn(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(t){Ks.prototype[t]=function(){return this.el_[t]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(t){Ks.prototype["set"+xn(t)]=function(e){this.el_[t]=e}})),["pause","load","play"].forEach((function(t){Ks.prototype[t]=function(){return this.el_[t]()}})),fr.withSourceHandlers(Ks),Ks.nativeSourceHandler={},Ks.nativeSourceHandler.canPlayType=function(t){try{return Ks.TEST_VID.canPlayType(t)}catch(t){return""}},Ks.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ks.nativeSourceHandler.canPlayType(t.type);if(t.src){const e=ir(t.src);return Ks.nativeSourceHandler.canPlayType(`video/${e}`)}return""},Ks.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)},Ks.nativeSourceHandler.dispose=function(){},Ks.registerSourceHandler(Ks.nativeSourceHandler),fr.registerTech("Html5",Ks);const Ys=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Xs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qs=["tiny","xsmall","small","medium","large","xlarge","huge"],Js={};Qs.forEach((t=>{const e="x"===t.charAt(0)?`x-${t.substring(1)}`:t;Js[t]=`vjs-layout-${e}`}));const Zs={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class ta extends En{constructor(t,e,i){if(t.id=t.id||e.id||`vjs_video_${Wi()}`,(e=Object.assign(ta.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language){const i=t.closest("[lang]");i&&(e.language=i.getAttribute("lang"))}if(super(null,e,i),this.boundDocumentFullscreenChange_=t=>this.documentFullscreenChange_(t),this.boundFullWindowOnEscKey_=t=>this.fullWindowOnEscKey(t),this.boundUpdateStyleEl_=t=>this.updateStyleEl_(t),this.boundApplyInitTime_=t=>this.applyInitTime_(t),this.boundUpdateCurrentBreakpoint_=t=>this.updateCurrentBreakpoint_(t),this.boundHandleTechClick_=t=>this.handleTechClick_(t),this.boundHandleTechDoubleClick_=t=>this.handleTechDoubleClick_(t),this.boundHandleTechTouchStart_=t=>this.handleTechTouchStart_(t),this.boundHandleTechTouchMove_=t=>this.handleTechTouchMove_(t),this.boundHandleTechTouchEnd_=t=>this.handleTechTouchEnd_(t),this.boundHandleTechTap_=t=>this.handleTechTap_(t),this.isFullscreen_=!1,this.log=Ee(this.id_),this.fsApi_=we,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&gi(t),this.language(this.options_.language),e.languages){const t={};Object.getOwnPropertyNames(e.languages).forEach((function(i){t[i.toLowerCase()]=e.languages[i]})),this.languages_=t}else this.languages_=ta.prototype.options_.languages;this.resetCache_(),this.poster_=e.poster||"",this.controls_=!!e.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach((t=>{if("function"!=typeof this[t])throw new Error(`plugin "${t}" does not exist`)})),this.scrubbing_=!1,this.el_=this.createEl(),_n(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Qi(a(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=Me(this.options_);e.plugins&&Object.keys(e.plugins).forEach((t=>{this[t](e.plugins[t])})),e.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(e.playbackRates),this.initChildren(),this.isAudio("audio"===t.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Je&&this.addClass("vjs-touch-enabled"),ti||this.addClass("vjs-workinghover"),ta.players[this.id_]=this;const r=ye.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",(t=>this.listenForUserActivity_(t))),this.on("keydown",(t=>this.handleKeyDown(t))),this.on("languagechange",(t=>this.handleLanguagechange(t))),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",(()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)}))}dispose(){this.trigger("dispose"),this.off("dispose"),Ji(a(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ji(a(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),ta.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),gr[this.id()]=null,pr.names.forEach((t=>{const e=this[pr[t].getterName]();e&&e.off&&e.off()})),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t,e=this.tag,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const n="video-js"===this.tag.tagName.toLowerCase();i?t=this.el_=e.parentNode:n||(t=this.el_=super.createEl("div"));const s=gi(e);if(n){for(t=this.el_=e,e=this.tag=a().createElement("video");t.children.length;)e.appendChild(t.firstChild);hi(t,"video-js")||di(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach((i=>{try{e[i]=t[i]}catch(t){}}))}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",qe&&Ye&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(i){n&&"class"===i||t.setAttribute(i,s[i]),n&&e.setAttribute(i,s[i])})),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),!0!==r().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ui("vjs-styles-dimensions");const t=Li(".vjs-styles-defaults"),e=Li("head");e.insertBefore(this.styleEl_,t?t.nextSibling:e.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let t=0;t<o.length;t++){const e=o.item(t);di(e,"vjs-hidden"),e.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),ui(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(t){if(void 0===t)return this.techGet_("crossOrigin");null===t||"anonymous"===t||"use-credentials"===t?(this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)):Ce.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,e){const i=t+"_";if(void 0===e)return this[i]||0;if(""===e||"auto"===e)return this[i]=void 0,void this.updateStyleEl_();const n=parseFloat(e);isNaN(n)?Ce.error(`Improper value "${e}" supplied for for ${t}`):(this[i]=n,this.updateStyleEl_())}fluid(t){if(void 0===t)return!!this.fluid_;var e,i;this.fluid_=!!t,dn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),i=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},dn(e=this)?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===r().VIDEOJS_NO_DYNAMIC_STYLE){const t="number"==typeof this.width_?this.width_:this.options_.width,e="number"==typeof this.height_?this.height_:this.options_.height,i=this.tech_&&this.tech_.el();return void(i&&(t>=0&&(i.width=t),e>=0&&(i.height=e)))}let t,e,i,n;i=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=i.split(":"),a=s[1]/s[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),ji(this.styleEl_,`\n      .${n} {\n        width: ${t}px;\n        height: ${e}px;\n      }\n\n      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*a}%;\n      }\n    `)}loadTech_(t,e){this.tech_&&this.unloadTech_();const i=xn(t),n=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==i&&this.tag&&(fr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let r=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(r=!1);const s={source:e,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};pr.names.forEach((t=>{const e=pr[t];s[e.getterName]=this[e.privateName]})),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[t.toLowerCase()]),this.tag&&(s.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const a=fr.getTech(t);if(!a)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);var o,l;this.tech_=new a(s),this.tech_.ready(sn(this,this.handleTechReady_),!0),o=this.textTracksJson_||[],l=this.tech_,o.forEach((function(t){const e=l.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach((t=>e.addCue(t)))})),l.textTracks(),Ys.forEach((t=>{this.on(this.tech_,t,(e=>this[`handleTech${xn(t)}_`](e)))})),Object.keys(Xs).forEach((t=>{this.on(this.tech_,t,(e=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${Xs[t]}_`].bind(this),event:e}):this[`handleTech${Xs[t]}_`](e)}))})),this.on(this.tech_,"loadstart",(t=>this.handleTechLoadStart_(t))),this.on(this.tech_,"sourceset",(t=>this.handleTechSourceset_(t))),this.on(this.tech_,"waiting",(t=>this.handleTechWaiting_(t))),this.on(this.tech_,"ended",(t=>this.handleTechEnded_(t))),this.on(this.tech_,"seeking",(t=>this.handleTechSeeking_(t))),this.on(this.tech_,"play",(t=>this.handleTechPlay_(t))),this.on(this.tech_,"pause",(t=>this.handleTechPause_(t))),this.on(this.tech_,"durationchange",(t=>this.handleTechDurationChange_(t))),this.on(this.tech_,"fullscreenchange",((t,e)=>this.handleTechFullscreenChange_(t,e))),this.on(this.tech_,"fullscreenerror",((t,e)=>this.handleTechFullscreenError_(t,e))),this.on(this.tech_,"enterpictureinpicture",(t=>this.handleTechEnterPictureInPicture_(t))),this.on(this.tech_,"leavepictureinpicture",(t=>this.handleTechLeavePictureInPicture_(t))),this.on(this.tech_,"error",(t=>this.handleTechError_(t))),this.on(this.tech_,"posterchange",(t=>this.handleTechPosterChange_(t))),this.on(this.tech_,"textdata",(t=>this.handleTechTextData_(t))),this.on(this.tech_,"ratechange",(t=>this.handleTechRateChange_(t))),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||ui(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){pr.names.forEach((t=>{const e=pr[t];this[e.privateName]=this[e.getterName]()})),this.textTracksJson_=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,(t=>t.track));return Array.prototype.map.call(e,(function(t){const e=jn(t.track);return t.src&&(e.src=t.src),e})).concat(Array.prototype.filter.call(t.textTracks(),(function(t){return-1===i.indexOf(t)})).map(jn))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return void 0===t&&Ce.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||"string"!=typeof t)return;const e=()=>{const t=this.muted();this.muted(!0);const e=()=>{this.muted(t)};this.playTerminatedQueue_.push(e);const i=this.play();if($n(i))return i.catch((t=>{throw e(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${t||""}`)}))};let i;return"any"!==t||this.muted()?i="muted"!==t||this.muted()?this.play():e():(i=this.play(),$n(i)&&(i=i.catch(e))),$n(i)?i.then((()=>{this.trigger({type:"autoplay-success",autoplay:t})})).catch((()=>{this.trigger({type:"autoplay-failure",autoplay:t})})):void 0}updateSourceCaches_(t=""){let e=t,i="";"string"!=typeof e&&(e=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!i&&(i=((t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const i=t.cache_.sources.filter((t=>t.src===e));if(i.length)return i[0].type;const n=t.$$("source");for(let t=0;t<n.length;t++){const i=n[t];if(i.type&&i.src&&i.src===e)return i.type}return Cr(e)})(this,e)),this.cache_.source=Me({},t,{src:e,type:i});const n=this.cache_.sources.filter((t=>t.src&&t.src===e)),r=[],s=this.$$("source"),a=[];for(let t=0;t<s.length;t++){const i=gi(s[t]);r.push(i),i.src&&i.src===e&&a.push(i.src)}a.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e}handleTechSourceset_(t){if(!this.changingSrc_){let e=t=>this.updateSourceCaches_(t);const i=this.currentSource().src,n=t.src;i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==i)&&(e=()=>{}),e(n),t.src||this.tech_.any(["sourceset","loadstart"],(t=>{if("sourceset"===t.type)return;const e=this.techGet("currentSrc");this.lastSource_.tech=e,this.updateSourceCaches_(e)}))}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((t=>t.callback(t.event))),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const t=this.currentTime(),e=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",e))};this.on("timeupdate",e)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?Un(this.play()):this.pause()))}handleTechDoubleClick_(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(e=>e.contains(t.target)))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){const e=t.target.player;if(e&&e!==this)return;const i=this.el();let n=a()[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(t,e){e&&(e.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(()=>{this.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(e.isFullscreen))}handleTechFullscreenError_(t,e){this.trigger("fullscreenerror",e)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){const t=this.tech_.error();this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,e){this.ready((function(){if(t in wr)return function(t,e,i,n){return e[i](t.reduce(Sr(i),n))}(this.middleware_,this.tech_,t,e);if(t in Tr)return br(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(t){throw Ce(t),t}}),!0)}techGet_(t){if(this.tech_&&this.tech_.isReady_){if(t in _r)return function(t,e,i){return t.reduceRight(Sr(i),e[i]())}(this.middleware_,this.tech_,t);if(t in Tr)return br(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw Ce(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,e),e;if("TypeError"===e.name)throw Ce(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,e),this.tech_.isReady_=!1,e;throw Ce(e),e}}}play(){return new Promise((t=>{this.play_(t)}))}play_(t=Un){this.playCallbacks_.push(t);const e=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!e)return this.waitToPlay_=t=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(e||!ei&&!ti||this.load());const i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach((function(t){t()}))}runPlayCallbacks_(t){const e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach((function(e){e(t)}))}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||An(0,0)}scrubbing(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){return void 0!==t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return t&&t.length||(t=An(0,0)),t}bufferedPercent(){return Bn(this.buffered(),this.duration())}bufferedEnd(){const t=this.buffered(),e=this.duration();let i=t.end(t.length-1);return i>e&&(i=e),i}volume(t){let e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)}muted(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)}defaultMuted(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1}lastVolume_(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(void 0!==t){const e=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();const e=this;return new Promise(((i,n)=>{function r(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){r(),i()}function a(t,e){r(),n(e)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.requestFullscreenHelper_(t);o&&(o.then(r,r),o.then(i,n))}))}requestFullscreenHelper_(t){let e;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(e=t)),this.fsApi_.requestFullscreen){const t=this.el_[this.fsApi_.requestFullscreen](e);return t&&t.then((()=>this.isFullscreen(!0)),(()=>this.isFullscreen(!1))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const t=this;return new Promise(((e,i)=>{function n(){t.off("fullscreenerror",s),t.off("fullscreenchange",r)}function r(){n(),e()}function s(t,e){n(),i(e)}t.one("fullscreenchange",r),t.one("fullscreenerror",s);const a=t.exitFullscreenHelper_();a&&(a.then(n,n),a.then(e,i))}))}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const t=a()[this.fsApi_.exitFullscreen]();return t&&Un(t.then((()=>this.isFullscreen(!1)))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=a().documentElement.style.overflow,Qi(a(),"keydown",this.boundFullWindowOnEscKey_),a().documentElement.style.overflow="hidden",di(a().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){l().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ji(a(),"keydown",this.boundFullWindowOnEscKey_),a().documentElement.style.overflow=this.docOrigOverflow,pi(a().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if("pictureInPictureEnabled"in a()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")}exitPictureInPicture(){if("pictureInPictureEnabled"in a())return a().exitPictureInPicture()}handleKeyDown(t){const{userActions:e}=this.options_;e&&e.hotkeys&&((t=>{const e=t.tagName.toLowerCase();return!!t.isContentEditable||("input"===e?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(e))})(this.el_.ownerDocument.activeElement)||("function"==typeof e.hotkeys?e.hotkeys.call(this,t):this.handleHotkeys(t)))}handleHotkeys(t){const e=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=(t=>l().isEventKey(t,"f")),muteKey:n=(t=>l().isEventKey(t,"m")),playPauseKey:r=(t=>l().isEventKey(t,"k")||l().isEventKey(t,"Space"))}=e;if(i.call(this,t)){t.preventDefault(),t.stopPropagation();const e=En.getComponent("FullscreenToggle");!1!==a()[this.fsApi_.fullscreenEnabled]&&e.prototype.handleClick.call(this,t)}else n.call(this,t)?(t.preventDefault(),t.stopPropagation(),En.getComponent("MuteToggle").prototype.handleClick.call(this,t)):r.call(this,t)&&(t.preventDefault(),t.stopPropagation(),En.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let e;for(let i=0,n=this.options_.techOrder;i<n.length;i++){const r=n[i];let s=fr.getTech(r);if(s||(s=En.getComponent(r)),s){if(s.isSupported()&&(e=s.canPlayType(t),e))return e}else Ce.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(t){const e=this.options_.techOrder.map((t=>[t,fr.getTech(t)])).filter((([t,e])=>e?e.isSupported():(Ce.error(`The "${t}" tech is undefined. Skipped browser support check for that tech.`),!1))),i=function(t,e,i){let n;return t.some((t=>e.some((e=>{if(n=i(t,e),n)return!0})))),n};let n;const r=([t,e],i)=>{if(e.canPlaySource(i,this.options_[t.toLowerCase()]))return{source:i,tech:t}};var s;return n=this.options_.sourceOrder?i(t,e,(s=r,(t,e)=>s(e,t))):i(e,t,r),n||!1}handleSrc_(t,e){if(void 0===t)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=Er(t);if(i.length){if(this.changingSrc_=!0,e||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),vr(this,i[0],((t,n)=>{if(this.middleware_=n,e||(this.cache_.sources=i),this.updateSourceCaches_(t),this.src_(t))return i.length>1?this.handleSrc_(i.slice(1)):(this.changingSrc_=!1,this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void this.triggerReady());var r,s;r=n,s=this.tech_,r.forEach((t=>t.setTech&&t.setTech(s)))})),i.length>1){const t=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},e=()=>{this.off("error",t)};this.one("error",t),this.one("playing",e),this.resetRetryOnError_=()=>{this.off("error",t),this.off("playing",e)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}src(t){return this.handleSrc_(t,!1)}src_(t){const e=this.selectSource([t]);return!e||(kn(e.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(e.tech,e.source),this.tech_.ready((()=>{this.changingSrc_=!1})),!1))}load(){this.techCall_("load")}reset(){this.paused()?this.doReset_():Un(this.play().then((()=>this.doReset_())))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),dn(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{durationDisplay:t,remainingTimeDisplay:e}=this.controlBar||{};t&&t.updateContent(),e&&e.updateContent()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")}autoplay(t){if(void 0===t)return this.options_.autoplay||!1;let e;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),e=!1):this.options_.autoplay=!!t,e=void 0===e?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)}playsinline(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")}loop(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")}poster(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(void 0===t)return this.error_||null;if(be("beforeerror").forEach((e=>{const i=e(this,t);Oe(i)&&!Array.isArray(i)||"string"==typeof i||"number"==typeof i||null===i?t=i:this.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&t&&4===t.code){const e=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e),void this.one("loadstart",(function(){this.off(["click","touchstart"],e)}))}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Fn(t),this.addClass("vjs-error"),Ce.error(`(CODE:${this.error_.code} ${Fn.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),be("error").forEach((t=>t(this,this.error_)))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(t){t.stopPropagation(),t.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,e,i;const n=sn(this,this.reportUserActivity),r=function(e){n(),this.clearInterval(t)};this.on("mousedown",(function(){n(),this.clearInterval(t),t=this.setInterval(n,250)})),this.on("mousemove",(function(t){t.screenX===e&&t.screenY===i||(e=t.screenX,i=t.screenY,n())})),this.on("mouseup",r),this.on("mouseleave",r);const s=this.getChild("controlBar");let a;!s||ti||Ue||(s.on("mouseenter",(function(t){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(t){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",n),this.on("keyup",n),this.setInterval((function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);const t=this.options_.inactivityTimeout;t<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),t))}),250)}playbackRate(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)}defaultPlaybackRate(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const t=this.children(),e=this.getChild("ControlBar"),i=e&&e.currentHeight();t.forEach((t=>{t!==e&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),this.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((t=>t.show())),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then((()=>this.enableAudioOnlyUI_()))}return Promise.resolve().then((()=>this.disableAudioOnlyUI_()))}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return"boolean"!=typeof t||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then((()=>{this.enablePosterModeUI_()})):Promise.resolve().then((()=>{this.enablePosterModeUI_()})):Promise.resolve().then((()=>{this.disablePosterModeUI_()})))}addTextTrack(t,e,i){if(this.tech_)return this.tech_.addTextTrack(t,e,i)}addRemoteTextTrack(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)}removeRemoteTextTrack(t={}){let{track:e}=t;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),dn(this)&&this.trigger("languagechange"))}languages(){return Me(ta.prototype.options_.languages,this.languages_)}toJSON(){const t=Me(this.options_),e=t.tracks;t.tracks=[];for(let i=0;i<e.length;i++){let n=e[i];n=Me(n),n.player=void 0,t.tracks[i]=n}return t}createModal(t,e){(e=e||{}).content=t||"";const i=new Hn(this,e);return this.addChild(i),i.on("dispose",(()=>{this.removeChild(i)})),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const t=this.currentBreakpoint(),e=this.currentWidth();for(let i=0;i<Qs.length;i++){const n=Qs[i];if(e<=this.breakpoints_[n]){if(t===n)return;t&&this.removeClass(Js[t]),this.addClass(Js[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=Object.assign({},Zs,t),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Js[this.breakpoint_]||""}loadMedia(t,e){if(!t||"object"!=typeof t)return;this.reset(),this.cache_.media=Me(t);const{artist:i,artwork:n,description:r,poster:s,src:a,textTracks:o,title:l}=this.cache_.media;!n&&s&&(this.cache_.media.artwork=[{src:s,type:Cr(s)}]),a&&this.src(a),s&&this.poster(s),Array.isArray(o)&&o.forEach((t=>this.addRemoteTextTrack(t,!1))),this.titleBar&&this.titleBar.update({title:l,description:r||i||""}),this.ready(e)}getMedia(){if(!this.cache_.media){const t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(t=>({kind:t.kind,label:t.label,language:t.language,src:t.src})))};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Cr(e.poster)}]),e}return Me(this.cache_.media)}static getTagSettings(t){const e={sources:[],tracks:[]},i=gi(t),n=i["data-setup"];if(hi(t,"vjs-fill")&&(i.fill=!0),hi(t,"vjs-fluid")&&(i.fluid=!0),null!==n){const[t,e]=u()(n||"{}");t&&Ce.error(t),Object.assign(i,e)}if(Object.assign(e,i),t.hasChildNodes()){const i=t.childNodes;for(let t=0,n=i.length;t<n;t++){const n=i[t],r=n.nodeName.toLowerCase();"source"===r?e.sources.push(gi(n)):"track"===r&&e.tracks.push(gi(n))}}return e}debug(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every((t=>"number"==typeof t))&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}}pr.names.forEach((function(t){const e=pr[t];ta.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}})),ta.prototype.crossorigin=ta.prototype.crossOrigin,ta.players={};const ea=r().navigator;ta.prototype.options_={techOrder:fr.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ea&&(ea.languages&&ea.languages[0]||ea.userLanguage||ea.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(t){ta.prototype[t]=function(){return this.techGet_(t)}})),Ys.forEach((function(t){ta.prototype[`handleTech${xn(t)}_`]=function(){return this.trigger(t)}})),En.registerComponent("Player",ta);const ia="plugin",na="activePlugins_",ra={},sa=t=>ra.hasOwnProperty(t),aa=t=>sa(t)?ra[t]:void 0,oa=(t,e)=>{t[na]=t[na]||{},t[na][e]=!0},la=(t,e,i)=>{const n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)},ca=(t,e)=>(e.prototype.name=t,function(...i){la(this,{name:t,plugin:e,instance:null},!0);const n=new e(...[this,...i]);return this[t]=()=>n,la(this,n.getEventHash()),n});class ua{constructor(t){if(this.constructor===ua)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),_n(this),delete this.trigger,Tn(this,this.constructor.defaultState),oa(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,e={}){return Zi(this.eventBusEl_,t,this.getEventHash(e))}handleStateChanged(t){}dispose(){const{name:t,player:e}=this;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[na][t]=!1,this.player=this.state=null,e[t]=ca(t,ra[t])}static isBasic(t){const e="string"==typeof t?aa(t):t;return"function"==typeof e&&!ua.prototype.isPrototypeOf(e.prototype)}static registerPlugin(t,e){if("string"!=typeof t)throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(sa(t))Ce.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(ta.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if("function"!=typeof e)throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof e}.`);return ra[t]=e,t!==ia&&(ua.isBasic(e)?ta.prototype[t]=function(t,e){const i=function(){la(this,{name:t,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return oa(this,t),la(this,{name:t,plugin:e,instance:i}),i};return Object.keys(e).forEach((function(t){i[t]=e[t]})),i}(t,e):ta.prototype[t]=ca(t,e)),e}static deregisterPlugin(t){if(t===ia)throw new Error("Cannot de-register base plugin.");sa(t)&&(delete ra[t],delete ta.prototype[t])}static getPlugins(t=Object.keys(ra)){let e;return t.forEach((t=>{const i=aa(t);i&&(e=e||{},e[t]=i)})),e}static getPluginVersion(t){const e=aa(t);return e&&e.VERSION||""}}function ha(t,e,i,n){return function(t,e){let i=!1;return function(...n){return i||Ce.warn(t),i=!0,e.apply(this,n)}}(`${e} is deprecated and will be removed in ${t}.0; please use ${i} instead.`,n)}ua.getPlugin=aa,ua.BASE_PLUGIN_NAME=ia,ua.registerPlugin(ia,ua),ta.prototype.usingPlugin=function(t){return!!this[na]&&!0===this[na][t]},ta.prototype.hasPlugin=function(t){return!!sa(t)};const da=t=>0===t.indexOf("#")?t.slice(1):t;function pa(t,e,i){let n=pa.getPlayer(t);if(n)return e&&Ce.warn(`Player "${t}" is already initialised. Options will not be applied.`),i&&n.ready(i),n;const r="string"==typeof t?Li("#"+da(t)):t;if(!si(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||Ce.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),be("beforesetup").forEach((t=>{const i=t(r,Me(e));Oe(i)&&!Array.isArray(i)?e=Me(e,i):Ce.error("please return an object in beforesetup hooks")}));const s=En.getComponent("Player");return n=new s(r,e,i),be("setup").forEach((t=>t(n))),n}if(pa.hooks_=ve,pa.hooks=be,pa.hook=function(t,e){be(t,e)},pa.hookOnce=function(t,e){be(t,[].concat(e).map((e=>{const i=(...n)=>(_e(t,i),e(...n));return i})))},pa.removeHook=_e,!0!==r().VIDEOJS_NO_DYNAMIC_STYLE&&ri()){let t=Li(".vjs-styles-defaults");if(!t){t=Ui("vjs-styles-defaults");const e=Li("head");e&&e.insertBefore(t,e.firstChild),ji(t,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Fi(1,pa),pa.VERSION=ye,pa.options=ta.prototype.options_,pa.getPlayers=()=>ta.players,pa.getPlayer=t=>{const e=ta.players;let i;if("string"==typeof t){const n=da(t),r=e[n];if(r)return r;i=Li("#"+n)}else i=t;if(si(i)){const{player:t,playerId:n}=i;if(t||e[n])return t||e[n]}},pa.getAllPlayers=()=>Object.keys(ta.players).map((t=>ta.players[t])).filter(Boolean),pa.players=ta.players,pa.getComponent=En.getComponent,pa.registerComponent=(t,e)=>{fr.isTech(e)&&Ce.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),En.registerComponent.call(En,t,e)},pa.getTech=fr.getTech,pa.registerTech=fr.registerTech,pa.use=function(t,e){mr[t]=mr[t]||[],mr[t].push(e)},Object.defineProperty(pa,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(pa.middleware,"TERMINATOR",{value:yr,writeable:!1,enumerable:!0}),pa.browser=ii,pa.obj=Ne,pa.mergeOptions=ha(9,"videojs.mergeOptions","videojs.obj.merge",Me),pa.defineLazyProperty=ha(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Re),pa.bind=ha(9,"videojs.bind","native Function.prototype.bind",sn),pa.registerPlugin=ua.registerPlugin,pa.deregisterPlugin=ua.deregisterPlugin,pa.plugin=(t,e)=>(Ce.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ua.registerPlugin(t,e)),pa.getPlugins=ua.getPlugins,pa.getPlugin=ua.getPlugin,pa.getPluginVersion=ua.getPluginVersion,pa.addLanguage=function(t,e){return t=(""+t).toLowerCase(),pa.options.languages=Me(pa.options.languages,{[t]:e}),pa.options.languages[t]},pa.log=Ce,pa.createLogger=Ee,pa.time=Nn,pa.createTimeRange=ha(9,"videojs.createTimeRange","videojs.time.createTimeRanges",An),pa.createTimeRanges=ha(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",An),pa.formatTime=ha(9,"videojs.formatTime","videojs.time.formatTime",Rn),pa.setFormatTime=ha(9,"videojs.setFormatTime","videojs.time.setFormatTime",Dn),pa.resetFormatTime=ha(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Mn),pa.parseUrl=ha(9,"videojs.parseUrl","videojs.url.parseUrl",tr),pa.isCrossOrigin=ha(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",nr),pa.EventTarget=un,pa.any=en,pa.on=Qi,pa.one=tn,pa.off=Ji,pa.trigger=Zi,pa.xhr=d(),pa.TextTrack=or,pa.AudioTrack=lr,pa.VideoTrack=cr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((t=>{pa[t]=function(){return Ce.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),Mi[t].apply(null,arguments)}})),pa.computedStyle=ha(9,"videojs.computedStyle","videojs.dom.computedStyle",Di),pa.dom=Mi,pa.fn=ln,pa.num=Wr,pa.str=Cn,pa.url=rr;class fa{constructor(t){let e=this;return e.id=t.id,e.label=e.id,e.width=t.width,e.height=t.height,e.bitrate=t.bandwidth,e.frameRate=t.frameRate,e.enabled_=t.enabled,Object.defineProperty(e,"enabled",{get:()=>e.enabled_(),set(t){e.enabled_(t)}}),e}}class ma extends pa.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get:()=>t.selectedIndex_}),Object.defineProperty(t,"length",{get:()=>t.levels_.length}),t}addQualityLevel(t){let e=this.getQualityLevelById(t.id);if(e)return e;const i=this.levels_.length;return e=new fa(t),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(e),this.trigger({qualityLevel:e,type:"addqualitylevel"}),e}removeQualityLevel(t){let e=null;for(let i=0,n=this.length;i<n;i++)if(this[i]===t){e=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return e&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),e}getQualityLevelById(t){for(let e=0,i=this.length;e<i;e++){const i=this[e];if(i.id===t)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}ma.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in ma.prototype.allowedEvents_)ma.prototype["on"+t]=null;var ga="3.0.0";const ya=function(t){return function(t,e){const i=t.qualityLevels,n=new ma,r=function(){n.dispose(),t.qualityLevels=i,t.off("dispose",r)};return t.on("dispose",r),t.qualityLevels=()=>n,t.qualityLevels.VERSION=ga,n}(this,pa.mergeOptions({},t))};(pa.registerPlugin||pa.plugin)("qualityLevels",ya),ya.VERSION=ga;const va=function(t,e){if(/^[a-z]+:/i.test(e))return e;/^data:/.test(t)&&(t=r().location&&r().location.href||"");var i="function"==typeof r().URL,n=/^\/\//.test(t),s=!r().location&&!/\/\//i.test(t);if(i?t=new(r().URL)(t,r().location||y):/\/\//i.test(t)||(t=g().buildAbsoluteURL(r().location&&r().location.href||"",t)),i){var a=new URL(e,t);return s?a.href.slice(y.length):n?a.href.slice(a.protocol.length):a.href}return g().buildAbsoluteURL(t,e)},ba=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,_a=t=>pa.log.debug?pa.log.debug.bind(pa,"VHS:",`${t} >`):function(){};function wa(...t){const e=pa.obj||pa;return(e.merge||e.mergeOptions).apply(e,t)}function Ta(...t){const e=pa.time||pa;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}const Sa=1/30,xa=.1,ka=function(t,e){const i=[];let n;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return Ta(i)},Ca=function(t,e){return ka(t,(function(t,i){return t-xa<=e&&i+xa>=e}))},Ea=function(t,e){return ka(t,(function(t){return t-Sa>=e}))},Ia=t=>{const e=[];if(!t||!t.length)return"";for(let i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},Pa=t=>{const e=[];for(let i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},Aa=function(t){if(t&&t.length&&t.end)return t.end(t.length-1)},La=function(t,e){let i=0;if(!t||!t.length)return i;for(let n=0;n<t.length;n++){const r=t.start(n),s=t.end(n);e>s||(i+=e>r&&e<=s?s-e:s-r)}return i},Oa=(t,e)=>{if(!e.preload)return e.duration;let i=0;return(e.parts||[]).forEach((function(t){i+=t.duration})),(e.preloadHints||[]).forEach((function(e){"PART"===e.type&&(i+=t.partTargetDuration)})),i},Da=t=>(t.segments||[]).reduce(((t,e,i)=>(e.parts?e.parts.forEach((function(n,r){t.push({duration:n.duration,segmentIndex:i,partIndex:r,part:n,segment:e})})):t.push({duration:e.duration,segmentIndex:i,partIndex:null,segment:e,part:null}),t)),[]),Ma=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},Ra=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let n=(i||[]).reduce(((t,e)=>t+("PART"===e.type?1:0)),0);return n+=e&&e.length?e.length:0,n},Na=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const i=Ma(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},Ba=function(t,e,i){if(void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const n=function(t,e){let i=0,n=e-t.mediaSequence,r=t.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(r=t.segments[n],void 0!==r.end)return{result:i+r.end,precise:!0};if(i+=Oa(t,r),void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(t,e);if(n.precise)return n.result;const r=function(t,e){let i,n=0,r=e-t.mediaSequence;for(;r<t.segments.length;r++){if(i=t.segments[r],void 0!==i.start)return{result:i.start-n,precise:!0};if(n+=Oa(t,i),void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e);return r.precise?r.result:n.result+i},Fa=function(t,e,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return r()[1/0]}return Ba(t,e,i)},$a=function({defaultDuration:t,durationList:e,startIndex:i,endIndex:n}){let r=0;if(i>n&&([i,n]=[n,i]),i<0){for(let e=i;e<Math.min(0,n);e++)r+=t;i=0}for(let t=i;t<n;t++)r+=e[t].duration;return r},Ua=function(t,e,i,n){if(!t||!t.segments)return null;if(t.endList)return Fa(t);if(null===e)return null;e=e||0;let r=Ba(t,t.mediaSequence+t.segments.length,e);return i&&(r-=n="number"==typeof n?n:Na(null,t)),Math.max(0,r)},ja=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Va=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Ha=function(t){const e=ja(t);return!t.disabled&&!e},qa=function(t,e){return e.attributes&&e.attributes[t]},Wa=(t,e)=>{if(1===t.playlists.length)return!0;const i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter((t=>!!Ha(t)&&(t.attributes.BANDWIDTH||0)<i)).length},za=(t,e)=>!(!t&&!e||!t&&e||t&&!e||t!==e&&(!t.id||!e.id||t.id!==e.id)&&(!t.resolvedUri||!e.resolvedUri||t.resolvedUri!==e.resolvedUri)&&(!t.uri||!e.uri||t.uri!==e.uri)),Ga=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let n=!1;for(const t in i){for(const r in i[t])if(n=e(i[t][r]),n)break;if(n)break}return!!n},Ka=t=>{if(!t||!t.playlists||!t.playlists.length)return Ga(t,(t=>t.playlists&&t.playlists.length||t.uri));for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],n=i.attributes&&i.attributes.CODECS;if((!n||!n.split(",").every((t=>F(t))))&&!Ga(t,(t=>za(i,t))))return!1}return!0};var Ya={liveEdgeDelay:Na,duration:Fa,seekable:function(t,e,i){const n=e||0,r=Ua(t,e,!0,i);return null===r?Ta():Ta(n,r)},getMediaInfoForTime:function({playlist:t,currentTime:e,startingSegmentIndex:i,startingPartIndex:n,startTime:r,exactManifestTimings:s}){let a=e-r;const o=Da(t);let l=0;for(let t=0;t<o.length;t++){const e=o[t];if(i===e.segmentIndex&&("number"!=typeof n||"number"!=typeof e.partIndex||n===e.partIndex)){l=t;break}}if(a<0){if(l>0)for(let e=l-1;e>=0;e--){const i=o[e];if(a+=i.duration,s){if(a<0)continue}else if(a+Sa<=0)continue;return{partIndex:i.partIndex,segmentIndex:i.segmentIndex,startTime:r-$a({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:e})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let i=l;i<0;i++)if(a-=t.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let e=l;e<o.length;e++){const i=o[e];if(a-=i.duration,s){if(a>0)continue}else if(a-Sa>=0)continue;return{partIndex:i.partIndex,segmentIndex:i.segmentIndex,startTime:r+$a({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:e})}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},isEnabled:Ha,isDisabled:function(t){return t.disabled},isExcluded:ja,isIncompatible:Va,playlistEnd:Ua,isAes:function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hasAttribute:qa,estimateSegmentRequestTime:function(t,e,i,n=0){return qa("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-8*n)/e:NaN},isLowestEnabledRendition:Wa,isAudioOnly:Ka,playlistMatch:za,segmentDurationWithParts:Oa};const{log:Xa}=pa,Qa=(t,e)=>`${t}-${e}`,Ja=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach((i=>{if(t.mediaGroups[i])for(const n in t.mediaGroups[i])for(const r in t.mediaGroups[i][n]){const s=t.mediaGroups[i][n][r];e(s,i,n,r)}}))},Za=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},to=(t,e)=>{t.uri=e;for(let e=0;e<t.playlists.length;e++)if(!t.playlists[e].uri){const i=`placeholder-uri-${e}`;t.playlists[e].uri=i}const i=Ka(t);Ja(t,((e,n,r,s)=>{const a=`placeholder-uri-${n}-${r}-${s}`;if(!e.playlists||!e.playlists.length){if(i&&"AUDIO"===n&&!e.uri)for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e];if(i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===r)return}e.playlists=[(0,v.Z)({},e)]}e.playlists.forEach((function(e,i){const n=Qa(i,a);e.uri?e.resolvedUri=e.resolvedUri||va(t.uri,e.uri):(e.uri=0===i?a:n,e.resolvedUri=e.uri),e.id=e.id||n,e.attributes=e.attributes||{},t.playlists[e.id]=e,t.playlists[e.uri]=e}))})),(t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];Za({playlist:i,id:Qa(e,i.uri)}),i.resolvedUri=va(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||Xa.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(t),(t=>{Ja(t,(e=>{e.uri&&(e.resolvedUri=va(t.uri,e.uri))}))})(t)},{EventTarget:eo}=pa,io=(t,e)=>{if(!t)return e;const i=wa(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let n=0;n<e.parts.length;n++)t.parts&&t.parts[n]&&(i.parts[n]=wa(t.parts[n],e.parts[n]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},no=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=va(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=va(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=va(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=va(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach((t=>{t.resolvedUri||(t.resolvedUri=va(e,t.uri))})),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach((t=>{t.resolvedUri||(t.resolvedUri=va(e,t.uri))}))},ro=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(let t=0;t<i.preloadHints.length;t++)if("MAP"===i.preloadHints[t].type)return e;i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},so=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,ao=(t,e,i=so)=>{const n=wa(t,{}),r=n.playlists[e.id];if(!r)return null;if(i(r,e))return null;e.segments=ro(e);const s=wa(r,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let t=0;t<e.skip.skippedSegments;t++)e.segments.unshift({skipped:!0})}s.segments=((t,e,i)=>{const n=t.slice(),r=e.slice();i=i||0;const s=[];let a;for(let t=0;t<r.length;t++){const e=n[t+i],o=r[t];e?(a=e.map||a,s.push(io(e,o))):(a&&!o.map&&(o.map=a),s.push(o))}return s})(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}s.segments.forEach((t=>{no(t,s.resolvedUri)}));for(let t=0;t<n.playlists.length;t++)n.playlists[t].id===e.id&&(n.playlists[t]=s);return n.playlists[e.id]=s,n.playlists[e.uri]=s,Ja(t,((t,i,n,r)=>{if(t.playlists)for(let i=0;i<t.playlists.length;i++)e.id===t.playlists[i].id&&(t.playlists[i]=s)})),n},oo=(t,e)=>{const i=t.segments||[],n=i[i.length-1],r=n&&n.parts&&n.parts[n.parts.length-1],s=r&&r.duration||n&&n.duration;return e&&s?1e3*s:500*(t.partTargetDuration||t.targetDuration||10)};class lo extends eo{constructor(t,e,i={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=_a("PlaylistLoader");const{withCredentials:n=!1}=i;this.src=t,this.vhs_=e,this.withCredentials=n;const r=e.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const t=this.media();let e=va(this.main.uri,t.uri);this.llhls&&(e=((t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:t}=e;let n=e.mediaSequence+e.segments.length;if(t){const r=t.parts||[],s=Ra(e)-1;s>-1&&s!==r.length-1&&(i._HLS_part=s),(s>-1||r.length)&&n--}i._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const e=new(r().URL)(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(t){i.hasOwnProperty(t)&&e.searchParams.set(t,i[t])})),t=e.toString()}return t})(e,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:e,withCredentials:this.withCredentials},((t,e)=>{if(this.request)return t?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(t,e,i){const{uri:n,id:r}=e;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[r],status:t.status,message:`HLS playlist request error at URL: ${n}.`,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}parseManifest_({url:t,manifestString:e}){return(({onwarn:t,oninfo:e,manifestString:i,customTagParsers:n=[],customTagMappers:r=[],llhls:s})=>{const a=new A;t&&a.on("warn",t),e&&a.on("info",e),n.forEach((t=>a.addParser(t))),r.forEach((t=>a.addTagMapper(t))),a.push(i),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(t){o.hasOwnProperty(t)&&delete o[t]})),o.segments&&o.segments.forEach((function(t){["parts","preloadHints"].forEach((function(e){t.hasOwnProperty(e)&&delete t[e]}))}))),!o.targetDuration){let e=10;o.segments&&o.segments.length&&(e=o.segments.reduce(((t,e)=>Math.max(t,e.duration)),0)),t&&t(`manifest has no targetDuration defaulting to ${e}`),o.targetDuration=e}const l=Ma(o);if(l.length&&!o.partTargetDuration){const e=l.reduce(((t,e)=>Math.max(t,e.duration)),0);t&&(t(`manifest has no partTargetDuration defaulting to ${e}`),Xa.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=e}return o})({onwarn:({message:e})=>this.logger_(`m3u8-parser warn for ${t}: ${e}`),oninfo:({message:e})=>this.logger_(`m3u8-parser info for ${t}: ${e}`),manifestString:e,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:t,playlistObject:e,url:i,id:n}){this.request=null,this.state="HAVE_METADATA";const r=e||this.parseManifest_({url:i,manifestString:t});r.lastRequest=Date.now(),Za({playlist:r,uri:i,id:n});const s=ao(this.main,r);this.targetDuration=r.partTargetDuration||r.targetDuration,this.pendingMedia_=null,s?(this.main=s,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(oo(this.media(),!!s)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),r().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,e){if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(r().clearTimeout(this.finalRenditionTimeout),e){const e=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=r().setTimeout(this.media.bind(this,t,!1),e))}const i=this.state,n=!this.media_||t.id!==this.media_.id,s=this.main.playlists[t.id];if(s&&s.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(n&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(oo(t,!0)),n){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},((e,n)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=ba(t.resolvedUri,n),e)return this.playlistRequestError(this.request,t,i);this.haveMetadata({playlistString:n.responseText,url:t.uri,id:t.id}),"HAVE_MAIN_MANIFEST"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}pause(){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const e=this.media();if(t){const t=e?(e.partTargetDuration||e.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),t)}else this.started?e&&!e.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=r().setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)}),t))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=r().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((()=>{this.setupInitialPlaylist(this.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},((t,e)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:e.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:e.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=ba(this.src,e);const i=this.parseManifest_({manifestString:e.responseText,url:this.src});this.setupInitialPlaylist(i)}))}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists)return this.main=t,to(this.main,this.srcUri()),t.playlists.forEach((t=>{t.segments=ro(t),t.segments.forEach((e=>{no(e,t.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const e=this.srcUri()||r().location.href;this.main=((t,e)=>{const i=Qa(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:r().location.href,resolvedUri:r().location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n})(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:co}=pa,uo=function(t,e,i,n){const r="arraybuffer"===t.responseType?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&"ETIMEDOUT"===e.code&&(t.timedout=!0),e||t.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),n(e,t)},ho=function(){const t=function t(e,i){e=wa({timeout:45e3},e);const n=t.beforeRequest||pa.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){const t=n(e);t&&(e=t)}const r=(!0===pa.Vhs.xhr.original?co:pa.Vhs.xhr)(e,(function(t,e){return uo(r,t,e,i)})),s=r.abort;return r.abort=function(){return r.aborted=!0,s.apply(r,arguments)},r.uri=e.uri,r.requestTime=Date.now(),r};return t.original=!0,t},po=function(t){const e={};return t.byterange&&(e.Range=function(t){let e;const i=t.offset;return e="bigint"==typeof t.offset||"bigint"==typeof t.length?r().BigInt(t.offset)+r().BigInt(t.length)-r().BigInt(1):t.offset+t.length-1,"bytes="+i+"-"+e}(t.byterange)),e},fo=function(t,e){return t.start(e)+"-"+t.end(e)},mo=function(t,e){const i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},go=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},yo=function(t){const e={};return Object.keys(t).forEach((i=>{const n=t[i];z(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n})),e},vo=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},bo=function(t){return t.resolvedUri},_o=t=>{const e=Array.prototype.slice.call(t),i=16;let n,r,s="";for(let t=0;t<e.length/i;t++)n=e.slice(t*i,t*i+i).map(mo).join(""),r=e.slice(t*i,t*i+i).map(go).join(""),s+=n+" "+r+"\n";return s};var wo=Object.freeze({__proto__:null,createTransferableMessage:yo,initSegmentId:vo,segmentKeyId:bo,hexDump:_o,tagDump:({bytes:t})=>_o(t),textRanges:t=>{let e,i="";for(e=0;e<t.length;e++)i+=fo(t,e)+" ";return i}});const To=({programTime:t,playlist:e,retryCount:i=2,seekTo:n,pauseAfterSeek:r=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!(t=>{if(!t.segments||0===t.segments.length)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0})(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=((t,e)=>{let i;try{i=new Date(t)}catch(t){return null}if(!e||!e.segments||0===e.segments.length)return null;let n=e.segments[0];if(i<n.dateTimeObject)return null;for(let t=0;t<e.segments.length-1&&(n=e.segments[t],!(i<e.segments[t+1].dateTimeObject));t++);const r=e.segments[e.segments.length-1],s=r.dateTimeObject,a=r.videoTimingInfo?(o=r.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:r.duration+.25*r.duration;var o;return i>new Date(s.getTime()+1e3*a)?null:(i>s&&(n=r),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Ya.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})})(t,e);if(!o)return a({message:`${t} was not found in the stream`});const l=o.segment,c=((t,e)=>{let i,n;try{i=new Date(t),n=new Date(e)}catch(t){}const r=i.getTime();return(n.getTime()-r)/1e3})(l.dateTimeObject,t);if("estimate"===o.type)return 0===i?a({message:`${t} is not buffered yet. Try again`}):(n(o.estimatedStart+c),void s.one("seeked",(()=>{To({programTime:t,playlist:e,retryCount:i-1,seekTo:n,pauseAfterSeek:r,tech:s,callback:a})})));const u=l.start+c;s.one("seeked",(()=>a(null,s.currentTime()))),r&&s.pause(),n(u)},So=(t,e)=>{if(4===t.readyState)return e()},{EventTarget:xo}=pa,ko=function(t,e){if(!so(t,e))return!1;if(t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx)return!1;if(t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let i=0;i<t.segments.length;i++){const n=t.segments[i],r=e.segments[i];if(n.uri!==r.uri)return!1;if(!n.byterange&&!r.byterange)continue;const s=n.byterange,a=r.byterange;if(s&&!a||!s&&a)return!1;if(s.offset!==a.offset||s.length!==a.length)return!1}return!0},Co=(t,e)=>(Boolean(!t.map&&!e.map)||Boolean(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,Eo=(t,e)=>{const i={};for(const n in t){const r=t[n].sidx;if(r){const t=vt(r);if(!e[t])break;const n=e[t].sidxInfo;Co(n,r)&&(i[t]=e[t])}}return i};class Io extends xo{constructor(t,e,i={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:r=!1}=i;if(this.vhs_=e,this.withCredentials=r,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",(()=>{this.refreshXml_()})),this.on("mediaupdatetimeout",(()=>{this.refreshMedia_(this.media().id)})),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=_a("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}requestErrored_(t,e,i){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:e.status,message:"DASH request error at URL: "+e.uri,response:e.response,code:2}:t,i&&(this.state=i),this.trigger("error"),!0):void 0)}addSidxSegments_(t,e,i){const n=t.sidx&&vt(t.sidx);if(!t.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n])return void(this.mediaRequest_=r().setTimeout((()=>i(!1)),0));const s=ba(t.sidx.resolvedUri),a=(r,s)=>{if(this.requestErrored_(r,s,e))return;const a=this.mainPlaylistLoader_.sidxMapping_;let o;try{o=Kt()(G(s.response).subarray(8))}catch(t){return void this.requestErrored_(t,s,e)}return a[n]={sidxInfo:t.sidx,sidx:o},pt(t,o,t.sidx.resolvedUri),i(!0)};this.request=((t,e,i)=>{let n,r=[],s=!1;const a=function(t,e,n,r){return e.abort(),s=!0,i(t,e,n,r)},o=function(t,e){if(s)return;if(t)return a(t,e,"",r);const i=e.responseText.substring(r&&r.byteLength||0,e.responseText.length);if(r=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e=e.filter((function(t){return t&&(t.byteLength||t.length)&&"string"!=typeof t})),e.length<=1)return G(e[0]);var n=e.reduce((function(t,e,i){return t+(e.byteLength||e.length)}),0),r=new Uint8Array(n),s=0;return e.forEach((function(t){t=G(t),r.set(t,s),s+=t.byteLength})),r}(r,Q(i,!0)),n=n||Xt(r),r.length<10||n&&r.length<n+2)return So(e,(()=>a(t,e,"",r)));const o=me(r);return"ts"===o&&r.length<188||!o&&r.length<376?So(e,(()=>a(t,e,"",r))):a(null,e,o,r)},l={uri:t,beforeSend(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",(function({total:e,loaded:i}){return uo(t,null,{statusCode:t.status},o)}))}},c=e(l,(function(t,e){return uo(c,t,e,o)}));return c})(s,this.vhs_.xhr,((e,i,n,r)=>{if(e)return a(e,i);if(!n||"mp4"!==n)return a({status:i.status,message:`Unsupported ${n||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},i);const{offset:o,length:l}=t.sidx.byterange;if(r.length>=l+o)return a(e,{response:r.subarray(o,o+l),status:i.status,uri:i.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:po({byterange:t.sidx.byterange})},a)}))}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},r().clearTimeout(this.minimumUpdatePeriodTimeout_),r().clearTimeout(this.mediaRequest_),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const e=this.state;if("string"==typeof t){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}const i=!this.media_||t.id!==this.media_.id;if(i&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,e,(i=>{this.haveMetadata({startingState:e,playlist:t})})))}haveMetadata({startingState:t,playlist:e}){this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,this.mediaRequest_=null,this.refreshMedia_(e.id),"HAVE_MAIN_MANIFEST"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(r().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(t){r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const e=this.media();if(t){const t=e?e.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout((()=>this.load()),t)}else this.started?e&&!e.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_(((t,e)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=r().setTimeout((()=>this.haveMain_()),0)}requestMain_(t){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},((e,i)=>{if(this.requestErrored_(e,i))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const n=i.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=ba(this.mainPlaylistLoader_.srcUrl,i),n?(this.handleMain_(),void this.syncClientServerClock_((()=>t(i,n)))):t(i,n)}))}syncClientServerClock_(t){const e=(i=this.mainPlaylistLoader_.mainXml_,(t=>{const e=Rt(t,"UTCTiming")[0];if(!e)return null;const i=$t(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i})(Wt(i)));var i;return null===e?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()):"DIRECT"===e.method?(this.mainPlaylistLoader_.clientOffset_=e.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:va(this.mainPlaylistLoader_.srcUrl,e.value),method:e.method,withCredentials:this.withCredentials},((i,n)=>{if(!this.request)return;if(i)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();let r;r="HEAD"===e.method?n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):this.mainLoaded_:Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),t()})))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const t=this.mainPlaylistLoader_.main;let e=(({mainXml:t,srcUrl:e,clientOffset:i,sidxMapping:n,previousManifest:r})=>{const s=((t,e={})=>{const i=((t,e={})=>{const{manifestUri:i="",NOW:n=Date.now(),clientOffset:r=0}=e,s=Rt(t,"Period");if(!s.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const a=Rt(t,"Location"),o=$t(t),l=jt([i],Rt(t,"BaseURL"));o.type=o.type||"static",o.sourceDuration=o.mediaPresentationDuration||0,o.NOW=n,o.clientOffset=r,a.length&&(o.locations=a.map(Nt));const c=[];return s.forEach(((t,e)=>{const i=$t(t),n=c[e-1];i.start=(({attributes:t,priorPeriodAttributes:e,mpdType:i})=>"number"==typeof t.start?t.start:e&&"number"==typeof e.start&&"number"==typeof e.duration?e.start+e.duration:e||"static"!==i?null:0)({attributes:i,priorPeriodAttributes:n?n.attributes:null,mpdType:o.type}),c.push({node:t,attributes:i})})),{locations:o.locations,representationInfo:at(c.map(qt(o,l)))}})(Wt(t),e),n=i.representationInfo.map(Mt);return Et({dashPlaylists:n,locations:i.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest})})(t,{manifestUri:e,clientOffset:i,sidxMapping:n,previousManifest:r});return to(s,e),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(e=((t,e,i)=>{let n=!0,r=wa(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let t=0;t<e.playlists.length;t++){const s=e.playlists[t];if(s.sidx){const t=vt(s.sidx);i&&i[t]&&i[t].sidx&&pt(s,i[t].sidx,s.sidx.resolvedUri)}const a=ao(r,s,ko);a&&(r=a,n=!1)}return Ja(e,((t,e,i,s)=>{if(t.playlists&&t.playlists.length){const a=t.playlists[0].id,o=ao(r,t.playlists[0],ko);o&&(r=o,r.mediaGroups[e][i][s].playlists[0]=r.playlists[a],n=!1)}})),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(n=!1),n?null:r})(t,e,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=e||t;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!t||e&&e.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(e)}updateMinimumUpdatePeriodTimeout_(){const t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(r().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let e=t.main&&t.main.minimumUpdatePeriod;0===e&&(t.media()?e=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof e||e<=0?e<0&&this.logger_(`found invalid minimumUpdatePeriod of ${e}, not setting a timeout`):this.createMUPTimeout_(e)}createMUPTimeout_(t){const e=this.mainPlaylistLoader_;e.minimumUpdatePeriodTimeout_=r().setTimeout((()=>{e.minimumUpdatePeriodTimeout_=null,e.trigger("minimumUpdatePeriod"),e.createMUPTimeout_(t)}),t)}refreshXml_(){this.requestMain_(((t,e)=>{e&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((t,e)=>{let i=Eo(t.playlists,e);return Ja(t,((t,n,r,s)=>{if(t.playlists&&t.playlists.length){const n=t.playlists;i=wa(i,Eo(n,e))}})),i})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,(t=>{this.refreshMedia_(this.media().id)})))}))}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const e=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==e[t];if(i?this.media_=e[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const t=()=>{this.media().endList||(this.mediaUpdateTimeout=r().setTimeout((()=>{this.trigger("mediaupdatetimeout"),t()}),oo(this.media(),Boolean(i))))};t()}this.trigger("loadedplaylist")}}var Po={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Ao=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},Lo=function(t){return function(){const e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch(e){const i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}}(t),i=Ao(new Worker(e));i.objURL=e;const n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},i}},Oo=function(t){return`var browserWorkerPolyFill = ${Ao.toString()};\nbrowserWorkerPolyFill(self);\n`+t},Do=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},Mo=Oo(Do((function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},e=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),n>-1)},this.trigger=function(e){var i,n,r,s;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(s=[],n=arguments.length,n=1;n<arguments.length;++n)s.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,s)}},this.dispose=function(){t={}}}};e.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),this.on("partialdone",(function(e){t.partialFlush(e)})),this.on("endedtimeline",(function(e){t.endTimeline(e)})),this.on("reset",(function(e){t.reset(e)})),t},e.prototype.push=function(t){this.trigger("data",t)},e.prototype.flush=function(t){this.trigger("done",t)},e.prototype.partialFlush=function(t){this.trigger("partialdone",t)},e.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},e.prototype.reset=function(t){this.trigger("reset",t)};var n,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,b,_,w,T,S,x,k,C,E,I,P,A,L,O,D,M,R,N,B,F,$,U,j,V,H=e,q=Math.pow(2,32),W={getUint64:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getBigUint64?(e=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:i.getUint32(0)*q+i.getUint32(4)},MAX_UINT32:q},z=W.MAX_UINT32;!function(){var t;if(x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in x)x.hasOwnProperty(t)&&(x[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);k=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:I,audio:P},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),R=M,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=M,L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(t){var e,i,n=[],r=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)r+=n[e].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,r=8;e<n.length;e++)i.set(n[e],r),r+=n[e].byteLength;return i},r=function(){return n(x.dinf,n(x.dref,D))},s=function(t){return n(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},y=function(t){return n(x.hdlr,A[t])},g=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),n(x.mdhd,e)},m=function(t){return n(x.mdia,g(t),y(t.type),l(t))},o=function(t){return n(x.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},l=function(t){return n(x.minf,"video"===t.type?n(x.vmhd,L):n(x.smhd,O),r(),b(t))},c=function(t,e){for(var i=[],r=e.length;r--;)i[r]=w(e[r]);return n.apply(null,[x.moof,o(t)].concat(i))},u=function(t){for(var e=t.length,i=[];e--;)i[e]=p(t[e]);return n.apply(null,[x.moov,d(4294967295)].concat(i).concat(h(t)))},h=function(t){for(var e=t.length,i=[];e--;)i[e]=T(t[e]);return n.apply(null,[x.mvex].concat(i))},d=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(x.mvhd,e)},v=function(t){var e,i,r=t.samples||[],s=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)e=r[i].flags,s[i+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return n(x.sdtp,s)},b=function(t){return n(x.stbl,_(t),n(x.stts,B),n(x.stsc,R),n(x.stsz,N),n(x.stco,M))},_=function(t){return n(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?F(t):$(t))},F=function(t){var e,i,r=t.sps||[],s=t.pps||[],a=[],o=[];for(e=0;e<r.length;e++)a.push((65280&r[e].byteLength)>>>8),a.push(255&r[e].byteLength),a=a.concat(Array.prototype.slice.call(r[e]));for(e=0;e<s.length;e++)o.push((65280&s[e].byteLength)>>>8),o.push(255&s[e].byteLength),o=o.concat(Array.prototype.slice.call(s[e]));if(i=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(x.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length],a,[s.length],o))),n(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var l=t.sarRatio[0],c=t.sarRatio[1];i.push(n(x.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return n.apply(null,i)},$=function(t){return n(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),s(t))},f=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return n(x.tkhd,e)},w=function(t){var e,i,r,s,a,o;return e=n(x.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/z),o=Math.floor(t.baseMediaDecodeTime%z),i=n(x.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===t.type?(r=S(t,92),n(x.traf,e,i,r)):(s=v(t),r=S(t,s.length+92),n(x.traf,e,i,r,s))},p=function(t){return t.duration=t.duration||4294967295,n(x.trak,f(t),m(t))},T=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),n(x.trex,e)},V=function(t,e){var i=0,n=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,i|n|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},j=function(t,e){var i,r,s,a,o,l;for(e+=20+16*(a=t.samples||[]).length,s=V(a,e),(r=new Uint8Array(s.length+16*a.length)).set(s),i=s.length,l=0;l<a.length;l++)o=a[l],r[i++]=(4278190080&o.duration)>>>24,r[i++]=(16711680&o.duration)>>>16,r[i++]=(65280&o.duration)>>>8,r[i++]=255&o.duration,r[i++]=(4278190080&o.size)>>>24,r[i++]=(16711680&o.size)>>>16,r[i++]=(65280&o.size)>>>8,r[i++]=255&o.size,r[i++]=o.flags.isLeading<<2|o.flags.dependsOn,r[i++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,r[i++]=61440&o.flags.degradationPriority,r[i++]=15&o.flags.degradationPriority,r[i++]=(4278190080&o.compositionTimeOffset)>>>24,r[i++]=(16711680&o.compositionTimeOffset)>>>16,r[i++]=(65280&o.compositionTimeOffset)>>>8,r[i++]=255&o.compositionTimeOffset;return n(x.trun,r)},U=function(t,e){var i,r,s,a,o,l;for(e+=20+8*(a=t.samples||[]).length,s=V(a,e),(i=new Uint8Array(s.length+8*a.length)).set(s),r=s.length,l=0;l<a.length;l++)o=a[l],i[r++]=(4278190080&o.duration)>>>24,i[r++]=(16711680&o.duration)>>>16,i[r++]=(65280&o.duration)>>>8,i[r++]=255&o.duration,i[r++]=(4278190080&o.size)>>>24,i[r++]=(16711680&o.size)>>>16,i[r++]=(65280&o.size)>>>8,i[r++]=255&o.size;return n(x.trun,i)},S=function(t,e){return"audio"===t.type?U(t,e):j(t,e)};var G,K,Y,X,Q,J,Z,tt,et={ftyp:a=function(){return n(x.ftyp,k,C,k,E)},mdat:function(t){return n(x.mdat,t)},moof:c,moov:u,initSegment:function(t){var e,i=a(),n=u(t);return(e=new Uint8Array(i.byteLength+n.byteLength)).set(i),e.set(n,i.byteLength),e}},it=function(t,e){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},nt={groupNalsIntoFrames:function(t){var e,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},groupFramesIntoGops:function(t){var e,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},extendFirstKeyFrame:function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},generateSampleTable:function(t,e){var i,n,r,s,a,o=e||0,l=[];for(i=0;i<t.length;i++)for(s=t[i],n=0;n<s.length;n++)a=s[n],o+=(r=it(a,o)).size,l.push(r);return l},concatenateNalData:function(t){var e,i,n,r,s,a,o=0,l=t.byteLength,c=t.nalCount,u=new Uint8Array(l+4*c),h=new DataView(u.buffer);for(e=0;e<t.length;e++)for(r=t[e],i=0;i<r.length;i++)for(s=r[i],n=0;n<s.length;n++)a=s[n],h.setUint32(o,a.data.byteLength),o+=4,u.set(a.data,o),o+=a.data.byteLength;return u},generateSampleTableForFrame:function(t,e){var i,n=[];return i=it(t,e||0),n.push(i),n},concatenateNalDataForFrame:function(t){var e,i,n=0,r=t.byteLength,s=t.length,a=new Uint8Array(r+4*s),o=new DataView(a.buffer);for(e=0;e<t.length;e++)i=t[e],o.setUint32(n,i.data.byteLength),n+=4,a.set(i.data,n),n+=i.data.byteLength;return a}},rt=[33,16,5,32,164,27],st=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],at=function(t){for(var e=[];t--;)e.push(0);return e},ot=9e4;J=function(t,e){return K(Q(t,e))},Z=function(t,e){return Y(X(t),e)},tt=function(t,e,i){return X(i?t:t-e)};var lt={ONE_SECOND_IN_TS:ot,secondsToVideoTs:K=function(t){return t*ot},secondsToAudioTs:Y=function(t,e){return t*e},videoTsToSeconds:X=function(t){return t/ot},audioTsToSeconds:Q=function(t,e){return t/e},audioTsToVideoTs:J,videoTsToAudioTs:Z,metadataTsToSeconds:tt},ct=lt,ut={prefixWithSilence:function(t,e,i,n){var r,s,a,o,l,c=0,u=0,h=0;if(e.length&&(r=ct.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(ct.ONE_SECOND_IN_TS/(t.samplerate/1024)),i&&n&&(c=r-Math.max(i,n),h=(u=Math.floor(c/s))*s),!(u<1||h>ct.ONE_SECOND_IN_TS/2))){for((a=function(){if(!G){var t={96e3:[rt,[227,64],at(154),[56]],88200:[rt,[231],at(170),[56]],64e3:[rt,[248,192],at(240),[56]],48e3:[rt,[255,192],at(268),[55,148,128],at(54),[112]],44100:[rt,[255,192],at(268),[55,163,128],at(84),[112]],32e3:[rt,[255,192],at(268),[55,234],at(226),[112]],24e3:[rt,[255,192],at(268),[55,255,128],at(268),[111,112],at(126),[224]],16e3:[rt,[255,192],at(268),[55,255,128],at(268),[111,255],at(269),[223,108],at(195),[1,192]],12e3:[st,at(268),[3,127,248],at(268),[6,255,240],at(268),[13,255,224],at(268),[27,253,128],at(259),[56]],11025:[st,at(268),[3,127,248],at(268),[6,255,240],at(268),[13,255,224],at(268),[27,255,192],at(268),[55,175,128],at(108),[112]],8e3:[st,at(268),[3,121,16],at(47),[7]]};e=t,G=Object.keys(e).reduce((function(t,i){return t[i]=new Uint8Array(e[i].reduce((function(t,e){return t.concat(e)}),[])),t}),{})}var e;return G}()[t.samplerate])||(a=e[0].data),o=0;o<u;o++)l=e[0],e.splice(0,0,{data:a,dts:l.dts-s,pts:l.pts-s});return t.baseMediaDecodeTime-=Math.floor(ct.videoTsToAudioTs(h,t.samplerate)),h}},trimAdtsFramesByEarliestDts:function(t,e,i){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))},generateSampleTable:function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=t[e],n.push({size:i.data.byteLength,duration:1024});return n},concatenateFrameData:function(t){var e,i,n=0,r=new Uint8Array(function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i}(t));for(e=0;e<t.length;e++)i=t[e],r.set(i.data,n),n+=i.data.byteLength;return r}},ht=lt.ONE_SECOND_IN_TS,dt={clearDtsInfo:function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(t,e){var i,n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/ht,i=Math.floor(i)),i},collectDtsInfo:function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))}},pt={parseSei:function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&4===n){if("GA94"===String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6])){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}i.payload=void 0}e+=r,n=0,r=0}return i},parseUserData:function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},parseCaptionPackets:function(t,e){var i,n,r,s,a=[];if(!(64&e[0]))return a;for(n=31&e[0],i=0;i<n;i++)s={type:3&e[2+(r=3*i)],pts:t},4&e[r+2]&&(s.ccData=e[r+3]<<8|e[r+4],a.push(s));return a},discardEmulationPreventionBytes:function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},USER_DATA_REGISTERED_ITU_T_T35:4},ft=H,mt=pt,gt=function(t){t=t||{},gt.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ct(0,0),new Ct(0,1),new Ct(1,0),new Ct(1,1)],this.parse708captions_&&(this.cc708Stream_=new wt({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};gt.prototype=new ft,gt.prototype.push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=mt.parseSei(t.escapedRBSP)).payload&&e.payloadType===mt.USER_DATA_REGISTERED_ITU_T_T35&&(i=mt.parseUserData(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=mt.parseCaptionPackets(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},gt.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(e){return"flush"===t?e.flush():e.partialFlush()}),this)},gt.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,e){t.presortIndex=e})),this.captionPackets_.sort((function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},gt.prototype.flush=function(){return this.flushStream("flush")},gt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},gt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},gt.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},gt.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},gt.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},gt.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},gt.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var yt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},vt=function(t){return 32<=t&&t<=127||160<=t&&t<=255},bt=function(t){this.windowNum=t,this.reset()};bt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},bt.prototype.getText=function(){return this.rows.join("\n")},bt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},bt.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},bt.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},bt.prototype.addText=function(t){this.rows[this.rowIdx]+=t},bt.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var _t=function(t,e,i){this.serviceNum=t,this.text="",this.currentWindow=new bt(-1),this.windows=[],this.stream=i,"string"==typeof e&&this.createTextDecoder(e)};_t.prototype.init=function(t,e){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new bt(i),"function"==typeof e&&(this.windows[i].beforeRowOverflow=e)},_t.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]},_t.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(e){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+e})}};var wt=function(t){t=t||{},wt.prototype.init.call(this);var e,i=this,n=t.captionServices||{},r={};Object.keys(n).forEach((t=>{e=n[t],/^SERVICE/.test(t)&&(r[t]=e.encoding)})),this.serviceEncodings=r,this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(i.new708Packet(),i.add708Bytes(t)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(t))}};wt.prototype=new ft,wt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},wt.prototype.add708Bytes=function(t){var e=t.ccData,i=e>>>8,n=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},wt.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,i=null,n=null,r=0,s=e[r++];for(t.seq=s>>6,t.sizeCode=63&s;r<e.length;r++)n=31&(s=e[r++]),7==(i=s>>5)&&n>0&&(i=s=e[r++]),this.pushServiceBlock(i,r,n),n>0&&(r+=n-1)},wt.prototype.pushServiceBlock=function(t,e,i){var n,r=e,s=this.current708Packet.data,a=this.services[t];for(a||(a=this.initService(t,r));r<e+i&&r<s.length;r++)n=s[r],vt(n)?r=this.handleText(r,a):24===n?r=this.multiByteCharacter(r,a):16===n?r=this.extendedCommands(r,a):128<=n&&n<=135?r=this.setCurrentWindow(r,a):152<=n&&n<=159?r=this.defineWindow(r,a):136===n?r=this.clearWindows(r,a):140===n?r=this.deleteWindows(r,a):137===n?r=this.displayWindows(r,a):138===n?r=this.hideWindows(r,a):139===n?r=this.toggleWindows(r,a):151===n?r=this.setWindowAttributes(r,a):144===n?r=this.setPenAttributes(r,a):145===n?r=this.setPenColor(r,a):146===n?r=this.setPenLocation(r,a):143===n?a=this.reset(r,a):8===n?a.currentWindow.backspace():12===n?a.currentWindow.clearText():13===n?a.currentWindow.pendingNewLine=!0:14===n?a.currentWindow.clearText():141===n&&r++},wt.prototype.extendedCommands=function(t,e){var i=this.current708Packet.data[++t];return vt(i)&&(t=this.handleText(t,e,{isExtended:!0})),t},wt.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},wt.prototype.initService=function(t,e){var i,n,r=this;return(i="SERVICE"+t)in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[t]=new _t(t,n,r),this.services[t].init(this.getPts(e),(function(e){r.flushDisplayed(e,r.services[t])})),this.services[t]},wt.prototype.handleText=function(t,e,i){var n,r,s,a,o=i&&i.isExtended,l=i&&i.isMultiByte,c=this.current708Packet.data,u=o?4096:0,h=c[t],d=c[t+1],p=e.currentWindow;return e.textDecoder_&&!o?(l?(r=[h,d],t++):r=[h],n=e.textDecoder_.decode(new Uint8Array(r))):(a=yt[s=u|h]||s,n=4096&s&&s===a?"":String.fromCharCode(a)),p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(t)),p.pendingNewLine=!1,p.addText(n),t},wt.prototype.multiByteCharacter=function(t,e){var i=this.current708Packet.data,n=i[t+1],r=i[t+2];return vt(n)&&vt(r)&&(t=this.handleText(++t,e,{isMultiByte:!0})),t},wt.prototype.setCurrentWindow=function(t,e){var i=7&this.current708Packet.data[t];return e.setCurrentWindow(i),t},wt.prototype.defineWindow=function(t,e){var i=this.current708Packet.data,n=i[t],r=7&n;e.setCurrentWindow(r);var s=e.currentWindow;return n=i[++t],s.visible=(32&n)>>5,s.rowLock=(16&n)>>4,s.columnLock=(8&n)>>3,s.priority=7&n,n=i[++t],s.relativePositioning=(128&n)>>7,s.anchorVertical=127&n,n=i[++t],s.anchorHorizontal=n,n=i[++t],s.anchorPoint=(240&n)>>4,s.rowCount=15&n,n=i[++t],s.columnCount=63&n,n=i[++t],s.windowStyle=(56&n)>>3,s.penStyle=7&n,s.virtualRowCount=s.rowCount+1,t},wt.prototype.setWindowAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.winAttr;return n=i[++t],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++t],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++t],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++t],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,t},wt.prototype.flushDisplayed=function(t,e){for(var i=[],n=0;n<8;n++)e.windows[n].visible&&!e.windows[n].isEmpty()&&i.push(e.windows[n].getText());e.endPts=t,e.text=i.join("\n\n"),this.pushCaption(e),e.startPts=t},wt.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},wt.prototype.displayWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=1);return t},wt.prototype.hideWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=0);return t},wt.prototype.toggleWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible^=1);return t},wt.prototype.clearWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].clearText();return t},wt.prototype.deleteWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].reset();return t},wt.prototype.setPenAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penAttr;return n=i[++t],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++t],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,t},wt.prototype.setPenColor=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penColor;return n=i[++t],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++t],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++t],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,t},wt.prototype.setPenLocation=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,n=i[++t],r.row=15&n,n=i[++t],r.column=63&n,t},wt.prototype.reset=function(t,e){var i=this.getPts(t);return this.flushDisplayed(i,e),this.initService(e.serviceNum,t)};var Tt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},St=function(t){return null===t?"":(t=Tt[t]||t,String.fromCharCode(t))},xt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],kt=function(){for(var t=[],e=15;e--;)t.push("");return t},Ct=function(t,e){Ct.prototype.init.call(this),this.field_=t||0,this.dataChannel_=e||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,s;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=kt();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=kt();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=kt()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))s=St((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=St((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var a=xt.indexOf(7968&e);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(t.pts,a)),a!==this.row_&&(this.clearFormatting(t.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),s=St(n),s+=St(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Ct.prototype=new ft,Ct.prototype.flushDisplayed=function(t){var e=this.displayed_.map((function(t,e){try{return t.trim()}catch(t){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},Ct.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=kt(),this.nonDisplayed_=kt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ct.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ct.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},Ct.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},Ct.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},Ct.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},Ct.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},Ct.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},Ct.prototype.isNormalChar=function(t){return t>=32&&t<=127},Ct.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=kt(),this.displayed_=kt()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Ct.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce((function(t,e){return t+"<"+e+">"}),"");this[this.mode_](t,i)},Ct.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce((function(t,e){return t+"</"+e+">"}),"");this.formatting_=[],this[this.mode_](t,e)}},Ct.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},Ct.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},Ct.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Ct.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var Et={CaptionStream:gt,Cea608Stream:Ct,Cea708Stream:wt},It={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pt=H,At="shared",Lt=function(t,e){var i=1;for(t>e&&(i=-1);Math.abs(e-t)>4294967296;)t+=8589934592*i;return t},Ot=function(t){var e,i;Ot.prototype.init.call(this),this.type_=t||At,this.push=function(t){this.type_!==At&&t.type!==this.type_||(void 0===i&&(i=t.dts),t.dts=Lt(t.dts,i),t.pts=Lt(t.pts,i),e=t.dts,this.trigger("data",t))},this.flush=function(){i=e,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,e=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ot.prototype=new Pt;var Dt,Mt={TimestampRolloverStream:Ot,handleRollover:Lt},Rt=It,Nt=(t,e,i)=>{if(!t)return-1;for(var n=i;n<t.length;n++)if(t[n]===e)return n;return-1},Bt=function(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r},Ft=function(t,e,i){return decodeURIComponent(Bt(t,e,i))},$t=function(t,e,i){return unescape(Bt(t,e,i))},Ut=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},jt={APIC:function(t){var e,i,n=1;3===t.data[0]&&((e=Nt(t.data,0,n))<0||(t.mimeType=$t(t.data,n,e),n=e+1,t.pictureType=t.data[n],n++,(i=Nt(t.data,0,n))<0||(t.description=Ft(t.data,n,i),n=i+1,"--\x3e"===t.mimeType?t.url=$t(t.data,n,t.data.length):t.pictureData=t.data.subarray(n,t.data.length))))},"T*":function(t){3===t.data[0]&&(t.value=Ft(t.data,1,t.data.length).replace(/\0*$/,""),t.values=t.value.split("\0"))},TXXX:function(t){var e;3===t.data[0]&&-1!==(e=Nt(t.data,0,1))&&(t.description=Ft(t.data,1,e),t.value=Ft(t.data,e+1,t.data.length).replace(/\0*$/,""),t.data=t.value)},"W*":function(t){t.url=$t(t.data,0,t.data.length).replace(/\0.*$/,"")},WXXX:function(t){var e;3===t.data[0]&&-1!==(e=Nt(t.data,0,1))&&(t.description=Ft(t.data,1,e),t.url=$t(t.data,e+1,t.data.length).replace(/\0.*$/,""))},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=$t(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(Dt=function(t){var e,i={descriptor:t&&t.descriptor},n=0,r=[],s=0;if(Dt.prototype.init.call(this),this.dispatchType=Rt.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(e=0;e<i.descriptor.length;e++)this.dispatchType+=("00"+i.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,a,o,l;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(t),s+=t.data.byteLength,1===r.length&&(n=Ut(t.data.subarray(6,10)),n+=10),!(s<n)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<n;)e.data.set(r[0].data.subarray(0,n-l),l),l+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();i=10,64&e.data[5]&&(i+=4,i+=Ut(e.data.subarray(10,14)),n-=Ut(e.data.subarray(16,20)));do{if((a=Ut(e.data.subarray(i+4,i+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((o={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+a+10)}).key=o.id,jt[o.id]?jt[o.id](o):"T"===o.id[0]?jt["T*"](o):"W"===o.id[0]&&jt["W*"](o),"com.apple.streaming.transportStreamTimestamp"===o.owner){var c=o.data,u=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;u*=4,u+=3&c[7],o.timeStamp=u,void 0===e.pts&&void 0===e.dts&&(e.pts=o.timeStamp,e.dts=o.timeStamp),this.trigger("timestamp",o)}e.frames.push(o),i+=10,i+=a}while(i<n);this.trigger("data",e)}}}).prototype=new H;var Vt,Ht,qt,Wt=Dt,zt=H,Gt=Et,Kt=It,Yt=Mt.TimestampRolloverStream,Xt=188;(Vt=function(){var t=new Uint8Array(Xt),e=0;Vt.prototype.init.call(this),this.push=function(i){var n,r=0,s=Xt;for(e?((n=new Uint8Array(i.byteLength+e)).set(t.subarray(0,e)),n.set(i,e),e=0):n=i;s<n.byteLength;)71!==n[r]||71!==n[s]?(r++,s++):(this.trigger("data",n.subarray(r,s)),r+=Xt,s+=Xt);r<n.byteLength&&(t.set(n.subarray(r),0),e=n.byteLength-r)},this.flush=function(){e===Xt&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new zt,(Ht=function(){var t,e,i,n;Ht.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,n){var r=0;n.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===n.type?e(t.subarray(r),n):i(t.subarray(r),n)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},i=function(t,e){var i,r;if(1&t[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<i;){var s=t[r],a=(31&t[r+1])<<8|t[r+2];s===Kt.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=a:s===Kt.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=a:s===Kt.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][a]=s),r+=5+((15&t[r+3])<<8|t[r+4])}e.programMapTable=n.programMapTable}},this.push=function(e){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&e[1]),i.pid=31&e[1],i.pid<<=8,i.pid|=e[2],(48&e[3])>>>4>1&&(n+=e[n]+1),0===i.pid)i.type="pat",t(e.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(e.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,i]):this.processPes_(e,n,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=Kt.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Kt.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new zt,Ht.STREAM_TYPES={h264:27,adts:15},qt=function(){var t,e=this,i=!1,n={data:[],size:0},r={data:[],size:0},s={data:[],size:0},a=function(t,i,n){var r,s,a=new Uint8Array(t.size),o={type:i},l=0,c=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,l=0;l<t.data.length;l++)s=t.data[l],a.set(s.data,c),c+=s.data.byteLength;!function(t,e){var i;const n=t[0]<<16|t[1]<<8|t[2];e.data=new Uint8Array,1===n&&(e.packetLength=6+(t[4]<<8|t[5]),e.dataAlignmentIndicator=0!=(4&t[6]),192&(i=t[7])&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&i&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8]))}(a,o),r="video"===i||o.packetLength<=t.size,(n||r)&&(t.size=0,t.data.length=0),r&&e.trigger("data",o)}};qt.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var t,e;switch(o.streamType){case Kt.H264_STREAM_TYPE:t=n,e="video";break;case Kt.ADTS_STREAM_TYPE:t=r,e="audio";break;case Kt.METADATA_STREAM_TYPE:t=s,e="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&a(t,e,!0),t.data.push(o),t.size+=o.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(t=o.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,e.trigger("data",n)}})[o.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(n,"video"),a(r,"audio"),a(s,"timed-metadata")},this.flush=function(){if(!i&&t){var n={type:"metadata",tracks:[]};null!==t.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),e.trigger("data",n)}i=!1,this.flushStreams_(),this.trigger("done")}},qt.prototype=new zt;var Qt={PAT_PID:0,MP2T_PACKET_LENGTH:Xt,TransportPacketStream:Vt,TransportParseStream:Ht,ElementaryStream:qt,TimestampRolloverStream:Yt,CaptionStream:Gt.CaptionStream,Cea608Stream:Gt.Cea608Stream,Cea708Stream:Gt.Cea708Stream,MetadataStream:Wt};for(var Jt in Kt)Kt.hasOwnProperty(Jt)&&(Qt[Jt]=Kt[Jt]);var Zt,te=Qt,ee=lt.ONE_SECOND_IN_TS,ie=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Zt=function(t){var e,i=0;Zt.prototype.init.call(this),this.skipWarn_=function(t,e){this.trigger("log",{level:"warn",message:`adts skiping bytes ${t} to ${e} in frame ${i} outside syncword`})},this.push=function(n){var r,s,a,o,l,c=0;if(t||(i=0),"audio"===n.type){var u;for(e&&e.length?(a=e,(e=new Uint8Array(a.byteLength+n.data.byteLength)).set(a),e.set(n.data,a.byteLength)):e=n.data;c+7<e.length;)if(255===e[c]&&240==(246&e[c+1])){if("number"==typeof u&&(this.skipWarn_(u,c),u=null),s=2*(1&~e[c+1]),r=(3&e[c+3])<<11|e[c+4]<<3|(224&e[c+5])>>5,l=(o=1024*(1+(3&e[c+6])))*ee/ie[(60&e[c+2])>>>2],e.byteLength-c<r)break;this.trigger("data",{pts:n.pts+i*l,dts:n.dts+i*l,sampleCount:o,audioobjecttype:1+(e[c+2]>>>6&3),channelcount:(1&e[c+2])<<2|(192&e[c+3])>>>6,samplerate:ie[(60&e[c+2])>>>2],samplingfrequencyindex:(60&e[c+2])>>>2,samplesize:16,data:e.subarray(c+7+s,c+r)}),i++,c+=r}else"number"!=typeof u&&(u=c),c++;"number"==typeof u&&(this.skipWarn_(u,c),u=null),e=e.subarray(c)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}}).prototype=new H;var ne,re,se,ae=Zt,oe=H,le=function(t){var e=t.byteLength,i=0,n=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+n},this.loadWord=function(){var r=t.byteLength-e,s=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");s.set(t.subarray(r,r+a)),i=new DataView(s.buffer).getUint32(0),n=8*a,e-=a},this.skipBits=function(t){var r;n>t?(i<<=t,n-=t):(t-=n,t-=8*(r=Math.floor(t/8)),e-=r,this.loadWord(),i<<=t,n-=t)},this.readBits=function(t){var r=Math.min(n,t),s=i>>>32-r;return(n-=r)>0?i<<=r:e>0&&this.loadWord(),(r=t-r)>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var t;for(t=0;t<n;++t)if(0!=(i&2147483648>>>t))return i<<=t,n-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(re=function(){var t,e,i=0;re.prototype.init.call(this),this.push=function(n){var r;e?((r=new Uint8Array(e.byteLength+n.data.byteLength)).set(e),r.set(n.data,e.byteLength),e=r):e=n.data;for(var s=e.byteLength;i<s-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<s;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}i+3!==t-2&&this.trigger("data",e.subarray(i+3,t-2));do{t++}while(1!==e[t]&&t<s);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.reset=function(){e=null,i=0,this.trigger("reset")},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new oe,se={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ne=function(){var t,e,i,n,r,s,a,o=new re;ne.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,i=t.pts,n=t.dts,o.push(t))},o.on("data",(function(a){var o={trackId:e,pts:i,dts:n,data:a,nalUnitTypeCode:31&a[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(a.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(a.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",o)})),o.on("done",(function(){t.trigger("done")})),o.on("partialdone",(function(){t.trigger("partialdone")})),o.on("reset",(function(){t.trigger("reset")})),o.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},a=function(t,e){var i,n=8,r=8;for(i=0;i<t;i++)0!==r&&(r=(n+e.readExpGolomb()+256)%256),n=0===r?n:r},r=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},s=function(t){var e,i,n,r,s,o,l,c,u,h,d,p,f=0,m=0,g=0,y=0,v=[1,1];if(i=(e=new le(t)).readUnsignedByte(),r=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),se[i]&&(3===(s=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(d=3!==s?8:12,p=0;p<d;p++)e.readBoolean()&&a(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),l=e.readUnsignedExpGolomb(),p=0;p<l;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),c=e.readUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===(h=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:16*(c+1)-2*f-2*m,height:(2-h)*(u+1)*16-2*g-2*y,sarRatio:v}}},ne.prototype=new oe;var ce,ue={H264Stream:ne,NalByteStream:re},he=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],de=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=i>=0?i:0,(16&t[e+5])>>4?i+20:i+10},pe=function(t,e){return t.length-e<10||t[e]!=="I".charCodeAt(0)||t[e+1]!=="D".charCodeAt(0)||t[e+2]!=="3".charCodeAt(0)?e:(e+=de(t,e),pe(t,e))},fe=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},me={isLikelyAacData:function(t){var e=pe(t,0);return t.length>=e+2&&255==(255&t[e])&&240==(240&t[e+1])&&16==(22&t[e+1])},parseId3TagSize:de,parseAdtsSize:function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return he[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,i,n;e=10,64&t[5]&&(e+=4,e+=fe(t.subarray(10,14)));do{if((i=fe(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){n=t.subarray(e+10,e+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){var s=unescape(function(t,e,i){var n,r="";for(n=0;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r}(n,0,r));if("com.apple.streaming.transportStreamTimestamp"===s){var a=n.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(o*=4)+(3&a[7])}break}}e+=10,e+=i}while(e<t.byteLength);return null}},ge=me;(ce=function(){var t=new Uint8Array,e=0;ce.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(i){var n,r,s,a,o=0,l=0;for(t.length?(a=t.length,(t=new Uint8Array(i.byteLength+a)).set(t.subarray(0,a)),t.set(i,a)):t=i;t.length-l>=3;)if(t[l]!=="I".charCodeAt(0)||t[l+1]!=="D".charCodeAt(0)||t[l+2]!=="3".charCodeAt(0))if(255!=(255&t[l])||240!=(240&t[l+1]))l++;else{if(t.length-l<7)break;if(l+(o=ge.parseAdtsSize(t,l))>t.length)break;s={type:"audio",data:t.subarray(l,l+o),pts:e,dts:e},this.trigger("data",s),l+=o}else{if(t.length-l<10)break;if(l+(o=ge.parseId3TagSize(t,l))>t.length)break;r={type:"timed-metadata",data:t.subarray(l,l+o)},this.trigger("data",r),l+=o}n=t.length-l,t=n>0?t.subarray(l):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new H;var ye,ve,be,_e,we=H,Te=et,Se=nt,xe=ut,ke=dt,Ce=te,Ee=lt,Ie=ae,Pe=ue.H264Stream,Ae=ce,Le=me.isLikelyAacData,Oe=lt.ONE_SECOND_IN_TS,De=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Me=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Re=function(t,e){e.stream=t,this.trigger("log",e)},Ne=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n];"headOfPipeline"!==r&&e[r].on&&e[r].on("log",Re.bind(t,r))}},Be=function(t,e){var i;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},Fe=function(t,e,i,n,r,s){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(n-e),pts:t+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:t}};ve=function(t,e){var i,n=[],r=0,s=0,a=1/0;i=(e=e||{}).firstSequenceNumber||0,ve.prototype.init.call(this),this.push=function(e){ke.collectDtsInfo(t,e),t&&De.forEach((function(i){t[i]=e[i]})),n.push(e)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){a=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var o,l,c,u,h,d,p;0!==n.length?(o=xe.trimAdtsFramesByEarliestDts(n,t,r),t.baseMediaDecodeTime=ke.calculateTrackBaseMediaDecodeTime(t,e.keepOriginalTimestamps),p=xe.prefixWithSilence(t,o,s,a),t.samples=xe.generateSampleTable(o),c=Te.mdat(xe.concatenateFrameData(o)),n=[],l=Te.moof(i,[t]),u=new Uint8Array(l.byteLength+c.byteLength),i++,u.set(l),u.set(c,l.byteLength),ke.clearDtsInfo(t),h=Math.ceil(1024*Oe/t.samplerate),o.length&&(d=o.length*h,this.trigger("segmentTimingInfo",Fe(Ee.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),o[0].dts,o[0].pts,o[0].dts+d,o[0].pts+d,p||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+d})),this.trigger("data",{track:t,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){ke.clearDtsInfo(t),n=[],this.trigger("reset")}},ve.prototype=new we,ye=function(t,e){var i,n,r,s=[],a=[];i=(e=e||{}).firstSequenceNumber||0,ye.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){ke.collectDtsInfo(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],Me.forEach((function(e){t[e]=n[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),s.push(e)},this.flush=function(){for(var n,r,o,l,c,u,h,d,p=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=Se.groupNalsIntoFrames(s),(o=Se.groupFramesIntoGops(n))[0][0].keyFrame||((r=this.getGopForFusion_(s[0],t))?(p=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=Se.extendFirstKeyFrame(o)),a.length){var f;if(!(f=e.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ke.clearDtsInfo(t),o=f}ke.collectDtsInfo(t,o),t.samples=Se.generateSampleTable(o),c=Te.mdat(Se.concatenateNalData(o)),t.baseMediaDecodeTime=ke.calculateTrackBaseMediaDecodeTime(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),h=o[0],d=o[o.length-1],this.trigger("segmentTimingInfo",Fe(t.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),l=Te.moof(i,[t]),u=new Uint8Array(l.byteLength+c.byteLength),i++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:t,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){ke.clearDtsInfo(t),n=void 0,r=void 0},this.getGopForFusion_=function(e){var i,n,r,s,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(s=this.gopCache_[a]).gop,t.pps&&Be(t.pps[0],s.pps[0])&&t.sps&&Be(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts||(i=e.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||o>i)&&(n=s,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,s,o,l,c;for(s=t.byteLength,o=t.nalCount,l=t.duration,e=i=0;e<a.length&&i<t.length&&(n=a[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,s-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?t:i===t.length?null:((c=t.slice(i)).byteLength=s,c.duration=l,c.nalCount=o,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(t){var e,i,n,r,s,o,l;for(e=a.length-1,i=t.length-1,s=null,o=!1;e>=0&&i>=0;){if(n=a[e],r=t[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?e--:(e===a.length-1&&(s=i),i--)}if(!o&&null===s)return null;if(0===(l=o?i:s))return t;var c=t.slice(l),u=c.reduce((function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(t){a=t}},ye.prototype=new we,_e=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,_e.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}},_e.prototype=new we,_e.prototype.flush=function(t){var e,i,n,r,s=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Me.forEach((function(t){a.info[t]=this.videoTrack[t]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,De.forEach((function(t){a.info[t]=this.audioTrack[t]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,n=Te.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(n.byteLength),a.initSegment.set(n),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=Ee.metadataTsToSeconds(e.startPts,o,this.keepOriginalTimestamps),e.endTime=Ee.metadataTsToSeconds(e.endPts,o,this.keepOriginalTimestamps),a.captionStreams[e.stream]=!0,a.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=Ee.metadataTsToSeconds(i.pts,o,this.keepOriginalTimestamps),a.metadata.push(i);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)e=a.captions[r],this.trigger("caption",e);for(r=0;r<a.metadata.length;r++)i=a.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},_e.prototype.setRemux=function(t){this.remuxTracks=t},(be=function(t){var e,i,n=this,r=!0;be.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Ce.MetadataStream,r.aacStream=new Ae,r.audioTimestampRolloverStream=new Ce.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Ce.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Ie,r.coalesceStream=new _e(t,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(t){r.aacStream.setTimestamp(t.timeStamp)})),r.aacStream.on("data",(function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ve(i,t),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Ne(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Ce.MetadataStream,r.packetStream=new Ce.TransportPacketStream,r.parseStream=new Ce.TransportParseStream,r.elementaryStream=new Ce.ElementaryStream,r.timestampRolloverStream=new Ce.TimestampRolloverStream,r.adtsStream=new Ie,r.h264Stream=new Pe,r.captionStream=new Ce.CaptionStream(t),r.coalesceStream=new _e(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(s){var a;if("metadata"===s.type){for(a=s.tracks.length;a--;)e||"video"!==s.tracks[a].type?i||"audio"!==s.tracks[a].type||((i=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(e=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;e&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ye(e,t),r.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(e){i&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(t){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ve(i,t),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(t){t.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",t)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Ne(this,r)},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,ke.clearDtsInfo(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,ke.clearDtsInfo(e),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var e=this;return function(i){i.stream=t,e.trigger("log",i)}},this.push=function(t){if(r){var e=Le(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new we;var $e,Ue,je,Ve,He={Transmuxer:be,VideoSegmentStream:ye,AudioSegmentStream:ve,AUDIO_PROPERTIES:De,VIDEO_PROPERTIES:Me,generateSegmentTimingInfo:Fe},qe=function(t){return t>>>0},We=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},ze=qe,Ge=We,Ke=function(t,e){var i,n,r,s,a,o=[];if(!e.length)return null;for(i=0;i<t.byteLength;)n=ze(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),r=Ge(t.subarray(i+4,i+8)),s=n>1?i+n:t.byteLength,r===e[0]&&(1===e.length?o.push(t.subarray(i+8,s)):(a=Ke(t.subarray(i+8,s),e.slice(1))).length&&(o=o.concat(a))),i=s;return o},Ye=qe,Xe=W.getUint64,Qe=function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?e.baseMediaDecodeTime=Xe(t.subarray(4)):e.baseMediaDecodeTime=Ye(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),e},Je=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},Ze=function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&i.flags[2],s=4&i.flags[2],a=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),h=8;for(r&&(i.dataOffset=n.getInt32(h),h+=4),s&&u&&(e={flags:Je(t.subarray(h,h+4))},h+=4,a&&(e.duration=n.getUint32(h),h+=4),o&&(e.size=n.getUint32(h),h+=4),c&&(1===i.version?e.compositionTimeOffset=n.getInt32(h):e.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(e),u--);u--;)e={},a&&(e.duration=n.getUint32(h),h+=4),o&&(e.size=n.getUint32(h),h+=4),l&&(e.flags=Je(t.subarray(h,h+4)),h+=4),c&&(1===i.version?e.compositionTimeOffset=n.getInt32(h):e.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(e);return i},ti=function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],s=2&n.flags[2],a=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return e=8,r&&(e+=4,n.baseDataOffset=i.getUint32(12),e+=4),s&&(n.sampleDescriptionIndex=i.getUint32(e),e+=4),a&&(n.defaultSampleDuration=i.getUint32(e),e+=4),o&&(n.defaultSampleSize=i.getUint32(e),e+=4),l&&(n.defaultSampleFlags=i.getUint32(e)),c&&(n.durationIsEmpty=!0),!r&&u&&(n.baseDataOffsetIsMoof=!0),n},ei=($e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},pt.discardEmulationPreventionBytes),ii=Et.CaptionStream,ni=Ke,ri=Qe,si=Ze,ai=ti,oi=$e,li=function(t,e){for(var i=t,n=0;n<e.length;n++){var r=e[n];if(i<r.size)return r;i-=r.size}return null},ci=function(){var t,e,i,n,r,s,a=!1;this.isInitialized=function(){return a},this.init=function(e){t=new ii,a=!0,s=!!e&&e.isPartial,t.on("data",(function(t){t.startTime=t.startPts/n,t.endTime=t.endPts/n,r.captions.push(t),r.captionStreams[t.stream]=!0})),t.on("log",(function(t){r.logs.push(t)}))},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length||i===t[0]&&n===e[i])},this.parse=function(t,s,a){var o;if(!this.isInitialized())return null;if(!s||!a)return null;if(this.isNewInit(s,a))i=s[0],n=a[i];else if(null===i||!n)return e.push(t),null;for(;e.length>0;){var l=e.shift();this.parse(l,s,a)}return o=function(t,e,i){if(null===e)return null;var n=function(t,e){var i=ni(t,["moof","traf"]),n=ni(t,["mdat"]),r={},s=[];return n.forEach((function(t,e){var n=i[e];s.push({mdat:t,traf:n})})),s.forEach((function(t){var i,n,s=t.mdat,a=t.traf,o=ni(a,["tfhd"]),l=ai(o[0]),c=l.trackId,u=ni(a,["tfdt"]),h=u.length>0?ri(u[0]).baseMediaDecodeTime:0,d=ni(a,["trun"]);e===c&&d.length>0&&(i=function(t,e,i){var n=e,r=i.defaultSampleDuration||0,s=i.defaultSampleSize||0,a=i.trackId,o=[];return t.forEach((function(t){var e=si(t).samples;e.forEach((function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=s),t.trackId=a,t.dts=n,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),"bigint"==typeof n?(t.pts=n+oi.BigInt(t.compositionTimeOffset),n+=oi.BigInt(t.duration)):(t.pts=n+t.compositionTimeOffset,n+=t.duration)})),o=o.concat(e)})),o}(d,h,l),n=function(t,e,i){var n,r,s,a,o=new DataView(t.buffer,t.byteOffset,t.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<t.length;r+=s)if(s=o.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var c=t.subarray(r+1,r+1+s),u=li(r,e);if(n={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:ei(c),trackId:i},u)n.pts=u.pts,n.dts=u.dts,a=u;else{if(!a){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+i+". See mux.js#223."});break}n.pts=a.pts,n.dts=a.dts}l.seiNals.push(n)}return l}(s,i,c),r[c]||(r[c]={seiNals:[],logs:[]}),r[c].seiNals=r[c].seiNals.concat(n.seiNals),r[c].logs=r[c].logs.concat(n.logs))})),r}(t,e)[e]||{};return{seiNals:n.seiNals,logs:n.logs,timescale:i}}(t,i,n),o&&o.logs&&(r.logs=r.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach((function(e){t.push(e)}))},this.flushStream=function(){if(!this.isInitialized())return null;s?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},ui=qe,hi=function(t){return("00"+t.toString(16)).slice(-2)},di=Ke,pi=We,fi=W.getUint64,mi=$e;Ue=function(t,e){var i=di(e,["moof","traf"]).reduce((function(e,i){var n,r=di(i,["tfhd"])[0],s=ui(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),a=t[s]||9e4,o=di(i,["tfdt"])[0],l=new DataView(o.buffer,o.byteOffset,o.byteLength);let c;return"bigint"==typeof(n=1===o[0]?fi(o.subarray(4,12)):l.getUint32(4))?c=n/mi.BigInt(a):"number"!=typeof n||isNaN(n)||(c=n/a),c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),c<e&&(e=c),e}),1/0);return"bigint"==typeof i||isFinite(i)?i:0},Ve=function(t){var e=0===t[0]?12:20;return ui(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])},je=function(t){var e=di(t,["moov","trak"]),i=[];return e.forEach((function(t){var e,n,r={},s=di(t,["tkhd"])[0];s&&(n=(e=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),r.id=0===n?e.getUint32(12):e.getUint32(20));var a=di(t,["mdia","hdlr"])[0];if(a){var o=pi(a.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=di(t,["mdia","minf","stbl","stsd"])[0];if(l){var c=l.subarray(8);r.codec=pi(c.subarray(4,8));var u,h=di(c,[r.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(r.codec)?(u=h.subarray(78),"avcC"===pi(u.subarray(4,8))&&u.length>11?(r.codec+=".",r.codec+=hi(u[9]),r.codec+=hi(u[10]),r.codec+=hi(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=h.subarray(28),"esds"===pi(u.subarray(4,8))&&u.length>20&&0!==u[19]?(r.codec+="."+hi(u[19]),r.codec+="."+hi(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var d=di(t,["mdia","mdhd"])[0];d&&(r.timescale=Ve(d)),i.push(r)})),i};var gi=Ue,yi=je,vi=It,bi=function(t){var e=31&t[1];return(e<<=8)|t[2]},_i=function(t){return!!(64&t[1])},wi=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},Ti=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Si={parseType:function(t,e){var i=bi(t);return 0===i?"pat":i===e?"pmt":e?"pes":null},parsePat:function(t){var e=_i(t),i=4+wi(t);return e&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var e={},i=_i(t),n=4+wi(t);if(i&&(n+=t[n]+1),1&t[n+5]){var r;r=3+((15&t[n+1])<<8|t[n+2])-4;for(var s=12+((15&t[n+10])<<8|t[n+11]);s<r;){var a=n+s;e[(31&t[a+1])<<8|t[a+2]]=t[a],s+=5+((15&t[a+3])<<8|t[a+4])}return e}},parsePayloadUnitStartIndicator:_i,parsePesType:function(t,e){switch(e[bi(t)]){case vi.H264_STREAM_TYPE:return"video";case vi.ADTS_STREAM_TYPE:return"audio";case vi.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!_i(t))return null;var e=4+wi(t);if(e>=t.byteLength)return null;var i,n=null;return 192&(i=t[e+7])&&((n={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,n.pts*=4,n.pts+=(6&t[e+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,n.dts*=4,n.dts+=(6&t[e+18])>>>1)),n},videoPacketContainsKeyFrame:function(t){for(var e=4+wi(t),i=t.subarray(e),n=0,r=0,s=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Ti(31&i[r+3])&&(s=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Ti(31&i[r+3])&&(s=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Ti(31&i[r+3])&&(s=!0),s}},xi=It,ki=Mt.handleRollover,Ci={};Ci.ts=Si,Ci.aac=me;var Ei=lt.ONE_SECOND_IN_TS,Ii=188,Pi=71,Ai=function(t,e,i){for(var n,r,s,a,o=0,l=Ii,c=!1;l<=t.byteLength;)if(t[o]!==Pi||t[l]!==Pi&&l!==t.byteLength)o++,l++;else{if(n=t.subarray(o,l),"pes"===Ci.ts.parseType(n,e.pid)&&(r=Ci.ts.parsePesType(n,e.table),s=Ci.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=Ci.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)),c)break;o+=Ii,l+=Ii}for(o=(l=t.byteLength)-Ii,c=!1;o>=0;)if(t[o]!==Pi||t[l]!==Pi&&l!==t.byteLength)o--,l--;else{if(n=t.subarray(o,l),"pes"===Ci.ts.parseType(n,e.pid)&&(r=Ci.ts.parsePesType(n,e.table),s=Ci.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=Ci.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)),c)break;o-=Ii,l-=Ii}},Li=function(t,e,i){for(var n,r,s,a,o,l,c,u=0,h=Ii,d=!1,p={data:[],size:0};h<t.byteLength;)if(t[u]!==Pi||t[h]!==Pi)u++,h++;else{if(n=t.subarray(u,h),"pes"===Ci.ts.parseType(n,e.pid)&&(r=Ci.ts.parsePesType(n,e.table),s=Ci.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(s&&!d&&(a=Ci.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),d=!0),!i.firstKeyFrame))){if(s&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),o.set(c,l),l+=c.byteLength;if(Ci.ts.videoPacketContainsKeyFrame(o)){var f=Ci.ts.parsePesTime(o);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(n),p.size+=n.byteLength}if(d&&i.firstKeyFrame)break;u+=Ii,h+=Ii}for(u=(h=t.byteLength)-Ii,d=!1;u>=0;)if(t[u]!==Pi||t[h]!==Pi)u--,h--;else{if(n=t.subarray(u,h),"pes"===Ci.ts.parseType(n,e.pid)&&(r=Ci.ts.parsePesType(n,e.table),s=Ci.ts.parsePayloadUnitStartIndicator(n),"video"===r&&s&&(a=Ci.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),d=!0)),d)break;u-=Ii,h-=Ii}},Oi=function(t,e){var i;return i=Ci.aac.isLikelyAacData(t)?function(t){for(var e,i=!1,n=0,r=null,s=null,a=0,o=0;t.length-o>=3;){switch(Ci.aac.parseType(t,o)){case"timed-metadata":if(t.length-o<10){i=!0;break}if((a=Ci.aac.parseId3TagSize(t,o))>t.length){i=!0;break}null===s&&(e=t.subarray(o,o+a),s=Ci.aac.parseAacTimestamp(e)),o+=a;break;case"audio":if(t.length-o<7){i=!0;break}if((a=Ci.aac.parseAdtsSize(t,o))>t.length){i=!0;break}null===r&&(e=t.subarray(o,o+a),r=Ci.aac.parseSampleRate(e)),n++,o+=a;break;default:o++}if(i)return null}if(null===r||null===s)return null;var l=Ei/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*n*l,pts:s+1024*n*l}]}}(t):function(t){var e={pid:null,table:null},i={};for(var n in function(t,e){for(var i,n=0,r=Ii;r<t.byteLength;)if(t[n]!==Pi||t[r]!==Pi)n++,r++;else{switch(i=t.subarray(n,r),Ci.ts.parseType(i,e.pid)){case"pat":e.pid=Ci.ts.parsePat(i);break;case"pmt":var s=Ci.ts.parsePmt(i);e.table=e.table||{},Object.keys(s).forEach((function(t){e.table[t]=s[t]}))}n+=Ii,r+=Ii}}(t,e),e.table)if(e.table.hasOwnProperty(n))switch(e.table[n]){case xi.H264_STREAM_TYPE:i.video=[],Li(t,e,i),0===i.video.length&&delete i.video;break;case xi.ADTS_STREAM_TYPE:i.audio=[],Ai(t,e,i),0===i.audio.length&&delete i.audio}return i}(t),i&&(i.audio||i.video)?(function(t,e){if(t.audio&&t.audio.length){var i=e;(void 0===i||isNaN(i))&&(i=t.audio[0].dts),t.audio.forEach((function(t){t.dts=ki(t.dts,i),t.pts=ki(t.pts,i),t.dtsTime=t.dts/Ei,t.ptsTime=t.pts/Ei}))}if(t.video&&t.video.length){var n=e;if((void 0===n||isNaN(n))&&(n=t.video[0].dts),t.video.forEach((function(t){t.dts=ki(t.dts,n),t.pts=ki(t.pts,n),t.dtsTime=t.dts/Ei,t.ptsTime=t.pts/Ei})),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=ki(r.dts,n),r.pts=ki(r.pts,n),r.dtsTime=r.dts/Ei,r.ptsTime=r.pts/Ei}}}(i,e),i):null};class Di{constructor(t,e){this.options=e||{},this.self=t,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new He.Transmuxer(this.options),function(t,e){e.on("data",(function(e){const i=e.initSegment;e.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};const n=e.data;e.data=n.buffer,t.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])})),e.on("done",(function(e){t.postMessage({action:"done"})})),e.on("gopInfo",(function(e){t.postMessage({action:"gopInfo",gopInfo:e})})),e.on("videoSegmentTimingInfo",(function(e){const i={start:{decode:lt.videoTsToSeconds(e.start.dts),presentation:lt.videoTsToSeconds(e.start.pts)},end:{decode:lt.videoTsToSeconds(e.end.dts),presentation:lt.videoTsToSeconds(e.end.pts)},baseMediaDecodeTime:lt.videoTsToSeconds(e.baseMediaDecodeTime)};e.prependedContentDuration&&(i.prependedContentDuration=lt.videoTsToSeconds(e.prependedContentDuration)),t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})),e.on("audioSegmentTimingInfo",(function(e){const i={start:{decode:lt.videoTsToSeconds(e.start.dts),presentation:lt.videoTsToSeconds(e.start.pts)},end:{decode:lt.videoTsToSeconds(e.end.dts),presentation:lt.videoTsToSeconds(e.end.pts)},baseMediaDecodeTime:lt.videoTsToSeconds(e.baseMediaDecodeTime)};e.prependedContentDuration&&(i.prependedContentDuration=lt.videoTsToSeconds(e.prependedContentDuration)),t.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})})),e.on("id3Frame",(function(e){t.postMessage({action:"id3Frame",id3Frame:e})})),e.on("caption",(function(e){t.postMessage({action:"caption",caption:e})})),e.on("trackinfo",(function(e){t.postMessage({action:"trackinfo",trackInfo:e})})),e.on("audioTimingInfo",(function(e){t.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:lt.videoTsToSeconds(e.start),end:lt.videoTsToSeconds(e.end)}})})),e.on("videoTimingInfo",(function(e){t.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:lt.videoTsToSeconds(e.start),end:lt.videoTsToSeconds(e.end)}})})),e.on("log",(function(e){t.postMessage({action:"log",log:e})}))}(this.self,this.transmuxer)}pushMp4Captions(t){this.captionParser||(this.captionParser=new ci,this.captionParser.init());const e=new Uint8Array(t.data,t.byteOffset,t.byteLength),i=this.captionParser.parse(e,t.trackIds,t.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],logs:i&&i.logs||[],data:e.buffer},[e.buffer])}probeMp4StartTime({timescales:t,data:e}){const i=gi(t,e);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:e},[e.buffer])}probeMp4Tracks({data:t}){const e=yi(t);this.self.postMessage({action:"probeMp4Tracks",tracks:e,data:t},[t.buffer])}probeTs({data:t,baseStartTime:e}){const i="number"!=typeof e||isNaN(e)?void 0:e*lt.ONE_SECOND_IN_TS,n=Oi(t,i);let r=null;n&&(r={hasVideo:n.video&&2===n.video.length||!1,hasAudio:n.audio&&2===n.audio.length||!1},r.hasVideo&&(r.videoStart=n.video[0].ptsTime),r.hasAudio&&(r.audioStart=n.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:r,data:t},[t.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(t){const e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}reset(){this.transmuxer.reset()}setTimestampOffset(t){const e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(lt.secondsToVideoTs(e)))}setAudioAppendStart(t){this.transmuxer.setAudioAppendStart(Math.ceil(lt.secondsToVideoTs(t.appendStart)))}setRemux(t){this.transmuxer.setRemux(t.remux)}flush(t){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}self.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Di(self,t.data.options):(this.messageHandlers||(this.messageHandlers=new Di(self)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}})));var Ro=Lo(Mo);const No=t=>{const{transmuxer:e,bytes:i,audioAppendStart:n,gopsToAlignWith:r,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:c,onVideoSegmentTimingInfo:u,onAudioSegmentTimingInfo:h,onId3:d,onCaptions:p,onDone:f,onEndedTimeline:m,onTransmuxerLog:g,isEndOfTimeline:y}=t,v={buffer:[]};let b=y;if(e.onmessage=i=>{e.currentTransmux===t&&("data"===i.data.action&&((t,e,i)=>{const{type:n,initSegment:r,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:c}=t.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const u=t.data.segment.boxes||{data:t.data.segment.data},h={type:n,data:new Uint8Array(u.data,u.data.byteOffset,u.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};void 0!==l&&(h.videoFrameDtsTime=l),void 0!==c&&(h.videoFramePtsTime=c),i(h)})(i,v,a),"trackinfo"===i.data.action&&o(i.data.trackInfo),"gopInfo"===i.data.action&&((t,e)=>{e.gopInfo=t.data.gopInfo})(i,v),"audioTimingInfo"===i.data.action&&l(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&c(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&u(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&h(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&d([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&p(i.data.caption),"endedtimeline"===i.data.action&&(b=!1,m()),"log"===i.data.action&&g(i.data.log),"transmuxed"===i.data.type&&(b||(e.onmessage=null,(({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)})({transmuxedData:v,callback:f}),Bo(e))))},n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&e.postMessage({action:"setRemux",remux:s}),i.byteLength){const t=i instanceof ArrayBuffer?i:i.buffer,n=i instanceof ArrayBuffer?0:i.byteOffset;e.postMessage({action:"push",data:t,byteOffset:n,byteLength:i.byteLength},[t])}y&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},Bo=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),"function"==typeof t.currentTransmux?t.currentTransmux():No(t.currentTransmux))},Fo=(t,e)=>{t.postMessage({action:e}),Bo(t)};var $o=t=>{((t,e)=>{if(!e.currentTransmux)return e.currentTransmux=t,void Fo(e,t);e.transmuxQueue.push(Fo.bind(null,e,t))})("reset",t)};const Uo=function(t){const e=t.transmuxer,i=t.endAction||t.action,n=t.callback,r=(0,v.Z)({},t,{endAction:null,transmuxer:null,callback:null}),s=r=>{r.data.action===i&&(e.removeEventListener("message",s),r.data.data&&(r.data.data=new Uint8Array(r.data.data,t.byteOffset||0,t.byteLength||r.data.data.byteLength),t.data&&(t.data=r.data.data)),n(r.data))};if(e.addEventListener("message",s),t.data){const i=t.data instanceof ArrayBuffer;r.byteOffset=i?0:t.data.byteOffset,r.byteLength=t.data.byteLength;const n=[i?t.data:t.data.buffer];e.postMessage(r,n)}else e.postMessage(r)},jo=-101,Vo=-102,Ho=t=>{t.forEach((t=>{t.abort()}))},qo=(t,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:jo,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Vo,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:2,xhr:e}:null,Wo=(t,e,i)=>(n,r)=>{const s=r.response,a=qo(n,r);if(a)return i(a,t);if(16!==s.byteLength)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},t);const o=new DataView(s),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]);for(let t=0;t<e.length;t++)e[t].bytes=l;return i(null,t)},zo=(t,e)=>{const i=me(t.map.bytes);if("mp4"!==i){const n=t.map.resolvedUri||t.map.uri;return e({internal:!0,message:`Found unsupported ${i||"unknown"} container for initialization segment at URL: ${n}`,code:2})}Uo({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:i,data:n})=>(t.map.bytes=n,i.forEach((function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,"number"==typeof e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),e(null))})},Go=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})=>{const p=t.map&&t.map.tracks||{},f=Boolean(p.audio&&p.video);let m=n.bind(null,t,"audio","start");const g=n.bind(null,t,"audio","end");let y=n.bind(null,t,"video","start");const v=n.bind(null,t,"video","end");Uo({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:n=>{t.bytes=e=n.data;const p=n.result;p&&(i(t,{hasAudio:p.hasAudio,hasVideo:p.hasVideo,isMuxed:f}),i=null,p.hasAudio&&!f&&m(p.audioStart),p.hasVideo&&y(p.videoStart),m=null,y=null),(t=>{if(!t.transmuxer.currentTransmux)return t.transmuxer.currentTransmux=t,void No(t);t.transmuxer.transmuxQueue.push(t)})({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:f,onData:e=>{e.type="combined"===e.type?"video":e.type,u(t,e)},onTrackInfo:e=>{i&&(f&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:t=>{m&&void 0!==t.start&&(m(t.start),m=null),g&&void 0!==t.end&&g(t.end)},onVideoTimingInfo:t=>{y&&void 0!==t.start&&(y(t.start),y=null),v&&void 0!==t.end&&v(t.end)},onVideoSegmentTimingInfo:t=>{r(t)},onAudioSegmentTimingInfo:t=>{s(t)},onId3:(e,i)=>{a(t,e,i)},onCaptions:e=>{o(t,[e])},isEndOfTimeline:l,onEndedTimeline:()=>{c()},onTransmuxerLog:d,onDone:e=>{h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})},Ko=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})=>{let p=new Uint8Array(e);if(function(t){return Zt(t,["moof"]).length>0}(p)){t.isFmp4=!0;const{tracks:r}=t.map,s={isFmp4:!0,hasVideo:!!r.video,hasAudio:!!r.audio};r.audio&&r.audio.codec&&"enca"!==r.audio.codec&&(s.audioCodec=r.audio.codec),r.video&&r.video.codec&&"encv"!==r.video.codec&&(s.videoCodec=r.video.codec),r.video&&r.audio&&(s.isMuxed=!0),i(t,s);const a=e=>{u(t,{data:p,type:s.hasAudio&&!s.isMuxed?"audio":"video"}),e&&e.length&&o(t,e),h(null,t,{})};Uo({action:"probeMp4StartTime",timescales:t.map.timescales,data:p,transmuxer:t.transmuxer,callback:({data:i,startTime:o})=>{e=i.buffer,t.bytes=p=i,s.hasAudio&&!s.isMuxed&&n(t,"audio","start",o),s.hasVideo&&n(t,"video","start",o),r.video&&i.byteLength&&t.transmuxer?Uo({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:p,timescales:t.map.timescales,trackIds:[r.video.id],callback:i=>{e=i.data.buffer,t.bytes=p=i.data,i.logs.forEach((function(t){d(wa(t,{stream:"mp4CaptionParser"}))})),a(i.captions)}}):a()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=me(p)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void h(null,t,{});Go({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})}else h(null,t,{})},Yo=function({id:t,key:e,encryptedBytes:i,decryptionWorker:n},r){const s=e=>{if(e.data.source===t){n.removeEventListener("message",s);const t=e.data.decrypted;r(new Uint8Array(t.bytes,t.byteOffset,t.byteLength))}};let a;n.addEventListener("message",s),a=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(yo({source:t,encrypted:i,key:a,iv:e.iv}),[i.buffer,a.buffer])},Xo=({xhr:t,xhrOptions:e,decryptionWorker:i,segment:n,abortFn:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:h,isEndOfTimeline:d,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g})=>{const y=[],v=(({activeXhrs:t,decryptionWorker:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})=>{let p=0,f=!1;return(m,g)=>{if(!f){if(m)return f=!0,Ho(t),h(m,g);if(p+=1,p===t.length){const p=function(){if(g.encryptedBytes)return(({decryptionWorker:t,segment:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})=>{Yo({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t},(t=>{e.bytes=t,Ko({segment:e,bytes:e.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})}))})({decryptionWorker:e,segment:g,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d});Ko({segment:g,bytes:g.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:h,onTransmuxerLog:d})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Yo({decryptionWorker:e,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(e=>{g.map.bytes=e,zo(g,(e=>{if(e)return Ho(t),h(e,g);p()}))}));p()}}}})({activeXhrs:y,decryptionWorker:i,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:h,isEndOfTimeline:d,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g});if(n.key&&!n.key.bytes){const i=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&i.push(n.map.key);const r=t(wa(e,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),Wo(n,i,v));y.push(r)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const i=t(wa(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),Wo(n,[n.map.key],v));y.push(i)}const i=wa(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:po(n.map)}),r=(({segment:t,finishProcessingFn:e})=>(i,n)=>{const r=qo(i,n);if(r)return e(r,t);const s=new Uint8Array(n.response);if(t.map.key)return t.map.encryptedBytes=s,e(null,t);t.map.bytes=s,zo(t,(function(i){if(i)return i.xhr=n,i.status=n.status,e(i,t);e(null,t)}))})({segment:n,finishProcessingFn:v}),s=t(i,r);y.push(s)}const b=wa(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:po(n)}),_=t(b,(({segment:t,finishProcessingFn:e,responseType:i})=>(n,r)=>{const s=qo(n,r);if(s)return e(s,t);const a="arraybuffer"!==i&&r.responseText?(t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer})(r.responseText.substring(t.lastReachedChar||0)):r.response;return t.stats=(t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}))(r),t.key?t.encryptedBytes=new Uint8Array(a):t.bytes=new Uint8Array(a),e(null,t)})({segment:n,finishProcessingFn:v,responseType:b.responseType}));_.addEventListener("progress",(({segment:t,progressFn:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u})=>i=>{if(!i.target.aborted)return t.stats=wa(t.stats,(t=>{const e=t.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i})(i)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(i,t)})({segment:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:h,isEndOfTimeline:d,endedTimelineFn:p,dataFn:f})),y.push(_);const w={};return y.forEach((t=>{t.addEventListener("loadend",(({loadendState:t,abortFn:e})=>i=>{i.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)})({loadendState:w,abortFn:r}))})),()=>Ho(y)},Qo=_a("CodecUtils"),Jo=(t,e)=>{const i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},Zo=function(t){const e={};return t.forEach((({mediaType:t,type:i,details:n})=>{e[t]=e[t]||[],e[t].push(N(`${i}${n}`))})),Object.keys(e).forEach((function(t){if(e[t].length>1)return Qo(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(e[t]=null);e[t]=e[t][0]})),e},tl=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},el=function(t,e){const i=e.attributes||{},n=Zo(function(t){const e=t.attributes||{};if(e.CODECS)return B(e.CODECS)}(e)||[]);if(Jo(t,e)&&!n.audio&&!((t,e)=>{if(!Jo(t,e))return!0;const i=e.attributes||{},n=t.mediaGroups.AUDIO[i.AUDIO];for(const t in n)if(!n[t].uri&&!n[t].playlists)return!0;return!1})(t,e)){const e=Zo(function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var i=t.mediaGroups.AUDIO[e];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return B(r.playlists[0].attributes.CODECS)}return null}(t,i.AUDIO)||[]);e.audio&&(n.audio=e.audio)}return n},il=_a("PlaylistSelector"),nl=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},rl=function(t,e){if(!t)return"";const i=r().getComputedStyle(t);return i?i[e]:""},sl=function(t,e){const i=t.slice();t.sort((function(t,n){const r=e(t,n);return 0===r?i.indexOf(t)-i.indexOf(n):r}))},al=function(t,e){let i,n;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||r().Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||r().Number.MAX_VALUE,i-n};let ol=function(t,e,i,n,s,a){if(!t)return;const o={bandwidth:e,width:i,height:n,limitRenditionByPlayerDimensions:s};let l=t.playlists;Ya.isAudioOnly(t)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);let c=l.map((t=>{let e;const i=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height;return e=t.attributes&&t.attributes.BANDWIDTH,e=e||r().Number.MAX_VALUE,{bandwidth:e,width:i,height:n,playlist:t}}));sl(c,((t,e)=>t.bandwidth-e.bandwidth)),c=c.filter((t=>!Ya.isIncompatible(t.playlist)));let u=c.filter((t=>Ya.isEnabled(t.playlist)));u.length||(u=c.filter((t=>!Ya.isDisabled(t.playlist))));const h=u.filter((t=>t.bandwidth*Po.BANDWIDTH_VARIANCE<e));let d=h[h.length-1];const p=h.filter((t=>t.bandwidth===d.bandwidth))[0];if(!1===s){const t=p||u[0]||c[0];if(t&&t.playlist){let e="sortedPlaylistReps";return p&&(e="bandwidthBestRep"),u[0]&&(e="enabledPlaylistReps"),il(`choosing ${nl(t)} using ${e} with options`,o),t.playlist}return il("could not choose a playlist with options",o),null}const f=h.filter((t=>t.width&&t.height));sl(f,((t,e)=>t.width-e.width));const m=f.filter((t=>t.width===i&&t.height===n));d=m[m.length-1];const g=m.filter((t=>t.bandwidth===d.bandwidth))[0];let y,v,b,_;if(g||(y=f.filter((t=>t.width>i||t.height>n)),v=y.filter((t=>t.width===y[0].width&&t.height===y[0].height)),d=v[v.length-1],b=v.filter((t=>t.bandwidth===d.bandwidth))[0]),a.leastPixelDiffSelector){const t=f.map((t=>(t.pixelDiff=Math.abs(t.width-i)+Math.abs(t.height-n),t)));sl(t,((t,e)=>t.pixelDiff===e.pixelDiff?e.bandwidth-t.bandwidth:t.pixelDiff-e.pixelDiff)),_=t[0]}const w=_||b||g||p||u[0]||c[0];if(w&&w.playlist){let t="sortedPlaylistReps";return _?t="leastPixelDiffRep":b?t="resolutionPlusOneRep":g?t="resolutionBestRep":p?t="bandwidthBestRep":u[0]&&(t="enabledPlaylistReps"),il(`choosing ${nl(w)} using ${t} with options`,o),w.playlist}return il("could not choose a playlist with options",o),null};const ll=function(){const t=this.useDevicePixelRatio&&r().devicePixelRatio||1;return ol(this.playlists.main,this.systemBandwidth,parseInt(rl(this.tech_.el(),"width"),10)*t,parseInt(rl(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},cl=function(t,e,i){let n,r;if(i&&i.cues)for(n=i.cues.length;n--;)r=i.cues[n],r.startTime>=t&&r.endTime<=e&&i.removeCue(r)},ul=t=>"number"==typeof t&&isFinite(t),hl=1/60,dl=t=>{const{startOfSegment:e,duration:i,segment:n,part:r,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:c,timeline:u}=t,h=o.length-1;let d="mediaIndex/partIndex increment";t.getMediaInfoForTime?d=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(d="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(d+=` with independent ${t.independent}`);const p="number"==typeof c,f=t.segment.uri?"segment":"pre-segment",m=p?Ra({preloadSegment:n})-1:0;return`${f} [${s+l}/${s+h}]`+(p?` part [${c}/${m}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(p?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}]`+` duration [${i}]`+` timeline [${u}]`+` selected by [${d}]`+` playlist [${a}]`},pl=t=>`${t}TimingInfo`,fl=({timelineChangeController:t,currentTimeline:e,segmentTimeline:i,loaderType:n,audioDisabled:r})=>{if(e===i)return!1;if("audio"===n){const e=t.lastTimelineChange({type:"main"});return!e||e.to!==i}if("main"===n&&r){const e=t.pendingTimelineChange({type:"audio"});return!e||e.to!==i}return!1},ml=({segmentDuration:t,maxDuration:e})=>!!t&&Math.round(t)>e+Sa;class gl extends pa.EventTarget{constructor(t,e={}){if(super(),!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=pa.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",(()=>{this.isEndOfStream_()||(this.ended_=!1)})),this.fetchAtBuffer_=!1,this.logger_=_a(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(t){t!==this.state_&&(this.logger_(`${this.state_} -> ${t}`),this.state_=t,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",(()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}))}createTransmuxer_(){return(t=>{const e=new Ro;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,r().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)}error(t){return void 0!==t&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&$o(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return Ta();if("main"===this.loaderType_){const{hasAudio:e,hasVideo:i,isMuxed:n}=t;if(i&&e&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,e=!1){if(!t)return null;const i=vo(t);let n=this.initSegments_[i];return e&&!n&&t.bytes&&(this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),n||t}segmentKey(t,e=!1){if(!t)return null;const i=bo(t);let n=this.keyCache_[i];this.cacheEncryptionKeys_&&e&&!n&&t.bytes&&(this.keyCache_[i]=n={resolvedUri:t.resolvedUri,bytes:t.bytes});const r={resolvedUri:(n||t).resolvedUri};return n&&(r.bytes=n.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,e={}){if(!t)return;const i=this.playlist_,n=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=e,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));let r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_(`playlist update [${r} => ${t.id||t.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const s=t.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${s}]`),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const t=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!t.parts||!t.parts.length||!t.parts[this.partIndex])){const t=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=t}}n&&(n.mediaIndex-=s,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=t.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,t)}pause(){this.checkBufferTimeout_&&(r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&$o(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,e,i=(()=>{}),n=!1){if(e===1/0&&(e=this.duration_()),e<=t)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const s=()=>{r--,0===r&&i()};!n&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(t,e,s)),(n||"main"===this.loaderType_)&&(this.gopBuffer_=((t,e,i,n)=>{const r=Math.ceil((e-n)*ge.ONE_SECOND_IN_TS),s=Math.ceil((i-n)*ge.ONE_SECOND_IN_TS),a=t.slice();let o=t.length;for(;o--&&!(t[o].pts<=s););if(-1===o)return a;let l=o+1;for(;l--&&!(t[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a})(this.gopBuffer_,t,e,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(t,e,s));for(const i in this.inbandTextTracks_)cl(t,e,this.inbandTextTracks_[i]);cl(t,e,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const t=this.chooseNextRequest_();t&&("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}isEndOfStream_(t=this.mediaIndex,e=this.playlist_,i=this.partIndex){if(!e||!this.mediaSource_)return!1;const n="number"==typeof t&&e.segments[t],r=t+1===e.segments.length,s=!n||!n.parts||i+1===n.parts.length;return e.endList&&"open"===this.mediaSource_.readyState&&r&&s}chooseNextRequest_(){const t=this.buffered_(),e=Aa(t)||0,i=La(t,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||n||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=function(t,e,i){e=e||[];const n=[];let r=0;for(let s=0;s<e.length;s++){const a=e[s];if(t===a.timeline&&(n.push(s),r+=a.duration,r>i))return s}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,s,e);else if(null!==this.mediaIndex){const t=s[this.mediaIndex],i="number"==typeof this.partIndex?this.partIndex:-1;a.startOfSegment=t.end?t.end:e,t.parts&&t.parts[i+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=i+1):a.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:t,startTime:i,partIndex:n}=Ya.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?e:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});a.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${e}`:`currentTime ${this.currentTime_()}`,a.mediaIndex=t,a.startOfSegment=i,a.partIndex=n}const o=s[a.mediaIndex];let l=o&&"number"==typeof a.partIndex&&o.parts&&o.parts[a.partIndex];if(!o||"number"==typeof a.partIndex&&!l)return null;if("number"!=typeof a.partIndex&&o.parts&&(a.partIndex=0,l=o.parts[0]),!i&&l&&!l.independent)if(0===a.partIndex){const t=s[a.mediaIndex-1],e=t.parts&&t.parts.length&&t.parts[t.parts.length-1];e&&e.independent&&(a.mediaIndex-=1,a.partIndex=t.parts.length-1,a.independent="previous segment")}else o.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");const c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=s.length-1&&c&&!this.seeking_()?null:this.generateSegmentInfo_(a)}generateSegmentInfo_(t){const{independent:e,playlist:i,mediaIndex:n,startOfSegment:r,isSyncRequest:s,partIndex:a,forceTimestampOffset:o,getMediaInfoForTime:l}=t,c=i.segments[n],u="number"==typeof a&&c.parts[a],h={requestId:"segment-loader-"+Math.random(),uri:u&&u.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:u?a:null,isSyncRequest:s,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:u&&u.duration||c.duration,segment:c,part:u,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:e},d=void 0!==o?o:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:d});const p=Aa(this.sourceUpdater_.audioBuffered());return"number"==typeof p&&(h.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=((t,e,i)=>{if(null==e||!t.length)return[];const n=Math.ceil((e-i+3)*ge.ONE_SECOND_IN_TS);let r;for(r=0;r<t.length&&!(t[r].pts>n);r++);return t.slice(r)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h}timestampOffsetForSegment_(t){return(({segmentTimeline:t,currentTimeline:e,startOfSegment:i,buffered:n,overrideCheck:r})=>r||t!==e?t<e?i:n.length?n.end(n.length-1):i:null)(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;const e=this.currentTime_(),i=t.bandwidth,n=this.pendingSegment_.duration,r=Ya.estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived),s=function(t,e,i=1){return((t.length?t.end(t.length-1):0)-e)/i}(this.buffered_(),e,this.vhs_.tech_.playbackRate())-1;if(r<=s)return;const a=function(t){const{main:e,currentTime:i,bandwidth:n,duration:r,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=t,c=e.playlists.filter((t=>!Ya.isIncompatible(t)));let u=c.filter(Ya.isEnabled);u.length||(u=c.filter((t=>!Ya.isDisabled(t))));const h=u.filter(Ya.hasAttribute.bind(null,"BANDWIDTH")).map((t=>{const e=l.getSyncPoint(t,r,o,i)?1:2;return{playlist:t,rebufferingImpact:Ya.estimateSegmentRequestTime(s,n,t)*e-a}})),d=h.filter((t=>t.rebufferingImpact<=0));return sl(d,((t,e)=>al(e.playlist,t.playlist))),d.length?d[0]:(sl(h,((t,e)=>t.rebufferingImpact-e.rebufferingImpact)),h[0]||null)}({main:this.vhs_.playlists.main,currentTime:e,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a)return;const o=r-s-a.rebufferingImpact;let l=.5;s<=Sa&&(l=1),!a.playlist||a.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=a.playlist.attributes.BANDWIDTH*Po.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${dl(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,e){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.trigger("progress")}handleTrackInfo_(t,e){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(e)||(e=e||{},function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const i=Object.keys(t).sort(),n=Object.keys(e).sort();if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++){const s=i[r];if(s!==n[r])return!1;if(t[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,e)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=e,this.currentMediaInfo_=e,this.logger_("trackinfo update",e),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=e,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(t,e,i,n){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;const r=this.pendingSegment_,s=pl(e);r[s]=r[s]||{},r[s][i]=n,this.logger_(`timinginfo: ${e} - ${i} - ${n}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(t,e){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(0===e.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,e));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),n={};e.forEach((t=>{n[t.stream]=n[t.stream]||{startTime:1/0,captions:[],endTime:0};const e=n[t.stream];e.startTime=Math.min(e.startTime,t.startTime+i),e.endTime=Math.max(e.endTime,t.endTime+i),e.captions.push(t)})),Object.keys(n).forEach((t=>{const{startTime:e,endTime:s,captions:a}=n[t],o=this.inbandTextTracks_;this.logger_(`adding cues from ${e} -> ${s} for ${t}`),function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"});let n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);const r=e.textTracks().getTrackById(n);if(r)t[i]=r;else{let r=i,s=i,a=!1;const o=(e.options_.vhs&&e.options_.vhs.captionServices||{})[n];o&&(r=o.label,s=o.language,a=o.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:n,default:a,label:r,language:s},!1).track}}}(o,this.vhs_.tech_,t),cl(e,s,o[t]),function({inbandTextTracks:t,captionArray:e,timestampOffset:i}){if(!e)return;const n=r().WebKitDataCue||r().VTTCue;e.forEach((e=>{const r=e.stream;t[r].addCue(new n(e.startTime+i,e.endTime+i,e.text))}))}({captionArray:a,inbandTextTracks:o,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,e,i){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,e,i));const n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();((t,e,i)=>{t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e)})(this.inbandTextTracks_,i,this.vhs_.tech_),(({inbandTextTracks:t,metadataArray:e,timestampOffset:i,videoDuration:n})=>{if(!e)return;const s=r().WebKitDataCue||r().VTTCue,a=t.metadataTrack_;if(!a)return;if(e.forEach((t=>{const e=t.cueTime+i;!("number"!=typeof e||r().isNaN(e)||e<0)&&e<1/0&&t.frames.forEach((t=>{const i=new s(e,e,t.value||t.url||t.data||"");i.frame=t,i.value=t,function(t){Object.defineProperties(t.frame,{id:{get:()=>(pa.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key)},value:{get:()=>(pa.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data)},privateData:{get:()=>(pa.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data)}})}(i),a.addCue(i)}))})),!a.cues||!a.cues.length)return;const o=a.cues,l=[];for(let t=0;t<o.length;t++)o[t]&&l.push(o[t]);const c=l.reduce(((t,e)=>{const i=t[e.startTime]||[];return i.push(e),t[e.startTime]=i,t}),{}),u=Object.keys(c).sort(((t,e)=>Number(t)-Number(e)));u.forEach(((t,e)=>{const i=c[t],r=Number(u[e+1])||n;i.forEach((t=>{t.endTime=r}))}))})({inbandTextTracks:this.inbandTextTracks_,metadataArray:e,timestampOffset:n,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach((t=>t())),this.metadataQueue_.caption.forEach((t=>t())),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const t=this.callQueue_;this.callQueue_=[],t.forEach((t=>t()))}processLoadQueue_(){const t=this.loadQueue_;this.loadQueue_=[],t.forEach((t=>t()))}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&fl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const t=this.pendingSegment_,e=this.getCurrentMediaInfo_();if(!t||!e)return!1;const{hasAudio:i,hasVideo:n,isMuxed:r}=e;return!(n&&!t.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!t.audioTimingInfo||fl({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,e){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,e));const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),i.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),i.isFmp4=t.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[pl(e.type)].start;else{const t=this.getCurrentMediaInfo_(),e="main"===this.loaderType_&&t&&t.hasVideo;let n;e&&(n=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:e,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,e.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=this.chooseNextRequest_();if(t.mediaIndex!==i.mediaIndex||t.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,e)}}updateAppendInitSegmentStatus(t,e){"main"!==this.loaderType_||"number"!=typeof t.timestampOffset||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[e]!==t.playlist&&(this.appendInitSegment_[e]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:e,map:i,playlist:n}){if(i){const t=vo(i);if(this.activeInitSegmentId_===t)return null;e=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=t}return e&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=n,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,e):null}handleQuotaExceededError_({segmentInfo:t,type:e,bytes:i},n){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Pa(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Pa(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,c=a.length?a.start(0):0,u=a.length?a.end(a.length-1):0;if(l-o<=1&&u-c<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${Pa(s).join(", ")}, video buffer: ${Pa(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:e,bytes:i}));const h=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${h}`),this.remove(0,h,(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=r().setTimeout((()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()}),1e3)}),!0)}handleAppendError_({segmentInfo:t,type:e,bytes:i},n){n&&(22!==n.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(`${e} append of ${i.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:t,type:e,bytes:i}))}appendToSourceBuffer_({segmentInfo:t,type:e,initSegment:i,data:n,bytes:r}){if(!r){const t=[n];let e=n.byteLength;i&&(t.unshift(i),e+=i.byteLength),r=(t=>{let e,i=0;return t.bytes&&(e=new Uint8Array(t.bytes),t.segments.forEach((t=>{e.set(t,i),i+=t.byteLength}))),e})({bytes:e,segments:t})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:e,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:t,type:e,bytes:r}))}handleSegmentTimingInfo_(t,e,i){if(!this.pendingSegment_||e!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,r=`${t}TimingInfo`;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(t,e){const{type:i,data:n}=e;if(!n||!n.byteLength)return;if("audio"===i&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:i,initSegment:e.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:r,data:n})}loadSegment_(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push((()=>{const e=(0,v.Z)({},t,{forceTimestampOffset:!0});(0,v.Z)(t,this.generateSegmentInfo_(e)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)}))}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));const e=this.createSimplifiedSegmentObj_(t),i=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),n=null!==this.mediaIndex,r=t.timeline!==this.currentTimeline_&&t.timeline>0,s=i||n&&r;this.logger_(`Requesting ${dl(t)}`),e.map&&!e.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Xo({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:e,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:e,level:i,stream:n})=>{this.logger_(`${dl(t)} logged from transmuxer stream ${n} as a ${i}: ${e}`)}})}trimBackBuffer_(t){const e=((t,e,i)=>{let n=e-Po.BACK_BUFFER_LENGTH;t.length&&(n=Math.max(n,t.start(0)));const r=e-i;return Math.min(r,n)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)}createSimplifiedSegmentObj_(t){const e=t.segment,i=t.part,n={resolvedUri:i?i.resolvedUri:e.resolvedUri,byterange:i?i.byterange:e.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},r=t.playlist.segments[t.mediaIndex-1];if(r&&r.timeline===e.timeline&&(r.videoTimingInfo?n.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(n.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),e.key){const i=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key=this.segmentKey(e.key),n.key.iv=i}return e.map&&(n.map=this.initSegmentForMap(e.map)),n}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,e){this.pendingSegment_.byteLength=e.bytesReceived,t<hl?this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record 0.016666666666666666`):(this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,e,i){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,e,i));if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return;if(e.requestId!==this.pendingSegment_.requestId)return;if(t){if(this.pendingSegment_=null,this.state="READY",t.code===Vo)return;return this.pause(),t.code===jo?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,e.stats),n.endOfAllRequests=e.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=((t,e,i)=>{if(!e.length)return t;if(i)return e.slice();const n=e[0].pts;let r=0;for(;r<t.length&&!(t[r].pts>=n);r++);return t.slice(0,r).concat(e)})(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(t){const e=this.syncController_.mappingForTimeline(t);null!==e&&(this.timeMapping_=e)}updateMediaSecondsLoaded_(t){"number"==typeof t.start&&"number"==typeof t.end?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:t,playlist:e,mediaIndex:i,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:r,useVideoTimingInfo:s,videoTimingInfo:a,audioTimingInfo:o}){if(void 0!==t)return t;if(!s)return o.start;const l=e.segments[i-1];return 0!==i&&l&&void 0!==l.start&&l.end===n+r?a.start:n}waitForAppendsToComplete_(t){const e=this.getCurrentMediaInfo_(t);if(!e)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:i,hasVideo:n,isMuxed:r}=e,s="main"===this.loaderType_&&n,a=!this.audioDisabled_&&i&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||"number"!=typeof t.timestampOffset||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);s&&t.waitingOnAppends++,a&&t.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){const e=((t,e,i)=>"main"===t&&e&&i?i.hasAudio||i.hasVideo?e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!e&&(this.error({message:e,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(t){if(null===t.timestampOffset||"number"!=typeof t.timingInfo.start||t.changedTimestampOffset||"main"!==this.loaderType_)return;let e=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),e=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),e=!0),e&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:e,timingInfo:i}){return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};const e=this.getMediaInfo_(),i="main"===this.loaderType_&&e&&e.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;i&&(t.timingInfo.end="number"==typeof i.end?i.end:i.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=((t,e)=>{if("hls"!==e)return null;const i=(t=>{let e=0;return["video","audio"].forEach((function(i){const n=t[`${i}TimingInfo`];if(!n)return;const{start:s,end:a}=n;let o;"bigint"==typeof s||"bigint"==typeof a?o=r().BigInt(a)-r().BigInt(s):"number"==typeof s&&"number"==typeof a&&(o=a-s),void 0!==o&&o>e&&(e=o)})),"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e})({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!i)return null;const n=t.playlist.targetDuration,s=ml({segmentDuration:i,maxDuration:2*n}),a=ml({segmentDuration:i,maxDuration:n}),o=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${i} when the reported duration is ${t.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||a?{severity:s?"warn":"info",message:o}:null})(t,this.sourceType_);if(e&&("warn"===e.severity?pa.log.warn(e.message):this.logger_(e.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${dl(t)}`);this.logger_(`Appended ${dl(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");const i=t.segment,n=t.part,s=i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration,a=n&&n.end&&this.currentTime_()-n.end>3*t.playlist.partTargetDuration;if(s||a)return this.logger_(`bad ${s?"segment":"part"} ${dl(t)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<hl)return void this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record 0.016666666666666666`);const e=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;const e=t.segment,i=e.start,n=e.end;if(!ul(i)||!ul(n))return;cl(i,n,this.segmentMetadataTrack_);const s=r().WebKitDataCue||r().VTTCue,a={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:n},o=new s(i,n,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}function yl(){}const vl=function(t){return"string"!=typeof t?t:t.replace(/./,(t=>t.toUpperCase()))},bl=["video","audio"],_l=(t,e)=>{const i=e[`${t}Buffer`];return i&&i.updating||e.queuePending[t]},wl=(t,e)=>{if(0===e.queue.length)return;let i=0,n=e.queue[i];if("mediaSource"!==n.type){if("mediaSource"!==t&&e.ready()&&"closed"!==e.mediaSource.readyState&&!_l(t,e)){if(n.type!==t){if(i=((t,e)=>{for(let i=0;i<e.length;i++){const n=e[i];if("mediaSource"===n.type)return null;if(n.type===t)return i}return null})(t,e.queue),null===i)return;n=e.queue[i]}return e.queue.splice(i,1),e.queuePending[t]=n,n.action(t,e),n.doneFn?void 0:(e.queuePending[t]=null,void wl(t,e))}}else e.updating()||"closed"===e.mediaSource.readyState||(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),wl("audio",e),wl("video",e))},Tl=(t,e)=>{const i=e[`${t}Buffer`],n=vl(t);i&&(i.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),i.removeEventListener("error",e[`on${n}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},Sl=(t,e)=>t&&e&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,e),xl=(t,e,i)=>(n,r)=>{const s=r[`${n}Buffer`];if(Sl(r.mediaSource,s)){r.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${n}Buffer`);try{s.appendBuffer(t)}catch(t){r.logger_(`Error with code ${t.code} `+(22===t.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),r.queuePending[n]=null,i(t)}}},kl=(t,e)=>(i,n)=>{const r=n[`${i}Buffer`];if(Sl(n.mediaSource,r)){n.logger_(`Removing ${t} to ${e} from ${i}Buffer`);try{r.remove(t,e)}catch(r){n.logger_(`Remove ${t} to ${e} from ${i}Buffer failed`)}}},Cl=t=>(e,i)=>{const n=i[`${e}Buffer`];Sl(i.mediaSource,n)&&(i.logger_(`Setting ${e}timestampOffset to ${t}`),n.timestampOffset=t)},El=t=>(e,i)=>{t()},Il=t=>e=>{if("open"===e.mediaSource.readyState){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(t){pa.log.warn("Failed to call media source endOfStream",t)}}},Pl=t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(t){pa.log.warn("Failed to set media source duration",t)}},Al=(t,e)=>i=>{const n=vl(t),r=$(e);i.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const s=i.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",i[`on${n}UpdateEnd_`]),s.addEventListener("error",i[`on${n}Error_`]),i.codecs[t]=e,i[`${t}Buffer`]=s},Ll=t=>e=>{const i=e[`${t}Buffer`];if(Tl(t,e),Sl(e.mediaSource,i)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(i)}catch(e){pa.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,e)}}},Ol=t=>(e,i)=>{const n=i[`${e}Buffer`],r=$(t);Sl(i.mediaSource,n)&&i.codecs[e]!==t&&(i.logger_(`changing ${e}Buffer codec from ${i.codecs[e]} to ${t}`),n.changeType(r),i.codecs[e]=t)},Dl=({type:t,sourceUpdater:e,action:i,doneFn:n,name:r})=>{e.queue.push({type:t,action:i,doneFn:n,name:r}),wl(t,e)},Ml=(t,e)=>i=>{if(e.queuePending[t]){const i=e.queuePending[t].doneFn;e.queuePending[t]=null,i&&i(e[`${t}Error_`])}wl(t,e)};class Rl extends pa.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>wl("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=_a("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Ml("video",this),this.onAudioUpdateEnd_=Ml("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,e){Dl({type:"mediaSource",sourceUpdater:this,action:Al(t,e),name:"addSourceBuffer"})}abort(t){Dl({type:t,sourceUpdater:this,action:(t,e)=>{if("open"!==e.mediaSource.readyState)return;const i=e[`${t}Buffer`];if(Sl(e.mediaSource,i)){e.logger_(`calling abort on ${t}Buffer`);try{i.abort()}catch(e){pa.log.warn(`Failed to abort on ${t}Buffer`,e)}}},name:"abort"})}removeSourceBuffer(t){this.canRemoveSourceBuffer()?Dl({type:"mediaSource",sourceUpdater:this,action:Ll(t),name:"removeSourceBuffer"}):pa.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!pa.browser.IE_VERSION&&!pa.browser.IS_FIREFOX&&r().MediaSource&&r().MediaSource.prototype&&"function"==typeof r().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return r().SourceBuffer&&r().SourceBuffer.prototype&&"function"==typeof r().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(t,e){this.canChangeType()?Dl({type:t,sourceUpdater:this,action:Ol(e),name:"changeType"}):pa.log.error("changeType is not supported!")}addOrChangeSourceBuffers(t){if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach((e=>{const i=t[e];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(e,i);this.canChangeType()&&this.changeType(e,i)}))}appendBuffer(t,e){const{segmentInfo:i,type:n,bytes:r}=t;if(this.processedAppend_=!0,"audio"===n&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,e]),void this.logger_(`delayed audio append of ${r.length} until video append`);if(Dl({type:n,sourceUpdater:this,action:xl(r,i||{mediaIndex:-1},e),doneFn:e,name:"appendBuffer"}),"video"===n){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const t=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${t.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,t.forEach((t=>{this.appendBuffer.apply(this,t)}))}}audioBuffered(){return Sl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ta()}videoBuffered(){return Sl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ta()}buffered(){const t=Sl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,e=Sl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return e&&!t?this.audioBuffered():t&&!e?this.videoBuffered():function(t,e){let i=null,n=null,r=0;const s=[],a=[];if(!(t&&t.length&&e&&e.length))return Ta();let o=t.length;for(;o--;)s.push({time:t.start(o),type:"start"}),s.push({time:t.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort((function(t,e){return t.time-e.time})),o=0;o<s.length;o++)"start"===s[o].type?(r++,2===r&&(i=s[o].time)):"end"===s[o].type&&(r--,1===r&&(n=s[o].time)),null!==i&&null!==n&&(a.push([i,n]),i=null,n=null);return Ta(a)}(this.audioBuffered(),this.videoBuffered())}setDuration(t,e=yl){Dl({type:"mediaSource",sourceUpdater:this,action:Pl(t),name:"duration",doneFn:e})}endOfStream(t=null,e=yl){"string"!=typeof t&&(t=void 0),Dl({type:"mediaSource",sourceUpdater:this,action:Il(t),name:"endOfStream",doneFn:e})}removeAudio(t,e,i=yl){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Dl({type:"audio",sourceUpdater:this,action:kl(t,e),doneFn:i,name:"remove"}):i()}removeVideo(t,e,i=yl){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Dl({type:"video",sourceUpdater:this,action:kl(t,e),doneFn:i,name:"remove"}):i()}updating(){return!(!_l("audio",this)&&!_l("video",this))}audioTimestampOffset(t){return void 0!==t&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Dl({type:"audio",sourceUpdater:this,action:Cl(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return void 0!==t&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Dl({type:"video",sourceUpdater:this,action:Cl(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&Dl({type:"audio",sourceUpdater:this,action:El(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&Dl({type:"video",sourceUpdater:this,action:El(t),name:"callback"})}dispose(){this.trigger("dispose"),bl.forEach((t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`]((()=>Tl(t,this)))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Nl=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),Bl=new Uint8Array("\n\n".split("").map((t=>t.charCodeAt(0))));class Fl extends gl{constructor(t,e={}){super(t,e),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ta();const t=this.subtitlesTrack_.cues;return Ta([[t[0].startTime,t[t.length-1].startTime]])}initSegmentForMap(t,e=!1){if(!t)return null;const i=vo(t);let n=this.initSegments_[i];if(e&&!n&&t.bytes){const e=Bl.byteLength+t.bytes.byteLength,r=new Uint8Array(e);r.set(t.bytes),r.set(Bl,t.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:r}}return n||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(t,e){cl(t,e,this.subtitlesTrack_)}fillBuffer_(){const t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",t),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,e,i){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===jo&&this.handleTimeout_(),t.code===Vo?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,e.stats),e.key&&this.segmentKey(e.key,!0),this.state="APPENDING",this.trigger("appending");const s=n.segment;if(s.map&&(s.map.bytes=e.map.bytes),n.bytes=e.bytes,"function"!=typeof r().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){let n;const r=()=>{this.subtitlesTrack_.tech_.off("vttjsloaded",n),this.stopForError({message:"Error loading vtt.js"})};return n=()=>{this.subtitlesTrack_.tech_.off("vttjserror",r),this.segmentRequestFinished_(t,e,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",n),void this.subtitlesTrack_.tech_.one("vttjserror",r)}s.requested=!0;try{this.parseVTTCues_(n)}catch(t){return void this.stopForError({message:t.message})}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,n.cues.forEach((t=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(r().VTTCue)(t.startTime,t.endTime,t.text):t)})),function(t){const e=t.cues;if(e)for(let i=0;i<e.length;i++){const n=[];let r=0;for(let t=0;t<e.length;t++)e[i].startTime===e[t].startTime&&e[i].endTime===e[t].endTime&&e[i].text===e[t].text&&(r++,r>1&&n.push(e[t]));n.length&&n.forEach((e=>t.removeCue(e)))}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(t){let e,i=!1;"function"==typeof r().TextDecoder?e=new(r().TextDecoder)("utf8"):(e=r().WebVTT.StringDecoder(),i=!0);const n=new(r().WebVTT.Parser)(r(),r().vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=e=>{t.timestampmap=e},n.onparsingerror=t=>{pa.log.warn("Error encountered when parsing cues: "+t.message)},t.segment.map){let e=t.segment.map.bytes;i&&(e=Nl(e)),n.parse(e)}let s=t.bytes;i&&(s=Nl(s)),n.parse(s),n.flush()}updateTimeMapping_(t,e,i){const n=t.segment;if(!e)return;if(!t.cues.length)return void(n.empty=!0);const r=t.timestampmap,s=r.MPEGTS/ge.ONE_SECOND_IN_TS-r.LOCAL+e.mapping;if(t.cues.forEach((t=>{t.startTime+=s,t.endTime+=s})),!i.syncInfo){const e=t.cues[0].startTime,r=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(e,r-n.duration)}}}}const $l=function(t,e){const i=t.cues;for(let t=0;t<i.length;t++){const n=i[t];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},Ul=[{name:"VOD",run:(t,e,i,n,r)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(t,e,i,n,r)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=Da(e);r=r||0;for(let i=0;i<o.length;i++){const n=o[e.endList||0===r?i:o.length-(i+1)],l=n.segment,c=t.timelineToDatetimeMappings[l.timeline];if(!c||!l.dateTimeObject)continue;let u=l.dateTimeObject.getTime()/1e3+c;if(l.parts&&"number"==typeof n.partIndex)for(let t=0;t<n.partIndex;t++)u+=l.parts[t].duration;const h=Math.abs(r-u);if(null!==a&&(0===h||a<h))break;a=h,s={time:u,segmentIndex:n.segmentIndex,partIndex:n.partIndex}}return s}},{name:"Segment",run:(t,e,i,n,r)=>{let s=null,a=null;r=r||0;const o=Da(e);for(let t=0;t<o.length;t++){const i=o[e.endList||0===r?t:o.length-(t+1)],l=i.segment,c=i.part&&i.part.start||l&&l.start;if(l.timeline===n&&void 0!==c){const t=Math.abs(r-c);if(null!==a&&a<t)break;(!s||null===a||a>=t)&&(a=t,s={time:c,segmentIndex:i.segmentIndex,partIndex:i.partIndex})}}return s}},{name:"Discontinuity",run:(t,e,i,n,r)=>{let s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let i=null;for(let n=0;n<e.discontinuityStarts.length;n++){const a=e.discontinuityStarts[n],o=e.discontinuitySequence+n+1,l=t.discontinuities[o];if(l){const t=Math.abs(r-l.time);if(null!==i&&i<t)break;(!s||null===i||i>=t)&&(i=t,s={time:l.time,segmentIndex:a,partIndex:null})}}}return s}},{name:"Playlist",run:(t,e,i,n,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class jl extends pa.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=_a("SyncController")}getSyncPoint(t,e,i,n){const r=this.runStrategies_(t,e,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null}getExpiredTime(t,e){if(!t||!t.segments)return null;const i=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!i.length)return null;const n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+$a({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(t,e,i,n){const r=[];for(let s=0;s<Ul.length;s++){const a=Ul[s],o=a.run(this,t,e,i,n);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r}selectSyncPoint_(t,e){let i=t[0].syncPoint,n=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy;for(let s=1;s<t.length;s++){const a=Math.abs(t[s].syncPoint[e.key]-e.value);a<n&&(n=a,i=t[s].syncPoint,r=t[s].strategy)}return this.logger_(`syncPoint for [${e.key}: ${e.value}] chosen with strategy [${r}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+("number"==typeof i.partIndex?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(t,e){const i=e.mediaSequence-t.mediaSequence;if(i>86400)pa.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);else for(let n=i-1;n>=0;n--){const i=t.segments[n];if(i&&void 0!==i.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:i.start},this.logger_(`playlist refresh sync: [time:${e.syncInfo.time}, mediaSequence: ${e.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){const e=t.segments[0],i=e.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[e.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:e}){const i=this.calculateSegmentTimeMapping_(t,t.timingInfo,e),n=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:n.start}));const r=n.dateTimeObject;n.discontinuity&&e&&r&&(this.timelineToDatetimeMappings[n.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(t){return void 0===this.timelines[t]?null:this.timelines[t].time}mappingForTimeline(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,e,i){const n=t.segment,r=t.part;let s,a,o=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)o={time:t.startOfSegment,mapping:t.startOfSegment-e.start},i&&(this.timelines[t.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),s=t.startOfSegment,a=e.end+o.mapping;else{if(!o)return!1;s=e.start+o.mapping,a=e.end+o.mapping}return r&&(r.start=s,r.end=a),(!n.start||s<n.start)&&(n.start=s),n.end=a,!0}saveDiscontinuitySyncInfo_(t){const e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(let n=0;n<e.discontinuityStarts.length;n++){const r=e.discontinuityStarts[n],s=e.discontinuitySequence+n+1,a=r-t.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){let n;n=a<0?i.start-$a({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex,endIndex:r}):i.end+$a({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:n,accuracy:o}}}}dispose(){this.trigger("dispose"),this.off()}}class Vl extends pa.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:e,to:i}){return"number"==typeof e&&"number"==typeof i&&(this.pendingTimelineChanges_[t]={type:t,from:e,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:e,to:i}){return"number"==typeof e&&"number"==typeof i&&(this.lastTimelineChanges_[t]={type:t,from:e,to:i},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Hl=Oo(Do((function(){var t=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=e.length,a=0;a<s;++a)e[a].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();let e=null;class n{constructor(t){let i,n,r;e||(e=function(){const t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],i=t[1],n=e[4],r=i[4];let s,a,o;const l=[],c=[];let u,h,d,p,f,m;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(a=o=0;!n[a];a^=u||1,o=c[o]||1)for(p=o^o<<1^o<<2^o<<3^o<<4,p=p>>8^255&p^99,n[a]=p,r[p]=a,d=l[h=l[u=l[a]]],m=16843009*d^65537*h^257*u^16843008*a,f=257*l[p]^16843008*p,s=0;s<4;s++)e[s][a]=f=f<<24^f>>>8,i[s][p]=m=m<<24^m>>>8;for(s=0;s<5;s++)e[s]=e[s].slice(0),i[s]=i[s].slice(0);return t}()),this._tables=[[e[0][0].slice(),e[0][1].slice(),e[0][2].slice(),e[0][3].slice(),e[0][4].slice()],[e[1][0].slice(),e[1][1].slice(),e[1][2].slice(),e[1][3].slice(),e[1][4].slice()]];const s=this._tables[0][4],a=this._tables[1],o=t.length;let l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");const c=t.slice(0),u=[];for(this._key=[c,u],i=o;i<4*o+28;i++)r=c[i-1],(i%o==0||8===o&&i%o==4)&&(r=s[r>>>24]<<24^s[r>>16&255]<<16^s[r>>8&255]<<8^s[255&r],i%o==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),c[i]=c[i-o]^r;for(n=0;i;n++,i--)r=c[3&n?i:i-4],u[n]=i<=4||n<4?r:a[0][s[r>>>24]]^a[1][s[r>>16&255]]^a[2][s[r>>8&255]]^a[3][s[255&r]]}decrypt(t,e,i,n,r,s){const a=this._key[1];let o,l,c,u=t^a[0],h=n^a[1],d=i^a[2],p=e^a[3];const f=a.length/4-2;let m,g=4;const y=this._tables[1],v=y[0],b=y[1],_=y[2],w=y[3],T=y[4];for(m=0;m<f;m++)o=v[u>>>24]^b[h>>16&255]^_[d>>8&255]^w[255&p]^a[g],l=v[h>>>24]^b[d>>16&255]^_[p>>8&255]^w[255&u]^a[g+1],c=v[d>>>24]^b[p>>16&255]^_[u>>8&255]^w[255&h]^a[g+2],p=v[p>>>24]^b[u>>16&255]^_[h>>8&255]^w[255&d]^a[g+3],g+=4,u=o,h=l,d=c;for(m=0;m<4;m++)r[(3&-m)+s]=T[u>>>24]<<24^T[h>>16&255]<<16^T[d>>8&255]<<8^T[255&p]^a[g++],o=u,u=h,h=d,d=p,p=o}}class r extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const s=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24};class a{constructor(t,e,i,n){const o=a.STEP,l=new Int32Array(t.buffer),c=new Uint8Array(t.byteLength);let u=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+o),e,i,c)),u=o;u<l.length;u+=o)i=new Uint32Array([s(l[u-4]),s(l[u-3]),s(l[u-2]),s(l[u-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+o),e,i,c));this.asyncStream_.push((function(){var t;n(null,(t=c).subarray(0,t.byteLength-t[t.byteLength-1]))}))}static get STEP(){return 32e3}decryptChunk_(t,e,i,r){return function(){const a=function(t,e,i){const r=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),a=new n(Array.prototype.slice.call(e)),o=new Uint8Array(t.byteLength),l=new Int32Array(o.buffer);let c,u,h,d,p,f,m,g,y;for(c=i[0],u=i[1],h=i[2],d=i[3],y=0;y<r.length;y+=4)p=s(r[y]),f=s(r[y+1]),m=s(r[y+2]),g=s(r[y+3]),a.decrypt(p,f,m,g,l,y),l[y]=s(l[y]^c),l[y+1]=s(l[y+1]^u),l[y+2]=s(l[y+2]^h),l[y+3]=s(l[y+3]^d),c=p,u=f,h=m,d=g;return o}(t,e,i);r.set(a,t.byteOffset)}}}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},l=("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{}).BigInt||Number;l("0x1"),l("0x100"),l("0x10000"),l("0x1000000"),l("0x100000000"),l("0x10000000000"),l("0x1000000000000"),l("0x100000000000000"),l("0x10000000000000000"),function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);255===e[0]||e[0]}();self.onmessage=function(t){const e=t.data,i=new Uint8Array(e.encrypted.bytes,e.encrypted.byteOffset,e.encrypted.byteLength),n=new Uint32Array(e.key.bytes,e.key.byteOffset,e.key.byteLength/4),r=new Uint32Array(e.iv.bytes,e.iv.byteOffset,e.iv.byteLength/4);new a(i,n,r,(function(t,i){self.postMessage(function(t){const e={};return Object.keys(t).forEach((i=>{const n=t[i];var r;r=n,("function"===ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n})),e}({source:e.source,decrypted:i}),[i.buffer])}))}})));var ql=Lo(Hl);const Wl=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},zl=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Gl=(t,e)=>{e.activePlaylistLoader=t,t.load()},Kl={AUDIO:(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n},excludePlaylist:r}=e;zl(i,n);const s=n.activeTrack(),a=n.activeGroup(),o=(a.filter((t=>t.default))[0]||a[0]).id,l=n.tracks[o];if(s!==l){pa.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const t in n.tracks)n.tracks[t].enabled=n.tracks[t]===l;n.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n}}=e;pa.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),zl(i,n);const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},Yl={AUDIO:(t,e,i)=>{if(!e)return;const{tech:n,requestOptions:r,segmentLoaders:{[t]:s}}=i;e.on("loadedmetadata",(()=>{const t=e.media();s.playlist(t,r),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()})),e.on("loadedplaylist",(()=>{s.playlist(e.media(),r),n.paused()||s.load()})),e.on("error",Kl[t](t,i))},SUBTITLES:(t,e,i)=>{const{tech:n,requestOptions:r,segmentLoaders:{[t]:s},mediaTypes:{[t]:a}}=i;e.on("loadedmetadata",(()=>{const t=e.media();s.playlist(t,r),s.track(a.activeTrack()),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()})),e.on("loadedplaylist",(()=>{s.playlist(e.media(),r),n.paused()||s.load()})),e.on("error",Kl[t](t,i))}},Xl={AUDIO:(t,e)=>{const{vhs:i,sourceType:n,segmentLoaders:{[t]:r},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[t]:{groups:o,tracks:l,logger_:c}},mainPlaylistLoader:u}=e,h=Ka(u.main);a[t]&&0!==Object.keys(a[t]).length||(a[t]={main:{default:{default:!0}}},h&&(a[t].main.default.playlists=u.main.playlists));for(const r in a[t]){o[r]||(o[r]=[]);for(const d in a[t][r]){let p,f=a[t][r][d];if(h?(c(`AUDIO group '${r}' label '${d}' is a main playlist`),f.isMainPlaylist=!0,p=null):p="vhs-json"===n&&f.playlists?new lo(f.playlists[0],i,s):f.resolvedUri?new lo(f.resolvedUri,i,s):f.playlists&&"dash"===n?new Io(f.playlists[0],i,s,u):null,f=wa({id:d,playlistLoader:p},f),Yl[t](t,f.playlistLoader,e),o[r].push(f),void 0===l[d]){const t=new pa.AudioTrack({id:d,kind:Wl(f),enabled:!1,language:f.language,default:f.default,label:d});l[d]=t}}}r.on("error",Kl[t](t,e))},SUBTITLES:(t,e)=>{const{tech:i,vhs:n,sourceType:r,segmentLoaders:{[t]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:c}},mainPlaylistLoader:u}=e;for(const s in o[t]){l[s]||(l[s]=[]);for(const h in o[t][s]){if(o[t][s][h].forced)continue;let d,p=o[t][s][h];if("hls"===r)d=new lo(p.resolvedUri,n,a);else if("dash"===r){if(!p.playlists.filter((t=>t.excludeUntil!==1/0)).length)return;d=new Io(p.playlists[0],n,a,u)}else"vhs-json"===r&&(d=new lo(p.playlists?p.playlists[0]:p.resolvedUri,n,a));if(p=wa({id:h,playlistLoader:d},p),Yl[t](t,p.playlistLoader,e),l[s].push(p),void 0===c[h]){const t=i.addRemoteTextTrack({id:h,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:h},!1).track;c[h]=t}}}s.on("error",Kl[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:i,main:{mediaGroups:n},mediaTypes:{[t]:{groups:r,tracks:s}}}=e;for(const e in n[t]){r[e]||(r[e]=[]);for(const a in n[t][e]){const o=n[t][e][a];if(!/^(?:CC|SERVICE)/.test(o.instreamId))continue;const l=i.options_.vhs&&i.options_.vhs.captionServices||{};let c={label:a,language:o.language,instreamId:o.instreamId,default:o.default&&o.autoselect};if(l[c.instreamId]&&(c=wa(c,l[c.instreamId])),void 0===c.default&&delete c.default,r[e].push(wa({id:a},o)),void 0===s[a]){const t=i.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[a]=t}}}}},Ql=(t,e)=>{for(let i=0;i<t.length;i++){if(za(e,t[i]))return!0;if(t[i].playlists&&Ql(t[i].playlists,e))return!0}return!1},Jl={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const t in i)if(i[t].enabled)return i[t];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const t in i)if("showing"===i[t].mode||"hidden"===i[t].mode)return i[t];return null}};let Zl;const tc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ec=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};class ic extends pa.EventTarget{constructor(t){super();const{src:e,withCredentials:i,tech:n,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:c,sourceType:u,cacheEncryptionKeys:h,bufferBasedABR:d,leastPixelDiffSelector:p,captionServices:f}=t;if(!e)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:m}=t;null==m&&(m=1/0),Zl=a,this.bufferBasedABR=Boolean(d),this.leastPixelDiffSelector=Boolean(p),this.withCredentials=i,this.tech_=n,this.vhs_=n.vhs,this.sourceType_=u,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=m,this.enableLowInitialPlaylist=c,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:m,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:yl,activeTrack:yl,getActiveGroup:yl,onGroupChanged:yl,onTrackChanged:yl,lastTrack_:null,logger_:_a(`MediaGroups[${e}]`)}})),t})(),this.mediaSource=new(r().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Ta(),this.hasPlayed_=!1,this.syncController_=new jl(t),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new ql,this.sourceUpdater_=new Rl(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Vl;const g={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:f,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new Io(e,this.vhs_,this.requestOptions_):new lo(e,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new gl(wa(g,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new gl(wa(g,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new Fl(wa(g,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks}),t),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",(()=>this.startABRTimer_())),this.tech_.on("pause",(()=>this.stopABRTimer_())),this.tech_.on("play",(()=>this.startABRTimer_()))),tc.forEach((t=>{this[t+"_"]=ec.bind(this,t)})),this.logger_=_a("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const y="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(y,(()=>{const t=Date.now();this.tech_.one("loadeddata",(()=>{this.timeToLoadedData__=Date.now()-t,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends}))}))}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const t=this.mainAppendsToLoadedData_(),e=this.audioAppendsToLoadedData_();return-1===t||-1===e?-1:t+e}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){const e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,t)}switchMedia_(t,e,i){const n=this.media(),r=n&&(n.id||n.uri),s=t.id||t.uri;r&&r!==s&&(this.logger_(`switch media ${r} -> ${s} from ${e}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${e}`})),this.mainPlaylistLoader_.media(t,i)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=r().setInterval((()=>this.checkABR_()),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(r().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const t=this.main(),e=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return e;const i=t.mediaGroups.AUDIO,n=Object.keys(i);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const t=i.main||n.length&&i[n[0]];for(const e in t)if(t[e].default){r={label:e};break}}if(!r)return e;const s=[];for(const e in i)if(i[e][r.label]){const n=i[e][r.label];if(n.playlists&&n.playlists.length)s.push.apply(s,n.playlists);else if(n.uri)s.push(n);else if(t.playlists.length)for(let i=0;i<t.playlists.length;i++){const n=t.playlists[i];n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===e&&s.push(n)}}return s.length?s:e}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",(()=>{const t=this.mainPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;Wa(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=e,t.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),(t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((e=>{Xl[e](e,t)}));const{mediaTypes:e,mainPlaylistLoader:i,tech:n,vhs:r,segmentLoaders:{AUDIO:s,main:a}}=t;["AUDIO","SUBTITLES"].forEach((i=>{e[i].activeGroup=((t,e)=>i=>{const{mainPlaylistLoader:n,mediaTypes:{[t]:{groups:r}}}=e,s=n.media();if(!s)return null;let a=null;s.attributes[t]&&(a=r[s.attributes[t]]);const o=Object.keys(r);if(!a)if("AUDIO"===t&&o.length>1&&Ka(e.main))for(let t=0;t<o.length;t++){const e=r[o[t]];if(Ql(e,s)){a=e;break}}else r.main?a=r.main:1===o.length&&(a=r[o[0]]);return void 0===i?a:null!==i&&a&&a.filter((t=>t.id===i.id))[0]||null})(i,t),e[i].activeTrack=Jl[i](i,t),e[i].onGroupChanged=((t,e)=>()=>{const{segmentLoaders:{[t]:i,main:n},mediaTypes:{[t]:r}}=e,s=r.activeTrack(),a=r.getActiveGroup(),o=r.activePlaylistLoader,l=r.lastGroup_;a&&l&&a.id===l.id||(r.lastGroup_=a,r.lastTrack_=s,zl(i,r),a&&!a.isMainPlaylist&&(a.playlistLoader?(i.resyncLoader(),Gl(a.playlistLoader,r)):o&&n.resetEverything()))})(i,t),e[i].onGroupChanging=((t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n}}=e;n.lastGroup_=null,i.abort(),i.pause()})(i,t),e[i].onTrackChanged=((t,e)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[t]:n,main:r},mediaTypes:{[t]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!a||c.id!==a.id)&&(s.lastGroup_=o,s.lastTrack_=a,zl(n,s),o)){if(o.isMainPlaylist){if(!a||!c||a.id===c.id)return;const t=e.vhs.playlistController_,n=t.selectPlaylist();if(t.media()===n)return;return s.logger_(`track change. Switching main audio from ${c.id} to ${a.id}`),i.pause(),r.resetEverything(),void t.fastQualityChange_(n)}if("AUDIO"===t){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();n.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader?(n.track&&n.track(a),n.resetEverything(),Gl(o.playlistLoader,s)):Gl(o.playlistLoader,s)}})(i,t),e[i].getActiveGroup=((t,{mediaTypes:e})=>()=>{const i=e[t].activeTrack();return i?e[t].activeGroup(i):null})(i,t)}));const o=e.AUDIO.activeGroup();if(o){const t=(o.filter((t=>t.default))[0]||o[0]).id;e.AUDIO.tracks[t].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}i.on("mediachange",(()=>{["AUDIO","SUBTITLES"].forEach((t=>e[t].onGroupChanged()))})),i.on("mediachanging",(()=>{["AUDIO","SUBTITLES"].forEach((t=>e[t].onGroupChanging()))}));const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",(()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)})),n.clearTracks("audio");for(const t in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[t])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(()=>{this.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){let e;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(e=this.selectInitialPlaylist()),e||(e=this.selectPlaylist()),!e||!this.shouldSwitchToMedia_(e))return;if(this.initialMedia_=e,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)})),this.mainPlaylistLoader_.on("error",(()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})})),this.mainPlaylistLoader_.on("mediachanging",(()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(()=>{const t=this.mainPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;Wa(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=e,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(()=>{const t=this.mainPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))})),this.mainPlaylistLoader_.on("renditiondisabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,e){const i=t.mediaGroups||{};let n=!0;const r=Object.keys(i.AUDIO);for(const t in i.AUDIO)for(const e in i.AUDIO[t])i.AUDIO[t][e].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Zl.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){const e=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function({currentPlaylist:t,buffered:e,currentTime:i,nextPlaylist:n,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!n)return pa.log.warn("We received no playlist to switch to. Please check your stream."),!1;const c=`allowing switch ${t&&t.id||"null"} -> ${n.id}`;if(!t)return l(`${c} as current playlist is not set`),!0;if(n.id===t.id)return!1;const u=Boolean(Ca(e,i).length);if(!t.endList)return u||"number"!=typeof t.partTargetDuration?(l(`${c} as current playlist is live`),!0):(l(`not ${c} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const h=La(e,i),d=o?Po.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Po.MAX_BUFFER_LOW_WATER_LINE;if(a<d)return l(`${c} as duration < max low water line (${a} < ${d})`),!0;const p=n.attributes.BANDWIDTH,f=t.attributes.BANDWIDTH;if(p<f&&(!o||h<s)){let t=`${c} as next bandwidth < current bandwidth (${p} < ${f})`;return o&&(t+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(t),!0}if((!o||p>f)&&h>=r){let t=`${c} as forwardBuffer >= bufferLowWaterLine (${h} >= ${r})`;return o&&(t+=` and next bandwidth > current bandwidth (${p} > ${f})`),l(t),!0}return l(`not ${c} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:i,currentPlaylist:e,nextPlaylist:t,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",(()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(()=>{this.trigger("progress")})),this.mainSegmentLoader_.on("error",(()=>{const t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})})),this.mainSegmentLoader_.on("appenderror",(()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("ended",(()=>{this.logger_("main segment loader ended"),this.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))}));const t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const t=this.getCodecsOrExclude_();t&&this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}))}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(t=this.selectPlaylist()){t!==this.mainPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything((()=>{pa.browser.IE_VERSION||pa.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}setupFirstPlay(){const t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){const t=this.seekable();if(!t.length)return!1;if(pa.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0)),this.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,(t=>{}))}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;const e=this.duration();t[t.length-1].endTime=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const e=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!e||e.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;const e=this.syncController_.getExpiredTime(t,this.duration());if(null===e)return!1;const i=Zl.Playlist.playlistEnd(t,e),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=xa;const s=r.end(r.length-1);return s-n<=xa&&i-s<=xa}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:e={},playlistExclusionDuration:i}){if(t=t||this.mainPlaylistLoader_.media(),i=i||e.playlistExclusionDuration||this.playlistExclusionDuration,!t)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));t.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,r=n.filter(Ha),s=1===r.length&&r[0]===t;if(1===n.length&&i!==1/0)return pa.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){let e=!1;n.forEach((i=>{if(i===t)return;const n=i.excludeUntil;void 0!==n&&n!==1/0&&(e=!0,delete i.excludeUntil)})),e&&(pa.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let a;a=t.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*i,t.excludeUntil=a,e.reason&&(t.lastExcludeReason_=e.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const o=this.selectPlaylist();if(!o)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const l=e.internal?this.logger_:pa.log.warn,c=e.message?" "+e.message:"";l(`${e.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${c} Switching to playlist ${o.id}.`),o.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),o.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const u=o.targetDuration/2*1e3||5e3,h="number"==typeof o.lastRequest&&Date.now()-o.lastRequest<=u;return this.switchMedia_(o,"exclude",s||h)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,e){const i=[],n="all"===t;(n||"main"===t)&&i.push(this.mainPlaylistLoader_);const r=[];(n||"audio"===t)&&r.push("AUDIO"),(n||"subtitle"===t)&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach((t=>{const e=this.mediaTypes_[t]&&this.mediaTypes_[t].activePlaylistLoader;e&&i.push(e)})),["main","audio","subtitle"].forEach((e=>{const n=this[`${e}SegmentLoader_`];!n||t!==e&&"all"!==t||i.push(n)})),i.forEach((t=>e.forEach((e=>{"function"==typeof t[e]&&t[e]()}))))}setCurrentTime(t){const e=Ca(this.tech_.buffered(),t);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Zl.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let t;if(!this.mainPlaylistLoader_)return;let e=this.mainPlaylistLoader_.media();if(!e)return;let i=this.syncController_.getExpiredTime(e,this.duration());if(null===i)return;const n=this.mainPlaylistLoader_.main,r=Zl.Playlist.seekable(e,i,Zl.Playlist.liveEdgeDelay(n,e));if(0===r.length)return;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(e=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(e,this.duration()),null===i)return;if(t=Zl.Playlist.seekable(e,i,Zl.Playlist.liveEdgeDelay(n,e)),0===t.length)return}let s,a;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>r.end(0)||r.start(0)>t.end(0)?this.seekable_=r:this.seekable_=Ta([[t.start(0)>r.start(0)?t.start(0):r.start(0),t.end(0)<r.end(0)?t.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===a||(this.logger_(`seekable updated [${Ia(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){const t=this.seekable();if(!t.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1)))}const e=this.tech_.buffered();let i=Zl.Playlist.duration(this.mainPlaylistLoader_.media());e.length>0&&(i=Math.max(i,e.end(e.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((t=>{const e=this.mediaTypes_[t].groups;for(const t in e)e[t].forEach((t=>{t.playlistLoader&&t.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,e=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!e||!i)}getCodecsOrExclude_(){const t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;const e=el(this.main(),this.media()),i={},n=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=e.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(i.video+=`,${e.audio||t.main.audioCodec||V}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||n)&&(i.audio=e.audio||t.main.audioCodec||t.audio.audioCodec||V,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!i.audio&&!i.video)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const r={};let s;if(["video","audio"].forEach((function(e){if(i.hasOwnProperty(e)&&(n=t[e].isFmp4,a=i[e],!(n?U(a):j(a)))){const n=t[e].isFmp4?"browser":"muxer";r[n]=r[n]||[],r[n].push(i[e]),"audio"===e&&(s=n)}var n,a})),n&&s&&this.media().attributes.AUDIO){const t=this.media().attributes.AUDIO;this.main().playlists.forEach((e=>{(e.attributes&&e.attributes.AUDIO)===t&&e!==this.media()&&(e.excludeUntil=1/0)})),this.logger_(`excluding audio group ${t} as ${s} does not support codec(s): "${i.audio}"`)}if(!Object.keys(r).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const t=[];if(["video","audio"].forEach((e=>{const n=(B(this.sourceUpdater_.codecs[e]||"")[0]||{}).type,r=(B(i[e]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&t.push(`"${this.sourceUpdater_.codecs[e]}" -> "${i[e]}"`)})),t.length)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:`Codec switching not supported: ${t.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return i}{const t=Object.keys(r).reduce(((t,e)=>(t&&(t+=", "),t+`${e} does not support codec(s): "${r[e].join(",")}"`)),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:t},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);const e=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(e)}excludeUnsupportedVariants_(){const t=this.main().playlists,e=[];Object.keys(t).forEach((i=>{const n=t[i];if(-1!==e.indexOf(n.id))return;e.push(n.id);const r=el(this.main,n),s=[];!r.audio||j(r.audio)||U(r.audio)||s.push(`audio codec ${r.audio}`),!r.video||j(r.video)||U(r.video)||s.push(`video codec ${r.video}`),r.text&&"stpp.ttml.im1t"===r.text&&s.push(`text codec ${r.text}`),s.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${s.join(", ")}`))}))}excludeIncompatibleVariants_(t){const e=[],i=this.main().playlists,n=Zo(B(t)),r=tl(n),s=n.video&&B(n.video)[0]||null,a=n.audio&&B(n.audio)[0]||null;Object.keys(i).forEach((t=>{const n=i[t];if(-1!==e.indexOf(n.id)||n.excludeUntil===1/0)return;e.push(n.id);const o=[],l=el(this.mainPlaylistLoader_.main,n),c=tl(l);if(l.audio||l.video){if(c!==r&&o.push(`codec count "${c}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const t=l.video&&B(l.video)[0]||null,e=l.audio&&B(l.audio)[0]||null;t&&s&&t.type.toLowerCase()!==s.type.toLowerCase()&&o.push(`video codec "${t.type}" !== "${s.type}"`),e&&a&&e.type.toLowerCase()!==a.type.toLowerCase()&&o.push(`audio codec "${e.type}" !== "${a.type}"`)}o.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id}: ${o.join(" && ")}`))}}))}updateAdCues_(t){let e=0;const i=this.seekable();i.length&&(e=i.start(0)),function(t,e,i=0){if(!t.segments)return;let n,s=i;for(let i=0;i<t.segments.length;i++){const a=t.segments[i];if(n||(n=$l(e,s+a.duration/2)),n){if("cueIn"in a){n.endTime=s,n.adEndTime=s,s+=a.duration,n=null;continue}if(s<n.endTime){s+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&(n=new(r().VTTCue)(s,s+a.duration,a.cueOut),n.adStartTime=s,n.adEndTime=s+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){const[t,i]=a.cueOutCont.split("/").map(parseFloat);n=new(r().VTTCue)(s,s+a.duration,""),n.adStartTime=s-t,n.adEndTime=n.adStartTime+i,e.addCue(n)}s+=a.duration}}(t,this.cueTagsTrack_,e)}goalBufferLength(){const t=this.tech_.currentTime(),e=Po.GOAL_BUFFER_LENGTH,i=Po.GOAL_BUFFER_LENGTH_RATE,n=Math.max(e,Po.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*i,n)}bufferLowWaterLine(){const t=this.tech_.currentTime(),e=Po.BUFFER_LOW_WATER_LINE,i=Po.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(e,Po.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(e,Po.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*i,this.bufferBasedABR?r:n)}bufferHighWaterLine(){return Po.BUFFER_HIGH_WATER_LINE}}class nc{constructor(t,e,i){const{playlistController_:n}=t,r=n.fastQualityChange_.bind(n);if(e.attributes){const t=e.attributes.RESOLUTION;this.width=t&&t.width,this.height=t&&t.height,this.bandwidth=e.attributes.BANDWIDTH,this.frameRate=e.attributes["FRAME-RATE"]}var s,a,o;this.codecs=el(n.main(),e),this.playlist=e,this.id=i,this.enabled=(s=t.playlists,a=e.id,o=r,t=>{const e=s.main.playlists[a],i=Va(e),n=Ha(e);return void 0===t?n:(t?delete e.disabled:e.disabled=!0,t===n||i||(o(),t?s.trigger("renditionenabled"):s.trigger("renditiondisabled")),t)})}}const rc=["seeking","seeked","pause","playing","error"];class sc{constructor(t){this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=_a("PlaybackWatcher"),this.logger_("initialize");const e=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach((t=>{l[t]={reset:()=>this.resetSegmentDownloads_(t),updateend:()=>this.checkSegmentDownloads_(t)},a[`${t}SegmentLoader_`].on("appendsdone",l[t].updateend),a[`${t}SegmentLoader_`].on("playlistupdate",l[t].reset),this.tech_.on(["seeked","seeking"],l[t].reset)}));const c=t=>{["main","audio"].forEach((e=>{a[`${e}SegmentLoader_`][t]("appended",this.seekingAppendCheck_)}))};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=()=>c("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(rc,s),this.tech_.on("canplay",i),this.tech_.one("play",e),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(rc,s),this.tech_.off("canplay",i),this.tech_.off("play",e),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach((t=>{a[`${t}SegmentLoader_`].off("appendsdone",l[t].updateend),a[`${t}SegmentLoader_`].off("playlistupdate",l[t].reset),this.tech_.off(["seeked","seeking"],l[t].reset)})),this.checkCurrentTimeTimeout_&&r().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&r().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=r().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){const e=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=e.buffered_()}checkSegmentDownloads_(t){const e=this.playlistController_,i=e[`${t}SegmentLoader_`],n=i.buffered_(),r=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t)return!0;if(t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1}(this[`${t}Buffered_`],n);this[`${t}Buffered_`]=n,r?this.resetSegmentDownloads_(t):(this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:Pa(n)}),this[`${t}StalledDownloads_`]<10||(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),"subtitle"!==t&&e.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+xa>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),e=this.tech_.currentTime();let i;if(this.afterSeekableWindow_(t,e,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=t.end(t.length-1)),this.beforeSeekableWindow_(t,e)){const e=t.start(0);i=e+(e===t.end(0)?0:xa)}if(void 0!==i)return this.logger_(`Trying to seek outside of seekable at time ${e} with seekable range ${Ia(t)}. Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0;const n=this.playlistController_.sourceUpdater_,r=this.tech_.buffered(),s=n.audioBuffer?n.audioBuffered():null,a=n.videoBuffer?n.videoBuffered():null,o=this.media(),l=o.partTargetDuration?o.partTargetDuration:2*(o.targetDuration-Sa),c=[s,a];for(let t=0;t<c.length;t++)if(c[t]&&La(c[t],e)<l)return!1;const u=Ea(r,e);return 0!==u.length&&(i=u.start(0)+xa,this.logger_(`Buffered region starts (${u.start(0)})  just beyond seek point (${e}). Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0)}waiting_(){if(this.techWaiting_())return;const t=this.tech_.currentTime(),e=this.tech_.buffered(),i=Ca(e,t);return i.length&&t+3<=i.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,e)){const i=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${e}. Seeking to live point (seekable end) ${i}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:e}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const r=Ea(n,e);return r.length>0&&(this.logger_(`Stopped at ${e} and seeking to ${r.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(e),!0)}afterSeekableWindow_(t,e,i,n=!1){if(!t.length)return!1;let r=t.end(t.length-1)+xa;return!i.endList&&n&&(r=t.end(t.length-1)+3*i.targetDuration),e>r}beforeSeekableWindow_(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:e,currentTime:i}){if(!t)return;let n;if(t.length&&e.length){const r=Ca(t,i-3),s=Ca(t,i),a=Ca(e,i);a.length&&!s.length&&r.length&&(n={start:r.end(0),end:a.end(0)})}else Ea(t,i).length||(n=this.gapFromVideoUnderflow_(t,i));return!!n&&(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${i}`),!0)}skipTheGap_(t){const e=this.tech_.buffered(),i=this.tech_.currentTime(),n=Ea(e,i);this.resetTimeUpdate_(),0!==n.length&&i===t&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Sa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(t,e){const i=function(t){if(t.length<2)return Ta();const e=[];for(let i=1;i<t.length;i++){const n=t.end(i-1),r=t.start(i);e.push([n,r])}return Ta(e)}(t);for(let t=0;t<i.length;t++){const n=i.start(t),r=i.end(t);if(e-n<4&&e-n>2)return{start:n,end:r}}return null}}const ac={errorInterval:30,getSource(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},oc=function(t,e){let i=0,n=0;const r=wa(ac,e);t.ready((()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));const s=function(){n&&t.currentTime(n)},a=function(e){null!=e&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},o=function(){if(Date.now()-i<1e3*r.errorInterval)t.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return i=Date.now(),r.getSource.call(t,a);pa.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function(){t.off("loadedmetadata",s),t.off("error",o),t.off("dispose",l)};t.on("error",o),t.on("dispose",l),t.reloadSourceOnError=function(e){l(),oc(t,e)}};var lc="3.0.0";const cc={PlaylistLoader:lo,Playlist:Ya,utils:wo,STANDARD_PLAYLIST_SELECTOR:ll,INITIAL_PLAYLIST_SELECTOR:function(){const t=this.playlists.main.playlists.filter(Ya.isEnabled);return sl(t,((t,e)=>al(t,e))),t.filter((t=>!!el(this.playlists.main,t).video))[0]||null},lastBandwidthSelector:ll,movingAverageBandwidthSelector:function(t){let e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const n=this.useDevicePixelRatio&&r().devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),ol(this.playlists.main,e,parseInt(rl(this.tech_.el(),"width"),10)*n,parseInt(rl(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:al,comparePlaylistResolution:function(t,e){let i,n;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||r().Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||r().Number.MAX_VALUE,i===n&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n},xhr:ho()};Object.keys(Po).forEach((t=>{Object.defineProperty(cc,t,{get:()=>(pa.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),Po[t]),set(e){pa.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),"number"!=typeof e||e<0?pa.log.warn(`value of Vhs.${t} must be greater than or equal to 0`):Po[t]=e}})}));const uc="videojs-vhs",hc=function(t,e){const i=e.media();let n=-1;for(let e=0;e<t.length;e++)if(t[e].id===i.id){n=e;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})};cc.canPlaySource=function(){return pa.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const dc=()=>{if(!r().localStorage)return null;const t=r().localStorage.getItem(uc);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}};cc.supportsNativeHls=function(){if(!a()||!a().createElement)return!1;const t=a().createElement("video");return!!pa.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(e){return/maybe|probably/i.test(t.canPlayType(e))}))}(),cc.supportsNativeDash=!!(a()&&a().createElement&&pa.getTech("Html5").isSupported())&&/maybe|probably/i.test(a().createElement("video").canPlayType("application/dash+xml")),cc.supportsTypeNatively=t=>"hls"===t?cc.supportsNativeHls:"dash"===t&&cc.supportsNativeDash,cc.isSupported=function(){return pa.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const pc=pa.getComponent("Component");class fc extends pc{constructor(t,e,i){if(super(e,i.vhs),"number"==typeof i.initialBandwidth&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=_a("VhsHandler"),e.options_&&e.options_.playerId){const t=pa.getPlayer(e.options_.playerId);this.player_=t}if(this.tech_=e,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(a(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(t=>{const e=a().fullscreenElement||a().webkitFullscreenElement||a().mozFullScreenElement||a().msFullscreenElement;e&&e.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const t=dc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Po.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Po.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((t=>{void 0!==this.source_[t]&&(this.options_[t]=this.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(t,e){if(!t)return;var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=cc,this.options_.sourceType=W(e),this.options_.seekTo=t=>{this.tech_.setCurrentTime(t)},this.playlistController_=new ic(this.options_);const n=wa({liveRangeSafeTimeDelta:xa},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new sc(n),this.playlistController_.on("error",(()=>{const t=pa.players[this.tech_.options_.playerId];let e=this.playlistController_.error;"object"!=typeof e||e.code?"string"==typeof e&&(e={message:e,code:3}):e.code=3,t.error(e)}));const s=this.options_.bufferBasedABR?cc.movingAverageBandwidthSelector(.55):cc.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=cc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(t){this.playlistController_.selectPlaylist=t.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(t){this.playlistController_.mainSegmentLoader_.throughput.rate=t,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let t=this.playlistController_.mainSegmentLoader_.bandwidth;const e=r().navigator.connection||r().navigator.mozConnection||r().navigator.webkitConnection,i=1e7;if(this.options_.useNetworkInformationApi&&e){const n=1e3*e.downlink*1e3;t=n>=i&&t>=i?Math.max(t,n):n}return t},set(t){this.playlistController_.mainSegmentLoader_.bandwidth=t,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const t=1/(this.bandwidth||1);let e;return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set(){pa.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Pa(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Pa(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(()=>{this.options_.useBandwidthFromLocalStorage&&(t=>{if(!r().localStorage)return!1;let e=dc();e=e?wa(e,t):t;try{r().localStorage.setItem(uc,JSON.stringify(e))}catch(t){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})})),this.playlistController_.on("selectedinitialmedia",(()=>{var t;(t=this).representations=()=>{const e=t.playlistController_.main(),i=Ka(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter((t=>!Va(t))).map(((e,i)=>new nc(t,e,e.id))):[]}})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(()=>{this.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=r().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:t,sourceKeySystems:e,audioMedia:i,mainPlaylists:n})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const r=(o=i?n.concat([i]):n,l=Object.keys(e),o.reduce(((t,e)=>{if(!e.contentProtection)return t;const i=l.reduce(((t,i)=>{const n=e.contentProtection[i];return n&&n.pssh&&(t[i]={pssh:n.pssh}),t}),{});return Object.keys(i).length&&t.push(i),t}),[])),s=[],a=[];var o,l;return r.forEach((e=>{a.push(new Promise(((e,i)=>{t.tech_.one("keysessioncreated",e)}))),s.push(new Promise(((i,n)=>{t.eme.initializeMediaKeys({keySystems:e},(t=>{t?n(t):i()}))})))})),Promise.race([Promise.all(s),Promise.race(a)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then((()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()})).catch((t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,e=(({player:t,sourceKeySystems:e,media:i,audioMedia:n})=>{const r=((t,e,i)=>{if(!t)return t;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=Zo(B(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);const r=$(n.video),s=$(n.audio),a={};for(const i in t)a[i]={},s&&(a[i].audioContentType=s),r&&(a[i].videoContentType=r),e.contentProtection&&e.contentProtection[i]&&e.contentProtection[i].pssh&&(a[i].pssh=e.contentProtection[i].pssh),"string"==typeof t[i]&&(a[i].url=t[i]);return wa(t,a)})(e,i,n);return!(!r||(t.currentSource().keySystems=r,r&&!t.eme&&(pa.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",(t=>{if("output-restricted"!==t.status)return;const e=this.playlistController_.main();if(!e||!e.playlists)return;const i=[];e.playlists.forEach((t=>{t&&t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height>=720&&(!t.excludeUntil||t.excludeUntil<1/0)&&(t.excludeUntil=1/0,i.push(t))})),i.length&&(pa.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...i),this.playlistController_.fastQualityChange_())})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==pa.browser.IE_VERSION&&e?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const t=pa.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(()=>{!function(t,e){e.representations().forEach((e=>{t.addQualityLevel(e)})),hc(t,e.playlists)}(this.qualityLevels_,this)})),this.playlists.on("mediachange",(()=>{hc(this.qualityLevels_,this.playlists)})))}static version(){return{"@videojs/http-streaming":lc,"mux.js":"6.2.0","mpd-parser":"1.0.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return Rl.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&r().URL.revokeObjectURL&&(r().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,e){return(({playlist:t,time:e,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===e)return i({message:"getProgramTime: playlist and time must be provided"});const n=((t,e)=>{if(!e||!e.segments||0===e.segments.length)return null;let i,n=0;for(let r=0;r<e.segments.length&&(i=e.segments[r],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(t<=n));r++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+.25*r.duration)return null;i=r}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}})(e,t);if(!n)return i({message:"valid programTime was not found"});if("estimate"===n.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const r={mediaSeconds:e},s=((t,e)=>{if(!e.dateTimeObject)return null;const i=e.videoTimingInfo.transmuxerPrependedSeconds,n=t-(e.videoTimingInfo.transmuxedPresentationStart+i);return new Date(e.dateTimeObject.getTime()+1e3*n)})(e,n.segment);return s&&(r.programDateTime=s.toISOString()),i(null,r)})({playlist:this.playlistController_.media(),time:t,callback:e})}seekToProgramTime(t,e,i=!0,n=2){return To({programTime:t,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})}}const mc={name:"videojs-http-streaming",VERSION:lc,canHandleSource(t,e={}){const i=wa(pa.options,e);return mc.canPlayType(t.type,i)},handleSource(t,e,i={}){const n=wa(pa.options,i);return e.vhs=new fc(t,e,n),e.vhs.xhr=ho(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e={}){const{vhs:{overrideNative:i=!pa.browser.IS_ANY_SAFARI}={}}=wa(pa.options,e),n=W(t);return!n||cc.supportsTypeNatively(n)&&!i?"":"maybe"}};U("avc1.4d400d,mp4a.40.2")&&pa.getTech("Html5").registerSourceHandler(mc,0),pa.VhsHandler=fc,pa.VhsSourceHandler=mc,pa.Vhs=cc,pa.use||pa.registerComponent("Vhs",cc),pa.options.vhs=pa.options.vhs||{},pa.getPlugin&&pa.getPlugin("reloadSourceOnError")||pa.registerPlugin("reloadSourceOnError",(function(t){oc(this,t)}))},13407:(t,e,i)=>{var n=i(58908),r=t.exports={WebVTT:i(63706),VTTCue:i(22230),VTTRegion:i(13710)};n.vttjs=r,n.WebVTT=r.WebVTT;var s=r.VTTCue,a=r.VTTRegion,o=n.VTTCue,l=n.VTTRegion;r.shim=function(){n.VTTCue=s,n.VTTRegion=a},r.restore=function(){n.VTTCue=o,n.VTTRegion=l},n.VTTCue||r.shim()},63706:(t,e,i)=>{var n=i(89144),r=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function s(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function a(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function o(){this.values=r(null)}function l(t,e,i,n){var r=n?t.split(n):[t];for(var s in r)if("string"==typeof r[s]){var a=r[s].split(i);2===a.length&&e(a[0].trim(),a[1].trim())}}function c(t,e,i){var n=t;function r(){var e=a(t);if(null===e)throw new s(s.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function c(){t=t.replace(/^\s+/,"")}if(c(),e.startTime=r(),c(),"--\x3e"!==t.substr(0,3))throw new s(s.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),c(),e.endTime=r(),c(),function(t,e){var n=new o;l(t,(function(t,e){switch(t){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===e){n.set(t,i[r].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var s=e.split(","),a=s[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===s.length&&n.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=e.split(","),n.percent(t,s[0]),2===s.length&&n.alt("positionAlign",s[1],["start","center","end"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start","center","end","left","right"])}}),/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");try{e.line=n.get("line","auto")}catch(t){}e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100);try{e.align=n.get("align","center")}catch(t){e.align=n.get("align","middle")}try{e.position=n.get("position","auto")}catch(t){e.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)}(t,e)}s.prototype=r(Error.prototype),s.prototype.constructor=s,s.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var u=n.createElement&&n.createElement("textarea"),h={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},d={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(t,e){function i(){if(!e)return null;var t,i=e.match(/^([^<]*)(<[^>]*>?)?/);return t=i[1]?i[1]:i[2],e=e.substr(t.length),t}function n(t,e){return!f[e.localName]||f[e.localName]===t.localName}function r(e,i){var n=h[e];if(!n)return null;var r=t.document.createElement(n),s=p[e];return s&&i&&(r[s]=i.trim()),r}for(var s,o,l=t.document.createElement("div"),c=l,m=[];null!==(s=i());)if("<"!==s[0])c.appendChild(t.document.createTextNode((o=s,u.innerHTML=o,o=u.textContent,u.textContent="",o)));else{if("/"===s[1]){m.length&&m[m.length-1]===s.substr(2).replace(">","")&&(m.pop(),c=c.parentNode);continue}var g,y=a(s.substr(1,s.length-2));if(y){g=t.document.createProcessingInstruction("timestamp",y),c.appendChild(g);continue}var v=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(!(g=r(v[1],v[3])))continue;if(!n(c,g))continue;if(v[2]){var b=v[2].split(".");b.forEach((function(t){var e=/^bg_/.test(t),i=e?t.slice(3):t;if(d.hasOwnProperty(i)){var n=e?"background-color":"color",r=d[i];g.style[n]=r}})),g.className=b.join(" ")}m.push(v[1]),c.appendChild(g),c=g}return l}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(t){for(var e=0;e<g.length;e++){var i=g[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function v(t){var e=[],i="";if(!t||!t.childNodes)return"ltr";function n(t,e){for(var i=e.childNodes.length-1;i>=0;i--)t.push(e.childNodes[i])}function r(t){if(!t||!t.length)return null;var e=t.pop(),i=e.textContent||e.innerText;if(i){var s=i.match(/^.*(\n|\r)/);return s?(t.length=0,s[0]):i}return"ruby"===e.tagName?r(t):e.childNodes?(n(t,e),r(t)):void 0}for(n(e,t);i=r(e);)for(var s=0;s<i.length;s++)if(y(i.charCodeAt(s)))return"rtl";return"ltr"}function b(){}function _(t,e,i){b.call(this),this.cue=e,this.cueDiv=m(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:v(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function w(t){var e,i,n,r;if(t.div){i=t.div.offsetHeight,n=t.div.offsetWidth,r=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight}function T(t,e,i,n){var r=new w(e),s=e.cue,a=function(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,n=0,r=0;r<i.length&&i[r]!==e;r++)"showing"===i[r].mode&&n++;return-1*++n}(s),o=[];if(s.snapToLines){var l;switch(s.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var c=r.lineHeight,u=c*Math.round(a),h=i[l]+c,d=o[0];Math.abs(u)>h&&(u=u<0?-1:1,u*=Math.ceil(h/c)*c),a<0&&(u+=""===s.vertical?i.height:i.width,o=o.reverse()),r.move(d,u)}else{var p=r.lineHeight/i.height*100;switch(s.lineAlign){case"center":a-=p/2;break;case"end":a-=p}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}o=["+y","-x","+x","-y"],r=new w(e)}var f=function(t,e){for(var r,s=new w(t),a=1,o=0;o<e.length;o++){for(;t.overlapsOppositeAxis(i,e[o])||t.within(i)&&t.overlapsAny(n);)t.move(e[o]);if(t.within(i))return t;var l=t.intersectPercentage(i);a>l&&(r=new w(t),a=l),t=new w(s)}return r||s}(r,o);e.move(f.toCSSCompatValues(i))}function S(){}b.prototype.applyStyles=function(t,e){for(var i in e=e||this.div,t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},b.prototype.formatStyle=function(t,e){return 0===t?0:t+e},_.prototype=r(b.prototype),_.prototype.constructor=_,w.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},w.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},w.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},w.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},w.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},w.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||i}},S.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},S.convertCueToDOMTree=function(t,e){return t&&e?m(t,e):null},S.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=t.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var r=[],s=w.getSimpleBoxPosition(n),a={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var i,o,l=0;l<e.length;l++)o=e[l],i=new _(t,o,a),n.appendChild(i.div),T(0,i,s,r),o.displayState=i.div,r.push(w.getSimpleBoxPosition(i))}()}else for(var o=0;o<e.length;o++)n.appendChild(e[o].displayState)},S.Parser=function(t,e,i){i||(i=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},S.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof s))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var e,i=this;function n(){for(var t=i.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var u=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new s(s.Errors.BadSignature);i.state="HEADER"}for(var h=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(h?h=!1:r=n(),i.state){case"HEADER":/:/.test(r)?(e=r).match(/X-TIMESTAMP-MAP/)?l(e,(function(t,e){"X-TIMESTAMP-MAP"===t&&function(t){var e=new o;l(t,(function(t,i){switch(t){case"MPEGT":e.integer(t+"S",i);break;case"LOCA":e.set(t+"L",a(i))}}),/[^\d]:/,/,/),i.ontimestampmap&&i.ontimestampmap({MPEGTS:e.get("MPEGTS"),LOCAL:e.get("LOCAL")})}(e)}),/=/):l(e,(function(t,e){"Region"===t&&function(t){var e=new o;if(l(t,(function(t,i){switch(t){case"id":e.set(t,i);break;case"width":e.percent(t,i);break;case"lines":e.integer(t,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var r=new o;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;e.set(t+"X",r.get("x")),e.set(t+"Y",r.get("y"));break;case"scroll":e.alt(t,i,["up"])}}),/=/,/\s/),e.has("id")){var n=new(i.vttjs.VTTRegion||i.window.VTTRegion);n.width=e.get("width",100),n.lines=e.get("lines",3),n.regionAnchorX=e.get("regionanchorX",0),n.regionAnchorY=e.get("regionanchorY",100),n.viewportAnchorX=e.get("viewportanchorX",0),n.viewportAnchorY=e.get("viewportanchorY",100),n.scroll=e.get("scroll",""),i.onregion&&i.onregion(n),i.regionList.push({id:e.get("id"),region:n})}}(e)}),/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;i.cue=new(i.vttjs.VTTCue||i.window.VTTCue)(0,0,"");try{i.cue.align="center"}catch(t){i.cue.align="middle"}if(i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{c(r,i.cue,i.regionList)}catch(t){i.reportOrThrowError(t),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var d=-1!==r.indexOf("--\x3e");if(!r||d&&(h=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(i.state="ID");continue}}}catch(t){i.reportOrThrowError(t),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new s(s.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},t.exports=S},22230:t=>{var e="auto",i={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(t){return"string"==typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}function s(t,n,s){this.hasBeenReset=!1;var a="",o=!1,l=t,c=n,u=s,h=null,d="",p=!0,f="auto",m="start",g="auto",y="auto",v=100,b="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(t){a=""+t}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(t){o=!!t}},startTime:{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return u},set:function(t){u=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(t){var e=function(t){return"string"==typeof t&&!!i[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===e)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(t){p=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(t){var e=r(t);e?(m=e,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");g=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(t){var e=r(t);e?(y=e,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");v=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(t){var e=r(t);if(!e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");b=e,this.hasBeenReset=!0}}}),this.displayState=void 0}s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.exports=s},13710:t=>{var e={"":!0,up:!0};function i(t){return"number"==typeof t&&t>=0&&t<=100}t.exports=function(){var t=100,n=3,r=0,s=100,a=0,o=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!i(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");n=t}},regionAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!i(t))throw new Error("RegionAnchorX must be between 0 and 100.");s=t}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!i(t))throw new Error("RegionAnchorY must be between 0 and 100.");r=t}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!i(t))throw new Error("ViewportAnchorY must be between 0 and 100.");o=t}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(t){if(!i(t))throw new Error("ViewportAnchorX must be between 0 and 100.");a=t}},scroll:{enumerable:!0,get:function(){return l},set:function(t){var i=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);!1===i?console.warn("Scroll: an invalid or illegal string was specified."):l=i}}})}},26046:t=>{window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";i.r(e),i(2),i(1);var n=window,r=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return setTimeout(t,16)},s=window,a=s.cancelAnimationFrame||s.mozCancelAnimationFrame||function(t){clearTimeout(t)};function o(){for(var t,e,i,n=arguments[0]||{},r=1,s=arguments.length;r<s;r++)if(null!==(t=arguments[r]))for(e in t)n!==(i=t[e])&&void 0!==i&&(n[e]=i);return n}function l(t){return["true","false"].indexOf(t)>=0?JSON.parse(t):t}function c(t,e,i,n){if(n)try{t.setItem(e,i)}catch(t){}return i}function u(){var t=document,e=t.body;return e||((e=t.createElement("body")).fake=!0),e}var h=document.documentElement;function d(t){var e="";return t.fake&&(e=h.style.overflow,t.style.background="",t.style.overflow=h.style.overflow="hidden",h.appendChild(t)),e}function p(t,e){t.fake&&(t.remove(),h.style.overflow=e,h.offsetHeight)}function f(t,e,i,n){"insertRule"in t?t.insertRule(e+"{"+i+"}",n):t.addRule(e,i,n)}function m(t){return("insertRule"in t?t.cssRules:t.rules).length}function g(t,e,i){for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n)}var y="classList"in document.createElement("_"),v=y?function(t,e){return t.classList.contains(e)}:function(t,e){return t.className.indexOf(e)>=0},b=y?function(t,e){v(t,e)||t.classList.add(e)}:function(t,e){v(t,e)||(t.className+=" "+e)},_=y?function(t,e){v(t,e)&&t.classList.remove(e)}:function(t,e){v(t,e)&&(t.className=t.className.replace(e,""))};function w(t,e){return t.hasAttribute(e)}function T(t,e){return t.getAttribute(e)}function S(t){return void 0!==t.item}function x(t,e){if(t=S(t)||t instanceof Array?t:[t],"[object Object]"===Object.prototype.toString.call(e))for(var i=t.length;i--;)for(var n in e)t[i].setAttribute(n,e[n])}function k(t,e){t=S(t)||t instanceof Array?t:[t];for(var i=(e=e instanceof Array?e:[e]).length,n=t.length;n--;)for(var r=i;r--;)t[n].removeAttribute(e[r])}function C(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(t[i]);return e}function E(t,e){"none"!==t.style.display&&(t.style.display="none")}function I(t,e){"none"===t.style.display&&(t.style.display="")}function P(t){return"none"!==window.getComputedStyle(t).display}function A(t){if("string"==typeof t){var e=[t],i=t.charAt(0).toUpperCase()+t.substr(1);["Webkit","Moz","ms","O"].forEach((function(n){"ms"===n&&"transform"!==t||e.push(n+i)})),t=e}for(var n=document.createElement("fakeelement"),r=(t.length,0);r<t.length;r++){var s=t[r];if(void 0!==n.style[s])return s}return!1}function L(t,e){var i=!1;return/^Webkit/.test(t)?i="webkit"+e+"End":/^O/.test(t)?i="o"+e+"End":t&&(i=e.toLowerCase()+"end"),i}var O=!1;try{var D=Object.defineProperty({},"passive",{get:function(){O=!0}});window.addEventListener("test",null,D)}catch(t){}var M=!!O&&{passive:!0};function R(t,e,i){for(var n in e){var r=["touchstart","touchmove"].indexOf(n)>=0&&!i&&M;t.addEventListener(n,e[n],r)}}function N(t,e){for(var i in e){var n=["touchstart","touchmove"].indexOf(i)>=0&&M;t.removeEventListener(i,e[i],n)}}i.d(e,"tns",(function(){return B}));var B=function(t){t=o({container:".slider",mode:"carousel",axis:"horizontal",items:1,gutter:0,edgePadding:0,fixedWidth:!1,autoWidth:!1,viewportMax:!1,slideBy:1,center:!1,controls:!0,controlsPosition:"top",controlsText:["prev","next"],controlsContainer:!1,prevButton:!1,nextButton:!1,nav:!0,navPosition:"top",navContainer:!1,navAsThumbnails:!1,arrowKeys:!1,speed:300,autoplay:!1,autoplayPosition:"top",autoplayTimeout:5e3,autoplayDirection:"forward",autoplayText:["start","stop"],autoplayHoverPause:!1,autoplayButton:!1,autoplayButtonOutput:!0,autoplayResetOnVisibility:!0,animateIn:"tns-fadeIn",animateOut:"tns-fadeOut",animateNormal:"tns-normal",animateDelay:!1,loop:!0,rewind:!1,autoHeight:!1,responsive:!1,lazyload:!1,lazyloadSelector:".tns-lazy-img",touch:!0,mouseDrag:!1,swipeAngle:15,nested:!1,preventActionWhenRunning:!1,preventScrollOnTouch:!1,freezable:!0,onInit:!1,useLocalStorage:!0},t||{});var e=document,i=window,n={ENTER:13,SPACE:32,LEFT:37,RIGHT:39},s={},h=t.useLocalStorage;if(h){var y=navigator.userAgent,S=new Date;try{(s=i.localStorage)?(s.setItem(S,S),h=s.getItem(S)==S,s.removeItem(S)):h=!1,h||(s={})}catch(t){h=!1}h&&(s.tnsApp&&s.tnsApp!==y&&["tC","tPL","tMQ","tTf","t3D","tTDu","tTDe","tADu","tADe","tTE","tAE"].forEach((function(t){s.removeItem(t)})),localStorage.tnsApp=y)}var O=s.tC?l(s.tC):c(s,"tC",function(){var t=document,e=u(),i=d(e),n=t.createElement("div"),r=!1;e.appendChild(n);try{for(var s,a="(10px * 10)",o=["calc"+a,"-moz-calc"+a,"-webkit-calc"+a],l=0;l<3;l++)if(s=o[l],n.style.width=s,100===n.offsetWidth){r=s.replace(a,"");break}}catch(t){}return e.fake?p(e,i):n.remove(),r}(),h),D=s.tPL?l(s.tPL):c(s,"tPL",function(){var t,e=document,i=u(),n=d(i),r=e.createElement("div"),s=e.createElement("div"),a="";r.className="tns-t-subp2",s.className="tns-t-ct";for(var o=0;o<70;o++)a+="<div></div>";return s.innerHTML=a,r.appendChild(s),i.appendChild(r),t=Math.abs(r.getBoundingClientRect().left-s.children[67].getBoundingClientRect().left)<2,i.fake?p(i,n):r.remove(),t}(),h),M=s.tMQ?l(s.tMQ):c(s,"tMQ",function(){var t,e=document,i=u(),n=d(i),r=e.createElement("div"),s=e.createElement("style"),a="@media all and (min-width:1px){.tns-mq-test{position:absolute}}";return s.type="text/css",r.className="tns-mq-test",i.appendChild(s),i.appendChild(r),s.styleSheet?s.styleSheet.cssText=a:s.appendChild(e.createTextNode(a)),t=window.getComputedStyle?window.getComputedStyle(r).position:r.currentStyle.position,i.fake?p(i,n):r.remove(),"absolute"===t}(),h),F=s.tTf?l(s.tTf):c(s,"tTf",A("transform"),h),$=s.t3D?l(s.t3D):c(s,"t3D",function(t){if(!t)return!1;if(!window.getComputedStyle)return!1;var e,i=document,n=u(),r=d(n),s=i.createElement("p"),a=t.length>9?"-"+t.slice(0,-9).toLowerCase()+"-":"";return a+="transform",n.insertBefore(s,null),s.style[t]="translate3d(1px,1px,1px)",e=window.getComputedStyle(s).getPropertyValue(a),n.fake?p(n,r):s.remove(),void 0!==e&&e.length>0&&"none"!==e}(F),h),U=s.tTDu?l(s.tTDu):c(s,"tTDu",A("transitionDuration"),h),j=s.tTDe?l(s.tTDe):c(s,"tTDe",A("transitionDelay"),h),V=s.tADu?l(s.tADu):c(s,"tADu",A("animationDuration"),h),H=s.tADe?l(s.tADe):c(s,"tADe",A("animationDelay"),h),q=s.tTE?l(s.tTE):c(s,"tTE",L(U,"Transition"),h),W=s.tAE?l(s.tAE):c(s,"tAE",L(V,"Animation"),h),z=i.console&&"function"==typeof i.console.warn,G=["container","controlsContainer","prevButton","nextButton","navContainer","autoplayButton"],K={};if(G.forEach((function(i){if("string"==typeof t[i]){var n=t[i],r=e.querySelector(n);if(K[i]=n,!r||!r.nodeName)return void(z&&console.warn("Can't find",t[i]));t[i]=r}})),!(t.container.children.length<1)){var Y=t.responsive,X=t.nested,Q="carousel"===t.mode;if(Y){0 in Y&&(t=o(t,Y[0]),delete Y[0]);var J={};for(var Z in Y){var tt=Y[Z];tt="number"==typeof tt?{items:tt}:tt,J[Z]=tt}Y=J,J=null}if(Q||function t(e){for(var i in e)Q||("slideBy"===i&&(e[i]="page"),"edgePadding"===i&&(e[i]=!1),"autoHeight"===i&&(e[i]=!1)),"responsive"===i&&t(e[i])}(t),!Q){t.axis="horizontal",t.slideBy="page",t.edgePadding=!1;var et=t.animateIn,it=t.animateOut,nt=t.animateDelay,rt=t.animateNormal}var st,at,ot="horizontal"===t.axis,lt=e.createElement("div"),ct=e.createElement("div"),ut=t.container,ht=ut.parentNode,dt=ut.outerHTML,pt=ut.children,ft=pt.length,mt=Ei(),gt=!1;Y&&Gi(),Q&&(ut.className+=" tns-vpfix");var yt,vt,bt,_t,wt,Tt,St,xt=t.autoWidth,kt=Li("fixedWidth"),Ct=Li("edgePadding"),Et=Li("gutter"),It=Pi(),Pt=Li("center"),At=xt?1:Math.floor(Li("items")),Lt=Li("slideBy"),Ot=t.viewportMax||t.fixedWidthViewportWidth,Dt=Li("arrowKeys"),Mt=Li("speed"),Rt=t.rewind,Nt=!Rt&&t.loop,Bt=Li("autoHeight"),Ft=Li("controls"),$t=Li("controlsText"),Ut=Li("nav"),jt=Li("touch"),Vt=Li("mouseDrag"),Ht=Li("autoplay"),qt=Li("autoplayTimeout"),Wt=Li("autoplayText"),zt=Li("autoplayHoverPause"),Gt=Li("autoplayResetOnVisibility"),Kt=(St=document.createElement("style"),document.querySelector("head").appendChild(St),St.sheet?St.sheet:St.styleSheet),Yt=t.lazyload,Xt=(t.lazyloadSelector,[]),Qt=Nt?(wt=function(){if(xt||kt&&!Ot)return ft-1;var e=kt?"fixedWidth":"items",i=[];if((kt||t[e]<ft)&&i.push(t[e]),Y)for(var n in Y){var r=Y[n][e];r&&(kt||r<ft)&&i.push(r)}return i.length||i.push(0),Math.ceil(kt?Ot/Math.min.apply(null,i):Math.max.apply(null,i))}(),Tt=Q?Math.ceil((5*wt-ft)/2):4*wt-ft,Tt=Math.max(wt,Tt),Ai("edgePadding")?Tt+1:Tt):0,Jt=Q?ft+2*Qt:ft+Qt,Zt=!(!kt&&!xt||Nt),te=kt?wn():null,ee=!Q||!Nt,ie=ot?"left":"top",ne="",re="",se=kt?function(){return Pt&&!Nt?ft-1:Math.ceil(-te/(kt+Et))}:xt?function(){for(var t=Jt;t--;)if(yt[t]>=-te)return t}:function(){return Pt&&Q&&!Nt?ft-1:Nt||Q?Math.max(0,Jt-Math.ceil(At)):Jt-1},ae=xi(Li("startIndex")),oe=ae,le=(Si(),0),ce=xt?null:se(),ue=t.preventActionWhenRunning,he=t.swipeAngle,de=!he||"?",pe=!1,fe=t.onInit,me=new function(){return{topics:{},on:function(t,e){this.topics[t]=this.topics[t]||[],this.topics[t].push(e)},off:function(t,e){if(this.topics[t])for(var i=0;i<this.topics[t].length;i++)if(this.topics[t][i]===e){this.topics[t].splice(i,1);break}},emit:function(t,e){e.type=t,this.topics[t]&&this.topics[t].forEach((function(i){i(e,t)}))}}},ge=" tns-slider tns-"+t.mode,ye=ut.id||(_t=window.tnsId,window.tnsId=_t?_t+1:1,"tns"+window.tnsId),ve=Li("disable"),be=!1,_e=t.freezable,we=!(!_e||xt)&&zi(),Te=!1,Se={click:An,keydown:function(t){t=Fn(t);var e=[n.LEFT,n.RIGHT].indexOf(t.keyCode);e>=0&&(0===e?qe.disabled||An(t,-1):We.disabled||An(t,1))}},xe={click:function(t){if(pe){if(ue)return;In()}for(var e=$n(t=Fn(t));e!==Ye&&!w(e,"data-nav");)e=e.parentNode;if(w(e,"data-nav")){var i=Ze=Number(T(e,"data-nav")),n=kt||xt?i*ft/Qe:i*At;Pn(Oe?i:Math.min(Math.ceil(n),ft-1),t),ti===i&&(ai&&Rn(),Ze=-1)}},keydown:function(t){t=Fn(t);var i=e.activeElement;if(w(i,"data-nav")){var r=[n.LEFT,n.RIGHT,n.ENTER,n.SPACE].indexOf(t.keyCode),s=Number(T(i,"data-nav"));r>=0&&(0===r?s>0&&Bn(Ke[s-1]):1===r?s<Qe-1&&Bn(Ke[s+1]):(Ze=s,Pn(s,t)))}}},ke={mouseover:function(){ai&&(On(),oi=!0)},mouseout:function(){oi&&(Ln(),oi=!1)}},Ce={visibilitychange:function(){e.hidden?ai&&(On(),ci=!0):ci&&(Ln(),ci=!1)}},Ee={keydown:function(t){t=Fn(t);var e=[n.LEFT,n.RIGHT].indexOf(t.keyCode);e>=0&&An(t,0===e?-1:1)}},Ie={touchstart:Hn,touchmove:qn,touchend:Wn,touchcancel:Wn},Pe={mousedown:Hn,mousemove:qn,mouseup:Wn,mouseleave:Wn},Ae=Ai("controls"),Le=Ai("nav"),Oe=!!xt||t.navAsThumbnails,De=Ai("autoplay"),Me=Ai("touch"),Re=Ai("mouseDrag"),Ne="tns-slide-active",Be="tns-complete",Fe={load:function(t){nn($n(t))},error:function(t){var e;e=$n(t),b(e,"failed"),rn(e)}},$e="force"===t.preventScrollOnTouch;if(Ae)var Ue,je,Ve=t.controlsContainer,He=t.controlsContainer?t.controlsContainer.outerHTML:"",qe=t.prevButton,We=t.nextButton,ze=t.prevButton?t.prevButton.outerHTML:"",Ge=t.nextButton?t.nextButton.outerHTML:"";if(Le)var Ke,Ye=t.navContainer,Xe=t.navContainer?t.navContainer.outerHTML:"",Qe=xt?ft:Gn(),Je=0,Ze=-1,ti=Ci(),ei=ti,ii="tns-nav-active",ni="Carousel Page ",ri=" (Current Slide)";if(De)var si,ai,oi,li,ci,ui="forward"===t.autoplayDirection?1:-1,hi=t.autoplayButton,di=t.autoplayButton?t.autoplayButton.outerHTML:"",pi=["<span class='tns-visually-hidden'>"," animation</span>"];if(Me||Re)var fi,mi,gi={},yi={},vi=!1,bi=ot?function(t,e){return t.x-e.x}:function(t,e){return t.y-e.y};xt||Ti(ve||we),F&&(ie=F,ne="translate",$?(ne+=ot?"3d(":"3d(0px, ",re=ot?", 0px, 0px)":", 0px)"):(ne+=ot?"X(":"Y(",re=")")),Q&&(ut.className=ut.className.replace("tns-vpfix","")),function(){if(Ai("gutter"),lt.className="tns-outer",ct.className="tns-inner",lt.id=ye+"-ow",ct.id=ye+"-iw",""===ut.id&&(ut.id=ye),ge+=D||xt?" tns-subpixel":" tns-no-subpixel",ge+=O?" tns-calc":" tns-no-calc",xt&&(ge+=" tns-autowidth"),ge+=" tns-"+t.axis,ut.className+=ge,Q?((st=e.createElement("div")).id=ye+"-mw",st.className="tns-ovh",lt.appendChild(st),st.appendChild(ct)):lt.appendChild(ct),Bt&&((st||ct).className+=" tns-ah"),ht.insertBefore(lt,ut),ct.appendChild(ut),g(pt,(function(t,e){b(t,"tns-item"),t.id||(t.id=ye+"-item"+e),!Q&&rt&&b(t,rt),x(t,{"aria-hidden":"true",tabindex:"-1"})})),Qt){for(var i=e.createDocumentFragment(),n=e.createDocumentFragment(),r=Qt;r--;){var s=r%ft,a=pt[s].cloneNode(!0);if(k(a,"id"),n.insertBefore(a,n.firstChild),Q){var o=pt[ft-1-s].cloneNode(!0);k(o,"id"),i.appendChild(o)}}ut.insertBefore(i,ut.firstChild),ut.appendChild(n),pt=ut.children}}(),function(){if(!Q)for(var e=ae,n=ae+Math.min(ft,At);e<n;e++){var r=pt[e];r.style.left=100*(e-ae)/At+"%",b(r,et),_(r,rt)}if(ot&&(D||xt?(f(Kt,"#"+ye+" > .tns-item","font-size:"+i.getComputedStyle(pt[0]).fontSize+";",m(Kt)),f(Kt,"#"+ye,"font-size:0;",m(Kt))):Q&&g(pt,(function(t,e){t.style.marginLeft=function(t){return O?O+"("+100*t+"% / "+Jt+")":100*t/Jt+"%"}(e)}))),M){if(U){var s=st&&t.autoHeight?Bi(t.speed):"";f(Kt,"#"+ye+"-mw",s,m(Kt))}s=Oi(t.edgePadding,t.gutter,t.fixedWidth,t.speed,t.autoHeight),f(Kt,"#"+ye+"-iw",s,m(Kt)),Q&&(s=ot&&!xt?"width:"+Di(t.fixedWidth,t.gutter,t.items)+";":"",U&&(s+=Bi(Mt)),f(Kt,"#"+ye,s,m(Kt))),s=ot&&!xt?Mi(t.fixedWidth,t.gutter,t.items):"",t.gutter&&(s+=Ri(t.gutter)),Q||(U&&(s+=Bi(Mt)),V&&(s+=Fi(Mt))),s&&f(Kt,"#"+ye+" > .tns-item",s,m(Kt))}else cn(),ct.style.cssText=Oi(Ct,Et,kt,Bt),Q&&ot&&!xt&&(ut.style.width=Di(kt,Et,At)),s=ot&&!xt?Mi(kt,Et,At):"",Et&&(s+=Ri(Et)),s&&f(Kt,"#"+ye+" > .tns-item",s,m(Kt));if(Y&&M)for(var a in Y){a=parseInt(a);var o=Y[a],l=(s="",""),c="",u="",h="",d=xt?null:Li("items",a),p=Li("fixedWidth",a),y=Li("speed",a),v=Li("edgePadding",a),w=Li("autoHeight",a),T=Li("gutter",a);U&&st&&Li("autoHeight",a)&&"speed"in o&&(l="#"+ye+"-mw{"+Bi(y)+"}"),("edgePadding"in o||"gutter"in o)&&(c="#"+ye+"-iw{"+Oi(v,T,p,y,w)+"}"),Q&&ot&&!xt&&("fixedWidth"in o||"items"in o||kt&&"gutter"in o)&&(u="width:"+Di(p,T,d)+";"),U&&"speed"in o&&(u+=Bi(y)),u&&(u="#"+ye+"{"+u+"}"),("fixedWidth"in o||kt&&"gutter"in o||!Q&&"items"in o)&&(h+=Mi(p,T,d)),"gutter"in o&&(h+=Ri(T)),!Q&&"speed"in o&&(U&&(h+=Bi(y)),V&&(h+=Fi(y))),h&&(h="#"+ye+" > .tns-item{"+h+"}"),(s=l+c+u+h)&&Kt.insertRule("@media (min-width: "+a/16+"em) {"+s+"}",Kt.cssRules.length)}}(),$i();var _i=Nt?Q?function(){var t=le,e=ce;t+=Lt,e-=Lt,Ct?(t+=1,e-=1):kt&&(It+Et)%(kt+Et)&&(e-=1),Qt&&(ae>e?ae-=ft:ae<t&&(ae+=ft))}:function(){if(ae>ce)for(;ae>=le+ft;)ae-=ft;else if(ae<le)for(;ae<=ce-ft;)ae+=ft}:function(){ae=Math.max(le,Math.min(ce,ae))},wi=Q?function(){var t,e,i,n,r,s,a,o,l,c,u;bn(ut,""),U||!Mt?(xn(),Mt&&P(ut)||In()):(t=ut,e=ie,i=ne,n=re,r=Tn(),s=Mt,a=In,o=Math.min(s,10),l=r.indexOf("%")>=0?"%":"px",r=r.replace(l,""),c=Number(t.style[e].replace(i,"").replace(n,"").replace(l,"")),u=(r-c)/s*o,setTimeout((function r(){s-=o,c+=u,t.style[e]=i+c+l+n,s>0?setTimeout(r,o):a()}),o)),ot||zn()}:function(){Xt=[];var t={};t[q]=t[W]=In,N(pt[oe],t),R(pt[ae],t),kn(oe,et,it,!0),kn(ae,rt,et),q&&W&&Mt&&P(ut)||In()};return{version:"2.9.2",getInfo:Yn,events:me,goTo:Pn,play:function(){Ht&&!ai&&(Mn(),li=!1)},pause:function(){ai&&(Rn(),li=!0)},isOn:gt,updateSliderHeight:hn,refresh:$i,destroy:function(){if(Kt.disabled=!0,Kt.ownerNode&&Kt.ownerNode.remove(),N(i,{resize:qi}),Dt&&N(e,Ee),Ve&&N(Ve,Se),Ye&&N(Ye,xe),N(ut,ke),N(ut,Ce),hi&&N(hi,{click:Nn}),Ht&&clearInterval(si),Q&&q){var n={};n[q]=In,N(ut,n)}jt&&N(ut,Ie),Vt&&N(ut,Pe);var r=[dt,He,ze,Ge,Xe,di];for(var s in G.forEach((function(e,i){var n="container"===e?lt:t[e];if("object"==typeof n){var s=!!n.previousElementSibling&&n.previousElementSibling,a=n.parentNode;n.outerHTML=r[i],t[e]=s?s.nextElementSibling:a.firstElementChild}})),G=et=it=nt=rt=ot=lt=ct=ut=ht=dt=pt=ft=at=mt=xt=kt=Ct=Et=It=At=Lt=Ot=Dt=Mt=Rt=Nt=Bt=Kt=Yt=yt=Xt=Qt=Jt=Zt=te=ee=ie=ne=re=se=ae=oe=le=ce=he=de=pe=fe=me=ge=ye=ve=be=_e=we=Te=Se=xe=ke=Ce=Ee=Ie=Pe=Ae=Le=Oe=De=Me=Re=Ne=Be=Fe=vt=Ft=$t=Ve=He=qe=We=Ue=je=Ut=Ye=Xe=Ke=Qe=Je=Ze=ti=ei=ii=ni=ri=Ht=qt=ui=Wt=zt=hi=di=Gt=pi=si=ai=oi=li=ci=gi=yi=fi=vi=mi=bi=jt=Vt=null,this)"rebuild"!==s&&(this[s]=null);gt=!1},rebuild:function(){return B(o(t,K))}}}function Ti(t){t&&(Ft=Ut=jt=Vt=Dt=Ht=zt=Gt=!1)}function Si(){for(var t=Q?ae-Qt:ae;t<0;)t+=ft;return t%ft+1}function xi(t){return t=t?Math.max(0,Math.min(Nt?ft-1:ft-At,t)):0,Q?t+Qt:t}function ki(t){for(null==t&&(t=ae),Q&&(t-=Qt);t<0;)t+=ft;return Math.floor(t%ft)}function Ci(){var t,e=ki();return t=Oe?e:kt||xt?Math.ceil((e+1)*Qe/ft-1):Math.floor(e/At),!Nt&&Q&&ae===ce&&(t=Qe-1),t}function Ei(){return i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth}function Ii(t){return"top"===t?"afterbegin":"beforeend"}function Pi(){var t=Ct?2*Ct-Et:0;return function t(i){var n,r,s=e.createElement("div");return i.appendChild(s),r=(n=s.getBoundingClientRect()).right-n.left,s.remove(),r||t(i.parentNode)}(ht)-t}function Ai(e){if(t[e])return!0;if(Y)for(var i in Y)if(Y[i][e])return!0;return!1}function Li(e,i){if(null==i&&(i=mt),"items"===e&&kt)return Math.floor((It+Et)/(kt+Et))||1;var n=t[e];if(Y)for(var r in Y)i>=parseInt(r)&&e in Y[r]&&(n=Y[r][e]);return"slideBy"===e&&"page"===n&&(n=Li("items")),Q||"slideBy"!==e&&"items"!==e||(n=Math.floor(n)),n}function Oi(t,e,i,n,r){var s="";if(void 0!==t){var a=t;e&&(a-=e),s=ot?"margin: 0 "+a+"px 0 "+t+"px;":"margin: "+t+"px 0 "+a+"px 0;"}else if(e&&!i){var o="-"+e+"px";s="margin: 0 "+(ot?o+" 0 0":"0 "+o+" 0")+";"}return!Q&&r&&U&&n&&(s+=Bi(n)),s}function Di(t,e,i){return t?(t+e)*Jt+"px":O?O+"("+100*Jt+"% / "+i+")":100*Jt/i+"%"}function Mi(t,e,i){var n;if(t)n=t+e+"px";else{Q||(i=Math.floor(i));var r=Q?Jt:i;n=O?O+"(100% / "+r+")":100/r+"%"}return n="width:"+n,"inner"!==X?n+";":n+" !important;"}function Ri(t){var e="";return!1!==t&&(e=(ot?"padding-":"margin-")+(ot?"right":"bottom")+": "+t+"px;"),e}function Ni(t,e){var i=t.substring(0,t.length-e).toLowerCase();return i&&(i="-"+i+"-"),i}function Bi(t){return Ni(U,18)+"transition-duration:"+t/1e3+"s;"}function Fi(t){return Ni(V,17)+"animation-duration:"+t/1e3+"s;"}function $i(){if(Ai("autoHeight")||xt||!ot){var t=ut.querySelectorAll("img");g(t,(function(t){var e=t.src;e&&e.indexOf("data:image")<0?(R(t,Fe),t.src="",t.src=e,b(t,"loading")):Yt||nn(t)})),r((function(){on(C(t),(function(){vt=!0}))})),!xt&&ot&&(t=sn(ae,Math.min(ae+At-1,Jt-1))),Yt?Ui():r((function(){on(C(t),Ui)}))}else Q&&Sn(),Vi(),Hi()}function Ui(){if(xt){var t=Nt?ae:ft-1;!function e(){pt[t-1].getBoundingClientRect().right.toFixed(2)===pt[t].getBoundingClientRect().left.toFixed(2)?ji():setTimeout((function(){e()}),16)}()}else ji()}function ji(){ot&&!xt||(dn(),xt?(te=wn(),_e&&(we=zi()),ce=se(),Ti(ve||we)):zn()),Q&&Sn(),Vi(),Hi()}function Vi(){if(pn(),lt.insertAdjacentHTML("afterbegin",'<div class="tns-liveregion tns-visually-hidden" aria-live="polite" aria-atomic="true">slide <span class="current">'+Zi()+"</span>  of "+ft+"</div>"),bt=lt.querySelector(".tns-liveregion .current"),De){var e=Ht?"stop":"start";hi?x(hi,{"data-action":e}):t.autoplayButtonOutput&&(lt.insertAdjacentHTML(Ii(t.autoplayPosition),'<button data-action="'+e+'">'+pi[0]+e+pi[1]+Wt[0]+"</button>"),hi=lt.querySelector("[data-action]")),hi&&R(hi,{click:Nn}),Ht&&(Mn(),zt&&R(ut,ke),Gt&&R(ut,Ce))}if(Le){if(Ye)x(Ye,{"aria-label":"Carousel Pagination"}),g(Ke=Ye.children,(function(t,e){x(t,{"data-nav":e,tabindex:"-1","aria-label":ni+(e+1),"aria-controls":ye})}));else{for(var i="",n=Oe?"":'style="display:none"',r=0;r<ft;r++)i+='<button data-nav="'+r+'" tabindex="-1" aria-controls="'+ye+'" '+n+' aria-label="'+ni+(r+1)+'"></button>';i='<div class="tns-nav" aria-label="Carousel Pagination">'+i+"</div>",lt.insertAdjacentHTML(Ii(t.navPosition),i),Ye=lt.querySelector(".tns-nav"),Ke=Ye.children}if(Kn(),U){var s=U.substring(0,U.length-18).toLowerCase(),a="transition: all "+Mt/1e3+"s";s&&(a="-"+s+"-"+a),f(Kt,"[aria-controls^="+ye+"-item]",a,m(Kt))}x(Ke[ti],{"aria-label":ni+(ti+1)+ri}),k(Ke[ti],"tabindex"),b(Ke[ti],ii),R(Ye,xe)}Ae&&(Ve||qe&&We||(lt.insertAdjacentHTML(Ii(t.controlsPosition),'<div class="tns-controls" aria-label="Carousel Navigation" tabindex="0"><button data-controls="prev" tabindex="-1" aria-controls="'+ye+'">'+$t[0]+'</button><button data-controls="next" tabindex="-1" aria-controls="'+ye+'">'+$t[1]+"</button></div>"),Ve=lt.querySelector(".tns-controls")),qe&&We||(qe=Ve.children[0],We=Ve.children[1]),t.controlsContainer&&x(Ve,{"aria-label":"Carousel Navigation",tabindex:"0"}),(t.controlsContainer||t.prevButton&&t.nextButton)&&x([qe,We],{"aria-controls":ye,tabindex:"-1"}),(t.controlsContainer||t.prevButton&&t.nextButton)&&(x(qe,{"data-controls":"prev"}),x(We,{"data-controls":"next"})),Ue=mn(qe),je=mn(We),vn(),Ve?R(Ve,Se):(R(qe,Se),R(We,Se))),Ki()}function Hi(){if(Q&&q){var n={};n[q]=In,R(ut,n)}jt&&R(ut,Ie,t.preventScrollOnTouch),Vt&&R(ut,Pe),Dt&&R(e,Ee),"inner"===X?me.on("outerResized",(function(){Wi(),me.emit("innerLoaded",Yn())})):(Y||kt||xt||Bt||!ot)&&R(i,{resize:qi}),Bt&&("outer"===X?me.on("innerLoaded",an):ve||an()),en(),ve?Qi():we&&Xi(),me.on("indexChanged",ln),"inner"===X&&me.emit("innerLoaded",Yn()),"function"==typeof fe&&fe(Yn()),gt=!0}function qi(t){r((function(){Wi(Fn(t))}))}function Wi(i){if(gt){"outer"===X&&me.emit("outerResized",Yn(i)),mt=Ei();var n,r=at,s=!1;Y&&(Gi(),(n=r!==at)&&me.emit("newBreakpointStart",Yn(i)));var a,o,l=At,c=ve,u=we,h=Dt,d=Ft,p=Ut,y=jt,v=Vt,w=Ht,T=zt,S=Gt,x=ae;if(n){var k=kt,C=Bt,P=$t,A=Pt,L=Wt;if(!M)var O=Et,D=Ct}if(Dt=Li("arrowKeys"),Ft=Li("controls"),Ut=Li("nav"),jt=Li("touch"),Pt=Li("center"),Vt=Li("mouseDrag"),Ht=Li("autoplay"),zt=Li("autoplayHoverPause"),Gt=Li("autoplayResetOnVisibility"),n&&(ve=Li("disable"),kt=Li("fixedWidth"),Mt=Li("speed"),Bt=Li("autoHeight"),$t=Li("controlsText"),Wt=Li("autoplayText"),qt=Li("autoplayTimeout"),M||(Ct=Li("edgePadding"),Et=Li("gutter"))),Ti(ve),It=Pi(),ot&&!xt||ve||(dn(),ot||(zn(),s=!0)),(kt||xt)&&(te=wn(),ce=se()),(n||kt)&&(At=Li("items"),Lt=Li("slideBy"),(o=At!==l)&&(kt||xt||(ce=se()),_i())),n&&ve!==c&&(ve?Qi():function(){if(be){if(Kt.disabled=!1,ut.className+=ge,Sn(),Nt)for(var t=Qt;t--;)Q&&I(pt[t]),I(pt[Jt-t-1]);if(!Q)for(var e=ae,i=ae+ft;e<i;e++){var n=pt[e],r=e<ae+At?et:rt;n.style.left=100*(e-ae)/At+"%",b(n,r)}Yi(),be=!1}}()),_e&&(n||kt||xt)&&(we=zi())!==u&&(we?(xn(Tn(xi(0))),Xi()):(function(){if(Te){if(Ct&&M&&(ct.style.margin=""),Qt)for(var t="tns-transparent",e=Qt;e--;)Q&&_(pt[e],t),_(pt[Jt-e-1],t);Yi(),Te=!1}}(),s=!0)),Ti(ve||we),Ht||(zt=Gt=!1),Dt!==h&&(Dt?R(e,Ee):N(e,Ee)),Ft!==d&&(Ft?Ve?I(Ve):(qe&&I(qe),We&&I(We)):Ve?E(Ve):(qe&&E(qe),We&&E(We))),Ut!==p&&(Ut?I(Ye):E(Ye)),jt!==y&&(jt?R(ut,Ie,t.preventScrollOnTouch):N(ut,Ie)),Vt!==v&&(Vt?R(ut,Pe):N(ut,Pe)),Ht!==w&&(Ht?(hi&&I(hi),ai||li||Mn()):(hi&&E(hi),ai&&Rn())),zt!==T&&(zt?R(ut,ke):N(ut,ke)),Gt!==S&&(Gt?R(e,Ce):N(e,Ce)),n){if(kt===k&&Pt===A||(s=!0),Bt!==C&&(Bt||(ct.style.height="")),Ft&&$t!==P&&(qe.innerHTML=$t[0],We.innerHTML=$t[1]),hi&&Wt!==L){var B=Ht?1:0,F=hi.innerHTML,$=F.length-L[B].length;F.substring($)===L[B]&&(hi.innerHTML=F.substring(0,$)+Wt[B])}}else Pt&&(kt||xt)&&(s=!0);if((o||kt&&!xt)&&(Qe=Gn(),Kn()),(a=ae!==x)?(me.emit("indexChanged",Yn()),s=!0):o?a||ln():(kt||xt)&&(en(),pn(),Ji()),o&&!Q&&function(){for(var t=ae+Math.min(ft,At),e=Jt;e--;){var i=pt[e];e>=ae&&e<t?(b(i,"tns-moving"),i.style.left=100*(e-ae)/At+"%",b(i,et),_(i,rt)):i.style.left&&(i.style.left="",b(i,rt),_(i,et)),_(i,it)}setTimeout((function(){g(pt,(function(t){_(t,"tns-moving")}))}),300)}(),!ve&&!we){if(n&&!M&&(Bt===autoheightTem&&Mt===speedTem||cn(),Ct===D&&Et===O||(ct.style.cssText=Oi(Ct,Et,kt,Mt,Bt)),ot)){Q&&(ut.style.width=Di(kt,Et,At));var U=Mi(kt,Et,At)+Ri(Et);!function(t,e){"deleteRule"in t?t.deleteRule(e):t.removeRule(e)}(Kt,m(Kt)-1),f(Kt,"#"+ye+" > .tns-item",U,m(Kt))}Bt&&an(),s&&(Sn(),oe=ae)}n&&me.emit("newBreakpointEnd",Yn(i))}}function zi(){if(!kt&&!xt)return ft<=(Pt?At-(At-1)/2:At);var t=kt?(kt+Et)*ft:yt[ft],e=Ct?It+2*Ct:It+Et;return Pt&&(e-=kt?(It-kt)/2:(It-(yt[ae+1]-yt[ae]-Et))/2),t<=e}function Gi(){for(var t in at=0,Y)t=parseInt(t),mt>=t&&(at=t)}function Ki(){!Ht&&hi&&E(hi),!Ut&&Ye&&E(Ye),Ft||(Ve?E(Ve):(qe&&E(qe),We&&E(We)))}function Yi(){Ht&&hi&&I(hi),Ut&&Ye&&I(Ye),Ft&&(Ve?I(Ve):(qe&&I(qe),We&&I(We)))}function Xi(){if(!Te){if(Ct&&(ct.style.margin="0px"),Qt)for(var t="tns-transparent",e=Qt;e--;)Q&&b(pt[e],t),b(pt[Jt-e-1],t);Ki(),Te=!0}}function Qi(){if(!be){if(Kt.disabled=!0,ut.className=ut.className.replace(ge.substring(1),""),k(ut,["style"]),Nt)for(var t=Qt;t--;)Q&&E(pt[t]),E(pt[Jt-t-1]);if(ot&&Q||k(ct,["style"]),!Q)for(var e=ae,i=ae+ft;e<i;e++){var n=pt[e];k(n,["style"]),_(n,et),_(n,rt)}Ki(),be=!0}}function Ji(){var t=Zi();bt.innerHTML!==t&&(bt.innerHTML=t)}function Zi(){var t=tn(),e=t[0]+1,i=t[1]+1;return e===i?e+"":e+" to "+i}function tn(t){null==t&&(t=Tn());var e,i,n,r=ae;if(Pt||Ct?(xt||kt)&&(i=-(parseFloat(t)+Ct),n=i+It+2*Ct):xt&&(i=yt[ae],n=i+It),xt)yt.forEach((function(t,s){s<Jt&&((Pt||Ct)&&t<=i+.5&&(r=s),n-t>=.5&&(e=s))}));else{if(kt){var s=kt+Et;Pt||Ct?(r=Math.floor(i/s),e=Math.ceil(n/s-1)):e=r+Math.ceil(It/s)-1}else if(Pt||Ct){var a=At-1;if(Pt?(r-=a/2,e=ae+a/2):e=ae+a,Ct){var o=Ct*At/It;r-=o,e+=o}r=Math.floor(r),e=Math.ceil(e)}else e=r+At-1;r=Math.max(r,0),e=Math.min(e,Jt-1)}return[r,e]}function en(){Yt&&!ve&&sn.apply(null,tn()).forEach((function(t){if(!v(t,Be)){var e={};e[q]=function(t){t.stopPropagation()},R(t,e),R(t,Fe),t.src=T(t,"data-src");var i=T(t,"data-srcset");i&&(t.srcset=i),b(t,"loading")}}))}function nn(t){b(t,"loaded"),rn(t)}function rn(t){b(t,"tns-complete"),_(t,"loading"),N(t,Fe)}function sn(t,e){for(var i=[];t<=e;)g(pt[t].querySelectorAll("img"),(function(t){i.push(t)})),t++;return i}function an(){var t=sn.apply(null,tn());r((function(){on(t,hn)}))}function on(t,e){return vt?e():(t.forEach((function(e,i){v(e,Be)&&t.splice(i,1)})),t.length?void r((function(){on(t,e)})):e())}function ln(){en(),pn(),Ji(),vn(),function(){if(Ut&&(ti=Ze>=0?Ze:Ci(),Ze=-1,ti!==ei)){var t=Ke[ei],e=Ke[ti];x(t,{tabindex:"-1","aria-label":ni+(ei+1)}),_(t,ii),x(e,{"aria-label":ni+(ti+1)+ri}),k(e,"tabindex"),b(e,ii),ei=ti}}()}function cn(){Q&&Bt&&(st.style[U]=Mt/1e3+"s")}function un(t,e){for(var i=[],n=t,r=Math.min(t+e,Jt);n<r;n++)i.push(pt[n].offsetHeight);return Math.max.apply(null,i)}function hn(){var t=Bt?un(ae,At):un(Qt,ft),e=st||ct;e.style.height!==t&&(e.style.height=t+"px")}function dn(){yt=[0];var t=ot?"left":"top",e=ot?"right":"bottom",i=pt[0].getBoundingClientRect()[t];g(pt,(function(n,r){r&&yt.push(n.getBoundingClientRect()[t]-i),r===Jt-1&&yt.push(n.getBoundingClientRect()[e]-i)}))}function pn(){var t=tn(),e=t[0],i=t[1];g(pt,(function(t,n){n>=e&&n<=i?w(t,"aria-hidden")&&(k(t,["aria-hidden","tabindex"]),b(t,Ne)):w(t,"aria-hidden")||(x(t,{"aria-hidden":"true",tabindex:"-1"}),_(t,Ne))}))}function fn(t){return t.nodeName.toLowerCase()}function mn(t){return"button"===fn(t)}function gn(t){return"true"===t.getAttribute("aria-disabled")}function yn(t,e,i){t?e.disabled=i:e.setAttribute("aria-disabled",i.toString())}function vn(){if(Ft&&!Rt&&!Nt){var t=Ue?qe.disabled:gn(qe),e=je?We.disabled:gn(We),i=ae<=le,n=!Rt&&ae>=ce;i&&!t&&yn(Ue,qe,!0),!i&&t&&yn(Ue,qe,!1),n&&!e&&yn(je,We,!0),!n&&e&&yn(je,We,!1)}}function bn(t,e){U&&(t.style[U]=e)}function _n(t){return null==t&&(t=ae),xt?(It-(Ct?Et:0)-(yt[t+1]-yt[t]-Et))/2:kt?(It-kt)/2:(At-1)/2}function wn(){var t=It+(Ct?Et:0)-(kt?(kt+Et)*Jt:yt[Jt]);return Pt&&!Nt&&(t=kt?-(kt+Et)*(Jt-1)-_n():_n(Jt-1)-yt[Jt-1]),t>0&&(t=0),t}function Tn(t){var e;if(null==t&&(t=ae),ot&&!xt)if(kt)e=-(kt+Et)*t,Pt&&(e+=_n());else{var i=F?Jt:At;Pt&&(t-=_n()),e=100*-t/i}else e=-yt[t],Pt&&xt&&(e+=_n());return Zt&&(e=Math.max(e,te)),e+(!ot||xt||kt?"px":"%")}function Sn(t){bn(ut,"0s"),xn(t)}function xn(t){null==t&&(t=Tn()),ut.style[ie]=ne+t+re}function kn(t,e,i,n){var r=t+At;Nt||(r=Math.min(r,Jt));for(var s=t;s<r;s++){var a=pt[s];n||(a.style.left=100*(s-ae)/At+"%"),nt&&j&&(a.style[j]=a.style[H]=nt*(s-t)/1e3+"s"),_(a,e),b(a,i),n&&Xt.push(a)}}function Cn(t,e){ee&&_i(),(ae!==oe||e)&&(me.emit("indexChanged",Yn()),me.emit("transitionStart",Yn()),Bt&&an(),ai&&t&&["click","keydown"].indexOf(t.type)>=0&&Rn(),pe=!0,wi())}function En(t){return t.toLowerCase().replace(/-/g,"")}function In(t){if(Q||pe){if(me.emit("transitionEnd",Yn(t)),!Q&&Xt.length>0)for(var e=0;e<Xt.length;e++){var i=Xt[e];i.style.left="",H&&j&&(i.style[H]="",i.style[j]=""),_(i,it),b(i,rt)}if(!t||!Q&&t.target.parentNode===ut||t.target===ut&&En(t.propertyName)===En(ie)){if(!ee){var n=ae;_i(),ae!==n&&(me.emit("indexChanged",Yn()),Sn())}"inner"===X&&me.emit("innerLoaded",Yn()),pe=!1,oe=ae}}}function Pn(t,e){if(!we)if("prev"===t)An(e,-1);else if("next"===t)An(e,1);else{if(pe){if(ue)return;In()}var i=ki(),n=0;if("first"===t?n=-i:"last"===t?n=Q?ft-At-i:ft-1-i:("number"!=typeof t&&(t=parseInt(t)),isNaN(t)||(e||(t=Math.max(0,Math.min(ft-1,t))),n=t-i)),!Q&&n&&Math.abs(n)<At){var r=n>0?1:-1;n+=ae+n-ft>=le?ft*r:2*ft*r*-1}ae+=n,Q&&Nt&&(ae<le&&(ae+=ft),ae>ce&&(ae-=ft)),ki(ae)!==ki(oe)&&Cn(e)}}function An(t,e){if(pe){if(ue)return;In()}var i;if(!e){for(var n=$n(t=Fn(t));n!==Ve&&[qe,We].indexOf(n)<0;)n=n.parentNode;var r=[qe,We].indexOf(n);r>=0&&(i=!0,e=0===r?-1:1)}if(Rt){if(ae===le&&-1===e)return void Pn("last",t);if(ae===ce&&1===e)return void Pn("first",t)}e&&(ae+=Lt*e,xt&&(ae=Math.floor(ae)),Cn(i||t&&"keydown"===t.type?t:null))}function Ln(){si=setInterval((function(){An(null,ui)}),qt),ai=!0}function On(){clearInterval(si),ai=!1}function Dn(t,e){x(hi,{"data-action":t}),hi.innerHTML=pi[0]+t+pi[1]+e}function Mn(){Ln(),hi&&Dn("stop",Wt[1])}function Rn(){On(),hi&&Dn("start",Wt[0])}function Nn(){ai?(Rn(),li=!0):(Mn(),li=!1)}function Bn(t){t.focus()}function Fn(t){return Un(t=t||i.event)?t.changedTouches[0]:t}function $n(t){return t.target||i.event.srcElement}function Un(t){return t.type.indexOf("touch")>=0}function jn(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Vn(){return s=yi.y-gi.y,a=yi.x-gi.x,e=Math.atan2(s,a)*(180/Math.PI),i=he,n=!1,(r=Math.abs(90-Math.abs(e)))>=90-i?n="horizontal":r<=i&&(n="vertical"),n===t.axis;var e,i,n,r,s,a}function Hn(t){if(pe){if(ue)return;In()}Ht&&ai&&On(),vi=!0,mi&&(a(mi),mi=null);var e=Fn(t);me.emit(Un(t)?"touchStart":"dragStart",Yn(t)),!Un(t)&&["img","a"].indexOf(fn($n(t)))>=0&&jn(t),yi.x=gi.x=e.clientX,yi.y=gi.y=e.clientY,Q&&(fi=parseFloat(ut.style[ie].replace(ne,"")),bn(ut,"0s"))}function qn(t){if(vi){var e=Fn(t);yi.x=e.clientX,yi.y=e.clientY,Q?mi||(mi=r((function(){!function t(e){if(de){if(a(mi),vi&&(mi=r((function(){t(e)}))),"?"===de&&(de=Vn()),de){!$e&&Un(e)&&($e=!0);try{e.type&&me.emit(Un(e)?"touchMove":"dragMove",Yn(e))}catch(t){}var i=fi,n=bi(yi,gi);!ot||kt||xt?(i+=n,i+="px"):(i+=F?n*At*100/((It+Et)*Jt):100*n/(It+Et),i+="%"),ut.style[ie]=ne+i+re}}else vi=!1}(t)}))):("?"===de&&(de=Vn()),de&&($e=!0)),$e&&t.preventDefault()}}function Wn(e){if(vi){mi&&(a(mi),mi=null),Q&&bn(ut,""),vi=!1;var i=Fn(e);yi.x=i.clientX,yi.y=i.clientY;var n=bi(yi,gi);if(Math.abs(n)){if(!Un(e)){var s=$n(e);R(s,{click:function t(e){jn(e),N(s,{click:t})}})}Q?mi=r((function(){if(ot&&!xt){var t=-n*At/(It+Et);t=n>0?Math.floor(t):Math.ceil(t),ae+=t}else{var i=-(fi+n);if(i<=0)ae=le;else if(i>=yt[Jt-1])ae=ce;else for(var r=0;r<Jt&&i>=yt[r];)ae=r,i>yt[r]&&n<0&&(ae+=1),r++}Cn(e,n),me.emit(Un(e)?"touchEnd":"dragEnd",Yn(e))})):de&&An(e,n>0?-1:1)}}"auto"===t.preventScrollOnTouch&&($e=!1),he&&(de="?"),Ht&&!ai&&Ln()}function zn(){(st||ct).style.height=yt[ae+At]-yt[ae]+"px"}function Gn(){var t=kt?(kt+Et)*ft/It:ft/At;return Math.min(Math.ceil(t),ft)}function Kn(){if(Ut&&!Oe&&Qe!==Je){var t=Je,e=Qe,i=I;for(Je>Qe&&(t=Qe,e=Je,i=E);t<e;)i(Ke[t]),t++;Je=Qe}}function Yn(t){return{container:ut,slideItems:pt,navContainer:Ye,navItems:Ke,controlsContainer:Ve,hasControls:Ae,prevButton:qe,nextButton:We,items:At,slideBy:Lt,cloneCount:Qt,slideCount:ft,slideCountNew:Jt,index:ae,indexCached:oe,displayIndex:Si(),navCurrentIndex:ti,navCurrentIndexCached:ei,pages:Qe,pagesCached:Je,sheet:Kt,isOn:gt,event:t||{}}}z&&console.warn("No slides found in",t.container)}},function(t,e){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})},function(t,e){Object.keys||(Object.keys=function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e})},function(t,e,i){"use strict";var n=i(0),r={eventsList:["indexChanged","transitionStart","transitionEnd","newBreakpointStart","newBreakpointEnd","touchStart","touchMove","touchEnd","dragStart","dragMove","dragEnd"],props:{mode:{type:[String],default:"carousel"},autoInit:{type:[Boolean],default:!0},axis:{type:[String],validator:function(t){return"horizontal"===t||"vertical"===t}},items:{type:[String,Number],default:1},gutter:{type:[String,Number],default:0},edgePadding:{type:[String,Number],default:0},fixedWidth:{type:[String,Boolean,Number],default:!1},viewportMax:{type:[String,Boolean,Number],default:!1},swipeAngle:{type:[Boolean,Number],default:15},slideBy:{type:[String,Number],default:1},controls:{type:[String,Boolean],default:!0},controlsPosition:{type:[String],validator:function(t){return"top"===t||"bottom"===t},default:"top"},controlsText:{type:[Array],default:function(){return["prev","next"]}},controlsContainer:{type:[Boolean,Node,String],default:!1},prevButton:{type:[Node,String,Boolean],default:!1},nextButton:{type:[Node,String,Boolean],default:!1},nav:{type:[Boolean],default:!0},navPosition:{type:[String],default:"top"},navContainer:{type:[Boolean,Node,String],default:!1},navAsThumbnails:{type:[Boolean],default:!1},arrowKeys:{type:[Boolean],default:!1},speed:{type:[String,Number],default:300},autoplay:{type:[Boolean],default:!1},autoplayTimeout:{type:[Number],default:5e3},autoplayDirection:{type:[String],default:"forward",validator:function(t){return"forward"===t||"backward"===t}},autoplayText:{type:[Array],default:function(){return["start","stop"]}},autoplayHoverPause:{type:[Boolean],default:!1},autoplayButton:{type:[Boolean,Node,String],default:!1},autoplayButtonOutput:{type:[Boolean],default:!0},autoplayResetOnVisibility:{type:[Boolean],default:!0},animateIn:{type:[String],default:"tns-fadeIn"},animateOut:{type:[String],default:"tns-fadeOut"},animateNormal:{type:[String],default:"tns-normal"},animateDelay:{type:[String,Number,Boolean],default:!1},loop:{type:[Boolean],default:!0},rewind:{type:[Boolean],default:!1},autoHeight:{type:[Boolean],default:!1},responsive:{type:[Boolean,Object],default:!1},lazyload:{type:[Boolean],default:!1},touch:{type:[Boolean],default:!0},mouseDrag:{type:[Boolean],default:!1},nested:{type:[String,Boolean],default:!1,validator:function(t){return"inner"===t||"outer"===t||!1===t}},freezable:{type:[Boolean],default:!0},disable:{type:[Boolean],default:!1},startIndex:{type:[Number],default:0},onInit:{type:[Function,Boolean],default:!1},center:{type:Boolean,default:!1},lazyLoadSelector:{type:String,default:".tns-lazy-img"},preventActionWhenRunning:{type:Boolean,default:!1},autoWidth:{type:Boolean,default:!1},preventScrollOnTouch:{type:[String,Boolean],default:!1,validator:function(t){return"auto"===t||"force"===t||!1===t}},useLocalStorage:{type:[Boolean],default:!0}},mounted:function(){this.autoInit&&this.init()},beforeDestroy:function(){this.slider&&this.slider.destroy()},methods:{$_vueTinySlider_subscribeTo:function(t){var e=this;this.slider.events.on(t,(function(i){e.$emit(t,i)}))},$_vueTinySlider_subscribeToAll:function(){this.$options.eventsList.forEach(this.$_vueTinySlider_subscribeTo)},goTo:function(t){this.slider.goTo(t)},rebuild:function(){this.slider=this.slider.rebuild(),this.$emit("rebuild")},getInfo:function(){this.$emit("getInfo",this.slider.getInfo(),this.slider)},destroy:function(){this.slider.destroy()},init:function(){var t={container:this.$el,axis:this.axis,items:parseInt(this.items),mode:this.mode,gutter:this.gutter,edgePadding:this.edgePadding,fixedWidth:this.fixedWidth?parseInt(this.fixedWidth,10):this.fixedWidth,viewportMax:this.viewportMax,slideBy:this.slideBy,controls:this.controls,controlsPosition:this.controlsPosition,controlsText:this.controlsText,controlsContainer:this.controlsContainer,prevButton:this.prevButton,nextButton:this.nextButton,nav:this.nav,navPosition:this.navPosition,navContainer:this.navContainer,navAsThumbnails:this.navAsThumbnails,arrowKeys:this.arrowKeys,speed:this.speed,autoplay:this.autoplay,autoplayTimeout:this.autoplayTimeout,autoplayDirection:this.autoplayDirection,autoplayText:this.autoplayText,autoplayHoverPause:this.autoplayHoverPause,autoplayButton:this.autoplayButton,autoplayButtonOutput:this.autoplayButtonOutput,autoplayResetOnVisibility:this.autoplayResetOnVisibility,animateIn:this.animateIn,animateOut:this.animateOut,animateNormal:this.animateNormal,animateDelay:this.animateDelay,loop:this.loop,rewind:this.rewind,autoHeight:this.autoHeight,responsive:this.responsive,lazyload:this.lazyload,touch:this.touch,mouseDrag:this.mouseDrag,nested:this.nested,freezable:this.freezable,disable:this.disable,onInit:this.onInit,swipeAngle:this.swipeAngle,startIndex:this.startIndex,center:this.center,lazyLoadSelector:this.lazyLoadSelector,preventActionWhenRunning:this.preventActionWhenRunning,preventScrollOnTouch:this.preventScrollOnTouch,autoWidth:this.autoWidth,useLocalStorage:this.useLocalStorage};!function(t){for(var e in t)t.hasOwnProperty(e)&&void 0===t[e]&&delete t[e]}(t),this.slider=(0,n.tns)(t),this.$emit("init"),this.$_vueTinySlider_subscribeToAll()}},render:function(t){return t("div",this.$slots.default)}};t.exports=r}])},86430:(t,e,i)=>{"use strict";var n=i(94029),r=i(63083),s=i(21924),a=i(27296),o=s("Object.prototype.toString"),l=i(96410)(),c="undefined"==typeof globalThis?i.g:globalThis,u=r(),h=s("String.prototype.slice"),d={},p=Object.getPrototypeOf;l&&a&&p&&n(u,(function(t){if("function"==typeof c[t]){var e=new c[t];if(Symbol.toStringTag in e){var i=p(e),n=a(i,Symbol.toStringTag);if(!n){var r=p(i);n=a(r,Symbol.toStringTag)}d[t]=n.get}}}));var f=i(85692);t.exports=function(t){return!!f(t)&&(l&&Symbol.toStringTag in t?function(t){var e=!1;return n(d,(function(i,n){if(!e)try{var r=i.call(t);r===n&&(e=r)}catch(t){}})),e}(t):h(o(t),8,-1))}},42741:(t,e,i)=>{"use strict";t.exports=i.p+"imgs/logoColor.png"},85275:(t,e,i)=>{"use strict";t.exports=i.p+"imgs/yt_logo_mono_dark.png"},10651:t=>{"use strict";t.exports={}},25893:()=>{},10434:t=>{function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},63083:(t,e,i)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],r="undefined"==typeof globalThis?i.g:globalThis;t.exports=function(){for(var t=[],e=0;e<n.length;e++)"function"==typeof r[n[e]]&&(t[t.length]=n[e]);return t}},66419:function(t,e,i){t.exports=function(){var t="1.13.1",e="object"==typeof self&&self.self===self&&self||"object"==typeof i.g&&i.g.global===i.g&&i.g||Function("return this")()||{},n=Array.prototype,r=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,a=n.push,o=n.slice,l=r.toString,c=r.hasOwnProperty,u="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,d=Array.isArray,p=Object.keys,f=Object.create,m=u&&ArrayBuffer.isView,g=isNaN,y=isFinite,v=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_=Math.pow(2,53)-1;function w(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;r<i;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=n,t.apply(this,s)}}function T(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function S(t){return void 0===t}function x(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)}function k(t){var e="[object "+t+"]";return function(t){return l.call(t)===e}}var C=k("String"),E=k("Number"),I=k("Date"),P=k("RegExp"),A=k("Error"),L=k("Symbol"),O=k("ArrayBuffer"),D=k("Function"),M=e.document&&e.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof M&&(D=function(t){return"function"==typeof t||!1});var R=D,N=k("Object"),B=h&&N(new DataView(new ArrayBuffer(8))),F="undefined"!=typeof Map&&N(new Map),$=k("DataView"),U=B?function(t){return null!=t&&R(t.getInt8)&&O(t.buffer)}:$,j=d||k("Array");function V(t,e){return null!=t&&c.call(t,e)}var H=k("Arguments");!function(){H(arguments)||(H=function(t){return V(t,"callee")})}();var q=H;function W(t){return E(t)&&g(t)}function z(t){return function(){return t}}function G(t){return function(e){var i=t(e);return"number"==typeof i&&i>=0&&i<=_}}function K(t){return function(e){return null==e?void 0:e[t]}}var Y=K("byteLength"),X=G(Y),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,J=u?function(t){return m?m(t)&&!U(t):X(t)&&Q.test(l.call(t))}:z(!1),Z=K("length");function tt(t,e){e=function(t){for(var e={},i=t.length,n=0;n<i;++n)e[t[n]]=!0;return{contains:function(t){return e[t]},push:function(i){return e[i]=!0,t.push(i)}}}(e);var i=b.length,n=t.constructor,s=R(n)&&n.prototype||r,a="constructor";for(V(t,a)&&!e.contains(a)&&e.push(a);i--;)(a=b[i])in t&&t[a]!==s[a]&&!e.contains(a)&&e.push(a)}function et(t){if(!T(t))return[];if(p)return p(t);var e=[];for(var i in t)V(t,i)&&e.push(i);return v&&tt(t,e),e}function it(t,e){var i=et(e),n=i.length;if(null==t)return!n;for(var r=Object(t),s=0;s<n;s++){var a=i[s];if(e[a]!==r[a]||!(a in r))return!1}return!0}function nt(t){return t instanceof nt?t:this instanceof nt?void(this._wrapped=t):new nt(t)}function rt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Y(t))}nt.VERSION=t,nt.prototype.value=function(){return this._wrapped},nt.prototype.valueOf=nt.prototype.toJSON=nt.prototype.value,nt.prototype.toString=function(){return String(this._wrapped)};var st="[object DataView]";function at(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&function t(e,i,n,r){e instanceof nt&&(e=e._wrapped),i instanceof nt&&(i=i._wrapped);var a=l.call(e);if(a!==l.call(i))return!1;if(B&&"[object Object]"==a&&U(e)){if(!U(i))return!1;a=st}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+i;case"[object Number]":return+e!=+e?+i!=+i:0==+e?1/+e==1/i:+e==+i;case"[object Date]":case"[object Boolean]":return+e==+i;case"[object Symbol]":return s.valueOf.call(e)===s.valueOf.call(i);case"[object ArrayBuffer]":case st:return t(rt(e),rt(i),n,r)}var o="[object Array]"===a;if(!o&&J(e)){if(Y(e)!==Y(i))return!1;if(e.buffer===i.buffer&&e.byteOffset===i.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof i)return!1;var c=e.constructor,u=i.constructor;if(c!==u&&!(R(c)&&c instanceof c&&R(u)&&u instanceof u)&&"constructor"in e&&"constructor"in i)return!1}r=r||[];for(var h=(n=n||[]).length;h--;)if(n[h]===e)return r[h]===i;if(n.push(e),r.push(i),o){if((h=e.length)!==i.length)return!1;for(;h--;)if(!at(e[h],i[h],n,r))return!1}else{var d,p=et(e);if(h=p.length,et(i).length!==h)return!1;for(;h--;)if(!V(i,d=p[h])||!at(e[d],i[d],n,r))return!1}return n.pop(),r.pop(),!0}(t,e,i,n)}function ot(t){if(!T(t))return[];var e=[];for(var i in t)e.push(i);return v&&tt(t,e),e}function lt(t){var e=Z(t);return function(i){if(null==i)return!1;var n=ot(i);if(Z(n))return!1;for(var r=0;r<e;r++)if(!R(i[t[r]]))return!1;return t!==pt||!R(i[ct])}}var ct="forEach",ut=["clear","delete"],ht=["get","has","set"],dt=ut.concat(ct,ht),pt=ut.concat(ht),ft=["add"].concat(ut,ct,"has"),mt=F?lt(dt):k("Map"),gt=F?lt(pt):k("WeakMap"),yt=F?lt(ft):k("Set"),vt=k("WeakSet");function bt(t){for(var e=et(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n}function _t(t){for(var e={},i=et(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e}function wt(t){var e=[];for(var i in t)R(t[i])&&e.push(i);return e.sort()}function Tt(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var r=1;r<n;r++)for(var s=arguments[r],a=t(s),o=a.length,l=0;l<o;l++){var c=a[l];e&&void 0!==i[c]||(i[c]=s[c])}return i}}var St=Tt(ot),xt=Tt(et),kt=Tt(ot,!0);function Ct(t){if(!T(t))return{};if(f)return f(t);var e=function(){};e.prototype=t;var i=new e;return e.prototype=null,i}function Et(t){return T(t)?j(t)?t.slice():St({},t):t}function It(t){return j(t)?t:[t]}function Pt(t){return nt.toPath(t)}function At(t,e){for(var i=e.length,n=0;n<i;n++){if(null==t)return;t=t[e[n]]}return i?t:void 0}function Lt(t,e,i){var n=At(t,Pt(e));return S(n)?i:n}function Ot(t){return t}function Dt(t){return t=xt({},t),function(e){return it(e,t)}}function Mt(t){return t=Pt(t),function(e){return At(e,t)}}function Rt(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}}function Nt(t,e,i){return null==t?Ot:R(t)?Rt(t,e,i):T(t)&&!j(t)?Dt(t):Mt(t)}function Bt(t,e){return Nt(t,e,1/0)}function Ft(t,e,i){return nt.iteratee!==Bt?nt.iteratee(t,e):Nt(t,e,i)}function $t(){}function Ut(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}nt.toPath=It,nt.iteratee=Bt;var jt=Date.now||function(){return(new Date).getTime()};function Vt(t){var e=function(e){return t[e]},i="(?:"+et(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}}var Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},qt=Vt(Ht),Wt=Vt(_t(Ht)),zt=nt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Gt=/(.)^/,Kt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Yt=/\\|'|\r|\n|\u2028|\u2029/g;function Xt(t){return"\\"+Kt[t]}var Qt=/^\s*(\w|\$)+\s*$/,Jt=0;function Zt(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var s=Ct(t.prototype),a=t.apply(s,r);return T(a)?a:s}var te=w((function(t,e){var i=te.placeholder,n=function(){for(var r=0,s=e.length,a=Array(s),o=0;o<s;o++)a[o]=e[o]===i?arguments[r++]:e[o];for(;r<arguments.length;)a.push(arguments[r++]);return Zt(t,n,this,this,a)};return n}));te.placeholder=nt;var ee=w((function(t,e,i){if(!R(t))throw new TypeError("Bind must be called on a function");var n=w((function(r){return Zt(t,n,e,this,i.concat(r))}));return n})),ie=G(Z);function ne(t,e,i,n){if(n=n||[],e||0===e){if(e<=0)return n.concat(t)}else e=1/0;for(var r=n.length,s=0,a=Z(t);s<a;s++){var o=t[s];if(ie(o)&&(j(o)||q(o)))if(e>1)ne(o,e-1,i,n),r=n.length;else for(var l=0,c=o.length;l<c;)n[r++]=o[l++];else i||(n[r++]=o)}return n}var re=w((function(t,e){var i=(e=ne(e,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=ee(t[n],t)}return t})),se=w((function(t,e,i){return setTimeout((function(){return t.apply(null,i)}),e)})),ae=te(se,nt,1);function oe(t){return function(){return!t.apply(this,arguments)}}function le(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}}var ce=te(le,2);function ue(t,e,i){e=Ft(e,i);for(var n,r=et(t),s=0,a=r.length;s<a;s++)if(e(t[n=r[s]],n,t))return n}function he(t){return function(e,i,n){i=Ft(i,n);for(var r=Z(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(i(e[s],s,e))return s;return-1}}var de=he(1),pe=he(-1);function fe(t,e,i,n){for(var r=(i=Ft(i,n,1))(e),s=0,a=Z(t);s<a;){var o=Math.floor((s+a)/2);i(t[o])<r?s=o+1:a=o}return s}function me(t,e,i){return function(n,r,s){var a=0,l=Z(n);if("number"==typeof s)t>0?a=s>=0?s:Math.max(s+l,a):l=s>=0?Math.min(s+1,l):s+l+1;else if(i&&s&&l)return n[s=i(n,r)]===r?s:-1;if(r!=r)return(s=e(o.call(n,a,l),W))>=0?s+a:-1;for(s=t>0?a:l-1;s>=0&&s<l;s+=t)if(n[s]===r)return s;return-1}}var ge=me(1,de,fe),ye=me(-1,pe);function ve(t,e,i){var n=(ie(t)?de:ue)(t,e,i);if(void 0!==n&&-1!==n)return t[n]}function be(t,e,i){var n,r;if(e=Rt(e,i),ie(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var s=et(t);for(n=0,r=s.length;n<r;n++)e(t[s[n]],s[n],t)}return t}function _e(t,e,i){e=Ft(e,i);for(var n=!ie(t)&&et(t),r=(n||t).length,s=Array(r),a=0;a<r;a++){var o=n?n[a]:a;s[a]=e(t[o],o,t)}return s}function we(t){var e=function(e,i,n,r){var s=!ie(e)&&et(e),a=(s||e).length,o=t>0?0:a-1;for(r||(n=e[s?s[o]:o],o+=t);o>=0&&o<a;o+=t){var l=s?s[o]:o;n=i(n,e[l],l,e)}return n};return function(t,i,n,r){var s=arguments.length>=3;return e(t,Rt(i,r,4),n,s)}}var Te=we(1),Se=we(-1);function xe(t,e,i){var n=[];return e=Ft(e,i),be(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function ke(t,e,i){e=Ft(e,i);for(var n=!ie(t)&&et(t),r=(n||t).length,s=0;s<r;s++){var a=n?n[s]:s;if(!e(t[a],a,t))return!1}return!0}function Ce(t,e,i){e=Ft(e,i);for(var n=!ie(t)&&et(t),r=(n||t).length,s=0;s<r;s++){var a=n?n[s]:s;if(e(t[a],a,t))return!0}return!1}function Ee(t,e,i,n){return ie(t)||(t=bt(t)),("number"!=typeof i||n)&&(i=0),ge(t,e,i)>=0}var Ie=w((function(t,e,i){var n,r;return R(e)?r=e:(e=Pt(e),n=e.slice(0,-1),e=e[e.length-1]),_e(t,(function(t){var s=r;if(!s){if(n&&n.length&&(t=At(t,n)),null==t)return;s=t[e]}return null==s?s:s.apply(t,i)}))}));function Pe(t,e){return _e(t,Mt(e))}function Ae(t,e,i){var n,r,s=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var o=0,l=(t=ie(t)?t:bt(t)).length;o<l;o++)null!=(n=t[o])&&n>s&&(s=n);else e=Ft(e,i),be(t,(function(t,i,n){((r=e(t,i,n))>a||r===-1/0&&s===-1/0)&&(s=t,a=r)}));return s}function Le(t,e,i){if(null==e||i)return ie(t)||(t=bt(t)),t[Ut(t.length-1)];var n=ie(t)?Et(t):bt(t),r=Z(n);e=Math.max(Math.min(e,r),0);for(var s=r-1,a=0;a<e;a++){var o=Ut(a,s),l=n[a];n[a]=n[o],n[o]=l}return n.slice(0,e)}function Oe(t,e){return function(i,n,r){var s=e?[[],[]]:{};return n=Ft(n,r),be(i,(function(e,r){var a=n(e,r,i);t(s,e,a)})),s}}var De=Oe((function(t,e,i){V(t,i)?t[i].push(e):t[i]=[e]})),Me=Oe((function(t,e,i){t[i]=e})),Re=Oe((function(t,e,i){V(t,i)?t[i]++:t[i]=1})),Ne=Oe((function(t,e,i){t[i?0:1].push(e)}),!0),Be=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Fe(t,e,i){return e in i}var $e=w((function(t,e){var i={},n=e[0];if(null==t)return i;R(n)?(e.length>1&&(n=Rt(n,e[1])),e=ot(t)):(n=Fe,e=ne(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var a=e[r],o=t[a];n(o,a,t)&&(i[a]=o)}return i})),Ue=w((function(t,e){var i,n=e[0];return R(n)?(n=oe(n),e.length>1&&(i=e[1])):(e=_e(ne(e,!1,!1),String),n=function(t,i){return!Ee(e,i)}),$e(t,n,i)}));function je(t,e,i){return o.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))}function Ve(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[0]:je(t,t.length-e)}function He(t,e,i){return o.call(t,null==e||i?1:e)}var qe=w((function(t,e){return e=ne(e,!0,!0),xe(t,(function(t){return!Ee(e,t)}))})),We=w((function(t,e){return qe(t,e)}));function ze(t,e,i,n){x(e)||(n=i,i=e,e=!1),null!=i&&(i=Ft(i,n));for(var r=[],s=[],a=0,o=Z(t);a<o;a++){var l=t[a],c=i?i(l,a,t):l;e&&!i?(a&&s===c||r.push(l),s=c):i?Ee(s,c)||(s.push(c),r.push(l)):Ee(r,l)||r.push(l)}return r}var Ge=w((function(t){return ze(ne(t,!0,!0))}));function Ke(t){for(var e=t&&Ae(t,Z).length||0,i=Array(e),n=0;n<e;n++)i[n]=Pe(t,n);return i}var Ye=w(Ke);function Xe(t,e){return t._chain?nt(e).chain():e}function Qe(t){return be(wt(t),(function(e){var i=nt[e]=t[e];nt.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),Xe(this,i.apply(nt,t))}})),nt}be(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=n[t];nt.prototype[t]=function(){var i=this._wrapped;return null!=i&&(e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0]),Xe(this,i)}})),be(["concat","join","slice"],(function(t){var e=n[t];nt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Xe(this,t)}}));var Je=Qe({__proto__:null,VERSION:t,restArguments:w,isObject:T,isNull:function(t){return null===t},isUndefined:S,isBoolean:x,isElement:function(t){return!(!t||1!==t.nodeType)},isString:C,isNumber:E,isDate:I,isRegExp:P,isError:A,isSymbol:L,isArrayBuffer:O,isDataView:U,isArray:j,isFunction:R,isArguments:q,isFinite:function(t){return!L(t)&&y(t)&&!isNaN(parseFloat(t))},isNaN:W,isTypedArray:J,isEmpty:function(t){if(null==t)return!0;var e=Z(t);return"number"==typeof e&&(j(t)||C(t)||q(t))?0===e:0===Z(et(t))},isMatch:it,isEqual:function(t,e){return at(t,e)},isMap:mt,isWeakMap:gt,isSet:yt,isWeakSet:vt,keys:et,allKeys:ot,values:bt,pairs:function(t){for(var e=et(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n},invert:_t,functions:wt,methods:wt,extend:St,extendOwn:xt,assign:xt,defaults:kt,create:function(t,e){var i=Ct(t);return e&&xt(i,e),i},clone:Et,tap:function(t,e){return e(t),t},get:Lt,has:function(t,e){for(var i=(e=Pt(e)).length,n=0;n<i;n++){var r=e[n];if(!V(t,r))return!1;t=t[r]}return!!i},mapObject:function(t,e,i){e=Ft(e,i);for(var n=et(t),r=n.length,s={},a=0;a<r;a++){var o=n[a];s[o]=e(t[o],o,t)}return s},identity:Ot,constant:z,noop:$t,toPath:It,property:Mt,propertyOf:function(t){return null==t?$t:function(e){return Lt(t,e)}},matcher:Dt,matches:Dt,times:function(t,e,i){var n=Array(Math.max(0,t));e=Rt(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n},random:Ut,now:jt,escape:qt,unescape:Wt,templateSettings:zt,template:function(t,e,i){!e&&i&&(e=i),e=kt({},e,nt.templateSettings);var n=RegExp([(e.escape||Gt).source,(e.interpolate||Gt).source,(e.evaluate||Gt).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,(function(e,i,n,a,o){return s+=t.slice(r,o).replace(Yt,Xt),r=o+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(s+="';\n"+a+"\n__p+='"),e})),s+="';\n";var a,o=e.variable;if(o){if(!Qt.test(o))throw new Error("variable is not a bare identifier: "+o)}else s="with(obj||{}){\n"+s+"}\n",o="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{a=new Function(o,"_",s)}catch(t){throw t.source=s,t}var l=function(t){return a.call(this,t,nt)};return l.source="function("+o+"){\n"+s+"}",l},result:function(t,e,i){var n=(e=Pt(e)).length;if(!n)return R(i)?i.call(t):i;for(var r=0;r<n;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=i,r=n),t=R(s)?s.call(t):s}return t},uniqueId:function(t){var e=++Jt+"";return t?t+e:e},chain:function(t){var e=nt(t);return e._chain=!0,e},iteratee:Bt,partial:te,bind:ee,bindAll:re,memoize:function(t,e){var i=function(n){var r=i.cache,s=""+(e?e.apply(this,arguments):n);return V(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i},delay:se,defer:ae,throttle:function(t,e,i){var n,r,s,a,o=0;i||(i={});var l=function(){o=!1===i.leading?0:jt(),n=null,a=t.apply(r,s),n||(r=s=null)},c=function(){var c=jt();o||!1!==i.leading||(o=c);var u=e-(c-o);return r=this,s=arguments,u<=0||u>e?(n&&(clearTimeout(n),n=null),o=c,a=t.apply(r,s),n||(r=s=null)):n||!1===i.trailing||(n=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(n),o=0,n=r=s=null},c},debounce:function(t,e,i){var n,r,s,a,o,l=function(){var c=jt()-r;e>c?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(o,s)),n||(s=o=null))},c=w((function(c){return o=this,s=c,r=jt(),n||(n=setTimeout(l,e),i&&(a=t.apply(o,s))),a}));return c.cancel=function(){clearTimeout(n),n=s=o=null},c},wrap:function(t,e){return te(e,t)},negate:oe,compose:function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:le,once:ce,findKey:ue,findIndex:de,findLastIndex:pe,sortedIndex:fe,indexOf:ge,lastIndexOf:ye,find:ve,detect:ve,findWhere:function(t,e){return ve(t,Dt(e))},each:be,forEach:be,map:_e,collect:_e,reduce:Te,foldl:Te,inject:Te,reduceRight:Se,foldr:Se,filter:xe,select:xe,reject:function(t,e,i){return xe(t,oe(Ft(e)),i)},every:ke,all:ke,some:Ce,any:Ce,contains:Ee,includes:Ee,include:Ee,invoke:Ie,pluck:Pe,where:function(t,e){return xe(t,Dt(e))},max:Ae,min:function(t,e,i){var n,r,s=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var o=0,l=(t=ie(t)?t:bt(t)).length;o<l;o++)null!=(n=t[o])&&n<s&&(s=n);else e=Ft(e,i),be(t,(function(t,i,n){((r=e(t,i,n))<a||r===1/0&&s===1/0)&&(s=t,a=r)}));return s},shuffle:function(t){return Le(t,1/0)},sample:Le,sortBy:function(t,e,i){var n=0;return e=Ft(e,i),Pe(_e(t,(function(t,i,r){return{value:t,index:n++,criteria:e(t,i,r)}})).sort((function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index})),"value")},groupBy:De,indexBy:Me,countBy:Re,partition:Ne,toArray:function(t){return t?j(t)?o.call(t):C(t)?t.match(Be):ie(t)?_e(t,Ot):bt(t):[]},size:function(t){return null==t?0:ie(t)?t.length:et(t).length},pick:$e,omit:Ue,first:Ve,head:Ve,take:Ve,initial:je,last:function(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[t.length-1]:He(t,Math.max(0,t.length-e))},rest:He,tail:He,drop:He,compact:function(t){return xe(t,Boolean)},flatten:function(t,e){return ne(t,e,!1)},without:We,uniq:ze,unique:ze,union:Ge,intersection:function(t){for(var e=[],i=arguments.length,n=0,r=Z(t);n<r;n++){var s=t[n];if(!Ee(e,s)){var a;for(a=1;a<i&&Ee(arguments[a],s);a++);a===i&&e.push(s)}}return e},difference:qe,unzip:Ke,transpose:Ke,zip:Ye,object:function(t,e){for(var i={},n=0,r=Z(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},range:function(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;s<n;s++,t+=i)r[s]=t;return r},chunk:function(t,e){if(null==e||e<1)return[];for(var i=[],n=0,r=t.length;n<r;)i.push(o.call(t,n,n+=e));return i},mixin:Qe,default:nt});return Je._=Je,Je}()},87462:(t,e,i)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},n.apply(this,arguments)}i.d(e,{Z:()=>n})},19144:t=>{"use strict";t.exports=JSON.parse('{"name":"jintr","version":"0.4.1","description":"A tiny JavaScript interpreter written in TypeScript.","main":"./dist/index.js","types":"./dist","scripts":{"test":"npx jest --verbose","build":"npx tsc","lint":"npx eslint ./src/**/*.ts","lint:fix":"npx eslint --fix ./src/**/*.ts","build:nodes-map":"node ./scripts/build-nodes-map.js","prepare":"npm run build","watch":"npx tsc --watch"},"author":"LuanRT <luan.lrt4@gmail.com> (https://github.com/LuanRT)","funding":["https://github.com/sponsors/LuanRT"],"keywords":["js","vm","typescript","javascript","interpreter"],"license":"MIT","devDependencies":{"@types/estree":"^1.0.0","@types/jest":"^28.1.7","@typescript-eslint/eslint-plugin":"^5.33.1","@typescript-eslint/parser":"^5.33.1","eslint":"^8.22.0","eslint-plugin-tsdoc":"^0.2.16","glob":"^8.0.3","jest":"^28.1.3","ts-jest":"^28.0.8","typescript":"^4.7.4"},"dependencies":{"acorn":"^8.8.0"},"bugs":{"url":"https://github.com/LuanRT/Jinter/issues"},"homepage":"https://github.com/LuanRT/Jinter#readme"}')}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{"use strict";var t=Object.freeze({}),e=Array.isArray;function n(t){return null==t}function r(t){return null!=t}function s(t){return!0===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function o(t){return"function"==typeof t}function l(t){return null!==t&&"object"==typeof t}var c=Object.prototype.toString;function u(t){return"[object Object]"===c.call(t)}function h(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return r(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||u(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function f(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var i=Object.create(null),n=t.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}m("slot,component",!0);var g=m("key,ref,slot,slot-scope,is");function y(t,e){var i=t.length;if(i){if(e===t[i-1])return void(t.length=i-1);var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var v=Object.prototype.hasOwnProperty;function b(t,e){return v.call(t,e)}function _(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}var w=/-(\w)/g,T=_((function(t){return t.replace(w,(function(t,e){return e?e.toUpperCase():""}))})),S=_((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),x=/\B([A-Z])/g,k=_((function(t){return t.replace(x,"-$1").toLowerCase()})),C=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function i(i){var n=arguments.length;return n?n>1?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i};function E(t,e){e=e||0;for(var i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}function I(t,e){for(var i in e)t[i]=e[i];return t}function P(t){for(var e={},i=0;i<t.length;i++)t[i]&&I(e,t[i]);return e}function A(t,e,i){}var L=function(t,e,i){return!1},O=function(t){return t};function D(t,e){if(t===e)return!0;var i=l(t),n=l(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var r=Array.isArray(t),s=Array.isArray(e);if(r&&s)return t.length===e.length&&t.every((function(t,i){return D(t,e[i])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||s)return!1;var a=Object.keys(t),o=Object.keys(e);return a.length===o.length&&a.every((function(i){return D(t[i],e[i])}))}catch(t){return!1}}function M(t,e){for(var i=0;i<t.length;i++)if(D(t[i],e))return i;return-1}function R(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var N="data-server-rendered",B=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],$={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:A,parsePlatformTagName:O,mustUseProp:L,async:!0,_lifecycleHooks:F};function U(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function j(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var V=new RegExp("[^".concat(/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source,".$_\\d]")),H="__proto__"in{},q="undefined"!=typeof window,W=q&&window.navigator.userAgent.toLowerCase(),z=W&&/msie|trident/.test(W),G=W&&W.indexOf("msie 9.0")>0,K=W&&W.indexOf("edge/")>0;W&&W.indexOf("android");var Y=W&&/iphone|ipad|ipod|ios/.test(W);W&&/chrome\/\d+/.test(W),W&&/phantomjs/.test(W);var X,Q=W&&W.match(/firefox\/(\d+)/),J={}.watch,Z=!1;if(q)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Z=!0}}),window.addEventListener("test-passive",null,tt)}catch(t){}var et=function(){return void 0===X&&(X=!q&&void 0!==i.g&&i.g.process&&"server"===i.g.process.env.VUE_ENV),X},it=q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function nt(t){return"function"==typeof t&&/native code/.test(t.toString())}var rt,st="undefined"!=typeof Symbol&&nt(Symbol)&&"undefined"!=typeof Reflect&&nt(Reflect.ownKeys);rt="undefined"!=typeof Set&&nt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var at=null;function ot(t){void 0===t&&(t=null),t||at&&at._scope.off(),at=t,t&&t._scope.on()}var lt=function(){function t(t,e,i,n,r,s,a,o){this.tag=t,this.data=e,this.children=i,this.text=n,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),ct=function(t){void 0===t&&(t="");var e=new lt;return e.text=t,e.isComment=!0,e};function ut(t){return new lt(void 0,void 0,void 0,String(t))}function ht(t){var e=new lt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var dt=0,pt=[],ft=function(){for(var t=0;t<pt.length;t++){var e=pt[t];e.subs=e.subs.filter((function(t){return t})),e._pending=!1}pt.length=0},mt=function(){function t(){this._pending=!1,this.id=dt++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,pt.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){for(var e=this.subs.filter((function(t){return t})),i=0,n=e.length;i<n;i++)e[i].update()},t}();mt.target=null;var gt=[];function yt(t){gt.push(t),mt.target=t}function vt(){gt.pop(),mt.target=gt[gt.length-1]}var bt=Array.prototype,_t=Object.create(bt);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=bt[t];j(_t,t,(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r,s=e.apply(this,i),a=this.__ob__;switch(t){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&a.observeArray(r),a.dep.notify(),s}))}));var wt=Object.getOwnPropertyNames(_t),Tt={},St=!0;function xt(t){St=t}var kt={notify:A,depend:A,addSub:A,removeSub:A},Ct=function(){function t(t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),this.value=t,this.shallow=i,this.mock=n,this.dep=n?kt:new mt,this.vmCount=0,j(t,"__ob__",this),e(t)){if(!n)if(H)t.__proto__=_t;else for(var r=0,s=wt.length;r<s;r++)j(t,o=wt[r],_t[o]);i||this.observeArray(t)}else{var a=Object.keys(t);for(r=0;r<a.length;r++){var o;It(t,o=a[r],Tt,void 0,i,n)}}}return t.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)Et(t[e],!1,this.mock)},t}();function Et(t,i,n){return t&&b(t,"__ob__")&&t.__ob__ instanceof Ct?t.__ob__:!St||!n&&et()||!e(t)&&!u(t)||!Object.isExtensible(t)||t.__v_skip||Mt(t)||t instanceof lt?void 0:new Ct(t,i,n)}function It(t,i,n,r,s,a){var o=new mt,l=Object.getOwnPropertyDescriptor(t,i);if(!l||!1!==l.configurable){var c=l&&l.get,u=l&&l.set;c&&!u||n!==Tt&&2!==arguments.length||(n=t[i]);var h=!s&&Et(n,!1,a);return Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){var i=c?c.call(t):n;return mt.target&&(o.depend(),h&&(h.dep.depend(),e(i)&&Lt(i))),Mt(i)&&!s?i.value:i},set:function(e){var i,r,l=c?c.call(t):n;if((i=l)===(r=e)?0===i&&1/i!=1/r:i==i||r==r){if(u)u.call(t,e);else{if(c)return;if(!s&&Mt(l)&&!Mt(e))return void(l.value=e);n=e}h=!s&&Et(e,!1,a),o.notify()}}}),o}}function Pt(t,i,n){if(!Dt(t)){var r=t.__ob__;return e(t)&&h(i)?(t.length=Math.max(t.length,i),t.splice(i,1,n),r&&!r.shallow&&r.mock&&Et(n,!1,!0),n):i in t&&!(i in Object.prototype)?(t[i]=n,n):t._isVue||r&&r.vmCount?n:r?(It(r.value,i,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(t[i]=n,n)}}function At(t,i){if(e(t)&&h(i))t.splice(i,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||Dt(t)||b(t,i)&&(delete t[i],n&&n.dep.notify())}}function Lt(t){for(var i=void 0,n=0,r=t.length;n<r;n++)(i=t[n])&&i.__ob__&&i.__ob__.dep.depend(),e(i)&&Lt(i)}function Ot(t){return function(t,e){Dt(t)||Et(t,e,et())}(t,!0),j(t,"__v_isShallow",!0),t}function Dt(t){return!(!t||!t.__v_isReadonly)}function Mt(t){return!(!t||!0!==t.__v_isRef)}function Rt(t,e,i){Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){var t=e[i];if(Mt(t))return t.value;var n=t&&t.__ob__;return n&&n.dep.depend(),t},set:function(t){var n=e[i];Mt(n)&&!Mt(t)?n.value=t:e[i]=t}})}var Nt,Bt="watcher";"".concat(Bt," callback"),"".concat(Bt," getter"),"".concat(Bt," cleanup");var Ft=function(){function t(t){void 0===t&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Nt,!t&&Nt&&(this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=Nt;try{return Nt=this,t()}finally{Nt=e}}},t.prototype.on=function(){Nt=this},t.prototype.off=function(){Nt=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,i=void 0;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].teardown();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){var n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this.active=!1}},t}();var $t=_((function(t){var e="&"===t.charAt(0),i="~"===(t=e?t.slice(1):t).charAt(0),n="!"===(t=i?t.slice(1):t).charAt(0);return{name:t=n?t.slice(1):t,once:i,capture:n,passive:e}}));function Ut(t,i){function n(){var t=n.fns;if(!e(t))return ke(t,null,arguments,i,"v-on handler");for(var r=t.slice(),s=0;s<r.length;s++)ke(r[s],null,arguments,i,"v-on handler")}return n.fns=t,n}function jt(t,e,i,r,a,o){var l,c,u,h;for(l in t)c=t[l],u=e[l],h=$t(l),n(c)||(n(u)?(n(c.fns)&&(c=t[l]=Ut(c,o)),s(h.once)&&(c=t[l]=a(h.name,c,h.capture)),i(h.name,c,h.capture,h.passive,h.params)):c!==u&&(u.fns=c,t[l]=u));for(l in e)n(t[l])&&r((h=$t(l)).name,e[l],h.capture)}function Vt(t,e,i){var a;t instanceof lt&&(t=t.data.hook||(t.data.hook={}));var o=t[e];function l(){i.apply(this,arguments),y(a.fns,l)}n(o)?a=Ut([l]):r(o.fns)&&s(o.merged)?(a=o).fns.push(l):a=Ut([o,l]),a.merged=!0,t[e]=a}function Ht(t,e,i,n,s){if(r(e)){if(b(e,i))return t[i]=e[i],s||delete e[i],!0;if(b(e,n))return t[i]=e[n],s||delete e[n],!0}return!1}function qt(t){return a(t)?[ut(t)]:e(t)?zt(t):void 0}function Wt(t){return r(t)&&r(t.text)&&!1===t.isComment}function zt(t,i){var o,l,c,u,h=[];for(o=0;o<t.length;o++)n(l=t[o])||"boolean"==typeof l||(u=h[c=h.length-1],e(l)?l.length>0&&(Wt((l=zt(l,"".concat(i||"","_").concat(o)))[0])&&Wt(u)&&(h[c]=ut(u.text+l[0].text),l.shift()),h.push.apply(h,l)):a(l)?Wt(u)?h[c]=ut(u.text+l):""!==l&&h.push(ut(l)):Wt(l)&&Wt(u)?h[c]=ut(u.text+l.text):(s(t._isVList)&&r(l.tag)&&n(l.key)&&r(i)&&(l.key="__vlist".concat(i,"_").concat(o,"__")),h.push(l)));return h}function Gt(t,i){var n,s,a,o,c=null;if(e(t)||"string"==typeof t)for(c=new Array(t.length),n=0,s=t.length;n<s;n++)c[n]=i(t[n],n);else if("number"==typeof t)for(c=new Array(t),n=0;n<t;n++)c[n]=i(n+1,n);else if(l(t))if(st&&t[Symbol.iterator]){c=[];for(var u=t[Symbol.iterator](),h=u.next();!h.done;)c.push(i(h.value,c.length)),h=u.next()}else for(a=Object.keys(t),c=new Array(a.length),n=0,s=a.length;n<s;n++)o=a[n],c[n]=i(t[o],o,n);return r(c)||(c=[]),c._isVList=!0,c}function Kt(t,e,i,n){var r,s=this.$scopedSlots[t];s?(i=i||{},n&&(i=I(I({},n),i)),r=s(i)||(o(e)?e():e)):r=this.$slots[t]||(o(e)?e():e);var a=i&&i.slot;return a?this.$createElement("template",{slot:a},r):r}function Yt(t){return Pi(this.$options,"filters",t)||O}function Xt(t,i){return e(t)?-1===t.indexOf(i):t!==i}function Qt(t,e,i,n,r){var s=$.keyCodes[e]||i;return r&&n&&!$.keyCodes[e]?Xt(r,n):s?Xt(s,t):n?k(n)!==e:void 0===t}function Jt(t,i,n,r,s){if(n&&l(n)){e(n)&&(n=P(n));var a=void 0,o=function(e){if("class"===e||"style"===e||g(e))a=t;else{var o=t.attrs&&t.attrs.type;a=r||$.mustUseProp(i,o,e)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=T(e),c=k(e);l in a||c in a||(a[e]=n[e],s&&((t.on||(t.on={}))["update:".concat(e)]=function(t){n[e]=t}))};for(var c in n)o(c)}return t}function Zt(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e||ee(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),"__static__".concat(t),!1),n}function te(t,e,i){return ee(t,"__once__".concat(e).concat(i?"_".concat(i):""),!0),t}function ee(t,i,n){if(e(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&ie(t[r],"".concat(i,"_").concat(r),n);else ie(t,i,n)}function ie(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function ne(t,e){if(e&&u(e)){var i=t.on=t.on?I({},t.on):{};for(var n in e){var r=i[n],s=e[n];i[n]=r?[].concat(r,s):s}}return t}function re(t,i,n,r){i=i||{$stable:!n};for(var s=0;s<t.length;s++){var a=t[s];e(a)?re(a,i,n):a&&(a.proxy&&(a.fn.proxy=!0),i[a.key]=a.fn)}return r&&(i.$key=r),i}function se(t,e){for(var i=0;i<e.length;i+=2){var n=e[i];"string"==typeof n&&n&&(t[e[i]]=e[i+1])}return t}function ae(t,e){return"string"==typeof t?e+t:t}function oe(t){t._o=te,t._n=f,t._s=p,t._l=Gt,t._t=Kt,t._q=D,t._i=M,t._m=Zt,t._f=Yt,t._k=Qt,t._b=Jt,t._v=ut,t._e=ct,t._u=re,t._g=ne,t._d=se,t._p=ae}function le(t,e){if(!t||!t.length)return{};for(var i={},n=0,r=t.length;n<r;n++){var s=t[n],a=s.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,s.context!==e&&s.fnContext!==e||!a||null==a.slot)(i.default||(i.default=[])).push(s);else{var o=a.slot,l=i[o]||(i[o]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var c in i)i[c].every(ce)&&delete i[c];return i}function ce(t){return t.isComment&&!t.asyncFactory||" "===t.text}function ue(t){return t.isComment&&t.asyncFactory}function he(e,i,n,r){var s,a=Object.keys(n).length>0,o=i?!!i.$stable:!a,l=i&&i.$key;if(i){if(i._normalized)return i._normalized;if(o&&r&&r!==t&&l===r.$key&&!a&&!r.$hasNormal)return r;for(var c in s={},i)i[c]&&"$"!==c[0]&&(s[c]=de(e,n,c,i[c]))}else s={};for(var u in n)u in s||(s[u]=pe(n,u));return i&&Object.isExtensible(i)&&(i._normalized=s),j(s,"$stable",o),j(s,"$key",l),j(s,"$hasNormal",a),s}function de(t,i,n,r){var s=function(){var i=at;ot(t);var n=arguments.length?r.apply(null,arguments):r({}),s=(n=n&&"object"==typeof n&&!e(n)?[n]:qt(n))&&n[0];return ot(i),n&&(!s||1===n.length&&s.isComment&&!ue(s))?void 0:n};return r.proxy&&Object.defineProperty(i,n,{get:s,enumerable:!0,configurable:!0}),s}function pe(t,e){return function(){return t[e]}}function fe(t,e,i,n,r){var s=!1;for(var a in e)a in t?e[a]!==i[a]&&(s=!0):(s=!0,me(t,a,n,r));for(var a in t)a in e||(s=!0,delete t[a]);return s}function me(t,e,i,n){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return i[n][e]}})}function ge(t,e){for(var i in e)t[i]=e[i];for(var i in t)i in e||delete t[i]}var ye=null;function ve(t,e){return(t.__esModule||st&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function be(t){if(e(t))for(var i=0;i<t.length;i++){var n=t[i];if(r(n)&&(r(n.componentOptions)||ue(n)))return n}}var _e=1,we=2;function Te(t,i,n,c,u,h){return(e(n)||a(n))&&(u=c,c=n,n=void 0),s(h)&&(u=we),function(t,i,n,s,a){if(r(n)&&r(n.__ob__))return ct();if(r(n)&&r(n.is)&&(i=n.is),!i)return ct();var c,u;if(e(s)&&o(s[0])&&((n=n||{}).scopedSlots={default:s[0]},s.length=0),a===we?s=qt(s):a===_e&&(s=function(t){for(var i=0;i<t.length;i++)if(e(t[i]))return Array.prototype.concat.apply([],t);return t}(s)),"string"==typeof i){var h=void 0;u=t.$vnode&&t.$vnode.ns||$.getTagNamespace(i),c=$.isReservedTag(i)?new lt($.parsePlatformTagName(i),n,s,void 0,void 0,t):n&&n.pre||!r(h=Pi(t.$options,"components",i))?new lt(i,n,s,void 0,void 0,t):bi(h,n,t,s,i)}else c=bi(i,n,t,s);return e(c)?c:r(c)?(r(u)&&Se(c,u),r(n)&&function(t){l(t.style)&&Ue(t.style),l(t.class)&&Ue(t.class)}(n),c):ct()}(t,i,n,c,u)}function Se(t,e,i){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,i=!0),r(t.children))for(var a=0,o=t.children.length;a<o;a++){var l=t.children[a];r(l.tag)&&(n(l.ns)||s(i)&&"svg"!==l.tag)&&Se(l,e,i)}}function xe(t,e,i){yt();try{if(e)for(var n=e;n=n.$parent;){var r=n.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{if(!1===r[s].call(n,t,e,i))return}catch(t){Ce(t,n,"errorCaptured hook")}}Ce(t,e,i)}finally{vt()}}function ke(t,e,i,n,r){var s;try{(s=i?t.apply(e,i):t.call(e))&&!s._isVue&&d(s)&&!s._handled&&(s.catch((function(t){return xe(t,n,r+" (Promise/async)")})),s._handled=!0)}catch(t){xe(t,n,r)}return s}function Ce(t,e,i){if($.errorHandler)try{return $.errorHandler.call(null,t,e,i)}catch(e){e!==t&&Ee(e)}Ee(t)}function Ee(t,e,i){if(!q||"undefined"==typeof console)throw t;console.error(t)}var Ie,Pe=!1,Ae=[],Le=!1;function Oe(){Le=!1;var t=Ae.slice(0);Ae.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&nt(Promise)){var De=Promise.resolve();Ie=function(){De.then(Oe),Y&&setTimeout(A)},Pe=!0}else if(z||"undefined"==typeof MutationObserver||!nt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ie="undefined"!=typeof setImmediate&&nt(setImmediate)?function(){setImmediate(Oe)}:function(){setTimeout(Oe,0)};else{var Me=1,Re=new MutationObserver(Oe),Ne=document.createTextNode(String(Me));Re.observe(Ne,{characterData:!0}),Ie=function(){Me=(Me+1)%2,Ne.data=String(Me)},Pe=!0}function Be(t,e){var i;if(Ae.push((function(){if(t)try{t.call(e)}catch(t){xe(t,e,"nextTick")}else i&&i(e)})),Le||(Le=!0,Ie()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){i=t}))}function Fe(t){return function(e,i){if(void 0===i&&(i=at),i)return function(t,e,i){var n=t.$options;n[e]=ki(n[e],i)}(i,t,e)}}Fe("beforeMount"),Fe("mounted"),Fe("beforeUpdate"),Fe("updated"),Fe("beforeDestroy"),Fe("destroyed"),Fe("activated"),Fe("deactivated"),Fe("serverPrefetch"),Fe("renderTracked"),Fe("renderTriggered"),Fe("errorCaptured");var $e=new rt;function Ue(t){return je(t,$e),$e.clear(),t}function je(t,i){var n,r,s=e(t);if(!(!s&&!l(t)||t.__v_skip||Object.isFrozen(t)||t instanceof lt)){if(t.__ob__){var a=t.__ob__.dep.id;if(i.has(a))return;i.add(a)}if(s)for(n=t.length;n--;)je(t[n],i);else if(Mt(t))je(t.value,i);else for(n=(r=Object.keys(t)).length;n--;)je(t[r[n]],i)}}var Ve,He=0,qe=function(){function t(t,e,i,n,r){var s;void 0===(s=Nt&&!Nt._vm?Nt:t?t._scope:void 0)&&(s=Nt),s&&s.active&&s.effects.push(this),(this.vm=t)&&r&&(t._watcher=this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++He,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new rt,this.newDepIds=new rt,this.expression="",o(e)?this.getter=e:(this.getter=function(t){if(!V.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}(e),this.getter||(this.getter=A)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;yt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;xe(t,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Ue(t),vt(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==ni[e]&&(t!==mt.target||!t.noRecurse)){if(ni[e]=!0,si){for(var i=ei.length-1;i>ai&&ei[i].id>t.id;)i--;ei.splice(i+1,0,t)}else ei.push(t);ri||(ri=!0,Be(hi))}}(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user){var i='callback for watcher "'.concat(this.expression,'"');ke(this.cb,this.vm,[t,e],this.vm,i)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&y(this.vm._scope.effects,this),this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function We(t,e){Ve.$on(t,e)}function ze(t,e){Ve.$off(t,e)}function Ge(t,e){var i=Ve;return function n(){null!==e.apply(null,arguments)&&i.$off(t,n)}}function Ke(t,e,i){Ve=t,jt(e,i||{},We,ze,Ge,t),Ve=void 0}var Ye=null;function Xe(t){var e=Ye;return Ye=t,function(){Ye=e}}function Qe(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Je(t,e){if(e){if(t._directInactive=!1,Qe(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)Je(t.$children[i]);ti(t,"activated")}}function Ze(t,e){if(!(e&&(t._directInactive=!0,Qe(t))||t._inactive)){t._inactive=!0;for(var i=0;i<t.$children.length;i++)Ze(t.$children[i]);ti(t,"deactivated")}}function ti(t,e,i,n){void 0===n&&(n=!0),yt();var r=at;n&&ot(t);var s=t.$options[e],a="".concat(e," hook");if(s)for(var o=0,l=s.length;o<l;o++)ke(s[o],t,i||null,t,a);t._hasHookEvent&&t.$emit("hook:"+e),n&&ot(r),vt()}var ei=[],ii=[],ni={},ri=!1,si=!1,ai=0,oi=0,li=Date.now;if(q&&!z){var ci=window.performance;ci&&"function"==typeof ci.now&&li()>document.createEvent("Event").timeStamp&&(li=function(){return ci.now()})}var ui=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function hi(){var t,e;for(oi=li(),si=!0,ei.sort(ui),ai=0;ai<ei.length;ai++)(t=ei[ai]).before&&t.before(),e=t.id,ni[e]=null,t.run();var i=ii.slice(),n=ei.slice();ai=ei.length=ii.length=0,ni={},ri=si=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Je(t[e],!0)}(i),function(t){for(var e=t.length;e--;){var i=t[e],n=i.vm;n&&n._watcher===i&&n._isMounted&&!n._isDestroyed&&ti(n,"updated")}}(n),ft(),it&&$.devtools&&it.emit("flush")}function di(t,e){if(t){for(var i=Object.create(null),n=st?Reflect.ownKeys(t):Object.keys(t),r=0;r<n.length;r++){var s=n[r];if("__ob__"!==s){var a=t[s].from;if(a in e._provided)i[s]=e._provided[a];else if("default"in t[s]){var l=t[s].default;i[s]=o(l)?l.call(e):l}}}return i}}function pi(i,n,r,a,o){var l,c=this,u=o.options;b(a,"_uid")?(l=Object.create(a))._original=a:(l=a,a=a._original);var h=s(u._compiled),d=!h;this.data=i,this.props=n,this.children=r,this.parent=a,this.listeners=i.on||t,this.injections=di(u.inject,a),this.slots=function(){return c.$slots||he(a,i.scopedSlots,c.$slots=le(r,a)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return he(a,i.scopedSlots,this.slots())}}),h&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=he(a,i.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,i,n,r){var s=Te(l,t,i,n,r,d);return s&&!e(s)&&(s.fnScopeId=u._scopeId,s.fnContext=a),s}:this._c=function(t,e,i,n){return Te(l,t,e,i,n,d)}}function fi(t,e,i,n,r){var s=ht(t);return s.fnContext=i,s.fnOptions=n,e.slot&&((s.data||(s.data={})).slot=e.slot),s}function mi(t,e){for(var i in e)t[T(i)]=e[i]}function gi(t){return t.name||t.__name||t._componentTag}oe(pi.prototype);var yi={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;yi.prepatch(i,i)}else{(t.componentInstance=function(t,e){var i={_isComponent:!0,_parentVnode:t,parent:e},n=t.data.inlineTemplate;return r(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new t.componentOptions.Ctor(i)}(t,Ye)).$mount(e?t.elm:void 0,e)}},prepatch:function(e,i){var n=i.componentOptions;!function(e,i,n,r,s){var a=r.data.scopedSlots,o=e.$scopedSlots,l=!!(a&&!a.$stable||o!==t&&!o.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),c=!!(s||e.$options._renderChildren||l),u=e.$vnode;e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=s;var h=r.data.attrs||t;e._attrsProxy&&fe(e._attrsProxy,h,u.data&&u.data.attrs||t,e,"$attrs")&&(c=!0),e.$attrs=h,n=n||t;var d=e.$options._parentListeners;if(e._listenersProxy&&fe(e._listenersProxy,n,d||t,e,"$listeners"),e.$listeners=e.$options._parentListeners=n,Ke(e,n,d),i&&e.$options.props){xt(!1);for(var p=e._props,f=e.$options._propKeys||[],m=0;m<f.length;m++){var g=f[m],y=e.$options.props;p[g]=Ai(g,y,i,e)}xt(!0),e.$options.propsData=i}c&&(e.$slots=le(s,r.context),e.$forceUpdate())}(i.componentInstance=e.componentInstance,n.propsData,n.listeners,i,n.children)},insert:function(t){var e,i=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,ti(n,"mounted")),t.data.keepAlive&&(i._isMounted?((e=n)._inactive=!1,ii.push(e)):Je(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Ze(e,!0):e.$destroy())}},vi=Object.keys(yi);function bi(i,a,o,c,u){if(!n(i)){var h=o.$options._base;if(l(i)&&(i=h.extend(i)),"function"==typeof i){var p;if(n(i.cid)&&(i=function(t,e){if(s(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var i=ye;if(i&&r(t.owners)&&-1===t.owners.indexOf(i)&&t.owners.push(i),s(t.loading)&&r(t.loadingComp))return t.loadingComp;if(i&&!r(t.owners)){var a=t.owners=[i],o=!0,c=null,u=null;i.$on("hook:destroyed",(function(){return y(a,i)}));var h=function(t){for(var e=0,i=a.length;e<i;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},p=R((function(i){t.resolved=ve(i,e),o?a.length=0:h(!0)})),f=R((function(e){r(t.errorComp)&&(t.error=!0,h(!0))})),m=t(p,f);return l(m)&&(d(m)?n(t.resolved)&&m.then(p,f):d(m.component)&&(m.component.then(p,f),r(m.error)&&(t.errorComp=ve(m.error,e)),r(m.loading)&&(t.loadingComp=ve(m.loading,e),0===m.delay?t.loading=!0:c=setTimeout((function(){c=null,n(t.resolved)&&n(t.error)&&(t.loading=!0,h(!1))}),m.delay||200)),r(m.timeout)&&(u=setTimeout((function(){u=null,n(t.resolved)&&f(null)}),m.timeout)))),o=!1,t.loading?t.loadingComp:t.resolved}}(p=i,h),void 0===i))return function(t,e,i,n,r){var s=ct();return s.asyncFactory=t,s.asyncMeta={data:e,context:i,children:n,tag:r},s}(p,a,o,c,u);a=a||{},qi(i),r(a.model)&&function(t,i){var n=t.model&&t.model.prop||"value",s=t.model&&t.model.event||"input";(i.attrs||(i.attrs={}))[n]=i.model.value;var a=i.on||(i.on={}),o=a[s],l=i.model.callback;r(o)?(e(o)?-1===o.indexOf(l):o!==l)&&(a[s]=[l].concat(o)):a[s]=l}(i.options,a);var f=function(t,e,i){var s=e.options.props;if(!n(s)){var a={},o=t.attrs,l=t.props;if(r(o)||r(l))for(var c in s){var u=k(c);Ht(a,l,c,u,!0)||Ht(a,o,c,u,!1)}return a}}(a,i);if(s(i.options.functional))return function(i,n,s,a,o){var l=i.options,c={},u=l.props;if(r(u))for(var h in u)c[h]=Ai(h,u,n||t);else r(s.attrs)&&mi(c,s.attrs),r(s.props)&&mi(c,s.props);var d=new pi(s,c,o,a,i),p=l.render.call(null,d._c,d);if(p instanceof lt)return fi(p,s,d.parent,l);if(e(p)){for(var f=qt(p)||[],m=new Array(f.length),g=0;g<f.length;g++)m[g]=fi(f[g],s,d.parent,l);return m}}(i,f,a,o,c);var m=a.on;if(a.on=a.nativeOn,s(i.options.abstract)){var g=a.slot;a={},g&&(a.slot=g)}!function(t){for(var e=t.hook||(t.hook={}),i=0;i<vi.length;i++){var n=vi[i],r=e[n],s=yi[n];r===s||r&&r._merged||(e[n]=r?_i(s,r):s)}}(a);var v=gi(i.options)||u;return new lt("vue-component-".concat(i.cid).concat(v?"-".concat(v):""),a,void 0,void 0,void 0,o,{Ctor:i,propsData:f,listeners:m,tag:u,children:c},p)}}}function _i(t,e){var i=function(i,n){t(i,n),e(i,n)};return i._merged=!0,i}var wi=A,Ti=$.optionMergeStrategies;function Si(t,e,i){if(void 0===i&&(i=!0),!e)return t;for(var n,r,s,a=st?Reflect.ownKeys(e):Object.keys(e),o=0;o<a.length;o++)"__ob__"!==(n=a[o])&&(r=t[n],s=e[n],i&&b(t,n)?r!==s&&u(r)&&u(s)&&Si(r,s):Pt(t,n,s));return t}function xi(t,e,i){return i?function(){var n=o(e)?e.call(i,i):e,r=o(t)?t.call(i,i):t;return n?Si(n,r):r}:e?t?function(){return Si(o(e)?e.call(this,this):e,o(t)?t.call(this,this):t)}:e:t}function ki(t,i){var n=i?t?t.concat(i):e(i)?i:[i]:t;return n?function(t){for(var e=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&e.push(t[i]);return e}(n):n}function Ci(t,e,i,n){var r=Object.create(t||null);return e?I(r,e):r}Ti.data=function(t,e,i){return i?xi(t,e,i):e&&"function"!=typeof e?t:xi(t,e)},F.forEach((function(t){Ti[t]=ki})),B.forEach((function(t){Ti[t+"s"]=Ci})),Ti.watch=function(t,i,n,r){if(t===J&&(t=void 0),i===J&&(i=void 0),!i)return Object.create(t||null);if(!t)return i;var s={};for(var a in I(s,t),i){var o=s[a],l=i[a];o&&!e(o)&&(o=[o]),s[a]=o?o.concat(l):e(l)?l:[l]}return s},Ti.props=Ti.methods=Ti.inject=Ti.computed=function(t,e,i,n){if(!t)return e;var r=Object.create(null);return I(r,t),e&&I(r,e),r},Ti.provide=function(t,e){return t?function(){var i=Object.create(null);return Si(i,o(t)?t.call(this):t),e&&Si(i,o(e)?e.call(this):e,!1),i}:e};var Ei=function(t,e){return void 0===e?t:e};function Ii(t,i,n){if(o(i)&&(i=i.options),function(t,i){var n=t.props;if(n){var r,s,a={};if(e(n))for(r=n.length;r--;)"string"==typeof(s=n[r])&&(a[T(s)]={type:null});else if(u(n))for(var o in n)s=n[o],a[T(o)]=u(s)?s:{type:s};t.props=a}}(i),function(t,i){var n=t.inject;if(n){var r=t.inject={};if(e(n))for(var s=0;s<n.length;s++)r[n[s]]={from:n[s]};else if(u(n))for(var a in n){var o=n[a];r[a]=u(o)?I({from:a},o):{from:o}}}}(i),function(t){var e=t.directives;if(e)for(var i in e){var n=e[i];o(n)&&(e[i]={bind:n,update:n})}}(i),!i._base&&(i.extends&&(t=Ii(t,i.extends,n)),i.mixins))for(var r=0,s=i.mixins.length;r<s;r++)t=Ii(t,i.mixins[r],n);var a,l={};for(a in t)c(a);for(a in i)b(t,a)||c(a);function c(e){var r=Ti[e]||Ei;l[e]=r(t[e],i[e],n,e)}return l}function Pi(t,e,i,n){if("string"==typeof i){var r=t[e];if(b(r,i))return r[i];var s=T(i);if(b(r,s))return r[s];var a=S(s);return b(r,a)?r[a]:r[i]||r[s]||r[a]}}function Ai(t,e,i,n){var r=e[t],s=!b(i,t),a=i[t],l=Mi(Boolean,r.type);if(l>-1)if(s&&!b(r,"default"))a=!1;else if(""===a||a===k(t)){var c=Mi(String,r.type);(c<0||l<c)&&(a=!0)}if(void 0===a){a=function(t,e,i){if(b(e,"default")){var n=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i]?t._props[i]:o(n)&&"Function"!==Oi(e.type)?n.call(t):n}}(n,r,t);var u=St;xt(!0),Et(a),xt(u)}return a}var Li=/^\s*function (\w+)/;function Oi(t){var e=t&&t.toString().match(Li);return e?e[1]:""}function Di(t,e){return Oi(t)===Oi(e)}function Mi(t,i){if(!e(i))return Di(i,t)?0:-1;for(var n=0,r=i.length;n<r;n++)if(Di(i[n],t))return n;return-1}var Ri={enumerable:!0,configurable:!0,get:A,set:A};function Ni(t,e,i){Ri.get=function(){return this[e][i]},Ri.set=function(t){this[e][i]=t},Object.defineProperty(t,i,Ri)}function Bi(i){var n=i.$options;if(n.props&&function(t,e){var i=t.$options.propsData||{},n=t._props=Ot({}),r=t.$options._propKeys=[];!t.$parent||xt(!1);var s=function(s){r.push(s);var a=Ai(s,e,i,t);It(n,s,a),s in t||Ni(t,"_props",s)};for(var a in e)s(a);xt(!0)}(i,n.props),function(e){var i=e.$options,n=i.setup;if(n){var r=e._setupContext=function(e){return{get attrs(){if(!e._attrsProxy){var i=e._attrsProxy={};j(i,"_v_attr_proxy",!0),fe(i,e.$attrs,t,e,"$attrs")}return e._attrsProxy},get listeners(){return e._listenersProxy||fe(e._listenersProxy={},e.$listeners,t,e,"$listeners"),e._listenersProxy},get slots(){return function(t){return t._slotsProxy||ge(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}(e)},emit:C(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach((function(i){return Rt(e,t,i)}))}}}(e);ot(e),yt();var s=ke(n,null,[e._props||Ot({}),r],e,"setup");if(vt(),ot(),o(s))i.render=s;else if(l(s))if(e._setupState=s,s.__sfc){var a=e._setupProxy={};for(var c in s)"__sfc"!==c&&Rt(a,s,c)}else for(var c in s)U(c)||Rt(e,s,c)}}(i),n.methods&&function(t,e){for(var i in t.$options.props,e)t[i]="function"!=typeof e[i]?A:C(e[i],t)}(i,n.methods),n.data)!function(t){var e=t.$options.data;u(e=t._data=o(e)?function(t,e){yt();try{return t.call(e,e)}catch(t){return xe(t,e,"data()"),{}}finally{vt()}}(e,t):e||{})||(e={});for(var i=Object.keys(e),n=t.$options.props,r=(t.$options.methods,i.length);r--;){var s=i[r];n&&b(n,s)||U(s)||Ni(t,"_data",s)}var a=Et(e);a&&a.vmCount++}(i);else{var r=Et(i._data={});r&&r.vmCount++}n.computed&&function(t,e){var i=t._computedWatchers=Object.create(null),n=et();for(var r in e){var s=e[r],a=o(s)?s:s.get;n||(i[r]=new qe(t,a||A,A,Fi)),r in t||$i(t,r,s)}}(i,n.computed),n.watch&&n.watch!==J&&function(t,i){for(var n in i){var r=i[n];if(e(r))for(var s=0;s<r.length;s++)Vi(t,n,r[s]);else Vi(t,n,r)}}(i,n.watch)}var Fi={lazy:!0};function $i(t,e,i){var n=!et();o(i)?(Ri.get=n?Ui(e):ji(i),Ri.set=A):(Ri.get=i.get?n&&!1!==i.cache?Ui(e):ji(i.get):A,Ri.set=i.set||A),Object.defineProperty(t,e,Ri)}function Ui(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),mt.target&&e.depend(),e.value}}function ji(t){return function(){return t.call(this,this)}}function Vi(t,e,i,n){return u(i)&&(n=i,i=i.handler),"string"==typeof i&&(i=t[i]),t.$watch(e,i,n)}var Hi=0;function qi(t){var e=t.options;if(t.super){var i=qi(t.super);if(i!==t.superOptions){t.superOptions=i;var n=function(t){var e,i=t.options,n=t.sealedOptions;for(var r in i)i[r]!==n[r]&&(e||(e={}),e[r]=i[r]);return e}(t);n&&I(t.extendOptions,n),(e=t.options=Ii(i,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Wi(t){this._init(t)}function zi(t){return t&&(gi(t.Ctor.options)||t.tag)}function Gi(t,i){return e(t)?t.indexOf(i)>-1:"string"==typeof t?t.split(",").indexOf(i)>-1:(n=t,!("[object RegExp]"!==c.call(n))&&t.test(i));var n}function Ki(t,e){var i=t.cache,n=t.keys,r=t._vnode;for(var s in i){var a=i[s];if(a){var o=a.name;o&&!e(o)&&Yi(i,s,n,r)}}}function Yi(t,e,i,n){var r=t[e];!r||n&&r.tag===n.tag||r.componentInstance.$destroy(),t[e]=null,y(i,e)}!function(e){e.prototype._init=function(e){var i=this;i._uid=Hi++,i._isVue=!0,i.__v_skip=!0,i._scope=new Ft(!0),i._scope._vm=!0,e&&e._isComponent?function(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}(i,e):i.$options=Ii(qi(i.constructor),e||{},i),i._renderProxy=i,i._self=i,function(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._provided=i?i._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(i),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Ke(t,e)}(i),function(e){e._vnode=null,e._staticTrees=null;var i=e.$options,n=e.$vnode=i._parentVnode,r=n&&n.context;e.$slots=le(i._renderChildren,r),e.$scopedSlots=n?he(e.$parent,n.data.scopedSlots,e.$slots):t,e._c=function(t,i,n,r){return Te(e,t,i,n,r,!1)},e.$createElement=function(t,i,n,r){return Te(e,t,i,n,r,!0)};var s=n&&n.data;It(e,"$attrs",s&&s.attrs||t,null,!0),It(e,"$listeners",i._parentListeners||t,null,!0)}(i),ti(i,"beforeCreate",void 0,!1),function(t){var e=di(t.$options.inject,t);e&&(xt(!1),Object.keys(e).forEach((function(i){It(t,i,e[i])})),xt(!0))}(i),Bi(i),function(t){var e=t.$options.provide;if(e){var i=o(e)?e.call(t):e;if(!l(i))return;for(var n=function(t){var e=t._provided,i=t.$parent&&t.$parent._provided;return i===e?t._provided=Object.create(i):e}(t),r=st?Reflect.ownKeys(i):Object.keys(i),s=0;s<r.length;s++){var a=r[s];Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))}}}(i),ti(i,"created"),i.$options.el&&i.$mount(i.$options.el)}}(Wi),function(t){Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Pt,t.prototype.$delete=At,t.prototype.$watch=function(t,e,i){var n=this;if(u(e))return Vi(n,t,e,i);(i=i||{}).user=!0;var r=new qe(n,t,e,i);if(i.immediate){var s='callback for immediate watcher "'.concat(r.expression,'"');yt(),ke(e,n,[r.value],n,s),vt()}return function(){r.teardown()}}}(Wi),function(t){var i=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(e(t))for(var s=0,a=t.length;s<a;s++)r.$on(t[s],n);else(r._events[t]||(r._events[t]=[])).push(n),i.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var i=this;function n(){i.$off(t,n),e.apply(i,arguments)}return n.fn=e,i.$on(t,n),i},t.prototype.$off=function(t,i){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(e(t)){for(var r=0,s=t.length;r<s;r++)n.$off(t[r],i);return n}var a,o=n._events[t];if(!o)return n;if(!i)return n._events[t]=null,n;for(var l=o.length;l--;)if((a=o[l])===i||a.fn===i){o.splice(l,1);break}return n},t.prototype.$emit=function(t){var e=this,i=e._events[t];if(i){i=i.length>1?E(i):i;for(var n=E(arguments,1),r='event handler for "'.concat(t,'"'),s=0,a=i.length;s<a;s++)ke(i[s],e,n,e,r)}return e}}(Wi),function(t){t.prototype._update=function(t,e){var i=this,n=i.$el,r=i._vnode,s=Xe(i);i._vnode=t,i.$el=r?i.__patch__(r,t):i.__patch__(i.$el,t,e,!1),s(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i);for(var a=i;a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode;)a.$parent.$el=a.$el,a=a.$parent},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){ti(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),ti(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Wi),function(t){oe(t.prototype),t.prototype.$nextTick=function(t){return Be(t,this)},t.prototype._render=function(){var t,i=this,n=i.$options,r=n.render,s=n._parentVnode;s&&i._isMounted&&(i.$scopedSlots=he(i.$parent,s.data.scopedSlots,i.$slots,i.$scopedSlots),i._slotsProxy&&ge(i._slotsProxy,i.$scopedSlots)),i.$vnode=s;try{ot(i),ye=i,t=r.call(i._renderProxy,i.$createElement)}catch(e){xe(e,i,"render"),t=i._vnode}finally{ye=null,ot()}return e(t)&&1===t.length&&(t=t[0]),t instanceof lt||(t=ct()),t.parent=s,t}}(Wi);var Xi=[String,RegExp,Array],Qi={name:"keep-alive",abstract:!0,props:{include:Xi,exclude:Xi,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,i=t.keys,n=t.vnodeToCache,r=t.keyToCache;if(n){var s=n.tag,a=n.componentInstance,o=n.componentOptions;e[r]={name:zi(o),tag:s,componentInstance:a},i.push(r),this.max&&i.length>parseInt(this.max)&&Yi(e,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Yi(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Ki(t,(function(t){return Gi(e,t)}))})),this.$watch("exclude",(function(e){Ki(t,(function(t){return!Gi(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=be(t),i=e&&e.componentOptions;if(i){var n=zi(i),r=this.include,s=this.exclude;if(r&&(!n||!Gi(r,n))||s&&n&&Gi(s,n))return e;var a=this.cache,o=this.keys,l=null==e.key?i.Ctor.cid+(i.tag?"::".concat(i.tag):""):e.key;a[l]?(e.componentInstance=a[l].componentInstance,y(o,l),o.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||t&&t[0]}},Ji={KeepAlive:Qi};!function(t){var e={get:function(){return $}};Object.defineProperty(t,"config",e),t.util={warn:wi,extend:I,mergeOptions:Ii,defineReactive:It},t.set=Pt,t.delete=At,t.nextTick=Be,t.observable=function(t){return Et(t),t},t.options=Object.create(null),B.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,I(t.options.components,Ji),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var i=E(arguments,1);return i.unshift(this),o(t.install)?t.install.apply(t,i):o(t)&&t.apply(null,i),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Ii(this.options,t),this}}(t),function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,n=i.cid,r=t._Ctor||(t._Ctor={});if(r[n])return r[n];var s=gi(t)||gi(i.options),a=function(t){this._init(t)};return(a.prototype=Object.create(i.prototype)).constructor=a,a.cid=e++,a.options=Ii(i.options,t),a.super=i,a.options.props&&function(t){var e=t.options.props;for(var i in e)Ni(t.prototype,"_props",i)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var i in e)$i(t.prototype,i,e[i])}(a),a.extend=i.extend,a.mixin=i.mixin,a.use=i.use,B.forEach((function(t){a[t]=i[t]})),s&&(a.options.components[s]=a),a.superOptions=i.options,a.extendOptions=t,a.sealedOptions=I({},a.options),r[n]=a,a}}(t),function(t){B.forEach((function(e){t[e]=function(t,i){return i?("component"===e&&u(i)&&(i.name=i.name||t,i=this.options._base.extend(i)),"directive"===e&&o(i)&&(i={bind:i,update:i}),this.options[e+"s"][t]=i,i):this.options[e+"s"][t]}}))}(t)}(Wi),Object.defineProperty(Wi.prototype,"$isServer",{get:et}),Object.defineProperty(Wi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Wi,"FunctionalRenderContext",{value:pi}),Wi.version="2.7.14";var Zi=m("style,class"),tn=m("input,textarea,option,select,progress"),en=m("contenteditable,draggable,spellcheck"),nn=m("events,caret,typing,plaintext-only"),rn=function(t,e){return cn(e)||"false"===e?"false":"contenteditable"===t&&nn(e)?e:"true"},sn=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),an="http://www.w3.org/1999/xlink",on=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},ln=function(t){return on(t)?t.slice(6,t.length):""},cn=function(t){return null==t||!1===t};function un(t,e){return{staticClass:hn(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function hn(t,e){return t?e?t+" "+e:t:e||""}function dn(t){return Array.isArray(t)?function(t){for(var e,i="",n=0,s=t.length;n<s;n++)r(e=dn(t[n]))&&""!==e&&(i&&(i+=" "),i+=e);return i}(t):l(t)?function(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}(t):"string"==typeof t?t:""}var pn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},fn=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),mn=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),gn=function(t){return fn(t)||mn(t)},yn=Object.create(null),vn=m("text,number,password,search,email,tel,url"),bn=Object.freeze({__proto__:null,createElement:function(t,e){var i=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(t,e){return document.createElementNS(pn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),_n={create:function(t,e){wn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(wn(t,!0),wn(e))},destroy:function(t){wn(t,!0)}};function wn(t,i){var n=t.data.ref;if(r(n)){var s=t.context,a=t.componentInstance||t.elm,l=i?null:a,c=i?void 0:a;if(o(n))ke(n,s,[l],s,"template ref function");else{var u=t.data.refInFor,h="string"==typeof n||"number"==typeof n,d=Mt(n),p=s.$refs;if(h||d)if(u){var f=h?p[n]:n.value;i?e(f)&&y(f,a):e(f)?f.includes(a)||f.push(a):h?(p[n]=[a],Tn(s,n,p[n])):n.value=[a]}else if(h){if(i&&p[n]!==a)return;p[n]=c,Tn(s,n,l)}else if(d){if(i&&n.value!==a)return;n.value=l}}}}function Tn(t,e,i){var n=t._setupState;n&&b(n,e)&&(Mt(n[e])?n[e].value=i:n[e]=i)}var Sn=new lt("",{},[]),xn=["create","activate","update","remove","destroy"];function kn(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var i,n=r(i=t.data)&&r(i=i.attrs)&&i.type,s=r(i=e.data)&&r(i=i.attrs)&&i.type;return n===s||vn(n)&&vn(s)}(t,e)||s(t.isAsyncPlaceholder)&&n(e.asyncFactory.error))}function Cn(t,e,i){var n,s,a={};for(n=e;n<=i;++n)r(s=t[n].key)&&(a[s]=n);return a}var En={create:In,update:In,destroy:function(t){In(t,Sn)}};function In(t,e){(t.data.directives||e.data.directives)&&function(t,e){var i,n,r,s=t===Sn,a=e===Sn,o=An(t.data.directives,t.context),l=An(e.data.directives,e.context),c=[],u=[];for(i in l)n=o[i],r=l[i],n?(r.oldValue=n.value,r.oldArg=n.arg,On(r,"update",e,t),r.def&&r.def.componentUpdated&&u.push(r)):(On(r,"bind",e,t),r.def&&r.def.inserted&&c.push(r));if(c.length){var h=function(){for(var i=0;i<c.length;i++)On(c[i],"inserted",e,t)};s?Vt(e,"insert",h):h()}if(u.length&&Vt(e,"postpatch",(function(){for(var i=0;i<u.length;i++)On(u[i],"componentUpdated",e,t)})),!s)for(i in o)l[i]||On(o[i],"unbind",t,t,a)}(t,e)}var Pn=Object.create(null);function An(t,e){var i,n,r=Object.create(null);if(!t)return r;for(i=0;i<t.length;i++){if((n=t[i]).modifiers||(n.modifiers=Pn),r[Ln(n)]=n,e._setupState&&e._setupState.__sfc){var s=n.def||Pi(e,"_setupState","v-"+n.name);n.def="function"==typeof s?{bind:s,update:s}:s}n.def=n.def||Pi(e.$options,"directives",n.name)}return r}function Ln(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function On(t,e,i,n,r){var s=t.def&&t.def[e];if(s)try{s(i.elm,t,i,n,r)}catch(n){xe(n,i.context,"directive ".concat(t.name," ").concat(e," hook"))}}var Dn=[_n,En];function Mn(t,e){var i=e.componentOptions;if(!(r(i)&&!1===i.Ctor.options.inheritAttrs||n(t.data.attrs)&&n(e.data.attrs))){var a,o,l=e.elm,c=t.data.attrs||{},u=e.data.attrs||{};for(a in(r(u.__ob__)||s(u._v_attr_proxy))&&(u=e.data.attrs=I({},u)),u)o=u[a],c[a]!==o&&Rn(l,a,o,e.data.pre);for(a in(z||K)&&u.value!==c.value&&Rn(l,"value",u.value),c)n(u[a])&&(on(a)?l.removeAttributeNS(an,ln(a)):en(a)||l.removeAttribute(a))}}function Rn(t,e,i,n){n||t.tagName.indexOf("-")>-1?Nn(t,e,i):sn(e)?cn(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):en(e)?t.setAttribute(e,rn(e,i)):on(e)?cn(i)?t.removeAttributeNS(an,ln(e)):t.setAttributeNS(an,e,i):Nn(t,e,i)}function Nn(t,e,i){if(cn(i))t.removeAttribute(e);else{if(z&&!G&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==i&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}var Bn={create:Mn,update:Mn};function Fn(t,e){var i=e.elm,s=e.data,a=t.data;if(!(n(s.staticClass)&&n(s.class)&&(n(a)||n(a.staticClass)&&n(a.class)))){var o=function(t){for(var e=t.data,i=t,n=t;r(n.componentInstance);)(n=n.componentInstance._vnode)&&n.data&&(e=un(n.data,e));for(;r(i=i.parent);)i&&i.data&&(e=un(e,i.data));return s=e.staticClass,a=e.class,r(s)||r(a)?hn(s,dn(a)):"";var s,a}(e),l=i._transitionClasses;r(l)&&(o=hn(o,dn(l))),o!==i._prevClass&&(i.setAttribute("class",o),i._prevClass=o)}}var $n,Un={create:Fn,update:Fn},jn="__r",Vn="__c";function Hn(t,e,i){var n=$n;return function r(){null!==e.apply(null,arguments)&&zn(t,r,i,n)}}var qn=Pe&&!(Q&&Number(Q[1])<=53);function Wn(t,e,i,n){if(qn){var r=oi,s=e;e=s._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=r||t.timeStamp<=0||t.target.ownerDocument!==document)return s.apply(this,arguments)}}$n.addEventListener(t,e,Z?{capture:i,passive:n}:i)}function zn(t,e,i,n){(n||$n).removeEventListener(t,e._wrapper||e,i)}function Gn(t,e){if(!n(t.data.on)||!n(e.data.on)){var i=e.data.on||{},s=t.data.on||{};$n=e.elm||t.elm,function(t){if(r(t[jn])){var e=z?"change":"input";t[e]=[].concat(t[jn],t[e]||[]),delete t[jn]}r(t[Vn])&&(t.change=[].concat(t[Vn],t.change||[]),delete t[Vn])}(i),jt(i,s,Wn,zn,Hn,e.context),$n=void 0}}var Kn,Yn={create:Gn,update:Gn,destroy:function(t){return Gn(t,Sn)}};function Xn(t,e){if(!n(t.data.domProps)||!n(e.data.domProps)){var i,a,o=e.elm,l=t.data.domProps||{},c=e.data.domProps||{};for(i in(r(c.__ob__)||s(c._v_attr_proxy))&&(c=e.data.domProps=I({},c)),l)i in c||(o[i]="");for(i in c){if(a=c[i],"textContent"===i||"innerHTML"===i){if(e.children&&(e.children.length=0),a===l[i])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===i&&"PROGRESS"!==o.tagName){o._value=a;var u=n(a)?"":String(a);Qn(o,u)&&(o.value=u)}else if("innerHTML"===i&&mn(o.tagName)&&n(o.innerHTML)){(Kn=Kn||document.createElement("div")).innerHTML="<svg>".concat(a,"</svg>");for(var h=Kn.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;h.firstChild;)o.appendChild(h.firstChild)}else if(a!==l[i])try{o[i]=a}catch(t){}}}}function Qn(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var i=!0;try{i=document.activeElement!==t}catch(t){}return i&&t.value!==e}(t,e)||function(t,e){var i=t.value,n=t._vModifiers;if(r(n)){if(n.number)return f(i)!==f(e);if(n.trim)return i.trim()!==e.trim()}return i!==e}(t,e))}var Jn={create:Xn,update:Xn},Zn=_((function(t){var e={},i=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function tr(t){var e=er(t.style);return t.staticStyle?I(t.staticStyle,e):e}function er(t){return Array.isArray(t)?P(t):"string"==typeof t?Zn(t):t}var ir,nr=/^--/,rr=/\s*!important$/,sr=function(t,e,i){if(nr.test(e))t.style.setProperty(e,i);else if(rr.test(i))t.style.setProperty(k(e),i.replace(rr,""),"important");else{var n=or(e);if(Array.isArray(i))for(var r=0,s=i.length;r<s;r++)t.style[n]=i[r];else t.style[n]=i}},ar=["Webkit","Moz","ms"],or=_((function(t){if(ir=ir||document.createElement("div").style,"filter"!==(t=T(t))&&t in ir)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<ar.length;i++){var n=ar[i]+e;if(n in ir)return n}}));function lr(t,e){var i=e.data,s=t.data;if(!(n(i.staticStyle)&&n(i.style)&&n(s.staticStyle)&&n(s.style))){var a,o,l=e.elm,c=s.staticStyle,u=s.normalizedStyle||s.style||{},h=c||u,d=er(e.data.style)||{};e.data.normalizedStyle=r(d.__ob__)?I({},d):d;var p=function(t,e){for(var i,n={},r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(i=tr(r.data))&&I(n,i);(i=tr(t.data))&&I(n,i);for(var s=t;s=s.parent;)s.data&&(i=tr(s.data))&&I(n,i);return n}(e);for(o in h)n(p[o])&&sr(l,o,"");for(o in p)(a=p[o])!==h[o]&&sr(l,o,null==a?"":a)}}var cr={create:lr,update:lr},ur=/\s+/;function hr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ur).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var i=" ".concat(t.getAttribute("class")||""," ");i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function dr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(ur).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" ".concat(t.getAttribute("class")||""," "),n=" "+e+" ";i.indexOf(n)>=0;)i=i.replace(n," ");(i=i.trim())?t.setAttribute("class",i):t.removeAttribute("class")}}function pr(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&I(e,fr(t.name||"v")),I(e,t),e}return"string"==typeof t?fr(t):void 0}}var fr=_((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),mr=q&&!G,gr="transition",yr="animation",vr="transition",br="transitionend",_r="animation",wr="animationend";mr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(vr="WebkitTransition",br="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(_r="WebkitAnimation",wr="webkitAnimationEnd"));var Tr=q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Sr(t){Tr((function(){Tr(t)}))}function xr(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),hr(t,e))}function kr(t,e){t._transitionClasses&&y(t._transitionClasses,e),dr(t,e)}function Cr(t,e,i){var n=Ir(t,e),r=n.type,s=n.timeout,a=n.propCount;if(!r)return i();var o=r===gr?br:wr,l=0,c=function(){t.removeEventListener(o,u),i()},u=function(e){e.target===t&&++l>=a&&c()};setTimeout((function(){l<a&&c()}),s+1),t.addEventListener(o,u)}var Er=/\b(transform|all)(,|$)/;function Ir(t,e){var i,n=window.getComputedStyle(t),r=(n[vr+"Delay"]||"").split(", "),s=(n[vr+"Duration"]||"").split(", "),a=Pr(r,s),o=(n[_r+"Delay"]||"").split(", "),l=(n[_r+"Duration"]||"").split(", "),c=Pr(o,l),u=0,h=0;return e===gr?a>0&&(i=gr,u=a,h=s.length):e===yr?c>0&&(i=yr,u=c,h=l.length):h=(i=(u=Math.max(a,c))>0?a>c?gr:yr:null)?i===gr?s.length:l.length:0,{type:i,timeout:u,propCount:h,hasTransform:i===gr&&Er.test(n[vr+"Property"])}}function Pr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,i){return Ar(e)+Ar(t[i])})))}function Ar(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Lr(t,e){var i=t.elm;r(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var s=pr(t.data.transition);if(!n(s)&&!r(i._enterCb)&&1===i.nodeType){for(var a=s.css,c=s.type,u=s.enterClass,h=s.enterToClass,d=s.enterActiveClass,p=s.appearClass,m=s.appearToClass,g=s.appearActiveClass,y=s.beforeEnter,v=s.enter,b=s.afterEnter,_=s.enterCancelled,w=s.beforeAppear,T=s.appear,S=s.afterAppear,x=s.appearCancelled,k=s.duration,C=Ye,E=Ye.$vnode;E&&E.parent;)C=E.context,E=E.parent;var I=!C._isMounted||!t.isRootInsert;if(!I||T||""===T){var P=I&&p?p:u,A=I&&g?g:d,L=I&&m?m:h,O=I&&w||y,D=I&&o(T)?T:v,M=I&&S||b,N=I&&x||_,B=f(l(k)?k.enter:k),F=!1!==a&&!G,$=Mr(D),U=i._enterCb=R((function(){F&&(kr(i,L),kr(i,A)),U.cancelled?(F&&kr(i,P),N&&N(i)):M&&M(i),i._enterCb=null}));t.data.show||Vt(t,"insert",(function(){var e=i.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),D&&D(i,U)})),O&&O(i),F&&(xr(i,P),xr(i,A),Sr((function(){kr(i,P),U.cancelled||(xr(i,L),$||(Dr(B)?setTimeout(U,B):Cr(i,c,U)))}))),t.data.show&&(e&&e(),D&&D(i,U)),F||$||U()}}}function Or(t,e){var i=t.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var s=pr(t.data.transition);if(n(s)||1!==i.nodeType)return e();if(!r(i._leaveCb)){var a=s.css,o=s.type,c=s.leaveClass,u=s.leaveToClass,h=s.leaveActiveClass,d=s.beforeLeave,p=s.leave,m=s.afterLeave,g=s.leaveCancelled,y=s.delayLeave,v=s.duration,b=!1!==a&&!G,_=Mr(p),w=f(l(v)?v.leave:v),T=i._leaveCb=R((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[t.key]=null),b&&(kr(i,u),kr(i,h)),T.cancelled?(b&&kr(i,c),g&&g(i)):(e(),m&&m(i)),i._leaveCb=null}));y?y(S):S()}function S(){T.cancelled||(!t.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[t.key]=t),d&&d(i),b&&(xr(i,c),xr(i,h),Sr((function(){kr(i,c),T.cancelled||(xr(i,u),_||(Dr(w)?setTimeout(T,w):Cr(i,o,T)))}))),p&&p(i,T),b||_||T())}}function Dr(t){return"number"==typeof t&&!isNaN(t)}function Mr(t){if(n(t))return!1;var e=t.fns;return r(e)?Mr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Rr(t,e){!0!==e.data.show&&Lr(e)}var Nr=function(t){var i,o,l={},c=t.modules,u=t.nodeOps;for(i=0;i<xn.length;++i)for(l[xn[i]]=[],o=0;o<c.length;++o)r(c[o][xn[i]])&&l[xn[i]].push(c[o][xn[i]]);function h(t){var e=u.parentNode(t);r(e)&&u.removeChild(e,t)}function d(t,e,i,n,a,o,c){if(r(t.elm)&&r(o)&&(t=o[c]=ht(t)),t.isRootInsert=!a,!function(t,e,i,n){var a=t.data;if(r(a)){var o=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1),r(t.componentInstance))return p(t,e),f(i,t.elm,n),s(o)&&function(t,e,i,n){for(var s,a=t;a.componentInstance;)if(r(s=(a=a.componentInstance._vnode).data)&&r(s=s.transition)){for(s=0;s<l.activate.length;++s)l.activate[s](Sn,a);e.push(a);break}f(i,t.elm,n)}(t,e,i,n),!0}}(t,e,i,n)){var h=t.data,d=t.children,m=t.tag;r(m)?(t.elm=t.ns?u.createElementNS(t.ns,m):u.createElement(m,t),b(t),g(t,d,e),r(h)&&v(t,e),f(i,t.elm,n)):s(t.isComment)?(t.elm=u.createComment(t.text),f(i,t.elm,n)):(t.elm=u.createTextNode(t.text),f(i,t.elm,n))}}function p(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,y(t)?(v(t,e),b(t)):(wn(t),e.push(t))}function f(t,e,i){r(t)&&(r(i)?u.parentNode(i)===t&&u.insertBefore(t,e,i):u.appendChild(t,e))}function g(t,i,n){if(e(i))for(var r=0;r<i.length;++r)d(i[r],n,t.elm,null,!0,i,r);else a(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function y(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function v(t,e){for(var n=0;n<l.create.length;++n)l.create[n](Sn,t);r(i=t.data.hook)&&(r(i.create)&&i.create(Sn,t),r(i.insert)&&e.push(t))}function b(t){var e;if(r(e=t.fnScopeId))u.setStyleScope(t.elm,e);else for(var i=t;i;)r(e=i.context)&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),i=i.parent;r(e=Ye)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function _(t,e,i,n,r,s){for(;n<=r;++n)d(i[n],s,t,e,!1,i,n)}function w(t){var e,i,n=t.data;if(r(n))for(r(e=n.hook)&&r(e=e.destroy)&&e(t),e=0;e<l.destroy.length;++e)l.destroy[e](t);if(r(e=t.children))for(i=0;i<t.children.length;++i)w(t.children[i])}function T(t,e,i){for(;e<=i;++e){var n=t[e];r(n)&&(r(n.tag)?(S(n),w(n)):h(n.elm))}}function S(t,e){if(r(e)||r(t.data)){var i,n=l.remove.length+1;for(r(e)?e.listeners+=n:e=function(t,e){function i(){0==--i.listeners&&h(t)}return i.listeners=e,i}(t.elm,n),r(i=t.componentInstance)&&r(i=i._vnode)&&r(i.data)&&S(i,e),i=0;i<l.remove.length;++i)l.remove[i](t,e);r(i=t.data.hook)&&r(i=i.remove)?i(t,e):e()}else h(t.elm)}function x(t,e,i,n){for(var s=i;s<n;s++){var a=e[s];if(r(a)&&kn(t,a))return s}}function k(t,e,i,a,o,c){if(t!==e){r(e.elm)&&r(a)&&(e=a[o]=ht(e));var h=e.elm=t.elm;if(s(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?I(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(t.isStatic)&&e.key===t.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,f=e.data;r(f)&&r(p=f.hook)&&r(p=p.prepatch)&&p(t,e);var m=t.children,g=e.children;if(r(f)&&y(e)){for(p=0;p<l.update.length;++p)l.update[p](t,e);r(p=f.hook)&&r(p=p.update)&&p(t,e)}n(e.text)?r(m)&&r(g)?m!==g&&function(t,e,i,s,a){for(var o,l,c,h=0,p=0,f=e.length-1,m=e[0],g=e[f],y=i.length-1,v=i[0],b=i[y],w=!a;h<=f&&p<=y;)n(m)?m=e[++h]:n(g)?g=e[--f]:kn(m,v)?(k(m,v,s,i,p),m=e[++h],v=i[++p]):kn(g,b)?(k(g,b,s,i,y),g=e[--f],b=i[--y]):kn(m,b)?(k(m,b,s,i,y),w&&u.insertBefore(t,m.elm,u.nextSibling(g.elm)),m=e[++h],b=i[--y]):kn(g,v)?(k(g,v,s,i,p),w&&u.insertBefore(t,g.elm,m.elm),g=e[--f],v=i[++p]):(n(o)&&(o=Cn(e,h,f)),n(l=r(v.key)?o[v.key]:x(v,e,h,f))?d(v,s,t,m.elm,!1,i,p):kn(c=e[l],v)?(k(c,v,s,i,p),e[l]=void 0,w&&u.insertBefore(t,c.elm,m.elm)):d(v,s,t,m.elm,!1,i,p),v=i[++p]);h>f?_(t,n(i[y+1])?null:i[y+1].elm,i,p,y,s):p>y&&T(e,h,f)}(h,m,g,i,c):r(g)?(r(t.text)&&u.setTextContent(h,""),_(h,null,g,0,g.length-1,i)):r(m)?T(m,0,m.length-1):r(t.text)&&u.setTextContent(h,""):t.text!==e.text&&u.setTextContent(h,e.text),r(f)&&r(p=f.hook)&&r(p=p.postpatch)&&p(t,e)}}}function C(t,e,i){if(s(i)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var n=0;n<e.length;++n)e[n].data.hook.insert(e[n])}var E=m("attrs,class,staticClass,staticStyle,key");function I(t,e,i,n){var a,o=e.tag,l=e.data,c=e.children;if(n=n||l&&l.pre,e.elm=t,s(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(l)&&(r(a=l.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return p(e,i),!0;if(r(o)){if(r(c))if(t.hasChildNodes())if(r(a=l)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var u=!0,h=t.firstChild,d=0;d<c.length;d++){if(!h||!I(h,c[d],i,n)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else g(e,c,i);if(r(l)){var f=!1;for(var m in l)if(!E(m)){f=!0,v(e,i);break}!f&&l.class&&Ue(l.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,i,a){if(!n(e)){var o,c=!1,h=[];if(n(t))c=!0,d(e,h);else{var p=r(t.nodeType);if(!p&&kn(t,e))k(t,e,h,null,null,a);else{if(p){if(1===t.nodeType&&t.hasAttribute(N)&&(t.removeAttribute(N),i=!0),s(i)&&I(t,e,h))return C(e,h,!0),t;o=t,t=new lt(u.tagName(o).toLowerCase(),{},[],void 0,o)}var f=t.elm,m=u.parentNode(f);if(d(e,h,f._leaveCb?null:m,u.nextSibling(f)),r(e.parent))for(var g=e.parent,v=y(e);g;){for(var b=0;b<l.destroy.length;++b)l.destroy[b](g);if(g.elm=e.elm,v){for(var _=0;_<l.create.length;++_)l.create[_](Sn,g);var S=g.data.hook.insert;if(S.merged)for(var x=1;x<S.fns.length;x++)S.fns[x]()}else wn(g);g=g.parent}r(m)?T([t],0,0):r(t.tag)&&w(t)}}return C(e,h,c),e.elm}r(t)&&w(t)}}({nodeOps:bn,modules:[Bn,Un,Yn,Jn,cr,q?{create:Rr,activate:Rr,remove:function(t,e){!0!==t.data.show?Or(t,e):e()}}:{}].concat(Dn)});G&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&qr(t,"input")}));var Br={inserted:function(t,e,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?Vt(i,"postpatch",(function(){Br.componentUpdated(t,e,i)})):Fr(t,e,i.context),t._vOptions=[].map.call(t.options,jr)):("textarea"===i.tag||vn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Vr),t.addEventListener("compositionend",Hr),t.addEventListener("change",Hr),G&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){Fr(t,e,i.context);var n=t._vOptions,r=t._vOptions=[].map.call(t.options,jr);r.some((function(t,e){return!D(t,n[e])}))&&(t.multiple?e.value.some((function(t){return Ur(t,r)})):e.value!==e.oldValue&&Ur(e.value,r))&&qr(t,"change")}}};function Fr(t,e,i){$r(t,e),(z||K)&&setTimeout((function(){$r(t,e)}),0)}function $r(t,e,i){var n=e.value,r=t.multiple;if(!r||Array.isArray(n)){for(var s,a,o=0,l=t.options.length;o<l;o++)if(a=t.options[o],r)s=M(n,jr(a))>-1,a.selected!==s&&(a.selected=s);else if(D(jr(a),n))return void(t.selectedIndex!==o&&(t.selectedIndex=o));r||(t.selectedIndex=-1)}}function Ur(t,e){return e.every((function(e){return!D(e,t)}))}function jr(t){return"_value"in t?t._value:t.value}function Vr(t){t.target.composing=!0}function Hr(t){t.target.composing&&(t.target.composing=!1,qr(t.target,"input"))}function qr(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function Wr(t){return!t.componentInstance||t.data&&t.data.transition?t:Wr(t.componentInstance._vnode)}var zr={bind:function(t,e,i){var n=e.value,r=(i=Wr(i)).data&&i.data.transition,s=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&r?(i.data.show=!0,Lr(i,(function(){t.style.display=s}))):t.style.display=n?s:"none"},update:function(t,e,i){var n=e.value;!n!=!e.oldValue&&((i=Wr(i)).data&&i.data.transition?(i.data.show=!0,n?Lr(i,(function(){t.style.display=t.__vOriginalDisplay})):Or(i,(function(){t.style.display="none"}))):t.style.display=n?t.__vOriginalDisplay:"none")},unbind:function(t,e,i,n,r){r||(t.style.display=t.__vOriginalDisplay)}},Gr={model:Br,show:zr},Kr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Yr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Yr(be(e.children)):t}function Xr(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var r=i._parentListeners;for(var n in r)e[T(n)]=r[n];return e}function Qr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Jr=function(t){return t.tag||ue(t)},Zr=function(t){return"show"===t.name},ts={name:"transition",props:Kr,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(Jr)).length){var n=this.mode,r=i[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var s=Yr(r);if(!s)return r;if(this._leaving)return Qr(t,r);var o="__transition-".concat(this._uid,"-");s.key=null==s.key?s.isComment?o+"comment":o+s.tag:a(s.key)?0===String(s.key).indexOf(o)?s.key:o+s.key:s.key;var l=(s.data||(s.data={})).transition=Xr(this),c=this._vnode,u=Yr(c);if(s.data.directives&&s.data.directives.some(Zr)&&(s.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(s,u)&&!ue(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=I({},l);if("out-in"===n)return this._leaving=!0,Vt(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Qr(t,r);if("in-out"===n){if(ue(s))return c;var d,p=function(){d()};Vt(l,"afterEnter",p),Vt(l,"enterCancelled",p),Vt(h,"delayLeave",(function(t){d=t}))}}return r}}},es=I({tag:String,moveClass:String},Kr);delete es.mode;var is={props:es,beforeMount:function(){var t=this,e=this._update;this._update=function(i,n){var r=Xe(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,i,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],a=Xr(this),o=0;o<r.length;o++)(u=r[o]).tag&&null!=u.key&&0!==String(u.key).indexOf("__vlist")&&(s.push(u),i[u.key]=u,(u.data||(u.data={})).transition=a);if(n){var l=[],c=[];for(o=0;o<n.length;o++){var u;(u=n[o]).data.transition=a,u.data.pos=u.elm.getBoundingClientRect(),i[u.key]?l.push(u):c.push(u)}this.kept=t(e,null,l),this.removed=c}return t(e,null,s)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ns),t.forEach(rs),t.forEach(ss),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var i=t.elm,n=i.style;xr(i,e),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(br,i._moveCb=function t(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(br,t),i._moveCb=null,kr(i,e))})}})))},methods:{hasMove:function(t,e){if(!mr)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){dr(i,t)})),hr(i,e),i.style.display="none",this.$el.appendChild(i);var n=Ir(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function ns(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function rs(t){t.data.newPos=t.elm.getBoundingClientRect()}function ss(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,r=e.top-i.top;if(n||r){t.data.moved=!0;var s=t.elm.style;s.transform=s.WebkitTransform="translate(".concat(n,"px,").concat(r,"px)"),s.transitionDuration="0s"}}var as={Transition:ts,TransitionGroup:is};Wi.config.mustUseProp=function(t,e,i){return"value"===i&&tn(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},Wi.config.isReservedTag=gn,Wi.config.isReservedAttr=Zi,Wi.config.getTagNamespace=function(t){return mn(t)?"svg":"math"===t?"math":void 0},Wi.config.isUnknownElement=function(t){if(!q)return!0;if(gn(t))return!1;if(t=t.toLowerCase(),null!=yn[t])return yn[t];var e=document.createElement(t);return t.indexOf("-")>-1?yn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:yn[t]=/HTMLUnknownElement/.test(e.toString())},I(Wi.options.directives,Gr),I(Wi.options.components,as),Wi.prototype.__patch__=q?Nr:A,Wi.prototype.$mount=function(t,e){return function(t,e,i){var n;t.$el=e,t.$options.render||(t.$options.render=ct),ti(t,"beforeMount"),n=function(){t._update(t._render(),i)},new qe(t,n,A,{before:function(){t._isMounted&&!t._isDestroyed&&ti(t,"beforeUpdate")}},!0),i=!1;var r=t._preWatchers;if(r)for(var s=0;s<r.length;s++)r[s].run();return null==t.$vnode&&(t._isMounted=!0,ti(t,"mounted")),t}(this,t=t&&q?function(t){return"string"==typeof t?document.querySelector(t)||document.createElement("div"):t}(t):void 0,e)},q&&setTimeout((function(){$.devtools&&it&&it.emit("init",Wi)}),0);var os=("undefined"!=typeof window?window:void 0!==i.g?i.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function ls(t,e){if(void 0===e&&(e=[]),null===t||"object"!=typeof t)return t;var i,n=(i=function(e){return e.original===t},e.filter(i)[0]);if(n)return n.copy;var r=Array.isArray(t)?[]:{};return e.push({original:t,copy:r}),Object.keys(t).forEach((function(i){r[i]=ls(t[i],e)})),r}function cs(t,e){Object.keys(t).forEach((function(i){return e(t[i],i)}))}function us(t){return null!==t&&"object"==typeof t}var hs=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=("function"==typeof i?i():i)||{}},ds={namespaced:{configurable:!0}};ds.namespaced.get=function(){return!!this._rawModule.namespaced},hs.prototype.addChild=function(t,e){this._children[t]=e},hs.prototype.removeChild=function(t){delete this._children[t]},hs.prototype.getChild=function(t){return this._children[t]},hs.prototype.hasChild=function(t){return t in this._children},hs.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},hs.prototype.forEachChild=function(t){cs(this._children,t)},hs.prototype.forEachGetter=function(t){this._rawModule.getters&&cs(this._rawModule.getters,t)},hs.prototype.forEachAction=function(t){this._rawModule.actions&&cs(this._rawModule.actions,t)},hs.prototype.forEachMutation=function(t){this._rawModule.mutations&&cs(this._rawModule.mutations,t)},Object.defineProperties(hs.prototype,ds);var ps,fs=function(t){this.register([],t,!1)};function ms(t,e,i){if(e.update(i),i.modules)for(var n in i.modules){if(!e.getChild(n))return;ms(t.concat(n),e.getChild(n),i.modules[n])}}fs.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},fs.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,i){return t+((e=e.getChild(i)).namespaced?i+"/":"")}),"")},fs.prototype.update=function(t){ms([],this.root,t)},fs.prototype.register=function(t,e,i){var n=this;void 0===i&&(i=!0);var r=new hs(e,i);0===t.length?this.root=r:this.get(t.slice(0,-1)).addChild(t[t.length-1],r),e.modules&&cs(e.modules,(function(e,r){n.register(t.concat(r),e,i)}))},fs.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1],n=e.getChild(i);n&&n.runtime&&e.removeChild(i)},fs.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1];return!!e&&e.hasChild(i)};var gs=function(t){var e=this;void 0===t&&(t={}),!ps&&"undefined"!=typeof window&&window.Vue&&xs(window.Vue);var i=t.plugins;void 0===i&&(i=[]);var n=t.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new fs(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new ps,this._makeLocalGettersCache=Object.create(null);var r=this,s=this.dispatch,a=this.commit;this.dispatch=function(t,e){return s.call(r,t,e)},this.commit=function(t,e,i){return a.call(r,t,e,i)},this.strict=n;var o=this._modules.root.state;ws(this,o,[],this._modules.root),_s(this,o),i.forEach((function(t){return t(e)})),(void 0!==t.devtools?t.devtools:ps.config.devtools)&&function(t){os&&(t._devtoolHook=os,os.emit("vuex:init",t),os.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){os.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){os.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},ys={state:{configurable:!0}};function vs(t,e,i){return e.indexOf(t)<0&&(i&&i.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function bs(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var i=t.state;ws(t,i,[],t._modules.root,!0),_s(t,i,e)}function _s(t,e,i){var n=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,s={};cs(r,(function(e,i){s[i]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,i,{get:function(){return t._vm[i]},enumerable:!0})}));var a=ps.config.silent;ps.config.silent=!0,t._vm=new ps({data:{$$state:e},computed:s}),ps.config.silent=a,t.strict&&function(t){t._vm.$watch((function(){return this._data.$$state}),(function(){}),{deep:!0,sync:!0})}(t),n&&(i&&t._withCommit((function(){n._data.$$state=null})),ps.nextTick((function(){return n.$destroy()})))}function ws(t,e,i,n,r){var s=!i.length,a=t._modules.getNamespace(i);if(n.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=n),!s&&!r){var o=Ts(e,i.slice(0,-1)),l=i[i.length-1];t._withCommit((function(){ps.set(o,l,n.state)}))}var c=n.context=function(t,e,i){var n=""===e,r={dispatch:n?t.dispatch:function(i,n,r){var s=Ss(i,n,r),a=s.payload,o=s.options,l=s.type;return o&&o.root||(l=e+l),t.dispatch(l,a)},commit:n?t.commit:function(i,n,r){var s=Ss(i,n,r),a=s.payload,o=s.options,l=s.type;o&&o.root||(l=e+l),t.commit(l,a,o)}};return Object.defineProperties(r,{getters:{get:n?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var i={},n=e.length;Object.keys(t.getters).forEach((function(r){if(r.slice(0,n)===e){var s=r.slice(n);Object.defineProperty(i,s,{get:function(){return t.getters[r]},enumerable:!0})}})),t._makeLocalGettersCache[e]=i}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return Ts(t.state,i)}}}),r}(t,a,i);n.forEachMutation((function(e,i){!function(t,e,i,n){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){i.call(t,n.state,e)}))}(t,a+i,e,c)})),n.forEachAction((function(e,i){var n=e.root?i:a+i,r=e.handler||e;!function(t,e,i,n){(t._actions[e]||(t._actions[e]=[])).push((function(e){var r,s=i.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},e);return(r=s)&&"function"==typeof r.then||(s=Promise.resolve(s)),t._devtoolHook?s.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):s}))}(t,n,r,c)})),n.forEachGetter((function(e,i){!function(t,e,i,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return i(n.state,n.getters,t.state,t.getters)})}(t,a+i,e,c)})),n.forEachChild((function(n,s){ws(t,e,i.concat(s),n,r)}))}function Ts(t,e){return e.reduce((function(t,e){return t[e]}),t)}function Ss(t,e,i){return us(t)&&t.type&&(i=e,e=t,t=t.type),{type:t,payload:e,options:i}}function xs(t){ps&&t===ps||function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:i});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[i].concat(t.init):i,e.call(this,t)}}function i(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(ps=t)}ys.state.get=function(){return this._vm._data.$$state},ys.state.set=function(t){},gs.prototype.commit=function(t,e,i){var n=this,r=Ss(t,e,i),s=r.type,a=r.payload,o=(r.options,{type:s,payload:a}),l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(o,n.state)})))},gs.prototype.dispatch=function(t,e){var i=this,n=Ss(t,e),r=n.type,s=n.payload,a={type:r,payload:s},o=this._actions[r];if(o){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,i.state)}))}catch(t){}var l=o.length>1?Promise.all(o.map((function(t){return t(s)}))):o[0](s);return new Promise((function(t,e){l.then((function(e){try{i._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,i.state)}))}catch(t){}t(e)}),(function(t){try{i._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(a,i.state,t)}))}catch(t){}e(t)}))}))}},gs.prototype.subscribe=function(t,e){return vs(t,this._subscribers,e)},gs.prototype.subscribeAction=function(t,e){return vs("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},gs.prototype.watch=function(t,e,i){var n=this;return this._watcherVM.$watch((function(){return t(n.state,n.getters)}),e,i)},gs.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},gs.prototype.registerModule=function(t,e,i){void 0===i&&(i={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),ws(this,this.state,t,this._modules.get(t),i.preserveState),_s(this,this.state)},gs.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var i=Ts(e.state,t.slice(0,-1));ps.delete(i,t[t.length-1])})),bs(this)},gs.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},gs.prototype.hotUpdate=function(t){this._modules.update(t),bs(this,!0)},gs.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(gs.prototype,ys);var ks=As((function(t,e){var i={};return Ps(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){var e=this.$store.state,i=this.$store.getters;if(t){var n=Ls(this.$store,0,t);if(!n)return;e=n.context.state,i=n.context.getters}return"function"==typeof r?r.call(this,e,i):e[r]},i[n].vuex=!0})),i})),Cs=As((function(t,e){var i={};return Ps(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this.$store.commit;if(t){var s=Ls(this.$store,0,t);if(!s)return;n=s.context.commit}return"function"==typeof r?r.apply(this,[n].concat(e)):n.apply(this.$store,[r].concat(e))}})),i})),Es=As((function(t,e){var i={};return Ps(e).forEach((function(e){var n=e.key,r=e.val;r=t+r,i[n]=function(){if(!t||Ls(this.$store,0,t))return this.$store.getters[r]},i[n].vuex=!0})),i})),Is=As((function(t,e){var i={};return Ps(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this.$store.dispatch;if(t){var s=Ls(this.$store,0,t);if(!s)return;n=s.context.dispatch}return"function"==typeof r?r.apply(this,[n].concat(e)):n.apply(this.$store,[r].concat(e))}})),i}));function Ps(t){return function(t){return Array.isArray(t)||us(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function As(t){return function(e,i){return"string"!=typeof e?(i=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,i)}}function Ls(t,e,i){return t._modulesNamespaceMap[i]}function Os(t,e,i){var n=i?t.groupCollapsed:t.group;try{n.call(t,e)}catch(i){t.log(e)}}function Ds(t){try{t.groupEnd()}catch(e){t.log(" log end ")}}function Ms(){var t=new Date;return" @ "+Rs(t.getHours(),2)+":"+Rs(t.getMinutes(),2)+":"+Rs(t.getSeconds(),2)+"."+Rs(t.getMilliseconds(),3)}function Rs(t,e){return"0",i=e-t.toString().length,new Array(i+1).join("0")+t;var i}var Ns={Store:gs,install:xs,version:"3.6.2",mapState:ks,mapMutations:Cs,mapGetters:Es,mapActions:Is,createNamespacedHelpers:function(t){return{mapState:ks.bind(null,t),mapGetters:Es.bind(null,t),mapMutations:Cs.bind(null,t),mapActions:Is.bind(null,t)}},createLogger:function(t){void 0===t&&(t={});var e=t.collapsed;void 0===e&&(e=!0);var i=t.filter;void 0===i&&(i=function(t,e,i){return!0});var n=t.transformer;void 0===n&&(n=function(t){return t});var r=t.mutationTransformer;void 0===r&&(r=function(t){return t});var s=t.actionFilter;void 0===s&&(s=function(t,e){return!0});var a=t.actionTransformer;void 0===a&&(a=function(t){return t});var o=t.logMutations;void 0===o&&(o=!0);var l=t.logActions;void 0===l&&(l=!0);var c=t.logger;return void 0===c&&(c=console),function(t){var u=ls(t.state);void 0!==c&&(o&&t.subscribe((function(t,s){var a=ls(s);if(i(t,u,a)){var o=Ms(),l=r(t),h="mutation "+t.type+o;Os(c,h,e),c.log("%c prev state","color: #9E9E9E; font-weight: bold",n(u)),c.log("%c mutation","color: #03A9F4; font-weight: bold",l),c.log("%c next state","color: #4CAF50; font-weight: bold",n(a)),Ds(c)}u=a})),l&&t.subscribeAction((function(t,i){if(s(t,i)){var n=Ms(),r=a(t),o="action "+t.type+n;Os(c,o,e),c.log("%c action","color: #03A9F4; font-weight: bold",r),Ds(c)}})))}}};const Bs=Ns;function Fs(t){return Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fs(t)}function $s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Us(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function js(t,e){if(t===e)return!0;if("object"===Fs(t)){for(var i in t)if(!js(t[i],e[i]))return!1;return!0}return!1}var Vs=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(i,n)}var e,i;return e=t,i=[{key:"createObserver",value:function(t,e){var i=this;if(this.observer&&this.destroyObserver(),!this.frozen){var n;if(this.options="function"==typeof(n=t)?{callback:n}:n,this.callback=function(t,e){i.options.callback(t,e),t&&i.options.once&&(i.frozen=!0,i.destroyObserver())},this.callback&&this.options.throttle){var r=(this.options.throttleOptions||{}).leading;this.callback=function(t,e){var i,n,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function(a){for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];if(r=l,!i||a!==n){var u=s.leading;"function"==typeof u&&(u=u(a,n)),i&&a===n||!u||t.apply(void 0,[a].concat(Us(r))),n=a,clearTimeout(i),i=setTimeout((function(){t.apply(void 0,[a].concat(Us(r))),i=0}),e)}};return a._clear=function(){clearTimeout(i),i=null},a}(this.callback,this.options.throttle,{leading:function(t){return"both"===r||"visible"===r&&t||"hidden"===r&&!t}})}this.oldResult=void 0,this.observer=new IntersectionObserver((function(t){var e=t[0];if(t.length>1){var n=t.find((function(t){return t.isIntersecting}));n&&(e=n)}if(i.callback){var r=e.isIntersecting&&e.intersectionRatio>=i.threshold;if(r===i.oldResult)return;i.oldResult=r,i.callback(r,e)}}),this.options.intersection),e.context.$nextTick((function(){i.observer&&i.observer.observe(i.el)}))}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&"number"==typeof this.options.intersection.threshold?this.options.intersection.threshold:0}}],i&&$s(e.prototype,i),t}();function Hs(t,e,i){var n=e.value;if(n)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Vs(t,n,i);t._vue_visibilityState=r}}function qs(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var Ws={bind:Hs,update:function(t,e,i){var n=e.value;if(!js(n,e.oldValue)){var r=t._vue_visibilityState;n?r?r.createObserver(n,i):Hs(t,{value:n},i):qs(t)}},unbind:qs},zs={version:"1.0.0",install:function(t){t.directive("observe-visibility",Ws)}},Gs=null;function Ks(t,e,i,n,r,s,a,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}"undefined"!=typeof window?Gs=window.Vue:void 0!==i.g&&(Gs=i.g.Vue),Gs&&Gs.use(zs);const Ys=Ks({name:"FtFlexBox"},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-flex-box"},[t._t("default")],2)}),[],!1,null,"85d0cc7a",null).exports;let Xs=0;const Qs=Ks({name:"FtTooltip",props:{position:{type:String,default:"bottom",validator:t=>"bottom"===t||"left"===t||"right"===t||"top"===t||"bottom-left"===t},tooltip:{type:String,required:!0}},data:()=>({id:"ft-tooltip-"+ ++Xs})},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"tooltip"},[e("button",{staticClass:"button",attrs:{"aria-labelledby":t.id,type:"button"}},[e("font-awesome-icon",{attrs:{icon:["fas","question-circle"]}})],1),e("p",{staticClass:"text",class:t.position,attrs:{id:t.id,role:"tooltip"}},[t._v(" "+t._s(t.tooltip)+" ")])])}),[],!1,null,"61c68e44",null).exports,Js={name:"FtInput",components:{"ft-tooltip":Qs},props:{inputType:{type:String,required:!1,default:"text"},placeholder:{type:String,required:!0},label:{type:String,default:null},value:{type:String,default:""},showActionButton:{type:Boolean,default:!0},forceActionButtonIconName:{type:Array,default:null},showClearTextButton:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!0},dataList:{type:Array,default:()=>[]},tooltip:{type:String,default:""}},data:function(){let t=["fas","search"];return null!==this.forceActionButtonIconName&&(t=this.forceActionButtonIconName),{id:"",inputData:"",searchState:{showOptions:!1,selectedOption:-1,isPointerInList:!1},visibleDataList:this.dataList,clearTextButtonExisting:!1,clearTextButtonVisible:!1,actionButtonIconName:t}},computed:{barColor:function(){return this.$store.getters.getBarColor},forceTextColor:function(){return this.isSearch&&this.barColor},idDataList:function(){return`${this.id}_datalist`},inputDataPresent:function(){return this.inputData.length>0}},watch:{dataList(t,e){t!==e&&this.updateVisibleDataList()},inputData(t,e){t!==e&&this.updateVisibleDataList()},value(t,e){t!==e&&(this.inputData=t)}},mounted:function(){this.id=this._uid,this.inputData=this.value,this.updateVisibleDataList()},methods:{handleClick:function(t){this.inputDataPresent&&(this.searchState.showOptions=!1,this.$emit("input",this.inputData),this.$emit("click",this.inputData,{event:t}))},handleInput:function(t){this.isSearch&&-1!==this.searchState.selectedOption&&this.inputData===this.visibleDataList[this.searchState.selectedOption]||(this.handleActionIconChange(),this.$emit("input",t))},handleClearTextClick:function(){this.inputDataPresent&&(this.inputData="",this.handleActionIconChange(),this.updateVisibleDataList(),this.$refs.input.value="",this.$refs.input.focus(),this.$emit("clear"))},handleActionIconChange:function(){if(this.showActionButton)if(this.inputDataPresent||null!==this.forceActionButtonIconName)try{this.getYoutubeUrlInfo(this.inputData).then((t=>{let e=!1;switch(t.urlType){case"video":case"playlist":case"search":case"channel":e=!0}null===this.forceActionButtonIconName&&(this.actionButtonIconName=e?["fas","arrow-right"]:["fas","search"])}))}catch(t){throw null===this.forceActionButtonIconName&&(this.actionButtonIconName=["fas","search"]),t}else this.actionButtonIconName=["fas","search"]},handleOptionClick:function(t){this.searchState.showOptions=!1,this.inputData=this.visibleDataList[t],this.$emit("input",this.inputData),this.handleClick()},handleKeyDown:function(t){if("Enter"===t.key)return-1!==this.searchState.selectedOption&&(this.searchState.showOptions=!1,t.preventDefault(),this.inputData=this.visibleDataList[this.searchState.selectedOption]),void this.handleClick(t);0!==this.visibleDataList.length&&(this.searchState.showOptions=!0,"ArrowDown"===t.key||"ArrowUp"===t.key?("ArrowDown"===t.key?this.searchState.selectedOption=(this.searchState.selectedOption+1)%this.visibleDataList.length:"ArrowUp"===t.key&&(this.searchState.selectedOption<1?this.searchState.selectedOption=this.visibleDataList.length-1:this.searchState.selectedOption--),this.searchState.selectedOption<0?this.searchState.selectedOption=this.visibleDataList.length:this.searchState.selectedOption>this.visibleDataList.length-1&&(this.searchState.selectedOption=0)):this.searchState.selectedOption=-1)},handleInputBlur:function(){this.searchState.isPointerInList||(this.searchState.showOptions=!1)},handleFocus:function(t){this.searchState.showOptions=!0},updateVisibleDataList:function(){if(0===this.dataList.length)return;if(""===this.inputData)return void(this.visibleDataList=this.dataList);const t=this.dataList.filter((t=>-1!==t.toLowerCase().indexOf(this.inputData.toLowerCase())));this.visibleDataList=t},updateInputData:function(t){this.inputData=t},focus(){this.$refs.input.focus()},decodeText:t=>(new DOMParser).parseFromString(t,"text/html").documentElement.textContent,...Is(["getYoutubeUrlInfo"])}};var Zs=Ks(Js,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-input-component",class:{search:t.isSearch,forceTextColor:t.forceTextColor,showActionButton:t.showActionButton,showClearTextButton:t.showClearTextButton,clearTextButtonVisible:t.inputDataPresent,disabled:t.disabled}},[t.showLabel?e("label",{staticClass:"selectLabel",attrs:{for:t.id}},[t._v(" "+t._s(t.label||t.placeholder)+" "),""!==t.tooltip?e("ft-tooltip",{staticClass:"selectTooltip",attrs:{position:"bottom",tooltip:t.tooltip}}):t._e()],1):t._e(),t.showClearTextButton?e("font-awesome-icon",{staticClass:"clearInputTextButton",class:{visible:t.inputDataPresent},attrs:{icon:["fas","times-circle"],tabindex:"0",role:"button",title:t.$t("Search Bar.Clear Input")},on:{click:t.handleClearTextClick,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.handleClearTextClick.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleClearTextClick.apply(null,arguments))}]}}):t._e(),e("span",{staticClass:"inputWrapper"},["checkbox"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData,expression:"inputData"}],ref:"input",staticClass:"ft-input",attrs:{id:t.id,list:t.idDataList,autocomplete:"off",placeholder:t.placeholder,disabled:t.disabled,spellcheck:t.spellcheck,type:"checkbox"},domProps:{checked:Array.isArray(t.inputData)?t._i(t.inputData,null)>-1:t.inputData},on:{input:e=>t.handleInput(e.target.value),focus:t.handleFocus,blur:t.handleInputBlur,keydown:t.handleKeyDown,change:function(e){var i=t.inputData,n=e.target,r=!!n.checked;if(Array.isArray(i)){var s=t._i(i,null);n.checked?s<0&&(t.inputData=i.concat([null])):s>-1&&(t.inputData=i.slice(0,s).concat(i.slice(s+1)))}else t.inputData=r}}}):"radio"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData,expression:"inputData"}],ref:"input",staticClass:"ft-input",attrs:{id:t.id,list:t.idDataList,autocomplete:"off",placeholder:t.placeholder,disabled:t.disabled,spellcheck:t.spellcheck,type:"radio"},domProps:{checked:t._q(t.inputData,null)},on:{input:e=>t.handleInput(e.target.value),focus:t.handleFocus,blur:t.handleInputBlur,keydown:t.handleKeyDown,change:function(e){t.inputData=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData,expression:"inputData"}],ref:"input",staticClass:"ft-input",attrs:{id:t.id,list:t.idDataList,autocomplete:"off",placeholder:t.placeholder,disabled:t.disabled,spellcheck:t.spellcheck,type:t.inputType},domProps:{value:t.inputData},on:{input:[function(e){e.target.composing||(t.inputData=e.target.value)},e=>t.handleInput(e.target.value)],focus:t.handleFocus,blur:t.handleInputBlur,keydown:t.handleKeyDown}}),t.showActionButton?e("font-awesome-icon",{staticClass:"inputAction",class:{enabled:t.inputDataPresent,withLabel:t.showLabel},attrs:{icon:t.actionButtonIconName},on:{click:t.handleClick}}):t._e()],1),e("div",{staticClass:"options"},[""!==t.inputData&&t.visibleDataList.length>0&&t.searchState.showOptions?e("ul",{staticClass:"list",attrs:{id:t.idDataList},on:{mouseenter:function(e){t.searchState.isPointerInList=!0},mouseleave:function(e){t.searchState.isPointerInList=!1}}},t._l(t.visibleDataList,(function(i,n){return e("li",{key:n,class:t.searchState.selectedOption==n?"hover":"",on:{click:function(e){return t.handleOptionClick(n)},mouseenter:function(e){t.searchState.selectedOption=n}}},[t._v(" "+t._s(i)+" ")])})),0):t._e()])],1)}),[],!1,null,"731f9c77",null);const ta=Zs.exports;var ea=Ks({name:"FtElementList",props:{title:{type:String,required:!0},labels:{type:Array,required:!0},values:{type:Array,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{id:"",selectedValue:""}},computed:{inputName:function(){return this.title.replace(" ","").toLowerCase()+this.id}},mounted:function(){this.id=this._uid,this.selectedValue=this.values[0]},methods:{updateSelectedValue:function(t){this.selectedValue=t}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"pure-radiobutton filter"},[e("h3",{staticClass:"radioTitle"},[t._v(" "+t._s(t.title)+" ")]),t._l(t.labels,(function(i,n){return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],key:n,staticClass:"radio",attrs:{id:t.values[n]+t.id,name:t.inputName,disabled:t.disabled,type:"radio"},domProps:{value:t.values[n],checked:0===n,checked:t._q(t.selectedValue,t.values[n])},on:{change:[function(e){t.selectedValue=t.values[n]},function(e){return t.$emit("change",t.values[n])}]}}),e("label",{key:i,attrs:{for:t.values[n]+t.id}},[t._v(" "+t._s(i)+" ")])]}))],2)}),[],!1,null,"66f038a1",null);const ia=Ks({name:"FtSearchFilters",components:{"ft-flex-box":Ys,"ft-radio-button":ea.exports},data:function(){return{sortByValues:["relevance","rating","upload_date","view_count"],timeValues:["","hour","today","week","month","year"],typeValues:["all","video","channel","playlist","movie"],durationValues:["","short","medium","long"]}},computed:{searchSettings:function(){return this.$store.getters.getSearchSettings},filterValueChanged:function(){return[this.$refs.sortByRadio.selectedValue!==this.sortByValues[0],this.$refs.timeRadio.selectedValue!==this.timeValues[0],this.$refs.typeRadio.selectedValue!==this.typeValues[0],this.$refs.durationRadio.selectedValue!==this.durationValues[0]].some((t=>!0===t))},sortByLabels:function(){return[this.$t("Search Filters.Sort By.Most Relevant"),this.$t("Search Filters.Sort By.Rating"),this.$t("Search Filters.Sort By.Upload Date"),this.$t("Search Filters.Sort By.View Count")]},timeLabels:function(){return[this.$t("Search Filters.Time.Any Time"),this.$t("Search Filters.Time.Last Hour"),this.$t("Search Filters.Time.Today"),this.$t("Search Filters.Time.This Week"),this.$t("Search Filters.Time.This Month"),this.$t("Search Filters.Time.This Year")]},typeLabels:function(){return[this.$t("Search Filters.Type.All Types"),this.$t("Search Filters.Type.Videos"),this.$t("Search Filters.Type.Channels"),this.$t("Playlists"),this.$t("Search Filters.Type.Movies")]},durationLabels:function(){return[this.$t("Search Filters.Duration.All Durations"),this.$t("Search Filters.Duration.Short (< 4 minutes)"),this.$t("Search Filters.Duration.Medium (4 - 20 minutes)"),this.$t("Search Filters.Duration.Long (> 20 minutes)")]}},methods:{isVideoOrMovieOrAll:t=>"video"===t||"movie"===t||"all"===t,updateSortBy:function(t){this.$store.commit("setSearchSortBy",t),this.$emit("filterValueUpdated",this.filterValueChanged)},updateTime:function(t){this.isVideoOrMovieOrAll(this.searchSettings.type)||(this.$refs.typeRadio.updateSelectedValue("all"),this.$store.commit("setSearchType","all")),this.$store.commit("setSearchTime",t),this.$emit("filterValueUpdated",this.filterValueChanged)},updateType:function(t){if("channel"===t||"playlist"===t){const t=this.$refs.timeRadio,e=this.$refs.durationRadio,i=this.$refs.sortByRadio;t.updateSelectedValue(""),e.updateSelectedValue(""),i.updateSelectedValue(this.sortByValues[0]),this.$store.commit("setSearchTime",""),this.$store.commit("setSearchDuration",""),this.$store.commit("setSearchSortBy",this.sortByValues[0])}this.$store.commit("setSearchType",t),this.$emit("filterValueUpdated",this.filterValueChanged)},updateDuration:function(t){""===t||this.isVideoOrMovieOrAll(this.searchSettings.type)||(this.$refs.typeRadio.updateSelectedValue("all"),this.updateType("all")),this.$store.commit("setSearchDuration",t),this.$emit("filterValueUpdated",this.filterValueChanged)}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("div",{staticClass:"searchFilterInner"},[e("h2",{staticClass:"center"},[t._v(" "+t._s(t.$t("Search Filters.Search Filters"))+" ")]),e("ft-flex-box",{staticClass:"radioFlexBox"},[e("ft-radio-button",{ref:"sortByRadio",staticClass:"searchRadio",attrs:{title:t.$t("Search Filters.Sort By.Sort By"),labels:t.sortByLabels,values:t.sortByValues},on:{change:t.updateSortBy}}),e("ft-radio-button",{ref:"timeRadio",staticClass:"searchRadio",attrs:{title:t.$t("Search Filters.Time.Time"),labels:t.timeLabels,values:t.timeValues},on:{change:t.updateTime}}),e("ft-radio-button",{ref:"typeRadio",staticClass:"searchRadio",attrs:{title:t.$t("Search Filters.Type.Type"),labels:t.typeLabels,values:t.typeValues},on:{change:t.updateType}}),e("ft-radio-button",{ref:"durationRadio",staticClass:"searchRadio",attrs:{title:t.$t("Search Filters.Duration.Duration"),labels:t.durationLabels,values:t.durationValues},on:{change:t.updateDuration}})],1)],1)])}),[],!1,null,"498bc9a2",null).exports,na=Ks({name:"FtCard"},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-card",on:{focusout:function(e){return t.$emit("focusout")}}},[t._t("default")],2)}),[],!1,null,"468747c3",null).exports,ra=Ks({name:"FtButton",props:{label:{type:String,default:""},textColor:{type:String,default:"var(--text-with-accent-color)"},backgroundColor:{type:String,default:"var(--accent-color)"},id:{type:String,default:""}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("button",{staticClass:"btn ripple",style:{color:t.textColor,backgroundColor:t.backgroundColor,border:`2px solid ${t.backgroundColor}`},attrs:{id:t.id.length>0?t.id:null},on:{click:function(e){return t.$emit("click")}}},[t._t("default",(function(){return[t._v(" "+t._s(t.label)+" ")]}))],2)}),[],!1,null,"e711f202",null).exports;function sa(t){return t.replaceAll(/\s+/g,"")}const aa={name:"FtPrompt",components:{"ft-card":na,"ft-flex-box":Ys,"ft-button":ra},props:{label:{type:String,default:""},extraLabels:{type:Array,default:()=>[]},optionNames:{type:Array,default:()=>[]},optionValues:{type:Array,default:()=>[]},showClose:{type:Boolean,default:!1},autosize:{type:Boolean,default:!1}},data:function(){return{promptButtons:[]}},computed:{sanitizedLabel:function(){return sa(this.label)}},beforeDestroy:function(){document.removeEventListener("keydown",this.closeEventFunction,!0)},mounted:function(){document.addEventListener("keydown",this.closeEventFunction,!0),document.querySelector(".prompt").addEventListener("keydown",this.arrowKeys,!0),this.promptButtons=Array.from(document.querySelector(".prompt .promptCard .ft-flex-box").childNodes).filter((t=>t.id&&t.id.startsWith("prompt"))),this.focusItem(0)},methods:{hide:function(){this.$emit("click",null)},handleHide:function(t){"button"!==t.target.getAttribute("role")&&"prompt"!==t.target.className||this.hide()},focusItem:function(t){let e=t;e<0?e=this.promptButtons.length:e>=this.promptButtons.length&&(e=0),e>=0&&e<this.promptButtons.length&&this.promptButtons[e].focus({focusVisible:!0})},closeEventFunction:function(t){"keydown"===t.type&&"Escape"===t.key&&(t.preventDefault(),this.hide())},arrowKeys:function(t){if("ArrowLeft"===t.key||"ArrowRight"===t.key){t.preventDefault();const e=this.promptButtons.findIndex((e=>e===t.target)),i="ArrowLeft"===t.key?-1:1;this.focusItem(parseInt(e)+i)}}}};var oa=Ks(aa,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"prompt",attrs:{tabindex:"-1"},on:{click:t.handleHide,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleHide.apply(null,arguments)}}},[e("ft-card",{staticClass:"promptCard",class:{autosize:t.autosize},attrs:{"aria-labelledby":"dialog-"+t.sanitizedLabel}},[t._t("default",(function(){return[e("h2",{staticClass:"center",attrs:{id:"dialog-"+t.sanitizedLabel}},[t._v(" "+t._s(t.label)+" ")]),t._l(t.extraLabels,(function(i){return e("p",{key:i,staticClass:"center"},[e("strong",[t._v(" "+t._s(i)+" ")])])})),e("ft-flex-box",[t._l(t.optionNames,(function(i,n){return e("ft-button",{key:n,attrs:{id:"prompt-"+t.sanitizedLabel+"-"+n,label:i},on:{click:function(e){return t.$emit("click",t.optionValues[n])}}})})),t.showClose?e("ft-button",{attrs:{id:"prompt-"+t.sanitizedLabel+"-close",label:t.$t("Close"),tabindex:"0","text-color":"'var(--accent-color)'","background-color":"'var(--text-with-accent-color)'"},on:{click:t.hide}}):t._e()],2)]}))],2)],1)}),[],!1,null,"0e20fc5b",null);const la=oa.exports,ca={name:"FtIconButton",components:{"ft-prompt":la},props:{title:{type:String,default:""},icon:{type:Array,default:()=>["fas","ellipsis-v"]},theme:{type:String,default:"base"},useShadow:{type:Boolean,default:!0},padding:{type:Number,default:10},size:{type:Number,default:20},forceDropdown:{type:Boolean,default:!1},returnIndex:{type:Boolean,default:!1},dropdownPositionX:{type:String,default:"center"},dropdownPositionY:{type:String,default:"bottom"},dropdownOptions:{type:Array,default:()=>[]},dropdownModalOnMobile:{type:Boolean,default:!1}},data:function(){return{dropdownShown:!1,mouseDownOnIcon:!1,useModal:!1}},mounted:function(){this.dropdownModalOnMobile&&(this.useModal=window.innerWidth<=900,window.addEventListener("resize",this.handleResize))},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{sanitizeForHtmlId:sa,hideDropdown:function(){this.dropdownShown=!1},handleIconClick:function(){this.forceDropdown||this.dropdownOptions.length>0?(this.dropdownShown=!this.dropdownShown,this.dropdownShown&&!this.useModal&&setTimeout((()=>{this.$refs.dropdown.focus()}),0)):this.$emit("click")},handleIconMouseDown:function(){this.dropdownShown&&(this.mouseDownOnIcon=!0)},handleDropdownFocusOut:function(){this.mouseDownOnIcon?this.mouseDownOnIcon=!1:this.$refs.dropdown.matches(":focus-within")||(this.dropdownShown=!1)},handleDropdownClick:function({url:t,index:e}){this.returnIndex?this.$emit("click",e):this.$emit("click",t),this.dropdownShown=!1},handleResize:function(){this.useModal=window.innerWidth<=900}}};var ua=Ks(ca,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ftIconButton"},[e("font-awesome-icon",{staticClass:"iconButton",class:{[t.theme]:!0,shadow:t.useShadow},style:{padding:t.padding+"px",fontSize:t.size+"px"},attrs:{title:t.title,icon:t.icon,tabindex:"0",role:"button"},on:{click:t.handleIconClick,mousedown:t.handleIconMouseDown,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleIconClick.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.handleIconClick.apply(null,arguments))}]}}),t.useModal?e("ft-prompt",{directives:[{name:"show",rawName:"v-show",value:t.dropdownShown,expression:"dropdownShown"}],attrs:{autosize:!0,label:t.sanitizeForHtmlId(`iconButtonPrompt-${t.title}`)},on:{click:function(e){t.dropdownShown=!1}}},[t._t("default",(function(){return[t.dropdownOptions.length>0?e("ul",{staticClass:"list",attrs:{role:"listbox","aria-expanded":t.dropdownShown}},t._l(t.dropdownOptions,(function(i,n){return e("li",{key:n,class:"divider"===i.type?"listItemDivider":"listItem",attrs:{id:t.sanitizeForHtmlId(t.title+"-"+n),role:"option","aria-selected":"false",tabindex:"-1"},on:{click:function(e){return t.handleDropdownClick({url:i.value,index:n},e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleDropdownClick({url:i.value,index:n},e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.handleDropdownClick({url:i.value,index:n},e)}]}},[t._v(" "+t._s("divider"===i.type?"":i.label)+" ")])})),0):t._e()]}))],2):e("div",{directives:[{name:"show",rawName:"v-show",value:t.dropdownShown,expression:"dropdownShown"}],ref:"dropdown",staticClass:"iconDropdown",class:{left:"left"===t.dropdownPositionX,right:"right"===t.dropdownPositionX,center:"center"===t.dropdownPositionX,bottom:"bottom"===t.dropdownPositionY,top:"top"===t.dropdownPositionY},attrs:{tabindex:"-1"},on:{focusout:t.handleDropdownFocusOut}},[t._t("default",(function(){return[t.dropdownOptions.length>0?e("ul",{staticClass:"list",attrs:{role:"listbox","aria-expanded":t.dropdownShown}},t._l(t.dropdownOptions,(function(i,n){return e("li",{key:n,class:"divider"===i.type?"listItemDivider":"listItem",attrs:{id:t.sanitizeForHtmlId(t.title+"-"+n),role:"option","aria-selected":"false",tabindex:"-1"},on:{click:function(e){return t.handleDropdownClick({url:i.value,index:n},e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleDropdownClick({url:i.value,index:n},e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.handleDropdownClick({url:i.value,index:n},e)}]}},[t._v(" "+t._s("divider"===i.type?"":i.label)+" ")])})),0):t._e()]}))],2)],1)}),[],!1,null,"d79f0032",null);const ha=ua.exports,da="show-open-dialog",pa="sync-create",fa="sync-upsert",ma="sync-delete",ga="sync-delete-all",ya="sync-history-update-watch-progress",va="sync-history-update-playlist",ba="sync-playlists-upsert-video",_a="sync-playlists-delete-video",wa="allChannels",Ta=new Wi;var Sa=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],xa=["dateStyle","timeStyle","calendar","localeMatcher","hour12","hourCycle","timeZone","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function ka(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}var Ca=Array.isArray;function Ea(t){return null!==t&&"object"==typeof t}function Ia(t){return"string"==typeof t}var Pa=Object.prototype.toString,Aa="[object Object]";function La(t){return Pa.call(t)===Aa}function Oa(t){return null==t}function Da(t){return"function"==typeof t}function Ma(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=null,n=null;return 1===t.length?Ea(t[0])||Ca(t[0])?n=t[0]:"string"==typeof t[0]&&(i=t[0]):2===t.length&&("string"==typeof t[0]&&(i=t[0]),(Ea(t[1])||Ca(t[1]))&&(n=t[1])),{locale:i,params:n}}function Ra(t){return JSON.parse(JSON.stringify(t))}function Na(t,e){return!!~t.indexOf(e)}var Ba=Object.prototype.hasOwnProperty;function Fa(t,e){return Ba.call(t,e)}function $a(t){for(var e=arguments,i=Object(t),n=1;n<arguments.length;n++){var r=e[n];if(null!=r){var s=void 0;for(s in r)Fa(r,s)&&(Ea(r[s])?i[s]=$a(i[s],r[s]):i[s]=r[s])}}return i}function Ua(t,e){if(t===e)return!0;var i=Ea(t),n=Ea(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var r=Ca(t),s=Ca(e);if(r&&s)return t.length===e.length&&t.every((function(t,i){return Ua(t,e[i])}));if(r||s)return!1;var a=Object.keys(t),o=Object.keys(e);return a.length===o.length&&a.every((function(i){return Ua(t[i],e[i])}))}catch(t){return!1}}var ja={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var i=e.data,n=e.parent,r=e.props,s=e.slots,a=n.$i18n;if(a){var o=r.path,l=r.locale,c=r.places,u=s(),h=a.i(o,l,function(t){var e;for(e in t)if("default"!==e)return!1;return Boolean(e)}(u)||c?function(t,e){var i=e?function(t){return Array.isArray(t)?t.reduce(Ha,{}):Object.assign({},t)}(e):{};if(!t)return i;var n=(t=t.filter((function(t){return t.tag||""!==t.text.trim()}))).every(qa);return t.reduce(n?Va:Ha,i)}(u.default,c):u),d=r.tag&&!0!==r.tag||!1===r.tag?r.tag:"span";return d?t(d,i,h):h}}};function Va(t,e){return e.data&&e.data.attrs&&e.data.attrs.place&&(t[e.data.attrs.place]=e),t}function Ha(t,e,i){return t[i]=e,t}function qa(t){return Boolean(t.data&&t.data.attrs&&t.data.attrs.place)}var Wa,za={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(t,e){var i=e.props,n=e.parent,r=e.data,s=n.$i18n;if(!s)return null;var a=null,o=null;Ia(i.format)?a=i.format:Ea(i.format)&&(i.format.key&&(a=i.format.key),o=Object.keys(i.format).reduce((function(t,e){var n;return Na(Sa,e)?Object.assign({},t,((n={})[e]=i.format[e],n)):t}),null));var l=i.locale||s.locale,c=s._ntp(i.value,l,a,o),u=c.map((function(t,e){var i,n=r.scopedSlots&&r.scopedSlots[t.type];return n?n(((i={})[t.type]=t.value,i.index=e,i.parts=c,i)):t.value})),h=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return h?t(h,{attrs:r.attrs,class:r.class,staticClass:r.staticClass},u):u}};function Ga(t,e,i){Xa(0,i)&&Qa(t,e,i)}function Ka(t,e,i,n){if(Xa(0,i)){var r=i.context.$i18n;(function(t,e){var i=e.context;return t._locale===i.$i18n.locale})(t,i)&&Ua(e.value,e.oldValue)&&Ua(t._localeMessage,r.getLocaleMessage(r.locale))||Qa(t,e,i)}}function Ya(t,e,i,n){if(i.context){var r=i.context.$i18n||{};e.modifiers.preserve||r.preserveDirectiveContent||(t.textContent=""),t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale,t._localeMessage=void 0,delete t._localeMessage}else ka("Vue instance does not exists in VNode context")}function Xa(t,e){var i=e.context;return i?!!i.$i18n||(ka("VueI18n instance does not exists in Vue instance"),!1):(ka("Vue instance does not exists in VNode context"),!1)}function Qa(t,e,i){var n,r,s=function(t){var e,i,n,r;return Ia(t)?e=t:La(t)&&(e=t.path,i=t.locale,n=t.args,r=t.choice),{path:e,locale:i,args:n,choice:r}}(e.value),a=s.path,o=s.locale,l=s.args,c=s.choice;if(a||o||l)if(a){var u=i.context;t._vt=t.textContent=null!=c?(n=u.$i18n).tc.apply(n,[a,c].concat(Ja(o,l))):(r=u.$i18n).t.apply(r,[a].concat(Ja(o,l))),t._locale=u.$i18n.locale,t._localeMessage=u.$i18n.getLocaleMessage(u.$i18n.locale)}else ka("`path` is required in v-t directive");else ka("value type not supported")}function Ja(t,e){var i=[];return t&&i.push(t),e&&(Array.isArray(e)||La(e))&&i.push(e),i}function Za(t,e){void 0===e&&(e={bridge:!1}),Za.installed=!0,(Wa=t).version&&Number(Wa.version.split(".")[0]),function(t){t.prototype.hasOwnProperty("$i18n")||Object.defineProperty(t.prototype,"$i18n",{get:function(){return this._i18n}}),t.prototype.$t=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=this.$i18n;return n._t.apply(n,[t,n.locale,n._getMessages(),this].concat(e))},t.prototype.$tc=function(t,e){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];var r=this.$i18n;return r._tc.apply(r,[t,r.locale,r._getMessages(),this,e].concat(i))},t.prototype.$te=function(t,e){var i=this.$i18n;return i._te(t,i.locale,i._getMessages(),e)},t.prototype.$d=function(t){for(var e,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];return(e=this.$i18n).d.apply(e,[t].concat(i))},t.prototype.$n=function(t){for(var e,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];return(e=this.$i18n).n.apply(e,[t].concat(i))}}(Wa),Wa.mixin(function(t){function e(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return void 0===t&&(t=!1),t?{mounted:e}:{beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18nBridge||t.__i18n?{}:null),t.i18n){if(t.i18n instanceof vo){if(t.__i18nBridge||t.__i18n)try{var e=t.i18n&&t.i18n.messages?t.i18n.messages:{};(t.__i18nBridge||t.__i18n).forEach((function(t){e=$a(e,JSON.parse(t))})),Object.keys(e).forEach((function(i){t.i18n.mergeLocaleMessage(i,e[i])}))}catch(t){}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(La(t.i18n)){var i=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof vo?this.$root.$i18n:null;if(i&&(t.i18n.root=this.$root,t.i18n.formatter=i.formatter,t.i18n.fallbackLocale=i.fallbackLocale,t.i18n.formatFallbackMessages=i.formatFallbackMessages,t.i18n.silentTranslationWarn=i.silentTranslationWarn,t.i18n.silentFallbackWarn=i.silentFallbackWarn,t.i18n.pluralizationRules=i.pluralizationRules,t.i18n.preserveDirectiveContent=i.preserveDirectiveContent),t.__i18nBridge||t.__i18n)try{var n=t.i18n&&t.i18n.messages?t.i18n.messages:{};(t.__i18nBridge||t.__i18n).forEach((function(t){n=$a(n,JSON.parse(t))})),t.i18n.messages=n}catch(t){}var r=t.i18n.sharedMessages;r&&La(r)&&(t.i18n.messages=$a(t.i18n.messages,r)),this._i18n=new vo(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),i&&i.onComponentInstanceCreated(this._i18n)}}else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof vo?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof vo&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var t=this.$options;t.i18n=t.i18n||(t.__i18nBridge||t.__i18n?{}:null),t.i18n?(t.i18n instanceof vo||La(t.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof vo||t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof vo)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:e,beforeDestroy:function(){if(this._i18n){var t=this;this.$nextTick((function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher)}))}}}}(e.bridge)),Wa.directive("t",{bind:Ga,update:Ka,unbind:Ya}),Wa.component(ja.name,ja),Wa.component(za.name,za),Wa.config.optionMergeStrategies.i18n=function(t,e){return void 0===e?t:e}}var to=function(){this._caches=Object.create(null)};to.prototype.interpolate=function(t,e){if(!e)return[t];var i=this._caches[t];return i||(i=function(t){for(var e=[],i=0,n="";i<t.length;){var r=t[i++];if("{"===r){n&&e.push({type:"text",value:n}),n="";var s="";for(r=t[i++];void 0!==r&&"}"!==r;)s+=r,r=t[i++];var a="}"===r,o=eo.test(s)?"list":a&&io.test(s)?"named":"unknown";e.push({value:s,type:o})}else"%"===r?"{"!==t[i]&&(n+=r):n+=r}return n&&e.push({type:"text",value:n}),e}(t),this._caches[t]=i),function(t,e){var i=[],n=0,r=Array.isArray(e)?"list":Ea(e)?"named":"unknown";if("unknown"===r)return i;for(;n<t.length;){var s=t[n];switch(s.type){case"text":i.push(s.value);break;case"list":i.push(e[parseInt(s.value,10)]);break;case"named":"named"===r&&i.push(e[s.value])}n++}return i}(i,e)};var eo=/^(?:\d)+/,io=/^(?:\w)+/,no=0,ro=5,so=6,ao=[];ao[0]={ws:[0],ident:[3,no],"[":[4],eof:[7]},ao[1]={ws:[1],".":[2],"[":[4],eof:[7]},ao[2]={ws:[2],ident:[3,no],0:[3,no],number:[3,no]},ao[3]={ident:[3,no],0:[3,no],number:[3,no],ws:[1,1],".":[2,1],"[":[4,1],eof:[7,1]},ao[4]={"'":[ro,no],'"':[so,no],"[":[4,2],"]":[1,3],eof:8,else:[4,no]},ao[ro]={"'":[4,no],eof:8,else:[ro,no]},ao[so]={'"':[4,no],eof:8,else:[so,no]};var oo=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function lo(t){if(null==t)return"eof";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}var co=function(){this._cache=Object.create(null)};co.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=function(t){var e,i,n,r,s,a,o,l=[],c=-1,u=0,h=0,d=[];function p(){var e=t[c+1];if(u===ro&&"'"===e||u===so&&'"'===e)return c++,n="\\"+e,d[no](),!0}for(d[1]=function(){void 0!==i&&(l.push(i),i=void 0)},d[no]=function(){void 0===i?i=n:i+=n},d[2]=function(){d[no](),h++},d[3]=function(){if(h>0)h--,u=4,d[no]();else{if(h=0,void 0===i)return!1;if(!1===(i=function(t){var e,i,n,r=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(n=r,oo.test(n)?(i=(e=r).charCodeAt(0))!==e.charCodeAt(e.length-1)||34!==i&&39!==i?e:e.slice(1,-1):"*"+r)}(i)))return!1;d[1]()}};null!==u;)if(c++,"\\"!==(e=t[c])||!p()){if(r=lo(e),8===(s=(o=ao[u])[r]||o.else||8))return;if(u=s[0],(a=d[s[1]])&&(n=void 0===(n=s[2])?e:n,!1===a()))return;if(7===u)return l}}(t),e&&(this._cache[t]=e)),e||[]},co.prototype.getPathValue=function(t,e){if(!Ea(t))return null;var i=this.parsePath(e);if(0===i.length)return null;for(var n=i.length,r=t,s=0;s<n;){var a=r[i[s]];if(null==a)return null;r=a,s++}return r};var uo,ho=/<\/?[\w\s="/.':;#-\/]+>/,po=/(?:@(?:\.[a-zA-Z]+)?:(?:[\w\-_|./]+|\([\w\-_:|./]+\)))/g,fo=/^@(?:\.([a-zA-Z]+))?:/,mo=/[()]/g,go={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()},capitalize:function(t){return""+t.charAt(0).toLocaleUpperCase()+t.substr(1)}},yo=new to,vo=function(t){var e=this;void 0===t&&(t={}),!Wa&&"undefined"!=typeof window&&window.Vue&&Za(window.Vue);var i=t.locale||"en-US",n=!1!==t.fallbackLocale&&(t.fallbackLocale||"en-US"),r=t.messages||{},s=t.dateTimeFormats||t.datetimeFormats||{},a=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||yo,this._modifiers=t.modifiers||{},this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._fallbackRootWithEmptyString=void 0===t.fallbackRootWithEmptyString||!!t.fallbackRootWithEmptyString,this._formatFallbackMessages=void 0!==t.formatFallbackMessages&&!!t.formatFallbackMessages,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&t.silentTranslationWarn,this._silentFallbackWarn=void 0!==t.silentFallbackWarn&&!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new co,this._dataListeners=new Set,this._componentInstanceCreatedListener=t.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==t.preserveDirectiveContent&&!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._warnHtmlInMessage=t.warnHtmlInMessage||"off",this._postTranslation=t.postTranslation||null,this._escapeParameterHtml=t.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in t&&(this.__VUE_I18N_BRIDGE__=t.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(t,i){var n,r,s=Object.getPrototypeOf(e);return s&&s.getChoiceIndex?s.getChoiceIndex.call(e,t,i):e.locale in e.pluralizationRules?e.pluralizationRules[e.locale].apply(e,[t,i]):(n=t,r=i,n=Math.abs(n),2===r?n?n>1?1:0:1:n?Math.min(n,2):0)},this._exist=function(t,i){return!(!t||!i||Oa(e._path.getPathValue(t,i))&&!t[i])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(r).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,r[t])})),this._initVM({locale:i,fallbackLocale:n,messages:r,dateTimeFormats:s,numberFormats:a})},bo={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};vo.prototype._checkLocaleMessage=function(t,e,i){var n=function(t,e,i,r){if(La(i))Object.keys(i).forEach((function(s){var a=i[s];La(a)?(r.push(s),r.push("."),n(t,e,a,r),r.pop(),r.pop()):(r.push(s),n(t,e,a,r),r.pop())}));else if(Ca(i))i.forEach((function(i,s){La(i)?(r.push("["+s+"]"),r.push("."),n(t,e,i,r),r.pop(),r.pop()):(r.push("["+s+"]"),n(t,e,i,r),r.pop())}));else if(Ia(i)&&ho.test(i)){var s="Detected HTML in message '"+i+"' of keypath '"+r.join("")+"' at '"+e+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===t?ka(s):"error"===t&&function(t,e){"undefined"!=typeof console&&console.error("[vue-i18n] "+t)}(s)}};n(e,t,i,[])},vo.prototype._initVM=function(t){var e=Wa.config.silent;Wa.config.silent=!0,this._vm=new Wa({data:t,__VUE18N__INSTANCE__:!0}),Wa.config.silent=e},vo.prototype.destroyVM=function(){this._vm.$destroy()},vo.prototype.subscribeDataChanging=function(t){this._dataListeners.add(t)},vo.prototype.unsubscribeDataChanging=function(t){var e,i;e=this._dataListeners,i=t,e.delete(i)},vo.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",(function(){for(var e,i,n=(e=t._dataListeners,i=[],e.forEach((function(t){return i.push(t)})),i),r=n.length;r--;)Wa.nextTick((function(){n[r]&&n[r].$forceUpdate()}))}),{deep:!0})},vo.prototype.watchLocale=function(t){if(t){if(!this.__VUE_I18N_BRIDGE__)return null;var e=this,i=this._vm;return this.vm.$watch("locale",(function(n){i.$set(i,"locale",n),e.__VUE_I18N_BRIDGE__&&t&&(t.locale.value=n),i.$forceUpdate()}),{immediate:!0})}if(!this._sync||!this._root)return null;var n=this._vm;return this._root.$i18n.vm.$watch("locale",(function(t){n.$set(n,"locale",t),n.$forceUpdate()}),{immediate:!0})},vo.prototype.onComponentInstanceCreated=function(t){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(t,this)},bo.vm.get=function(){return this._vm},bo.messages.get=function(){return Ra(this._getMessages())},bo.dateTimeFormats.get=function(){return Ra(this._getDateTimeFormats())},bo.numberFormats.get=function(){return Ra(this._getNumberFormats())},bo.availableLocales.get=function(){return Object.keys(this.messages).sort()},bo.locale.get=function(){return this._vm.locale},bo.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},bo.fallbackLocale.get=function(){return this._vm.fallbackLocale},bo.fallbackLocale.set=function(t){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",t)},bo.formatFallbackMessages.get=function(){return this._formatFallbackMessages},bo.formatFallbackMessages.set=function(t){this._formatFallbackMessages=t},bo.missing.get=function(){return this._missing},bo.missing.set=function(t){this._missing=t},bo.formatter.get=function(){return this._formatter},bo.formatter.set=function(t){this._formatter=t},bo.silentTranslationWarn.get=function(){return this._silentTranslationWarn},bo.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},bo.silentFallbackWarn.get=function(){return this._silentFallbackWarn},bo.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t},bo.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},bo.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t},bo.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},bo.warnHtmlInMessage.set=function(t){var e=this,i=this._warnHtmlInMessage;if(this._warnHtmlInMessage=t,i!==t&&("warn"===t||"error"===t)){var n=this._getMessages();Object.keys(n).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,n[t])}))}},bo.postTranslation.get=function(){return this._postTranslation},bo.postTranslation.set=function(t){this._postTranslation=t},bo.sync.get=function(){return this._sync},bo.sync.set=function(t){this._sync=t},vo.prototype._getMessages=function(){return this._vm.messages},vo.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},vo.prototype._getNumberFormats=function(){return this._vm.numberFormats},vo.prototype._warnDefault=function(t,e,i,n,r,s){if(!Oa(i))return i;if(this._missing){var a=this._missing.apply(null,[t,e,n,r]);if(Ia(a))return a}if(this._formatFallbackMessages){var o=Ma.apply(void 0,r);return this._render(e,s,o.params,e)}return e},vo.prototype._isFallbackRoot=function(t){return(this._fallbackRootWithEmptyString?!t:Oa(t))&&!Oa(this._root)&&this._fallbackRoot},vo.prototype._isSilentFallbackWarn=function(t){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(t):this._silentFallbackWarn},vo.prototype._isSilentFallback=function(t,e){return this._isSilentFallbackWarn(e)&&(this._isFallbackRoot()||t!==this.fallbackLocale)},vo.prototype._isSilentTranslationWarn=function(t){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(t):this._silentTranslationWarn},vo.prototype._interpolate=function(t,e,i,n,r,s,a){if(!e)return null;var o,l=this._path.getPathValue(e,i);if(Ca(l)||La(l))return l;if(Oa(l)){if(!La(e))return null;if(!Ia(o=e[i])&&!Da(o))return null}else{if(!Ia(l)&&!Da(l))return null;o=l}return Ia(o)&&(o.indexOf("@:")>=0||o.indexOf("@.")>=0)&&(o=this._link(t,e,o,n,"raw",s,a)),this._render(o,r,s,i)},vo.prototype._link=function(t,e,i,n,r,s,a){var o=i,l=o.match(po);for(var c in l)if(l.hasOwnProperty(c)){var u=l[c],h=u.match(fo),d=h[0],p=h[1],f=u.replace(d,"").replace(mo,"");if(Na(a,f))return o;a.push(f);var m=this._interpolate(t,e,f,n,"raw"===r?"string":r,"raw"===r?void 0:s,a);if(this._isFallbackRoot(m)){if(!this._root)throw Error("unexpected error");var g=this._root.$i18n;m=g._translate(g._getMessages(),g.locale,g.fallbackLocale,f,n,r,s)}m=this._warnDefault(t,f,m,n,Ca(s)?s:[s],r),this._modifiers.hasOwnProperty(p)?m=this._modifiers[p](m):go.hasOwnProperty(p)&&(m=go[p](m)),a.pop(),o=m?o.replace(u,m):o}return o},vo.prototype._createMessageContext=function(t,e,i,n){var r=this,s=Ca(t)?t:[],a=Ea(t)?t:{},o=this._getMessages(),l=this.locale;return{list:function(t){return s[t]},named:function(t){return a[t]},values:t,formatter:e,path:i,messages:o,locale:l,linked:function(t){return r._interpolate(l,o[l]||{},t,null,n,void 0,[t])}}},vo.prototype._render=function(t,e,i,n){if(Da(t))return t(this._createMessageContext(i,this._formatter||yo,n,e));var r=this._formatter.interpolate(t,i,n);return r||(r=yo.interpolate(t,i,n)),"string"!==e||Ia(r)?r:r.join("")},vo.prototype._appendItemToChain=function(t,e,i){var n=!1;return Na(t,e)||(n=!0,e&&(n="!"!==e[e.length-1],e=e.replace(/!/g,""),t.push(e),i&&i[e]&&(n=i[e]))),n},vo.prototype._appendLocaleToChain=function(t,e,i){var n,r=e.split("-");do{var s=r.join("-");n=this._appendItemToChain(t,s,i),r.splice(-1,1)}while(r.length&&!0===n);return n},vo.prototype._appendBlockToChain=function(t,e,i){for(var n=!0,r=0;r<e.length&&"boolean"==typeof n;r++){var s=e[r];Ia(s)&&(n=this._appendLocaleToChain(t,s,i))}return n},vo.prototype._getLocaleChain=function(t,e){if(""===t)return[];this._localeChainCache||(this._localeChainCache={});var i=this._localeChainCache[t];if(!i){e||(e=this.fallbackLocale),i=[];for(var n,r=[t];Ca(r);)r=this._appendBlockToChain(i,r,e);(r=Ia(n=Ca(e)?e:Ea(e)?e.default?e.default:null:e)?[n]:n)&&this._appendBlockToChain(i,r,null),this._localeChainCache[t]=i}return i},vo.prototype._translate=function(t,e,i,n,r,s,a){for(var o,l=this._getLocaleChain(e,i),c=0;c<l.length;c++){var u=l[c];if(!Oa(o=this._interpolate(u,t[u],n,r,s,a,[n])))return o}return null},vo.prototype._t=function(t,e,i,n){for(var r,s=[],a=arguments.length-4;a-- >0;)s[a]=arguments[a+4];if(!t)return"";var o,l=Ma.apply(void 0,s);this._escapeParameterHtml&&(l.params=(null!=(o=l.params)&&Object.keys(o).forEach((function(t){"string"==typeof o[t]&&(o[t]=o[t].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"))})),o));var c=l.locale||e,u=this._translate(i,c,this.fallbackLocale,t,n,"string",l.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(r=this._root).$t.apply(r,[t].concat(s))}return u=this._warnDefault(c,t,u,n,s,"string"),this._postTranslation&&null!=u&&(u=this._postTranslation(u,t)),u},vo.prototype.t=function(t){for(var e,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(i))},vo.prototype._i=function(t,e,i,n,r){var s=this._translate(i,e,this.fallbackLocale,t,n,"raw",r);if(this._isFallbackRoot(s)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,r)}return this._warnDefault(e,t,s,n,[r],"raw")},vo.prototype.i=function(t,e,i){return t?(Ia(e)||(e=this.locale),this._i(t,e,this._getMessages(),null,i)):""},vo.prototype._tc=function(t,e,i,n,r){for(var s,a=[],o=arguments.length-5;o-- >0;)a[o]=arguments[o+5];if(!t)return"";void 0===r&&(r=1);var l={count:r,n:r},c=Ma.apply(void 0,a);return c.params=Object.assign(l,c.params),a=null===c.locale?[c.params]:[c.locale,c.params],this.fetchChoice((s=this)._t.apply(s,[t,e,i,n].concat(a)),r)},vo.prototype.fetchChoice=function(t,e){if(!t||!Ia(t))return null;var i=t.split("|");return i[e=this.getChoiceIndex(e,i.length)]?i[e].trim():t},vo.prototype.tc=function(t,e){for(var i,n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return(i=this)._tc.apply(i,[t,this.locale,this._getMessages(),null,e].concat(n))},vo.prototype._te=function(t,e,i){for(var n=[],r=arguments.length-3;r-- >0;)n[r]=arguments[r+3];var s=Ma.apply(void 0,n).locale||e;return this._exist(i[s],t)},vo.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},vo.prototype.getLocaleMessage=function(t){return Ra(this._vm.messages[t]||{})},vo.prototype.setLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,e)},vo.prototype.mergeLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,$a(void 0!==this._vm.messages[t]&&Object.keys(this._vm.messages[t]).length?Object.assign({},this._vm.messages[t]):{},e))},vo.prototype.getDateTimeFormat=function(t){return Ra(this._vm.dateTimeFormats[t]||{})},vo.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e),this._clearDateTimeFormat(t,e)},vo.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,$a(this._vm.dateTimeFormats[t]||{},e)),this._clearDateTimeFormat(t,e)},vo.prototype._clearDateTimeFormat=function(t,e){for(var i in e){var n=t+"__"+i;this._dateTimeFormatters.hasOwnProperty(n)&&delete this._dateTimeFormatters[n]}},vo.prototype._localizeDateTime=function(t,e,i,n,r,s){for(var a=e,o=n[a],l=this._getLocaleChain(e,i),c=0;c<l.length;c++){var u=l[c];if(a=u,!Oa(o=n[u])&&!Oa(o[r]))break}if(Oa(o)||Oa(o[r]))return null;var h,d=o[r];if(s)h=new Intl.DateTimeFormat(a,Object.assign({},d,s));else{var p=a+"__"+r;(h=this._dateTimeFormatters[p])||(h=this._dateTimeFormatters[p]=new Intl.DateTimeFormat(a,d))}return h.format(t)},vo.prototype._d=function(t,e,i,n){if(!i)return(n?new Intl.DateTimeFormat(e,n):new Intl.DateTimeFormat(e)).format(t);var r=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),i,n);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,i,e)}return r||""},vo.prototype.d=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=this.locale,r=null,s=null;return 1===e.length?(Ia(e[0])?r=e[0]:Ea(e[0])&&(e[0].locale&&(n=e[0].locale),e[0].key&&(r=e[0].key)),s=Object.keys(e[0]).reduce((function(t,i){var n;return Na(xa,i)?Object.assign({},t,((n={})[i]=e[0][i],n)):t}),null)):2===e.length&&(Ia(e[0])&&(r=e[0]),Ia(e[1])&&(n=e[1])),this._d(t,n,r,s)},vo.prototype.getNumberFormat=function(t){return Ra(this._vm.numberFormats[t]||{})},vo.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e),this._clearNumberFormat(t,e)},vo.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,$a(this._vm.numberFormats[t]||{},e)),this._clearNumberFormat(t,e)},vo.prototype._clearNumberFormat=function(t,e){for(var i in e){var n=t+"__"+i;this._numberFormatters.hasOwnProperty(n)&&delete this._numberFormatters[n]}},vo.prototype._getNumberFormatter=function(t,e,i,n,r,s){for(var a=e,o=n[a],l=this._getLocaleChain(e,i),c=0;c<l.length;c++){var u=l[c];if(a=u,!Oa(o=n[u])&&!Oa(o[r]))break}if(Oa(o)||Oa(o[r]))return null;var h,d=o[r];if(s)h=new Intl.NumberFormat(a,Object.assign({},d,s));else{var p=a+"__"+r;(h=this._numberFormatters[p])||(h=this._numberFormatters[p]=new Intl.NumberFormat(a,d))}return h},vo.prototype._n=function(t,e,i,n){if(!vo.availabilities.numberFormat)return"";if(!i)return(n?new Intl.NumberFormat(e,n):new Intl.NumberFormat(e)).format(t);var r=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),i,n),s=r&&r.format(t);if(this._isFallbackRoot(s)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:i,locale:e},n))}return s||""},vo.prototype.n=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=this.locale,r=null,s=null;return 1===e.length?Ia(e[0])?r=e[0]:Ea(e[0])&&(e[0].locale&&(n=e[0].locale),e[0].key&&(r=e[0].key),s=Object.keys(e[0]).reduce((function(t,i){var n;return Na(Sa,i)?Object.assign({},t,((n={})[i]=e[0][i],n)):t}),null)):2===e.length&&(Ia(e[0])&&(r=e[0]),Ia(e[1])&&(n=e[1])),this._n(t,n,r,s)},vo.prototype._ntp=function(t,e,i,n){if(!vo.availabilities.numberFormat)return[];if(!i)return(n?new Intl.NumberFormat(e,n):new Intl.NumberFormat(e)).formatToParts(t);var r=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),i,n),s=r&&r.formatToParts(t);if(this._isFallbackRoot(s)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(t,e,i,n)}return s||[]},Object.defineProperties(vo.prototype,bo),Object.defineProperty(vo,"availabilities",{get:function(){if(!uo){var t="undefined"!=typeof Intl;uo={dateTimeFormat:t&&void 0!==Intl.DateTimeFormat,numberFormat:t&&void 0!==Intl.NumberFormat}}return uo}}),vo.install=Za,vo.version="8.28.2";const _o=vo,wo=JSON.parse('["en-US","en_GB","ar","bg","ca","cs","da","de-DE","el","es","es_AR","es-MX","et","eu","fi","fr-FR","gl","he","hu","hr","id","is","it","ja","ko","lt","nb_NO","nl","nn","pl","pt","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","tr","uk","vi","zh-CN","zh-TW"]');class To extends _o{constructor(t){super(t),this.allLocales=wo}async loadLocale(t){if(!this.availableLocales.includes(t)){this.allLocales.includes(t)||console.error(`Unable to load unknown locale: "${t}"`);{const e=OR(`/static/locales/${t}.json`),i=await fetch(e),n=await i.json();this.setLocaleMessage(t,n)}}}}Wi.use(To);const So=new To({locale:"en-US",fallbackLocale:{default:"en-US"}});So.loadLocale("en-US");const xo=So;function ko(t,e){for(var i in e)t[i]=e[i];return t}var Co=/[!'()*]/g,Eo=function(t){return"%"+t.charCodeAt(0).toString(16)},Io=/%2C/g,Po=function(t){return encodeURIComponent(t).replace(Co,Eo).replace(Io,",")};function Ao(t){try{return decodeURIComponent(t)}catch(t){}return t}var Lo=function(t){return null==t||"object"==typeof t?t:String(t)};function Oo(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach((function(t){var i=t.replace(/\+/g," ").split("="),n=Ao(i.shift()),r=i.length>0?Ao(i.join("=")):null;void 0===e[n]?e[n]=r:Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]})),e):e}function Do(t){var e=t?Object.keys(t).map((function(e){var i=t[e];if(void 0===i)return"";if(null===i)return Po(e);if(Array.isArray(i)){var n=[];return i.forEach((function(t){void 0!==t&&(null===t?n.push(Po(e)):n.push(Po(e)+"="+Po(t)))})),n.join("&")}return Po(e)+"="+Po(i)})).filter((function(t){return t.length>0})).join("&"):null;return e?"?"+e:""}var Mo=/\/?$/;function Ro(t,e,i,n){var r=n&&n.options.stringifyQuery,s=e.query||{};try{s=No(s)}catch(t){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:s,params:e.params||{},fullPath:$o(e,r),matched:t?Fo(t):[]};return i&&(a.redirectedFrom=$o(i,r)),Object.freeze(a)}function No(t){if(Array.isArray(t))return t.map(No);if(t&&"object"==typeof t){var e={};for(var i in t)e[i]=No(t[i]);return e}return t}var Bo=Ro(null,{path:"/"});function Fo(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function $o(t,e){var i=t.path,n=t.query;void 0===n&&(n={});var r=t.hash;return void 0===r&&(r=""),(i||"/")+(e||Do)(n)+r}function Uo(t,e,i){return e===Bo?t===e:!!e&&(t.path&&e.path?t.path.replace(Mo,"")===e.path.replace(Mo,"")&&(i||t.hash===e.hash&&jo(t.query,e.query)):!(!t.name||!e.name)&&t.name===e.name&&(i||t.hash===e.hash&&jo(t.query,e.query)&&jo(t.params,e.params)))}function jo(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var i=Object.keys(t).sort(),n=Object.keys(e).sort();return i.length===n.length&&i.every((function(i,r){var s=t[i];if(n[r]!==i)return!1;var a=e[i];return null==s||null==a?s===a:"object"==typeof s&&"object"==typeof a?jo(s,a):String(s)===String(a)}))}function Vo(t){for(var e=0;e<t.matched.length;e++){var i=t.matched[e];for(var n in i.instances){var r=i.instances[n],s=i.enteredCbs[n];if(r&&s){delete i.enteredCbs[n];for(var a=0;a<s.length;a++)r._isBeingDestroyed||s[a](r)}}}}var Ho={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var i=e.props,n=e.children,r=e.parent,s=e.data;s.routerView=!0;for(var a=r.$createElement,o=i.name,l=r.$route,c=r._routerViewCache||(r._routerViewCache={}),u=0,h=!1;r&&r._routerRoot!==r;){var d=r.$vnode?r.$vnode.data:{};d.routerView&&u++,d.keepAlive&&r._directInactive&&r._inactive&&(h=!0),r=r.$parent}if(s.routerViewDepth=u,h){var p=c[o],f=p&&p.component;return f?(p.configProps&&qo(f,s,p.route,p.configProps),a(f,s,n)):a()}var m=l.matched[u],g=m&&m.components[o];if(!m||!g)return c[o]=null,a();c[o]={component:g},s.registerRouteInstance=function(t,e){var i=m.instances[o];(e&&i!==t||!e&&i===t)&&(m.instances[o]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){m.instances[o]=e.componentInstance},s.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==m.instances[o]&&(m.instances[o]=t.componentInstance),Vo(l)};var y=m.props&&m.props[o];return y&&(ko(c[o],{route:l,configProps:y}),qo(g,s,l,y)),a(g,s,n)}};function qo(t,e,i,n){var r=e.props=function(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0}}(i,n);if(r){r=e.props=ko({},r);var s=e.attrs=e.attrs||{};for(var a in r)t.props&&a in t.props||(s[a]=r[a],delete r[a])}}function Wo(t,e,i){var n=t.charAt(0);if("/"===n)return t;if("?"===n||"#"===n)return e+t;var r=e.split("/");i&&r[r.length-1]||r.pop();for(var s=t.replace(/^\//,"").split("/"),a=0;a<s.length;a++){var o=s[a];".."===o?r.pop():"."!==o&&r.push(o)}return""!==r[0]&&r.unshift(""),r.join("/")}function zo(t){return t.replace(/\/(?:\s*\/)+/g,"/")}var Go=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Ko=function t(e,i,n){return Go(i)||(n=i||n,i=[]),n=n||{},e instanceof RegExp?function(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return rl(t,e)}(e,i):Go(e)?function(e,i,n){for(var r=[],s=0;s<e.length;s++)r.push(t(e[s],i,n).source);return rl(new RegExp("(?:"+r.join("|")+")",sl(n)),i)}(e,i,n):function(t,e,i){return al(Zo(t,i),e,i)}(e,i,n)},Yo=Zo,Xo=el,Qo=al,Jo=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Zo(t,e){for(var i,n=[],r=0,s=0,a="",o=e&&e.delimiter||"/";null!=(i=Jo.exec(t));){var l=i[0],c=i[1],u=i.index;if(a+=t.slice(s,u),s=u+l.length,c)a+=c[1];else{var h=t[s],d=i[2],p=i[3],f=i[4],m=i[5],g=i[6],y=i[7];a&&(n.push(a),a="");var v=null!=d&&null!=h&&h!==d,b="+"===g||"*"===g,_="?"===g||"*"===g,w=i[2]||o,T=f||m;n.push({name:p||r++,prefix:d||"",delimiter:w,optional:_,repeat:b,partial:v,asterisk:!!y,pattern:T?nl(T):y?".*":"[^"+il(w)+"]+?"})}}return s<t.length&&(a+=t.substr(s)),a&&n.push(a),n}function tl(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function el(t,e){for(var i=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(i[n]=new RegExp("^(?:"+t[n].pattern+")$",sl(e)));return function(e,n){for(var r="",s=e||{},a=(n||{}).pretty?tl:encodeURIComponent,o=0;o<t.length;o++){var l=t[o];if("string"!=typeof l){var c,u=s[l.name];if(null==u){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Go(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(c=a(u[h]),!i[o].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===h?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):a(u),!i[o].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function il(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function nl(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function rl(t,e){return t.keys=e,t}function sl(t){return t&&t.sensitive?"":"i"}function al(t,e,i){Go(e)||(i=e||i,e=[]);for(var n=(i=i||{}).strict,r=!1!==i.end,s="",a=0;a<t.length;a++){var o=t[a];if("string"==typeof o)s+=il(o);else{var l=il(o.prefix),c="(?:"+o.pattern+")";e.push(o),o.repeat&&(c+="(?:"+l+c+")*"),s+=c=o.optional?o.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=il(i.delimiter||"/"),h=s.slice(-u.length)===u;return n||(s=(h?s.slice(0,-u.length):s)+"(?:"+u+"(?=$))?"),s+=r?"$":n&&h?"":"(?="+u+"|$)",rl(new RegExp("^"+s,sl(i)),e)}Ko.parse=Yo,Ko.compile=function(t,e){return el(Zo(t,e),e)},Ko.tokensToFunction=Xo,Ko.tokensToRegExp=Qo;var ol=Object.create(null);function ll(t,e,i){e=e||{};try{var n=ol[t]||(ol[t]=Ko.compile(t));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),n(e,{pretty:!0})}catch(t){return""}finally{delete e[0]}}function cl(t,e,i,n){var r="string"==typeof t?{path:t}:t;if(r._normalized)return r;if(r.name){var s=(r=ko({},t)).params;return s&&"object"==typeof s&&(r.params=ko({},s)),r}if(!r.path&&r.params&&e){(r=ko({},r))._normalized=!0;var a=ko(ko({},e.params),r.params);if(e.name)r.name=e.name,r.params=a;else if(e.matched.length){var o=e.matched[e.matched.length-1].path;r.path=ll(o,a,e.path)}return r}var l=function(t){var e="",i="",n=t.indexOf("#");n>=0&&(e=t.slice(n),t=t.slice(0,n));var r=t.indexOf("?");return r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),{path:t,query:i,hash:e}}(r.path||""),c=e&&e.path||"/",u=l.path?Wo(l.path,c,i||r.append):c,h=function(t,e,i){void 0===e&&(e={});var n,r=i||Oo;try{n=r(t||"")}catch(t){n={}}for(var s in e){var a=e[s];n[s]=Array.isArray(a)?a.map(Lo):Lo(a)}return n}(l.query,r.query,n&&n.options.parseQuery),d=r.hash||l.hash;return d&&"#"!==d.charAt(0)&&(d="#"+d),{_normalized:!0,path:u,query:h,hash:d}}var ul,hl=function(){},dl={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(t){var e=this,i=this.$router,n=this.$route,r=i.resolve(this.to,n,this.append),s=r.location,a=r.route,o=r.href,l={},c=i.options.linkActiveClass,u=i.options.linkExactActiveClass,h=null==c?"router-link-active":c,d=null==u?"router-link-exact-active":u,p=null==this.activeClass?h:this.activeClass,f=null==this.exactActiveClass?d:this.exactActiveClass,m=a.redirectedFrom?Ro(null,cl(a.redirectedFrom),null,i):a;l[f]=Uo(n,m,this.exactPath),l[p]=this.exact||this.exactPath?l[f]:function(t,e){return 0===t.path.replace(Mo,"/").indexOf(e.path.replace(Mo,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var i in e)if(!(i in t))return!1;return!0}(t.query,e.query)}(n,m);var g=l[f]?this.ariaCurrentValue:null,y=function(t){pl(t)&&(e.replace?i.replace(s,hl):i.push(s,hl))},v={click:pl};Array.isArray(this.event)?this.event.forEach((function(t){v[t]=y})):v[this.event]=y;var b={class:l},_=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:o,route:a,navigate:y,isActive:l[p],isExactActive:l[f]});if(_){if(1===_.length)return _[0];if(_.length>1||!_.length)return 0===_.length?t():t("span",{},_)}if("a"===this.tag)b.on=v,b.attrs={href:o,"aria-current":g};else{var w=fl(this.$slots.default);if(w){w.isStatic=!1;var T=w.data=ko({},w.data);for(var S in T.on=T.on||{},T.on){var x=T.on[S];S in v&&(T.on[S]=Array.isArray(x)?x:[x])}for(var k in v)k in T.on?T.on[k].push(v[k]):T.on[k]=y;var C=w.data.attrs=ko({},w.data.attrs);C.href=o,C["aria-current"]=g}else b.on=v}return t(this.tag,b,this.$slots.default)}};function pl(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function fl(t){if(t)for(var e,i=0;i<t.length;i++){if("a"===(e=t[i]).tag)return e;if(e.children&&(e=fl(e.children)))return e}}var ml="undefined"!=typeof window;function gl(t,e,i,n,r){var s=e||[],a=i||Object.create(null),o=n||Object.create(null);t.forEach((function(t){yl(s,a,o,t,r)}));for(var l=0,c=s.length;l<c;l++)"*"===s[l]&&(s.push(s.splice(l,1)[0]),c--,l--);return{pathList:s,pathMap:a,nameMap:o}}function yl(t,e,i,n,r,s){var a=n.path,o=n.name,l=n.pathToRegexpOptions||{},c=function(t,e,i){return i||(t=t.replace(/\/$/,"")),"/"===t[0]||null==e?t:zo(e.path+"/"+t)}(a,r,l.strict);"boolean"==typeof n.caseSensitive&&(l.sensitive=n.caseSensitive);var u={path:c,regex:vl(c,l),components:n.components||{default:n.component},alias:n.alias?"string"==typeof n.alias?[n.alias]:n.alias:[],instances:{},enteredCbs:{},name:o,parent:r,matchAs:s,redirect:n.redirect,beforeEnter:n.beforeEnter,meta:n.meta||{},props:null==n.props?{}:n.components?n.props:{default:n.props}};if(n.children&&n.children.forEach((function(n){var r=s?zo(s+"/"+n.path):void 0;yl(t,e,i,n,u,r)})),e[u.path]||(t.push(u.path),e[u.path]=u),void 0!==n.alias)for(var h=Array.isArray(n.alias)?n.alias:[n.alias],d=0;d<h.length;++d){var p={path:h[d],children:n.children};yl(t,e,i,p,r,u.path||"/")}o&&(i[o]||(i[o]=u))}function vl(t,e){return Ko(t,[],e)}function bl(t,e){var i=gl(t),n=i.pathList,r=i.pathMap,s=i.nameMap;function a(t,i,a){var l=cl(t,i,!1,e),c=l.name;if(c){var u=s[c];if(!u)return o(null,l);var h=u.regex.keys.filter((function(t){return!t.optional})).map((function(t){return t.name}));if("object"!=typeof l.params&&(l.params={}),i&&"object"==typeof i.params)for(var d in i.params)!(d in l.params)&&h.indexOf(d)>-1&&(l.params[d]=i.params[d]);return l.path=ll(u.path,l.params),o(u,l,a)}if(l.path){l.params={};for(var p=0;p<n.length;p++){var f=n[p],m=r[f];if(_l(m.regex,l.path,l.params))return o(m,l,a)}}return o(null,l)}function o(t,i,n){return t&&t.redirect?function(t,i){var n=t.redirect,r="function"==typeof n?n(Ro(t,i,null,e)):n;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return o(null,i);var l=r,c=l.name,u=l.path,h=i.query,d=i.hash,p=i.params;if(h=l.hasOwnProperty("query")?l.query:h,d=l.hasOwnProperty("hash")?l.hash:d,p=l.hasOwnProperty("params")?l.params:p,c)return s[c],a({_normalized:!0,name:c,query:h,hash:d,params:p},void 0,i);if(u){var f=function(t,e){return Wo(t,e.parent?e.parent.path:"/",!0)}(u,t);return a({_normalized:!0,path:ll(f,p),query:h,hash:d},void 0,i)}return o(null,i)}(t,n||i):t&&t.matchAs?function(t,e,i){var n=a({_normalized:!0,path:ll(i,e.params)});if(n){var r=n.matched,s=r[r.length-1];return e.params=n.params,o(s,e)}return o(null,e)}(0,i,t.matchAs):Ro(t,i,n,e)}return{match:a,addRoute:function(t,e){var i="object"!=typeof t?s[t]:void 0;gl([e||t],n,r,s,i),i&&i.alias.length&&gl(i.alias.map((function(t){return{path:t,children:[e]}})),n,r,s,i)},getRoutes:function(){return n.map((function(t){return r[t]}))},addRoutes:function(t){gl(t,n,r,s)}}}function _l(t,e,i){var n=e.match(t);if(!n)return!1;if(!i)return!0;for(var r=1,s=n.length;r<s;++r){var a=t.keys[r-1];a&&(i[a.name||"pathMatch"]="string"==typeof n[r]?Ao(n[r]):n[r])}return!0}var wl=ml&&window.performance&&window.performance.now?window.performance:Date;function Tl(){return wl.now().toFixed(3)}var Sl=Tl();function xl(){return Sl}function kl(t){return Sl=t}var Cl=Object.create(null);function El(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),i=ko({},window.history.state);return i.key=xl(),window.history.replaceState(i,"",e),window.addEventListener("popstate",Al),function(){window.removeEventListener("popstate",Al)}}function Il(t,e,i,n){if(t.app){var r=t.options.scrollBehavior;r&&t.app.$nextTick((function(){var s=function(){var t=xl();if(t)return Cl[t]}(),a=r.call(t,e,i,n?s:null);a&&("function"==typeof a.then?a.then((function(t){Rl(t,s)})).catch((function(t){})):Rl(a,s))}))}}function Pl(){var t=xl();t&&(Cl[t]={x:window.pageXOffset,y:window.pageYOffset})}function Al(t){Pl(),t.state&&t.state.key&&kl(t.state.key)}function Ll(t){return Dl(t.x)||Dl(t.y)}function Ol(t){return{x:Dl(t.x)?t.x:window.pageXOffset,y:Dl(t.y)?t.y:window.pageYOffset}}function Dl(t){return"number"==typeof t}var Ml=/^#\d/;function Rl(t,e){var i,n="object"==typeof t;if(n&&"string"==typeof t.selector){var r=Ml.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(r){var s=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var i=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{x:n.left-i.left-e.x,y:n.top-i.top-e.y}}(r,s={x:Dl((i=s).x)?i.x:0,y:Dl(i.y)?i.y:0})}else Ll(t)&&(e=Ol(t))}else n&&Ll(t)&&(e=Ol(t));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:t.behavior}):window.scrollTo(e.x,e.y))}var Nl,Bl=ml&&(-1===(Nl=window.navigator.userAgent).indexOf("Android 2.")&&-1===Nl.indexOf("Android 4.0")||-1===Nl.indexOf("Mobile Safari")||-1!==Nl.indexOf("Chrome")||-1!==Nl.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState;function Fl(t,e){Pl();var i=window.history;try{if(e){var n=ko({},i.state);n.key=xl(),i.replaceState(n,"",t)}else i.pushState({key:kl(Tl())},"",t)}catch(i){window.location[e?"replace":"assign"](t)}}function $l(t){Fl(t,!0)}var Ul={redirected:2,aborted:4,cancelled:8,duplicated:16};function jl(t,e){return Vl(t,e,Ul.cancelled,'Navigation cancelled from "'+t.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function Vl(t,e,i,n){var r=new Error(n);return r._isRouter=!0,r.from=t,r.to=e,r.type=i,r}var Hl=["params","query","hash"];function ql(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function Wl(t,e){return ql(t)&&t._isRouter&&(null==e||t.type===e)}function zl(t,e,i){var n=function(r){r>=t.length?i():t[r]?e(t[r],(function(){n(r+1)})):n(r+1)};n(0)}function Gl(t,e){return Kl(t.map((function(t){return Object.keys(t.components).map((function(i){return e(t.components[i],t.instances[i],t,i)}))})))}function Kl(t){return Array.prototype.concat.apply([],t)}var Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Xl(t){var e=!1;return function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];if(!e)return e=!0,t.apply(this,i)}}var Ql=function(t,e){this.router=t,this.base=function(t){if(!t)if(ml){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}(e),this.current=Bo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Jl(t,e,i,n){var r=Gl(t,(function(t,n,r,s){var a=function(t,e){return"function"!=typeof t&&(t=ul.extend(t)),t.options[e]}(t,e);if(a)return Array.isArray(a)?a.map((function(t){return i(t,n,r,s)})):i(a,n,r,s)}));return Kl(n?r.reverse():r)}function Zl(t,e){if(e)return function(){return t.apply(e,arguments)}}Ql.prototype.listen=function(t){this.cb=t},Ql.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},Ql.prototype.onError=function(t){this.errorCbs.push(t)},Ql.prototype.transitionTo=function(t,e,i){var n,r=this;try{n=this.router.match(t,this.current)}catch(t){throw this.errorCbs.forEach((function(e){e(t)})),t}var s=this.current;this.confirmTransition(n,(function(){r.updateRoute(n),e&&e(n),r.ensureURL(),r.router.afterHooks.forEach((function(t){t&&t(n,s)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(t){t(n)})))}),(function(t){i&&i(t),t&&!r.ready&&(Wl(t,Ul.redirected)&&s===Bo||(r.ready=!0,r.readyErrorCbs.forEach((function(e){e(t)}))))}))},Ql.prototype.confirmTransition=function(t,e,i){var n=this,r=this.current;this.pending=t;var s,a,o=function(t){!Wl(t)&&ql(t)&&(n.errorCbs.length?n.errorCbs.forEach((function(e){e(t)})):console.error(t)),i&&i(t)},l=t.matched.length-1,c=r.matched.length-1;if(Uo(t,r)&&l===c&&t.matched[l]===r.matched[c])return this.ensureURL(),t.hash&&Il(this.router,r,t,!1),o(((a=Vl(s=r,t,Ul.duplicated,'Avoided redundant navigation to current location: "'+s.fullPath+'".')).name="NavigationDuplicated",a));var u,h=function(t,e){var i,n=Math.max(t.length,e.length);for(i=0;i<n&&t[i]===e[i];i++);return{updated:e.slice(0,i),activated:e.slice(i),deactivated:t.slice(i)}}(this.current.matched,t.matched),d=h.updated,p=h.deactivated,f=h.activated,m=[].concat(function(t){return Jl(t,"beforeRouteLeave",Zl,!0)}(p),this.router.beforeHooks,function(t){return Jl(t,"beforeRouteUpdate",Zl)}(d),f.map((function(t){return t.beforeEnter})),(u=f,function(t,e,i){var n=!1,r=0,s=null;Gl(u,(function(t,e,a,o){if("function"==typeof t&&void 0===t.cid){n=!0,r++;var l,c=Xl((function(e){var n;((n=e).__esModule||Yl&&"Module"===n[Symbol.toStringTag])&&(e=e.default),t.resolved="function"==typeof e?e:ul.extend(e),a.components[o]=e,--r<=0&&i()})),u=Xl((function(t){var e="Failed to resolve async component "+o+": "+t;s||(s=ql(t)?t:new Error(e),i(s))}));try{l=t(c,u)}catch(t){u(t)}if(l)if("function"==typeof l.then)l.then(c,u);else{var h=l.component;h&&"function"==typeof h.then&&h.then(c,u)}}})),n||i()})),g=function(e,i){if(n.pending!==t)return o(jl(r,t));try{e(t,r,(function(e){!1===e?(n.ensureURL(!0),o(function(t,e){return Vl(t,e,Ul.aborted,'Navigation aborted from "'+t.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(r,t))):ql(e)?(n.ensureURL(!0),o(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(o(function(t,e){return Vl(t,e,Ul.redirected,'Redirected when going from "'+t.fullPath+'" to "'+function(t){if("string"==typeof t)return t;if("path"in t)return t.path;var e={};return Hl.forEach((function(i){i in t&&(e[i]=t[i])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}(r,t)),"object"==typeof e&&e.replace?n.replace(e):n.push(e)):i(e)}))}catch(t){o(t)}};zl(m,g,(function(){var i=function(t){return Jl(t,"beforeRouteEnter",(function(t,e,i,n){return function(t,e,i){return function(n,r,s){return t(n,r,(function(t){"function"==typeof t&&(e.enteredCbs[i]||(e.enteredCbs[i]=[]),e.enteredCbs[i].push(t)),s(t)}))}}(t,i,n)}))}(f);zl(i.concat(n.router.resolveHooks),g,(function(){if(n.pending!==t)return o(jl(r,t));n.pending=null,e(t),n.router.app&&n.router.app.$nextTick((function(){Vo(t)}))}))}))},Ql.prototype.updateRoute=function(t){this.current=t,this.cb&&this.cb(t)},Ql.prototype.setupListeners=function(){},Ql.prototype.teardown=function(){this.listeners.forEach((function(t){t()})),this.listeners=[],this.current=Bo,this.pending=null};var tc=function(t){function e(e,i){t.call(this,e,i),this._startLocation=ec(this.base)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,i=e.options.scrollBehavior,n=Bl&&i;n&&this.listeners.push(El());var r=function(){var i=t.current,r=ec(t.base);t.current===Bo&&r===t._startLocation||t.transitionTo(r,(function(t){n&&Il(e,t,i,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,i){var n=this,r=this.current;this.transitionTo(t,(function(t){Fl(zo(n.base+t.fullPath)),Il(n.router,t,r,!1),e&&e(t)}),i)},e.prototype.replace=function(t,e,i){var n=this,r=this.current;this.transitionTo(t,(function(t){$l(zo(n.base+t.fullPath)),Il(n.router,t,r,!1),e&&e(t)}),i)},e.prototype.ensureURL=function(t){if(ec(this.base)!==this.current.fullPath){var e=zo(this.base+this.current.fullPath);t?Fl(e):$l(e)}},e.prototype.getCurrentLocation=function(){return ec(this.base)},e}(Ql);function ec(t){var e=window.location.pathname,i=e.toLowerCase(),n=t.toLowerCase();return!t||i!==n&&0!==i.indexOf(zo(n+"/"))||(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var ic=function(t){function e(e,i,n){t.call(this,e,i),n&&function(t){var e=ec(t);if(!/^\/#/.test(e))return window.location.replace(zo(t+"/#"+e)),!0}(this.base)||nc()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,i=Bl&&e;i&&this.listeners.push(El());var n=function(){var e=t.current;nc()&&t.transitionTo(rc(),(function(n){i&&Il(t.router,n,e,!0),Bl||oc(n.fullPath)}))},r=Bl?"popstate":"hashchange";window.addEventListener(r,n),this.listeners.push((function(){window.removeEventListener(r,n)}))}},e.prototype.push=function(t,e,i){var n=this,r=this.current;this.transitionTo(t,(function(t){ac(t.fullPath),Il(n.router,t,r,!1),e&&e(t)}),i)},e.prototype.replace=function(t,e,i){var n=this,r=this.current;this.transitionTo(t,(function(t){oc(t.fullPath),Il(n.router,t,r,!1),e&&e(t)}),i)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;rc()!==e&&(t?ac(e):oc(e))},e.prototype.getCurrentLocation=function(){return rc()},e}(Ql);function nc(){var t=rc();return"/"===t.charAt(0)||(oc("/"+t),!1)}function rc(){var t=window.location.href,e=t.indexOf("#");return e<0?"":t=t.slice(e+1)}function sc(t){var e=window.location.href,i=e.indexOf("#");return(i>=0?e.slice(0,i):e)+"#"+t}function ac(t){Bl?Fl(sc(t)):window.location.hash=t}function oc(t){Bl?$l(sc(t)):window.location.replace(sc(t))}var lc=function(t){function e(e,i){t.call(this,e,i),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,i){var n=this;this.transitionTo(t,(function(t){n.stack=n.stack.slice(0,n.index+1).concat(t),n.index++,e&&e(t)}),i)},e.prototype.replace=function(t,e,i){var n=this;this.transitionTo(t,(function(t){n.stack=n.stack.slice(0,n.index).concat(t),e&&e(t)}),i)},e.prototype.go=function(t){var e=this,i=this.index+t;if(!(i<0||i>=this.stack.length)){var n=this.stack[i];this.confirmTransition(n,(function(){var t=e.current;e.index=i,e.updateRoute(n),e.router.afterHooks.forEach((function(e){e&&e(n,t)}))}),(function(t){Wl(t,Ul.duplicated)&&(e.index=i)}))}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Ql),cc=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=bl(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!Bl&&!1!==t.fallback,this.fallback&&(e="hash"),ml||(e="abstract"),this.mode=e,e){case"history":this.history=new tc(this,t.base);break;case"hash":this.history=new ic(this,t.base,this.fallback);break;case"abstract":this.history=new lc(this,t.base)}},uc={currentRoute:{configurable:!0}};cc.prototype.match=function(t,e,i){return this.matcher.match(t,e,i)},uc.currentRoute.get=function(){return this.history&&this.history.current},cc.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",(function(){var i=e.apps.indexOf(t);i>-1&&e.apps.splice(i,1),e.app===t&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=t;var i=this.history;if(i instanceof tc||i instanceof ic){var n=function(t){i.setupListeners(),function(t){var n=i.current,r=e.options.scrollBehavior;Bl&&r&&"fullPath"in t&&Il(e,t,n,!1)}(t)};i.transitionTo(i.getCurrentLocation(),n,n)}i.listen((function(t){e.apps.forEach((function(e){e._route=t}))}))}},cc.prototype.beforeEach=function(t){return dc(this.beforeHooks,t)},cc.prototype.beforeResolve=function(t){return dc(this.resolveHooks,t)},cc.prototype.afterEach=function(t){return dc(this.afterHooks,t)},cc.prototype.onReady=function(t,e){this.history.onReady(t,e)},cc.prototype.onError=function(t){this.history.onError(t)},cc.prototype.push=function(t,e,i){var n=this;if(!e&&!i&&"undefined"!=typeof Promise)return new Promise((function(e,i){n.history.push(t,e,i)}));this.history.push(t,e,i)},cc.prototype.replace=function(t,e,i){var n=this;if(!e&&!i&&"undefined"!=typeof Promise)return new Promise((function(e,i){n.history.replace(t,e,i)}));this.history.replace(t,e,i)},cc.prototype.go=function(t){this.history.go(t)},cc.prototype.back=function(){this.go(-1)},cc.prototype.forward=function(){this.go(1)},cc.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(t){return Object.keys(t.components).map((function(e){return t.components[e]}))}))):[]},cc.prototype.resolve=function(t,e,i){var n=cl(t,e=e||this.history.current,i,this),r=this.match(n,e),s=r.redirectedFrom||r.fullPath,a=function(t,e,i){var n="hash"===i?"#"+e:e;return t?zo(t+"/"+n):n}(this.history.base,s,this.mode);return{location:n,route:r,href:a,normalizedTo:n,resolved:r}},cc.prototype.getRoutes=function(){return this.matcher.getRoutes()},cc.prototype.addRoute=function(t,e){this.matcher.addRoute(t,e),this.history.current!==Bo&&this.history.transitionTo(this.history.getCurrentLocation())},cc.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Bo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(cc.prototype,uc);var hc=cc;function dc(t,e){return t.push(e),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}cc.install=function t(e){if(!t.installed||ul!==e){t.installed=!0,ul=e;var i=function(t){return void 0!==t},n=function(t,e){var n=t.$options._parentVnode;i(n)&&i(n=n.data)&&i(n=n.registerRouteInstance)&&n(t,e)};e.mixin({beforeCreate:function(){i(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Ho),e.component("RouterLink",dl);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},cc.version="3.6.5",cc.isNavigationFailure=Wl,cc.NavigationFailureType=Ul,cc.START_LOCATION=Bo,ml&&window.Vue&&window.Vue.use(cc);const pc=Ks({name:"FtLoader",props:{fullscreen:{type:Boolean,default:!1}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"container",class:{fullscreen:t.fullscreen}},[t._m(0)])}),[function(){var t=this._self._c;return this._self._setupProxy,t("div",{staticClass:"spinner"},[t("div",{staticClass:"double-bounce1"}),t("div",{staticClass:"double-bounce2"})])}],!1,null,"4db04b48",null).exports,fc=Ks({name:"FtAutoGrid",props:{grid:{type:Boolean,required:!0}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-auto-grid",class:{grid:t.grid,list:!t.grid}},[t._t("default")],2)}),[],!1,null,"5544db26",null).exports,mc={name:"FtListVideo",components:{"ft-icon-button":ha},props:{data:{type:Object,required:!0},playlistId:{type:String,default:null},playlistIndex:{type:Number,default:null},playlistReverse:{type:Boolean,default:!1},playlistShuffle:{type:Boolean,default:!1},playlistLoop:{type:Boolean,default:!1},forceListType:{type:String,default:null},appearance:{type:String,required:!0},showVideoWithLastViewedPlaylist:{type:Boolean,default:!1}},data:function(){return{id:"",title:"",channelName:"",channelId:"",viewCount:0,parsedViewCount:"",uploadedTime:"",duration:"",description:"",watched:!1,watchProgress:0,publishedText:"",isLive:!1,isFavorited:!1,isUpcoming:!1,isPremium:!1,hideViews:!1}},computed:{historyCache:function(){return this.$store.getters.getHistoryCache},listType:function(){return this.$store.getters.getListType},thumbnailPreference:function(){return this.$store.getters.getThumbnailPreference},backendPreference:function(){return this.$store.getters.getBackendPreference},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},inHistory:function(){return"history"===this.$router.currentRoute.name},invidiousUrl:function(){let t=`${this.currentInvidiousInstance}/watch?v=${this.id}`;return this.playlistIdFinal&&0!==this.playlistIdFinal.length&&(t+=`&list=${this.playlistIdFinal}`),t},invidiousChannelUrl:function(){return`${this.currentInvidiousInstance}/channel/${this.channelId}`},youtubeUrl:function(){let t=`https://www.youtube.com/watch?v=${this.id}`;return this.playlistIdFinal&&0!==this.playlistIdFinal.length&&(t+=`&list=${this.playlistIdFinal}`),t},youtubeShareUrl:function(){return this.playlistIdFinal&&0!==this.playlistIdFinal.length?`https://youtu.be/${this.id}?list=${this.playlistIdFinal}`:`https://youtu.be/${this.id}`},youtubeChannelUrl:function(){return`https://youtube.com/channel/${this.channelId}`},youtubeEmbedUrl:function(){return`https://www.youtube-nocookie.com/embed/${this.id}`},progressPercentage:function(){return this.watchProgress/this.data.lengthSeconds*100},hideSharingActions:function(){return this.$store.getters.getHideSharingActions},dropdownOptions:function(){const t=[];return t.push({label:this.watched?this.$t("Video.Remove From History"):this.$t("Video.Mark As Watched"),value:"history"}),this.hideSharingActions||t.push({type:"divider"},{label:this.$t("Video.Copy YouTube Link"),value:"copyYoutube"},{label:this.$t("Video.Copy YouTube Embedded Player Link"),value:"copyYoutubeEmbed"},{label:this.$t("Video.Copy Invidious Link"),value:"copyInvidious"},{type:"divider"},{label:this.$t("Video.Open in YouTube"),value:"openYoutube"},{label:this.$t("Video.Open YouTube Embedded Player"),value:"openYoutubeEmbed"},{label:this.$t("Video.Open in Invidious"),value:"openInvidious"},{type:"divider"},{label:this.$t("Video.Copy YouTube Channel Link"),value:"copyYoutubeChannel"},{label:this.$t("Video.Copy Invidious Channel Link"),value:"copyInvidiousChannel"},{type:"divider"},{label:this.$t("Video.Open Channel in YouTube"),value:"openYoutubeChannel"},{label:this.$t("Video.Open Channel in Invidious"),value:"openInvidiousChannel"}),t},thumbnail:function(){let t;switch(t="invidious"===this.backendPreference?this.currentInvidiousInstance:"https://i.ytimg.com",this.thumbnailPreference){case"start":return`${t}/vi/${this.id}/mq1.jpg`;case"middle":return`${t}/vi/${this.id}/mq2.jpg`;case"end":return`${t}/vi/${this.id}/mq3.jpg`;default:return`${t}/vi/${this.id}/mqdefault.jpg`}},hideLiveStreams:function(){return this.$store.getters.getHideLiveStreams},hideUpcomingPremieres:function(){return this.$store.getters.getHideUpcomingPremieres},hideVideoViews:function(){return this.$store.getters.getHideVideoViews},addWatchedStyle:function(){return this.watched&&!this.inHistory},favoritesPlaylist:function(){return this.$store.getters.getFavorites},inFavoritesPlaylist:function(){return-1!==this.favoritesPlaylist.videos.findIndex((t=>t.videoId===this.id))},favoriteIconTheme:function(){return this.inFavoritesPlaylist?"base favorite":"base"},externalPlayer:function(){return this.$store.getters.getExternalPlayer},defaultPlayback:function(){return this.$store.getters.getDefaultPlayback},saveWatchedProgress:function(){return this.$store.getters.getSaveWatchedProgress},saveVideoHistoryWithLastViewedPlaylist:function(){return this.$store.getters.getSaveVideoHistoryWithLastViewedPlaylist},showDistractionFreeTitles:function(){return this.$store.getters.getShowDistractionFreeTitles},displayTitle:function(){return this.showDistractionFreeTitles?function(t,e=3){const i=RegExp(`[\\p{Lu}|']{${e},}`,"ug");return t.replace(i,(t=>(t=>{const e=t.split(""),i=(t=>t.search(/[\p{L}]/u))(t);return e[i]=e[i].toUpperCase(),e.join("")})(t.toLowerCase())))}(this.data.title):this.data.title},historyIndex:function(){return this.historyCache.findIndex((t=>t.videoId===this.id))},playlistIdFinal:function(){if(this.playlistId)return this.playlistId;if(!this.showVideoWithLastViewedPlaylist)return;if(!this.saveVideoHistoryWithLastViewedPlaylist)return;const t=this.historyIndex;return-1!==t?this.historyCache[t].lastViewedPlaylistId:void 0},currentLocale:function(){return this.$i18n.locale.replace("_","-")}},mounted:function(){this.parseVideoData(),this.checkIfWatched()},methods:{handleExternalPlayer:function(){this.$emit("pause-player"),this.openInExternalPlayer({watchProgress:this.watchProgress,playbackRate:this.defaultPlayback,videoId:this.id,videoLength:this.data.lengthSeconds,playlistId:this.playlistIdFinal,playlistIndex:this.playlistIndex,playlistReverse:this.playlistReverse,playlistShuffle:this.playlistShuffle,playlistLoop:this.playlistLoop}),this.saveWatchedProgress&&!this.watched&&this.markAsWatched()},toggleSave:function(){this.inFavoritesPlaylist?this.removeFromPlaylist():this.addToPlaylist()},handleOptionsClick:function(t){switch(t){case"history":this.watched?this.removeFromWatched():this.markAsWatched();break;case"copyYoutube":CR(this.youtubeShareUrl,{messageOnSuccess:this.$t("Share.YouTube URL copied to clipboard")});break;case"openYoutube":ER(this.youtubeUrl);break;case"copyYoutubeEmbed":CR(this.youtubeEmbedUrl,{messageOnSuccess:this.$t("Share.YouTube Embed URL copied to clipboard")});break;case"openYoutubeEmbed":ER(this.youtubeEmbedUrl);break;case"copyInvidious":CR(this.invidiousUrl,{messageOnSuccess:this.$t("Share.Invidious URL copied to clipboard")});break;case"openInvidious":ER(this.invidiousUrl);break;case"copyYoutubeChannel":CR(this.youtubeChannelUrl,{messageOnSuccess:this.$t("Share.YouTube Channel URL copied to clipboard")});break;case"openYoutubeChannel":ER(this.youtubeChannelUrl);break;case"copyInvidiousChannel":CR(this.invidiousChannelUrl,{messageOnSuccess:this.$t("Share.Invidious Channel URL copied to clipboard")});break;case"openInvidiousChannel":ER(this.invidiousChannelUrl)}},parseVideoData:function(){if(this.id=this.data.videoId,this.title=this.data.title,this.channelName=this.data.author,this.channelId=this.data.authorId,this.duration=DR(this.data.lengthSeconds),this.description=this.data.description,this.isLive=this.data.liveNow||"undefined"===this.data.lengthSeconds,this.isUpcoming=this.data.isUpcoming||this.data.premiere,this.isPremium=this.data.premium||!1,this.viewCount=this.data.viewCount,void 0!==this.data.premiereDate){let t=this.data.premiereDate;"string"==typeof t&&(t=new Date(t)),this.publishedText=t.toLocaleString()}else void 0!==this.data.premiereTimestamp?this.publishedText=new Date(1e3*this.data.premiereTimestamp).toLocaleString():this.publishedText=this.data.publishedText;if(this.data.isRSS&&null!=this.data.publishedDate&&!this.isLive){let t=(new Date-Date.parse(this.data.publishedDate))/1e3,e="second";t>60&&(t/=60,e="minute"),"minute"===e&&t>60&&(t/=60,e="hour"),"hour"===e&&t>24&&(t/=24,e="day"),"day"===e&&t>31&&(t/=24,e="month"),"month"===e&&t>12&&(t/=12,e="year"),this.uploadedTime=new Intl.RelativeTimeFormat(this.currentLocale).format(Math.ceil(-t),e)}else this.publishedText&&!this.isLive&&(this.uploadedTime=xR({publishText:this.publishedText,isLive:this.isLive,isUpcoming:this.isUpcoming,isRSS:this.data.isRSS}));this.hideVideoViews?this.hideViews=!0:void 0!==this.data.viewCount&&null!==this.data.viewCount?this.parsedViewCount=$R(this.data.viewCount):void 0!==this.data.viewCountText?this.parsedViewCount=this.data.viewCountText.replace(" views",""):this.hideViews=!0},checkIfWatched:function(){const t=this.historyIndex;if(-1!==t)if(this.watched=!0,this.watchProgress=this.historyCache[t].watchProgress,""!==this.historyCache[t].published){const e=this.historyCache[t].published,i=new Date(e);this.publishedText=i.toLocaleDateString()}else this.publishedText=""},markAsWatched:function(){const t={videoId:this.id,title:this.title,author:this.channelName,authorId:this.channelId,published:this.publishedText?this.publishedText.split(",")[0]:this.publishedText,description:this.description,viewCount:this.viewCount,lengthSeconds:this.data.lengthSeconds,watchProgress:0,timeWatched:(new Date).getTime(),isLive:!1,paid:!1,type:"video"};this.updateHistory(t),kR(this.$t("Video.Video has been marked as watched")),this.watched=!0},removeFromWatched:function(){this.removeFromHistory(this.id),kR(this.$t("Video.Video has been removed from your history")),this.watched=!1,this.watchProgress=0},addToPlaylist:function(){const t={playlistName:"Favorites",videoData:{videoId:this.id,title:this.title,author:this.channelName,authorId:this.channelId,published:"",description:this.description,viewCount:this.viewCount,lengthSeconds:this.data.lengthSeconds,timeAdded:(new Date).getTime(),isLive:!1,paid:!1,type:"video"}};this.addVideo(t),kR(this.$t("Video.Video has been saved"))},removeFromPlaylist:function(){const t={playlistName:"Favorites",videoId:this.id};this.removeVideo(t),kR(this.$t("Video.Video has been removed from your saved list"))},...Is(["openInExternalPlayer","updateHistory","removeFromHistory","addVideo","removeVideo"])}},gc=Ks(mc,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-list-video ft-list-item",class:{list:("list"===t.listType||"list"===t.forceListType)&&"grid"!==t.forceListType,grid:("grid"===t.listType||"list"===t.forceListType)&&"list"!==t.forceListType,[t.appearance]:!0,watched:t.addWatchedStyle}},[e("div",{staticClass:"videoThumbnail"},[e("router-link",{staticClass:"thumbnailLink",attrs:{tabindex:"-1",to:{path:`/watch/${t.id}`,query:t.playlistIdFinal?{playlistId:t.playlistIdFinal}:{}}}},[e("img",{staticClass:"thumbnailImage",attrs:{src:t.thumbnail}})]),t.isLive||"0:00"!==t.duration?e("div",{staticClass:"videoDuration",class:{live:t.isLive,upcoming:t.isUpcoming}},[t._v(" "+t._s(t.isLive?t.$t("Video.Live"):t.isUpcoming?t.$t("Video.Upcoming"):t.duration)+" ")]):t._e(),""!==t.externalPlayer?e("ft-icon-button",{staticClass:"externalPlayerIcon",attrs:{title:t.$t("Video.External Player.OpenInTemplate",{externalPlayer:t.externalPlayer}),icon:["fas","external-link-alt"],theme:"base",padding:"watchPlaylistItem"===t.appearance?6:7,size:"watchPlaylistItem"===t.appearance?12:16},on:{click:t.handleExternalPlayer}}):t._e(),t.isLive?t._e():e("ft-icon-button",{staticClass:"favoritesIcon",attrs:{title:t.$t("Video.Save Video"),icon:["fas","star"],theme:t.favoriteIconTheme,padding:"watchPlaylistItem"===t.appearance?5:6,size:"watchPlaylistItem"===t.appearance?14:18},on:{click:t.toggleSave}}),t.addWatchedStyle?e("div",{staticClass:"videoWatched"},[t._v(" "+t._s(t.$t("Video.Watched"))+" ")]):t._e(),t.watched?e("div",{staticClass:"watchedProgressBar",style:{width:t.progressPercentage+"%"}}):t._e()],1),e("div",{staticClass:"info"},[e("router-link",{staticClass:"title",attrs:{to:{path:`/watch/${t.id}`,query:t.playlistIdFinal?{playlistId:t.playlistIdFinal}:{}}}},[t._v(" "+t._s(t.displayTitle)+" ")]),e("div",{staticClass:"infoLine"},[e("router-link",{staticClass:"channelName",attrs:{to:`/channel/${t.channelId}`}},[e("span",[t._v(t._s(t.channelName))])]),t.isLive||t.isUpcoming||t.isPremium||t.hideViews?t._e():[e("span",{staticClass:"viewCount"},[t._v("  "+t._s(t.parsedViewCount)+" ")]),1===t.viewCount?e("span",[t._v(t._s(t.$t("Video.View").toLowerCase()))]):e("span",[t._v(t._s(t.$t("Video.Views").toLowerCase()))])],""===t.uploadedTime||t.isLive||t.inHistory?t._e():e("span",{staticClass:"uploadedTime"},[t._v("  "+t._s(t.uploadedTime))]),t.inHistory?e("span",{staticClass:"uploadedTime"},[t._v("  "+t._s(t.publishedText))]):t._e(),t.isLive&&!t.hideViews?e("span",{staticClass:"viewCount"},[t._v("  "+t._s(t.parsedViewCount)+" "+t._s(t.$t("Video.Watching").toLowerCase()))]):t._e()],2),e("ft-icon-button",{staticClass:"optionsButton",attrs:{icon:["fas","ellipsis-v"],title:"More Options",theme:"base-no-default",size:16,"use-shadow":!1,"dropdown-position-x":"left","dropdown-options":t.dropdownOptions},on:{click:t.handleOptionsClick}}),"grid"!==t.listType&&"result"===t.appearance?e("p",{staticClass:"description"},[t._v(" "+t._s(t.description)+" ")]):t._e()],1)])}),[],!1,null,"30723239",null).exports;let yc;yc=i(30794).Z;const vc=yc.settings,bc=yc.history,_c=yc.profiles,wc=yc.playlists,Tc={historyCache:[]},Sc={setHistoryCache(t,e){t.historyCache=e},hoistEntryToTopOfHistoryCache(t,{currentIndex:e,updatedEntry:i}){t.historyCache.splice(e,1),t.historyCache.unshift(i)},upsertToHistoryCache(t,e){const i=t.historyCache.findIndex((t=>e.videoId===t.videoId));-1!==i&&t.historyCache.splice(i,1),t.historyCache.unshift(e)},updateRecordWatchProgressInHistoryCache(t,{videoId:e,watchProgress:i}){const n=t.historyCache.findIndex((t=>t.videoId===e)),r=Object.assign({},t.historyCache[n]);r.watchProgress=i,t.historyCache.splice(n,1,r)},updateRecordLastViewedPlaylistIdInHistoryCache(t,{videoId:e,lastViewedPlaylistId:i}){const n=t.historyCache.findIndex((t=>t.videoId===e)),r=Object.assign({},t.historyCache[n]);r.lastViewedPlaylistId=i,t.historyCache.splice(n,1,r)},removeFromHistoryCacheById(t,e){for(let i=0;i<t.historyCache.length;i++)if(t.historyCache[i].videoId===e){t.historyCache.splice(i,1);break}}},xc={state:Tc,getters:{getHistoryCache:()=>Tc.historyCache},actions:{async grabHistory({commit:t}){try{t("setHistoryCache",await bc.find())}catch(t){console.error(t)}},async updateHistory({commit:t},e){try{await bc.upsert(e),t("upsertToHistoryCache",e)}catch(t){console.error(t)}},async removeFromHistory({commit:t},e){try{await bc.delete(e),t("removeFromHistoryCacheById",e)}catch(t){console.error(t)}},async removeAllHistory({commit:t}){try{await bc.deleteAll(),t("setHistoryCache",[])}catch(t){console.error(t)}},async updateWatchProgress({commit:t},{videoId:e,watchProgress:i}){try{await bc.updateWatchProgress(e,i),t("updateRecordWatchProgressInHistoryCache",{videoId:e,watchProgress:i})}catch(t){console.error(t)}},async updateLastViewedPlaylist({commit:t},{videoId:e,lastViewedPlaylistId:i}){try{await bc.updateLastViewedPlaylist(e,i),t("updateRecordLastViewedPlaylistIdInHistoryCache",{videoId:e,lastViewedPlaylistId:i})}catch(t){console.error(t)}},compactHistory(t){bc.persist()}},mutations:Sc};var kc=i(19382),Cc=i.n(kc);async function Ec(t){try{return await Cc().access(t),!0}catch{return!1}}const Ic={async fetchInvidiousInstances({commit:t}){let e=[];try{const t=await fetch("static/instances.json");e=(await t.json()).filter((t=>t[1].api)).map((t=>t[1].uri.replace(/\/$/,"")))}catch(t){console.error(t)}if(0===e.length){const t="invidious-instances.json",i="src/renderer/store/modules/static/";if(await Ec(`${i}${t}`)){console.warn("reading static file for invidious instances");const n=await Cc().readFile(`${i}${t}`);e=JSON.parse(n).map((t=>t.url))}}t("setInvidiousInstancesList",e)},setRandomCurrentInvidiousInstance({commit:t,state:e}){const i=e.invidiousInstancesList;t("setCurrentInvidiousInstance",i[Math.floor(Math.random()*i.length)])}},Pc={setCurrentInvidiousInstance(t,e){t.currentInvidiousInstance=e},setInvidiousInstancesList(t,e){t.invidiousInstancesList=e}},Ac={state:{currentInvidiousInstance:"",invidiousInstancesList:null},getters:{getCurrentInvidiousInstance:t=>t.currentInvidiousInstance,getInvidiousInstancesList:t=>t.invidiousInstancesList},actions:Ic,mutations:Pc},Lc={playlists:[{playlistName:"Favorites",protected:!0,videos:[]},{playlistName:"WatchLater",protected:!0,removeOnWatched:!0,videos:[]}]},Oc={getAllPlaylists:()=>Lc.playlists,getFavorites:()=>Lc.playlists[0],getPlaylist:t=>Lc.playlists.find((e=>e._id===t)),getWatchLater:()=>Lc.playlists[1]},Dc={async addPlaylist({commit:t},e){try{await wc.create(e),t("addPlaylist",e)}catch(t){console.error(t)}},async addPlaylists({commit:t},e){try{await wc.create(e),t("addPlaylists",e)}catch(t){console.error(t)}},async addVideo({commit:t},e){try{const{playlistName:i,videoData:n}=e;await wc.upsertVideoByPlaylistName(i,n),t("addVideo",e)}catch(t){console.error(t)}},async addVideos({commit:t},e){try{const{playlistId:i,videoIds:n}=e;await wc.upsertVideoIdsByPlaylistId(i,n),t("addVideos",e)}catch(t){console.error(t)}},async grabAllPlaylists({commit:t,dispatch:e,state:i}){try{const n=await wc.find();0===n.length?(t("setAllPlaylists",i.playlists),e("addPlaylists",n)):t("setAllPlaylists",n)}catch(t){console.error(t)}},async removeAllPlaylists({commit:t}){try{await wc.deleteAll(),t("removeAllPlaylists")}catch(t){console.error(t)}},async removeAllVideos({commit:t},e){try{await wc.deleteAllVideosByPlaylistName(e),t("removeAllVideos",e)}catch(t){console.error(t)}},async removePlaylist({commit:t},e){try{await wc.delete(e),t("removePlaylist",e)}catch(t){console.error(t)}},async removePlaylists({commit:t},e){try{await wc.deleteMultiple(e),t("removePlaylists",e)}catch(t){console.error(t)}},async removeVideo({commit:t},e){try{const{playlistName:i,videoId:n}=e;await wc.deleteVideoIdByPlaylistName(i,n),t("removeVideo",e)}catch(t){console.error(t)}},async removeVideos({commit:t},e){try{const{playlistName:i,videoIds:n}=e;await wc.deleteVideoIdsByPlaylistName(i,n),t("removeVideos",e)}catch(t){console.error(t)}}},Mc={addPlaylist(t,e){t.playlists.push(e)},addPlaylists(t,e){t.playlists=t.playlists.concat(e)},addVideo(t,e){const i=t.playlists.find((t=>t.playlistName===e.playlistName));i&&i.videos.push(e.videoData)},addVideos(t,e){const i=t.playlists.find((t=>t._id===e.playlistId));i&&(i.videos=i.videos.concat(e.playlistIds))},removeAllPlaylists(t){t.playlists=t.playlists.filter((t=>!0!==t.protected))},removeAllVideos(t,e){const i=t.playlists.find((t=>t.playlistName===e));i&&(i.videos=[])},removeVideo(t,e){const i=t.playlists.findIndex((t=>t.playlistName===e.playlistName));-1!==i&&(t.playlists[i].videos=t.playlists[i].videos.filter((t=>t.videoId!==e.videoId)))},removeVideos(t,e){const i=t.playlists.findIndex((t=>t._id===e.playlistId));-1!==i&&(i.videos=i.videos.filter((t=>-1===e.videoId.indexOf(t))))},removePlaylist(t,e){t.playlists=t.playlists.filter((t=>t._id!==e||t.protected))},setAllPlaylists(t,e){t.playlists=e}},Rc={state:Lc,getters:Oc,actions:Dc,mutations:Mc},Nc=[{name:"Red",value:"#d50000"},{name:"Pink",value:"#C51162"},{name:"Purple",value:"#AA00FF"},{name:"DeepPurple",value:"#6200EA"},{name:"Indigo",value:"#304FFE"},{name:"Blue",value:"#2962FF"},{name:"LightBlue",value:"#0091EA"},{name:"Cyan",value:"#00B8D4"},{name:"Teal",value:"#00BFA5"},{name:"Green",value:"#00C853"},{name:"LightGreen",value:"#64DD17"},{name:"Lime",value:"#AEEA00"},{name:"Yellow",value:"#FFD600"},{name:"Amber",value:"#FFAB00"},{name:"Orange",value:"#FF6D00"},{name:"DeepOrange",value:"#DD2C00"},{name:"DraculaCyan",value:"#8BE9FD"},{name:"DraculaGreen",value:"#50FA7B"},{name:"DraculaOrange",value:"#FFB86C"},{name:"DraculaPink",value:"#FF79C6"},{name:"DraculaPurple",value:"#BD93F9"},{name:"DraculaRed",value:"#FF5555"},{name:"DraculaYellow",value:"#F1FA8C"},{name:"CatppuccinMochaRosewater",value:"#F5E0DC"},{name:"CatppuccinMochaFlamingo",value:"#F2CDCD"},{name:"CatppuccinMochaPink",value:"#F5C2E7"},{name:"CatppuccinMochaMauve",value:"#CBA6F7"},{name:"CatppuccinMochaRed",value:"#F38BA8"},{name:"CatppuccinMochaMaroon",value:"#EBA0AC"},{name:"CatppuccinMochaPeach",value:"#FAB387"},{name:"CatppuccinMochaYellow",value:"#F9E2AF"},{name:"CatppuccinMochaGreen",value:"#A6E3A1"},{name:"CatppuccinMochaTeal",value:"#94E2D5"},{name:"CatppuccinMochaSky",value:"#89DCEB"},{name:"CatppuccinMochaSapphire",value:"#74C7EC"},{name:"CatppuccinMochaBlue",value:"#89B4FA"},{name:"CatppuccinMochaLavender",value:"#B4BEFE"}];function Bc(){const t=Math.floor(Math.random()*Nc.length);return"main"+Nc[t].name}function Fc(){const t=Math.floor(Math.random()*Nc.length);return Nc[t].value}function $c(t){const e=t.substring(1,7);return(.299*parseInt(e.substring(0,2),16)+.587*parseInt(e.substring(2,4),16)+.114*parseInt(e.substring(4,6),16))/255>.5?"#000000":"#FFFFFF"}const Uc={profileList:[{_id:wa,name:"All Channels",bgColor:"#000000",textColor:"#FFFFFF",subscriptions:[]}],activeProfile:wa},jc={getProfileList:()=>Uc.profileList,getActiveProfile:t=>{const e=t.activeProfile;return t.profileList.find((t=>t._id===e))},profileById:t=>e=>{const i=t.profileList.find((t=>t._id===e));return i}};function Vc(t,e){return t._id===wa?-1:e._id===wa?1:t.name<e.name?-1:t.name>e.name?1:0}const Hc={async grabAllProfiles({rootState:t,commit:e},i=null){let n;try{n=await _c.find()}catch(t){return void console.error(t)}if(Array.isArray(n))if(0!==n.length){if(n=n.sort(Vc),Uc.profileList.length<n.length){const i=n.find((e=>e._id===t.settings.defaultProfile));i&&e("setActiveProfile",i._id)}e("setProfileList",n)}else{const t=Fc(),n=$c(t),r={_id:wa,name:i,bgColor:t,textColor:n,subscriptions:[]};try{await _c.create(r),e("setProfileList",[r])}catch(t){console.error(t)}}},async updateSubscriptionDetails({getters:t,dispatch:e},{channelThumbnailUrl:i,channelName:n,channelId:r}){const s=i?.replace(/=s\d*/,"=s176")??null,a=t.getProfileList;for(const t of a){const i=JSON.parse(JSON.stringify(t)),a=i.subscriptions.find((t=>t.id===r))??null;if(null===a)continue;let o=!1;if((a.name!==n||a.thumbnail!==s&&null!==s)&&(null!==s&&(a.thumbnail=s),a.name=n,o=!0),!o)break;await e("updateProfile",i)}},async createProfile({commit:t},e){try{t("addProfileToList",await _c.create(e))}catch(t){console.error(t)}},async updateProfile({commit:t},e){try{await _c.upsert(e),t("upsertProfileToList",e)}catch(t){console.error(t)}},async removeProfile({commit:t},e){try{await _c.delete(e),t("removeProfileFromList",e)}catch(t){console.error(t)}},compactProfiles(t){_c.persist()},updateActiveProfile({commit:t},e){t("setActiveProfile",e)}},qc={setProfileList(t,e){t.profileList=e},setActiveProfile(t,e){t.activeProfile=e},addProfileToList(t,e){t.profileList.push(e),t.profileList.sort(Vc)},upsertProfileToList(t,e){const i=t.profileList.findIndex((t=>t._id===e._id));-1===i?t.profileList.push(e):t.profileList.splice(i,1,e),t.profileList.sort(Vc)},removeProfileFromList(t,e){const i=t.profileList.findIndex((t=>t._id===e));t.profileList.splice(i,1)}},Wc={state:Uc,getters:jc,actions:Hc,mutations:qc};var zc=i(10651),Gc=i.n(zc),Kc=i(34155);const Yc=t=>t.replace(/^\w/,(t=>t.toUpperCase())),Xc=t=>"get"+Yc(t),Qc=t=>"set"+Yc(t),Jc=t=>"update"+Yc(t),Zc=t=>"trigger"+Yc(t)+"SideEffects",tu={autoplayPlaylists:!0,autoplayVideos:!0,backendFallback:!1,backendPreference:"invidious",barColor:!1,checkForBlogPosts:!1,checkForUpdates:!1,baseTheme:"system",mainColor:"Red",secColor:"Blue",defaultCaptionSettings:"{}",defaultInterval:5,defaultPlayback:1,defaultProfile:wa,defaultQuality:"720",defaultSkipInterval:5,defaultTheatreMode:!1,defaultVideoFormat:"dash",disableSmoothScrolling:!1,displayVideoPlayButton:!0,enableSearchSuggestions:!0,enableSubtitles:!0,enterFullscreenOnDisplayRotate:!0,externalLinkHandling:"",externalPlayer:"",externalPlayerExecutable:"",externalPlayerIgnoreWarnings:!1,externalPlayerCustomArgs:"",expandSideBar:!1,forceLocalBackendForLegacy:!1,hideActiveSubscriptions:!1,hideChannelSubscriptions:!1,hideCommentLikes:!1,hideComments:!1,channelsHidden:"[]",hideVideoDescription:!1,hideLiveChat:!1,hideLiveStreams:!1,hideHeaderLogo:!1,hidePlaylists:!1,hidePopularVideos:!1,hideRecommendedVideos:!1,hideSearchBar:!1,hideSharingActions:!1,hideTrendingVideos:!1,hideUnsubscribeButton:!1,hideUpcomingPremieres:!1,hideVideoLikesAndDislikes:!1,hideVideoViews:!1,hideWatchedSubs:!1,hideLabelsSideBar:!1,hideChapters:!1,showDistractionFreeTitles:!1,landingPage:"subscriptions",listType:"grid",maxVideoPlaybackRate:3,playNextVideo:!1,proxyHostname:"127.0.0.1",proxyPort:"9050",proxyProtocol:"socks5",proxyVideos:!1,region:"VN",rememberHistory:!0,removeVideoMetaFiles:!0,saveWatchedProgress:!0,saveVideoHistoryWithLastViewedPlaylist:!0,showFamilyFriendlyOnly:!1,sponsorBlockShowSkippedToast:!0,sponsorBlockUrl:"https://sponsor.ajay.app",sponsorBlockSponsor:{color:"Blue",skip:"autoSkip"},sponsorBlockSelfPromo:{color:"Yellow",skip:"showInSeekBar"},sponsorBlockInteraction:{color:"Green",skip:"showInSeekBar"},sponsorBlockIntro:{color:"Orange",skip:"doNothing"},sponsorBlockOutro:{color:"Orange",skip:"doNothing"},sponsorBlockRecap:{color:"Orange",skip:"doNothing"},sponsorBlockMusicOffTopic:{color:"Orange",skip:"doNothing"},sponsorBlockFiller:{color:"Orange",skip:"doNothing"},thumbnailPreference:"",useProxy:!1,useRssFeeds:!1,useSponsorBlock:!1,videoVolumeMouseScroll:!1,videoPlaybackRateMouseScroll:!1,videoSkipMouseScroll:!1,videoPlaybackRateInterval:.25,downloadFolderPath:"",downloadBehavior:"download",enableScreenshot:!1,screenshotFormat:"png",screenshotQuality:95,screenshotAskPath:!1,screenshotFolderPath:"",screenshotFilenamePattern:"%Y%M%D-%H%N%S",fetchSubscriptionsAutomatically:!0,settingsPassword:"",allowDashAv1Formats:!1,showThumbnailInMediaControls:!0},eu={currentLocale:{defaultValue:"vi",sideEffectsHandler:async function({dispatch:t},e){let i=e;if("system"===e){const t=(await async function(){let t;return navigator&&navigator.language&&(t=navigator.language),t||"en-US"}()).replace("-","_"),e=t.split("_")[0],n=xo.allLocales.filter((t=>t.replace("-","_").split("_")[0].includes(e))).sort(((e,i)=>{const n=e.replace("-","_"),r=i.replace("-","_"),s=n.split("_"),a=r.split("_");return s.includes(t)?-1:a.includes(t)?1:1===s.length?-1:1===a.length?1:n.localeCompare(r)}));n.length>0&&(i=n[0]),i||(i="vi",kR("Locale not found, defaulting to vi"))}await xo.loadLocale(i),xo.locale=i,await t("getRegionData",{locale:i})}},defaultInvidiousInstance:{defaultValue:"",sideEffectsHandler:({commit:t,getters:e},i)=>{""!==i&&e.getCurrentInvidiousInstance!==i&&t("setCurrentInvidiousInstance",i)}},defaultVolume:{defaultValue:1,sideEffectsHandler:(t,e)=>{sessionStorage.setItem("volume",e),0===e?sessionStorage.setItem("muted","true"):sessionStorage.setItem("muted","false"),sessionStorage.setItem("defaultVolume",e)}},uiScale:{defaultValue:100,sideEffectsHandler:(t,e)=>{}},disableBackgroundModeNotification:{defaultValue:!1,sideEffectsHandler:(t,e)=>{if(Kc.env.IS_CORDOVA)if("plugins"in Gc()&&"backgroundMode"in Gc().plugins){const{backgroundMode:t}=Gc().plugins;t.setDefaults({title:"Youtubub",silent:e})}else console.error("Background mode plugin failed to load.")}}},iu={},nu={};Object.assign(iu,{settingsWithSideEffects:Object.keys(eu)}),Object.assign(nu,{settingHasSideEffects:t=>e=>t.settingsWithSideEffects.includes(e)});const ru={grabUserSettings:async({commit:t,dispatch:e,getters:i})=>{try{const n=Object.entries(Object.assign({},Object.fromEntries(Object.entries(eu).map((([t,{defaultValue:e}])=>[t,e]))),Object.fromEntries((await vc.find()).map((({_id:t,value:e})=>[t,e])))));for(const r of n){const[n,s]=r;i.settingHasSideEffects(n)&&e(Zc(n),s),Object.keys(au).includes(Qc(n))&&t(Qc(n),s)}}catch(t){console.error(t)}},setupListenersToSyncWindows:({commit:t,dispatch:e,getters:n})=>{const{ipcRenderer:r}=i(10651);r.on("sync-settings",((i,{event:r,data:s})=>{r===fa?(n.settingHasSideEffects(s._id)&&e(Zc(s._id),s.value),t(Qc(s._id),s.value)):console.error("settings: invalid sync event received")})),r.on("sync-history",((e,{event:i,data:n})=>{switch(i){case fa:t("upsertToHistoryCache",n);break;case ya:t("updateRecordWatchProgressInHistoryCache",n);break;case va:t("updateRecordLastViewedPlaylistIdInHistoryCache",n);break;case ma:t("removeFromHistoryCacheById",n);break;case ga:t("setHistoryCache",[]);break;default:console.error("history: invalid sync event received")}})),r.on("sync-profiles",((e,{event:i,data:n})=>{switch(i){case pa:t("addProfileToList",n);break;case fa:t("upsertProfileToList",n);break;case ma:t("removeProfileFromList",n);break;default:console.error("profiles: invalid sync event received")}})),r.on("sync-playlists",((e,{event:i,data:n})=>{switch(i){case ba:t("addVideo",n);break;case _a:t("removeVideo",n);break;default:console.error("playlists: invalid sync event received")}}))}},su={},au={},ou={};Object.assign(tu,Object.fromEntries(Object.keys(eu).map((t=>[t,eu[t].defaultValue]))));for(const t of Object.keys(tu)){const e=Xc(t),i=Qc(t),n=Jc(t),r=Zc(t);su[e]=e=>e[t],au[i]=(e,i)=>{e[t]=i},Object.keys(eu).includes(t)&&(ou[r]=eu[t].sideEffectsHandler),ou[n]=async({commit:e,dispatch:n,getters:s},a)=>{try{await vc.upsert(t,a),s.settingHasSideEffects(t)&&n(r,a),e(i,a)}catch(t){console.error(t)}}}Object.assign(tu,iu),Object.assign(su,nu),Object.assign(au,{}),Object.assign(ou,ru);const lu={state:tu,getters:su,actions:ou,mutations:au},cu={allSubscriptionsList:[],profileSubscriptions:{activeProfile:wa,videoList:[],errorChannels:[]}},uu={updateAllSubscriptionsList({commit:t},e){t("setAllSubscriptionsList",e)},updateProfileSubscriptions({commit:t},e){t("setProfileSubscriptions",e)}},hu={setAllSubscriptionsList(t,e){t.allSubscriptionsList=e},setProfileSubscriptions(t,e){t.profileSubscriptions=e}},du={state:cu,getters:{getAllSubscriptionsList:()=>cu.allSubscriptionsList,getProfileSubscriptions:()=>cu.profileSubscriptions},actions:uu,mutations:hu};var pu=i(26470),fu=i.n(pu);const mu={isSideNavOpen:!1,sessionSearchHistory:[],popularCache:null,trendingCache:{default:null,music:null,gaming:null,movies:null},cachedPlaylist:null,showProgressBar:!1,progressBarPercentage:0,regionNames:[],regionValues:[],recentBlogPosts:[],searchSettings:{sortBy:"relevance",time:"",type:"all",duration:""},externalPlayerNames:[],externalPlayerNameTranslationKeys:[],externalPlayerValues:[],externalPlayerCmdArguments:{}},gu={async downloadMedia({rootState:t},{url:e,title:i,extension:n,fallingBackPath:r}){ER(e)},parseScreenshotCustomFileName:function({rootState:t},e){return new Promise(((i,n)=>{const{pattern:r=t.settings.screenshotFilenamePattern,date:s,playerTime:a,videoId:o}=e,l=[["%Y",s.getFullYear()],["%M",(s.getMonth()+1).toString().padStart(2,"0")],["%D",s.getDate().toString().padStart(2,"0")],["%H",s.getHours().toString().padStart(2,"0")],["%N",s.getMinutes().toString().padStart(2,"0")],["%S",s.getSeconds().toString().padStart(2,"0")],["%T",s.getMilliseconds().toString().padStart(3,"0")],["%s",parseInt(a)],["%t",(a%1).toString().slice(2,5)||"000"],["%i",o]];let c,u=r;for(const[t,e]of l)u=u.replaceAll(t,e);if(u!==function(t){let e=t,i={};switch(TR.platform){case"win32":i={"<":"<",">":">",":":":",'"':'"',"/":"/","\\":"'","|":"|","?":"?","*":"*"};break;case"darwin":i={"/":"/",":":":"};break;case"linux":i={"/":"/"}}for(const t in i)e=e.replaceAll(t,i[t]);return e}(u)&&n(new Error("Forbidden Characters")),-1!==u.indexOf(fu().sep)){const t=u.lastIndexOf(fu().sep);c=u.substring(t+1)}else c=u;c||n(new Error("Empty File Name")),i(u)}))},updateShowProgressBar({commit:t},e){t("setShowProgressBar",e)},async getRegionData({commit:t},{locale:e}){let i;i=[".DS_Store","ar","bg","cs","da","de-DE","ee","el","en-GB","en-US","es","es-AR","es-MX","eu","fi","fr-FR","hr","hu","is","it","ja","ko","lt","nb-NO","nl","pl","pt","pt-BR","pt-PT","ro","ru","sk","sv","th","uk","zh","zh-tw"].includes(e);const n=`/static/geolocations/${i?e:"en-US"}/countries.json`,r=(await(await fetch(OR(n))).json()).map((t=>({id:t.id,name:t.name,code:t.alpha2})));r.sort(((t,e)=>t.id-e.id));const s=r.map((t=>t.name)),a=r.map((t=>t.code));t("setRegionNames",s),t("setRegionValues",a)},async getYoutubeUrlInfo({rootState:t,state:e},i){SR.test(i)&&(i=`https://www.youtube.com/${i}`);const{videoId:n,timestamp:r,playlistId:s}=function(t){let e;const i={videoId:null,timestamp:null,playlistId:null};try{e=new URL(t)}catch(t){return i}function n(t){i.videoId=t,i.timestamp=e.searchParams.get("t")}return[function(){if("/watch"===e.pathname&&e.searchParams.has("v"))return n(e.searchParams.get("v")),i.playlistId=e.searchParams.get("list"),i},function(){if("youtu.be"===e.host&&/^\/[\w-]+$/.test(e.pathname))return n(e.pathname.slice(1)),i},function(){if(/^\/embed\/[\w-]+$/.test(e.pathname)){const t=e.pathname.replace("/embed/","");return"videoseries"===t?i.playlistId=e.searchParams.get("list"):n(t),i}},function(){if(/^\/shorts\/[\w-]+$/.test(e.pathname))return n(e.pathname.replace("/shorts/","")),i},function(){if(/^cadence\.(gq|moe)$/.test(e.host)&&/^\/cloudtube\/video\/[\w-]+$/.test(e.pathname))return n(e.pathname.slice("/cloudtube/video/".length)),i}].reduce(((t,e)=>t||e()),null)||i}(i);if(n)return{urlType:"video",videoId:n,playlistId:s,timestamp:r};let a;try{a=new URL(i)}catch{return{urlType:"invalid_url"}}let o="unknown";const l=/^\/(?:(?:channel|user|c)\/)?(?<channelId>[^/]+)(?:\/(?<tab>join|featured|videos|live|streams|playlists|about|community|channels))?\/?$/,c=new Map([["playlist",/^(\/playlist\/?|\/embed(\/?videoseries)?)$/],["search",/^\/results\/?$/],["hashtag",/^\/hashtag\/([^#&/?]+)$/],["channel",l]]);for(const[t,e]of c)if(e.test(a.pathname)){o=t;break}switch(o){case"playlist":{if(!a.searchParams.has("list"))throw new Error('Playlist: "list" field not found');const t=a.searchParams.get("list");a.searchParams.delete("list");const e={};for(const[t,i]of a.searchParams)e[t]=i;return{urlType:"playlist",playlistId:t,query:e}}case"search":{if(!a.searchParams.has("search_query"))throw new Error('Search: "search_query" field not found');const t=a.searchParams.get("search_query");a.searchParams.delete("search_query");const i=e.searchSettings,n={sortBy:i.sortBy,time:i.time,type:i.type,duration:i.duration};for(const[t,e]of a.searchParams)n[t]=e;return{urlType:"search",searchQuery:t,query:n}}case"hashtag":return{urlType:"hashtag"};case"channel":{const t=a.pathname.match(l),e=t.groups.channelId;if(!e)throw new Error("Channel: could not extract id");let i=null;switch(t.groups.tab){case"live":case"streams":i="live";break;case"playlists":i="playlists";break;case"channels":case"about":i="about";break;case"community":i="community";break;default:i="videos"}return{urlType:"channel",channelId:e,subPath:i,url:a.toString()}}default:return{urlType:"unknown"}}},clearSessionSearchHistory({commit:t}){t("setSessionSearchHistory",[])},async getExternalPlayerCmdArgumentsData({commit:t},e){const i="external-player-map.json";let n;const r="src/renderer/store/modules/static/";n=await Ec(`${r}${i}`)?await Cc().readFile(`${r}${i}`):'[{"name":"None","value":"","cmdArguments":null}]';const s=JSON.parse(n).map((t=>({name:t.name,nameTranslationKey:t.nameTranslationKey,value:t.value,cmdArguments:t.cmdArguments}))),a=s.map((t=>t.name)),o=s.map((t=>t.nameTranslationKey)),l=s.map((t=>t.value)),c=s.reduce(((t,e)=>(t[e.value]=e.cmdArguments,t)),{});t("setExternalPlayerNames",a),t("setExternalPlayerNameTranslationKeys",o),t("setExternalPlayerValues",l),t("setExternalPlayerCmdArguments",c)},openInExternalPlayer({state:t,rootState:e},n){const r=[],s=e.settings.externalPlayer,a=t.externalPlayerCmdArguments[s],o=""!==e.settings.externalPlayerExecutable?e.settings.externalPlayerExecutable:a.defaultExecutable,l=e.settings.externalPlayerIgnoreWarnings,c=e.settings.externalPlayerCustomArgs;if("string"==typeof c&&""!==c){const t=c.split(";");r.push(...t)}else if("string"==typeof a.defaultCustomArguments&&""!==a.defaultCustomArguments){const t=a.defaultCustomArguments.split(";");r.push(...t)}n.watchProgress>0&&n.watchProgress<n.videoLength-10&&("string"==typeof a.startOffset?r.push(`${a.startOffset}${n.watchProgress}`):l||FR(s,"starting video at offset")),null!=n.playbackRate&&("string"==typeof a.playbackRate?r.push(`${a.playbackRate}${n.playbackRate}`):l||FR(s,"setting a playback rate")),"string"==typeof a.playlistUrl&&null!=n.playlistId&&""!==n.playlistId?(null!=n.playlistIndex&&("string"==typeof a.playlistIndex?r.push(`${a.playlistIndex}${n.playlistIndex}`):l||FR(s,"opening specific video in a playlist (falling back to opening the video)")),n.playlistReverse&&("string"==typeof a.playlistReverse?r.push(a.playlistReverse):l||FR(s,"reversing playlists")),n.playlistShuffle&&("string"==typeof a.playlistShuffle?r.push(a.playlistShuffle):l||FR(s,"shuffling playlists")),n.playlistLoop&&("string"==typeof a.playlistLoop?r.push(a.playlistLoop):l||FR(s,"looping playlists")),a.supportsYtdlProtocol?r.push(`${a.playlistUrl}ytdl://${n.playlistId}`):r.push(`${a.playlistUrl}https://youtube.com/playlist?list=${n.playlistId}`)):(null==n.playlistId||""===n.playlistId||l||FR(s,"opening playlists"),null!=n.videoId&&(a.supportsYtdlProtocol?r.push(`${a.videoUrl}ytdl://${n.videoId}`):r.push(`${a.videoUrl}https://www.youtube.com/watch?v=${n.videoId}`)));const u=null!=n.playlistId&&""!==n.playlistId?xo.t("Video.External Player.playlist"):xo.t("Video.External Player.video");kR(xo.t("Video.External Player.OpeningTemplate",{videoOrPlaylist:u,externalPlayer:s}));const{ipcRenderer:h}=i(10651);h.send("open-in-external-player",{executable:o,args:r})}},yu={toggleSideNav(t){t.isSideNavOpen=!t.isSideNavOpen},setShowProgressBar(t,e){t.showProgressBar=e},setProgressBarPercentage(t,e){t.progressBarPercentage=e},setSessionSearchHistory(t,e){t.sessionSearchHistory=e},addToSessionSearchHistory(t,e){const i=t.sessionSearchHistory.findIndex((t=>t.query===e.query&&MR(e.searchSettings,t.searchSettings)));-1!==i?(t.sessionSearchHistory[i].data=e.data,t.sessionSearchHistory[i].nextPageRef=e.nextPageRef):t.sessionSearchHistory.push(e)},setPopularCache(t,e){t.popularCache=e},setTrendingCache(t,{value:e,page:i}){t.trendingCache[i]=e},setCachedPlaylist(t,e){t.cachedPlaylist=e},setSearchSortBy(t,e){t.searchSettings.sortBy=e},setSearchTime(t,e){t.searchSettings.time=e},setSearchType(t,e){t.searchSettings.type=e},setSearchDuration(t,e){t.searchSettings.duration=e},setRegionNames(t,e){t.regionNames=e},setRegionValues(t,e){t.regionValues=e},setRecentBlogPosts(t,e){t.recentBlogPosts=e},setExternalPlayerNames(t,e){t.externalPlayerNames=e},setExternalPlayerNameTranslationKeys(t,e){t.externalPlayerNameTranslationKeys=e},setExternalPlayerValues(t,e){t.externalPlayerValues=e},setExternalPlayerCmdArguments(t,e){t.externalPlayerCmdArguments=e}},vu={history:xc,invidious:Ac,playlists:Rc,profiles:Wc,settings:lu,subscriptions:du,utils:{state:mu,getters:{getIsSideNavOpen:()=>mu.isSideNavOpen,getCurrentVolume:()=>mu.currentVolume,getSessionSearchHistory:()=>mu.sessionSearchHistory,getPopularCache:()=>mu.popularCache,getTrendingCache:()=>mu.trendingCache,getCachedPlaylist:()=>mu.cachedPlaylist,getSearchSettings:()=>mu.searchSettings,getShowProgressBar:()=>mu.showProgressBar,getProgressBarPercentage:()=>mu.progressBarPercentage,getRegionNames:()=>mu.regionNames,getRegionValues:()=>mu.regionValues,getRecentBlogPosts:()=>mu.recentBlogPosts,getExternalPlayerNames:()=>mu.externalPlayerNames,getExternalPlayerNameTranslationKeys:()=>mu.externalPlayerNameTranslationKeys,getExternalPlayerValues:()=>mu.externalPlayerValues,getExternalPlayerCmdArguments:()=>mu.externalPlayerCmdArguments},actions:gu,mutations:yu}};Wi.use(Bs);const bu=new Bs.Store({modules:vu,strict:!1});function _u(t){return"boolean"==typeof t}function wu(t,e){for(var i=t.length-1;i>=0;i--)t[i]===e&&t.splice(i,1)}function Tu(t,e){for(var i=t.length-1;i>=0;i--)!0===e(t[i])&&t.splice(i,1)}function Su(t){throw new Error("Unhandled case for value: '".concat(t,"'"))}var xu=/[A-Za-z]/,ku=/[\d]/,Cu=/\s/,Eu=/['"]/,Iu=/[\x00-\x1F\x7F]/,Pu=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,Au=Pu+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,Lu=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,Ou=(new RegExp("[".concat(Pu+Lu,"]")),Au+Lu),Du=new RegExp("[".concat(Ou,"]")),Mu=function(){function t(t){void 0===t&&(t={}),this.tagName="",this.attrs={},this.innerHTML="",this.tagName=t.tagName||"",this.attrs=t.attrs||{},this.innerHTML=t.innerHtml||t.innerHTML||""}return t.prototype.setTagName=function(t){return this.tagName=t,this},t.prototype.getTagName=function(){return this.tagName||""},t.prototype.setAttr=function(t,e){return this.getAttrs()[t]=e,this},t.prototype.getAttr=function(t){return this.getAttrs()[t]},t.prototype.setAttrs=function(t){return Object.assign(this.getAttrs(),t),this},t.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},t.prototype.setClass=function(t){return this.setAttr("class",t)},t.prototype.addClass=function(t){for(var e,i=this.getClass(),n=i?i.split(Cu):[],r=t.split(Cu);e=r.shift();)-1===n.indexOf(e)&&n.push(e);return this.getAttrs().class=n.join(" "),this},t.prototype.removeClass=function(t){for(var e,i=this.getClass(),n=i?i.split(Cu):[],r=t.split(Cu);n.length&&(e=r.shift());){var s=n.indexOf(e);-1!==s&&n.splice(s,1)}return this.getAttrs().class=n.join(" "),this},t.prototype.getClass=function(){return this.getAttrs().class||""},t.prototype.hasClass=function(t){return-1!==(" "+this.getClass()+" ").indexOf(" "+t+" ")},t.prototype.setInnerHTML=function(t){return this.innerHTML=t,this},t.prototype.setInnerHtml=function(t){return this.setInnerHTML(t)},t.prototype.getInnerHTML=function(){return this.innerHTML||""},t.prototype.getInnerHtml=function(){return this.getInnerHTML()},t.prototype.toAnchorString=function(){var t=this.getTagName(),e=this.buildAttrsStr();return["<",t,e=e?" "+e:"",">",this.getInnerHtml(),"</",t,">"].join("")},t.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var t=this.getAttrs(),e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+'="'+t[i]+'"');return e.join(" ")},t}(),Ru=function(){function t(t){void 0===t&&(t={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=t.newWindow||!1,this.truncate=t.truncate||{},this.className=t.className||""}return t.prototype.build=function(t){return new Mu({tagName:"a",attrs:this.createAttrs(t),innerHtml:this.processAnchorText(t.getAnchorText())})},t.prototype.createAttrs=function(t){var e={href:t.getAnchorHref()},i=this.createCssClass(t);return i&&(e.class=i),this.newWindow&&(e.target="_blank",e.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<t.getAnchorText().length&&(e.title=t.getAnchorHref()),e},t.prototype.createCssClass=function(t){var e=this.className;if(e){for(var i=[e],n=t.getCssClassSuffixes(),r=0,s=n.length;r<s;r++)i.push(e+"-"+n[r]);return i.join(" ")}return""},t.prototype.processAnchorText=function(t){return this.doTruncate(t)},t.prototype.doTruncate=function(t){var e=this.truncate;if(!e||!e.length)return t;var i=e.length,n=e.location;return"smart"===n?function(t,e,i){var n,r;null==i?(i="&hellip;",r=3,n=8):(r=i.length,n=i.length);var s=function(t){var e="";return t.scheme&&t.host&&(e+=t.scheme+"://"),t.host&&(e+=t.host),t.path&&(e+="/"+t.path),t.query&&(e+="?"+t.query),t.fragment&&(e+="#"+t.fragment),e},a=function(t,e){var n=e/2,r=Math.ceil(n),s=-1*Math.floor(n),a="";return s<0&&(a=t.substr(s)),t.substr(0,r)+i+a};if(t.length<=e)return t;var o=e-r,l=function(t){var e={},i=t,n=i.match(/^([a-z]+):\/\//i);return n&&(e.scheme=n[1],i=i.substr(n[0].length)),(n=i.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(e.host=n[1],i=i.substr(n[0].length)),(n=i.match(/^\/(.*?)(?=(\?|#|$))/i))&&(e.path=n[1],i=i.substr(n[0].length)),(n=i.match(/^\?(.*?)(?=(#|$))/i))&&(e.query=n[1],i=i.substr(n[0].length)),(n=i.match(/^#(.*?)$/i))&&(e.fragment=n[1]),e}(t);if(l.query){var c=l.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);c&&(l.query=l.query.substr(0,c[1].length),t=s(l))}if(t.length<=e)return t;if(l.host&&(l.host=l.host.replace(/^www\./,""),t=s(l)),t.length<=e)return t;var u="";if(l.host&&(u+=l.host),u.length>=o)return l.host.length==e?(l.host.substr(0,e-r)+i).substr(0,o+n):a(u,o).substr(0,o+n);var h="";if(l.path&&(h+="/"+l.path),l.query&&(h+="?"+l.query),h){if((u+h).length>=o)return(u+h).length==e?(u+h).substr(0,e):(u+a(h,o-u.length)).substr(0,o+n);u+=h}if(l.fragment){var d="#"+l.fragment;if((u+d).length>=o)return(u+d).length==e?(u+d).substr(0,e):(u+a(d,o-u.length)).substr(0,o+n);u+=d}if(l.scheme&&l.host){var p=l.scheme+"://";if((u+p).length<o)return(p+u).substr(0,e)}if(u.length<=e)return u;var f="";return o>0&&(f=u.substr(-1*Math.floor(o/2))),(u.substr(0,Math.ceil(o/2))+i+f).substr(0,o+n)}(t,i):"middle"===n?function(t,e,i){if(t.length<=e)return t;var n,r;null==i?(i="&hellip;",n=8,r=3):(n=i.length,r=i.length);var s=e-r,a="";return s>0&&(a=t.substr(-1*Math.floor(s/2))),(t.substr(0,Math.ceil(s/2))+i+a).substr(0,s+n)}(t,i):function(t,e,i){return function(t,e,i){var n;return t.length>e&&(null==i?(i="&hellip;",n=3):n=i.length,t=t.substring(0,e-n)+i),t}(t,e,void 0)}(t,i)},t}(),Nu=function(t,e){return Nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},Nu(t,e)};function Bu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Nu(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Fu=function(){return Fu=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Fu.apply(this,arguments)};Object.create,Object.create;var $u=function(){function t(t){this._=null,this.matchedText="",this.offset=0,this.tagBuilder=t.tagBuilder,this.matchedText=t.matchedText,this.offset=t.offset}return t.prototype.getMatchedText=function(){return this.matchedText},t.prototype.setOffset=function(t){this.offset=t},t.prototype.getOffset=function(){return this.offset},t.prototype.getCssClassSuffixes=function(){return[this.type]},t.prototype.buildTag=function(){return this.tagBuilder.build(this)},t}(),Uu=new RegExp("^(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|travelchannel|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|tatamotors|technology|university|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi||abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|builders|business|capetown|catering|catholic|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|etisalat|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|||||||||abarth|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|webcam|xihuan|yachts|yandex|zappos|||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|loans|locus|lotte|lotto|macys|mango|media|miami|money|movie|music|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo||||||||||||||aarp|able|adac|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kids|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|read|reit|rent|rest|rich|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone||||||||||||||||||||||||||aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceo|cfa|cfd|com|cpa|crs|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip||||||||||||||||||||||||||||||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)$"),ju=/[\/?#]/,Vu=/[-+&@#/%=~_()|'$*\[\]{}\u2713]/,Hu=/[?!:,.;^]/,qu=/https?:\/\//i,Wu=new RegExp("^"+qu.source,"i"),zu=new RegExp(Hu.source+"$"),Gu=/^(javascript|vbscript):/i,Ku=/^[A-Za-z][-.+A-Za-z0-9]*:(\/\/)?([^:/]*)/,Yu=/^(?:\/\/)?([^/#?:]+)/;function Xu(t){return xu.test(t)}function Qu(t){return xu.test(t)||ku.test(t)||"+"===t||"-"===t||"."===t}function Ju(t){return Du.test(t)}function Zu(t){return"_"===t||Ju(t)}function th(t){return Du.test(t)||Vu.test(t)||Hu.test(t)}function eh(t){return ju.test(t)}function ih(t){return Uu.test(t.toLowerCase())}var nh=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,rh=/[:/?#]/,sh=/^(https?:\/\/)?(www\.)?/i,ah=/^\/\//,oh=function(t){function e(e){var i=t.call(this,e)||this;return i.type="url",i.url="",i.urlMatchType="scheme",i.protocolRelativeMatch=!1,i.stripPrefix={scheme:!0,www:!0},i.stripTrailingSlash=!0,i.decodePercentEncoding=!0,i.protocolPrepended=!1,i.urlMatchType=e.urlMatchType,i.url=e.url,i.protocolRelativeMatch=e.protocolRelativeMatch,i.stripPrefix=e.stripPrefix,i.stripTrailingSlash=e.stripTrailingSlash,i.decodePercentEncoding=e.decodePercentEncoding,i}return Bu(e,t),e.prototype.getType=function(){return"url"},e.prototype.getUrlMatchType=function(){return this.urlMatchType},e.prototype.getUrl=function(){var t=this.url;return this.protocolRelativeMatch||"scheme"===this.urlMatchType||this.protocolPrepended||(t=this.url="http://"+t,this.protocolPrepended=!0),t},e.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},e.prototype.getAnchorText=function(){var t=this.getMatchedText();return this.protocolRelativeMatch&&(t=t.replace(ah,"")),this.stripPrefix.scheme&&(t=t.replace(Wu,"")),this.stripPrefix.www&&(t=t.replace(sh,"$1")),this.stripTrailingSlash&&(t=function(t){return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}(t)),this.decodePercentEncoding&&(t=function(t){var e=t.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(e)}catch(t){return e}}(t)),t},e}($u),lh=/^mailto:/i,ch=new RegExp("[".concat(Ou,"!#$%&'*+/=?^_`{|}~-]"));function uh(t){return ch.test(t)}var hh=function(t){function e(e){var i=t.call(this,e)||this;return i.type="email",i.email="",i.email=e.email,i}return Bu(e,t),e.prototype.getType=function(){return"email"},e.prototype.getEmail=function(){return this.email},e.prototype.getAnchorHref=function(){return"mailto:"+this.email},e.prototype.getAnchorText=function(){return this.email},e}($u);function dh(t){return"_"===t||Du.test(t)}var ph=["twitter","facebook","instagram","tiktok"],fh=function(t){function e(e){var i=t.call(this,e)||this;return i.type="hashtag",i.serviceName="twitter",i.hashtag="",i.serviceName=e.serviceName,i.hashtag=e.hashtag,i}return Bu(e,t),e.prototype.getType=function(){return"hashtag"},e.prototype.getServiceName=function(){return this.serviceName},e.prototype.getHashtag=function(){return this.hashtag},e.prototype.getAnchorHref=function(){var t=this.serviceName,e=this.hashtag;switch(t){case"twitter":return"https://twitter.com/hashtag/"+e;case"facebook":return"https://www.facebook.com/hashtag/"+e;case"instagram":return"https://instagram.com/explore/tags/"+e;case"tiktok":return"https://www.tiktok.com/tag/"+e;default:throw Su(t),new Error("Invalid hashtag service: ".concat(t))}},e.prototype.getAnchorText=function(){return"#"+this.hashtag},e.prototype.getCssClassSuffixes=function(){var e=t.prototype.getCssClassSuffixes.call(this),i=this.getServiceName();return i&&e.push(i),e},e}($u),mh={twitter:/^@\w{1,15}$/,instagram:/^@[_\w]{1,30}$/,soundcloud:/^@[-a-z0-9_]{3,25}$/,tiktok:/^@[.\w]{1,23}[\w]$/},gh=/[-\w.]/;function yh(t){return gh.test(t)}var vh=["twitter","instagram","soundcloud","tiktok"],bh=function(t){function e(e){var i=t.call(this,e)||this;return i.type="mention",i.serviceName="twitter",i.mention="",i.mention=e.mention,i.serviceName=e.serviceName,i}return Bu(e,t),e.prototype.getType=function(){return"mention"},e.prototype.getMention=function(){return this.mention},e.prototype.getServiceName=function(){return this.serviceName},e.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},e.prototype.getAnchorText=function(){return"@"+this.mention},e.prototype.getCssClassSuffixes=function(){var e=t.prototype.getCssClassSuffixes.call(this),i=this.getServiceName();return i&&e.push(i),e},e}($u),_h=/[-. ]/,wh=/[-. ()]/,Th=/[,;]/,Sh=new RegExp("^".concat(/(?:(?:(?:(\+)?\d{1,3}[-. ]?)?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-. ]?(?:\d[-. ]?){6,12}\d+))([,;]+[0-9]+#?)*/.source,"|").concat(/(0([1-9]-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"$"));function xh(t){return _h.test(t)}function kh(t){return Th.test(t)}var Ch=function(t){function e(e){var i=t.call(this,e)||this;return i.type="phone",i.number="",i.plusSign=!1,i.number=e.number,i.plusSign=e.plusSign,i}return Bu(e,t),e.prototype.getType=function(){return"phone"},e.prototype.getPhoneNumber=function(){return this.number},e.prototype.getNumber=function(){return this.getPhoneNumber()},e.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},e.prototype.getAnchorText=function(){return this.matchedText},e}($u);var Eh=/[\(\{\[]/,Ih=/[\)\}\]]/,Ph={")":"(","}":"{","]":"["};function Ah(t,e){return{type:"url",startIdx:t,state:e,acceptStateReached:!1,matchType:"scheme"}}function Lh(t,e){return{type:"url",startIdx:t,state:e,acceptStateReached:!1,matchType:"tld"}}function Oh(t,e){return{type:"phone",startIdx:t,state:e,acceptStateReached:!1}}var Dh=function(t){void 0===t&&(t={}),this.idx=void 0!==t.idx?t.idx:-1,this.type=t.type||"tag",this.name=t.name||"",this.isOpening=!!t.isOpening,this.isClosing=!!t.isClosing},Mh=function(){function t(e){var i,n;void 0===e&&(e={}),this.version=t.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.tagBuilder=null,this.urls=(null==(n=e.urls)&&(n=!0),_u(n)?{schemeMatches:n,tldMatches:n,ipV4Matches:n}:{schemeMatches:!_u(n.schemeMatches)||n.schemeMatches,tldMatches:!_u(n.tldMatches)||n.tldMatches,ipV4Matches:!_u(n.ipV4Matches)||n.ipV4Matches}),this.email=_u(e.email)?e.email:this.email,this.phone=_u(e.phone)?e.phone:this.phone,this.hashtag=e.hashtag||this.hashtag,this.mention=e.mention||this.mention,this.newWindow=_u(e.newWindow)?e.newWindow:this.newWindow,this.stripPrefix=(null==(i=e.stripPrefix)&&(i=!0),_u(i)?{scheme:i,www:i}:{scheme:!_u(i.scheme)||i.scheme,www:!_u(i.www)||i.www}),this.stripTrailingSlash=_u(e.stripTrailingSlash)?e.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding=_u(e.decodePercentEncoding)?e.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=e.sanitizeHtml||!1;var r=this.mention;if(!1!==r&&-1===vh.indexOf(r))throw new Error("invalid `mention` cfg '".concat(r,"' - see docs"));var s,a=this.hashtag;if(!1!==a&&-1===ph.indexOf(a))throw new Error("invalid `hashtag` cfg '".concat(a,"' - see docs"));this.truncate="number"==typeof(s=e.truncate)?{length:s,location:"end"}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&void 0===t[i]&&(t[i]=e[i]);return t}(s||{},{length:Number.POSITIVE_INFINITY,location:"end"}),this.className=e.className||this.className,this.replaceFn=e.replaceFn||this.replaceFn,this.context=e.context||this}return t.link=function(e,i){return new t(i).link(e)},t.parse=function(e,i){return new t(i).parse(e)},t.prototype.parse=function(t){var e=this,i=["a","style","script"],n=0,r=[];return function(t,e){for(var i,n=e.onOpenTag,r=e.onCloseTag,s=e.onText,a=e.onComment,o=e.onDoctype,l=new Dh,c=0,u=t.length,h=0,d=0,p=l;c<u;){var f=t.charAt(c);switch(h){case 0:m(f);break;case 1:g(f);break;case 2:v(f);break;case 3:y(f);break;case 4:b(f);break;case 5:_(f);break;case 6:w(f);break;case 7:T(f);break;case 8:S(f);break;case 9:x(f);break;case 10:k(f);break;case 11:C(f);break;case 12:E(f);break;case 13:"--"===t.substr(c,2)?(c+=2,p=new Dh(Fu(Fu({},p),{type:"comment"})),h=14):"DOCTYPE"===t.substr(c,7).toUpperCase()?(c+=7,p=new Dh(Fu(Fu({},p),{type:"doctype"})),h=20):R();break;case 14:I(f);break;case 15:P(f);break;case 16:A(f);break;case 17:L(f);break;case 18:O(f);break;case 19:D(f);break;case 20:M(f);break;default:Su(h)}c++}function m(t){"<"===t&&N()}function g(t){"!"===t?h=13:"/"===t?(h=2,p=new Dh(Fu(Fu({},p),{isClosing:!0}))):"<"===t?N():xu.test(t)?(h=3,p=new Dh(Fu(Fu({},p),{isOpening:!0}))):(h=0,p=l)}function y(t){Cu.test(t)?(p=new Dh(Fu(Fu({},p),{name:F()})),h=4):"<"===t?N():"/"===t?(p=new Dh(Fu(Fu({},p),{name:F()})),h=12):">"===t?(p=new Dh(Fu(Fu({},p),{name:F()})),B()):xu.test(t)||ku.test(t)||":"===t||R()}function v(t){">"===t?R():xu.test(t)?h=3:R()}function b(t){Cu.test(t)||("/"===t?h=12:">"===t?B():"<"===t?N():"="===t||Eu.test(t)||Iu.test(t)?R():h=5)}function _(t){Cu.test(t)?h=6:"/"===t?h=12:"="===t?h=7:">"===t?B():"<"===t?N():Eu.test(t)&&R()}function w(t){Cu.test(t)||("/"===t?h=12:"="===t?h=7:">"===t?B():"<"===t?N():Eu.test(t)?R():h=5)}function T(t){Cu.test(t)||('"'===t?h=8:"'"===t?h=9:/[>=`]/.test(t)?R():"<"===t?N():h=10)}function S(t){'"'===t&&(h=11)}function x(t){"'"===t&&(h=11)}function k(t){Cu.test(t)?h=4:">"===t?B():"<"===t&&N()}function C(t){Cu.test(t)?h=4:"/"===t?h=12:">"===t?B():"<"===t?N():(h=4,c--)}function E(t){">"===t?(p=new Dh(Fu(Fu({},p),{isClosing:!0})),B()):h=4}function I(t){"-"===t?h=15:">"===t?R():h=16}function P(t){"-"===t?h=18:">"===t?R():h=16}function A(t){"-"===t&&(h=17)}function L(t){h="-"===t?18:16}function O(t){">"===t?B():"!"===t?h=19:"-"===t||(h=16)}function D(t){"-"===t?h=17:">"===t?B():h=16}function M(t){">"===t?B():"<"===t&&N()}function R(){h=0,p=l}function N(){h=1,p=new Dh({idx:c})}function B(){var e=t.slice(d,p.idx);e&&s(e,d),"comment"===p.type?a(p.idx):"doctype"===p.type?o(p.idx):(p.isOpening&&n(p.name,p.idx),p.isClosing&&r(p.name,p.idx)),R(),d=c+1}function F(){var e=p.idx+(p.isClosing?2:1);return t.slice(e,c).toLowerCase()}d<c&&(i=t.slice(d,c),s(i,d),d=c+1)}(t,{onOpenTag:function(t){i.indexOf(t)>=0&&n++},onText:function(t,i){if(0===n){var s=t.split(/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),a=i;s.forEach((function(t,i){if(i%2==0){var n=e.parseText(t,a);r.push.apply(r,n)}a+=t.length}))}},onCloseTag:function(t){i.indexOf(t)>=0&&(n=Math.max(n-1,0))},onComment:function(t){},onDoctype:function(t){}}),r=this.compactMatches(r),r=this.removeUnwantedMatches(r)},t.prototype.compactMatches=function(t){t.sort((function(t,e){return t.getOffset()-e.getOffset()}));for(var e=0;e<t.length-1;){var i=t[e],n=i.getOffset(),r=i.getMatchedText().length,s=n+r;if(e+1<t.length){if(t[e+1].getOffset()===n){var a=t[e+1].getMatchedText().length>r?e:e+1;t.splice(a,1);continue}if(t[e+1].getOffset()<s){t.splice(e+1,1);continue}}e++}return t},t.prototype.removeUnwantedMatches=function(t){return this.hashtag||Tu(t,(function(t){return"hashtag"===t.getType()})),this.email||Tu(t,(function(t){return"email"===t.getType()})),this.phone||Tu(t,(function(t){return"phone"===t.getType()})),this.mention||Tu(t,(function(t){return"mention"===t.getType()})),this.urls.schemeMatches||Tu(t,(function(t){return"url"===t.getType()&&"scheme"===t.getUrlMatchType()})),this.urls.tldMatches||Tu(t,(function(t){return"url"===t.getType()&&"tld"===t.getUrlMatchType()})),this.urls.ipV4Matches||Tu(t,(function(t){return"url"===t.getType()&&"ipV4"===t.getUrlMatchType()})),t},t.prototype.parseText=function(t,e){void 0===e&&(e=0),e=e||0;for(var i=function(t,e){for(var i=e.tagBuilder,n=e.stripPrefix,r=e.stripTrailingSlash,s=e.decodePercentEncoding,a=e.hashtagServiceName,o=e.mentionServiceName,l=[],c=t.length,u=[],h=0;h<c;h++){var d=t.charAt(h);if(0===u.length)g(d);else for(var p=u.length-1;p>=0;p--){var f=u[p];switch(f.state){case 11:T(f,d);break;case 12:S(f,d);break;case 0:y(f,d);break;case 1:v(f,d);break;case 2:b(f,d);break;case 3:_(f,d);break;case 4:w(f,d);break;case 5:x(f,d);break;case 6:k(f,d);break;case 7:C(f,d);break;case 13:E(f,d);break;case 14:I(f,d);break;case 8:P(f,d);break;case 9:A(f,d);break;case 10:L(f,d);break;case 15:O(f,d);break;case 16:D(f,d);break;case 17:M(f,d);break;case 18:R(f,d);break;case 19:N(f,d);break;case 20:B(f,d);break;case 21:F(f,d);break;case 22:$(f,d);break;case 23:U(f,d);break;case 24:j(f,d);break;case 25:V(f,d);break;case 26:H(f,d);break;case 27:q(f,d);break;case 28:W(f,d);break;case 29:z(f,d);break;case 30:G(f,d);break;case 31:K(f,d);break;case 32:X(f,d);break;case 33:Q(f,d);break;case 34:J(f,d);break;case 35:Z(f,d);break;case 36:tt(f,d);break;case 37:Y(f,d);break;case 38:et(f,d);break;case 39:it(f,d);break;case 40:nt(f,d);break;case 41:rt(f,d);break;default:Su(f.state)}}}for(var m=u.length-1;m>=0;m--)u.forEach((function(t){return st(t)}));return l;function g(t){if("#"===t)u.push({type:"hashtag",startIdx:h,state:28,acceptStateReached:!1});else if("@"===t)u.push({type:"mention",startIdx:h,state:30,acceptStateReached:!1});else if("/"===t)u.push(Lh(h,11));else if("+"===t)u.push(Oh(h,37));else if("("===t)u.push(Oh(h,32));else{if(ku.test(t)&&(u.push(Oh(h,38)),u.push(function(t,e){return{type:"url",startIdx:t,state:13,acceptStateReached:!1,matchType:"ipV4",octetsEncountered:1}}(h))),function(t){return Du.test(t)}(t)){var e="m"===t.toLowerCase()?15:22;u.push(function(t,e){return{type:"email",startIdx:t,state:e,acceptStateReached:!1}}(h,e))}Xu(t)&&u.push(Ah(h,0)),Du.test(t)&&u.push(Lh(h,5))}}function y(t,e){":"===e?t.state=2:"-"===e?t.state=1:Qu(e)||wu(u,t)}function v(t,e){"-"===e||("/"===e?(wu(u,t),u.push(Lh(h,11))):Qu(e)?t.state=0:wu(u,t))}function b(t,e){"/"===e?t.state=3:"."===e?wu(u,t):Ju(e)?(t.state=5,Xu(e)&&u.push(Ah(h,0))):wu(u,t)}function _(t,e){"/"===e?t.state=4:th(e)?(t.state=10,t.acceptStateReached=!0):st(t)}function w(t,e){"/"===e?t.state=10:Ju(e)?(t.state=5,t.acceptStateReached=!0):wu(u,t)}function T(t,e){"/"===e?t.state=12:wu(u,t)}function S(t,e){Ju(e)?t.state=5:wu(u,t)}function x(t,e){"."===e?t.state=7:"-"===e?t.state=6:":"===e?t.state=8:eh(e)?t.state=10:Zu(e)||st(t)}function k(t,e){"-"===e||("."===e?st(t):Ju(e)?t.state=5:st(t))}function C(t,e){"."===e?st(t):Ju(e)?(t.state=5,t.acceptStateReached=!0):st(t)}function E(t,e){"."===e?t.state=14:":"===e?t.state=8:ku.test(e)||(eh(e)?t.state=10:Du.test(e)?wu(u,t):st(t))}function I(t,e){ku.test(e)?(t.octetsEncountered++,4===t.octetsEncountered&&(t.acceptStateReached=!0),t.state=13):st(t)}function P(t,e){ku.test(e)?t.state=9:st(t)}function A(t,e){ku.test(e)||(eh(e)?t.state=10:st(t))}function L(t,e){th(e)||st(t)}function O(t,e){"a"===e.toLowerCase()?t.state=16:$(t,e)}function D(t,e){"i"===e.toLowerCase()?t.state=17:$(t,e)}function M(t,e){"l"===e.toLowerCase()?t.state=18:$(t,e)}function R(t,e){"t"===e.toLowerCase()?t.state=19:$(t,e)}function N(t,e){"o"===e.toLowerCase()?t.state=20:$(t,e)}function B(t,e){":"===e.toLowerCase()?t.state=21:$(t,e)}function F(t,e){uh(e)?t.state=22:wu(u,t)}function $(t,e){"."===e?t.state=23:"@"===e?t.state=24:uh(e)?t.state=22:wu(u,t)}function U(t,e){"."===e||"@"===e?wu(u,t):uh(e)?t.state=22:wu(u,t)}function j(t,e){Ju(e)?t.state=25:wu(u,t)}function V(t,e){"."===e?t.state=27:"-"===e?t.state=26:Zu(e)||st(t)}function H(t,e){"-"===e||"."===e?st(t):Zu(e)?t.state=25:st(t)}function q(t,e){"."===e||"-"===e?st(t):Ju(e)?(t.state=25,t.acceptStateReached=!0):st(t)}function W(t,e){dh(e)?(t.state=29,t.acceptStateReached=!0):wu(u,t)}function z(t,e){dh(e)||st(t)}function G(t,e){yh(e)?(t.state=31,t.acceptStateReached=!0):wu(u,t)}function K(t,e){yh(e)||(Du.test(e)?wu(u,t):st(t))}function Y(t,e){ku.test(e)?t.state=38:(wu(u,t),g(e))}function X(t,e){ku.test(e)?t.state=33:wu(u,t),g(e)}function Q(t,e){ku.test(e)?t.state=34:wu(u,t)}function J(t,e){ku.test(e)?t.state=35:wu(u,t)}function Z(t,e){")"===e?t.state=36:wu(u,t)}function tt(t,e){ku.test(e)?t.state=38:xh(e)?t.state=39:wu(u,t)}function et(t,e){t.acceptStateReached=!0,kh(e)?t.state=40:"#"===e?t.state=41:ku.test(e)||("("===e?t.state=32:xh(e)?t.state=39:(st(t),Xu(e)&&u.push(Ah(h,0))))}function it(t,e){ku.test(e)?t.state=38:"("===e?t.state=32:(st(t),g(e))}function nt(t,e){kh(e)||("#"===e?t.state=41:ku.test(e)?t.state=38:st(t))}function rt(t,e){kh(e)?t.state=40:ku.test(e)?wu(u,t):st(t)}function st(e){if(wu(u,e),e.acceptStateReached){var c,d,p,f=e.startIdx,m=t.slice(e.startIdx,h);if(m=function(t){for(var e={"(":0,"{":0,"[":0},i=0;i<t.length;i++){var n=t.charAt(i);Eh.test(n)?e[n]++:Ih.test(n)&&e[Ph[n]]--}for(var r,s=t.length-1;s>=0;)if(r=t.charAt(s),Ih.test(r)){var a=Ph[r];if(!(e[a]<0))break;e[a]++,s--}else{if(!zu.test(r))break;s--}return t.slice(0,s+1)}(m),"url"===e.type){if("@"===t.charAt(e.startIdx-1))return;var g=e.matchType;if("scheme"===g){var y=qu.exec(m);if(y&&(f+=y.index,m=m.slice(y.index)),!function(t){if(Gu.test(t))return!1;var e=t.match(Ku);if(!e)return!1;var i=!!e[1],n=e[2];return!!i||!(-1===n.indexOf(".")||!xu.test(n))}(m))return}else if("tld"===g){if(!function(t){var e=t.match(Yu);if(!e)return!1;var i=e[0].split(".");return!(i.length<2||!ih(i[i.length-1]))}(m))return}else if("ipV4"===g){if(p=m.split(rh,1)[0],!nh.test(p))return}else Su(g);l.push(new oh({tagBuilder:i,matchedText:m,offset:f,urlMatchType:g,url:m,protocolRelativeMatch:"//"===m.slice(0,2),stripPrefix:n,stripTrailingSlash:r,decodePercentEncoding:s}))}else if("email"===e.type)ih(m.split(".").pop()||"")&&l.push(new hh({tagBuilder:i,matchedText:m,offset:f,email:m.replace(lh,"")}));else if("hashtag"===e.type)m.length<=140&&l.push(new fh({tagBuilder:i,matchedText:m,offset:f,serviceName:a,hashtag:m.slice(1)}));else if("mention"===e.type)d=m,mh[o].test(d)&&l.push(new bh({tagBuilder:i,matchedText:m,offset:f,serviceName:o,mention:m.slice(1)}));else if("phone"===e.type){if(("+"===(c=m=m.replace(/ +$/g,"")).charAt(0)||wh.test(c))&&Sh.test(c)){var v=m.replace(/[^0-9,;#]/g,"");l.push(new Ch({tagBuilder:i,matchedText:m,offset:f,number:v,plusSign:"+"===m.charAt(0)}))}}else Su(e)}}}(t,{tagBuilder:this.getTagBuilder(),stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding,hashtagServiceName:this.hashtag,mentionServiceName:this.mention||"twitter"}),n=0,r=i.length;n<r;n++)i[n].setOffset(e+i[n].getOffset());return i},t.prototype.link=function(t){if(!t)return"";this.sanitizeHtml&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var e=this.parse(t),i=[],n=0,r=0,s=e.length;r<s;r++){var a=e[r];i.push(t.substring(n,a.getOffset())),i.push(this.createMatchReturnVal(a)),n=a.getOffset()+a.getMatchedText().length}return i.push(t.substring(n)),i.join("")},t.prototype.createMatchReturnVal=function(t){var e;return this.replaceFn&&(e=this.replaceFn.call(this.context,t)),"string"==typeof e?e:!1===e?t.getMatchedText():e instanceof Mu?e.toAnchorString():t.buildTag().toAnchorString()},t.prototype.getTagBuilder=function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new Ru({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t},t.version="4.0.0",t}();const Rh=Mh;function Nh(){return bu.getters.getCurrentInvidiousInstance}function Bh({resource:t,id:e="",params:i={},doLogError:n=!0,subResource:r=""}){return new Promise(((s,a)=>{const o=Nh()+"/api/v1/"+t+"/"+e+(UR(r)?"":`/${r}`)+"?"+new URLSearchParams(i).toString();fetch(o).then((t=>t.json())).then((t=>{if(void 0!==t.error)throw new Error(t.error);s(t)})).catch((t=>{n&&console.error("Invidious API error",o,t),a(t)}))}))}async function Fh(t){return await Bh({resource:"channels",id:t})}async function $h(t){return await Bh({resource:"playlists",id:t})}function Uh(t,e=null){if(null==t)return null;null===e&&(e=Nh()),t.startsWith("//")&&(t="https:"+t);const i=`${e}/ggpht`;return t.replace("https://yt3.ggpht.com",i).replace("https://yt3.googleusercontent.com",i).replace(/https:\/\/i\d*\.ytimg\.com/,i)}function jh(t){return t.comments.map((t=>(t.showReplies=!1,t.authorLink=t.authorId,t.authorThumb=Uh(t.authorThumbnails[1].url),t.likes=t.likeCount,t.text=Rh.link(t.content.replaceAll(/(<(?!br|\/?[bis]>)([^>]+)>)/gi,"")),t.dataType="invidious",t.isOwner=t.authorIsChannelOwner,t.numReplies=t.replies?.replyCount??0,t.replyToken=t.replies?.continuation??"",t.isHearted=void 0!==t.creatorHeart,t.isMember=t.isSponsor,t.memberIconUrl=Uh(t.sponsorIconUrl),t.replies=[],t.time=xR({publishText:t.publishedText}),t)))}function Vh(t){return t?"image"===t.type?{type:t.type,content:t.imageThumbnails.map((t=>(t.url=Uh(t.url),t)))}:"video"===t.type?(t.videoThumbnails=t.videoThumbnails.map((t=>(t.url=Uh(t.url),t))),{type:t.type,content:t}):"multiImage"===t.type?{type:"multiImage",content:t.images.map((t=>t.map((t=>(t.url=Uh(t.url),t)))))}:"poll"===t.type?{type:"poll",totalVotes:t.totalVotes??0,content:t.choices.map((t=>({text:t.text,image:t.image.map((t=>(t.url=Uh(t.url),t)))})))}:void console.error("New Invidious Community Post Type: "+t.type):null}const Hh=Ks({name:"FtListChannel",props:{data:{type:Object,required:!0},appearance:{type:String,required:!0}},data:function(){return{id:"",thumbnail:"",channelName:"",subscriberCount:0,videoCount:"",handle:null,uploadedTime:"",description:""}},computed:{currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},listType:function(){return this.$store.getters.getListType},hideChannelSubscriptions:function(){return this.$store.getters.getHideChannelSubscriptions}},mounted:function(){"local"===this.data.dataSource?this.parseLocalData():this.parseInvidiousData()},methods:{parseLocalData:function(){this.thumbnail=this.data.thumbnail,this.thumbnail.includes("https:")||(this.thumbnail=`https:${this.thumbnail}`),this.channelName=this.data.name,this.id=this.data.id,this.hideChannelSubscriptions||null===this.data.subscribers?this.subscriberCount=null:this.subscriberCount=this.data.subscribers.replace(/ subscriber(s)?/,""),null===this.data.videos?this.videoCount=0:this.videoCount=$R(this.data.videos),this.data.handle&&(this.handle=this.data.handle),this.description=this.data.descriptionShort},parseInvidiousData:function(){const t=this.data.authorThumbnails[2].url;this.thumbnail=Uh(t,this.currentInvidiousInstance),this.channelName=this.data.author,this.id=this.data.authorId,this.hideChannelSubscriptions?this.subscriberCount=null:this.subscriberCount=$R(this.data.subCount),this.videoCount=$R(this.data.videoCount),this.description=this.data.description}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-list-channel ft-list-item",class:{list:"list"===t.listType,grid:"grid"===t.listType,[t.appearance]:!0}},[e("div",{staticClass:"channelThumbnail"},[e("router-link",{attrs:{to:`/channel/${t.id}`}},[e("img",{staticClass:"channelImage",attrs:{src:t.thumbnail}})])],1),e("div",{staticClass:"info"},[e("router-link",{staticClass:"title",attrs:{to:`/channel/${t.id}`}},[t._v(" "+t._s(t.channelName)+" ")]),e("div",{staticClass:"infoLine"},[null!==t.subscriberCount?e("span",{staticClass:"subscriberCount"},[t._v(" "+t._s(t.subscriberCount)+" subscribers - ")]):t._e(),null!==t.handle?e("router-link",{staticClass:"handle",attrs:{to:`/channel/${t.id}`}},[t._v(" "+t._s(t.handle)+" ")]):e("span",{staticClass:"videoCount"},[t._v(" "+t._s(t.videoCount)+" videos ")])],1),"grid"!==t.listType?e("p",{staticClass:"description"},[t._v(" "+t._s(t.description)+" ")]):t._e()],1)])}),[],!1,null,"620e298f",null).exports,qh=Ks({name:"FtListPlaylist",components:{"ft-icon-button":ha},props:{data:{type:Object,required:!0},appearance:{type:String,required:!0}},data:function(){return{playlistId:"",channelId:"",title:"Pop Music Playlist - Timeless Pop Songs (Updated Weekly 2020)",thumbnail:"https://i.ytimg.com/vi/JGwWNGJdvx8/mqdefault.jpg",channelName:"#RedMusic: Just Hits",videoCount:200,description:""}},computed:{currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},listType:function(){return this.$store.getters.getListType},externalPlayer:function(){return this.$store.getters.getExternalPlayer},defaultPlayback:function(){return this.$store.getters.getDefaultPlayback}},mounted:function(){"local"===this.data.dataSource?this.parseLocalData():this.parseInvidiousData()},methods:{handleExternalPlayer:function(){this.openInExternalPlayer({watchProgress:0,playbackRate:this.defaultPlayback,videoId:null,playlistId:this.playlistId,playlistIndex:null,playlistReverse:null,playlistShuffle:null,playlistLoop:null})},parseInvidiousData:function(){this.title=this.data.title,this.thumbnail=this.data.playlistThumbnail.replace("https://i.ytimg.com",this.currentInvidiousInstance).replace("hqdefault","mqdefault"),this.channelName=this.data.author,this.channelId=this.data.authorId,this.playlistId=this.data.playlistId,this.videoCount=this.data.videoCount,!1===this.data.proxyThumbnail&&(this.thumbnail=this.data.playlistThumbnail)},parseLocalData:function(){this.title=this.data.title,this.thumbnail=this.data.thumbnail,this.channelName=this.data.channelName,this.channelId=this.data.channelId,this.playlistId=this.data.playlistId,this.videoCount=this.data.videoCount},...Is(["openInExternalPlayer"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-list-video ft-list-item",class:{list:"list"===t.listType,grid:"grid"===t.listType},attrs:{appearance:t.appearance}},[e("div",{staticClass:"videoThumbnail"},[e("router-link",{staticClass:"thumbnailLink",attrs:{to:`/playlist/${t.playlistId}`}},[e("img",{staticClass:"thumbnailImage",attrs:{alt:"",src:t.thumbnail}})]),e("div",{staticClass:"videoCountContainer"},[e("div",{staticClass:"background"}),e("div",{staticClass:"inner"},[e("div",[t._v(t._s(t.videoCount))]),e("div",[e("font-awesome-icon",{attrs:{icon:["fas","list"]}})],1)])])],1),e("div",{staticClass:"info"},[e("router-link",{staticClass:"title",attrs:{to:`/playlist/${t.playlistId}`}},[t._v(" "+t._s(t.title)+" ")]),e("div",{staticClass:"infoLine"},[t.channelId?e("router-link",{staticClass:"channelName",attrs:{to:`/channel/${t.channelId}`}},[t._v(" "+t._s(t.channelName)+" ")]):e("span",{staticClass:"channelName"},[t._v(" "+t._s(t.channelName)+" ")])],1),""!==t.externalPlayer?e("ft-icon-button",{staticClass:"externalPlayerButton",attrs:{title:t.$t("Video.External Player.OpenInTemplate",{externalPlayer:t.externalPlayer}),icon:["fas","external-link-alt"],theme:"base-no-default",size:16,"use-shadow":!1},on:{click:t.handleExternalPlayer}}):t._e()],1)])}),[],!1,null,"88a8429e",null).exports;var Wh=i(26046),zh=Ks({name:"FtCommunityPost",components:{"ft-list-playlist":qh,"ft-list-video":gc,"tiny-slider":i.n(Wh)()},props:{data:{type:Object,required:!0},playlistId:{type:String,default:null},forceListType:{type:String,default:null},appearance:{type:String,required:!0}},data:function(){return{postText:"",postId:"",authorThumbnails:null,publishedText:"",voteCount:"",postContent:"",commentCount:"",isLoading:!0,author:""}},computed:{tinySliderOptions:function(){return{items:1,arrowKeys:!1,controls:!1,autoplay:!1,slideBy:"page",navPosition:"bottom"}},listType:function(){return this.$store.getters.getListType}},mounted:function(){this.parseVideoData()},methods:{parseVideoData:function(){if("backstagePostThreadRenderer"in this.data){this.postText="Shared post",this.type="text";let t=["","https://yt3.ggpht.com/ytc/AAUvwnjm-0qglHJkAHqLFsCQQO97G7cCNDuDLldsrn25Lg=s88-c-k-c0x00ffffff-no-rj"];return t=t.map((t=>(t.url=Uh(t.url),t))),void(this.authorThumbnails=t)}this.postText=Rh.link(this.data.postText);let t=this.data.authorThumbnails;t=t.map((t=>(t.url=Uh(t.url),t))),this.authorThumbnails=t,this.postContent=this.data.postContent,this.postId=this.data.postId,this.publishedText=xR({publishText:this.data.publishedText,isLive:this.isLive,isUpcoming:this.isUpcoming,isRSS:this.data.isRSS}),this.voteCount=this.data.voteCount,this.commentCount=this.data.commentCount,this.type=null!==this.data.postContent&&void 0!==this.data.postContent?this.data.postContent.type:"text",this.author=this.data.author,this.isLoading=!1},getBestQualityImage(t){const e=Array.from(t);return e.sort(((t,e)=>Number.parseInt(e.width)-Number.parseInt(t.width))),e.at(0)?.url??""}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,t.isLoading?t._e():e("div",{staticClass:"ft-list-post ft-list-item outside",class:{list:"list"===t.listType,grid:"grid"===t.listType},attrs:{appearance:t.appearance}},[e("div",{staticClass:"author-div"},[t.authorThumbnails.length>0?e("img",{staticClass:"communityThumbnail",attrs:{src:t.getBestQualityImage(t.authorThumbnails),alt:""}}):t._e(),e("p",{staticClass:"authorName"},[t._v(" "+t._s(t.author)+" ")]),e("p",{staticClass:"publishedText"},[t._v(" "+t._s(t.publishedText)+" ")])]),e("p",{domProps:{innerHTML:t._s(t.postText)}}),"multiImage"===t.type&&t.postContent.content.length>0?e("tiny-slider",t._b({staticClass:"slider"},"tiny-slider",t.tinySliderOptions,!1),t._l(t.postContent.content,(function(i,n){return e("img",{key:n,staticClass:"communityImage tns-lazy-img",attrs:{src:t.getBestQualityImage(i),alt:""}})})),0):t._e(),"image"===t.type&&t.postContent.content.length>0?e("div",[e("img",{staticClass:"communityImage",attrs:{src:t.getBestQualityImage(t.postContent.content),alt:""}})]):t._e(),"video"===t.type?e("div",[e("ft-list-video",{attrs:{data:t.data.postContent.content,appearance:""}})],1):t._e(),"poll"===t.type?e("div",[e("div",{staticClass:"poll-count"},[t._v(" "+t._s(t.postContent.totalVotes)+" ")]),t._l(t.postContent.content,(function(i,n){return e("div",{key:n},[e("div",{staticClass:"poll-option"},[e("span",{staticClass:"circle"}),e("div",{staticClass:"poll-text"},[t._v(" "+t._s(i.text)+" ")])])])}))],2):t._e(),"playlist"===t.type?e("div",{staticClass:"playlistWrapper"},[e("ft-list-playlist",{attrs:{data:t.postContent.content,appearance:t.appearance}})],1):t._e(),e("div",{staticClass:"bottomSection"},[e("span",{staticClass:"likeCount"},[e("font-awesome-icon",{staticClass:"thumbs-up-icon",attrs:{icon:["fas","thumbs-up"]}}),t._v(" "+t._s(t.voteCount))],1),e("span",{staticClass:"dislikeCount"},[e("font-awesome-icon",{staticClass:"thumbs-down-icon",attrs:{icon:["fas","thumbs-down"],flip:"horizontal"}})],1),e("span",{staticClass:"commentCount"},[e("font-awesome-icon",{staticClass:"comment-count-icon",attrs:{icon:["fas","comment"]}}),t._v(" "+t._s(t.commentCount))],1)])],1)}),[],!1,null,null,null),Gh=Ks({name:"FtListLazyWrapper",components:{"ft-list-video":gc,"ft-list-channel":Hh,"ft-list-playlist":qh,"ft-community-post":zh.exports},props:{data:{type:Object,required:!0},appearance:{type:String,required:!0},firstScreen:{type:Boolean,required:!0},layout:{type:String,default:"grid"},showVideoWithLastViewedPlaylist:{type:Boolean,default:!1}},data:function(){return{visible:this.firstScreen}},computed:{hideLiveStreams:function(){return this.$store.getters.getHideLiveStreams},channelsHidden:function(){return JSON.parse(this.$store.getters.getChannelsHidden)},hideUpcomingPremieres:function(){return this.$store.getters.getHideUpcomingPremieres}},methods:{onVisibilityChanged:function(t){this.visible=t},showResult:function(){const{data:t}=this;if(!t.type)return!1;if("video"===t.type){if(this.hideLiveStreams&&(t.liveNow||null==t.lengthSeconds))return!1;if(this.hideUpcomingPremieres&&("PREMIERE"===t.durationText||t.isRSS&&"0"===t.viewCount))return!1;if(this.channelsHidden.includes(t.authorId)||this.channelsHidden.includes(t.author))return!1}else if("channel"===t.type){if(this.channelsHidden.includes(t.channelID)||this.channelsHidden.includes(t.name))return!1}else if("playlist"===t.type&&(this.channelsHidden.includes(t.authorId)||this.channelsHidden.includes(t.author)))return!1;return!0}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,t.showResult?e("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:!t.firstScreen&&{callback:t.onVisibilityChanged,once:!0},expression:"firstScreen ? false : {\n    callback: onVisibilityChanged,\n    once: true,\n  }"}],class:{grid:"grid"===t.layout,list:"list"===t.layout}},["channel"===t.data.type&&t.visible?e("ft-list-channel",{attrs:{appearance:t.appearance,data:t.data}}):"video"!==t.data.type&&"shortVideo"!==t.data.type||!t.visible?"playlist"===t.data.type&&t.visible?e("ft-list-playlist",{attrs:{appearance:t.appearance,data:t.data}}):"community"===t.data.type&&t.visible?e("ft-community-post",{attrs:{appearance:t.appearance,data:t.data}}):t._e():e("ft-list-video",{attrs:{appearance:t.appearance,data:t.data,"show-video-with-last-viewed-playlist":t.showVideoWithLastViewedPlaylist}})],1):t._e()}),[],!1,null,"ab5e177c",null),Kh=Ks({name:"FtElementList",components:{"ft-auto-grid":fc,"ft-list-lazy-wrapper":Gh.exports},props:{data:{type:Array,required:!0},display:{type:String,required:!1,default:""},showVideoWithLastViewedPlaylist:{type:Boolean,default:!1}},data:function(){return{displayValue:this.display}},computed:{listType:function(){return this.$store.getters.getListType}},mounted:function(){""===this.display&&(this.displayValue=this.listType)}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-auto-grid",{attrs:{grid:"list"!==t.displayValue}},t._l(t.data,(function(i,n){return e("ft-list-lazy-wrapper",{key:n,attrs:{appearance:"result",data:i,"first-screen":n<16,layout:t.displayValue,"show-video-with-last-viewed-playlist":t.showVideoWithLastViewedPlaylist}})})),1)}),[],!1,null,"51ed1764",null);const Yh=Kh.exports,Xh=Ks({name:"FtChannelBubble",props:{channelName:{type:String,required:!0},channelThumbnail:{type:String,required:!0},showSelected:{type:Boolean,default:!1}},data:function(){return{selected:!1}},computed:{sanitizedId:function(){return"channelBubble"+sa(this.channelName)}},methods:{handleClick:function(t){if(t instanceof KeyboardEvent){if("link"===t.target.getAttribute("role")&&"Enter"!==t.key)return;t.preventDefault()}this.showSelected&&(this.selected=!this.selected),this.$emit("click")}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"bubblePadding",attrs:{tabindex:"0","aria-labelledby":t.sanitizedId},on:{click:t.handleClick,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleClick(e))}}},[e("img",{staticClass:"bubble",attrs:{src:t.channelThumbnail,alt:""}}),t.selected?e("div",{staticClass:"bubble selected"},[e("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","check"]}})],1):t._e(),e("div",{staticClass:"channelName",attrs:{id:t.sanitizedId}},[t._v(" "+t._s(t.channelName)+" ")])])}),[],!1,null,"9b1271e2",null).exports;var Qh,Jh,Zh,td,ed,id,nd,rd=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},sd=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i};const ad=Symbol("ObservedArray.isObserved");class od{constructor(){Qh.add(this),this.type=this.constructor.type}is(...t){return t.some((t=>rd(this,Qh,"m",Jh).call(this,t)))}as(...t){if(!this.is(...t))throw new _d(`Cannot cast ${this.type} to one of ${t.map((t=>t.type)).join(", ")}`);return this}hasKey(t){return Reflect.has(this,t)}key(t){if(!this.hasKey(t))throw new _d(`Missing key ${t}`);return new ld(this[t])}}Qh=new WeakSet,Jh=function(t){return this.type===t.type},od.type="YTNode";class ld{constructor(t){Zh.add(this),td.set(this,void 0),sd(this,td,t,"f")}get typeof(){return typeof rd(this,td,"f")}string(){return rd(this,Zh,"m",id).call(this,"string")}isString(){return rd(this,Zh,"m",ed).call(this,"string")}number(){return rd(this,Zh,"m",id).call(this,"number")}isNumber(){return rd(this,Zh,"m",ed).call(this,"number")}bigint(){return rd(this,Zh,"m",id).call(this,"bigint")}isBigint(){return rd(this,Zh,"m",ed).call(this,"bigint")}boolean(){return rd(this,Zh,"m",id).call(this,"boolean")}isBoolean(){return rd(this,Zh,"m",ed).call(this,"boolean")}symbol(){return rd(this,Zh,"m",id).call(this,"symbol")}isSymbol(){return rd(this,Zh,"m",ed).call(this,"symbol")}undefined(){return rd(this,Zh,"m",id).call(this,"undefined")}isUndefined(){return rd(this,Zh,"m",ed).call(this,"undefined")}null(){if(null!==rd(this,td,"f"))throw new TypeError("Expected null, got "+typeof rd(this,td,"f"));return rd(this,td,"f")}isNull(){return null===rd(this,td,"f")}object(){return rd(this,Zh,"m",id).call(this,"object")}isObject(){return rd(this,Zh,"m",ed).call(this,"object")}function(){return rd(this,Zh,"m",id).call(this,"function")}isFunction(){return rd(this,Zh,"m",ed).call(this,"function")}array(){if(!Array.isArray(rd(this,td,"f")))throw new TypeError("Expected array, got "+typeof rd(this,td,"f"));return rd(this,td,"f")}arrayOfMaybe(){const t=[];return new Proxy(this.array(),{get:(e,i)=>Reflect.has(t,i)?Reflect.get(e,i):new ld(Reflect.get(e,i))})}isArray(){return Array.isArray(rd(this,td,"f"))}node(){if(!(rd(this,td,"f")instanceof od))throw new TypeError(`Expected YTNode, got ${rd(this,td,"f").constructor.name}`);return rd(this,td,"f")}isNode(){return rd(this,td,"f")instanceof od}nodeOfType(...t){return this.node().as(...t)}isNodeOfType(...t){return this.isNode()&&this.node().is(...t)}observed(){if(!this.isObserved())throw new TypeError("Expected ObservedArray, got "+typeof rd(this,td,"f"));return rd(this,td,"f")}isObserved(){var t;return null===(t=rd(this,td,"f"))||void 0===t?void 0:t[ad]}parsed(){if(!(rd(this,td,"f")instanceof cd))throw new TypeError("Expected SuperParsedResult, got "+typeof rd(this,td,"f"));return rd(this,td,"f")}isParsed(){return rd(this,td,"f")instanceof cd}any(){return console.warn("This call is not meant to be used outside of debugging. Please use the specific type getter instead."),rd(this,td,"f")}instanceof(t){if(!this.isInstanceof(t))throw new TypeError(`Expected instance of ${t.name}, got ${rd(this,td,"f").constructor.name}`);return rd(this,td,"f")}isInstanceof(t){return rd(this,td,"f")instanceof t}}td=new WeakMap,Zh=new WeakSet,ed=function(t){return typeof rd(this,td,"f")===t},id=function(t){if(!rd(this,Zh,"m",ed).call(this,t))throw new TypeError(`Expected ${t}, got ${this.typeof}`);return rd(this,td,"f")};class cd{constructor(t){nd.set(this,void 0),sd(this,nd,t,"f")}get is_null(){return null===rd(this,nd,"f")}get is_array(){return!this.is_null&&Array.isArray(rd(this,nd,"f"))}get is_node(){return!this.is_array}array(){if(!this.is_array)throw new TypeError("Expected an array, got a node");return rd(this,nd,"f")}item(){if(!this.is_node)throw new TypeError("Expected a node, got an array");return rd(this,nd,"f")}}function ud(t){return new Proxy(t,{get:(t,e)=>"get"==e?(e,i)=>t.find(((n,r)=>{const s=Cd(e,n);return s&&i&&t.splice(r,1),s})):e==ad||("getAll"==e?(e,i)=>t.filter(((n,r)=>{const s=Cd(e,n);return s&&i&&t.splice(r,1),s})):"matchCondition"==e?e=>t.find((t=>e(t))):"filterType"==e?(...e)=>ud(t.filter((t=>!!t.is(...e)))):"firstOfType"==e?(...e)=>t.find((t=>!!t.is(...e))):"first"==e?()=>t[0]:"as"==e?(...e)=>ud(t.map((t=>{if(t.is(...e))return t;throw new _d(`Expected node of any type ${e.map((t=>t.type)).join(", ")}, got ${t.type}`)}))):"remove"==e?e=>t.splice(e,1):Reflect.get(t,e))})}nd=new WeakMap;class hd extends Map{getType(t){return Array.isArray(t)?ud(t.flatMap((t=>this.get(t.type)||[]))):ud(this.get(t.type)||[])}}const dd={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Safari/605.1.15","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36"],mobile:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; SM-G990U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/108.1  Mobile/15E148 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15G77 ChannelId(73) NebulaSDK/1.8.100112 Nebula PSDType(1) AlipayDefined(nt:4G,ws:320|504|2.0) AliApp(AP/10.1.30.300) AlipayClient/10.1.30.300 Alipay Language/zh-Hans","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 13; SM-N981U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-A515F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; M2010J19SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 11; M2102J20SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1"]};var pd,fd,md=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},gd=function(t){return this instanceof gd?(this.v=t,this):new gd(t)},yd=function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(t,e||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){r[t]&&(n[t]=function(e){return new Promise((function(i,n){s.push([t,e,i,n])>1||o(t,e)}))})}function o(t,e){try{(i=r[t](e)).value instanceof gd?Promise.resolve(i.value.v).then(l,c):u(s[0][2],i)}catch(t){u(s[0][3],t)}var i}function l(t){o("next",t)}function c(t){o("throw",t)}function u(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}};class vd{static load(t){!function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(vd,pd,t,"f",fd)}static get shim(){if(!md(vd,pd,"f",fd))throw new Error("Platform is not loaded");return md(vd,pd,"f",fd)}}pd=vd,fd={value:void 0};class bd extends Error{constructor(t,e){super(t),e&&(this.info=e),this.date=new Date,this.version=vd.shim.info.version}}class _d extends bd{}class wd extends bd{}class Td extends bd{}class Sd extends Error{}class xd extends Error{}class kd extends Error{}function Cd(t,e){return Reflect.ownKeys(t).some((i=>{var n;const r="Text"===(null===(n=e[i])||void 0===n?void 0:n.constructor.name);return r||"object"!=typeof e[i]?t[i]===(r?e[i].toString():e[i]):JSON.stringify(t[i])===JSON.stringify(e[i])}))}function Ed(t,e,i){const n=new RegExp(`${Id(e)}(.*?)${Id(i)}`,"s"),r=t.match(n);return r?r[1]:void 0}function Id(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Pd(t){const e=dd[t];return e[Math.floor(Math.random()*e.length)]}function Ad(t){const e=[],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let n=0;n<t;n++)e.push(i.charAt(Math.floor(Math.random()*i.length)));return e.join("")}function Ld(t){const e=t.split(":").map((t=>parseInt(t)));switch(e.length){case 1:return e[0];case 2:return 60*e[0]+e[1];case 3:return 3600*e[0]+60*e[1]+e[2];default:throw new Error("Invalid time string")}}function Od(t){for(const[e,i]of Object.entries(t))if(!i)throw new wd(`${e} is missing`)}function Dd(t){return btoa(String.fromCharCode.apply(null,Array.from(t)))}const Md=JSON.parse('{"i8":"3.3.0","eN":{"H":"https://github.com/LuanRT/YouTube.js/issues"},"Xh":"https://github.com/LuanRT/YouTube.js#readme"}');var Rd=i(67432);const Nd=Object.freeze({YT_BASE:"https://www.youtube.com",YT_MUSIC_BASE:"https://music.youtube.com",YT_SUGGESTIONS:"https://suggestqueries.google.com/complete/",YT_UPLOAD:"https://upload.youtube.com/",API:Object.freeze({BASE:"https://youtubei.googleapis.com",PRODUCTION_1:"https://www.youtube.com/youtubei/",PRODUCTION_2:"https://youtubei.googleapis.com/youtubei/",STAGING:"https://green-youtubei.sandbox.googleapis.com/youtubei/",RELEASE:"https://release-youtubei.sandbox.googleapis.com/youtubei/",TEST:"https://test-youtubei.sandbox.googleapis.com/youtubei/",CAMI:"http://cami-youtubei.sandbox.googleapis.com/youtubei/",UYTFE:"https://uytfe.sandbox.google.com/youtubei/"})}),Bd=Object.freeze({SCOPE:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",GRANT_TYPE:"http://oauth.net/grant_type/device/1.0",MODEL_NAME:"ytlr::",HEADERS:Object.freeze({accept:"*/*",origin:"https://www.youtube.com","user-agent":"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version","content-type":"application/json",referer:"https://www.youtube.com/tv","accept-language":"en-US"}),REGEX:Object.freeze({AUTH_SCRIPT:/<script id="base-js" src="(.*?)" nonce=".*?"><\/script>/,CLIENT_IDENTITY:/.+?={};var .+?={clientId:"(?<client_id>.+?)",.+?:"(?<client_secret>.+?)"},/})}),Fd=Object.freeze({WEB:{NAME:"WEB",VERSION:"2.20230104.01.00",API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",API_VERSION:"v1",STATIC_VISITOR_ID:"6zpwvWUNAco"},WEB_KIDS:{NAME:"WEB_KIDS",VERSION:"2.20230111.00.00"},YTMUSIC:{NAME:"WEB_REMIX",VERSION:"1.20211213.00.00"},ANDROID:{NAME:"ANDROID",VERSION:"18.06.35",SDK_VERSION:"29",USER_AGENT:"com.google.android.youtube/18.06.35 (Linux; U; Android 10; US)"},YTSTUDIO_ANDROID:{NAME:"ANDROID_CREATOR",VERSION:"22.43.101"},YTMUSIC_ANDROID:{NAME:"ANDROID_MUSIC",VERSION:"5.34.51"},TV_EMBEDDED:{NAME:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",VERSION:"2.0"}}),$d=Object.freeze({accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"}),Ud=Object.freeze({accept:"*/*","accept-encoding":"gzip, deflate","content-type":"application/json"}),jd={URLS:Nd,OAUTH:Bd,CLIENTS:Fd,STREAM_HEADERS:$d,INNERTUBE_HEADERS_BASE:Ud};var Vd,Hd,qd=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};if(!Reflect.has(globalThis,"CustomEvent")){class t extends Event{constructor(t,e){var i;super(t,e),Vd.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,Vd,null!==(i=null==e?void 0:e.detail)&&void 0!==i?i:null,"f")}get detail(){return qd(this,Vd,"f")}}Vd=new WeakMap,Reflect.set(globalThis,"CustomEvent",t)}class Wd extends EventTarget{constructor(){super(),Hd.set(this,new Map)}emit(t,...e){const i=new CustomEvent(t,{detail:e});this.dispatchEvent(i)}on(t,e){const i=t=>{t instanceof CustomEvent?e(...t.detail):e(t)};qd(this,Hd,"f").set(e,i),this.addEventListener(t,i)}once(t,e){const i=i=>{i instanceof CustomEvent?e(...i.detail):e(i),this.off(t,e)};qd(this,Hd,"f").set(e,i),this.addEventListener(t,i)}off(t,e){const i=qd(this,Hd,"f").get(e);i&&(this.removeEventListener(t,i),qd(this,Hd,"f").delete(e))}}Hd=new WeakMap;class zd extends od{constructor(t){var e,i,n;super(),this.label=new sp(t.label).toString(),this.selected=!!t.isSelected,t.int32Value?this.value=t.int32Value:t.stringValue&&(this.value=t.stringValue),(null===(e=t.onSelectCommand)||void 0===e?void 0:e.browseEndpoint)&&(this.endpoint=new Zd(t.onSelectCommand)),(null===(i=t.icon)||void 0===i?void 0:i.iconType)&&(this.icon_type=null===(n=t.icon)||void 0===n?void 0:n.iconType),t.descriptionText&&(this.description=new sp(t.descriptionText).toString())}}zd.type="DropdownItem";const Gd=zd;class Kd extends od{constructor(t){super(),this.label=t.label||"",this.entries=SL.parseArray(t.entries,Gd)}}Kd.type="Dropdown";const Yd=Kd;class Xd extends od{constructor(t){var e;super(),this.title=new sp(t.dialogTitle).toString(),this.title_placeholder=t.titlePlaceholder||"",this.privacy_option=(null===(e=SL.parseItem(t.privacyOption,Yd))||void 0===e?void 0:e.entries)||null,this.create_button=SL.parseItem(t.cancelButton),this.cancel_button=SL.parseItem(t.cancelButton)}}Xd.type="CreatePlaylistDialog";const Qd=Xd;class Jd extends od{constructor(t){var e,i,n,r,s,a,o,l;super(),Reflect.has(t||{},"innertubeCommand")&&(t=t.innertubeCommand);const c=Object.keys(t||{}).find((t=>t.endsWith("Endpoint")||t.endsWith("Command")));this.payload=c?Reflect.get(t,c):{},Reflect.has(this.payload,"dialog")&&(this.dialog=SL.parse(this.payload.dialog)),(null==t?void 0:t.serviceEndpoint)&&(t=t.serviceEndpoint),this.metadata={},(null===(i=null===(e=null==t?void 0:t.commandMetadata)||void 0===e?void 0:e.webCommandMetadata)||void 0===i?void 0:i.url)&&(this.metadata.url=t.commandMetadata.webCommandMetadata.url),(null===(r=null===(n=null==t?void 0:t.commandMetadata)||void 0===n?void 0:n.webCommandMetadata)||void 0===r?void 0:r.webPageType)&&(this.metadata.page_type=t.commandMetadata.webCommandMetadata.webPageType),(null===(a=null===(s=null==t?void 0:t.commandMetadata)||void 0===s?void 0:s.webCommandMetadata)||void 0===a?void 0:a.apiUrl)?this.metadata.api_url=t.commandMetadata.webCommandMetadata.apiUrl.replace("/youtubei/v1/",""):c&&(this.metadata.api_url=this.getEndpoint(c)),(null===(l=null===(o=null==t?void 0:t.commandMetadata)||void 0===o?void 0:o.webCommandMetadata)||void 0===l?void 0:l.sendPost)&&(this.metadata.send_post=t.commandMetadata.webCommandMetadata.sendPost),(null==t?void 0:t.createPlaylistEndpoint)&&(null==t?void 0:t.createPlaylistEndpoint.createPlaylistDialog)&&(this.dialog=SL.parseItem(null==t?void 0:t.createPlaylistEndpoint.createPlaylistDialog,Qd))}getEndpoint(t){switch(t){case"browseEndpoint":return"/browse";case"watchEndpoint":return"/player";case"searchEndpoint":return"/search";case"watchPlaylistEndpoint":return"/next";case"liveChatItemContextMenuEndpoint":return"live_chat/get_item_context_menu"}}call(t,e){if(!t)throw new Error("An active caller must be provided");if(!this.metadata.api_url)throw new Error("Expected an api_url, but none was found, this is a bug.");return t.execute(this.metadata.api_url,Object.assign(Object.assign({},this.payload),e))}toURL(){if(this.metadata.url&&this.metadata.page_type)return"WEB_PAGE_TYPE_UNKNOWN"===this.metadata.page_type?this.metadata.url:`https://www.youtube.com${this.metadata.url}`}}Jd.type="NavigationEndpoint";const Zd=Jd,tp=class{constructor(t){this.text=t.text,this.bold=Boolean(t.bold),this.italics=Boolean(t.italics),this.strikethrough=Boolean(t.strikethrough),this.endpoint=t.navigationEndpoint?new Zd(t.navigationEndpoint):void 0,this.attachment=t.attachment}toString(){return this.text}toHTML(){const t=[];this.bold&&t.push("b"),this.italics&&t.push("i"),this.strikethrough&&t.push("s");const e=rp(this.text),i=`<span style="white-space: pre-wrap;">${t.map((t=>`<${t}>`)).join("")+e+t.map((t=>`</${t}>`)).join("")}</span>`;if(this.attachment&&this.attachment.element.type.imageType.image.sources.length){const{url:t}=this.attachment.element.type.imageType.image.sources[0];if(this.endpoint){const e=this.endpoint.toURL();if(e)return`<a href="${e}" class="yt-ch-link" display: block; width: fit-content; font-size: small;><img src="${t}" style="vertical-align: middle; height: ${this.attachment.element.properties.layoutProperties.height.value}px; width: ${this.attachment.element.properties.layoutProperties.width.value}px;">${i}</a>`}}if(this.endpoint){const t=this.endpoint.toURL();if(t)return`<a href="${t}">${i}</a>`}return i}};class ep{constructor(t){this.url=t.url,this.width=t.width,this.height=t.height}static fromResponse(t){return t&&t.thumbnails?t.thumbnails.map((t=>new ep(t))).sort(((t,e)=>e.width-t.width)):[]}}const ip=ep,np=class{constructor(t){var e,i,n,r,s,a;this.text=(null===(e=t.emoji)||void 0===e?void 0:e.emojiId)||(null===(n=null===(i=t.emoji)||void 0===i?void 0:i.shortcuts)||void 0===n?void 0:n[0])||"",this.emoji={emoji_id:t.emoji.emojiId,shortcuts:(null===(r=t.emoji)||void 0===r?void 0:r.shortcuts)||[],search_terms:(null===(s=t.emoji)||void 0===s?void 0:s.searchTerms)||[],image:ip.fromResponse(t.emoji.image),is_custom:!!(null===(a=t.emoji)||void 0===a?void 0:a.isCustomEmoji)}}toString(){return this.text}toHTML(){const t=rp(this.text);return`<img src="${this.emoji.image[0].url}" alt="${t}" title="${t}" style="display: inline-block; vertical-align: text-top; height: var(--yt-emoji-size, 1rem); width: var(--yt-emoji-size, 1rem);" loading="lazy" crossorigin="anonymous" />`}};function rp(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const sp=class{constructor(t){(null==t?void 0:t.hasOwnProperty("runs"))&&Array.isArray(t.runs)?(this.runs=t.runs.map((t=>t.emoji?new np(t):new tp(t))),this.text=this.runs.map((t=>t.text)).join("")):this.text=(null==t?void 0:t.simpleText)||"N/A"}toHTML(){return this.runs?this.runs.map((t=>t.toHTML())).join(""):this.text}toString(){return this.text}};class ap extends od{constructor(t){var e;super(),this.title=new sp(t.title).text,this.form_item_entity_key=t.formItemEntityKey,this.selected_icon_type=(null===(e=t.selectedIcon)||void 0===e?void 0:e.iconType)||null,this.endpoint=t.selectedCommand?new Zd(t.selectedCommand):null,this.selected=!!this.endpoint}}ap.type="MusicMultiSelectMenuItem";const op=ap,lp=class{constructor(t){var e,i,n,r,s,a,o,l;if(this.itag=t.itag,this.mime_type=t.mimeType,this.bitrate=t.bitrate,this.average_bitrate=t.averageBitrate,this.width=t.width||void 0,this.height=t.height||void 0,this.init_range=t.initRange?{start:parseInt(t.initRange.start),end:parseInt(t.initRange.end)}:void 0,this.index_range=t.indexRange?{start:parseInt(t.indexRange.start),end:parseInt(t.indexRange.end)}:void 0,this.last_modified=new Date(Math.floor(parseInt(t.lastModified)/1e3)),this.content_length=parseInt(t.contentLength),this.quality=t.quality,this.quality_label=t.qualityLabel||void 0,this.fps=t.fps||void 0,this.url=t.url||void 0,this.cipher=t.cipher||void 0,this.signature_cipher=t.signatureCipher||void 0,this.audio_quality=t.audioQuality||void 0,this.approx_duration_ms=parseInt(t.approxDurationMs),this.audio_sample_rate=parseInt(t.audioSampleRate),this.audio_channels=t.audioChannels,this.loudness_db=t.loudnessDb,this.has_audio=!!t.audioBitrate||!!t.audioQuality,this.has_video=!!t.qualityLabel,this.has_audio){const c=new URLSearchParams(this.cipher||this.signature_cipher),u=new URLSearchParams(c.get("url")||this.url);this.language=(null===(i=null===(e=u.get("xtags"))||void 0===e?void 0:e.split(":").find((t=>t.startsWith("lang="))))||void 0===i?void 0:i.split("=").at(1))||null,this.is_dubbed="dubbed"===(null===(r=null===(n=u.get("xtags"))||void 0===n?void 0:n.split(":").find((t=>t.startsWith("acont="))))||void 0===r?void 0:r.split("=").at(1)),this.is_descriptive="descriptive"===(null===(a=null===(s=u.get("xtags"))||void 0===s?void 0:s.split(":").find((t=>t.startsWith("acont="))))||void 0===a?void 0:a.split("=").at(1)),this.is_original="original"===(null===(l=null===(o=u.get("xtags"))||void 0===o?void 0:o.split(":").find((t=>t.startsWith("acont="))))||void 0===l?void 0:l.split("=").at(1))||!this.is_dubbed,t.audioTrack&&(this.audio_track={audio_is_default:t.audioTrack.audioIsDefault,display_name:t.audioTrack.displayName,id:t.audioTrack.id})}}decipher(t){if(!t)throw new bd("Cannot decipher format, this session appears to have no valid player.");return t.decipher(this.url,this.signature_cipher,this.cipher)}},cp=class{constructor(t){this.id=t.videoId,this.channel_id=t.channelId,this.title=t.title,this.duration=parseInt(t.lengthSeconds),this.keywords=t.keywords,this.is_owner_viewing=!!t.isOwnerViewing,this.short_description=t.shortDescription,this.thumbnail=ip.fromResponse(t.thumbnail),this.allow_ratings=!!t.allowRatings,this.view_count=parseInt(t.viewCount),this.author=t.author,this.is_private=!!t.isPrivate,this.is_live=!!t.isLive,this.is_live_content=!!t.isLiveContent,this.is_upcoming=!!t.isUpcoming,this.is_crawlable=!!t.isCrawlable}};class up extends od{constructor(t){super(),this.title=new sp(t.title),this.endpoint=new Zd(t.navigationEndpoint)}}up.type="AccountChannel";const hp=up;class dp extends od{constructor(t){super(),this.title=new sp(t.title)}}dp.type="AccountItemSectionHeader";const pp=dp;class fp{constructor(t){this.account_name=new sp(t.accountName),this.account_photo=ip.fromResponse(t.accountPhoto),this.is_selected=t.isSelected,this.is_disabled=t.isDisabled,this.has_channel=t.hasChannel,this.endpoint=new Zd(t.serviceEndpoint),this.account_byline=new sp(t.accountByline)}}fp.type="AccountItem";class mp extends od{constructor(t){super(),this.contents=t.contents.map((t=>new fp(t.accountItem))),this.header=SL.parseItem(t.header,pp)}}mp.type="AccountItemSection";const gp=mp;class yp extends od{constructor(t){super(),this.contents=SL.parseItem(t.contents[0],gp),this.footers=SL.parseItem(t.footers[0],hp)}}yp.type="AccountSectionList";const vp=yp;class bp extends od{constructor(t){super(),this.items=SL.parse(t.continuationItems),this.target=t.target}}bp.type="AppendContinuationItemsAction";const _p=bp;class wp extends od{constructor(t){super(),this.popup=SL.parse(t.popup),this.popup_type=t.popupType}}wp.type="OpenPopupAction";const Tp=wp;class Sp extends od{constructor(t){super(),this.text=new sp(t.text),this.alert_type=t.type}}Sp.type="Alert";const xp=Sp;class kp extends od{constructor(t){super(),this.title=t.title,this.subtitle=t.subtitle,this.metric_value=t.metricValue,this.comparison_indicator=t.comparisonIndicator;const e=t.seriesConfiguration.lineSeries;this.series_configuration={line_series:{lines_data:{x:e.linesData[0].x,y:e.linesData[0].y,style:{line_width:e.linesData[0].style.lineWidth,line_color:e.linesData[0].style.lineColor}},domain_axis:{tick_values:e.domainAxis.tickValues,custom_formatter:e.domainAxis.customFormatter},measure_axis:{tick_values:e.measureAxis.tickValues,custom_formatter:e.measureAxis.customFormatter}}}}}kp.type="DataModelSection";const Cp=kp;class Ep extends od{constructor(t){super(),this.period=t.cardData.periodLabel;const e=t.cardData.sections[0].analyticsKeyMetricsData;this.sections=e.dataModel.sections.map((t=>new Cp(t)))}}Ep.type="AnalyticsMainAppKeyMetrics";const Ip=Ep;class Pp extends od{constructor(t){super();const e=t.analyticsTableCarouselData.data.tableCards;this.title=t.analyticsTableCarouselData.carouselTitle,this.selected_card_index_key=t.analyticsTableCarouselData.selectedCardIndexKey,this.table_cards=e.map((t=>({title:t.cardData.title,rows:t.cardData.rows.map((t=>({label:t.label,display_value:t.displayValue,display_value_a11y:t.displayValueA11y,bar_ratio:t.barRatio,bar_color:t.barColor,bar_opacity:t.barOpacity})))}))),this.use_main_app_specs=t.analyticsTableCarouselData.useMainAppSpecs}}Pp.type="AnalyticsRoot";const Ap=Pp;class Lp extends od{constructor(t){super(),this.title=t.title,this.shorts=t.shortsCarouselData.shorts.map((t=>({description:t.shortsDescription,thumbnail_url:t.thumbnailUrl,endpoint:new Zd(t.videoEndpoint)})))}}Lp.type="AnalyticsShortsCarouselCard";const Op=Lp;class Dp extends od{constructor(t){super(),this.title=t.videoTitle,this.metadata={views:t.videoDescription.split("")[0].trim(),published:t.videoDescription.split("")[1].trim(),thumbnails:ip.fromResponse(t.thumbnailDetails),duration:t.formattedLength,is_short:t.isShort}}}Dp.type="AnalyticsVideo";const Mp=Dp;class Rp extends od{constructor(t){var e;super(),this.title=t.title,t.noDataMessage&&(this.no_data_message=t.noDataMessage),this.videos=(null===(e=t.videoCarouselData)||void 0===e?void 0:e.videos.map((t=>new Mp(t))))||null}}Rp.type="AnalyticsVodCarouselCard";const Np=Rp;class Bp extends od{constructor(t){super(),this.title=t.buttonLabel,this.use_new_specs=t.useNewSpecs}}Bp.type="CtaGoToCreatorStudio";const Fp=Bp;class $p extends od{constructor(t){super(),this.title=new sp(t.title),this.contents=new sp(t.contents)}}$p.type="StatRow";const Up=$p;class jp extends od{constructor(t){super(),this.audio_only_availability=t.audioOnlyAvailability}}jp.type="AudioOnlyPlayability";const Vp=jp;class Hp extends od{constructor(t){var e,i;super(),(null===(i=null===(e=null==t?void 0:t.content)||void 0===e?void 0:e.automixPlaylistVideoRenderer)||void 0===i?void 0:i.navigationEndpoint)&&(this.playlist_video={endpoint:new Zd(t.content.automixPlaylistVideoRenderer.navigationEndpoint)})}}Hp.type="AutomixPreviewVideo";const qp=Hp;class Wp extends od{constructor(t){super(),this.image=ip.fromResponse(t.image),this.endpoint=new Zd(t.command)}}Wp.type="BackstageImage";const zp=Wp;class Gp extends sp{constructor(t){var e,i;super(t),this.endpoint=(null===(i=null===(e=null==t?void 0:t.runs)||void 0===e?void 0:e[0])||void 0===i?void 0:i.navigationEndpoint)?new Zd(null==t?void 0:t.runs[0].navigationEndpoint):(null==t?void 0:t.navigationEndpoint)?new Zd(null==t?void 0:t.navigationEndpoint):(null==t?void 0:t.titleNavigationEndpoint)?new Zd(null==t?void 0:t.titleNavigationEndpoint):null}toJSON(){return this}}Gp.type="NavigatableText";const Kp=Gp;var Yp,Xp=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};Yp=new WeakMap;const Qp=class{constructor(t,e,i){var n,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,b,_,w,T,S,x,k,C,E,I,P,A,L,O,D,M;Yp.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,Yp,new Kp(t),"f"),this.id=(null===(a=null===(s=null===(r=null===(n=Xp(this,Yp,"f").runs)||void 0===n?void 0:n[0])||void 0===r?void 0:r.endpoint)||void 0===s?void 0:s.payload)||void 0===a?void 0:a.browseId)||(null===(c=null===(l=null===(o=Xp(this,Yp,"f"))||void 0===o?void 0:o.endpoint)||void 0===l?void 0:l.payload)||void 0===c?void 0:c.browseId)||"N/A",this.name=Xp(this,Yp,"f").text||"N/A",this.thumbnails=i?ip.fromResponse(i):[],this.endpoint=(null===(h=null===(u=Xp(this,Yp,"f").runs)||void 0===u?void 0:u[0])||void 0===h?void 0:h.endpoint)||Xp(this,Yp,"f").endpoint,this.badges=Array.isArray(e)?SL.parseArray(e):[],this.is_verified=(null===(d=this.badges)||void 0===d?void 0:d.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)))||null,this.is_verified_artist=(null===(p=this.badges)||void 0===p?void 0:p.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)))||null,this.url="/browse"===(null===(v=null===(y=null===(g=null===(m=null===(f=Xp(this,Yp,"f"))||void 0===f?void 0:f.runs)||void 0===m?void 0:m[0])||void 0===g?void 0:g.endpoint)||void 0===y?void 0:y.metadata)||void 0===v?void 0:v.api_url)&&`${jd.URLS.YT_BASE}${(null===(S=null===(T=null===(w=null===(_=null===(b=Xp(this,Yp,"f"))||void 0===b?void 0:b.runs)||void 0===_?void 0:_[0])||void 0===w?void 0:w.endpoint)||void 0===T?void 0:T.payload)||void 0===S?void 0:S.canonicalBaseUrl)||`/u/${null===(I=null===(E=null===(C=null===(k=null===(x=Xp(this,Yp,"f"))||void 0===x?void 0:x.runs)||void 0===k?void 0:k[0])||void 0===C?void 0:C.endpoint)||void 0===E?void 0:E.payload)||void 0===I?void 0:I.browseId}`}`||`${jd.URLS.YT_BASE}${(null===(L=null===(A=null===(P=Xp(this,Yp,"f"))||void 0===P?void 0:P.endpoint)||void 0===A?void 0:A.payload)||void 0===L?void 0:L.canonicalBaseUrl)||`/u/${null===(M=null===(D=null===(O=Xp(this,Yp,"f"))||void 0===O?void 0:O.endpoint)||void 0===D?void 0:D.payload)||void 0===M?void 0:M.browseId}`}`||null}get best_thumbnail(){return this.thumbnails[0]}};class Jp extends od{constructor(t){super(),this.id=t.postId,this.author=new Qp(Object.assign(Object.assign({},t.authorText),{navigationEndpoint:t.authorEndpoint}),null,t.authorThumbnail),this.content=new sp(t.contentText),this.published=new sp(t.publishedTimeText),t.pollStatus&&(this.poll_status=t.pollStatus),t.voteStatus&&(this.vote_status=t.voteStatus),t.voteCount&&(this.vote_count=new sp(t.voteCount)),t.actionMenu&&(this.menu=SL.parseItem(t.actionMenu)),t.actionButtons&&(this.action_buttons=SL.parseItem(t.actionButtons)),t.voteButton&&(this.vote_button=SL.parseItem(t.voteButton)),t.navigationEndpoint&&(this.endpoint=new Zd(t.navigationEndpoint)),t.backstageAttachment&&(this.attachment=SL.parseItem(t.backstageAttachment)),this.surface=t.surface}}Jp.type="BackstagePost";const Zp=Jp;class tf extends od{constructor(t){super(),this.post=SL.parseItem(t.post)}}tf.type="BackstagePostThread";const ef=tf;class nf extends od{constructor(t){super(),this.contents=SL.parseArray(t.contents)}}nf.type="BrowseFeedActions";const rf=nf;class sf extends od{constructor(t){super(),this.album=new sp(t.album),this.thumbnails=ip.fromResponse(t.thumbnailDetails)}}sf.type="BrowserMediaSession";const af=sf;class of extends od{constructor(t){var e,i,n,r;super(),t.text&&(this.text=new sp(t.text).toString()),(null===(e=t.accessibility)||void 0===e?void 0:e.label)&&(this.label=null===(i=t.accessibility)||void 0===i?void 0:i.label),t.tooltip&&(this.tooltip=t.tooltip),(null===(n=t.icon)||void 0===n?void 0:n.iconType)&&(this.icon_type=null===(r=t.icon)||void 0===r?void 0:r.iconType),Reflect.has(t,"isDisabled")&&(this.is_disabled=t.isDisabled),this.endpoint=new Zd(t.navigationEndpoint||t.serviceEndpoint||t.command)}}of.type="Button";const lf=of;class cf extends od{constructor(t){super(),this.author=new Qp({simpleText:t.title,navigationEndpoint:t.navigationEndpoint},t.badges,t.avatar),t.banner&&(this.banner=ip.fromResponse(t.banner)),t.tv_banner&&(this.tv_banner=ip.fromResponse(t.tvBanner)),t.mobile_banner&&(this.mobile_banner=ip.fromResponse(t.mobileBanner)),t.subscriberCountText&&(this.subscribers=new sp(t.subscriberCountText)),t.videosCountText&&(this.videos_count=new sp(t.videosCountText)),t.sponsorButton&&(this.sponsor_button=SL.parseItem(t.sponsorButton)),t.subscribeButton&&(this.subscribe_button=SL.parseItem(t.subscribeButton)),t.headerLinks&&(this.header_links=SL.parseItem(t.headerLinks)),t.channelHandleText&&(this.channel_handle=new sp(t.channelHandleText)),t.channelId&&(this.channel_id=t.channelId)}}cf.type="C4TabbedHeader";const uf=cf;class hf extends od{constructor(t){super(),this.label=new sp(t.label),this.icon_type=t.icon.iconType,this.style=t.style}}hf.type="CallToActionButton";const df=hf;class pf extends od{constructor(t){super(),this.teaser=SL.parseItem(t.teaser),this.content=SL.parseItem(t.content),this.card_id=t.cardId||null,this.feature=t.feature||null,this.cue_ranges=t.cueRanges.map((t=>({start_card_active_ms:t.startCardActiveMs,end_card_active_ms:t.endCardActiveMs,teaser_duration_ms:t.teaserDurationMs,icon_after_teaser_ms:t.iconAfterTeaserMs})))}}pf.type="Card";const ff=pf;class mf extends od{constructor(t){super(),this.cards=SL.parseArray(t.cards),this.header=new sp(t.headerText),this.allow_teaser_dismiss=t.allowTeaserDismiss}}mf.type="CardCollection";const gf=mf;class yf extends od{constructor(t){super(),this.contents=SL.parseArray(t.contents)}}yf.type="CarouselHeader";const vf=yf;class bf extends od{constructor(t){super(),this.items=SL.parseArray(t.carouselItems),this.background_color=t.backgroundColor,this.layout_style=t.layoutStyle,this.pagination_thumbnails=ip.fromResponse(t.paginationThumbnails),this.paginator_alignment=t.paginatorAlignment}}bf.type="CarouselItem";const _f=bf;class wf extends od{constructor(t){super(),this.id=t.channelId,this.author=new Qp(Object.assign(Object.assign({},t.title),{navigationEndpoint:t.navigationEndpoint}),t.ownerBadges,t.thumbnail),this.subscribers=new sp(t.subscriberCountText),this.videos=new sp(t.videoCountText),this.long_byline=new sp(t.longBylineText),this.short_byline=new sp(t.shortBylineText),this.endpoint=new Zd(t.navigationEndpoint),this.subscribe_button=SL.parseItem(t.subscribeButton),this.description_snippet=new sp(t.descriptionSnippet)}}wf.type="Channel";const Tf=wf;class Sf extends od{constructor(t){var e,i;super(),this.id=t.channelId,this.name=new sp(t.title),this.avatar=ip.fromResponse(t.avatar),this.canonical_channel_url=t.canonicalChannelUrl,this.primary_links=null!==(i=null===(e=t.primaryLinks)||void 0===e?void 0:e.map((t=>({endpoint:new Zd(t.navigationEndpoint),icon:ip.fromResponse(t.icon),title:new sp(t.title)}))))&&void 0!==i?i:[],this.views=new sp(t.viewCountText),this.joined=new sp(t.joinedDateText),this.description=new sp(t.description),this.email_reveal=new Zd(t.onBusinessEmailRevealClickCommand),this.can_reveal_email=!t.signInForBusinessEmail,this.country=new sp(t.country),this.buttons=SL.parseArray(t.actionButtons)}}Sf.type="ChannelAboutFullMetadata";const xf=Sf;class kf extends od{constructor(t){super(),this.channel_title=t.channelTitle,this.avatar=ip.fromResponse(t.avatar),this.header=new sp(t.header),this.main_text=new sp(t.mainText),this.sign_in_button=LE.parseItem(t.signInButton,lf),this.secondary_text=new sp(t.secondaryText)}}kf.type="ChannelAgeGate";const Cf=kf;class Ef extends od{constructor(t){super(),this.title=new sp(t.title),this.items=SL.parse(t.items)}}Ef.type="ChannelFeaturedContent";const If=Ef;class Pf{constructor(t){this.endpoint=new Zd(t.navigationEndpoint),this.icon=ip.fromResponse(t.icon),this.title=new sp(t.title)}}class Af extends od{constructor(t){var e,i;super(),this.primary=(null===(e=t.primaryLinks)||void 0===e?void 0:e.map((t=>new Pf(t))))||[],this.secondary=(null===(i=t.secondaryLinks)||void 0===i?void 0:i.map((t=>new Pf(t))))||[]}}Af.type="ChannelHeaderLinks";const Lf=Af;class Of extends od{constructor(t){super(),this.title=t.title,this.description=t.description,this.url=t.channelUrl,this.rss_urls=t.rssUrl,this.vanity_channel_url=t.vanityChannelUrl,this.external_id=t.externalId,this.is_family_safe=t.isFamilySafe,this.keywords=t.keywords,this.avatar=ip.fromResponse(t.avatar),this.available_countries=t.availableCountryCodes,this.android_deep_link=t.androidDeepLink,this.android_appindexing_link=t.androidAppindexingLink,this.ios_appindexing_link=t.iosAppindexingLink}}Of.type="ChannelMetadata";const Df=Of;class Mf extends od{constructor(t){super(),this.title=new sp(t.title)}}Mf.type="ChannelMobileHeader";const Rf=Mf;class Nf extends od{constructor(t){super(),this.avatar=ip.fromResponse(t.avatar),this.endpoint=new Zd(t.avatarEndpoint),this.name=t.name,this.links=t.links.map((t=>new sp(t)))}}Nf.type="ChannelOptions";const Bf=Nf;class Ff extends od{constructor(t){super(),this.content_type_sub_menu_items=t.contentTypeSubMenuItems.map((t=>({endpoint:new Zd(t.navigationEndpoint||t.endpoint),selected:t.selected,title:t.title}))),this.sort_setting=SL.parseItem(t.sortSetting)}}Ff.type="ChannelSubMenu";const $f=Ff;class Uf extends od{constructor(t){super(),this.thumbnails=ip.fromResponse(t.thumbnail),this.endpoint=new Zd(t.navigationEndpoint),this.label=t.accessibility.accessibilityData.label}}Uf.type="ChannelThumbnailWithLink";const jf=Uf;class Vf extends od{constructor(t){super(),this.id=t.videoId,this.title=new sp(t.title),this.description=new sp(t.description),this.views=new sp(t.viewCountText),this.published=new sp(t.publishedTimeText)}}Vf.type="ChannelVideoPlayer";const Hf=Vf;class qf extends od{constructor(t){super(),this.title=new sp(t.title),this.time_range_start_millis=t.timeRangeStartMillis,this.thumbnail=ip.fromResponse(t.thumbnail)}}qf.type="Chapter";const Wf=qf;class zf extends od{constructor(t){super(),this.id=t.videoId,this.title=new sp(t.title),this.duration={text:t.lengthText.simpleText,seconds:Ld(t.lengthText.simpleText)},this.endpoint=new Zd(t.navigationEndpoint)}}zf.type="ChildVideo";const Gf=zf;class Kf extends od{constructor(t){super(),this.is_selected=t.isSelected,this.endpoint=t.navigationEndpoint?new Zd(t.navigationEndpoint):void 0,this.text=new sp(t.text).toString()}}Kf.type="ChipCloudChip";const Yf=Kf;class Xf extends od{constructor(t){super(),this.chips=SL.parseArray(t.chips,Yf),this.next_button=SL.parseItem(t.nextButton,lf),this.previous_button=SL.parseItem(t.previousButton,lf),this.horizontal_scrollable=t.horizontalScrollable}}Xf.type="ChipCloud";const Qf=Xf;class Jf extends od{constructor(t){super(),this.channel_avatar=ip.fromResponse(t.channelAvatar),this.custom_text=new sp(t.customText),this.channel_name=new sp(t.channelName),this.subscriber_count=new sp(t.subscriberCountText),this.endpoint=new Zd(t.endpoint)}}Jf.type="CollaboratorInfoCardContent";const Zf=Jf;class tm extends od{constructor(t){super(),this.left=ip.fromResponse(t.leftThumbnail),this.top_right=ip.fromResponse(t.topRightThumbnail),this.bottom_right=ip.fromResponse(t.bottomRightThumbnail),this.endpoint=new Zd(t.navigationEndpoint)}}tm.type="CollageHeroImage";const em=tm;var im;class nm extends od{constructor(t){var e;super(),im.set(this,void 0),this.icon_type=(null===(e=t.icon)||void 0===e?void 0:e.iconType)||null,this.tooltip=t.iconTooltip,"Verified"===this.tooltip&&(this.style="BADGE_STYLE_TYPE_VERIFIED")&&(t.style="BADGE_STYLE_TYPE_VERIFIED"),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,im,t,"f")}get orig_badge(){return function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}(this,im,"f")}}im=new WeakMap,nm.type="AuthorCommentBadge";const rm=nm;class sm extends od{constructor(t){super(),this.reply_button=SL.parseItem(t.replyButton),this.cancel_button=SL.parseItem(t.cancelButton),this.author_thumbnail=ip.fromResponse(t.authorThumbnail),this.placeholder=new sp(t.placeholderText),this.error_message=new sp(t.errorMessage)}}sm.type="CommentReplyDialog";const am=sm;var om,lm;(lm=om=om||(om={}))[lm.Varint=0]="Varint",lm[lm.Fixed64=1]="Fixed64",lm[lm.LengthDelimited=2]="LengthDelimited",lm[lm.StartGroup=3]="StartGroup",lm[lm.EndGroup=4]="EndGroup",lm[lm.Fixed32=5]="Fixed32";const cm=65535,um=4294967295;class hm extends Uint32Array{constructor(t=0,e=0){super([t,e])}toString(t=!0){const[e,i]=this;if(0===e&&0===i)return"0";if(t&&i>2147483647)return"-"+mm(bm(this),pm).toString(!1);const n=[];let r=new hm(e,i);for(;vm(r,dm);){const[t,e]=ym(r);n.push(e),r=t}return n.reverse().join("")}static parse(t){const e=parseInt(t,10),i=e<0;if(Number.isNaN(e))return new hm(0);if(t.length<10)return e<0?mm(bm(new hm(-e)),pm):new hm(e);let n=new hm,r=pm;for(const e of t.split("").reverse())parseInt(e)&&(n=mm(n,gm(new hm(parseInt(e)),r))),r=gm(r,new hm(10));return i?mm(bm(n),pm):n}}const dm=new hm(0),pm=new hm(1);function fm(t){const[e,i]=t;return[e&cm,e>>>16,i&cm,i>>>16]}function mm(t,e){const[i,n,r,s]=fm(t),[a,o,l,c]=fm(e);let u=0,h=0,d=0,p=0;return p+=i+a,d+=p>>>16,p&=cm,d+=n+o,h+=d>>>16,d&=cm,h+=r+l,u+=h>>>16,h&=cm,u+=s+c,u&=cm,new hm(d<<16|p,u<<16|h)}function gm(t,e){const[i,n,r,s]=fm(t),[a,o,l,c]=fm(e);let u=0,h=0,d=0,p=0;return p+=i*a,d+=p>>>16,p&=cm,d+=i*o+n*a,h+=d>>>16,d&=cm,h+=i*l+r*a+n*o,u+=h>>>16,h&=cm,u+=i*c+n*l+r*o+s*a,u&=cm,new hm(d<<16|p,u<<16|h)}function ym(t){const[e,i]=t;return[new hm((i%10*(um+1)+e)/10|0,i/10|0),(i%10*(um+1)+e)%10]}function vm(t,e){const[i,n]=t,[r,s]=e;return n!==s?n-s:i-r}function bm(t){const[e,i]=t;return new hm(~e,~i)}function _m(t){const e=[];let i="number"==typeof t?new hm(t):t;for(;i[0]||i[1];){const[t,n]=i,r=127&t;i=new hm(t>>>7|(127&n)<<25,n>>>7);const s=i[0]||i[1]?128|r:r;e.push(s)}return e.length<1?new Uint8Array(1):Uint8Array.from(e)}function wm(t){let e=new hm(0),i=0;for(;;){const s=t.getUint8(i);if(n=e,r=Tm(new hm(127&s),7*i),e=new hm(n[0]|r[0],n[1]|r[1]),++i,!(s>>>7))return[i,e]}var n,r}function Tm(t,e){return 0===e?t:e>=32?new hm(0,t[0]<<e-32):new hm(t[0]<<e,t[1]<<e|t[0]>>>32-e)}function Sm(t){const e=[];return t.forEach((([t,i])=>{switch(e.push(_m(t<<3|i.type)),i.type){case om.Varint:e.push(_m(i.value));break;case om.Fixed64:{const t=new Uint8Array(8),n=new DataView(t.buffer);n.setUint32(0,i.value[0],!0),n.setUint32(4,i.value[1],!0),e.push(t);break}case om.LengthDelimited:e.push(_m(i.value.byteLength)),e.push(i.value);break;case om.Fixed32:{const t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,i.value,!0),e.push(t);break}}})),xm(e)}function xm(t){const e=t.reduce(((t,e)=>t+e.byteLength),0),i=new Uint8Array(e);return t.reduce(((t,e)=>(i.set(e,t),t+e.byteLength)),0),i}function km(t){if(t instanceof hm){const e=new hm(t[0]<<1,t[1]<<1|t[0]>>>31),i=t[1]>>>31?new hm(4294967295,4294967295):new hm;return new hm(e[0]^i[0],e[1]^i[1])}return(2*t^t>>31)>>>0}function Cm(t){if(t instanceof hm){const e=new hm(t[0]>>>1|t[1]<<31,t[1]>>>1),i=1&t[0]?new hm(4294967295,4294967295):new hm;return new hm(e[0]^i[0],e[1]^i[1])}return t>>>1^-(1&t)}const Em={int32:t=>0|t[0],int64:t=>t.toString(!0),uint32:t=>t[0]>>>0,uint64:t=>t.toString(!1),sint32:t=>Cm(t[0]),sint64:t=>Cm(t).toString(!0),bool:t=>0!==t[0]},Im={int32:t=>new hm(t),int64:t=>hm.parse(t),uint32:t=>new hm(t),uint64:t=>hm.parse(t),sint32:t=>km(new hm(t)),sint64:t=>km(hm.parse(t)),bool:t=>new hm(+t)},Pm=Object.fromEntries(Object.entries(Em).map((([t,e])=>[t,t=>{if(t.type===om.Varint)return e(t.value)}]))),Am=Object.fromEntries(Object.entries(Im).map((([t,e])=>[t,t=>({type:om.Varint,value:e(t)})]))),Lm=Object.assign(Object.assign({},Pm),{double:t=>{if(t.type===om.Fixed64)return new DataView(t.value.buffer).getFloat64(0,!0)},float:t=>{if(t.type===om.Fixed32)return new DataView(new Uint32Array([t.value]).buffer).getFloat32(0,!0)},fixed32:t=>{if(t.type===om.Fixed32)return t.value>>>0},fixed64:t=>{if(t.type===om.Fixed64)return t.value.toString(!1)},sfixed32:t=>{if(t.type===om.Fixed32)return 0|t.value},sfixed64:t=>{if(t.type===om.Fixed64)return t.value.toString(!0)},string:t=>{if(t.type===om.LengthDelimited)return(new TextDecoder).decode(t.value)},bytes:t=>{if(t.type===om.LengthDelimited)return t.value}}),Om=Object.assign(Object.assign({},Am),{double:t=>{const e=new hm;return new DataView(e.buffer).setFloat64(0,t,!0),{type:om.Fixed64,value:e}},float:t=>{const e=new Uint32Array(1),i=new DataView(e.buffer);return i.setFloat32(0,t,!0),{type:om.Fixed32,value:i.getUint32(0,!0)}},fixed32:t=>({type:om.Fixed32,value:t>>>0}),fixed64:t=>({type:om.Fixed64,value:hm.parse(t)}),sfixed32:t=>({type:om.Fixed32,value:0|t}),sfixed64:t=>({type:om.Fixed64,value:hm.parse(t)}),string:t=>{const e=new TextEncoder;return{type:om.LengthDelimited,value:e.encode(t)}},bytes:t=>({type:om.LengthDelimited,value:t})}),Dm=Object.fromEntries(Object.keys(Em).map((t=>[t,function*(e){for(const i of e){const e=Lm[t](i);if(null!=e)yield e;else for(const e of Fm(i))yield Em[t](e)}}]))),Mm=(Object.assign(Object.assign({},Dm),{*double(t){for(const e of t){const t=Lm.double(e);null!=t?yield t:yield*Nm(e)}},*float(t){for(const e of t){const t=Lm.float(e);null!=t?yield t:yield*Bm(e)}},*fixed32(t){for(const e of t){const t=Lm.fixed32(e);if(null!=t)yield t;else for(const t of $m(e))yield t>>>0}},*fixed64(t){for(const e of t){const t=Lm.fixed64(e);if(null!=t)yield t;else for(const t of Um(e))yield t.toString(!1)}},*sfixed32(t){for(const e of t){const t=Lm.sfixed32(e);if(null!=t)yield t;else for(const t of $m(e))yield 0|t}},*sfixed64(t){for(const e of t){const t=Lm.sfixed64(e);if(null!=t)yield t;else for(const t of Um(e))yield t.toString(!0)}}}),Object.fromEntries(Object.keys(Im).map((t=>[t,function(e){return{type:om.LengthDelimited,value:xm(e.map((e=>_m(Im[t](e)))))}}]))));function Rm(t,e){return function(i){const n=new Uint8Array(i.length*t),r=new DataView(n.buffer);for(let n=0;n<i.length;++n)e(r,n*t,i[n]);return{type:om.LengthDelimited,value:n}}}function*Nm(t){if(t.type!==om.LengthDelimited)return;const{value:e}=t;let i=0;const n=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=n.getFloat64(i,!0);i+=4,yield t}}function*Bm(t){if(t.type!==om.LengthDelimited)return;const{value:e}=t;let i=0;const n=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=n.getFloat32(i,!0);i+=4,yield t}}function*Fm(t){if(t.type!==om.LengthDelimited)return;const{value:e}=t;let i=0;const n=e.byteOffset;for(;i<e.length;){const t=wm(new DataView(e.buffer,n+i));i+=t[0],yield t[1]}}function*$m(t){if(t.type!==om.LengthDelimited)return;const{value:e}=t;let i=0;const n=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=n.getUint32(i,!0);i+=4,yield t}}function*Um(t){if(t.type!==om.LengthDelimited)return;const{value:e}=t;let i=0;const n=new DataView(e.buffer,e.byteOffset);for(;i<e.length;){const t=n.getUint32(i,!0);i+=4;const e=n.getUint32(i,!0);i+=4,yield new hm(t,e)}}function jm(t){const e=[];if(void 0!==t.channelId){const i=t.channelId;e.push([1001,Om.string(i)])}return Sm(e)}function Vm(t){const e=[];if(void 0!==t.uploadDate){const i=t.uploadDate;e.push([1,Om.int32(i)])}if(void 0!==t.type){const i=t.type;e.push([2,Om.int32(i)])}if(void 0!==t.duration){const i=t.duration;e.push([3,Om.int32(i)])}if(void 0!==t.featuresHd){const i=t.featuresHd;e.push([4,Om.int32(i)])}if(void 0!==t.featuresSubtitles){const i=t.featuresSubtitles;e.push([5,Om.int32(i)])}if(void 0!==t.featuresCreativeCommons){const i=t.featuresCreativeCommons;e.push([6,Om.int32(i)])}if(void 0!==t.features3d){const i=t.features3d;e.push([7,Om.int32(i)])}if(void 0!==t.featuresLive){const i=t.featuresLive;e.push([8,Om.int32(i)])}if(void 0!==t.featuresPurchased){const i=t.featuresPurchased;e.push([9,Om.int32(i)])}if(void 0!==t.features4k){const i=t.features4k;e.push([14,Om.int32(i)])}if(void 0!==t.features360){const i=t.features360;e.push([15,Om.int32(i)])}if(void 0!==t.featuresLocation){const i=t.featuresLocation;e.push([23,Om.int32(i)])}if(void 0!==t.featuresHdr){const i=t.featuresHdr;e.push([25,Om.int32(i)])}if(void 0!==t.featuresVr180){const i=t.featuresVr180;e.push([26,Om.int32(i)])}return Sm(e)}function Hm(t){const e=[];if(void 0!==t.song){const i=t.song;e.push([1,Om.int32(i)])}if(void 0!==t.video){const i=t.video;e.push([2,Om.int32(i)])}if(void 0!==t.album){const i=t.album;e.push([3,Om.int32(i)])}if(void 0!==t.artist){const i=t.artist;e.push([4,Om.int32(i)])}if(void 0!==t.playlist){const i=t.playlist;e.push([5,Om.int32(i)])}return Sm(e)}function qm(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([17,{type:om.LengthDelimited,value:Hm(i)}])}return Sm(e)}function Wm(t){const e=[];if(void 0!==t.channelId){const i=t.channelId;e.push([1,Om.string(i)])}if(void 0!==t.videoId){const i=t.videoId;e.push([2,Om.string(i)])}return Sm(e)}function zm(t){const e=[];if(void 0!==t.ids){const i=t.ids;e.push([5,{type:om.LengthDelimited,value:Wm(i)}])}return Sm(e)}function Gm(t){const e=[];if(void 0!==t.videoId){const i=t.videoId;e.push([2,Om.string(i)])}return Sm(e)}function Km(t){const e=[];if(void 0!==t.unkParam){const i=t.unkParam;e.push([1,Om.int32(i)])}return Sm(e)}function Ym(t){const e=[];if(void 0!==t.commentId){const i=t.commentId;e.push([2,Om.string(i)])}if(void 0!==t.unkopts){const i=t.unkopts;e.push([4,{type:om.LengthDelimited,value:Km(i)}])}if(void 0!==t.channelId){const i=t.channelId;e.push([5,Om.string(i)])}if(void 0!==t.videoId){const i=t.videoId;e.push([6,Om.string(i)])}if(void 0!==t.unkParam1){const i=t.unkParam1;e.push([8,Om.int32(i)])}if(void 0!==t.unkParam2){const i=t.unkParam2;e.push([9,Om.int32(i)])}return Sm(e)}function Xm(t){const e=[];if(void 0!==t.videoId){const i=t.videoId;e.push([4,Om.string(i)])}if(void 0!==t.sortBy){const i=t.sortBy;e.push([6,Om.int32(i)])}if(void 0!==t.type){const i=t.type;e.push([15,Om.int32(i)])}return Sm(e)}function Qm(t){const e=[];if(void 0!==t.unkToken){const i=t.unkToken;e.push([1,Om.string(i)])}if(void 0!==t.repliesOpts){const i=t.repliesOpts;e.push([3,{type:om.LengthDelimited,value:Ym(i)}])}if(void 0!==t.opts){const i=t.opts;e.push([4,{type:om.LengthDelimited,value:Xm(i)}])}if(void 0!==t.page){const i=t.page;e.push([5,Om.int32(i)])}if(void 0!==t.target){const i=t.target;e.push([8,Om.string(i)])}return Sm(e)}function Jm(t){const e=[];if(void 0!==t.index){const i=t.index;e.push([1,Om.int32(i)])}return Sm(e)}function Zm(t){const e=[];if(void 0!==t.text){const i=t.text;e.push([1,Om.string(i)])}return Sm(e)}function tg(t){const e=[];if(void 0!==t.comment){const i=t.comment;e.push([1,{type:om.LengthDelimited,value:Zm(i)}])}return Sm(e)}function eg(t){const e=[];if(void 0!==t.commentId){const i=t.commentId;e.push([2,Om.string(i)])}if(void 0!==t.params){const i=t.params;e.push([3,{type:om.LengthDelimited,value:tg(i)}])}if(void 0!==t.targetLanguage){const i=t.targetLanguage;e.push([4,Om.string(i)])}return Sm(e)}function ig(t){const e=[];if(void 0!==t.index){const i=t.index;e.push([1,Om.int32(i)])}return Sm(e)}function ng(t){const e=[];if(void 0!==t.unkparam){const i=t.unkparam;e.push([16,Om.int32(i)])}if(void 0!==t.clientVersion){const i=t.clientVersion;e.push([17,Om.string(i)])}if(void 0!==t.clientName){const i=t.clientName;e.push([18,Om.string(i)])}return Sm(e)}function rg(t){const e=[];if(void 0!==t.client){const i=t.client;e.push([1,{type:om.LengthDelimited,value:ng(i)}])}return Sm(e)}function sg(t){const e=[];if(void 0!==t.text){const i=t.text;e.push([1,Om.string(i)])}return Sm(e)}function ag(t){const e=[];if(void 0!==t.text){const i=t.text;e.push([1,Om.string(i)])}return Sm(e)}function og(t){const e=[];for(const i of t.list)e.push([1,Om.string(i)]);return Sm(e)}function lg(t){const e=[];if(void 0!==t.id){const i=t.id;e.push([1,Om.int32(i)])}return Sm(e)}function cg(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,Om.string(i)])}return Sm(e)}function ug(t){const e=[];if(void 0!==t.imageData){const i=t.imageData;e.push([1,Om.bytes(i)])}return Sm(e)}function hg(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,Om.int32(i)])}if(void 0!==t.thumbnail){const i=t.thumbnail;e.push([3,{type:om.LengthDelimited,value:ug(i)}])}return Sm(e)}function dg(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,Om.int32(i)])}return Sm(e)}function pg(t){const e=[];if(void 0!==t.unkparam){const i=t.unkparam;e.push([1,Om.int32(i)])}if(void 0!==t.choice){const i=t.choice;e.push([2,Om.int32(i)])}return Sm(e)}function fg(t){const e=[];if(void 0!==t.unkparam){const i=t.unkparam;e.push([1,Om.int32(i)])}if(void 0!==t.choice){const i=t.choice;e.push([2,Om.int32(i)])}return Sm(e)}function mg(t){const e=[];if(void 0!==t.context){const i=t.context;e.push([1,{type:om.LengthDelimited,value:rg(i)}])}if(void 0!==t.target){const i=t.target;e.push([2,Om.string(i)])}if(void 0!==t.title){const i=t.title;e.push([3,{type:om.LengthDelimited,value:sg(i)}])}if(void 0!==t.description){const i=t.description;e.push([4,{type:om.LengthDelimited,value:ag(i)}])}if(void 0!==t.tags){const i=t.tags;e.push([6,{type:om.LengthDelimited,value:og(i)}])}if(void 0!==t.category){const i=t.category;e.push([7,{type:om.LengthDelimited,value:lg(i)}])}if(void 0!==t.license){const i=t.license;e.push([8,{type:om.LengthDelimited,value:cg(i)}])}if(void 0!==t.videoThumbnail){const i=t.videoThumbnail;e.push([20,{type:om.LengthDelimited,value:hg(i)}])}if(void 0!==t.privacy){const i=t.privacy;e.push([38,{type:om.LengthDelimited,value:dg(i)}])}if(void 0!==t.madeForKids){const i=t.madeForKids;e.push([68,{type:om.LengthDelimited,value:pg(i)}])}if(void 0!==t.ageRestricted){const i=t.ageRestricted;e.push([69,{type:om.LengthDelimited,value:fg(i)}])}return Sm(e)}function gg(t){const e=[];if(void 0!==t.hashtag){const i=t.hashtag;e.push([1,Om.string(i)])}if(void 0!==t.type){const i=t.type;e.push([3,Om.int32(i)])}return Sm(e)}Object.assign(Object.assign({},Mm),{double:Rm(8,((t,e,i)=>{t.setFloat64(e,i,!0)})),float:Rm(4,((t,e,i)=>{t.setFloat32(e,i,!0)})),fixed32:Rm(4,((t,e,i)=>{t.setUint32(e,i,!0)})),fixed64:Rm(8,((t,e,i)=>{const n=hm.parse(i);t.setUint32(e,n[0],!0),t.setUint32(e+4,n[1],!0)})),sfixed32:Rm(4,((t,e,i)=>{t.setInt32(e,i,!0)})),sfixed64:Rm(8,((t,e,i)=>{const n=hm.parse(i);t.setUint32(e,n[0],!0),t.setUint32(e+4,n[1],!0)}))});const yg=class{static encodeVisitorData(t,e){const i=function(t){const e=[];if(void 0!==t.id){const i=t.id;e.push([1,Om.string(i)])}if(void 0!==t.timestamp){const i=t.timestamp;e.push([5,Om.int32(i)])}return Sm(e)}({id:t,timestamp:e});return encodeURIComponent(Dd(i).replace(/\+/g,"-").replace(/\//g,"_"))}static encodeChannelAnalyticsParams(t){const e=function(t){const e=[];if(void 0!==t.params){const i=t.params;e.push([32,{type:om.LengthDelimited,value:jm(i)}])}return Sm(e)}({params:{channelId:t}});return encodeURIComponent(Dd(e))}static encodeSearchFilters(t){const e={hd:"featuresHd",subtitles:"featuresSubtitles",creative_commons:"featuresCreativeCommons","3d":"features3D",live:"featuresLive",purchased:"featuresPurchased","4k":"features4K",360:"features360",location:"featuresLocation",hdr:"featuresHdr",vr180:"featuresVr180"},i={};if(t?i.filters={}:i.noFilter=0,i.filters&&(t.upload_date&&(i.filters.uploadDate={all:void 0,hour:1,today:2,week:3,month:4,year:5}[t.upload_date]),t.type&&(i.filters.type={all:void 0,video:1,channel:2,playlist:3,movie:4}[t.type]),t.duration&&(i.filters.duration={all:void 0,short:1,long:2,medium:3}[t.duration]),t.sort_by&&"relevance"!==t.sort_by&&(i.sortBy={relevance:void 0,rating:1,upload_date:2,view_count:3}[t.sort_by]),t.features))for(const n of t.features)i.filters[e[n]]=1;const n=function(t){const e=[];if(void 0!==t.sortBy){const i=t.sortBy;e.push([1,Om.int32(i)])}if(void 0!==t.filters){const i=t.filters;e.push([2,{type:om.LengthDelimited,value:Vm(i)}])}if(void 0!==t.noFilter){const i=t.noFilter;e.push([19,Om.int32(i)])}return Sm(e)}(i);return encodeURIComponent(Dd(n))}static encodeMusicSearchFilters(t){var e;const i={filters:{type:{}}};t.type&&"all"!==t.type&&(null===(e=i.filters)||void 0===e?void 0:e.type)&&(i.filters.type[t.type]=1);const n=function(t){const e=[];if(void 0!==t.filters){const i=t.filters;e.push([2,{type:om.LengthDelimited,value:qm(i)}])}return Sm(e)}(i);return encodeURIComponent(Dd(n))}static encodeMessageParams(t,e){const i=function(t){const e=[];if(void 0!==t.params){const i=t.params;e.push([1,{type:om.LengthDelimited,value:zm(i)}])}if(void 0!==t.number0){const i=t.number0;e.push([2,Om.int32(i)])}if(void 0!==t.number1){const i=t.number1;e.push([3,Om.int32(i)])}return Sm(e)}({params:{ids:{channelId:t,videoId:e}},number0:1,number1:4});return btoa(encodeURIComponent(Dd(i)))}static encodeCommentsSectionParams(t,e={}){const i=function(t){const e=[];if(void 0!==t.ctx){const i=t.ctx;e.push([2,{type:om.LengthDelimited,value:Gm(i)}])}if(void 0!==t.unkParam){const i=t.unkParam;e.push([3,Om.int32(i)])}if(void 0!==t.params){const i=t.params;e.push([6,{type:om.LengthDelimited,value:Qm(i)}])}return Sm(e)}({ctx:{videoId:t},unkParam:6,params:{opts:{videoId:t,sortBy:{TOP_COMMENTS:0,NEWEST_FIRST:1}[e.sort_by||"TOP_COMMENTS"],type:e.type||2},target:"comments-section"}});return encodeURIComponent(Dd(i))}static encodeCommentParams(t){const e=function(t){const e=[];if(void 0!==t.videoId){const i=t.videoId;e.push([2,Om.string(i)])}if(void 0!==t.params){const i=t.params;e.push([5,{type:om.LengthDelimited,value:Jm(i)}])}if(void 0!==t.number){const i=t.number;e.push([10,Om.int32(i)])}return Sm(e)}({videoId:t,params:{index:0},number:7});return encodeURIComponent(Dd(e))}static encodeCommentActionParams(t,e={}){const i={type:t,commentId:e.comment_id||" ",videoId:e.video_id||" ",channelId:" ",unkNum:2};if(e.hasOwnProperty("text")){if("string"!=typeof e.target_language)throw new Error("target_language must be a string");e.comment_id&&delete i.unkNum,i.translateCommentParams={params:{comment:{text:e.text}},commentId:e.comment_id||" ",targetLanguage:e.target_language}}const n=function(t){const e=[];if(void 0!==t.type){const i=t.type;e.push([1,Om.int32(i)])}if(void 0!==t.unkNum){const i=t.unkNum;e.push([2,Om.int32(i)])}if(void 0!==t.commentId){const i=t.commentId;e.push([3,Om.string(i)])}if(void 0!==t.videoId){const i=t.videoId;e.push([5,Om.string(i)])}if(void 0!==t.channelId){const i=t.channelId;e.push([23,Om.string(i)])}if(void 0!==t.translateCommentParams){const i=t.translateCommentParams;e.push([31,{type:om.LengthDelimited,value:eg(i)}])}return Sm(e)}(i);return encodeURIComponent(Dd(n))}static encodeNotificationPref(t,e){const i=function(t){const e=[];if(void 0!==t.channelId){const i=t.channelId;e.push([1,Om.string(i)])}if(void 0!==t.prefId){const i=t.prefId;e.push([2,{type:om.LengthDelimited,value:ig(i)}])}if(void 0!==t.number0){const i=t.number0;e.push([3,Om.int32(i)])}if(void 0!==t.number1){const i=t.number1;e.push([4,Om.int32(i)])}return Sm(e)}({channelId:t,prefId:{index:e},number0:0,number1:4});return encodeURIComponent(Dd(i))}static encodeVideoMetadataPayload(t,e){const i={context:{client:{unkparam:14,clientName:Fd.ANDROID.NAME,clientVersion:Fd.YTSTUDIO_ANDROID.VERSION}},target:t};if(Reflect.has(e,"title")&&(i.title={text:e.title||""}),Reflect.has(e,"description")&&(i.description={text:e.description||""}),Reflect.has(e,"license")&&(i.license={type:e.license||""}),Reflect.has(e,"tags")&&(i.tags={list:e.tags||[]}),Reflect.has(e,"category")&&(i.category={id:e.category||0}),Reflect.has(e,"privacy"))switch(e.privacy){case"PUBLIC":i.privacy={type:1};break;case"UNLISTED":i.privacy={type:2};break;case"PRIVATE":i.privacy={type:3};break;default:throw new Error("Invalid visibility option")}return Reflect.has(e,"made_for_kids")&&(i.madeForKids={unkparam:1,choice:e.made_for_kids?1:2}),Reflect.has(e,"age_restricted")&&(i.ageRestricted={unkparam:1,choice:e.age_restricted?1:2}),mg(i)}static encodeCustomThumbnailPayload(t,e){return mg({context:{client:{unkparam:14,clientName:Fd.ANDROID.NAME,clientVersion:Fd.YTSTUDIO_ANDROID.VERSION}},target:t,videoThumbnail:{type:3,thumbnail:{imageData:e}}})}static encodeHashtag(t){const e=function(t){const e=[];if(void 0!==t.params){const i=t.params;e.push([93,{type:om.LengthDelimited,value:gg(i)}])}return Sm(e)}({params:{hashtag:t,type:1}});return encodeURIComponent(Dd(e))}};var vg,bg=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},_g=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class wg extends od{constructor(t){var e,i,n,r,s,a,o;super(),vg.set(this,void 0),this.content=new sp(t.contentText),this.published=new sp(t.publishedTimeText),this.author_is_channel_owner=t.authorIsChannelOwner,this.current_user_reply_thumbnail=ip.fromResponse(t.currentUserReplyThumbnail),this.sponsor_comment_badge=SL.parseItem(t.sponsorCommentBadge),this.paid_comment_chip=SL.parseItem(t.paidCommentChipRenderer),this.author_badge=SL.parseItem(t.authorCommentBadge,rm),this.author=new Qp(Object.assign(Object.assign({},t.authorText),{navigationEndpoint:t.authorEndpoint}),this.author_badge?[{metadataBadgeRenderer:null===(e=this.author_badge)||void 0===e?void 0:e.orig_badge}]:null,t.authorThumbnail),this.action_menu=SL.parseItem(t.actionMenu),this.action_buttons=SL.parseItem(t.actionButtons),this.comment_id=t.commentId,this.vote_status=t.voteStatus,this.vote_count=t.voteCount?new sp(t.voteCount).toString():"0",this.reply_count=t.replyCount||0,this.is_liked=!!(null===(n=null===(i=this.action_buttons)||void 0===i?void 0:i.like_button)||void 0===n?void 0:n.is_toggled),this.is_disliked=!!(null===(s=null===(r=this.action_buttons)||void 0===r?void 0:r.dislike_button)||void 0===s?void 0:s.is_toggled),this.is_hearted=!!(null===(o=null===(a=this.action_buttons)||void 0===a?void 0:a.creator_heart)||void 0===o?void 0:o.is_hearted),this.is_pinned=!!t.pinnedCommentBadge,this.is_member=!!t.sponsorCommentBadge}like(){var t;return bg(this,void 0,void 0,(function*(){if(!_g(this,vg,"f"))throw new bd("An active caller must be provide to perform this operation.");const e=null===(t=this.action_buttons)||void 0===t?void 0:t.like_button;if(!e)throw new bd("Like button was not found.",{comment_id:this.comment_id});if(e.is_toggled)throw new bd("This comment is already liked",{comment_id:this.comment_id});return yield e.endpoint.call(_g(this,vg,"f"),{parse:!1})}))}dislike(){var t;return bg(this,void 0,void 0,(function*(){if(!_g(this,vg,"f"))throw new bd("An active caller must be provide to perform this operation.");const e=null===(t=this.action_buttons)||void 0===t?void 0:t.dislike_button;if(!e)throw new bd("Dislike button was not found.",{comment_id:this.comment_id});if(e.is_toggled)throw new bd("This comment is already disliked",{comment_id:this.comment_id});return yield e.endpoint.call(_g(this,vg,"f"),{parse:!1})}))}reply(t){var e,i,n;return bg(this,void 0,void 0,(function*(){if(!_g(this,vg,"f"))throw new bd("An active caller must be provide to perform this operation.");if(!(null===(e=this.action_buttons)||void 0===e?void 0:e.reply_button))throw new bd("Cannot reply to another reply. Try mentioning the user instead.",{comment_id:this.comment_id});const r=null===(i=this.action_buttons)||void 0===i?void 0:i.reply_button;if(!(null===(n=r.endpoint)||void 0===n?void 0:n.dialog))throw new bd("Reply button endpoint did not have a dialog.");const s=r.endpoint.dialog.item().as(am).reply_button;if(!s)throw new bd("Reply button was not found in the dialog.",{comment_id:this.comment_id});if(!s.endpoint)throw new bd("Reply button endpoint was not found.",{comment_id:this.comment_id});return yield s.endpoint.call(_g(this,vg,"f"),{commentText:t})}))}translate(t){var e,i,n,r,s,a;return bg(this,void 0,void 0,(function*(){if(!_g(this,vg,"f"))throw new bd("An active caller must be provide to perform this operation.");const o={text:this.content.toString().replace(/[^\p{L}\p{N}\p{P}\p{Z}]/gu,""),target_language:t,comment_id:this.comment_id},l=yg.encodeCommentActionParams(22,o),c=yield _g(this,vg,"f").execute("comment/perform_comment_action",{action:l,client:"ANDROID"}),u=null===(i=null===(e=c.data.frameworkUpdates)||void 0===e?void 0:e.entityBatchUpdate)||void 0===i?void 0:i.mutations,h=null===(a=null===(s=null===(r=null===(n=null==u?void 0:u[0])||void 0===n?void 0:n.payload)||void 0===r?void 0:r.commentEntityPayload)||void 0===s?void 0:s.translatedContent)||void 0===a?void 0:a.content;return Object.assign(Object.assign({},c),{content:h})}))}setActions(t){!function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,vg,t,"f")}}vg=new WeakMap,wg.type="Comment";const Tg=wg;class Sg extends od{constructor(t){super(),this.like_button=SL.parseItem(t.likeButton),this.dislike_button=SL.parseItem(t.dislikeButton),this.reply_button=SL.parseItem(t.replyButton),this.creator_heart=SL.parseItem(t.creatorHeart)}}Sg.type="CommentActionButtons";const xg=Sg;class kg extends od{constructor(t){super(),this.editable_text=new sp(t.editableText),this.author_thumbnail=ip.fromResponse(t.authorThumbnail),this.submit_button=SL.parseItem(t.submitButton),this.cancel_button=SL.parseItem(t.cancelButton),this.placeholder=new sp(t.placeholderText),this.emoji_button=SL.parseItem(t.emojiButton),this.emoji_picker=SL.parseItem(t.emojiPicker)}}kg.type="CommentDialog";const Cg=kg;class Eg extends od{constructor(t){super(),this.contents=SL.parseArray(t.contents),this.view_replies=SL.parseItem(t.viewReplies),this.hide_replies=SL.parseItem(t.hideReplies),this.view_replies_creator_thumbnail=ip.fromResponse(t.viewRepliesCreatorThumbnail),this.has_channel_owner_replied=!!t.viewRepliesCreatorThumbnail}}Eg.type="CommentReplies";const Ig=Eg;class Pg extends od{constructor(t){super(),t.header&&(this.header=new sp(t.headerText)),t.commentCount&&(this.comment_count=new sp(t.commentCount)),(t.teaserAvatar||t.simpleboxAvatar)&&(this.teaser_avatar=ip.fromResponse(t.teaserAvatar||t.simpleboxAvatar)),t.teaserContent&&(this.teaser_content=new sp(t.teaserContent)),t.simpleboxPlaceholder&&(this.simplebox_placeholder=new sp(t.simpleboxPlaceholder))}}Pg.type="CommentsEntryPointHeader";const Ag=Pg;class Lg extends od{constructor(t){var e;super(),this.title=new sp(t.titleText),this.count=new sp(t.countText),this.comments_count=new sp(t.commentsCount),this.create_renderer=SL.parseItem(t.createRenderer),this.sort_menu=SL.parseItem(t.sortMenu),this.custom_emojis=(null===(e=t.customEmojis)||void 0===e?void 0:e.map((t=>({emoji_id:t.emojiId,shortcuts:t.shortcuts,search_terms:t.searchTerms,image:ip.fromResponse(t.image),is_custom_emoji:t.isCustomEmoji}))))||null}}Lg.type="CommentsHeader";const Og=Lg;class Dg extends od{constructor(t){super(),this.submit_button=SL.parseItem(t.submitButton),this.cancel_button=SL.parseItem(t.cancelButton),this.author_thumbnails=ip.fromResponse(t.authorThumbnail),this.placeholder=new sp(t.placeholderText),this.avatar_size=t.avatarSize}}Dg.type="CommentSimplebox";const Mg=Dg;class Rg extends od{constructor(t){super(),this.trigger=t.trigger,t.button&&(this.button=SL.parseItem(t.button)),this.endpoint=new Zd(t.continuationEndpoint)}}Rg.type="ContinuationItem";const Ng=Rg;var Bg,Fg,$g=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},Ug=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},jg=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i};class Vg extends od{constructor(t){super(),Bg.set(this,void 0),Fg.set(this,void 0),this.comment=SL.parseItem(t.comment,Tg),this.comment_replies_data=SL.parseItem(t.replies),this.is_moderated_elq_comment=t.isModeratedElqComment,this.has_replies=!!this.comment_replies_data}getReplies(){var t,e;return $g(this,void 0,void 0,(function*(){if(!Ug(this,Bg,"f"))throw new bd("Actions instance not set for this thread.");if(!this.comment_replies_data)throw new bd("This comment has no replies.",{comment_id:null===(t=this.comment)||void 0===t?void 0:t.comment_id});const i=null===(e=this.comment_replies_data.contents)||void 0===e?void 0:e.firstOfType(Ng);if(!i)throw new bd("Replies continuation not found.");const n=yield i.endpoint.call(Ug(this,Bg,"f"),{parse:!0});if(!n.on_response_received_endpoints_memo)throw new bd("Unexpected response.",n);return this.replies=ud(n.on_response_received_endpoints_memo.getType(Tg).map((t=>(t.setActions(Ug(this,Bg,"f")),t)))),jg(this,Fg,null==n?void 0:n.on_response_received_endpoints_memo.getType(Ng).first(),"f"),this}))}getContinuation(){var t,e;return $g(this,void 0,void 0,(function*(){if(!this.replies)throw new bd("Cannot retrieve continuation because this thread's replies have not been loaded.");if(!Ug(this,Fg,"f"))throw new bd("Continuation not found.");if(!Ug(this,Bg,"f"))throw new bd("Actions instance not set for this thread.");const i=null===(t=Ug(this,Fg,"f").button)||void 0===t?void 0:t.as(lf);if(!i)throw new bd('"Load more" button not found.');const n=yield i.endpoint.call(Ug(this,Bg,"f"),{parse:!0});if(!n.on_response_received_endpoints_memo)throw new bd("Unexpected response.",n);return this.replies=ud(n.on_response_received_endpoints_memo.getType(Tg).map((t=>(t.setActions(Ug(this,Bg,"f")),t)))),jg(this,Fg,null===(e=n.on_response_received_endpoints_memo.getType(Ng))||void 0===e?void 0:e[0],"f"),this}))}get has_continuation(){if(!this.replies)throw new bd("Cannot determine if there is a continuation because this thread's replies have not been loaded.");return!!Ug(this,Fg,"f")}setActions(t){jg(this,Bg,t,"f")}}Bg=new WeakMap,Fg=new WeakMap,Vg.type="CommentThread";const Hg=Vg;class qg extends od{constructor(t){var e,i,n;super(),this.creator_thumbnail=ip.fromResponse(t.creatorThumbnail),this.heart_icon_type=null===(e=t.heartIcon)||void 0===e?void 0:e.iconType,this.heart_color={basic_color_palette_data:{foreground_title_color:null===(n=null===(i=t.heartColor)||void 0===i?void 0:i.basicColorPaletteData)||void 0===n?void 0:n.foregroundTitleColor}},this.hearted_tooltip=t.heartedTooltip,this.is_hearted=t.isHearted,this.is_enabled=t.isEnabled,this.kennedy_heart_color_string=t.kennedyHeartColorString}}qg.type="CreatorHeart";const Wg=qg;class zg extends od{constructor(t){super(),this.id=t.id,this.categories=SL.parseArray(t.categories),this.category_buttons=SL.parseArray(t.categoryButtons),this.search_placeholder=new sp(t.searchPlaceholderText),this.search_no_results=new sp(t.searchNoResultsText),this.pick_skin_tone=new sp(t.pickSkinToneText),this.clear_search_label=t.clearSearchLabel,this.skin_tone_generic_label=t.skinToneGenericLabel,this.skin_tone_light_label=t.skinToneLightLabel,this.skin_tone_medium_light_label=t.skinToneMediumLightLabel,this.skin_tone_medium_label=t.skinToneMediumLabel,this.skin_tone_medium_dark_label=t.skinToneMediumDarkLabel,this.skin_tone_dark_label=t.skinToneDarkLabel}}zg.type="EmojiPicker";const Gg=zg;class Kg extends od{constructor(t){var e,i,n;super(),this.text=new sp(t.chipText),this.color_pallette={background_color:null===(e=t.chipColorPalette)||void 0===e?void 0:e.backgroundColor,foreground_title_color:null===(i=t.chipColorPalette)||void 0===i?void 0:i.foregroundTitleColor},this.icon_type=null===(n=t.chipIcon)||void 0===n?void 0:n.iconType}}Kg.type="PdgCommentChip";const Yg=Kg;class Xg extends od{constructor(t){super(),this.custom_badge=ip.fromResponse(t.customBadge),this.tooltip=t.tooltip}}Xg.type="SponsorCommentBadge";const Qg=Xg;class Jg extends od{constructor(t){super(),this.title=new sp(t.title),this.channel_id=t.channelId,this.thumbnail=ip.fromResponse(t.thumbnail),this.display_name=new sp(t.displayName),this.video_count=new sp(t.videoCountText),this.subscriber_count=new sp(t.subscriberCountText),this.endpoint=new Zd(t.navigationEndpoint),this.tv_banner=ip.fromResponse(t.tvBanner),this.menu=SL.parseItem(t.menu)}}Jg.type="CompactChannel";const Zg=Jg;class ty extends od{constructor(t){super(),this.title=new sp(t.title).toString(),this.endpoint=new Zd(t.navigationEndpoint),this.style=t.style}}ty.type="CompactLink";const ey=ty,iy=class extends Qp{constructor(t,e,i){super(t,e,i),delete this.badges,delete this.is_verified,delete this.is_verified_artist}};class ny extends od{constructor(t){var e;super(),this.id=t.playlistId,this.title=new sp(t.title),this.author=(null===(e=t.shortBylineText)||void 0===e?void 0:e.simpleText)?new sp(t.shortBylineText):new iy(t.longBylineText,t.ownerBadges,null),this.thumbnails=ip.fromResponse(t.thumbnail||{thumbnails:t.thumbnails.map((t=>t.thumbnails)).flat(1)}),this.video_count=new sp(t.thumbnailText),this.video_count_short=new sp(t.videoCountShortText),this.first_videos=SL.parseArray(t.videos),this.share_url=t.shareUrl||null,this.menu=SL.parseItem(t.menu),this.badges=SL.parseArray(t.ownerBadges),this.endpoint=new Zd(t.navigationEndpoint),this.thumbnail_overlays=SL.parseArray(t.thumbnailOverlays)}}ny.type="Playlist";const ry=ny;class sy extends ry{constructor(t){super(t)}}sy.type="CompactMix";const ay=sy;class oy extends ry{constructor(t){super(t)}}oy.type="CompactPlaylist";const ly=oy;class cy extends od{constructor(t){super(),this.title=new sp(t.title),this.description=new sp(t.description),this.video_count=new sp(t.videoCountText),this.endpoint=new Zd(t.navigationEndpoint),this.thumbnail=ip.fromResponse(t.thumbnail)}}cy.type="CompactStation";const uy=cy;class hy extends od{constructor(t){super(),(null==t?void 0:t.icon)&&(this.icon_type=t.icon.iconType),(null==t?void 0:t.style)&&(this.style=t.style),(null==t?void 0:t.label)&&(this.label=t.label),((null==t?void 0:t.tooltip)||(null==t?void 0:t.iconTooltip))&&(this.tooltip=t.tooltip||t.iconTooltip)}}hy.type="MetadataBadge";const dy=hy;class py extends od{constructor(t){super(),this.id=t.videoId,this.thumbnails=ip.fromResponse(t.thumbnail)||null,this.rich_thumbnail=t.richThumbnail&&SL.parse(t.richThumbnail),this.title=new sp(t.title),this.author=new Qp(t.longBylineText,t.ownerBadges,t.channelThumbnail),this.view_count=new sp(t.viewCountText),this.short_view_count=new sp(t.shortViewCountText),this.published=new sp(t.publishedTimeText),this.badges=SL.parseArray(t.badges,dy),this.duration={text:new sp(t.lengthText).toString(),seconds:Ld(new sp(t.lengthText).toString())},this.thumbnail_overlays=SL.parseArray(t.thumbnailOverlays),this.endpoint=new Zd(t.navigationEndpoint),this.menu=SL.parseItem(t.menu)}get best_thumbnail(){return this.thumbnails[0]}get is_fundraiser(){return this.badges.some((t=>"Fundraiser"===t.label))}get is_live(){return this.badges.some((t=>{if("BADGE_STYLE_TYPE_LIVE_NOW"===t.style||"LIVE"===t.label)return!0}))}get is_new(){return this.badges.some((t=>"New"===t.label))}get is_premiere(){return this.badges.some((t=>"PREMIERE"===t.style))}}py.type="CompactVideo";const fy=py;class my extends od{constructor(t){super(),this.title=new sp(t.title),this.confirm_button=SL.parseItem(t.confirmButton,lf),this.cancel_button=SL.parseItem(t.cancelButton,lf),this.dialog_messages=t.dialogMessages.map((t=>new sp(t)))}}my.type="ConfirmDialog";const gy=my;class yy extends od{constructor(t){super(),this.text=new sp(t.text).toString()}}yy.type="Message";const vy=yy;class by extends od{constructor(t){super(),this.availability_message=SL.parseItem(t.availabilityMessage,vy)}}by.type="ConversationBar";const _y=by;class wy extends od{constructor(t){super(),this.copy_button=SL.parseItem(t.copyButton,lf),this.short_url=t.shortUrl,this.style=t.style}}wy.type="CopyLink";const Ty=wy;class Sy extends od{constructor(t){super(),this.player_bar=SL.parseItem(t.playerBar),this.player_bar_action_button=SL.parseItem(t.playerBarActionButton)}}Sy.type="DecoratedPlayerBar";const xy=Sy;class ky extends od{constructor(t){super(),this.title=new sp(t.title),this.description=new sp(t.description),this.endpoint=new Zd(t.navigationEndpoint),this.large_form_factor_background_thumbnail=SL.parseItem(t.largeFormFactorBackgroundThumbnail),this.small_form_factor_background_thumbnail=SL.parseItem(t.smallFormFactorBackgroundThumbnail),this.scrim_color_values=t.scrimColorValues,this.min_panel_display_duration_ms=t.minPanelDisplayDurationMs,this.min_video_play_duration_ms=t.minVideoPlayDurationMs,this.scrim_duration=t.scrimDuration,this.metadata_order=t.metadataOrder,this.panel_layout=t.panelLayout}}ky.type="DefaultPromoPanel";const Cy=ky;class Ey extends od{constructor(t){super(),this.text=new sp(t.didYouMean).toString(),this.corrected_query=new sp(t.correctedQuery),this.endpoint=new Zd(t.navigationEndpoint||t.correctedQueryEndpoint)}}Ey.type="DidYouMean";const Iy=Ey;class Py extends od{constructor(t){super(),this.style=t.style,this.size=t.size,this.endpoint=new Zd(t.command),this.target_id=t.targetId}}Py.type="DownloadButton";const Ay=Py;class Ly{constructor(t){var e,i;this.text=(null===(i=null===(e=t.type.textType)||void 0===e?void 0:e.text)||void 0===i?void 0:i.content)||null,this.properties=t.properties,t.childElements&&(this.child_elements=t.childElements.map((t=>new Ly(t))))}}Ly.type="ChildElement";const Oy=Ly;class Dy extends od{constructor(t){var e,i,n;if(super(),Reflect.has(t,"elementRenderer"))return SL.parseItem(t,Dy);const r=t.newElement.type.componentType;this.model=SL.parse(null==r?void 0:r.model),(null===(e=t.newElement)||void 0===e?void 0:e.childElements)&&(this.child_elements=(null===(n=null===(i=t.newElement)||void 0===i?void 0:i.childElements)||void 0===n?void 0:n.map((t=>new Oy(t))))||null)}}Dy.type="Element";const My=Dy;class Ry extends od{constructor(t){super(),this.title=new sp(t.title),this.first_option=SL.parse(t.firstOption),this.menu=SL.parse(t.menu)}}Ry.type="EmergencyOnebox";const Ny=Ry;class By extends od{constructor(t){super(),this.category_id=t.categoryId,this.title=new sp(t.title),this.emoji_ids=t.emojiIds,this.image_loading_lazy=!!t.imageLoadingLazy,this.category_type=t.categoryType}}By.type="EmojiPickerCategory";const Fy=By;class $y extends od{constructor(t){var e;super(),this.category_id=t.categoryId,this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType,this.tooltip=t.tooltip}}$y.type="EmojiPickerCategoryButton";const Uy=$y;class jy extends od{constructor(t){super(),this.category_id=t.categoryId,this.title=new sp(t.title),this.upsell=new sp(t.upsell),this.emoji_tooltip=t.emojiTooltip,this.endpoint=new Zd(t.command),this.emoji_ids=t.emojiIds}}jy.type="EmojiPickerUpsellCategory";const Vy=jy;class Hy extends od{constructor(t){super(),this.elements=SL.parseArray(t.elements),this.start_ms=t.startMs}}Hy.type="Endscreen";const qy=Hy;class Wy extends od{constructor(t){super(),this.style=`${t.style}`,this.title=new sp(t.title),this.endpoint=new Zd(t.endpoint),t.image&&(this.image=ip.fromResponse(t.image)),t.icon&&(this.icon=ip.fromResponse(t.icon)),t.metadata&&(this.metadata=new sp(t.metadata)),t.callToAction&&(this.call_to_action=new sp(t.callToAction)),t.hovercardButton&&(this.hovercard_button=SL.parseItem(t.hovercardButton)),t.isSubscribe&&(this.is_subscribe=!!t.isSubscribe),t.playlistLength&&(this.playlist_length=new sp(t.playlistLength)),this.thumbnail_overlays=t.thumbnailOverlays?SL.parseArray(t.thumbnailOverlays):void 0,this.left=parseFloat(t.left),this.width=parseFloat(t.width),this.top=parseFloat(t.top),this.aspect_ratio=parseFloat(t.aspectRatio),this.start_ms=parseFloat(t.startMs),this.end_ms=parseFloat(t.endMs),this.id=t.id}}Wy.type="EndscreenElement";const zy=Wy;class Gy extends od{constructor(t){super(),this.id=t.playlistId,this.title=new sp(t.title),this.author=new sp(t.longBylineText),this.endpoint=new Zd(t.navigationEndpoint),this.thumbnails=ip.fromResponse(t.thumbnail),this.video_count=new sp(t.videoCountText)}}Gy.type="EndScreenPlaylist";const Ky=Gy;class Yy extends od{constructor(t){super(),this.id=t.videoId,this.title=new sp(t.title),this.thumbnails=ip.fromResponse(t.thumbnail),this.thumbnail_overlays=SL.parse(t.thumbnailOverlays),this.author=new Qp(t.shortBylineText,t.ownerBadges),this.endpoint=new Zd(t.navigationEndpoint),this.short_view_count=new sp(t.shortViewCountText),this.badges=SL.parse(t.badges),this.duration={text:new sp(t.lengthText).toString(),seconds:t.lengthInSeconds}}}Yy.type="EndScreenVideo";const Xy=Yy;class Qy extends od{constructor(t){super(),this.header={collapsed_title:new sp(t.header.collapsedTitle),collapsed_thumbnail:ip.fromResponse(t.header.collapsedThumbnail),collapsed_label:new sp(t.header.collapsedLabel),expanded_title:new sp(t.header.expandedTitle)},this.expanded_content=SL.parseItem(t.expandedContent),this.expand_button=SL.parseItem(t.expandButton),this.collapse_button=SL.parseItem(t.collapseButton)}}Qy.type="ExpandableMetadata";const Jy=Qy;class Zy extends od{constructor(t){super(),this.title=t.title,this.endpoint=new Zd(t.endpoint),this.selected=t.selected,this.content=t.content?SL.parseItem(t.content):null}}Zy.type="ExpandableTab";const tv=Zy;class ev extends od{constructor(t){super(),this.items=SL.parseArray(t.items)}get contents(){return this.items}}ev.type="ExpandedShelfContents";const iv=ev;class nv extends od{constructor(t){super(),this.contents=SL.parseArray(t.contents,Yf)}}nv.type="FeedFilterChipBar";const rv=nv;class sv extends od{constructor(t){super(),this.title=new sp(t.title)}}sv.type="FeedTabbedHeader";const av=sv;class ov extends od{constructor(t){super(),this.game=SL.parseItem(t.game)}}ov.type="GameCard";const lv=ov;class cv extends od{constructor(t){super(),this.title=new sp(t.title),this.box_art=ip.fromResponse(t.boxArt),this.box_art_overlay_text=new sp(t.boxArtOverlayText),this.endpoint=new Zd(t.endpoint),this.is_official_box_art=t.isOfficialBoxArt}}cv.type="GameDetails";const uv=cv;class hv extends od{constructor(t){var e,i,n;super(),this.items=SL.parseArray(t.items),t.header&&(this.header=SL.parse(t.header)),t.isCollapsible&&(this.is_collapsible=t.isCollapsible),t.visibleRowCount&&(this.visible_row_count=t.visibleRowCount),t.targetId&&(this.target_id=t.targetId),this.continuation=(null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===n?void 0:n.continuation)||null}get contents(){return this.items}}hv.type="Grid";const dv=hv;class pv extends od{constructor(t){super(),this.id=t.channelId,this.author=new Qp(Object.assign(Object.assign({},t.title),{navigationEndpoint:t.navigationEndpoint}),t.ownerBadges,t.thumbnail),this.subscribers=new sp(t.subscriberCountText),this.video_count=new sp(t.videoCountText),this.endpoint=new Zd(t.navigationEndpoint),this.subscribe_button=SL.parse(t.subscribeButton)}}pv.type="GridChannel";const fv=pv;class mv extends od{constructor(t){super(),this.title=new sp(t.title)}}mv.type="GridHeader";const gv=mv;class yv extends od{constructor(t){var e;super(),this.id=t.playlistId,this.title=new sp(t.title),t.shortBylineText&&(this.author=new iy(t.shortBylineText,t.ownerBadges)),this.badges=SL.parse(t.ownerBadges),this.endpoint=new Zd(t.navigationEndpoint),this.view_playlist=new Kp(t.viewPlaylistText),this.thumbnails=ip.fromResponse(t.thumbnail),this.thumbnail_renderer=SL.parse(t.thumbnailRenderer),this.sidebar_thumbnails=[].concat(...(null===(e=t.sidebarThumbnails)||void 0===e?void 0:e.map((t=>ip.fromResponse(t))))||[])||null,this.video_count=new sp(t.thumbnailText),this.video_count_short=new sp(t.videoCountShortText)}}yv.type="GridPlaylist";const vv=yv;class bv extends od{constructor(t){var e;super();const i=null===(e=t.thumbnailOverlays.find((t=>t.hasOwnProperty("thumbnailOverlayTimeStatusRenderer"))))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer;this.id=t.videoId,this.title=new sp(t.title),this.thumbnails=ip.fromResponse(t.thumbnail),this.thumbnail_overlays=SL.parseArray(t.thumbnailOverlays),this.rich_thumbnail=t.richThumbnail&&SL.parse(t.richThumbnail),this.published=new sp(t.publishedTimeText),this.duration=t.lengthText?new sp(t.lengthText):(null==i?void 0:i.text)?new sp(i.text):null,this.author=t.shortBylineText&&new Qp(t.shortBylineText,t.ownerBadges),this.views=new sp(t.viewCountText),this.short_view_count=new sp(t.shortViewCountText),this.endpoint=new Zd(t.navigationEndpoint),this.menu=SL.parseItem(t.menu)}}bv.type="GridVideo";const _v=bv;class wv extends od{constructor(t){super(),this.expander_item={title:new sp(t.expanderItem.guideEntryRenderer.formattedTitle).toString(),icon_type:t.expanderItem.guideEntryRenderer.icon.iconType},this.collapser_item={title:new sp(t.collapserItem.guideEntryRenderer.formattedTitle).toString(),icon_type:t.collapserItem.guideEntryRenderer.icon.iconType},this.expandable_items=LE.parseArray(t.expandableItems)}}wv.type="GuideCollapsibleEntry";const Tv=wv;class Sv extends od{constructor(t){super(),this.header_entry=LE.parseItem(t.headerEntry),this.expander_icon=t.expanderIcon.iconType,this.collapser_icon=t.collapserIcon.iconType,this.section_items=LE.parseArray(t.sectionItems)}}Sv.type="GuideCollapsibleSectionEntry";const xv=Sv;class kv extends od{constructor(t){var e;super(),this.title=new sp(t.formattedTitle),this.endpoint=new Zd(t.navigationEndpoint||t.serviceEndpoint),(null===(e=t.icon)||void 0===e?void 0:e.iconType)&&(this.icon_type=t.icon.iconType),t.thumbnail&&(this.thumbnails=ip.fromResponse(t.thumbnail)),t.badges&&(this.badges=t.badges),this.is_primary=!!t.isPrimary}}kv.type="GuideEntry";const Cv=kv;class Ev extends Cv{constructor(t){super(t.entryRenderer.guideEntryRenderer),this.always_show=!!t.alwaysShow}}Ev.type="GuideDownloadsEntry";const Iv=Ev;class Pv extends od{constructor(t){super(),t.formattedTitle&&(this.title=new sp(t.formattedTitle)),this.items=LE.parseArray(t.items)}}Pv.type="GuideSection";const Av=Pv;class Lv extends Av{}Lv.type="GuideSubscriptionsSection";const Ov=Lv;class Dv extends od{constructor(t){super(),this.hashtag=new sp(t.hashtag),this.hashtag_info=new sp(t.hashtagInfoText)}}Dv.type="HashtagHeader";const Mv=Dv;class Rv extends od{constructor(t){super(),this.max_height_dp=t.maxHeightDp,this.min_height_dp=t.minHeightDp,this.show_hide_animation_duration_millis=t.showHideAnimationDurationMillis,this.heat_markers=SL.parseArray(t.heatMarkers),this.heat_markers_decorations=SL.parseArray(t.heatMarkersDecorations)}}Rv.type="Heatmap";const Nv=Rv;class Bv extends od{constructor(t){super(),this.time_range_start_millis=t.timeRangeStartMillis,this.marker_duration_millis=t.markerDurationMillis,this.heat_marker_intensity_score_normalized=t.heatMarkerIntensityScoreNormalized}}Bv.type="HeatMarker";const Fv=Bv;class $v extends od{constructor(t){super(),this.thumbnails=ip.fromResponse(t.thumbnail),this.on_tap_endpoint=new Zd(t.onTap)}}$v.type="HeroPlaylistThumbnail";const Uv=$v;class jv{constructor(t){t.thumbnail&&(this.thumbnail={image:t.thumbnail.image.sources,endpoint:new Zd(t.thumbnail.onTap),on_long_press_endpoint:new Zd(t.thumbnail.onLongPress),content_mode:t.thumbnail.contentMode,crop_options:t.thumbnail.cropOptions}),this.background_image={image:t.backgroundImage.image.sources,gradient_image:t.backgroundImage.gradientImage.sources},this.strapline=t.strapline,this.title=t.title,this.description=t.description,this.cta={icon_name:t.cta.iconName,title:t.cta.title,endpoint:new Zd(t.cta.onTap),accessibility_text:t.cta.accessibilityText,state:t.cta.state},this.text_on_tap_endpoint=new Zd(t.textOnTap)}}jv.type="Panel";class Vv extends od{constructor(t){super(),this.panels=t.highlightsCarousel.panels.map((t=>new jv(t)))}}Vv.type="HighlightsCarousel";const Hv=Vv;class qv extends od{constructor(t){super(),this.suggestion=new sp(t.suggestion),this.endpoint=new Zd(t.navigationEndpoint),this.icon_type=t.icon.iconType,t.serviceEndpoint&&(this.service_endpoint=new Zd(t.serviceEndpoint))}}qv.type="SearchSuggestion";const Wv=qv;class zv extends Wv{constructor(t){super(t)}}zv.type="HistorySuggestion";const Gv=zv;class Kv extends od{constructor(t){super(),this.cards=SL.parseArray(t.cards),this.header=SL.parseItem(t.header),this.previous_button=SL.parseItem(t.previousButton,lf),this.next_button=SL.parseItem(t.nextButton,lf)}}Kv.type="HorizontalCardList";const Yv=Kv;class Xv extends od{constructor(t){super(),this.visible_item_count=t.visibleItemCount,this.items=SL.parseArray(t.items)}get contents(){return this.items}}Xv.type="HorizontalList";const Qv=Xv;class Jv extends od{constructor(t){var e;super(),this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType,t.tooltip&&(this.tooltip=new sp(t.tooltip).toString()),this.endpoint=new Zd(t.navigationEndpoint)}}Jv.type="IconLink";const Zv=Jv;class tb extends od{constructor(t){super(),this.states=t.states.map((t=>({id:t.stateId,next_id:t.nextStateId,state:SL.parse(t.state)}))),this.current_state_id=t.currentStateId,this.target_id=t.targetId}}tb.type="SubscriptionNotificationToggleButton";const eb=tb;class ib extends od{constructor(t){var e,i;super(),this.title=new sp(t.buttonText),this.subscribed=t.subscribed,this.enabled=t.enabled,this.item_type=t.type,this.channel_id=t.channelId,this.show_preferences=t.showPreferences,this.subscribed_text=new sp(t.subscribedButtonText),this.unsubscribed_text=new sp(t.unsubscribedButtonText),this.notification_preference_button=SL.parseItem(t.notificationPreferenceButton,eb),this.endpoint=new Zd((null===(e=t.serviceEndpoints)||void 0===e?void 0:e[0])||(null===(i=t.onSubscribeEndpoints)||void 0===i?void 0:i[0]))}}ib.type="SubscribeButton";const nb=ib;class rb extends od{constructor(t){super(),this.header_type=t.type,this.title=new sp(t.title),this.description=new sp(t.description),this.metadata=new sp(t.metadata),this.badges=SL.parseArray(t.badges,dy),this.box_art=ip.fromResponse(t.boxArt),this.banner=ip.fromResponse(t.banner),this.buttons=SL.parseArray(t.buttons,[nb,lf]),this.auto_generated=new sp(t.autoGenerated)}}rb.type="InteractiveTabbedHeader";const sb=rb;class ab extends od{constructor(t){var e,i,n;super(),this.header=SL.parseItem(t.header),this.contents=SL.parse(t.contents,!0),(t.targetId||t.sectionIdentifier)&&(this.target_id=(null==t?void 0:t.target_id)||(null==t?void 0:t.sectionIdentifier)),t.continuations&&(this.continuation=null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e.at(0))||void 0===i?void 0:i.nextContinuationData)||void 0===n?void 0:n.continuation)}}ab.type="ItemSection";const ob=ab;class lb extends od{constructor(t){super(),this.title=new sp(t.title)}}lb.type="ItemSectionHeader";const cb=lb;class ub extends od{constructor(t){super(),this.title=new sp(t.title),this.selected=t.selected||!1,this.endpoint=new Zd(t.endpoint)}}ub.type="Tab";const hb=ub;class db extends od{constructor(t){super(),this.title=new sp(t.title),this.tabs=SL.parseArray(t.tabs,hb),t.endItems&&(this.end_items=SL.parseArray(t.endItems))}}db.type="ItemSectionTabbedHeader";const pb=db;class fb extends od{constructor(t){var e;super(),this.target={video_id:t.target.videoId},this.like_status=t.likeStatus,this.likes_allowed=t.likesAllowed,t.serviceEndpoints&&(this.endpoints=null===(e=t.serviceEndpoints)||void 0===e?void 0:e.map((t=>new Zd(t))))}}fb.type="LikeButton";const mb=fb;class gb extends od{constructor(t){var e,i;super(),this.header=SL.parse(t.header),this.initial_display_state=t.initialDisplayState,this.continuation=null===(i=null===(e=t.continuations[0])||void 0===e?void 0:e.reloadContinuationData)||void 0===i?void 0:i.continuation,this.client_messages={reconnect_message:new sp(t.clientMessages.reconnectMessage),unable_to_reconnect_message:new sp(t.clientMessages.unableToReconnectMessage),fatal_error:new sp(t.clientMessages.fatalError),reconnected_message:new sp(t.clientMessages.reconnectedMessage),generic_error:new sp(t.clientMessages.genericError)},this.is_replay=t.isReplay||!1}}gb.type="LiveChat";const yb=gb;class vb extends od{constructor(t){super(),this.banner=SL.parseItem(t.bannerRenderer)}}vb.type="AddBannerToLiveChatCommand";const bb=vb;class _b extends od{constructor(t){super(),this.item=SL.parseItem(t.item),this.client_id=t.clientId||null}}_b.type="AddChatItemAction";const wb=_b;class Tb extends od{constructor(t){super(),this.item=SL.parseItem(t.item),this.duration_sec=t.durationSec}}Tb.type="AddLiveChatTickerItemAction";const Sb=Tb;class xb extends od{constructor(t){super(),this.client_assigned_id=t.clientAssignedId}}xb.type="DimChatItemAction";const kb=xb;class Cb extends od{constructor(t){super(),this.menu_endpoint=new Zd(t.contextMenuEndpoint),this.moderation_buttons=SL.parseArray(t.moderationButtons,[lf]),this.auto_moderated_item=SL.parseItem(t.autoModeratedItem),this.header_text=new sp(t.headerText),this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.id=t.id}}Cb.type="LiveChatAutoModMessage";const Eb=Cb;class Ib extends od{constructor(t){super(),this.header=SL.parseItem(t.header),this.contents=SL.parseItem(t.contents),this.action_id=t.actionId,this.viewer_is_creator=t.viewerIsCreator,this.target_id=t.targetId,this.is_stackable=t.isStackable,this.background_type=t.backgroundType}}Ib.type="LiveChatBanner";const Pb=Ib;class Ab extends od{constructor(t){var e;super(),this.text=new sp(t.text).toString(),this.icon_type=null===(e=t.icon)||void 0===e?void 0:e.iconType,this.context_menu_button=SL.parseItem(t.contextMenuButton)}}Ab.type="LiveChatBannerHeader";const Lb=Ab;class Ob extends od{constructor(t){super(),this.poll_question=new sp(t.pollQuestion),this.author_photo=ip.fromResponse(t.authorPhoto),this.choices=t.pollChoices.map((t=>({option_id:t.pollOptionId,text:new sp(t.text).toString()}))),this.collapsed_state_entity_key=t.collapsedStateEntityKey,this.live_chat_poll_state_entity_key=t.liveChatPollStateEntityKey,this.context_menu_button=SL.parseItem(t.contextMenuButton)}}Ob.type="LiveChatBannerPoll";const Db=Ob;class Mb extends dy{constructor(t){super(t),this.custom_thumbnail=t.customThumbnail?ip.fromResponse(t.customThumbnail):null}}Mb.type="LiveChatAuthorBadge";const Rb=Mb;class Nb extends od{constructor(t){super(),this.id=t.id,this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.header_subtext=new sp(t.headerSubtext),this.author={id:t.authorExternalChannelId,name:new sp(null==t?void 0:t.authorName),thumbnails:ip.fromResponse(t.authorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const e=SL.parseArray(t.authorBadges);this.author.badges=e,this.author.is_moderator=e?e.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.menu_endpoint=new Zd(t.contextMenuEndpoint)}}Nb.type="LiveChatMembershipItem";const Bb=Nb;class Fb extends od{constructor(t){super(),this.message=new sp(t.message),this.author={id:t.authorExternalChannelId,name:new sp(t.authorName),thumbnails:ip.fromResponse(t.authorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const e=SL.parseArray(t.authorBadges,[dy,Rb]);this.author.badges=e,this.author.is_moderator=e?e.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.header_background_color=t.headerBackgroundColor,this.header_text_color=t.headerTextColor,this.body_background_color=t.bodyBackgroundColor,this.body_text_color=t.bodyTextColor,this.purchase_amount=new sp(t.purchaseAmountText).toString(),this.menu_endpoint=new Zd(t.contextMenuEndpoint),this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.timestamp_text=new sp(t.timestampText).toString(),this.id=t.id}}Fb.type="LiveChatPaidMessage";const $b=Fb;class Ub extends od{constructor(t){super(),this.id=t.id,this.author={id:t.authorExternalChannelId,name:new sp(t.authorName),thumbnails:ip.fromResponse(t.authorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const e=SL.parseArray(t.authorBadges,[dy,Rb]);this.author.badges=e,this.author.is_moderator=e?e.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.money_chip_background_color=t.moneyChipBackgroundColor,this.money_chip_text_color=t.moneyChipTextColor,this.background_color=t.backgroundColor,this.author_name_text_color=t.authorNameTextColor,this.sticker=ip.fromResponse(t.sticker),this.purchase_amount=new sp(t.purchaseAmountText).toString(),this.menu_endpoint=new Zd(t.contextMenuEndpoint),this.context_menu=this.menu_endpoint,this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3)}}Ub.type="LiveChatPaidSticker";const jb=Ub;class Vb extends od{constructor(t){super(),this.id=t.id,this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3)}}Vb.type="LiveChatPlaceholderItem";const Hb=Vb;class qb extends od{constructor(t){super(),this.title=t.title,this.accessibility_title=t.accessibilityTitle,this.thumbnail=ip.fromResponse(t.thumbnail),this.price=t.price,this.vendor_name=t.vendorName,this.from_vendor_text=t.fromVendorText,this.information_button=SL.parseItem(t.informationButton),this.endpoint=new Zd(t.onClickCommand),this.creator_message=t.creatorMessage,this.creator_name=t.creatorName,this.author_photo=ip.fromResponse(t.authorPhoto),this.information_dialog=SL.parseItem(t.informationDialog),this.is_verified=t.isVerified,this.creator_custom_message=new sp(t.creatorCustomMessage)}}qb.type="LiveChatProductItem";const Wb=qb;class zb extends od{constructor(t){super(),this.message=new sp(t.message),this.author={id:t.authorExternalChannelId,name:new sp(t.authorName),thumbnails:ip.fromResponse(t.authorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const e=SL.parseArray(t.authorBadges,[dy,Rb]);this.author.badges=e,this.author.is_moderator=e?e.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.menu_endpoint=new Zd(t.contextMenuEndpoint),this.inline_action_buttons=SL.parseArray(t.inlineActionButtons,[lf]),this.timestamp=Math.floor(parseInt(t.timestampUsec)/1e3),this.id=t.id}}zb.type="LiveChatTextMessage";const Gb=zb;class Kb extends od{constructor(t){var e,i;super(),this.author={id:t.authorExternalChannelId,name:new sp(null==t?void 0:t.authorName),thumbnails:ip.fromResponse(t.authorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const n=SL.parseArray(t.authorBadges,[dy,Rb]);this.author.badges=n,this.author.is_moderator=n?n.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=n?n.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=n?n.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.amount=new sp(t.amount),this.duration_sec=t.durationSec,this.full_duration_sec=t.fullDurationSec,this.show_item=SL.parse(null===(i=null===(e=t.showItemEndpoint)||void 0===e?void 0:e.showLiveChatItemEndpoint)||void 0===i?void 0:i.renderer),this.show_item_endpoint=new Zd(t.showItemEndpoint),this.id=t.id}}Kb.type="LiveChatTickerPaidMessageItem";const Yb=Kb;class Xb extends od{constructor(t){var e,i;super(),this.author={id:t.authorExternalChannelId,name:new sp(null==t?void 0:t.authorName),thumbnails:ip.fromResponse(t.authorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const n=SL.parseArray(t.authorBadges,[dy,Rb]);this.author.badges=n,this.author.is_moderator=n?n.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=n?n.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=n?n.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.amount=new sp(t.amount),this.duration_sec=t.durationSec,this.full_duration_sec=t.fullDurationSec,this.show_item=SL.parseItem(null===(i=null===(e=t.showItemEndpoint)||void 0===e?void 0:e.showLiveChatItemEndpoint)||void 0===i?void 0:i.renderer),this.show_item_endpoint=new Zd(t.showItemEndpoint),this.id=t.id}}Xb.type="LiveChatTickerPaidStickerItem";const Qb=Xb;class Jb extends od{constructor(t){super(),this.id=t.id,this.detail=new sp(t.detailText),this.author={id:t.authorExternalChannelId,name:new sp(null==t?void 0:t.authorName),thumbnails:ip.fromResponse(t.sponsorPhoto),badges:ud([]).as(Rb,dy),is_moderator:null,is_verified:null,is_verified_artist:null};const e=SL.parseArray(t.authorBadges,[dy,Rb]);this.author.badges=e,this.author.is_moderator=e?e.some((t=>"MODERATOR"==t.icon_type)):null,this.author.is_verified=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED"==t.style)):null,this.author.is_verified_artist=e?e.some((t=>"BADGE_STYLE_TYPE_VERIFIED_ARTIST"==t.style)):null,this.duration_sec=t.durationSec}}Jb.type="LiveChatTickerSponsorItem";const Zb=Jb;class t_ extends Gb{constructor(t){super(t),delete this.author,delete this.menu_endpoint,this.icon_type=t.icon.iconType,this.action_button=SL.parseItem(t.actionButton)}}t_.type="LiveChatViewerEngagementMessage";const e_=t_;class i_ extends od{constructor(t){super(),this.poll_question=new sp(t.pollQuestion),this.thumbnails=ip.fromResponse(t.thumbnail),this.metadata=new sp(t.metadataText),this.live_chat_poll_type=t.liveChatPollType,this.context_menu_button=SL.parseItem(t.contextMenuButton)}}i_.type="PollHeader";const n_=i_;class r_ extends od{constructor(t){super(),this.id=t.id,this.contents=SL.parse(t.contents),this.target_id=t.targetId}}r_.type="LiveChatActionPanel";const s_=r_;class a_ extends od{constructor(t){super(),this.deleted_state_message=new sp(t.deletedStateMessage),this.target_item_id=t.targetItemId}}a_.type="MarkChatItemAsDeletedAction";const o_=a_;class l_ extends od{constructor(t){super(),this.deleted_state_message=new sp(t.deletedStateMessage),this.channel_id=t.externalChannelId}}l_.type="MarkChatItemsByAuthorAsDeletedAction";const c_=l_;class u_ extends od{constructor(t){super(),this.target_action_id=t.targetActionId}}u_.type="RemoveBannerForLiveChatCommand";const h_=u_;class d_ extends od{constructor(t){super(),this.target_item_id=t.targetItemId}}d_.type="RemoveChatItemAction";const p_=d_;class f_ extends od{constructor(t){super(),this.external_channel_id=t.externalChannelId}}f_.type="RemoveChatItemByAuthorAction";const m_=f_;class g_ extends od{constructor(t){super(),this.target_item_id=t.targetItemId,this.replacement_item=SL.parseItem(t.replacementItem)}}g_.type="ReplaceChatItemAction";const y_=g_;class v_ extends od{constructor(t){var e;super(),this.actions=SL.parseArray(null===(e=t.actions)||void 0===e?void 0:e.map((t=>(delete t.clickTrackingParams,t)))),this.video_offset_time_msec=t.videoOffsetTimeMsec}}v_.type="ReplayChatItemAction";const b_=v_;class __ extends od{constructor(t){super(),this.panel_to_show=SL.parseItem(t.panelToShow,s_)}}__.type="ShowLiveChatActionPanelAction";const w_=__;class T_ extends od{constructor(t){super(),this.dialog=SL.parseItem(t.dialog)}}T_.type="ShowLiveChatDialogAction";const S_=T_;class x_ extends od{constructor(t){super(),this.tooltip=SL.parseItem(t.tooltip)}}x_.type="ShowLiveChatTooltipCommand";const k_=x_;class C_ extends od{constructor(t){super(),this.date_text=new sp(t.dateText).toString()}}C_.type="UpdateDateTextAction";const E_=C_;class I_ extends od{constructor(t){super(),this.description=new sp(t.description)}}I_.type="UpdateDescriptionAction";const P_=I_;class A_ extends od{constructor(t){super(),this.poll_to_update=SL.parseItem(t.pollToUpdate)}}A_.type="UpdateLiveChatPollAction";const L_=A_;class O_ extends od{constructor(t){super(),this.title=new sp(t.title)}}O_.type="UpdateTitleAction";const D_=O_;class M_ extends od{constructor(t){super(),this.default_text=new sp(t.defaultText).toString(),this.toggled_text=new sp(t.toggledText).toString(),this.button_id=t.buttonId}}M_.type="UpdateToggleButtonTextAction";const R_=M_;class N_ extends od{constructor(t){super();const e=t.viewCount.videoViewCountRenderer;this.view_count=new sp(e.viewCount),this.extra_short_view_count=new sp(e.extraShortViewCount),this.is_live=e.isLive}}N_.type="UpdateViewershipAction";const B_=N_;class F_ extends od{constructor(t){super(),this.confirm_button=SL.parseItem(t.confirmButton,lf),this.dialog_messages=t.dialogMessages.map((t=>new sp(t)))}}F_.type="LiveChatDialog";const $_=F_;class U_ extends od{constructor(t){super(),this.overflow_menu=SL.parseItem(t.overflowMenu),this.collapse_button=SL.parseItem(t.collapseButton),this.view_selector=SL.parseItem(t.viewSelector)}}U_.type="LiveChatHeader";const j_=U_;class V_ extends od{constructor(t){super(),this.max_items_to_display=t.maxItemsToDisplay,this.more_comments_below_button=SL.parseItem(t.moreCommentsBelowButton)}}V_.type="LiveChatItemList";const H_=V_;class q_ extends od{constructor(t){super(),this.author_name=new sp(t.authorName),this.author_photo=ip.fromResponse(t.authorPhoto),this.send_button=SL.parseItem(t.sendButton),this.target_id=t.targetId}}q_.type="LiveChatMessageInput";const W_=q_;class z_ extends od{constructor(t){super(),this.name=new sp(t.authorName),this.photo=ip.fromResponse(t.authorPhoto),this.badges=SL.parse(t.authorBadges)}}z_.type="LiveChatParticipant";const G_=z_;class K_ extends od{constructor(t){super(),this.title=new sp(t.title),this.participants=SL.parseArray(t.participants)}}K_.type="LiveChatParticipantsList";const Y_=K_;class X_ extends od{constructor(t){super(),this.title=new sp(t.title),this.time_description=new sp(t.timeDescription),this.thumbnail=ip.fromResponse(t.thumbnail),this.on_tap_endpoint=new Zd(t.onTap),this.layout=t.layout,this.is_highlighted=t.isHighlighted}}X_.type="MacroMarkersListItem";const Q_=X_;class J_ extends od{constructor(t){var e,i;super(),this.items=SL.parseArray(t.items),this.top_level_buttons=SL.parseArray(t.topLevelButtons),this.label=(null===(i=null===(e=t.accessibility)||void 0===e?void 0:e.accessibilityData)||void 0===i?void 0:i.label)||null}get contents(){return this.items}}J_.type="Menu";const Z_=J_;class tw extends lf{constructor(t){super(t)}}tw.type="MenuNavigationItem";const ew=tw;class iw extends lf{constructor(t){super(t)}}iw.type="MenuServiceItem";const nw=iw;class rw extends od{constructor(t){super(),this.has_separator=t.hasSeparator,this.endpoint=new Zd(t.navigationEndpoint||t.serviceEndpoint)}}rw.type="MenuServiceItemDownload";const sw=rw;class aw extends od{constructor(t){super(),this.header=SL.parse(t.header),this.sections=SL.parse(t.sections),this.style=t.style}}aw.type="MultiPageMenu";const ow=aw;class lw extends od{constructor(t){super(),this.items=SL.parse(t.items)}get contents(){return this.items}}lw.type="MultiPageMenuNotificationSection";const cw=lw;class uw extends od{constructor(t){super()}}uw.type="MusicMenuItemDivider";const hw=uw;class dw extends od{constructor(t){var e;super(),this.title=new sp(null===(e=t.title.musicMenuTitleRenderer)||void 0===e?void 0:e.primaryText).text,this.options=SL.parseArray(t.options,[op,hw])}}dw.type="MusicMultiSelectMenu";const pw=dw;class fw extends od{constructor(t){super(),this.title=new sp(t.title),this.buttons=SL.parse(t.buttons)}}fw.type="SimpleMenuHeader";const mw=fw;class gw extends od{constructor(t){super(),this.title=t.title,this.description=t.description,this.thumbnails=ip.fromResponse(t.thumbnail),this.price=t.price,this.vendor_name=t.vendorName,this.button_text=t.buttonText,this.button_accessibility_text=t.buttonAccessibilityText,this.from_vendor_text=t.fromVendorText,this.additional_fees_text=t.additionalFeesText,this.region_format=t.regionFormat,this.endpoint=new Zd(t.buttonCommand)}}gw.type="MerchandiseItem";const yw=gw;class vw extends od{constructor(t){super(),this.title=t.title,this.menu=SL.parse(t.actionButton),this.items=SL.parse(t.items)}get contents(){return this.items}}vw.type="MerchandiseShelf";const bw=vw;class _w extends od{constructor(t){super(),this.title=new sp(t.title),this.contents=t.contents.map((t=>new sp(t)))}}_w.type="MetadataRow";const ww=_w;class Tw extends od{constructor(t){super(),this.rows=SL.parseArray(t.rows),this.collapsed_item_count=t.collapsedItemCount}}Tw.type="MetadataRowContainer";const Sw=Tw;class xw extends od{constructor(t){super(),this.content=new sp(t.content),this.has_divider_line=t.hasDividerLine}}xw.type="MetadataRowHeader";const kw=xw;class Cw extends od{constructor(t){super(),this.section_list=SL.parseItem(t)}}Cw.type="MetadataScreen";const Ew=Cw;class Iw extends od{constructor(t){super(),this.url_canonical=t.urlCanonical,this.title=t.title,this.description=t.description,this.thumbnail=t.thumbnail?ip.fromResponse(t.thumbnail):null,this.site_name=t.siteName,this.app_name=t.appName,this.android_package=t.androidPackage,this.ios_app_store_id=t.iosAppStoreId,this.ios_app_arguments=t.iosAppArguments,this.og_type=t.ogType,this.url_applinks_web=t.urlApplinksWeb,this.url_applinks_ios=t.urlApplinksIos,this.url_applinks_android=t.urlApplinksAndroid,this.url_twitter_ios=t.urlTwitterIos,this.url_twitter_android=t.urlTwitterAndroid,this.twitter_card_type=t.twitterCardType,this.twitter_site_handle=t.twitterSiteHandle,this.schema_dot_org_type=t.schemaDotOrgType,this.noindex=t.noindex,this.is_unlisted=t.unlisted,this.is_family_safe=t.familySafe,this.tags=t.tags,this.available_countries=t.availableCountries}}Iw.type="MicroformatData";const Pw=Iw;class Aw extends ry{constructor(t){super(t)}}Aw.type="Mix";const Lw=Aw;class Ow extends od{constructor(t){var e,i,n;super();const r=(null===(e=t.thumbnailOverlays.find((t=>t.thumbnailOverlayTimeStatusRenderer)))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=t.videoId,this.title=new sp(t.title),this.description_snippet=t.descriptionSnippet?new sp(t.descriptionSnippet):null,this.top_metadata_items=new sp(t.topMetadataItems),this.thumbnails=ip.fromResponse(t.thumbnail),this.thumbnail_overlays=SL.parse(t.thumbnailOverlays),this.author=new Qp(t.longBylineText,t.ownerBadges,null===(n=null===(i=t.channelThumbnailSupportedRenderers)||void 0===i?void 0:i.channelThumbnailWithLinkRenderer)||void 0===n?void 0:n.thumbnail),this.duration={text:t.lengthText?new sp(t.lengthText).text:new sp(r).text,seconds:Ld(t.lengthText?new sp(t.lengthText).text:new sp(r).text)},this.endpoint=new Zd(t.navigationEndpoint),this.badges=SL.parse(t.badges),this.use_vertical_poster=t.useVerticalPoster,this.show_action_menu=t.showActionMenu,this.menu=SL.parse(t.menu)}}Ow.type="Movie";const Dw=Ow;class Mw extends od{constructor(t){var e;return super(),null===(e=t.movingThumbnailDetails)||void 0===e?void 0:e.thumbnails.map((t=>new ip(t))).sort(((t,e)=>e.width-t.width))}}Mw.type="MovingThumbnail";const Rw=Mw;class Nw extends od{constructor(t){super(),this.marker_key=t.key,this.value={},t.value.heatmap&&(this.value.heatmap=SL.parseItem(t.value.heatmap)),t.value.chapters&&(this.value.chapters=SL.parseArray(t.value.chapters))}}Nw.type="Marker";class Bw extends od{constructor(t){var e;super(),this.markers_map=ud((null===(e=t.markersMap)||void 0===e?void 0:e.map((t=>new Nw(t))))||[])}}Bw.type="MultiMarkersPlayerBar";const Fw=Bw;class $w extends od{constructor(t){var e;super(),this.endpoint=new Zd(t.playNavigationEndpoint),this.play_icon_type=t.playIcon.iconType,this.pause_icon_type=t.pauseIcon.iconType,t.accessibilityPlayData&&(this.play_label=t.accessibilityPlayData.accessibilityData.label),t.accessibilityPlayData&&(this.pause_label=null===(e=t.accessibilityPauseData)||void 0===e?void 0:e.accessibilityData.label),this.icon_color=t.iconColor}}$w.type="MusicPlayButton";const Uw=$w;class jw extends od{constructor(t){super(),this.content=SL.parseItem(t.content,Uw),this.content_position=t.contentPosition,this.display_style=t.displayStyle}}jw.type="MusicItemThumbnailOverlay";const Vw=jw;class Hw extends od{constructor(t){var e,i,n,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,b,_,w,T;switch(super(),this.title=new sp(t.title),this.endpoint=new Zd(t.navigationEndpoint),this.id=(null===(i=null===(e=this.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||(null===(r=null===(n=this.endpoint)||void 0===n?void 0:n.payload)||void 0===r?void 0:r.videoId),this.subtitle=new sp(t.subtitle),this.badges=SL.parse(t.subtitleBadges),null===(l=null===(o=null===(a=null===(s=this.endpoint)||void 0===s?void 0:s.payload)||void 0===a?void 0:a.browseEndpointContextSupportedConfigs)||void 0===o?void 0:o.browseEndpointContextMusicConfig)||void 0===l?void 0:l.pageType){case"MUSIC_PAGE_TYPE_ARTIST":this.item_type="artist";break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist";break;case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album";break;default:"/next"===(null===(u=null===(c=this.endpoint)||void 0===c?void 0:c.metadata)||void 0===u?void 0:u.api_url)?this.item_type="endpoint":(null===(h=this.subtitle.runs)||void 0===h?void 0:h[0])?"Song"!==this.subtitle.runs[0].text?this.item_type="video":this.item_type="song":this.endpoint?this.item_type="endpoint":this.item_type="unknown"}if("artist"==this.item_type)this.subscribers=(null===(p=null===(d=this.subtitle.runs)||void 0===d?void 0:d.find((t=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(t.text))))||void 0===p?void 0:p.text)||"";else if("playlist"==this.item_type){const t=null===(f=this.subtitle.runs)||void 0===f?void 0:f.find((t=>t.text.match(/\d+ songs|song/)));this.item_count=t?t.text:null}else if("album"==this.item_type){const t=null===(m=this.subtitle.runs)||void 0===m?void 0:m.filter((t=>{var e,i;return null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));t&&(this.artists=t.map((t=>{var e,i;return{name:t.text,channel_id:null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:t.endpoint}}))),this.year=null===(g=this.subtitle.runs)||void 0===g?void 0:g.slice(-1)[0].text,isNaN(Number(this.year))&&delete this.year}else if("video"==this.item_type){this.views=(null===(v=null===(y=null==this?void 0:this.subtitle.runs)||void 0===y?void 0:y.find((t=>null==t?void 0:t.text.match(/(.*?) views/))))||void 0===v?void 0:v.text)||"N/A";const t=null===(b=this.subtitle.runs)||void 0===b?void 0:b.find((t=>{var e,i,n;return null===(n=null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||void 0===n?void 0:n.startsWith("UC")}));t&&(this.author={name:null==t?void 0:t.text,channel_id:null===(w=null===(_=null==t?void 0:t.endpoint)||void 0===_?void 0:_.payload)||void 0===w?void 0:w.browseId,endpoint:null==t?void 0:t.endpoint})}else if("song"==this.item_type){const t=null===(T=this.subtitle.runs)||void 0===T?void 0:T.filter((t=>{var e,i;return null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));t&&(this.artists=t.map((t=>{var e,i;return{name:null==t?void 0:t.text,channel_id:null===(i=null===(e=null==t?void 0:t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:null==t?void 0:t.endpoint}})))}this.thumbnail=ip.fromResponse(t.thumbnailRenderer.musicThumbnailRenderer.thumbnail),this.thumbnail_overlay=SL.parseItem(t.thumbnailOverlay,Vw),this.menu=SL.parseItem(t.menu,Z_)}}Hw.type="MusicTwoRowItem";const qw=Hw;class Ww extends od{constructor(t){super(),this.title=new sp(t.text),this.display_priority=t.displayPriority}}Ww.type="musicResponsiveListItemFlexColumnRenderer";const zw=Ww;class Gw extends od{constructor(t){super(),this.title=new sp(t.text),this.display_priority=t.displayPriority}}Gw.type="musicResponsiveListItemFlexColumnRenderer";const Kw=Gw;var Yw,Xw,Qw,Jw,Zw,tT,eT,iT,nT,rT,sT,aT,oT=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},lT=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class cT extends od{constructor(t){var e,i,n,r,s,a,o;switch(super(),Yw.add(this),Xw.set(this,void 0),Qw.set(this,void 0),Jw.set(this,void 0),oT(this,Xw,SL.parseArray(t.flexColumns,zw),"f"),oT(this,Qw,SL.parseArray(t.fixedColumns,Kw),"f"),oT(this,Jw,{video_id:(null===(e=null==t?void 0:t.playlistItemData)||void 0===e?void 0:e.videoId)||null,playlist_set_video_id:(null===(i=null==t?void 0:t.playlistItemData)||void 0===i?void 0:i.playlistSetVideoId)||null},"f"),this.endpoint=t.navigationEndpoint?new Zd(t.navigationEndpoint):null,null===(a=null===(s=null===(r=null===(n=this.endpoint)||void 0===n?void 0:n.payload)||void 0===r?void 0:r.browseEndpointContextSupportedConfigs)||void 0===s?void 0:s.browseEndpointContextMusicConfig)||void 0===a?void 0:a.pageType){case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album",lT(this,Yw,"m",sT).call(this);break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist",lT(this,Yw,"m",aT).call(this);break;case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_USER_CHANNEL":this.item_type="artist",lT(this,Yw,"m",nT).call(this);break;case"MUSIC_PAGE_TYPE_LIBRARY_ARTIST":this.item_type="library_artist",lT(this,Yw,"m",rT).call(this);break;default:lT(this,Xw,"f")[1]?lT(this,Yw,"m",tT).call(this):lT(this,Yw,"m",Zw).call(this)}t.index&&(this.index=new sp(t.index)),this.thumbnails=t.thumbnail?ip.fromResponse(null===(o=t.thumbnail.musicThumbnailRenderer)||void 0===o?void 0:o.thumbnail):[],this.badges=SL.parseArray(t.badges),this.menu=SL.parseItem(t.menu,Z_),this.overlay=SL.parseItem(t.overlay,Vw)}}Xw=new WeakMap,Qw=new WeakMap,Jw=new WeakMap,Yw=new WeakSet,Zw=function(){this.title=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString(),this.endpoint?this.item_type="endpoint":this.item_type="unknown"},tT=function(){var t;(null===(t=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===t?void 0:t.some((t=>t.text.match(/(.*?) views/))))?(this.item_type="video",lT(this,Yw,"m",iT).call(this)):(this.item_type="song",lT(this,Yw,"m",eT).call(this))},eT=function(){var t,e,i,n,r,s,a,o,l,c,u,h,d;this.id=lT(this,Jw,"f").video_id||(null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.videoId),this.title=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString();const p=(null===(n=null===(i=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===i?void 0:i.find((t=>/^\d+$/.test(t.text.replace(/:/g,"")))))||void 0===n?void 0:n.text)||(null===(a=null===(s=null===(r=lT(this,Qw,"f"))||void 0===r?void 0:r[0])||void 0===s?void 0:s.key("title").instanceof(sp))||void 0===a?void 0:a.toString());p&&(this.duration={text:p,seconds:Ld(p)});const f=(null===(o=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===o?void 0:o.find((t=>{var e,i;return null===(i=null===(e=Reflect.get(t,"endpoint"))||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("MPR")})))||(null===(c=null===(l=lT(this,Xw,"f")[2])||void 0===l?void 0:l.key("title").instanceof(sp).runs)||void 0===c?void 0:c.find((t=>{var e,i;return null===(i=null===(e=Reflect.get(t,"endpoint"))||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("MPR")})));f&&(this.album={id:null===(h=null===(u=f.endpoint)||void 0===u?void 0:u.payload)||void 0===h?void 0:h.browseId,name:f.text,endpoint:f.endpoint});const m=null===(d=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===d?void 0:d.filter((t=>{var e,i;return null===(i=null===(e=Reflect.get(t,"endpoint"))||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));m&&(this.artists=m.map((t=>{var e,i;return{name:t.text,channel_id:null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:t.endpoint}})))},iT=function(){var t,e,i,n,r,s,a,o;this.id=lT(this,Jw,"f").video_id,this.title=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString(),this.views=null===(e=null===(t=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===t?void 0:t.find((t=>t.text.match(/(.*?) views/))))||void 0===e?void 0:e.text;const l=null===(i=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===i?void 0:i.filter((t=>{var e,i;return null===(i=null===(e=Reflect.get(t,"endpoint"))||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));l&&(this.authors=l.map((t=>{var e,i;return{name:t.text,channel_id:null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:t.endpoint}})));const c=(null===(r=null===(n=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===n?void 0:n.find((t=>/^\d+$/.test(t.text.replace(/:/g,"")))))||void 0===r?void 0:r.text)||(null===(o=null===(a=null===(s=lT(this,Qw,"f")[0])||void 0===s?void 0:s.key("title").instanceof(sp).runs)||void 0===a?void 0:a.find((t=>/^\d+$/.test(t.text.replace(/:/g,"")))))||void 0===o?void 0:o.text);c&&(this.duration={text:c,seconds:Ld(c)})},nT=function(){var t,e,i,n;this.id=null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.browseId,this.name=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString(),this.subtitle=lT(this,Xw,"f")[1].key("title").instanceof(sp),this.subscribers=(null===(n=null===(i=this.subtitle.runs)||void 0===i?void 0:i.find((t=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(t.text))))||void 0===n?void 0:n.text)||""},rT=function(){var t,e,i;this.name=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString(),this.subtitle=lT(this,Xw,"f")[1].key("title").instanceof(sp),this.song_count=(null===(i=null===(e=null===(t=this.subtitle)||void 0===t?void 0:t.runs)||void 0===e?void 0:e.find((t=>/^\d+(,\d+)? songs?$/i.test(t.text))))||void 0===i?void 0:i.text)||""},sT=function(){var t,e,i,n,r,s,a;this.id=null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.browseId,this.title=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString();const o=null===(i=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===i?void 0:i.find((t=>{var e,i;return null===(i=null===(e=Reflect.get(t,"endpoint"))||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));o&&(this.author={name:o.text,channel_id:null===(r=null===(n=o.endpoint)||void 0===n?void 0:n.payload)||void 0===r?void 0:r.browseId,endpoint:o.endpoint}),this.year=null===(a=null===(s=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===s?void 0:s.find((t=>/^[12][0-9]{3}$/.test(t.text))))||void 0===a?void 0:a.text},aT=function(){var t,e,i,n,r,s;this.id=null===(e=null===(t=this.endpoint)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.browseId,this.title=lT(this,Xw,"f")[0].key("title").instanceof(sp).toString();const a=null===(i=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===i?void 0:i.find((t=>t.text.match(/\d+ (song|songs)/)));this.item_count=a?a.text:void 0;const o=null===(n=lT(this,Xw,"f")[1].key("title").instanceof(sp).runs)||void 0===n?void 0:n.find((t=>{var e,i;return null===(i=null===(e=Reflect.get(t,"endpoint"))||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));o&&(this.author={name:o.text,channel_id:null===(s=null===(r=o.endpoint)||void 0===r?void 0:r.payload)||void 0===s?void 0:s.browseId,endpoint:o.endpoint})},cT.type="MusicResponsiveListItem";const uT=cT;class hT extends od{constructor(t){super(),this.contents=ip.fromResponse(t.thumbnail)}}hT.type="MusicThumbnail";const dT=hT;class pT extends od{constructor(t){super(),t.strapline&&(this.strapline=new sp(t.strapline)),this.title=new sp(t.title),t.thumbnail&&(this.thumbnail=SL.parseItem(t.thumbnail,dT)),t.moreContentButton&&(this.more_content=SL.parseItem(t.moreContentButton,lf)),t.endIcons&&(this.end_icons=SL.parseArray(t.endIcons,Zv))}}pT.type="MusicCarouselShelfBasicHeader";const fT=pT;class mT extends od{constructor(t){super(),this.button_text=new sp(t.buttonText).toString(),this.endpoint=new Zd(t.clickCommand)}}mT.type="MusicNavigationButton";const gT=mT;class yT extends od{constructor(t){super(),this.header=SL.parseItem(t.header,fT),this.contents=SL.parseArray(t.contents,[qw,uT,gT]),this.num_items_per_column=Reflect.has(t,"numItemsPerColumn")?parseInt(t.numItemsPerColumn):null}}yT.type="MusicCarouselShelf";const vT=yT;class bT extends od{constructor(t){super(),this.description=new sp(t.description),this.max_collapsed_lines&&(this.max_collapsed_lines=t.maxCollapsedLines),this.max_expanded_lines&&(this.max_expanded_lines=t.maxExpandedLines),this.footer=new sp(t.footer)}}bT.type="MusicDescriptionShelf";const _T=bT;class wT extends od{constructor(t){var e,i,n,r,s,a,o,l,c;super(),this.title=new sp(t.title),this.description=new sp(t.description),this.subtitle=new sp(t.subtitle),this.second_subtitle=new sp(t.secondSubtitle),this.year=(null===(i=null===(e=this.subtitle.runs)||void 0===e?void 0:e.find((t=>/^[12][0-9]{3}$/.test(t.text))))||void 0===i?void 0:i.text)||"",this.song_count=(null===(r=null===(n=this.second_subtitle.runs)||void 0===n?void 0:n[0])||void 0===r?void 0:r.text)||"",this.total_duration=(null===(a=null===(s=this.second_subtitle.runs)||void 0===s?void 0:s[2])||void 0===a?void 0:a.text)||"",this.thumbnails=ip.fromResponse(t.thumbnail.croppedSquareThumbnailRenderer.thumbnail),this.badges=SL.parse(t.subtitleBadges);const u=null===(o=this.subtitle.runs)||void 0===o?void 0:o.find((t=>{var e,i;return null===(i=null===(e=null==t?void 0:t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId.startsWith("UC")}));u&&(this.author={name:u.text,channel_id:null===(c=null===(l=u.endpoint)||void 0===l?void 0:l.payload)||void 0===c?void 0:c.browseId,endpoint:u.endpoint}),this.menu=SL.parse(t.menu)}}wT.type="MusicDetailHeader";const TT=wT;class ST extends od{constructor(t){super(),this.playlist_id=t.playlistId,this.supported_download_states=t.supportedDownloadStates}}ST.type="MusicDownloadStateBadge";const xT=ST;class kT extends od{constructor(t){super(),this.header=SL.parse(t.header)}}kT.type="MusicEditablePlaylistDetailHeader";const CT=kT;class ET extends od{constructor(t){super(),this.element=Reflect.has(t,"elementRenderer")?SL.parseItem(t,My):null}}ET.type="MusicElementHeader";const IT=ET;class PT extends od{constructor(t){super(),t.header&&(this.header=SL.parse(t.header)),t.title&&(this.title=new sp(t.title))}}PT.type="MusicHeader";const AT=PT;class LT extends od{constructor(t){super(),this.title=new sp(t.title),this.description=new sp(t.description),this.thumbnail=SL.parseItem(t.thumbnail,dT)}}LT.type="MusicImmersiveHeader";const OT=LT;class DT extends od{constructor(t){super(),this.icon_type=t.icon.iconType,this.label=t.accessibilityData.accessibilityData.label}}DT.type="MusicInlineBadge";const MT=DT;class RT{constructor(t){this.icon_name=t.iconName,this.endpoint=new Zd(t.onTap),this.a11y_text=t.a11yText,this.style=t.style}}RT.type="ActionButton";class NT{constructor(t){this.image=t.image.image.sources,this.content_mode=t.image.contentMode,this.crop_options=t.image.cropOptions,this.image_aspect_ratio=t.imageAspectRatio,this.caption=t.caption,this.action_buttons=t.actionButtons.map((t=>new RT(t)))}}NT.type="Panel";class BT extends od{constructor(t){super(),this.header=t.shelf.header,this.panels=t.shelf.panels.map((t=>new NT(t)))}}BT.type="MusicLargeCardItemCarousel";const FT=BT;class $T extends od{constructor(t){var e,i,n;super(),this.playlist_id=t.playlistId,this.contents=SL.parseArray(t.contents,uT),this.collapsed_item_count=t.collapsedItemCount,this.continuation=(null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===n?void 0:n.continuation)||null}}$T.type="MusicPlaylistShelf";const UT=$T;class jT extends od{constructor(t){var e,i,n,r,s,a;super(),this.title=t.title,this.title_text=new sp(t.titleText),this.contents=SL.parseArray(t.contents),this.playlist_id=t.playlistId,this.is_infinite=t.isInfinite,this.continuation=(null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextRadioContinuationData)||void 0===n?void 0:n.continuation)||(null===(a=null===(s=null===(r=t.continuations)||void 0===r?void 0:r[0])||void 0===s?void 0:s.nextContinuationData)||void 0===a?void 0:a.continuation),this.is_editable=t.isEditable,this.preview_description=t.previewDescription,this.num_items_to_show=t.numItemsToShow}}jT.type="PlaylistPanel";const VT=jT;class HT extends od{constructor(t){super(),this.content=SL.parseItem(t.content,VT)}}HT.type="MusicQueue";const qT=HT;class WT extends od{constructor(t){var e,i,n,r;super(),this.title=new sp(t.title),this.contents=SL.parseArray(t.contents,uT),t.bottomEndpoint&&(this.endpoint=new Zd(t.bottomEndpoint)),t.continuations&&(this.continuation=(null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData)||void 0===i?void 0:i.continuation)||(null===(r=null===(n=t.continuations)||void 0===n?void 0:n[0].reloadContinuationData)||void 0===r?void 0:r.continuation)),t.bottomText&&(this.bottom_text=new sp(t.bottomText)),t.bottomButton&&(this.bottom_button=SL.parseItem(t.bottomButton)),t.subheaders&&(this.subheaders=SL.parseArray(t.subheaders))}}WT.type="MusicShelf";const zT=WT;class GT extends od{constructor(t){super(),t.startItems&&(this.start_items=SL.parseArray(t.startItems)),t.endItems&&(this.end_items=SL.parseArray(t.endItems))}}GT.type="MusicSideAlignedItem";const KT=GT;class YT extends od{constructor(t){var e;super(),this.title=new sp(t.title).text,this.icon_type=(null===(e=t.icon)||void 0===e?void 0:e.icon_type)||null,this.menu=SL.parseItem(t.menu,pw)}}YT.type="MusicSortFilterButton";const XT=YT;class QT extends od{constructor(t){var e,i;super(),this.title=new sp(t.title),this.thumbnails=t.thumbnail?ip.fromResponse(null===(e=t.thumbnail.musicThumbnailRenderer)||void 0===e?void 0:e.thumbnail):[],this.menu=SL.parseItem(t.menu,Z_),this.foreground_thumbnails=t.foregroundThumbnail?ip.fromResponse(null===(i=t.foregroundThumbnail.musicThumbnailRenderer)||void 0===i?void 0:i.thumbnail):[]}}QT.type="MusicVisualHeader";const JT=QT;class ZT extends od{constructor(t){super(),this.thumbnails=ip.fromResponse(t.thumbnail),this.video_thumbnails=ip.fromResponse(t.videoThumbnail),this.short_message=new sp(t.shortMessage),this.sent_time=new sp(t.sentTimeText),this.notification_id=t.notificationId,this.endpoint=new Zd(t.navigationEndpoint),this.record_click_endpoint=new Zd(t.recordClickEndpoint),this.menu=SL.parse(t.contextualMenu),this.read=t.read}}ZT.type="Notification";const tS=ZT;class eS extends od{constructor(t){super(),this.header_text=new sp(t.headerText).toString(),this.body_text=new sp(t.bodyText).toString(),this.page_title=new sp(t.pageTitle).toString(),this.header_icon_type=t.headerIcon.iconType}}eS.type="PageIntroduction";const iS=eS;class nS extends od{constructor(t){super(),this.featured_channel={start_time_ms:t.featuredChannel.startTimeMs,end_time_ms:t.featuredChannel.endTimeMs,watermark:ip.fromResponse(t.featuredChannel.watermark),channel_name:t.featuredChannel.channelName,endpoint:new Zd(t.featuredChannel.navigationEndpoint),subscribe_button:SL.parse(t.featuredChannel.subscribeButton)},this.allow_swipe_dismiss=t.allowSwipeDismiss,this.annotation_id=t.annotationId}}nS.type="PlayerAnnotationsExpanded";const rS=nS;class sS extends od{constructor(t){super(),this.caption_tracks=t.captionTracks.map((t=>({base_url:t.baseUrl,name:new sp(t.name),vss_id:t.vssId,language_code:t.languageCode,kind:t.kind,is_translatable:t.isTranslatable}))),this.audio_tracks=t.audioTracks.map((t=>({audio_track_id:t.audioTrackId,captions_initial_state:t.captionsInitialState,default_caption_track_index:t.defaultCaptionTrackIndex,has_default_track:t.hasDefaultTrack,visibility:t.visibility,caption_track_indices:t.captionTrackIndices}))),this.default_audio_track_index=t.defaultAudioTrackIndex,this.translation_languages=t.translationLanguages.map((t=>({language_code:t.languageCode,language_name:new sp(t.languageName)})))}}sS.type="PlayerCaptionsTracklist";const aS=sS;class oS extends od{constructor(t){var e;super(),this.subreason=new sp(t.subreason),this.reason=new sp(t.reason),this.proceed_button=SL.parseItem(t.proceedButton,lf),this.thumbnails=ip.fromResponse(t.thumbnail),this.icon_type=(null===(e=t.icon)||void 0===e?void 0:e.iconType)||null}}oS.type="PlayerErrorMessage";const lS=oS;class cS extends od{constructor(t){super(),this.title=t.itemTitle,this.thumbnail=t.itemThumbnail,this.offer_description=t.offerDescription,this.offer_id=t.offerId}}cS.type="PlayerLegacyDesktopYpcOffer";const uS=cS;class hS extends od{constructor(){super()}}hS.type="PlayerLiveStoryboardSpec";const dS=hS;class pS extends od{constructor(t){var e;super(),this.title=new sp(t.title),this.description=new sp(t.description),this.thumbnails=ip.fromResponse(t.thumbnail),t.embed?this.embed={iframe_url:t.embed.iframeUrl,flash_url:t.embed.flashUrl,flash_secure_url:t.embed.flashSecureUrl,width:t.embed.width,height:t.embed.height}:this.embed=null,this.length_seconds=parseInt(t.lengthSeconds),this.channel={id:t.externalChannelId,name:t.ownerChannelName,url:t.ownerProfileUrl},this.is_family_safe=!!t.isFamilySafe,this.is_unlisted=!!t.isUnlisted,this.has_ypc_metadata=!!t.hasYpcMetadata,this.view_count=parseInt(t.viewCount),this.category=t.category,this.publish_date=t.publishDate,this.upload_date=t.uploadDate,this.available_countries=t.availableCountries,this.start_timestamp=(null===(e=t.liveBroadcastDetails)||void 0===e?void 0:e.startTimestamp)?new Date(t.liveBroadcastDetails.startTimestamp):null}}pS.type="PlayerMicroformat";const fS=pS;class mS extends od{constructor(t){super(),this.results=SL.parseArray(t.results,[Xy,Ky]),this.title=new sp(t.title).toString()}}mS.type="WatchNextEndScreen";const gS=mS;class yS extends od{constructor(t){super(),this.title=new sp(t.title),this.video_id=t.videoId,this.video_title=new sp(t.videoTitle),this.short_view_count=new sp(t.shortViewCountText),this.prefer_immediate_redirect=t.preferImmediateRedirect,this.count_down_secs_for_fullscreen=t.countDownSecsForFullscreen,this.published=new sp(t.publishedTimeText),this.background=ip.fromResponse(t.background),this.thumbnail_overlays=SL.parse(t.thumbnailOverlays),this.author=new Qp(t.byline),this.cancel_button=SL.parseItem(t.cancelButton,lf),this.next_button=SL.parseItem(t.nextButton,lf),this.close_button=SL.parseItem(t.closeButton,lf)}}yS.type="PlayerOverlayAutoplay";const vS=yS;class bS extends od{constructor(t){super(),this.end_screen=SL.parseItem(t.endScreen,gS),this.autoplay=SL.parseItem(t.autoplay,vS),this.share_button=SL.parseItem(t.shareButton,lf),this.add_to_menu=SL.parseItem(t.addToMenu,Z_),this.fullscreen_engagement=SL.parse(t.fullscreenEngagement),this.actions=SL.parseArray(t.actions),this.browser_media_session=SL.parseItem(t.browserMediaSession),this.decorated_player_bar=SL.parseItem(t.decoratedPlayerBarRenderer)}}bS.type="PlayerOverlay";const _S=bS;class wS extends od{constructor(t){super();const e=t.spec.split("|"),i=new URL(e.shift());this.boards=e.map(((t,e)=>{const[n,r,s,a,o,l,c,u]=t.split("#");i.searchParams.set("sigh",u);const h=Math.ceil(parseInt(s,10)/(parseInt(a,10)*parseInt(o,10)));return{template_url:i.toString().replace("$L",e).replace("$N",c),thumbnail_width:parseInt(n,10),thumbnail_height:parseInt(r,10),thumbnail_count:parseInt(s,10),interval:parseInt(l,10),columns:parseInt(a,10),rows:parseInt(o,10),storyboard_count:h}}))}}wS.type="PlayerStoryboardSpec";const TS=wS;class SS extends od{constructor(t){super(),this.thumbnail=ip.fromResponse(t.thumbnail)}}SS.type="PlaylistCustomThumbnail";const xS=SS;class kS extends od{constructor(t){super(),this.id=t.playlistId,this.title=new sp(t.title),this.stats=t.stats.map((t=>new sp(t))),this.brief_stats=t.briefStats.map((t=>new sp(t))),this.author=new iy(Object.assign(Object.assign({},t.ownerText),{navigationEndpoint:t.ownerEndpoint}),t.ownerBadges,null),this.description=new sp(t.descriptionText),this.num_videos=new sp(t.numVideosText),this.view_count=new sp(t.viewCountText),this.can_share=t.shareData.canShare,this.can_delete=t.editableDetails.canDelete,this.is_editable=t.isEditable,this.privacy=t.privacy,this.save_button=SL.parse(t.saveButton),this.shuffle_play_button=SL.parse(t.shufflePlayButton),this.menu=SL.parse(t.moreActionsMenu),this.banner=SL.parseItem(t.playlistHeaderBanner)}}kS.type="PlaylistHeader";const CS=kS;class ES extends od{constructor(t){super(),this.title=new sp(t.playlistTitle),this.thumbnails=ip.fromResponse(t.thumbnail),this.video_count=new sp(t.playlistVideoCount),this.channel_name=new sp(t.channelName),this.endpoint=new Zd(t.action)}}ES.type="PlaylistInfoCardContent";const IS=ES;class PS extends od{constructor(t){super(),this.title=t.title,this.description=t.description||null}}PS.type="PlaylistMetadata";const AS=PS;class LS extends od{constructor(t){var e,i,n,r,s;super(),this.title=new sp(t.title),this.thumbnail=ip.fromResponse(t.thumbnail),this.endpoint=new Zd(t.navigationEndpoint),this.selected=t.selected,this.video_id=t.videoId,this.duration={text:new sp(t.lengthText).toString(),seconds:Ld(new sp(t.lengthText).toString())};const a=null===(e=new sp(t.longBylineText).runs)||void 0===e?void 0:e.find((t=>{var e,i,n;return null===(n=null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||void 0===n?void 0:n.startsWith("MPR")})),o=null===(i=new sp(t.longBylineText).runs)||void 0===i?void 0:i.filter((t=>{var e,i,n;return null===(n=null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId)||void 0===n?void 0:n.startsWith("UC")}));this.author=new sp(t.shortBylineText).toString(),a&&(this.album={id:null===(r=null===(n=a.endpoint)||void 0===n?void 0:n.payload)||void 0===r?void 0:r.browseId,name:a.text,year:null===(s=new sp(t.longBylineText).runs)||void 0===s?void 0:s.slice(-1)[0].text,endpoint:a.endpoint}),o&&(this.artists=o.map((t=>{var e,i;return{name:t.text,channel_id:null===(i=null===(e=t.endpoint)||void 0===e?void 0:e.payload)||void 0===i?void 0:i.browseId,endpoint:t.endpoint}}))),this.badges=SL.parseArray(t.badges),this.menu=SL.parseItem(t.menu),this.set_video_id=t.playlistSetVideoId}}LS.type="PlaylistPanelVideo";const OS=LS;class DS extends od{constructor(t){var e;super(),this.primary=SL.parseItem(t.primaryRenderer),this.counterpart=(null===(e=t.counterpart)||void 0===e?void 0:e.map((t=>SL.parseItem(t.counterpartRenderer))))||[]}}DS.type="PlaylistPanelVideoWrapper";const MS=DS;class RS extends od{constructor(t){super(),this.items=SL.parse(t.items)}get contents(){return this.items}}RS.type="PlaylistSidebar";const NS=RS;class BS extends od{constructor(t){super(),this.stats=t.stats.map((t=>new sp(t))),this.thumbnail_renderer=SL.parse(t.thumbnailRenderer),this.title=new sp(t.title),this.menu=SL.parseItem(t.menu),this.endpoint=new Zd(t.navigationEndpoint),this.description=new sp(t.description)}}BS.type="PlaylistSidebarPrimaryInfo";const FS=BS;class $S extends od{constructor(t){super(),this.owner=SL.parse(t.videoOwner)||null,this.button=SL.parse(t.button)||null}}$S.type="PlaylistSidebarSecondaryInfo";const US=$S;class jS extends od{constructor(t){super(),this.text=new sp(t.text).toString(),this.style=t.style}}jS.type="ThumbnailOverlayTimeStatus";const VS=jS;class HS extends od{constructor(t){super(),this.id=t.videoId,this.index=new sp(t.index),this.title=new sp(t.title),this.author=new iy(t.shortBylineText),this.thumbnails=ip.fromResponse(t.thumbnail),this.thumbnail_overlays=SL.parseArray(t.thumbnailOverlays),this.set_video_id=null==t?void 0:t.setVideoId,this.endpoint=new Zd(t.navigationEndpoint),this.is_playable=t.isPlayable,this.menu=SL.parseItem(t.menu);const e=t.upcomingEventData&&Number(`${t.upcomingEventData.startTime}000`);e&&(this.upcoming=new Date(e)),this.duration={text:new sp(t.lengthText).text,seconds:parseInt(t.lengthSeconds)}}get is_live(){var t;return"LIVE"===(null===(t=this.thumbnail_overlays.firstOfType(VS))||void 0===t?void 0:t.style)}get is_upcoming(){var t;return"UPCOMING"===(null===(t=this.thumbnail_overlays.firstOfType(VS))||void 0===t?void 0:t.style)}}HS.type="PlaylistVideo";const qS=HS;class WS extends od{constructor(t){super(),this.id=t.playlistId,this.is_editable=t.isEditable,this.can_reorder=t.canReorder,this.videos=SL.parse(t.contents)}}WS.type="PlaylistVideoList";const zS=WS;class GS extends od{constructor(t){super(),this.thumbnail=ip.fromResponse(t.thumbnail)}}GS.type="PlaylistVideoThumbnail";const KS=GS;class YS extends od{constructor(t){super(),this.choices=t.choices.map((t=>({text:new sp(t.text),select_endpoint:t.selectServiceEndpoint?new Zd(t.selectServiceEndpoint):null,deselect_endpoint:t.deselectServiceEndpoint?new Zd(t.deselectServiceEndpoint):null,vote_ratio_if_selected:(null==t?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_selected:new sp(t.votePercentageIfSelected),vote_ratio_if_not_selected:(null==t?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_not_selected:new sp(t.votePercentageIfSelected),image:t.image?ip.fromResponse(t.image):null}))),t.type&&(this.poll_type=t.type),t.totalVotes&&(this.total_votes=new sp(t.totalVotes)),t.liveChatPollId&&(this.live_chat_poll_id=t.liveChatPollId)}}YS.type="Poll";const XS=YS;class QS extends Zp{constructor(t){super(t)}}QS.type="Post";const JS=QS;class ZS extends od{constructor(t){super(),this.images=SL.parseArray(t.images,zp)}}ZS.type="PostMultiImage";const tx=ZS;class ex extends od{constructor(t){super(),this.items=SL.parse(t.items)}get contents(){return this.items}}ex.type="ProfileColumn";const ix=ex;class nx extends od{constructor(t){super(),this.items=SL.parseArray(t.items)}get contents(){return this.items}}nx.type="ProfileColumnStats";const rx=nx;class sx extends od{constructor(t){super(),this.label=new sp(t.label),this.value=new sp(t.value)}}sx.type="ProfileColumnStatsEntry";const ax=sx;class ox extends od{constructor(t){super(),this.title=new sp(t.title),this.thumbnails=ip.fromResponse(t.thumbnail)}}ox.type="ProfileColumnUserInfo";const lx=ox;class cx extends od{constructor(t){super(),this.title=new sp(t.title),this.subtitle=new sp(t.subtitle),this.avatars=t.avatars.map((t=>new ip(t))),this.button=SL.parseItem(t.button,lf),this.surface=t.surface}}cx.type="RecognitionShelf";const ux=cx;class hx extends od{constructor(t){super(),this.id=t.videoId,this.title=new sp(t.headline),this.thumbnails=ip.fromResponse(t.thumbnail),this.views=new sp(t.viewCountText),this.endpoint=new Zd(t.navigationEndpoint)}}hx.type="ReelItem";const dx=hx;class px extends od{constructor(t){super(),this.title=new sp(t.title),this.items=SL.parse(t.items),this.endpoint=t.endpoint?new Zd(t.endpoint):null}get contents(){return this.items}}px.type="ReelShelf";const fx=px;class mx extends od{constructor(t){super(),this.content=SL.parse(t.content)}}mx.type="RelatedChipCloud";const gx=mx;class yx extends od{constructor(t){super(),this.header=SL.parseItem(t.header),this.contents=SL.parseArray(t.contents)}}yx.type="RichGrid";const vx=yx;class bx extends od{constructor(t){super(),this.content=SL.parseItem(t.content)}}bx.type="RichItem";const _x=bx;class wx extends od{constructor(t){var e,i;super(),this.title=new sp(t.title),this.subtitle=new sp(t.subtitle),this.title_style=null===(e=null==t?void 0:t.titleStyle)||void 0===e?void 0:e.style,this.icon_type=null===(i=null==t?void 0:t.icon)||void 0===i?void 0:i.iconType}}wx.type="RichListHeader";const Tx=wx;class Sx extends od{constructor(t){var e,i;super(),this.thumbnail=ip.fromResponse(t.thumbnail),this.title=new sp(t.title),this.subtitle=new sp(t.subtitle),this.call_to_action=new sp(t.callToAction),(null===(e=t.callToActionIcon)||void 0===e?void 0:e.iconType)&&(this.icon_type=null===(i=t.callToActionIcon)||void 0===i?void 0:i.iconType),this.endpoint=new Zd(t.endpoint)}}Sx.type="RichMetadata";const xx=Sx;class kx extends od{constructor(t){super(),this.contents=SL.parseArray(t.contents)}}kx.type="RichMetadataRow";const Cx=kx;class Ex extends od{constructor(t){super(),this.content=SL.parseItem(t.content)}}Ex.type="RichSection";const Ix=Ex;class Px extends od{constructor(t){super(),this.title=new sp(t.title),this.contents=SL.parseArray(t.contents),this.endpoint=t.endpoint?new Zd(t.endpoint):null}}Px.type="RichShelf";const Ax=Px;class Lx extends od{constructor(t){super(),this.endpoint=new Zd(t.endpoint),this.search_button=SL.parse(t.searchButton),this.clear_button=SL.parse(t.clearButton),this.placeholder_text=new sp(t.placeholderText)}}Lx.type="SearchBox";const Ox=Lx;class Dx extends od{constructor(t){super(),this.label=new sp(t.label),this.endpoint=new Zd(t.endpoint),this.tooltip=t.tooltip}}Dx.type="SearchFilter";const Mx=Dx;class Rx extends od{constructor(t){super(),this.title=new sp(t.title),this.filters=LE.parseArray(t.filters,Mx)}}Rx.type="SearchFilterGroup";const Nx=Rx;class Bx extends od{constructor(t){super(),this.thumbnails=ip.fromResponse(t.thumbnail),this.endpoint=new Zd(t.searchEndpoint),this.query=new sp(t.query).toString()}}Bx.type="SearchRefinementCard";const Fx=Bx;class $x extends od{constructor(t){var e,i,n,r,s,a,o,l,c,u;super(),this.text=new sp(t.defaultText),this.toggled_text=new sp(t.toggledText),this.tooltip=t.defaultTooltip,this.toggled_tooltip=t.toggledTooltip,this.is_toggled=t.isToggled,this.is_disabled=t.isDisabled,this.icon_type=t.defaultIcon.iconType;const h=(null===(n=null===(i=null===(e=null==t?void 0:t.defaultText)||void 0===e?void 0:e.accessibility)||void 0===i?void 0:i.accessibilityData)||void 0===n?void 0:n.label)||(null===(s=null===(r=null==t?void 0:t.accessibilityData)||void 0===r?void 0:r.accessibilityData)||void 0===s?void 0:s.label)||(null===(a=null==t?void 0:t.accessibility)||void 0===a?void 0:a.label);"LIKE"==this.icon_type&&(this.like_count=parseInt(h.replace(/\D/g,"")),this.short_like_count=new sp(t.defaultText).toString()),this.endpoint=(null===(l=null===(o=t.defaultServiceEndpoint)||void 0===o?void 0:o.commandExecutorCommand)||void 0===l?void 0:l.commands)?new Zd(t.defaultServiceEndpoint.commandExecutorCommand.commands.pop()):new Zd(t.defaultServiceEndpoint),this.toggled_endpoint=new Zd(t.toggledServiceEndpoint),this.button_id=(null===(u=null===(c=t.toggleButtonSupportedData)||void 0===c?void 0:c.toggleButtonIdData)||void 0===u?void 0:u.id)||null,this.target_id=t.targetId||null}}$x.type="ToggleButton";const Ux=$x;class jx extends od{constructor(t){super(),this.title=new sp(t.title),this.groups=SL.parseArray(t.groups,Nx),this.button=SL.parseItem(t.button,Ux)}}jx.type="SearchSubMenu";const Vx=jx;class Hx extends od{constructor(t){super(),this.contents=SL.parse(t.contents)}}Hx.type="SearchSuggestionsSection";const qx=Hx;class Wx extends od{constructor(t){super(),this.contents=SL.parse(t.contents)}}Wx.type="SecondarySearchContainer";const zx=Wx;class Gx extends od{constructor(t){super(),t.targetId&&(this.target_id=t.targetId),this.contents=SL.parseArray(t.contents),t.continuations&&(t.continuations[0].nextContinuationData?this.continuation=t.continuations[0].nextContinuationData.continuation:t.continuations[0].reloadContinuationData&&(this.continuation=t.continuations[0].reloadContinuationData.continuation)),t.header&&(this.header=SL.parse(t.header)),t.subMenu&&(this.sub_menu=SL.parseItem(t.subMenu))}}Gx.type="SectionList";const Kx=Gx;class Yx extends od{constructor(t){super(),this.like_button=SL.parseItem(t.likeButton,[Ux,lf]),this.dislike_button=SL.parseItem(t.dislikeButton,[Ux,lf])}}Yx.type="SegmentedLikeDislikeButton";const Xx=Yx;class Qx extends od{constructor(t){super(),t.title&&(this.title=new sp(t.title)),t.summary&&(this.summary=new sp(t.summary)),t.enableServiceEndpoint&&(this.enable_endpoint=new Zd(t.enableServiceEndpoint)),t.disableServiceEndpoint&&(this.disable_endpoint=new Zd(t.disableServiceEndpoint)),this.item_id=t.itemId}}Qx.type="SettingBoolean";const Jx=Qx;class Zx extends od{constructor(t){super(),this.title=new sp(t.title),this.help_text=new sp(t.helpText),this.enabled=t.enabled,this.disabled=t.disabled,this.id=t.id}}Zx.type="SettingsCheckbox";const tk=Zx;class ek extends od{constructor(t){super(),this.title=new sp(t.title),this.subtitle=new sp(t.subtitle),this.enabled=t.enabled,this.enable_endpoint=new Zd(t.enableServiceEndpoint),this.disable_endpoint=new Zd(t.disableServiceEndpoint)}}ek.type="SettingsSwitch";const ik=ek;class nk extends od{constructor(t){super(),this.title=new sp(t.title),Reflect.has(t,"text")&&(this.text=new sp(t.text).toString()),Reflect.has(t,"options")&&(this.options=SL.parseArray(t.options,[ik,Yd,Ty,tk,Bf]))}}nk.type="SettingsOptions";const rk=nk;class sk extends od{constructor(t){super(),this.title=new sp(t.title),this.items=SL.parseArray(t.items,ey)}get contents(){return this.items}}sk.type="SettingsSidebar";const ak=sk;class ok extends od{constructor(t){super(),this.thumbnail=ip.fromResponse(t.thumbnail),this.content=new sp(t.content),this.published=new sp(t.publishedTimeText),this.menu=LE.parseItem(t.actionMenu,Z_),this.original_post=LE.parseItem(t.originalPost,Zp),this.id=t.postId,this.endpoint=new Zd(t.navigationEndpoint),this.expand_button=LE.parseItem(t.expandButton,lf),this.author=new Qp(t.displayName,void 0)}}ok.type="SharedPost";const lk=ok;class ck extends od{constructor(t){var e,i;super(),this.title=new sp(t.title),t.endpoint&&(this.endpoint=new Zd(t.endpoint)),this.content=SL.parseItem(t.content)||null,(null===(e=t.icon)||void 0===e?void 0:e.iconType)&&(this.icon_type=null===(i=t.icon)||void 0===i?void 0:i.iconType),t.menu&&(this.menu=SL.parseItem(t.menu))}}ck.type="Shelf";const uk=ck;class hk extends od{constructor(t){super(),this.corrected_query=new sp(t.correctedQuery),this.endpoint=new Zd(t.correctedQueryEndpoint),this.original_query_endpoint=new Zd(t.originalQueryEndpoint)}}hk.type="ShowingResultsFor";const dk=hk;class pk extends od{constructor(t){super(),this.image=ip.fromResponse(t.image),this.title=new sp(t.title),this.display_domain=new sp(t.displayDomain),this.show_link_icon=t.showLinkIcon,this.call_to_action=t.callToAction,this.endpoint=new Zd(t.command)}}pk.type="SimpleCardContent";const fk=pk;class mk extends od{constructor(t){super(),this.message=new sp(t.message),this.prominent=t.prominent}}mk.type="SimpleCardTeaser";const gk=mk;class yk extends od{constructor(t){super(),this.lines=t.lines.map((t=>new sp(t))),this.style=t.layoutStyle}}yk.type="SimpleTextSection";const vk=yk;class bk extends od{constructor(t){super(),this.action_text=new sp(t.actionText),this.nav_text=new sp(t.navigationText),this.details=new sp(t.detailsText),this.icon_type=t.icon.iconType,this.endpoint=new Zd(t.navigationEndpoint)}}bk.type="SingleActionEmergencySupport";const _k=bk;class wk extends od{constructor(t){super(),this.title=t.title||"N/A",this.selected=t.selected||!1,this.endpoint=new Zd(t.endpoint),this.content=SL.parseItem(t.content,[Kx,qT,vx])}}wk.type="Tab";const Tk=wk;class Sk extends od{constructor(t){super(),this.tabs=SL.parseArray(t.tabs,Tk)}}Sk.type="SingleColumnBrowseResults";const xk=Sk;class kk extends od{constructor(t){super(),this.contents=SL.parse(t)}}kk.type="SingleColumnMusicWatchNextResults";const Ck=kk;class Ek extends od{constructor(t){super(),this.thumbnails=ip.fromResponse(t.thumbnail),this.style=t.style}}Ek.type="SingleHeroImage";const Ik=Ek;class Pk extends od{constructor(t){super(),this.thumbnail=ip.fromResponse(t.thumbnail),this.title=new sp(t.title),this.endpoint=new Zd(t.navigationEndpoint),this.subscribe_button=SL.parseItem(t.subscribeButton,nb)}}Pk.type="SlimOwner";const Ak=Pk;class Lk extends od{constructor(t){super(),this.title=new sp(t.title),this.collapsed_subtitle=new sp(t.collapsedSubtitle),this.expanded_subtitle=new sp(t.expandedSubtitle),this.owner=SL.parseItem(t.owner),this.description=new sp(t.description),this.video_id=t.videoId,this.date=new sp(t.dateText)}}Lk.type="SlimVideoMetadata";const Ok=Lk;class Dk extends od{constructor(t){var e,i,n;super(),t.title&&(this.title=t.title),(null===(e=t.icon)||void 0===e?void 0:e.iconType)&&(this.icon_type=t.icon.iconType),(null===(n=null===(i=t.accessibility)||void 0===i?void 0:i.accessibilityData)||void 0===n?void 0:n.label)&&(this.label=t.accessibility.accessibilityData.label),t.tooltip&&(this.tooltip=t.tooltip),t.subMenuItems&&(this.sub_menu_items=t.subMenuItems.map((t=>{var e,i;return{title:t.title,selected:t.selected,continuation:null===(i=null===(e=t.continuation)||void 0===e?void 0:e.reloadContinuationData)||void 0===i?void 0:i.continuation,endpoint:new Zd(t.serviceEndpoint||t.navigationEndpoint),subtitle:t.subtitle||null}})))}}Dk.type="SortFilterSubMenu";const Mk=Dk;class Rk extends od{constructor(t){super(),this.name=new sp(t.name),this.is_selected=t.isSelected,this.endpoint=new Zd(t.navigationEndpoint)}}Rk.type="SubFeedOption";const Nk=Rk;class Bk extends od{constructor(t){super(),this.title=new sp(t.title),this.options=SL.parse(t.options)}}Bk.type="SubFeedSelector";const Fk=Bk;class $k extends od{constructor(t){super(),this.contents=SL.parse(t)}}$k.type="Tabbed";const Uk=$k;class jk extends od{constructor(t){super(),this.tabs=SL.parseArray(t.tabs,Tk)}}jk.type="TabbedSearchResults";const Vk=jk;class Hk extends od{constructor(t){super(),this.title=new sp(t.title),this.style=t.style}}Hk.type="TextHeader";const qk=Hk;class Wk extends od{constructor(t){super(),this.landscape=ip.fromResponse(t.landscape),this.portrait=ip.fromResponse(t.portrait)}}Wk.type="ThumbnailLandscapePortrait";const zk=Wk;class Gk extends od{constructor(t){super(),this.icon_type=t.icon.iconType}}Gk.type="ThumbnailOverlayBottomPanel";const Kk=Gk;class Yk extends od{constructor(t){super(),this.text=new sp(t.text).toString()}}Yk.type="ThumbnailOverlayEndorsement";const Xk=Yk;class Qk extends od{constructor(t){super(),this.text=new sp(t.text),this.icon_type=t.icon.iconType}}Qk.type="ThumbnailOverlayHoverText";const Jk=Qk;class Zk extends od{constructor(t){super(),this.text=new sp(t.text).toString(),this.icon_type=t.icon.iconType}}Zk.type="ThumbnailOverlayInlineUnplayable";const tC=Zk;class eC extends od{constructor(t){super(),this.text=new sp(t.text)}}eC.type="ThumbnailOverlayLoadingPreview";const iC=eC;class nC extends od{constructor(t){super(),this.text=new sp(t.text).toString()}}nC.type="ThumbnailOverlayNowPlaying";const rC=nC;class sC extends od{constructor(t){super(),this.hack=t.hack}}sC.type="ThumbnailOverlayPinking";const aC=sC;class oC extends od{constructor(t){super(),this.text=t.texts.map((t=>new sp(t)))[0].toString()}}oC.type="ThumbnailOverlayPlaybackStatus";const lC=oC;class cC extends od{constructor(t){super(),this.percent_duration_watched=t.percentDurationWatched}}cC.type="ThumbnailOverlayResumePlayback";const uC=cC;class hC extends od{constructor(t){super(),this.text=new sp(t.text),this.icon_type=t.icon.iconType}}hC.type="ThumbnailOverlaySidePanel";const dC=hC;class pC extends od{constructor(t){super(),this.is_toggled=t.isToggled||null,this.icon_type={toggled:t.toggledIcon.iconType,untoggled:t.untoggledIcon.iconType},this.tooltip={toggled:t.toggledTooltip,untoggled:t.untoggledTooltip},this.toggled_endpoint=new Zd(t.toggledServiceEndpoint),this.untoggled_endpoint=new Zd(t.untoggledServiceEndpoint)}}pC.type="ThumbnailOverlayToggleButton";const fC=pC;class mC extends od{constructor(t){super(),this.visible_time_range_start_millis=t.visibleTimeRangeStartMillis,this.visible_time_range_end_millis=t.visibleTimeRangeEndMillis,this.decoration_time_millis=t.decorationTimeMillis,this.label=new sp(t.label),this.icon=t.icon}}mC.type="TimedMarkerDecoration";const gC=mC;class yC extends od{constructor(t){super(),this.title=new sp(t.title)}}yC.type="TitleAndButtonListHeader";const vC=yC;class bC extends od{constructor(t){super(),this.text=new sp(t.defaultText),this.toggled_text=new sp(t.toggledText),this.icon_type=t.defaultIcon.iconType,this.toggled_icon_type=t.toggledIcon.iconType,this.endpoint=new Zd(t.toggledServiceEndpoint)}}bC.type="ToggleMenuServiceItem";const _C=bC;class wC extends od{constructor(t){super(),this.promo_config={promo_id:t.promoConfig.promoId,impression_endpoints:t.promoConfig.impressionEndpoints.map((t=>new Zd(t))),accept:new Zd(t.promoConfig.acceptCommand),dismiss:new Zd(t.promoConfig.dismissCommand)},this.target_id=t.targetId,this.details=new sp(t.detailsText),this.suggested_position=t.suggestedPosition.type,this.dismiss_stratedy=t.dismissStrategy.type,this.dwell_time_ms=parseInt(t.dwellTimeMs)}}wC.type="Tooltip";const TC=wC;class SC extends od{constructor(t){var e;super(),this.title=new sp(t.title),this.avatar=ip.fromResponse(null!==(e=t.thumbnail)&&void 0!==e?e:t.avatar),this.subtitle=new sp(t.subtitle),this.subscribe_button=SL.parseItem(t.subscribeButton,nb),this.endpoint=new Zd(t.navigationEndpoint)}}SC.type="TopicChannelDetails";const xC=SC;class kC extends od{constructor(t){super(),this.tabs=SL.parse(t.tabs),this.secondary_contents=SL.parse(t.secondaryContents)}}kC.type="TwoColumnBrowseResults";const CC=kC;class EC extends od{constructor(t){super(),this.primary_contents=SL.parse(t.primaryContents),this.secondary_contents=SL.parse(t.secondaryContents)}}EC.type="TwoColumnSearchResults";const IC=EC;var PC,AC,LC=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class OC extends od{constructor(t){var e,i,n,r,s;super(),PC.add(this),this.results=SL.parseArray(null===(e=t.results)||void 0===e?void 0:e.results.contents),this.secondary_results=SL.parseArray(null===(i=t.secondaryResults)||void 0===i?void 0:i.secondaryResults.results),this.conversation_bar=SL.parseItem(null==t?void 0:t.conversationBar);const a=null===(n=t.playlist)||void 0===n?void 0:n.playlist;a&&(this.playlist={id:a.playlistId,title:a.title,author:(null===(r=a.shortBylineText)||void 0===r?void 0:r.simpleText)?new sp(a.shortBylineText):new iy(a.longBylineText),contents:SL.parseArray(a.contents),current_index:a.currentIndex,is_infinite:!!a.isInfinite,menu:SL.parseItem(a.menu)});const o=null===(s=t.autoplay)||void 0===s?void 0:s.autoplay;o&&(this.autoplay={sets:o.sets.map((t=>LC(this,PC,"m",AC).call(this,t)))},o.modifiedSets&&(this.autoplay.modified_sets=o.modifiedSets.map((t=>LC(this,PC,"m",AC).call(this,t)))),o.countDownSecs&&(this.autoplay.count_down_secs=o.countDownSecs))}}PC=new WeakSet,AC=function(t){const e={autoplay_video:new Zd(t.autoplayVideo)};return t.nextButtonVideo&&(e.next_button_video=new Zd(t.nextButtonVideo)),e},OC.type="TwoColumnWatchNextResults";const DC=OC;class MC extends od{constructor(t){super(),this.header=SL.parseItem(t.header),this.call_to_action=SL.parseItem(t.callToAction),this.sections=SL.parseArray(t.sections),t.collapsedLabel&&(this.collapsed_label=new sp(t.collapsedLabel))}}MC.type="UniversalWatchCard";const RC=MC;class NC extends od{constructor(t){super(),this.message_title=new sp(t.dialogMessageTitle),this.message_text=new sp(t.dialogMessageText),this.action_button=SL.parseItem(t.actionButton),this.dismiss_button=SL.parseItem(t.dismissButton),this.is_visible=t.isVisible}}NC.type="UpsellDialog";const BC=NC;class FC extends od{constructor(t){super(),this.items=SL.parse(t.items),this.collapsed_item_count=t.collapsedItemCount,this.collapsed_state_button_text=new sp(t.collapsedStateButtonText)}get contents(){return this.items}}FC.type="VerticalList";const $C=FC;class UC extends od{constructor(t){super(),this.items=SL.parseArray(t.items),this.contents=this.items,this.view_all_text=new sp(t.viewAllText),this.view_all_endpoint=new Zd(t.viewAllEndpoint)}}UC.type="VerticalWatchCardList";const jC=UC;class VC extends od{constructor(t){var e,i,n,r;super();const s=(null===(e=t.thumbnailOverlays.find((t=>t.thumbnailOverlayTimeStatusRenderer)))||void 0===e?void 0:e.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=t.videoId,this.title=new sp(t.title),this.description_snippet=t.descriptionSnippet?new sp(t.descriptionSnippet):null,this.snippets=(null===(i=t.detailedMetadataSnippets)||void 0===i?void 0:i.map((t=>({text:new sp(t.snippetText),hover_text:new sp(t.snippetHoverText)}))))||[],this.expandable_metadata=SL.parseItem(t.expandableMetadata),this.thumbnails=ip.fromResponse(t.thumbnail),this.thumbnail_overlays=SL.parseArray(t.thumbnailOverlays),this.rich_thumbnail=t.richThumbnail?SL.parseItem(t.richThumbnail):null,this.author=new Qp(t.ownerText,t.ownerBadges,null===(r=null===(n=t.channelThumbnailSupportedRenderers)||void 0===n?void 0:n.channelThumbnailWithLinkRenderer)||void 0===r?void 0:r.thumbnail),this.badges=SL.parseArray(t.badges,dy),this.endpoint=new Zd(t.navigationEndpoint),this.published=new sp(t.publishedTimeText),this.view_count=new sp(t.viewCountText),this.short_view_count=new sp(t.shortViewCountText);const a=t.upcomingEventData&&Number(`${t.upcomingEventData.startTime}000`);a&&(this.upcoming=new Date(a)),this.duration={text:t.lengthText?new sp(t.lengthText).text:new sp(s).text,seconds:Ld(t.lengthText?new sp(t.lengthText).text:new sp(s).text)},this.show_action_menu=t.showActionMenu,this.is_watched=t.isWatched||!1,this.menu=SL.parseItem(t.menu,Z_),this.search_video_result_entity_key=t.searchVideoResultEntityKey}get description(){var t;return this.snippets.length>0?this.snippets.map((t=>t.text.toString())).join(""):(null===(t=this.description_snippet)||void 0===t?void 0:t.toString())||""}get is_live(){return this.badges.some((t=>{if("BADGE_STYLE_TYPE_LIVE_NOW"===t.style||"LIVE"===t.label)return!0}))}get is_upcoming(){return this.upcoming&&this.upcoming>new Date}get is_premiere(){return this.badges.some((t=>"PREMIERE"===t.label))}get is_4k(){return this.badges.some((t=>"4K"===t.label))}get has_captions(){return this.badges.some((t=>"CC"===t.label))}get best_thumbnail(){return this.thumbnails[0]}}VC.type="Video";const HC=VC;class qC extends HC{constructor(t){super(t)}}qC.type="VideoCard";const WC=qC;class zC extends od{constructor(t){super(),this.title=new sp(t.videoTitle),this.channel_name=new sp(t.channelName),this.view_count=new sp(t.viewCountText),this.video_thumbnails=ip.fromResponse(t.videoThumbnail),this.duration=new sp(t.lengthString),this.endpoint=new Zd(t.action)}}zC.type="VideoInfoCardContent";const GC=zC;class KC extends od{constructor(t){super(),this.subscription_button=t.subscriptionButton||null,this.subscriber_count=new sp(t.subscriberCountText),this.author=new Qp(Object.assign(Object.assign({},t.title),{navigationEndpoint:t.navigationEndpoint}),t.badges,t.thumbnail)}}KC.type="VideoOwner";const YC=KC;class XC extends od{constructor(t){var e,i,n,r;super(),this.title=new sp(t.title),this.super_title_link=new sp(t.superTitleLink),this.view_count=new sp(null===(i=null===(e=t.viewCount)||void 0===e?void 0:e.videoViewCountRenderer)||void 0===i?void 0:i.viewCount),this.short_view_count=new sp(null===(r=null===(n=t.viewCount)||void 0===n?void 0:n.videoViewCountRenderer)||void 0===r?void 0:r.shortViewCount),this.badges=SL.parseArray(t.badges,dy),this.published=new sp(t.dateText),this.relative_date=new sp(t.relativeDateText),this.menu=SL.parseItem(t.videoActions,Z_)}}XC.type="VideoPrimaryInfo";const QC=XC;var JC,ZC;class tE extends od{constructor(t){super(),JC.add(this),this.owner=SL.parseItem(t.owner),this.description=new sp(t.description),Reflect.has(t,"attributedDescription")&&(this.description=new sp(function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}(this,JC,"m",ZC).call(this,t.attributedDescription))),this.subscribe_button=SL.parseItem(t.subscribeButton,[nb,lf]),this.metadata=SL.parseItem(t.metadataRowContainer,Sw),this.show_more_text=t.showMoreText,this.show_less_text=t.showLessText,this.default_expanded=t.defaultExpanded,this.description_collapsed_lines=t.descriptionCollapsedLines}}JC=new WeakSet,ZC=function(t){const e=[],i=t.content,n=t.commandRuns;let r=0;if(n){for(const s of n){const n=s.length,a=s.startIndex;if(a>r&&e.push({text:i.slice(r,a)}),Reflect.has(s,"onTap")){let r=null;if(Reflect.has(t,"attachmentRuns")){const e=t.attachmentRuns;for(const t of e)if(t.startIndex-2==a){r=t;break}}r?e.push({text:i.slice(a,a+n),navigationEndpoint:s.onTap,attachment:r}):e.push({text:i.slice(a,a+n),navigationEndpoint:s.onTap})}r=a+n}r<i.length&&e.push({text:i.slice(r)})}else e.push({text:i});return{runs:e}},tE.type="VideoSecondaryInfo";const eE=tE;class iE extends od{constructor(t){super(),this.title=new sp(t.title),this.subtitle=new sp(t.subtitle),this.duration={text:new sp(t.lengthText).toString(),seconds:Ld(t.lengthText.simpleText)},this.style=t.style}}iE.type="WatchCardCompactVideo";const nE=iE;class rE extends od{constructor(t){var e;super(),this.endpoint=new Zd(t.navigationEndpoint),this.call_to_action_button=SL.parseItem(t.callToActionButton),this.hero_image=SL.parseItem(t.heroImage),this.label=(null===(e=t.lengthText)||void 0===e?void 0:e.accessibility.accessibilityData.label)||""}}rE.type="WatchCardHeroVideo";const sE=rE;class aE extends od{constructor(t){super(),this.title=new sp(t.title),this.title_endpoint=new Zd(t.titleNavigationEndpoint),this.subtitle=new sp(t.subtitle),this.author=new Qp(t,t.titleBadge?[t.titleBadge]:null,t.avatar),this.author.name=this.title.toString(),this.style=t.style}}aE.type="WatchCardRichHeader";const oE=aE;class lE extends od{constructor(t){super(),this.lists=SL.parseArray(t.lists)}}lE.type="WatchCardSectionSequence";const cE=lE;class uE extends CC{constructor(t){super(t)}}uE.type="WatchNextTabbedResults";const hE=uE;class dE extends od{constructor(t){var e,i;super(),this.title=t.title,this.content=SL.parseItem(t.content),this.endpoint=new Zd(t.navigationEndpoint),this.category_assets={asset_key:null===(e=t.categoryAssets)||void 0===e?void 0:e.assetKey,background_color:null===(i=t.categoryAssets)||void 0===i?void 0:i.backgroundColor},this.category_type=t.categoryType}}dE.type="AnchoredSection";const pE=dE;class fE extends od{constructor(t){super(),this.category_tabs=SL.parseArray(t.categoryTabs),this.privacy_button=SL.parseItem(t.privacyButtonRenderer)}}fE.type="kidsCategoriesHeader";const mE=fE;class gE extends od{constructor(t){var e,i;super(),this.title=new sp(t.title),this.category_assets={asset_key:null===(e=t.categoryAssets)||void 0===e?void 0:e.assetKey,background_color:null===(i=t.categoryAssets)||void 0===i?void 0:i.backgroundColor},this.category_type=t.categoryType,this.endpoint=new Zd(t.endpoint)}}gE.type="KidsCategoryTab";const yE=gE;class vE extends od{constructor(t){super(),this.anchors=SL.parseArray(t.anchors)}}vE.type="kidsHomeScreen";const bE=vE,_E={AccountChannel:hp,AccountItemSection:gp,AccountItemSectionHeader:pp,AccountSectionList:vp,AppendContinuationItemsAction:_p,OpenPopupAction:Tp,Alert:xp,AnalyticsMainAppKeyMetrics:Ip,AnalyticsRoot:Ap,AnalyticsShortsCarouselCard:Op,AnalyticsVideo:Mp,AnalyticsVodCarouselCard:Np,CtaGoToCreatorStudio:Fp,DataModelSection:Cp,StatRow:Up,AudioOnlyPlayability:Vp,AutomixPreviewVideo:qp,BackstageImage:zp,BackstagePost:Zp,BackstagePostThread:ef,BrowseFeedActions:rf,BrowserMediaSession:af,Button:lf,C4TabbedHeader:uf,CallToActionButton:df,Card:ff,CardCollection:gf,CarouselHeader:vf,CarouselItem:_f,Channel:Tf,ChannelAboutFullMetadata:xf,ChannelAgeGate:Cf,ChannelFeaturedContent:If,ChannelHeaderLinks:Lf,ChannelMetadata:Df,ChannelMobileHeader:Rf,ChannelOptions:Bf,ChannelSubMenu:$f,ChannelThumbnailWithLink:jf,ChannelVideoPlayer:Hf,Chapter:Wf,ChildVideo:Gf,ChipCloud:Qf,ChipCloudChip:Yf,CollaboratorInfoCardContent:Zf,CollageHeroImage:em,AuthorCommentBadge:rm,Comment:Tg,CommentActionButtons:xg,CommentDialog:Cg,CommentReplies:Ig,CommentReplyDialog:am,CommentsEntryPointHeader:Ag,CommentsHeader:Og,CommentSimplebox:Mg,CommentThread:Hg,CreatorHeart:Wg,EmojiPicker:Gg,PdgCommentChip:Yg,SponsorCommentBadge:Qg,CompactChannel:Zg,CompactLink:ey,CompactMix:ay,CompactPlaylist:ly,CompactStation:uy,CompactVideo:fy,ConfirmDialog:gy,ContinuationItem:Ng,ConversationBar:_y,CopyLink:Ty,CreatePlaylistDialog:Qd,DecoratedPlayerBar:xy,DefaultPromoPanel:Cy,DidYouMean:Iy,DownloadButton:Ay,Dropdown:Yd,DropdownItem:Gd,Element:My,EmergencyOnebox:Ny,EmojiPickerCategory:Fy,EmojiPickerCategoryButton:Uy,EmojiPickerUpsellCategory:Vy,Endscreen:qy,EndscreenElement:zy,EndScreenPlaylist:Ky,EndScreenVideo:Xy,ExpandableMetadata:Jy,ExpandableTab:tv,ExpandedShelfContents:iv,FeedFilterChipBar:rv,FeedTabbedHeader:av,GameCard:lv,GameDetails:uv,Grid:dv,GridChannel:fv,GridHeader:gv,GridPlaylist:vv,GridVideo:_v,GuideCollapsibleEntry:Tv,GuideCollapsibleSectionEntry:xv,GuideDownloadsEntry:Iv,GuideEntry:Cv,GuideSection:Av,GuideSubscriptionsSection:Ov,HashtagHeader:Mv,Heatmap:Nv,HeatMarker:Fv,HeroPlaylistThumbnail:Uv,HighlightsCarousel:Hv,HistorySuggestion:Gv,HorizontalCardList:Yv,HorizontalList:Qv,IconLink:Zv,InteractiveTabbedHeader:sb,ItemSection:ob,ItemSectionHeader:cb,ItemSectionTab:hb,ItemSectionTabbedHeader:pb,LikeButton:mb,LiveChat:yb,AddBannerToLiveChatCommand:bb,AddChatItemAction:wb,AddLiveChatTickerItemAction:Sb,DimChatItemAction:kb,LiveChatAutoModMessage:Eb,LiveChatBanner:Pb,LiveChatBannerHeader:Lb,LiveChatBannerPoll:Db,LiveChatMembershipItem:Bb,LiveChatPaidMessage:$b,LiveChatPaidSticker:jb,LiveChatPlaceholderItem:Hb,LiveChatProductItem:Wb,LiveChatRestrictedParticipation:class extends od{constructor(t){var e;super(),this.message=new sp(t.message),this.icon_type=null===(e=null==t?void 0:t.icon)||void 0===e?void 0:e.iconType}},LiveChatTextMessage:Gb,LiveChatTickerPaidMessageItem:Yb,LiveChatTickerPaidStickerItem:Qb,LiveChatTickerSponsorItem:Zb,LiveChatViewerEngagementMessage:e_,PollHeader:n_,LiveChatActionPanel:s_,MarkChatItemAsDeletedAction:o_,MarkChatItemsByAuthorAsDeletedAction:c_,RemoveBannerForLiveChatCommand:h_,RemoveChatItemAction:p_,RemoveChatItemByAuthorAction:m_,ReplaceChatItemAction:y_,ReplayChatItemAction:b_,ShowLiveChatActionPanelAction:w_,ShowLiveChatDialogAction:S_,ShowLiveChatTooltipCommand:k_,UpdateDateTextAction:E_,UpdateDescriptionAction:P_,UpdateLiveChatPollAction:L_,UpdateTitleAction:D_,UpdateToggleButtonTextAction:R_,UpdateViewershipAction:B_,LiveChatAuthorBadge:Rb,LiveChatDialog:$_,LiveChatHeader:j_,LiveChatItemList:H_,LiveChatMessageInput:W_,LiveChatParticipant:G_,LiveChatParticipantsList:Y_,MacroMarkersListItem:Q_,Menu:Z_,MenuNavigationItem:ew,MenuServiceItem:nw,MenuServiceItemDownload:sw,MultiPageMenu:ow,MultiPageMenuNotificationSection:cw,MusicMenuItemDivider:hw,MusicMultiSelectMenu:pw,MusicMultiSelectMenuItem:op,SimpleMenuHeader:mw,MerchandiseItem:yw,MerchandiseShelf:bw,Message:vy,MetadataBadge:dy,MetadataRow:ww,MetadataRowContainer:Sw,MetadataRowHeader:kw,MetadataScreen:Ew,MicroformatData:Pw,Mix:Lw,Movie:Dw,MovingThumbnail:Rw,MultiMarkersPlayerBar:Fw,MusicCarouselShelf:vT,MusicCarouselShelfBasicHeader:fT,MusicDescriptionShelf:_T,MusicDetailHeader:TT,MusicDownloadStateBadge:xT,MusicEditablePlaylistDetailHeader:CT,MusicElementHeader:IT,MusicHeader:AT,MusicImmersiveHeader:OT,MusicInlineBadge:MT,MusicItemThumbnailOverlay:Vw,MusicLargeCardItemCarousel:FT,MusicNavigationButton:gT,MusicPlayButton:Uw,MusicPlaylistShelf:UT,MusicQueue:qT,MusicResponsiveListItem:uT,MusicResponsiveListItemFixedColumn:Kw,MusicResponsiveListItemFlexColumn:zw,MusicShelf:zT,MusicSideAlignedItem:KT,MusicSortFilterButton:XT,MusicThumbnail:dT,MusicTwoRowItem:qw,MusicVisualHeader:JT,NavigationEndpoint:Zd,Notification:tS,PageIntroduction:iS,PlayerAnnotationsExpanded:rS,PlayerCaptionsTracklist:aS,PlayerErrorMessage:lS,PlayerLegacyDesktopYpcOffer:uS,PlayerLiveStoryboardSpec:dS,PlayerMicroformat:fS,PlayerOverlay:_S,PlayerOverlayAutoplay:vS,PlayerStoryboardSpec:TS,Playlist:ry,PlaylistCustomThumbnail:xS,PlaylistHeader:CS,PlaylistInfoCardContent:IS,PlaylistMetadata:AS,PlaylistPanel:VT,PlaylistPanelVideo:OS,PlaylistPanelVideoWrapper:MS,PlaylistSidebar:NS,PlaylistSidebarPrimaryInfo:FS,PlaylistSidebarSecondaryInfo:US,PlaylistVideo:qS,PlaylistVideoList:zS,PlaylistVideoThumbnail:KS,Poll:XS,Post:JS,PostMultiImage:tx,ProfileColumn:ix,ProfileColumnStats:rx,ProfileColumnStatsEntry:ax,ProfileColumnUserInfo:lx,RecognitionShelf:ux,ReelItem:dx,ReelShelf:fx,RelatedChipCloud:gx,RichGrid:vx,RichItem:_x,RichListHeader:Tx,RichMetadata:xx,RichMetadataRow:Cx,RichSection:Ix,RichShelf:Ax,SearchBox:Ox,SearchFilter:Mx,SearchFilterGroup:Nx,SearchRefinementCard:Fx,SearchSubMenu:Vx,SearchSuggestion:Wv,SearchSuggestionsSection:qx,SecondarySearchContainer:zx,SectionList:Kx,SegmentedLikeDislikeButton:Xx,SettingBoolean:Jx,SettingsCheckbox:tk,SettingsOptions:rk,SettingsSidebar:ak,SettingsSwitch:ik,SharedPost:lk,Shelf:uk,ShowingResultsFor:dk,SimpleCardContent:fk,SimpleCardTeaser:gk,SimpleTextSection:vk,SingleActionEmergencySupport:_k,SingleColumnBrowseResults:xk,SingleColumnMusicWatchNextResults:Ck,SingleHeroImage:Ik,SlimOwner:Ak,SlimVideoMetadata:Ok,SortFilterSubMenu:Mk,SubFeedOption:Nk,SubFeedSelector:Fk,SubscribeButton:nb,SubscriptionNotificationToggleButton:eb,Tab:Tk,Tabbed:Uk,TabbedSearchResults:Vk,TextHeader:qk,ThumbnailLandscapePortrait:zk,ThumbnailOverlayBottomPanel:Kk,ThumbnailOverlayEndorsement:Xk,ThumbnailOverlayHoverText:Jk,ThumbnailOverlayInlineUnplayable:tC,ThumbnailOverlayLoadingPreview:iC,ThumbnailOverlayNowPlaying:rC,ThumbnailOverlayPinking:aC,ThumbnailOverlayPlaybackStatus:lC,ThumbnailOverlayResumePlayback:uC,ThumbnailOverlaySidePanel:dC,ThumbnailOverlayTimeStatus:VS,ThumbnailOverlayToggleButton:fC,TimedMarkerDecoration:gC,TitleAndButtonListHeader:vC,ToggleButton:Ux,ToggleMenuServiceItem:_C,Tooltip:TC,TopicChannelDetails:xC,TwoColumnBrowseResults:CC,TwoColumnSearchResults:IC,TwoColumnWatchNextResults:DC,UniversalWatchCard:RC,UpsellDialog:BC,VerticalList:$C,VerticalWatchCardList:jC,Video:HC,VideoCard:WC,VideoInfoCardContent:GC,VideoOwner:YC,VideoPrimaryInfo:QC,VideoSecondaryInfo:eE,WatchCardCompactVideo:nE,WatchCardHeroVideo:sE,WatchCardRichHeader:oE,WatchCardSectionSequence:cE,WatchNextEndScreen:gS,WatchNextTabbedResults:hE,AnchoredSection:pE,KidsCategoriesHeader:mE,KidsCategoryTab:yE,KidsHomeScreen:bE},wE={Author:Qp,ChildElement:Oy,EmojiRun:np,Format:lp,NavigatableText:Kp,PlaylistAuthor:iy,Text:sp,TextRun:tp,Thumbnail:ip,VideoDetails:cp};var TE,SE,xE,kE,CE,EE,IE,PE=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},AE=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class LE{static setParserErrorHandler(t){PE(this,TE,t,"f",SE)}static parseResponse(t){var e,i;const n={};AE(this,TE,"m",CE).call(this);const r=this.parse(t.contents),s=AE(this,TE,"m",IE).call(this);r&&(n.contents=r,n.contents_memo=s),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const a=t.onResponseReceivedActions?this.parseRR(t.onResponseReceivedActions):null,o=AE(this,TE,"m",IE).call(this);a&&(n.on_response_received_actions=a,n.on_response_received_actions_memo=o),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const l=t.onResponseReceivedEndpoints?this.parseRR(t.onResponseReceivedEndpoints):null,c=AE(this,TE,"m",IE).call(this);l&&(n.on_response_received_endpoints=l,n.on_response_received_endpoints_memo=c),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const u=t.onResponseReceivedCommands?this.parseRR(t.onResponseReceivedCommands):null,h=AE(this,TE,"m",IE).call(this);u&&(n.on_response_received_commands=u,n.on_response_received_commands_memo=h),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const d=t.continuationContents?this.parseLC(t.continuationContents):null,p=AE(this,TE,"m",IE).call(this);d&&(n.continuation_contents=d,n.continuation_contents_memo=p),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const f=t.actions?this.parseActions(t.actions):null,m=AE(this,TE,"m",IE).call(this);f&&(n.actions=f,n.actions_memo=m),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const g=t.liveChatItemContextMenuSupportedRenderers?this.parseItem(t.liveChatItemContextMenuSupportedRenderers):null,y=AE(this,TE,"m",IE).call(this);g&&(n.live_chat_item_context_menu_supported_renderers=g,n.live_chat_item_context_menu_supported_renderers_memo=y),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const v=t.header?this.parse(t.header):null,b=AE(this,TE,"m",IE).call(this);v&&(n.header=v,n.header_memo=b),AE(this,TE,"m",kE).call(this),AE(this,TE,"m",CE).call(this);const _=t.sidebar?this.parseItem(t.sidebar):null,w=AE(this,TE,"m",IE).call(this);_&&(n.sidebar=_,n.sidebar_memo=w),AE(this,TE,"m",kE).call(this),this.applyMutations(s,null===(i=null===(e=t.frameworkUpdates)||void 0===e?void 0:e.entityBatchUpdate)||void 0===i?void 0:i.mutations);const T=t.continuation?this.parseC(t.continuation):null;T&&(n.continuation=T);const S=this.parse(t.metadata);S&&(n.metadata=S);const x=this.parseItem(t.microformat);x&&(n.microformat=x);const k=this.parseItem(t.overlay);k&&(n.overlay=k);const C=this.parseArray(t.alerts);C.length&&(n.alerts=C);const E=t.refinements;E&&(n.refinements=E);const I=t.estimatedResults?parseInt(t.estimatedResults):null;I&&(n.estimated_results=I);const P=this.parse(t.playerOverlays);P&&(n.player_overlays=P);const A=t.playbackTracking?{videostats_watchtime_url:t.playbackTracking.videostatsWatchtimeUrl.baseUrl,videostats_playback_url:t.playbackTracking.videostatsPlaybackUrl.baseUrl}:null;A&&(n.playback_tracking=A);const L=t.playabilityStatus?{status:t.playabilityStatus.status,reason:t.playabilityStatus.reason||"",embeddable:!!t.playabilityStatus.playableInEmbed||!1,audio_only_playablility:this.parseItem(t.playabilityStatus.audioOnlyPlayability),error_screen:this.parseItem(t.playabilityStatus.errorScreen)}:null;L&&(n.playability_status=L);const O=t.streamingData?{expires:new Date(Date.now()+1e3*parseInt(t.streamingData.expiresInSeconds)),formats:LE.parseFormats(t.streamingData.formats),adaptive_formats:LE.parseFormats(t.streamingData.adaptiveFormats),dash_manifest_url:t.streamingData.dashManifestUrl||null,hls_manifest_url:t.streamingData.hlsManifestUrl||null}:void 0;O&&(n.streaming_data=O);const D=t.currentVideoEndpoint?new Zd(t.currentVideoEndpoint):null;D&&(n.current_video_endpoint=D);const M=t.endpoint?new Zd(t.endpoint):null;M&&(n.endpoint=M);const R=this.parseItem(t.captions);R&&(n.captions=R);const N=t.videoDetails?new cp(t.videoDetails):null;N&&(n.video_details=N);const B=this.parseArray(t.annotations);B.length&&(n.annotations=B);const F=this.parseItem(t.storyboards);F&&(n.storyboards=F);const $=this.parseItem(t.endscreen);$&&(n.endscreen=$);const U=this.parseItem(t.cards);U&&(n.cards=U),AE(this,TE,"m",CE).call(this);const j=this.parse(t.items);return j&&(n.items=j,n.items_memo=AE(this,TE,"m",IE).call(this)),AE(this,TE,"m",kE).call(this),n}static parseItem(t,e){if(!t)return null;const i=Object.keys(t);if(!i.length)return null;const n=this.sanitizeClassName(i[0]);if(!this.shouldIgnore(n))try{const r=function(t){const e=_E[t];if(!e){const e=new Error(`Module not found: ${t}`);throw e.code="MODULE_NOT_FOUND",e}return e}(n);if(e)if(Array.isArray(e)){if(!e.some((t=>t.type===r.type)))throw new _d(`Type mismatch, got ${n} but expected one of ${e.map((t=>t.type)).join(", ")}`)}else if(r.type!==e.type)throw new _d(`Type mismatch, got ${n} but expected ${e.type}`);const s=new r(t[i[0]]);return AE(this,TE,"m",EE).call(this,n,s),s}catch(e){return AE(this,TE,"f",SE).call(this,{classname:n,classdata:t[i[0]],err:e}),null}return null}static parseArray(t,e){if(Array.isArray(t)){const i=[];for(const n of t){const t=this.parseItem(n,e);t&&i.push(t)}return ud(i)}if(!t)return ud([]);throw new _d("Expected array but got a single item")}static parse(t,e,i){if(!t)return null;if(Array.isArray(t)){const n=[];for(const e of t){const t=this.parseItem(e,i);t&&n.push(t)}const r=ud(n);return e?r:new cd(ud(n))}if(e)throw new _d("Expected array but got a single item");return new cd(this.parseItem(t,i))}static parseC(t){return t.timedContinuationData?new jE({continuation:t.timedContinuationData,type:"timed"}):null}static parseLC(t){return t.itemSectionContinuation?new OE(t.itemSectionContinuation):t.sectionListContinuation?new NE(t.sectionListContinuation):t.liveChatContinuation?new VE(t.liveChatContinuation):t.musicPlaylistShelfContinuation?new BE(t.musicPlaylistShelfContinuation):t.musicShelfContinuation?new FE(t.musicShelfContinuation):t.gridContinuation?new $E(t.gridContinuation):t.playlistPanelContinuation?new UE(t.playlistPanelContinuation):null}static parseRR(t){return ud(t.map((t=>t.navigateAction?new DE(t.navigateAction):t.reloadContinuationItemsCommand?new RE(t.reloadContinuationItemsCommand):t.appendContinuationItemsAction?new ME(t.appendContinuationItemsAction):void 0)).filter((t=>t)))}static parseActions(t){return Array.isArray(t)?LE.parse(t.map((t=>(delete t.clickTrackingParams,t)))):new cd(this.parseItem(t))}static parseFormats(t){return(null==t?void 0:t.map((t=>new lp(t))))||[]}static applyMutations(t,e){const i=t.getType(op);if(i.length>0&&!e)console.warn(new bd(`Mutation data required for processing MusicMultiSelectMenuItems, but none found.\nThis is a bug, please report it at ${vd.shim.info.bugs_url}`));else{const t=[];for(const n of i){const i=e.find((t=>{var e,i;return(null===(i=null===(e=t.payload)||void 0===e?void 0:e.musicFormBooleanChoice)||void 0===i?void 0:i.id)===n.form_item_entity_key})),r=null==i?void 0:i.payload.musicFormBooleanChoice;void 0!==(null==r?void 0:r.selected)&&(null==r?void 0:r.opaqueToken)?n.selected=r.selected:t.push(`'${n.title}'`)}t.length>0&&console.warn(new bd(`Mutation data missing or invalid for ${t.length} out of ${i.length} MusicMultiSelectMenuItems. The titles of the failed items are: ${t.join(", ")}.\nThis is a bug, please report it at ${vd.shim.info.bugs_url}`))}}static sanitizeClassName(t){return(t.charAt(0).toUpperCase()+t.slice(1)).replace(/Renderer|Model/g,"").replace(/Radio/g,"Mix").trim()}static shouldIgnore(t){return this.ignore_list.has(t)}}kE=function(){PE(LE,TE,null,"f",xE)},CE=function(){PE(LE,TE,new hd,"f",xE)},EE=function(t,e){if(!AE(LE,TE,"f",xE))return;const i=AE(LE,TE,"f",xE).get(t);if(!i)return AE(LE,TE,"f",xE).set(t,[e]);i.push(e)},IE=function(){if(!AE(LE,TE,"f",xE))throw new Error("Parser#getMemo() called before Parser#createMemo()");return AE(LE,TE,"f",xE)},SE={value:AE(LE,TE=LE,"m",(function({classname:t,classdata:e,err:i}){if("MODULE_NOT_FOUND"==i.code)return console.warn(new bd(`${t} not found!\nThis is a bug, want to help us fix it? Follow the instructions at ${vd.shim.info.repo_url.split("#")[0]}/blob/main/docs/updating-the-parser.md or report it at ${vd.shim.info.bugs_url}!`,e));console.warn(new bd(`Something went wrong at ${t}!\nThis is a bug, please report it at ${vd.shim.info.bugs_url}`,{stack:i.stack}))}))},xE={value:null},LE.ignore_list=new Set(["AdSlot","DisplayAd","SearchPyv","MealbarPromo","BackgroundPromo","PromotedSparklesWeb","RunAttestationCommand","CompactPromotedVideo","StatementBanner","GuideSigninPromo"]);class OE extends od{constructor(t){var e,i,n;super(),this.contents=LE.parseArray(t.contents),Array.isArray(t.continuations)&&(this.continuation=null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e.at(0))||void 0===i?void 0:i.nextContinuationData)||void 0===n?void 0:n.continuation)}}OE.type="itemSectionContinuation";class DE extends od{constructor(t){super(),this.endpoint=new Zd(t.endpoint)}}DE.type="navigateAction";class ME extends od{constructor(t){super(),this.contents=LE.parse(t.continuationItems,!0)}}ME.type="appendContinuationItemsAction";class RE extends od{constructor(t){super(),this.target_id=t.targetId,this.contents=LE.parse(t.continuationItems,!0),this.slot=null==t?void 0:t.slot}}RE.type="reloadContinuationItemsCommand";class NE extends od{constructor(t){var e,i,n,r,s,a;super(),this.contents=LE.parse(t.contents,!0),this.continuation=(null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===n?void 0:n.continuation)||(null===(a=null===(s=null===(r=t.continuations)||void 0===r?void 0:r[0])||void 0===s?void 0:s.reloadContinuationData)||void 0===a?void 0:a.continuation)||null}}NE.type="sectionListContinuation";class BE extends od{constructor(t){var e;super(),this.contents=LE.parse(t.contents,!0),this.continuation=(null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData.continuation)||null}}BE.type="musicPlaylistShelfContinuation";class FE extends od{constructor(t){var e,i,n,r;super(),this.contents=LE.parseArray(t.contents),this.continuation=(null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData)||void 0===i?void 0:i.continuation)||(null===(r=null===(n=t.continuations)||void 0===n?void 0:n[0].reloadContinuationData)||void 0===r?void 0:r.continuation)||null}}FE.type="musicShelfContinuation";class $E extends od{constructor(t){var e;super(),this.items=LE.parse(t.items,!0),this.continuation=(null===(e=t.continuations)||void 0===e?void 0:e[0].nextContinuationData.continuation)||null}get contents(){return this.items}}$E.type="gridContinuation";class UE extends od{constructor(t){var e,i,n,r,s,a;super(),this.contents=LE.parseArray(t.contents),this.continuation=(null===(n=null===(i=null===(e=t.continuations)||void 0===e?void 0:e[0])||void 0===i?void 0:i.nextContinuationData)||void 0===n?void 0:n.continuation)||(null===(a=null===(s=null===(r=t.continuations)||void 0===r?void 0:r[0])||void 0===s?void 0:s.nextRadioContinuationData)||void 0===a?void 0:a.continuation)||null}}UE.type="playlistPanelContinuation";class jE extends od{constructor(t){var e,i,n;super(),this.continuation_type=t.type,this.timeout_ms=null===(e=t.continuation)||void 0===e?void 0:e.timeoutMs,this.time_until_last_message_ms=null===(i=t.continuation)||void 0===i?void 0:i.timeUntilLastMessageMsec,this.token=null===(n=t.continuation)||void 0===n?void 0:n.continuation}}jE.type="continuation";class VE extends od{constructor(t){var e,i,n,r,s,a,o,l;let c,u;super(),this.actions=LE.parse(null===(e=t.actions)||void 0===e?void 0:e.map((t=>(delete t.clickTrackingParams,t))),!0)||ud([]),this.action_panel=LE.parseItem(t.actionPanel),this.item_list=LE.parseItem(t.itemList),this.header=LE.parseItem(t.header),this.participants_list=LE.parseItem(t.participantsList),this.popout_message=LE.parseItem(t.popoutMessage),this.emojis=(null===(i=t.emojis)||void 0===i?void 0:i.map((t=>({emoji_id:t.emojiId,shortcuts:t.shortcuts,search_terms:t.searchTerms,image:ip.fromResponse(t.image),is_custom_emoji:t.isCustomEmoji}))))||[],(null===(n=t.continuations)||void 0===n?void 0:n[0].timedContinuationData)?(u="timed",c=null===(r=t.continuations)||void 0===r?void 0:r[0].timedContinuationData):(null===(s=t.continuations)||void 0===s?void 0:s[0].invalidationContinuationData)?(u="invalidation",c=null===(a=t.continuations)||void 0===a?void 0:a[0].invalidationContinuationData):(null===(o=t.continuations)||void 0===o?void 0:o[0].liveChatReplayContinuationData)&&(u="replay",c=null===(l=t.continuations)||void 0===l?void 0:l[0].liveChatReplayContinuationData),this.continuation=new jE({continuation:c,type:u}),this.viewer_name=t.viewerName}}VE.type="liveChatContinuation";var HE,qE=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};HE=new WeakMap;var WE,zE=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};WE=new WeakMap;var GE,KE,YE,XE,QE,JE,ZE=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},tI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},eI=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i};class iI{constructor(t,e,i=!1){GE.add(this),KE.set(this,void 0),YE.set(this,void 0),XE.set(this,void 0),QE.set(this,void 0),tI(this,GE,"m",JE).call(this,e)||i?eI(this,KE,e,"f"):eI(this,KE,SL.parseResponse(e.data),"f");const n=function(...t){const e=new hd;for(const i of t)if(i)for(const t of i)e.set(...t);return e}(tI(this,KE,"f").contents_memo,tI(this,KE,"f").continuation_contents_memo,tI(this,KE,"f").on_response_received_commands_memo,tI(this,KE,"f").on_response_received_endpoints_memo,tI(this,KE,"f").on_response_received_actions_memo,tI(this,KE,"f").sidebar_memo,tI(this,KE,"f").header_memo);if(!n)throw new bd("No memo found in feed");eI(this,QE,n,"f"),eI(this,XE,t,"f")}static getVideosFromMemo(t){return t.getType([HC,_v,dx,fy,qS,OS,nE])}static getPlaylistsFromMemo(t){return t.getType([ry,vv])}get videos(){return iI.getVideosFromMemo(tI(this,QE,"f"))}get posts(){return tI(this,QE,"f").getType([Zp,JS,lk])}get channels(){return tI(this,QE,"f").getType([Tf,fv])}get playlists(){return iI.getPlaylistsFromMemo(tI(this,QE,"f"))}get memo(){return tI(this,QE,"f")}get page_contents(){var t;const e=null===(t=tI(this,QE,"f").getType(Tk))||void 0===t?void 0:t.first().content,i=tI(this,QE,"f").getType(RE).first(),n=tI(this,QE,"f").getType(_p).first();return e||i||n}get shelves(){return tI(this,QE,"f").getType([uk,Ax,fx])}getShelf(t){return this.shelves.get({title:t})}get secondary_contents(){var t,e;if(!(null===(t=tI(this,KE,"f").contents)||void 0===t?void 0:t.is_node))return;const i=null===(e=tI(this,KE,"f").contents)||void 0===e?void 0:e.item();return i.is(CC,IC)?i.secondary_contents:void 0}get actions(){return tI(this,XE,"f")}get page(){return tI(this,KE,"f")}get has_continuation(){return(tI(this,QE,"f").get("ContinuationItem")||[]).length>0}getContinuationData(){return ZE(this,void 0,void 0,(function*(){if(tI(this,YE,"f")){if(tI(this,YE,"f").length>1)throw new bd("There are too many continuations, you'll need to find the correct one yourself in this.page");if(0===tI(this,YE,"f").length)throw new bd("There are no continuations");return yield tI(this,YE,"f")[0].endpoint.call(tI(this,XE,"f"),{parse:!0})}if(eI(this,YE,tI(this,QE,"f").getType(Ng),"f"),tI(this,YE,"f"))return this.getContinuationData()}))}getContinuation(){return ZE(this,void 0,void 0,(function*(){const t=yield this.getContinuationData();if(!t)throw new bd("Could not get continuation data");return new iI(this.actions,t,!0)}))}}KE=new WeakMap,YE=new WeakMap,XE=new WeakMap,QE=new WeakMap,GE=new WeakSet,JE=function(t){return!("data"in t)};const nI=iI;var rI,sI,aI=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},oI=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},lI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class cI extends nI{constructor(t,e,i=!1){var n;super(t,e,i),rI.set(this,void 0),sI.set(this,void 0),oI(this,sI,t,"f"),oI(this,rI,null===(n=this.page.contents_memo)||void 0===n?void 0:n.getType(Tk),"f")}get tabs(){var t,e;return null!==(e=null===(t=lI(this,rI,"f"))||void 0===t?void 0:t.map((t=>t.title.toString())))&&void 0!==e?e:[]}getTabByName(t){var e;return aI(this,void 0,void 0,(function*(){const i=null===(e=lI(this,rI,"f"))||void 0===e?void 0:e.find((e=>e.title.toLowerCase()===t.toLowerCase()));if(!i)throw new bd(`Tab "${t}" not found`);if(i.selected)return this;const n=yield i.endpoint.call(lI(this,sI,"f"));return new cI(lI(this,sI,"f"),n,!1)}))}getTabByURL(t){var e;return aI(this,void 0,void 0,(function*(){const i=null===(e=lI(this,rI,"f"))||void 0===e?void 0:e.find((e=>{var i;return(null===(i=e.endpoint.metadata.url)||void 0===i?void 0:i.split("/").pop())===t}));if(!i)throw new bd(`Tab "${t}" not found`);if(i.selected)return this;const n=yield i.endpoint.call(lI(this,sI,"f"));return new cI(lI(this,sI,"f"),n,!1)}))}hasTabWithURL(t){var e,i;return null!==(i=null===(e=lI(this,rI,"f"))||void 0===e?void 0:e.some((e=>{var i;return(null===(i=e.endpoint.metadata.url)||void 0===i?void 0:i.split("/").pop())===t})))&&void 0!==i&&i}get title(){var t,e,i;return null===(i=null===(e=null===(t=this.page.contents_memo)||void 0===t?void 0:t.getType(Tk))||void 0===e?void 0:e.find((t=>t.selected)))||void 0===i?void 0:i.title.toString()}}rI=new WeakMap,sI=new WeakMap;const uI=cI;var hI,dI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};hI=new WeakMap;const pI=class extends nI{constructor(t,e,i=!1){super(t,e,i),hI.set(this,void 0)}get filter_chips(){var t,e;if(dI(this,hI,"f"))return dI(this,hI,"f")||[];if((null===(t=this.memo.getType(rv))||void 0===t?void 0:t.length)>1)throw new bd("There are too many feed filter chipbars, you'll need to find the correct one yourself in this.page");if(0===(null===(e=this.memo.getType(rv))||void 0===e?void 0:e.length))throw new bd("There are no feed filter chipbars");return function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,hI,this.memo.getType(Yf),"f"),dI(this,hI,"f")||[]}get filters(){return this.filter_chips.map((t=>t.text.toString()))||[]}getFilteredFeed(t){var e,i,n,r,s;return i=this,n=void 0,s=function*(){let i;if("string"==typeof t){if(!this.filters.includes(t))throw new bd("Filter not found",{available_filters:this.filters});i=this.filter_chips.find((e=>e.text.toString()===t))}else{if("ChipCloudChip"!==t.type)throw new bd("Invalid filter");i=t}if(!i)throw new bd("Filter not found");if(i.is_selected)return this;const n=yield null===(e=i.endpoint)||void 0===e?void 0:e.call(this.actions,{parse:!0});if(!n)throw new bd("Failed to get filtered feed");return new nI(this.actions,n,!0)},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,o)}l((s=s.apply(i,n||[])).next())}))}};var fI=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))};class mI extends uI{constructor(t,e,i=!1){var n,r,s,a,o,l;super(t,e,i),this.header=null===(r=null===(n=this.page.header)||void 0===n?void 0:n.item())||void 0===r?void 0:r.as(uf,vf,sb);const c=null===(s=this.page.metadata)||void 0===s?void 0:s.item().as(Df),u=null===(a=this.page.microformat)||void 0===a?void 0:a.as(Pw);if(this.page.alerts){const t=this.page.alerts.first();if("ERROR"===(null==t?void 0:t.alert_type))throw new kd(t.text.toString())}if(!c&&!this.page.contents)throw new bd("Invalid channel",this);this.metadata=Object.assign(Object.assign({},c),u||{}),this.subscribe_button=null===(o=this.page.header_memo)||void 0===o?void 0:o.getType(nb).first(),this.current_tab=null===(l=this.page.contents)||void 0===l?void 0:l.item().key("tabs").parsed().array().filterType(Tk,tv).get({selected:!0})}applyFilter(t){var e;return fI(this,void 0,void 0,(function*(){let i;const n=this.memo.getType(rv).first();if("string"==typeof t){if(i=null==n?void 0:n.contents.get({text:t}),!i)throw new bd(`Filter ${t} not found`,{available_filters:this.filters})}else t instanceof Yf&&(i=t);if(!i)throw new bd("Invalid filter",t);const r=yield null===(e=i.endpoint)||void 0===e?void 0:e.call(this.actions,{parse:!0});if(!r)throw new bd("No page returned",{filter:i});return new yI(this.actions,r,!0)}))}applySort(t){var e,i;return fI(this,void 0,void 0,(function*(){const n=this.memo.getType(Mk).first();if(!n)throw new bd("No sort filter sub menu found");const r=null===(e=null==n?void 0:n.sub_menu_items)||void 0===e?void 0:e.find((e=>e.title===t));if(!r)throw new bd(`Sort filter ${t} not found`,{available_sort_filters:this.sort_filters});if(r.selected)return this;const s=yield null===(i=r.endpoint)||void 0===i?void 0:i.call(this.actions,{parse:!0});return new mI(this.actions,s,!0)}))}applyContentTypeFilter(t){var e,i,n,r;return fI(this,void 0,void 0,(function*(){const s=null===(n=null===(i=null===(e=this.current_tab)||void 0===e?void 0:e.content)||void 0===i?void 0:i.as(Kx).sub_menu)||void 0===n?void 0:n.as($f);if(!s)throw new bd("Sub menu not found");const a=s.content_type_sub_menu_items.find((e=>e.title===t));if(!a)throw new bd(`Sub menu item ${t} not found`,{available_filters:this.content_type_filters});if(a.selected)return this;const o=yield null===(r=a.endpoint)||void 0===r?void 0:r.call(this.actions,{parse:!0});return new mI(this.actions,o,!0)}))}get filters(){var t,e;return(null===(e=null===(t=this.memo.getType(rv))||void 0===t?void 0:t[0])||void 0===e?void 0:e.contents.filterType(Yf).map((t=>t.text)))||[]}get sort_filters(){var t;const e=this.memo.getType(Mk).first();return(null===(t=null==e?void 0:e.sub_menu_items)||void 0===t?void 0:t.map((t=>t.title)))||[]}get content_type_filters(){var t,e,i;const n=null===(i=null===(e=null===(t=this.current_tab)||void 0===t?void 0:t.content)||void 0===e?void 0:e.as(Kx).sub_menu)||void 0===i?void 0:i.as($f);return(null==n?void 0:n.content_type_sub_menu_items.map((t=>t.title)))||[]}getHome(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("featured");return new mI(this.actions,t.page,!0)}))}getVideos(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("videos");return new mI(this.actions,t.page,!0)}))}getShorts(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("shorts");return new mI(this.actions,t.page,!0)}))}getLiveStreams(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("streams");return new mI(this.actions,t.page,!0)}))}getPlaylists(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("playlists");return new mI(this.actions,t.page,!0)}))}getCommunity(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("community");return new mI(this.actions,t.page,!0)}))}getChannels(){return fI(this,void 0,void 0,(function*(){const t=yield this.getTabByURL("channels");return new mI(this.actions,t.page,!0)}))}getAbout(){var t;return fI(this,void 0,void 0,(function*(){const e=yield this.getTabByURL("about");return null===(t=e.memo.getType(xf))||void 0===t?void 0:t[0]}))}search(t){var e,i;return fI(this,void 0,void 0,(function*(){const n=null===(e=this.memo.getType(tv))||void 0===e?void 0:e[0];if(!n)throw new bd("Search tab not found",this);const r=yield null===(i=n.endpoint)||void 0===i?void 0:i.call(this.actions,{query:t,parse:!0});return new mI(this.actions,r,!0)}))}get has_home(){return this.hasTabWithURL("featured")}get has_videos(){return this.hasTabWithURL("videos")}get has_shorts(){return this.hasTabWithURL("shorts")}get has_live_streams(){return this.hasTabWithURL("streams")}get has_playlists(){return this.hasTabWithURL("playlists")}get has_community(){return this.hasTabWithURL("community")}get has_channels(){return this.hasTabWithURL("channels")}get has_about(){return this.hasTabWithURL("about")}get has_search(){var t;return(null===(t=this.memo.getType(tv))||void 0===t?void 0:t.length)>0}getContinuation(){const t=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return fI(this,void 0,void 0,(function*(){const e=yield t.getContinuationData.call(this);if(!e)throw new bd("Could not get continuation data");return new gI(this.actions,e,!0)}))}}class gI extends nI{constructor(t,e,i=!1){var n,r;super(t,e,i),this.contents=(null===(n=this.page.on_response_received_actions)||void 0===n?void 0:n.first())||(null===(r=this.page.on_response_received_endpoints)||void 0===r?void 0:r.first())}getContinuation(){const t=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return fI(this,void 0,void 0,(function*(){const e=yield t.getContinuationData.call(this);if(!e)throw new bd("Could not get continuation data");return new gI(this.actions,e,!0)}))}}class yI extends pI{constructor(t,e,i=!1){super(t,e,i),this.applied_filter=this.memo.getType(Yf).get({is_selected:!0}),this.page.on_response_received_actions&&this.page.on_response_received_actions.length>1&&this.page.on_response_received_actions.shift(),this.contents=this.page.on_response_received_actions.first()}applyFilter(t){const e=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return fI(this,void 0,void 0,(function*(){const i=yield e.getFilteredFeed.call(this,t);return new yI(this.actions,i.page,!0)}))}getContinuation(){const t=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return fI(this,void 0,void 0,(function*(){const e=yield t.getContinuationData.call(this);if(!(null==e?void 0:e.on_response_received_actions_memo))throw new bd("Unexpected continuation data",e);return e.on_response_received_actions_memo.set("FeedFilterChipBar",this.memo.getType(rv)),e.on_response_received_actions_memo.set("ChipCloudChip",this.memo.getType(Yf)),new yI(this.actions,e,!0)}))}}var vI,bI,_I,wI=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},TI=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},SI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class xI{constructor(t,e,i=!1){var n,r,s;vI.set(this,void 0),bI.set(this,void 0),_I.set(this,void 0),TI(this,vI,i?e:SL.parseResponse(e),"f"),TI(this,bI,t,"f");const a=SI(this,vI,"f").on_response_received_endpoints;if(!a)throw new bd("Comments page did not have any content.");const o=a.at(0),l=a.at(1);this.header=null===(n=null==o?void 0:o.contents)||void 0===n?void 0:n.firstOfType(Og);const c=(null===(r=null==l?void 0:l.contents)||void 0===r?void 0:r.filterType(Hg))||[];this.contents=ud(c.map((t=>{var e;return null===(e=t.comment)||void 0===e||e.setActions(SI(this,bI,"f")),t.setActions(SI(this,bI,"f")),t}))),TI(this,_I,null===(s=null==l?void 0:l.contents)||void 0===s?void 0:s.firstOfType(Ng),"f")}applySort(t){var e,i,n,r;return wI(this,void 0,void 0,(function*(){if(!this.header)throw new bd("Page header is missing. Cannot apply sort option.");let s;if("TOP_COMMENTS"===t?s=null===(i=null===(e=this.header.sort_menu)||void 0===e?void 0:e.sub_menu_items)||void 0===i?void 0:i.at(0):"NEWEST_FIRST"===t&&(s=null===(r=null===(n=this.header.sort_menu)||void 0===n?void 0:n.sub_menu_items)||void 0===r?void 0:r.at(1)),!s)throw new bd("Could not find target button.");if(s.selected)return this;const a=yield s.endpoint.call(SI(this,bI,"f"),{parse:!0});return new xI(SI(this,bI,"f"),a,!0)}))}createComment(t){var e;return wI(this,void 0,void 0,(function*(){if(!this.header)throw new bd("Page header is missing. Cannot create comment.");const i=null===(e=this.header.create_renderer)||void 0===e?void 0:e.as(Mg).submit_button;if(!i)throw new bd("Could not find target button. You are probably not logged in.");if(!i.endpoint)throw new bd("Button does not have an endpoint.");return yield i.endpoint.call(SI(this,bI,"f"),{commentText:t})}))}getContinuation(){return wI(this,void 0,void 0,(function*(){if(!SI(this,_I,"f"))throw new bd("Continuation not found");const t=yield SI(this,_I,"f").endpoint.call(SI(this,bI,"f"),{parse:!0}),e=Object.assign({},SI(this,vI,"f"));if(!e.on_response_received_endpoints||!t.on_response_received_endpoints)throw new bd("Invalid reponse format, missing on_response_received_endpoints.");return e.on_response_received_endpoints.pop(),e.on_response_received_endpoints.push(t.on_response_received_endpoints[0]),new xI(SI(this,bI,"f"),e,!0)}))}get has_continuation(){return!!SI(this,_I,"f")}get page(){return SI(this,vI,"f")}}vI=new WeakMap,bI=new WeakMap,_I=new WeakMap;const kI=xI;class CI extends nI{constructor(t,e,i=!1){super(t,e,i),this.sections=this.memo.getType(ob),this.feed_actions=this.memo.getType(rf).first()}getContinuation(){return t=this,e=void 0,n=function*(){const t=yield this.getContinuationData();if(!t)throw new Error("No continuation data found");return new CI(this.actions,t,!0)},new((i=void 0)||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}}const EI=CI;var II=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))};class PI extends pI{constructor(t,e,i=!1){super(t,e,i),this.header=this.memo.getType(av).first(),this.contents=this.memo.getType(vx).first()||this.page.on_response_received_actions.first()}applyFilter(t){const e=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return II(this,void 0,void 0,(function*(){const i=yield e.getFilteredFeed.call(this,t);return new PI(this.actions,i.page,!0)}))}getContinuation(){const t=Object.create(null,{getContinuation:{get:()=>super.getContinuation}});var e;return II(this,void 0,void 0,(function*(){const i=yield t.getContinuation.call(this);return i.page.header=this.page.header,null===(e=i.page.header_memo)||void 0===e||e.set(this.header.type,[this.header]),new PI(this.actions,i.page,!0)}))}}var AI,LI,OI,DI=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},MI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};AI=new WeakMap,LI=new WeakMap,OI=new WeakMap;var RI,NI,BI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class FI extends nI{constructor(t,e,i=!1){var n,r;super(t,e,i),RI.add(this);const s=this.memo.getType(CS).first(),a=this.memo.getType(FS).first(),o=this.memo.getType(US).first();if(!a&&!o)throw new bd("This playlist does not exist");this.info=Object.assign(Object.assign({},null===(n=this.page.metadata)||void 0===n?void 0:n.item().as(AS)),{author:null!==(r=null==o?void 0:o.owner.item().as(YC).author)&&void 0!==r?r:null==s?void 0:s.author,thumbnails:null==a?void 0:a.thumbnail_renderer.item().as(KS,xS).thumbnail,total_items:BI(this,RI,"m",NI).call(this,0,a),views:BI(this,RI,"m",NI).call(this,1,a),last_updated:BI(this,RI,"m",NI).call(this,2,a),can_share:null==s?void 0:s.can_share,can_delete:null==s?void 0:s.can_delete,is_editable:null==s?void 0:s.is_editable,privacy:null==s?void 0:s.privacy}),this.menu=null==a?void 0:a.menu,this.endpoint=null==a?void 0:a.endpoint,this.messages=this.memo.getType(vy)}get items(){return this.videos}getContinuation(){return t=this,e=void 0,n=function*(){const t=yield this.getContinuationData();if(!t)throw new bd("Could not get continuation data");return new FI(this.actions,t,!0)},new((i=void 0)||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}}RI=new WeakSet,NI=function(t,e){var i;return e&&e.stats&&(null===(i=e.stats[t])||void 0===i?void 0:i.toString())||"N/A"};const $I=FI;var UI,jI;UI=new WeakSet,jI=function(t){var e,i,n,r,s;return i=this,n=void 0,s=function*(){if(!(null===(e=t.menu)||void 0===e?void 0:e.as(Z_).hasKey("top_level_buttons")))throw new bd(`The ${t.title.text} shelf doesn't have more items`);const i=t.menu.as(Z_).top_level_buttons.firstOfType(lf);if(!i)throw new bd("Did not find target button.");const n=yield i.as(lf).endpoint.call(this.actions,{parse:!0});switch(t.icon_type){case"LIKE":case"WATCH_LATER":return new $I(this.actions,n,!0);case"WATCH_HISTORY":return new EI(this.actions,n,!0);case"CONTENT_CUT":return new nI(this.actions,n,!0);default:throw new bd("Target shelf not implemented.")}},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,o)}l((s=s.apply(i,n||[])).next())}))};const VI=class extends nI{constructor(t,e){var i,n;if(super(t,e),UI.add(this),!this.page.contents_memo)throw new bd("Page contents not found");const r=null===(i=this.page.contents_memo.getType(rx))||void 0===i?void 0:i[0],s=null===(n=this.page.contents_memo.getType(lx))||void 0===n?void 0:n[0];this.profile={stats:r,user_info:s};const a=this.page.contents_memo.getType(uk);this.sections=a.map((t=>{var e;return{type:t.icon_type,title:t.title,contents:(null===(e=t.content)||void 0===e?void 0:e.key("items").array())||[],getAll:()=>function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}(this,UI,"m",jI).call(this,t)}}))}get history(){return this.sections.find((t=>"WATCH_HISTORY"===t.type))}get watch_later(){return this.sections.find((t=>"WATCH_LATER"===t.type))}get liked_videos(){return this.sections.find((t=>"LIKE"===t.type))}get playlists_section(){return this.sections.find((t=>"PLAYLISTS"===t.type))}get clips(){return this.sections.find((t=>"CONTENT_CUT"===t.type))}};var HI,qI,WI,zI,GI,KI,YI=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},XI=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class QI{constructor(){this.front=[],this.back=[]}isEmpty(){return!this.front.length&&!this.back.length}clear(){this.front=[],this.back=[]}getValues(){return this.front.concat(this.back.reverse())}}HI=new WeakMap,qI=new WeakMap,WI=new WeakMap,zI=new WeakMap,GI=new WeakMap,KI=new WeakMap;var JI,ZI,tP,eP,iP,nP,rP,sP,aP,oP,lP,cP=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},uP=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},hP=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};ZI=new WeakMap,tP=new WeakMap,eP=new WeakMap,iP=new WeakMap,nP=new WeakMap,rP=new WeakMap,JI=new WeakSet,sP=function t(){(()=>{cP(this,void 0,void 0,(function*(){var e,i;try{const e=yield hP(this,ZI,"f").execute(this.is_replay?"live_chat/get_live_chat_replay":"live_chat/get_live_chat",{continuation:hP(this,iP,"f"),parse:!0}),i=e.continuation_contents;if(i||(this.emit("error",new bd("Unexpected live chat incremental continuation response",e)),this.emit("end"),this.stop()),!(i instanceof VE))return this.stop(),void this.emit("end");uP(this,iP,i.continuation.token,"f"),i.header?(this.initial_info=i,this.emit("start",i),this.running&&hP(this,JI,"m",t).call(this)):this.smoothed_queue.enqueueActionGroup(i.actions),uP(this,rP,0,"f")}catch(n){this.emit("error",n),uP(this,rP,(i=hP(this,rP,"f"),e=i++,i),"f"),e<10?(yield hP(this,JI,"m",lP).call(this,2e3),hP(this,JI,"m",t).call(this)):(this.emit("error",new bd("Reached retry limit for incremental continuation requests",n)),this.emit("end"),this.stop())}}))})()},aP=function(t){return cP(this,void 0,void 0,(function*(){let e=t.length<125?1:Math.ceil(t.length/125);const i=1==e?(e=1e4/t.length,e*=Math.random()+.5,e=Math.min(1e3,e),e=Math.max(80,e)):e=80;for(const e of t)yield hP(this,JI,"m",lP).call(this,i),this.emit("chat-update",e)}))},oP=function t(){(()=>{cP(this,void 0,void 0,(function*(){var e,i,n,r,s,a,o,l,c,u,h;try{const d={videoId:hP(this,tP,"f")};hP(this,nP,"f")&&(d.continuation=hP(this,nP,"f"));const p=yield hP(this,ZI,"f").execute("/updated_metadata",d),f=SL.parseResponse(p.data);uP(this,nP,null===(e=f.continuation)||void 0===e?void 0:e.token,"f"),this.metadata={title:(null===(i=f.actions)||void 0===i?void 0:i.array().firstOfType(D_))||(null===(n=this.metadata)||void 0===n?void 0:n.title),description:(null===(r=f.actions)||void 0===r?void 0:r.array().firstOfType(P_))||(null===(s=this.metadata)||void 0===s?void 0:s.description),views:(null===(a=f.actions)||void 0===a?void 0:a.array().firstOfType(B_))||(null===(o=this.metadata)||void 0===o?void 0:o.views),likes:(null===(l=f.actions)||void 0===l?void 0:l.array().firstOfType(R_))||(null===(c=this.metadata)||void 0===c?void 0:c.likes),date:(null===(u=f.actions)||void 0===u?void 0:u.array().firstOfType(E_))||(null===(h=this.metadata)||void 0===h?void 0:h.date)},this.emit("metadata-update",this.metadata),yield hP(this,JI,"m",lP).call(this,5e3),this.running&&hP(this,JI,"m",t).call(this)}catch(e){yield hP(this,JI,"m",lP).call(this,2e3),this.running&&hP(this,JI,"m",t).call(this)}}))})()},lP=function(t){return cP(this,void 0,void 0,(function*(){return new Promise((e=>setTimeout((()=>e()),t)))}))};const dP=class extends Wd{constructor(t){var e,i;super(),JI.add(this),ZI.set(this,void 0),tP.set(this,void 0),eP.set(this,void 0),iP.set(this,void 0),nP.set(this,void 0),rP.set(this,0),this.running=!1,this.is_replay=!1,uP(this,tP,t.basic_info.id,"f"),uP(this,eP,t.basic_info.channel_id,"f"),uP(this,ZI,t.actions,"f"),uP(this,iP,null===(e=t.livechat)||void 0===e?void 0:e.continuation,"f"),this.is_replay=(null===(i=t.livechat)||void 0===i?void 0:i.is_replay)||!1,this.smoothed_queue=new class{constructor(){HI.set(this,void 0),qI.set(this,void 0),WI.set(this,void 0),zI.set(this,void 0),GI.set(this,void 0),KI.set(this,void 0),YI(this,HI,null,"f"),YI(this,qI,null,"f"),YI(this,WI,null,"f"),YI(this,zI,[],"f"),YI(this,GI,null,"f"),YI(this,KI,new QI,"f")}enqueueActionGroup(t){if(null!==XI(this,HI,"f")){const t=Date.now()-XI(this,HI,"f");XI(this,KI,"f").back.push(t),5<XI(this,KI,"f").front.length+XI(this,KI,"f").back.length&&(XI(this,KI,"f").front.length||(XI(this,KI,"f").front=XI(this,KI,"f").back,XI(this,KI,"f").front.reverse(),XI(this,KI,"f").back=[]),XI(this,KI,"f").front.pop()),YI(this,qI,Math.max(...XI(this,KI,"f").getValues()),"f")}YI(this,HI,Date.now(),"f"),XI(this,zI,"f").push(t),null===XI(this,GI,"f")&&YI(this,GI,setTimeout(this.emitSmoothedActions.bind(this)),"f")}emitSmoothedActions(){if(YI(this,GI,null,"f"),XI(this,zI,"f").length){let t=1e4;null!==XI(this,qI,"f")&&null!==XI(this,HI,"f")&&(t=XI(this,qI,"f")-Date.now()+XI(this,HI,"f")),t=XI(this,zI,"f").length<t/80?1:Math.ceil(XI(this,zI,"f").length/(t/80));const e=function(t){const e=[];for(const i of t)if(Array.isArray(i))for(const t of i)e.push(t);else e.push(i);return e}(XI(this,zI,"f").splice(0,t));XI(this,WI,"f")&&XI(this,WI,"f").call(this,e),null!==XI(this,zI,"f")&&(1==t?(t=XI(this,qI,"f")/XI(this,zI,"f").length,t*=Math.random()+.5,t=Math.min(1e3,t),t=Math.max(80,t)):t=80,YI(this,GI,setTimeout(this.emitSmoothedActions.bind(this),t),"f"))}}clear(){null!==XI(this,GI,"f")&&(clearTimeout(XI(this,GI,"f")),YI(this,GI,null,"f")),YI(this,zI,[],"f")}set callback(t){YI(this,WI,t,"f")}get callback(){return XI(this,WI,"f")}get action_queue(){return XI(this,zI,"f")}get estimated_update_interval(){return XI(this,qI,"f")}get last_update_time(){return XI(this,HI,"f")}get next_update_id(){return XI(this,GI,"f")}get poll_response_delay_queue(){return XI(this,KI,"f")}},this.smoothed_queue.callback=t=>cP(this,void 0,void 0,(function*(){t.length?t.length<10?yield hP(this,JI,"m",aP).call(this,t):this.is_replay?(hP(this,JI,"m",aP).call(this,t),yield hP(this,JI,"m",lP).call(this,2e3)):hP(this,JI,"m",aP).call(this,t):yield hP(this,JI,"m",lP).call(this,2e3),this.running&&hP(this,JI,"m",sP).call(this)}))}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}start(){this.running||(this.running=!0,hP(this,JI,"m",sP).call(this),hP(this,JI,"m",oP).call(this))}stop(){this.smoothed_queue.clear(),this.running=!1}sendMessage(t){return cP(this,void 0,void 0,(function*(){const e=yield hP(this,ZI,"f").execute("/live_chat/send_message",{params:yg.encodeMessageParams(hP(this,eP,"f"),hP(this,tP,"f")),richMessage:{textSegments:[{text:t}]},clientMessageId:vd.shim.uuidv4(),client:"ANDROID",parse:!0});if(!e.actions)throw new bd("Unexpected response from send_message",e);return e.actions.array().as(wb)}))}applyFilter(t){var e,i,n,r,s,a,o;if(!this.initial_info)throw new bd("Cannot apply filter before initial info is retrieved.");const l=null===(n=null===(i=null===(e=this.initial_info)||void 0===e?void 0:e.header)||void 0===i?void 0:i.view_selector)||void 0===n?void 0:n.sub_menu_items;if("TOP_CHAT"===t){if(null===(r=null==l?void 0:l.at(0))||void 0===r?void 0:r.selected)return;uP(this,iP,null===(s=null==l?void 0:l.at(0))||void 0===s?void 0:s.continuation,"f")}else{if(null===(a=null==l?void 0:l.at(1))||void 0===a?void 0:a.selected)return;uP(this,iP,null===(o=null==l?void 0:l.at(1))||void 0===o?void 0:o.continuation,"f")}}getItemMenu(t){return cP(this,void 0,void 0,(function*(){if(!t.menu_endpoint)throw new bd("This item does not have a menu.",t);const e=yield t.menu_endpoint.call(hP(this,ZI,"f"),{parse:!0});if(!e)throw new bd("Could not retrieve item menu.",t);return new class{constructor(t,e){AI.set(this,void 0),LI.set(this,void 0),OI.set(this,void 0),DI(this,AI,t,"f"),DI(this,LI,e,"f");const i=null==t?void 0:t.live_chat_item_context_menu_supported_renderers;if(!i||!i.is(Z_))throw new bd('Response did not have a "live_chat_item_context_menu_supported_renderers" property. The call may have failed.');DI(this,OI,i.as(Z_).items,"f")}selectItem(t){return e=this,i=void 0,r=function*(){let e;if(t instanceof lf){if(!t.endpoint)throw new bd("Item does not have an endpoint.");e=t.endpoint}else{const i=MI(this,OI,"f").find((e=>!!e.is(nw)&&e.as(nw).icon_type===t));if(!i||!i.is(nw))throw new bd(`Button "${t}" not found.`);e=i.endpoint}if(!e)throw new bd("Target button does not have an endpoint.");return yield e.call(MI(this,LI,"f"),{parse:!0})},new((n=void 0)||(n=Promise))((function(t,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,o)}l((r=r.apply(e,i||[])).next())}));var e,i,n,r}items(){return MI(this,OI,"f")}page(){return MI(this,AI,"f")}}(e,hP(this,ZI,"f"))}))}selectButton(t){return cP(this,void 0,void 0,(function*(){return yield t.endpoint.call(hP(this,ZI,"f"),{parse:!0})}))}};var pP,fP,mP=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},gP=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class yP{constructor(t,e){pP.set(this,void 0),fP.set(this,void 0),mP(this,fP,t,"f"),mP(this,pP,SL.parseResponse(e.data),"f"),this.header=gP(this,pP,"f").actions_memo.getType(mw).first(),this.contents=gP(this,pP,"f").actions_memo.getType(tS)}getContinuation(){return t=this,e=void 0,n=function*(){const t=gP(this,pP,"f").actions_memo.getType(Ng).first();if(!t)throw new bd("Continuation not found");const e=yield t.endpoint.call(gP(this,fP,"f"),{parse:!1});return new yP(gP(this,fP,"f"),e)},new((i=void 0)||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}get page(){return gP(this,pP,"f")}}pP=new WeakMap,fP=new WeakMap;const vP=yP;var bP=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))};class _P extends nI{constructor(t,e,i=!1){var n,r,s,a,o,l;super(t,e,i);const c=(null===(n=this.page.contents_memo)||void 0===n?void 0:n.getType(Kx).first().contents)||(null===(r=this.page.on_response_received_commands)||void 0===r?void 0:r.first().contents);if(!c)throw new bd("No contents found in search response");this.results=null===(s=c.firstOfType(ob))||void 0===s?void 0:s.contents,this.refinements=this.page.refinements||[],this.estimated_results=this.page.estimated_results,this.sub_menu=null===(a=this.page.contents_memo)||void 0===a?void 0:a.getType(Vx).first(),this.watch_card=null===(o=this.page.contents_memo)||void 0===o?void 0:o.getType(RC).first(),this.refinement_cards=null===(l=this.results)||void 0===l?void 0:l.firstOfType(Yv)}selectRefinementCard(t){var e,i;return bP(this,void 0,void 0,(function*(){let n;if("string"==typeof t){if(!this.refinement_cards)throw new bd("No refinement cards found.");if(n=null===(i=null===(e=this.refinement_cards)||void 0===e?void 0:e.cards.get({query:t}))||void 0===i?void 0:i.as(Fx),!n)throw new bd(`Refinement card "${t}" not found`,{available_cards:this.refinement_card_queries})}else{if("SearchRefinementCard"!==t.type)throw new bd("Invalid refinement card!");n=t}const r=yield n.endpoint.call(this.actions,{parse:!0});return new _P(this.actions,r,!0)}))}get refinement_card_queries(){var t;return(null===(t=this.refinement_cards)||void 0===t?void 0:t.cards.as(Fx).map((t=>t.query)))||[]}getContinuation(){return bP(this,void 0,void 0,(function*(){const t=yield this.getContinuationData();if(!t)throw new bd("Could not get continuation data");return new _P(this.actions,t,!0)}))}}const wP=_P;var TP,SP,xP=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},kP=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class CP{constructor(t,e){var i,n,r,s;if(TP.set(this,void 0),SP.set(this,void 0),xP(this,SP,t,"f"),xP(this,TP,SL.parseResponse(e.data),"f"),this.sidebar=null===(i=kP(this,TP,"f").sidebar)||void 0===i?void 0:i.as(ak),!kP(this,TP,"f").contents)throw new bd("Page contents not found");const a=kP(this,TP,"f").contents.item().as(CC).tabs.array().as(Tk).get({selected:!0});if(!a)throw new bd("Target tab not found");const o=null===(n=a.content)||void 0===n?void 0:n.as(Kx).contents.as(ob);this.introduction=null===(s=null===(r=null==o?void 0:o.shift())||void 0===r?void 0:r.contents)||void 0===s?void 0:s.firstOfType(iS),this.sections=null==o?void 0:o.map((t=>{var e;return{title:(null===(e=t.header)||void 0===e?void 0:e.title.toString())||null,contents:t.contents}}))}selectSidebarItem(t){return e=this,i=void 0,r=function*(){if(!this.sidebar)throw new bd("Sidebar not available");let e;if("string"==typeof t){if(e=this.sidebar.items.get({title:t}),!e)throw new bd(`Item "${t}" not found`,{available_items:this.sidebar_items})}else{if(!(null==t?void 0:t.is(ey)))throw new bd("Invalid item",{target_item:t});e=t}const i=yield e.endpoint.call(kP(this,SP,"f"),{parse:!1});return new CP(kP(this,SP,"f"),i)},new((n=void 0)||(n=Promise))((function(t,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,o)}l((r=r.apply(e,i||[])).next())}));var e,i,n,r}getSettingOption(t){var e;if(!this.sections)throw new bd("Sections not available");for(const i of this.sections)if(i.contents)for(const n of i.contents){const i=n.as(rk).options;if(i)for(const n of i)if(n.is(ik)&&(null===(e=n.title)||void 0===e?void 0:e.toString())===t)return n}throw new bd(`Option "${t}" not found`,{available_options:this.setting_options})}get setting_options(){if(!this.sections)throw new bd("Sections not available");let t=[];for(const e of this.sections)if(e.contents)for(const i of e.contents)i.as(rk).options&&(t=t.concat(i.as(rk).options));return t.map((t=>{var e;return null===(e=t.title)||void 0===e?void 0:e.toString()})).filter((t=>t))}get sidebar_items(){if(!this.sidebar)throw new bd("Sidebar not available");return this.sidebar.items.map((t=>t.title.toString()))}get page(){return kP(this,TP,"f")}}TP=new WeakMap,SP=new WeakMap;const EP=CP;var IP,PP=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};IP=new WeakMap;new WeakMap;var AP,LP,OP,DP,MP,RP=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},NP=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class BP{constructor(t,e,i){AP.add(this),LP.set(this,void 0),OP.set(this,void 0),DP.set(this,void 0),RP(this,LP,t,"f"),RP(this,OP,e,"f"),RP(this,DP,i||vd.shim.fetch,"f")}get fetch_function(){return NP(this,DP,"f")}fetch(t,e){return i=this,n=void 0,s=function*(){const i=jd.URLS.API.PRODUCTION_1+NP(this,LP,"f").api_version,n=(null==e?void 0:e.baseURL)||i,r="string"==typeof t?n.endsWith("/")||t.startsWith("/")?new URL(n+t):new URL(`${n}/${t}`):t instanceof URL?t:new URL(t.url,n),s=(null==e?void 0:e.headers)||(t instanceof vd.shim.Request?t.headers:new vd.shim.Headers)||new vd.shim.Headers,a=(null==e?void 0:e.body)||(t instanceof vd.shim.Request?t.body:void 0),o=new vd.shim.Headers(s);o.set("Accept","*/*"),o.set("Accept-Language","*"),o.set("x-goog-visitor-id",NP(this,LP,"f").context.client.visitorData||""),o.set("x-origin",r.origin),o.set("x-youtube-client-version",NP(this,LP,"f").context.client.clientVersion||""),vd.shim.server&&(o.set("User-Agent",Pd("desktop")),o.set("origin",r.origin)),r.searchParams.set("key",NP(this,LP,"f").key),r.searchParams.set("prettyPrint","false"),r.searchParams.set("alt","json");const l=o.get("Content-Type");let c=a,u=!1;const h=n===i||n===jd.URLS.YT_UPLOAD;if("application/json"===l&&h&&"string"==typeof a){const t=JSON.parse(a),e=Object.assign(Object.assign({},t),{context:JSON.parse(JSON.stringify(NP(this,LP,"f").context))});NP(this,AP,"m",MP).call(this,e.context,e.client),o.set("x-youtube-client-version",e.context.client.clientVersion),delete e.client,vd.shim.server&&("ANDROID"!==e.context.client.clientName&&"ANDROID_MUSIC"!==e.context.client.clientName||o.set("User-Agent",jd.CLIENTS.ANDROID.USER_AGENT)),u="WEB_KIDS"===e.context.client.clientName,c=JSON.stringify(e)}if(NP(this,LP,"f").logged_in&&h&&!u){const t=NP(this,LP,"f").oauth;if(t.validateCredentials()&&(yield t.refreshIfRequired(),o.set("authorization",`Bearer ${t.credentials.access_token}`),r.searchParams.delete("key")),NP(this,OP,"f")){const t=Ed(NP(this,OP,"f"),"PAPISID=",";");t&&(o.set("authorization",yield function(t){return e=this,i=void 0,r=function*(){const e=Math.floor((new Date).getTime()/1e3),i=[e,t,"https://www.youtube.com"].join(" ");return["SAPISIDHASH",[e,yield vd.shim.sha1Hash(i)].join("_")].join(" ")},new((n=void 0)||(n=Promise))((function(t,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,o)}l((r=r.apply(e,i||[])).next())}));var e,i,n,r}(t)),o.set("x-goog-authuser",NP(this,LP,"f").account_index.toString())),o.set("cookie",NP(this,OP,"f"))}}const d=new vd.shim.Request(r,t instanceof vd.shim.Request?t:e),p=yield NP(this,DP,"f").call(this,d,{body:c,headers:o,credentials:"include",redirect:t instanceof vd.shim.Request?t.redirect:(null==e?void 0:e.redirect)||"follow"});if(p.ok)return p;throw new bd(`Request to ${p.url} failed with status ${p.status}`,yield p.text())},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,o)}l((s=s.apply(i,n||[])).next())}));var i,n,r,s}}LP=new WeakMap,OP=new WeakMap,DP=new WeakMap,AP=new WeakSet,MP=function(t,e){switch(e){case"YTMUSIC":t.client.clientVersion=jd.CLIENTS.YTMUSIC.VERSION,t.client.clientName=jd.CLIENTS.YTMUSIC.NAME;break;case"ANDROID":t.client.clientVersion=jd.CLIENTS.ANDROID.VERSION,t.client.clientFormFactor="SMALL_FORM_FACTOR",t.client.clientName=jd.CLIENTS.ANDROID.NAME,t.client.androidSdkVersion=jd.CLIENTS.ANDROID.SDK_VERSION,t.client.platform="MOBILE";break;case"YTMUSIC_ANDROID":t.client.clientVersion=jd.CLIENTS.YTMUSIC_ANDROID.VERSION,t.client.clientFormFactor="SMALL_FORM_FACTOR",t.client.clientName=jd.CLIENTS.YTMUSIC_ANDROID.NAME,t.client.androidSdkVersion=jd.CLIENTS.ANDROID.SDK_VERSION,t.client.platform="MOBILE";break;case"YTSTUDIO_ANDROID":t.client.clientVersion=jd.CLIENTS.YTSTUDIO_ANDROID.VERSION,t.client.clientFormFactor="SMALL_FORM_FACTOR",t.client.clientName=jd.CLIENTS.YTSTUDIO_ANDROID.NAME,t.client.androidSdkVersion=jd.CLIENTS.ANDROID.SDK_VERSION;break;case"TV_EMBEDDED":t.client.clientVersion=jd.CLIENTS.TV_EMBEDDED.VERSION,t.client.clientScreen="EMBED",t.thirdParty={embedUrl:jd.URLS.YT_BASE};break;case"YTKIDS":t.client.clientVersion=jd.CLIENTS.WEB_KIDS.VERSION,t.client.clientName=jd.CLIENTS.WEB_KIDS.NAME,t.client.kidsAppInfo={categorySettings:{enabledCategories:["approved_for_you","black_joy","camp","collections","earth","explore","favorites","gaming","halloween","hero","learning","move","music","reading","shared_by_parents","shows","soccer","sports","spotlight","winter"]},contentSettings:{corpusPreference:"KIDS_CORPUS_PREFERENCE_YOUNGER",kidsNoSearchMode:"YT_KIDS_NO_SEARCH_MODE_OFF"}}}};var FP,$P,UP,jP,VP,HP=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},qP=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class WP{static download(t,e,i,n,r,s){return HP(this,void 0,void 0,(function*(){if("UNPLAYABLE"===(null==i?void 0:i.status))throw new bd("Video is unplayable",{error_type:"UNPLAYABLE"});if("LOGIN_REQUIRED"===(null==i?void 0:i.status))throw new bd("Video is login required",{error_type:"LOGIN_REQUIRED"});if(!n)throw new bd("Streaming data not available.",{error_type:"NO_STREAMING_DATA"});const a=Object.assign({quality:"360p",type:"video+audio",format:"mp4",range:void 0},t),o=this.chooseFormat(a,n),l=o.decipher(r);if("video+audio"===a.type&&!t.range){const t=yield e.session.http.fetch_function(`${l}&cpn=${s}`,{method:"GET",headers:$d,redirect:"follow"});if(!t.ok)throw new bd("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:t});const i=t.body;if(!i)throw new bd("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:t});return i}const c=10485760;let u,h=t.range?t.range.start:0,d=t.range?t.range.end:c,p=!1;const f=new vd.shim.ReadableStream({start(){},pull:i=>HP(this,void 0,void 0,(function*(){if(!p)return(d>=o.content_length||t.range)&&(p=!0),new Promise(((t,n)=>HP(this,void 0,void 0,(function*(){var r,a,o,p;try{u=new AbortController;const n=yield e.session.http.fetch_function(`${l}&cpn=${s}&range=${h}-${d||""}`,{method:"GET",headers:Object.assign({},$d),signal:u.signal}),y=n.body;if(!y)throw new bd("Could not get ReadableStream from fetch Response.",{video:this,error_type:"FETCH_FAILED",response:n});try{for(var f,m=!0,g=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=t[i]&&function(e){return new Promise((function(n,r){!function(t,e,i,n){Promise.resolve(n).then((function(e){t({value:e,done:i})}),e)}(n,r,(e=t[i](e)).done,e.value)}))}}}(function(t){return yd(this,arguments,(function*(){const e=t.getReader();try{for(;;){const{done:t,value:i}=yield gd(e.read());if(t)return yield gd(void 0);yield yield gd(i)}}finally{e.releaseLock()}}))}(y));!(r=(f=yield g.next()).done);){p=f.value,m=!1;try{const t=p;i.enqueue(t)}finally{m=!0}}}catch(t){a={error:t}}finally{try{m||r||!(o=g.return)||(yield o.call(g))}finally{if(a)throw a.error}}return h=d+1,d+=c,void t()}catch(t){n(t)}}))));i.close()})),cancel(t){return HP(this,void 0,void 0,(function*(){u.abort(t)}))}},{highWaterMark:1,size:t=>t.byteLength});return f}))}static chooseFormat(t,e){if(!e)throw new bd("Streaming data not available");const i=[...e.formats||[],...e.adaptive_formats||[]],n=!t.type||t.type.includes("audio"),r=!t.type||t.type.includes("video"),s=t.language||"original",a=t.quality||"best";let o=-1;const l=["best","bestefficiency"].includes(a),c="best"!==a;let u=i.filter((e=>!(n&&!e.has_audio||r&&!e.has_video||"any"!==t.format&&!e.mime_type.includes(t.format||"mp4")||!l&&e.quality_label!==a||(o<e.width&&(o=e.width),0))));if(!u.length)throw new bd("No matching formats found",{options:t});if(l&&r&&(u=u.filter((t=>t.width===o))),n&&!r){const t=u.filter((t=>"original"!==s?!t.has_video&&t.language===s:!t.has_video&&t.is_original));t.length>0&&(u=t)}return c?u.sort(((t,e)=>t.bitrate-e.bitrate)):u.sort(((t,e)=>e.bitrate-t.bitrate)),u[0]}static toDash(t,e=(t=>t),i,n,r){if(!t)throw new bd("Streaming data not available");let s;s=i?{formats:t.formats.filter((t=>!i(t))),adaptive_formats:t.adaptive_formats.filter((t=>!i(t))),expires:t.expires,dash_manifest_url:t.dash_manifest_url,hls_manifest_url:t.hls_manifest_url}:t;const{adaptive_formats:a}=s;if(!a.length)throw new bd("No adaptive formats found");const o=a[0].approx_duration_ms/1e3,l=(new vd.shim.DOMParser).parseFromString('<?xml version="1.0" encoding="utf-8"?><MPD />',"application/xml"),c=l.querySelector("MPD"),u=l.createElement("Period");return c.replaceWith(qP(this,FP,"m",$P).call(this,l,"MPD",{xmlns:"urn:mpeg:dash:schema:mpd:2011",minBufferTime:"PT1.500S",profiles:"urn:mpeg:dash:profile:isoff-main:2011",type:"static",mediaPresentationDuration:`PT${o}S`,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"urn:mpeg:dash:schema:mpd:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"},[u])),qP(this,FP,"m",UP).call(this,l,u,a,e,n,r),vd.shim.serializeDOM(l)}}FP=WP,$P=function(t,e,i,n=[]){const r=t.createElement(e);for(const[t,e]of Object.entries(i))e&&r.setAttribute(t,e);for(const t of n)void 0!==t&&r.appendChild(t);return r},UP=function(t,e,i,n,r,s){var a;const o=[],l=[[]];i.forEach((t=>{if(!t.index_range||!t.init_range)return;const e=t.mime_type,i=o.indexOf(e);i>-1?l[i].push(t):(o.push(e),l.push([]),l[o.length-1].push(t))}));let c=0;for(let i=0;i<o.length;i++)if(l[i][0].has_audio&&l[i][0].audio_track){const u=[],h=[[]];l[i].forEach((t=>{var e,i;const n=u.indexOf(null===(e=t.audio_track)||void 0===e?void 0:e.id);n>-1?h[n].push(t):(u.push(null===(i=t.audio_track)||void 0===i?void 0:i.id),h.push([]),h[u.length-1].push(t))}));for(let l=0;l<u.length;l++){const u=h[l][0],d=[];let p;p=(null===(a=u.audio_track)||void 0===a?void 0:a.audio_is_default)?"main":u.is_dubbed?"dub":u.is_descriptive?"description":"alternate",d.push(qP(this,FP,"m",$P).call(this,t,"Role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:p}));const f=qP(this,FP,"m",$P).call(this,t,"AdaptationSet",{id:""+c++,mimeType:o[i].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true",lang:u.language},d);e.appendChild(f),h[l].forEach((e=>{qP(this,FP,"m",VP).call(this,t,f,e,n,r,s)}))}}else{const a=qP(this,FP,"m",$P).call(this,t,"AdaptationSet",{id:""+c++,mimeType:o[i].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true"});e.appendChild(a),l[i].forEach((e=>{e.has_video?qP(this,FP,"m",jP).call(this,t,a,e,n,r,s):qP(this,FP,"m",VP).call(this,t,a,e,n,r,s)}))}},jP=function(t,e,i,n,r,s){var a,o,l,c,u,h;const d=Ed(i.mime_type,'codecs="','"');if(!i.index_range||!i.init_range)throw new bd("Index and init ranges not available",{format:i});const p=new URL(i.decipher(s));p.searchParams.set("cpn",r||""),e.appendChild(qP(this,FP,"m",$P).call(this,t,"Representation",{id:null===(a=i.itag)||void 0===a?void 0:a.toString(),codecs:d,bandwidth:null===(o=i.bitrate)||void 0===o?void 0:o.toString(),width:null===(l=i.width)||void 0===l?void 0:l.toString(),height:null===(c=i.height)||void 0===c?void 0:c.toString(),maxPlayoutRate:"1",frameRate:null===(u=i.fps)||void 0===u?void 0:u.toString()},[qP(this,FP,"m",$P).call(this,t,"BaseURL",{},[t.createTextNode(null===(h=n(p))||void 0===h?void 0:h.toString())]),qP(this,FP,"m",$P).call(this,t,"SegmentBase",{indexRange:`${i.index_range.start}-${i.index_range.end}`},[qP(this,FP,"m",$P).call(this,t,"Initialization",{range:`${i.init_range.start}-${i.init_range.end}`})])]))},VP=function(t,e,i,n,r,s){var a,o,l,c,u;return HP(this,void 0,void 0,(function*(){const h=Ed(i.mime_type,'codecs="','"');if(!i.index_range||!i.init_range)throw new bd("Index and init ranges not available",{format:i});const d=new URL(i.decipher(s));d.searchParams.set("cpn",r||""),e.appendChild(qP(this,FP,"m",$P).call(this,t,"Representation",{id:null===(a=i.itag)||void 0===a?void 0:a.toString(),codecs:h,bandwidth:null===(o=i.bitrate)||void 0===o?void 0:o.toString(),audioSamplingRate:null===(l=i.audio_sample_rate)||void 0===l?void 0:l.toString()},[qP(this,FP,"m",$P).call(this,t,"AudioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:(null===(c=i.audio_channels)||void 0===c?void 0:c.toString())||"2"}),qP(this,FP,"m",$P).call(this,t,"BaseURL",{},[t.createTextNode(null===(u=n(d))||void 0===u?void 0:u.toString())]),qP(this,FP,"m",$P).call(this,t,"SegmentBase",{indexRange:`${i.index_range.start}-${i.index_range.end}`},[qP(this,FP,"m",$P).call(this,t,"Initialization",{range:`${i.init_range.start}-${i.init_range.end}`})])]))}))};const zP=WP;var GP,KP,YP,XP,QP,JP,ZP=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},tA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},eA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};GP=new WeakMap,KP=new WeakMap,YP=new WeakMap,XP=new WeakMap,QP=new WeakMap,JP=new WeakMap;const iA=class{constructor(t,e,i,n){var r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,b,_,w,T,S,x,k,C,E,I,P,A,L,O,D,M,R,N,B,F,$,U,j,V;GP.set(this,void 0),KP.set(this,void 0),YP.set(this,void 0),XP.set(this,void 0),QP.set(this,void 0),JP.set(this,void 0),tA(this,KP,e,"f"),tA(this,YP,i,"f"),tA(this,XP,n,"f");const H=SL.parseResponse(t[0].data),q=(null===(r=null==t?void 0:t[1])||void 0===r?void 0:r.data)?SL.parseResponse(t[1].data):void 0;if(tA(this,GP,[H,q],"f"),"ERROR"===(null===(s=H.playability_status)||void 0===s?void 0:s.status))throw new bd("This video is unavailable",H.playability_status);if(H.microformat&&!(null===(a=H.microformat)||void 0===a?void 0:a.is(fS,Pw)))throw new bd("Invalid microformat",H.microformat);this.basic_info=Object.assign(Object.assign(Object.assign({},H.video_details),{embed:(null===(o=H.microformat)||void 0===o?void 0:o.is(fS))?null===(l=H.microformat)||void 0===l?void 0:l.embed:null,channel:(null===(c=H.microformat)||void 0===c?void 0:c.is(fS))?null===(u=H.microformat)||void 0===u?void 0:u.channel:null,is_unlisted:null===(h=H.microformat)||void 0===h?void 0:h.is_unlisted,is_family_safe:null===(d=H.microformat)||void 0===d?void 0:d.is_family_safe,category:(null===(p=H.microformat)||void 0===p?void 0:p.is(fS))?null===(f=H.microformat)||void 0===f?void 0:f.category:null,has_ypc_metadata:(null===(m=H.microformat)||void 0===m?void 0:m.is(fS))?null===(g=H.microformat)||void 0===g?void 0:g.has_ypc_metadata:null,start_timestamp:(null===(y=H.microformat)||void 0===y?void 0:y.is(fS))?H.microformat.start_timestamp:null}),{like_count:void 0,is_liked:void 0,is_disliked:void 0}),this.streaming_data=H.streaming_data,this.playability_status=H.playability_status,this.annotations=H.annotations,this.storyboards=H.storyboards,this.endscreen=H.endscreen,this.captions=H.captions,this.cards=H.cards,tA(this,JP,H.playback_tracking,"f");const W=null===(v=null==q?void 0:q.contents)||void 0===v?void 0:v.item().as(DC),z=null==W?void 0:W.results,G=null==W?void 0:W.secondary_results;if(z&&G){if((null===(b=H.microformat)||void 0===b?void 0:b.is(fS))&&"Gaming"===(null===(_=H.microformat)||void 0===_?void 0:_.category)){const t=null===(S=null===(T=null===(w=z.firstOfType(eE))||void 0===w?void 0:w.metadata)||void 0===T?void 0:T.rows)||void 0===S?void 0:S.firstOfType(Cx);(null==t?void 0:t.is(Cx))&&(this.game_info={title:null===(k=null===(x=null==t?void 0:t.contents)||void 0===x?void 0:x.firstOfType(xx))||void 0===k?void 0:k.title,release_year:null===(E=null===(C=null==t?void 0:t.contents)||void 0===C?void 0:C.firstOfType(xx))||void 0===E?void 0:E.subtitle})}this.primary_info=z.firstOfType(QC),this.secondary_info=z.firstOfType(eE),this.merchandise=z.firstOfType(bw),this.related_chip_cloud=null===(I=G.firstOfType(gx))||void 0===I?void 0:I.content.item().as(Qf),(null==W?void 0:W.playlist)&&(this.playlist=W.playlist),this.watch_next_feed=(null===(P=G.firstOfType(ob))||void 0===P?void 0:P.contents)||G,this.watch_next_feed&&Array.isArray(this.watch_next_feed)&&(null===(A=this.watch_next_feed.at(-1))||void 0===A?void 0:A.is(Ng))&&tA(this,QP,null===(L=this.watch_next_feed.pop())||void 0===L?void 0:L.as(Ng),"f"),this.player_overlays=null===(O=null==q?void 0:q.player_overlays)||void 0===O?void 0:O.item().as(_S),(null==W?void 0:W.autoplay)&&(this.autoplay=W.autoplay);const t=null===(M=null===(D=this.primary_info)||void 0===D?void 0:D.menu)||void 0===M?void 0:M.top_level_buttons.firstOfType(Xx);(null===(R=null==t?void 0:t.like_button)||void 0===R?void 0:R.is(Ux))&&(null===(N=null==t?void 0:t.dislike_button)||void 0===N?void 0:N.is(Ux))&&(this.basic_info.like_count=null===(B=null==t?void 0:t.like_button)||void 0===B?void 0:B.like_count,this.basic_info.is_liked=null===(F=null==t?void 0:t.like_button)||void 0===F?void 0:F.is_toggled,this.basic_info.is_disliked=null===($=null==t?void 0:t.dislike_button)||void 0===$?void 0:$.is_toggled);const e=null===(U=z.get({target_id:"comments-entry-point"}))||void 0===U?void 0:U.as(ob);this.comments_entry_point_header=null===(j=null==e?void 0:e.contents)||void 0===j?void 0:j.firstOfType(Ag),this.livechat=null===(V=null==q?void 0:q.contents_memo)||void 0===V?void 0:V.getType(yb).first()}}selectFilter(t){var e,i,n,r;return ZP(this,void 0,void 0,(function*(){if(!this.related_chip_cloud)throw new bd("Chip cloud not found, cannot apply filter");let s;if("string"==typeof t){const n=null===(i=null===(e=this.related_chip_cloud)||void 0===e?void 0:e.chips)||void 0===i?void 0:i.get({text:t});if(!n)throw new bd("Invalid filter",{available_filters:this.filters});s=n}else{if(!(null==t?void 0:t.is(Yf)))throw new bd("Invalid cloud chip",t);s=t}if(s.is_selected)return this;const a=yield null===(n=s.endpoint)||void 0===n?void 0:n.call(eA(this,KP,"f"),{parse:!0}),o=null===(r=null==a?void 0:a.on_response_received_endpoints)||void 0===r?void 0:r.get({target_id:"watch-next-feed"});return this.watch_next_feed=null==o?void 0:o.contents,this}))}addToWatchHistory(){return ZP(this,void 0,void 0,(function*(){if(!eA(this,JP,"f"))throw new bd("Playback tracking not available");const t={cpn:eA(this,XP,"f"),fmt:251,rtn:0,rt:0},e=eA(this,JP,"f").videostats_playback_url.replace("https://s.","https://www.");return yield eA(this,KP,"f").stats(e,{client_name:jd.CLIENTS.WEB.NAME,client_version:jd.CLIENTS.WEB.VERSION},t)}))}getWatchNextContinuation(){var t,e,i,n,r;return ZP(this,void 0,void 0,(function*(){if(!eA(this,QP,"f"))throw new bd("Watch next feed continuation not found");const s=yield null===(t=eA(this,QP,"f"))||void 0===t?void 0:t.endpoint.call(eA(this,KP,"f"),{parse:!0}),a=null===(e=null==s?void 0:s.on_response_received_endpoints)||void 0===e?void 0:e.get({type:"appendContinuationItemsAction"});if(!a)throw new bd("AppendContinuationItemsAction not found");return this.watch_next_feed=null==a?void 0:a.contents,(null===(n=null===(i=this.watch_next_feed)||void 0===i?void 0:i.at(-1))||void 0===n?void 0:n.is(Ng))?tA(this,QP,null===(r=this.watch_next_feed.pop())||void 0===r?void 0:r.as(Ng),"f"):tA(this,QP,void 0,"f"),this}))}like(){var t,e;return ZP(this,void 0,void 0,(function*(){const i=null===(e=null===(t=this.primary_info)||void 0===t?void 0:t.menu)||void 0===e?void 0:e.top_level_buttons.firstOfType(Xx),n=null==i?void 0:i.like_button;if(!n)throw new bd("Like button not found",{video_id:this.basic_info.id});if(!n.is(Ux))throw new bd("Like button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(n.is_toggled)throw new bd("This video is already liked",{video_id:this.basic_info.id});return yield n.endpoint.call(eA(this,KP,"f"))}))}dislike(){var t,e;return ZP(this,void 0,void 0,(function*(){const i=null===(e=null===(t=this.primary_info)||void 0===t?void 0:t.menu)||void 0===e?void 0:e.top_level_buttons.firstOfType(Xx),n=null==i?void 0:i.dislike_button;if(!n)throw new bd("Dislike button not found",{video_id:this.basic_info.id});if(!n.is(Ux))throw new bd("Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(n.is_toggled)throw new bd("This video is already disliked",{video_id:this.basic_info.id});return yield n.endpoint.call(eA(this,KP,"f"))}))}removeRating(){var t,e;return ZP(this,void 0,void 0,(function*(){let i;const n=null===(e=null===(t=this.primary_info)||void 0===t?void 0:t.menu)||void 0===e?void 0:e.top_level_buttons.firstOfType(Xx),r=null==n?void 0:n.like_button,s=null==n?void 0:n.dislike_button;if(!(null==r?void 0:r.is(Ux))||!(null==s?void 0:s.is(Ux)))throw new bd("Like/Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if((null==r?void 0:r.is_toggled)?i=r:(null==s?void 0:s.is_toggled)&&(i=s),!i)throw new bd("This video is not liked/disliked",{video_id:this.basic_info.id});return yield i.toggled_endpoint.call(eA(this,KP,"f"))}))}getLiveChat(){if(!this.livechat)throw new bd("Live Chat is not available",{video_id:this.basic_info.id});return new dP(this)}chooseFormat(t){return zP.chooseFormat(t,this.streaming_data)}toDash(t,e){return zP.toDash(this.streaming_data,t,e,eA(this,XP,"f"),eA(this,YP,"f"))}download(t={}){return ZP(this,void 0,void 0,(function*(){return zP.download(t,eA(this,KP,"f"),this.playability_status,this.streaming_data,eA(this,KP,"f").session.player,this.cpn)}))}get filters(){var t,e;return(null===(e=null===(t=this.related_chip_cloud)||void 0===t?void 0:t.chips)||void 0===e?void 0:e.map((t=>{var e;return null===(e=t.text)||void 0===e?void 0:e.toString()})))||[]}get actions(){return eA(this,KP,"f")}get cpn(){return eA(this,XP,"f")}get wn_has_continuation(){return!!eA(this,QP,"f")}get autoplay_video_endpoint(){var t,e,i;return(null===(i=null===(e=null===(t=this.autoplay)||void 0===t?void 0:t.sets)||void 0===e?void 0:e[0])||void 0===i?void 0:i.autoplay_video)||null}get music_tracks(){return[]}get page(){return eA(this,GP,"f")}};var nA,rA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};nA=new WeakMap;var sA,aA,oA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},lA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};sA=new WeakMap,aA=new WeakMap;var cA,uA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};cA=new WeakMap;var hA,dA,pA,fA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},mA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class gA{constructor(t,e){var i,n,r,s;hA.set(this,void 0),dA.set(this,void 0),pA.set(this,void 0),fA(this,dA,e,"f"),fA(this,hA,SL.parseResponse(t.data),"f");const a=null===(i=mA(this,hA,"f").contents)||void 0===i?void 0:i.item().as(xk).tabs.get({selected:!0});if(!a)throw new bd("Could not find Home tab.");if(a.key("content").isNull()){if(!mA(this,hA,"f").continuation_contents)throw new bd("Continuation did not have any content.");return fA(this,pA,mA(this,hA,"f").continuation_contents.as(NE).continuation,"f"),void(this.sections=null===(n=mA(this,hA,"f").continuation_contents.as(NE).contents)||void 0===n?void 0:n.as(vT))}fA(this,pA,null===(r=a.content)||void 0===r?void 0:r.as(Kx).continuation,"f"),this.sections=null===(s=a.content)||void 0===s?void 0:s.as(Kx).contents.as(vT)}getContinuation(){return t=this,e=void 0,n=function*(){if(!mA(this,pA,"f"))throw new bd("Continuation not found.");const t=yield mA(this,dA,"f").execute("/browse",{client:"YTMUSIC",continuation:mA(this,pA,"f")});return new gA(t,mA(this,dA,"f"))},new((i=void 0)||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}get has_continuation(){return!!mA(this,pA,"f")}get page(){return mA(this,hA,"f")}}hA=new WeakMap,dA=new WeakMap,pA=new WeakMap;const yA=gA;var vA,bA,_A,wA,TA,SA,xA=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},kA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},CA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class EA{constructor(t,e){var i,n,r,s,a;vA.set(this,void 0),bA.set(this,void 0),_A.set(this,void 0),kA(this,vA,SL.parseResponse(t.data),"f"),kA(this,bA,e,"f");const o=null===(i=CA(this,vA,"f").contents_memo)||void 0===i?void 0:i.getType(Kx).first();this.header=null===(n=null==o?void 0:o.header)||void 0===n?void 0:n.item().as(KT),this.contents=null===(r=null==o?void 0:o.contents)||void 0===r?void 0:r.as(dv,zT),kA(this,_A,null===(a=null===(s=this.contents)||void 0===s?void 0:s.find((t=>t.continuation)))||void 0===a?void 0:a.continuation,"f")}applySort(t){var e,i,n,r,s,a,o,l,c,u;return xA(this,void 0,void 0,(function*(){let h;if("string"==typeof t){const n=null===(e=CA(this,vA,"f").contents_memo)||void 0===e?void 0:e.getType(XT).first(),r=null===(i=null==n?void 0:n.menu)||void 0===i?void 0:i.options.filter((t=>t instanceof op));if(h=null==r?void 0:r.find((e=>e.title===t)),!h)throw new bd(`Sort option "${t}" not found`,{available_filters:r.map((t=>t.title))})}else t instanceof op&&(h=t);if(!h)throw new bd("Invalid sort option");if(h.selected)return this;const d=null===(a=null===(s=null===(r=null===(n=h.endpoint)||void 0===n?void 0:n.payload)||void 0===r?void 0:r.commands)||void 0===s?void 0:s.find((t=>t.browseSectionListReloadEndpoint)))||void 0===a?void 0:a.browseSectionListReloadEndpoint;if(!d)throw new bd("Failed to find sort option command");const p=yield CA(this,bA,"f").execute("/browse",{client:"YTMUSIC",continuation:d.continuation.reloadContinuationData.continuation,parse:!0}),f=null===(l=null===(o=CA(this,vA,"f").contents_memo)||void 0===o?void 0:o.getType(op))||void 0===l?void 0:l.find((t=>t.selected));return f&&(f.selected=!1),h.selected=!0,this.contents=null===(u=null===(c=p.continuation_contents)||void 0===c?void 0:c.as(NE).contents)||void 0===u?void 0:u.as(dv,zT),this}))}applyFilter(t){var e,i,n,r;return xA(this,void 0,void 0,(function*(){let s;const a=null===(e=CA(this,vA,"f").contents_memo)||void 0===e?void 0:e.getType(Qf).first();if("string"==typeof t){if(s=null==a?void 0:a.chips.get({text:t}),!s)throw new bd(`Filter "${t}" not found`,{available_filters:this.filters})}else t instanceof Yf&&(s=t);if(!s)throw new bd("Invalid filter",t);const o=new Zd(null===(r=null===(n=null===(i=s.endpoint)||void 0===i?void 0:i.payload)||void 0===n?void 0:n.commands)||void 0===r?void 0:r[0]),l=yield o.call(CA(this,bA,"f"),{client:"YTMUSIC"});return new EA(l,CA(this,bA,"f"))}))}getContinuation(){return xA(this,void 0,void 0,(function*(){if(!CA(this,_A,"f"))throw new bd("No continuation available");const t=yield CA(this,bA,"f").execute("/browse",{client:"YTMUSIC",continuation:CA(this,_A,"f")});return new IA(t,CA(this,bA,"f"))}))}get has_continuation(){return!!CA(this,_A,"f")}get sort_options(){var t,e;const i=null===(t=CA(this,vA,"f").contents_memo)||void 0===t?void 0:t.getType(XT).first();return(null===(e=null==i?void 0:i.menu)||void 0===e?void 0:e.options.filter((t=>t instanceof op))).map((t=>t.title))}get filters(){var t,e;return(null===(e=null===(t=CA(this,vA,"f").contents_memo)||void 0===t?void 0:t.getType(Qf))||void 0===e?void 0:e.first().chips.map((t=>t.text)))||[]}get page(){return CA(this,vA,"f")}}vA=new WeakMap,bA=new WeakMap,_A=new WeakMap;class IA{constructor(t,e){var i,n;if(wA.set(this,void 0),TA.set(this,void 0),SA.set(this,void 0),kA(this,wA,SL.parseResponse(t.data),"f"),kA(this,TA,e,"f"),!CA(this,wA,"f").continuation_contents)throw new bd("No continuation contents found");this.contents=CA(this,wA,"f").continuation_contents.as(FE,$E),kA(this,SA,(null===(i=CA(this,wA,"f").continuation_contents)||void 0===i?void 0:i.key("continuation").isNull())?null:null===(n=CA(this,wA,"f").continuation_contents)||void 0===n?void 0:n.key("continuation").string(),"f")}getContinuation(){return xA(this,void 0,void 0,(function*(){if(!CA(this,SA,"f"))throw new bd("No continuation available");const t=yield CA(this,TA,"f").execute("/browse",{client:"YTMUSIC",continuation:CA(this,SA,"f")});return new IA(t,CA(this,TA,"f"))}))}get has_continuation(){return!!CA(this,SA,"f")}get page(){return CA(this,wA,"f")}}wA=new WeakMap,TA=new WeakMap,SA=new WeakMap;const PA=EA;var AA,LA,OA,DA,MA,RA,NA,BA=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},FA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},$A=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class UA{constructor(t,e){var i,n,r,s,a,o;if(AA.add(this),LA.set(this,void 0),OA.set(this,void 0),DA.set(this,void 0),MA.set(this,void 0),RA.set(this,void 0),FA(this,OA,e,"f"),FA(this,LA,SL.parseResponse(t.data),"f"),FA(this,MA,null,"f"),FA(this,RA,null,"f"),$A(this,LA,"f").continuation_contents){const t=null===(i=$A(this,LA,"f").continuation_contents)||void 0===i?void 0:i.as(BE);this.items=t.contents,FA(this,DA,t.continuation,"f")}else"MusicEditablePlaylistDetailHeader"===(null===(n=$A(this,LA,"f").header)||void 0===n?void 0:n.item().type)?this.header=null===(r=$A(this,LA,"f").header)||void 0===r?void 0:r.item().as(CT).header.item().as(TT):this.header=null===(s=$A(this,LA,"f").header)||void 0===s?void 0:s.item().as(TT),this.items=(null===(a=$A(this,LA,"f").contents_memo)||void 0===a?void 0:a.getType(UT).first().contents)||null,FA(this,DA,(null===(o=$A(this,LA,"f").contents_memo)||void 0===o?void 0:o.getType(UT).first().continuation)||null,"f")}getContinuation(){return BA(this,void 0,void 0,(function*(){if(!$A(this,DA,"f"))throw new bd("Continuation not found.");const t=yield $A(this,OA,"f").execute("/browse",{client:"YTMUSIC",continuation:$A(this,DA,"f")});return new UA(t,$A(this,OA,"f"))}))}getRelated(){var t,e,i,n,r;return BA(this,void 0,void 0,(function*(){let s=null===(e=null===(t=$A(this,LA,"f").contents_memo)||void 0===t?void 0:t.getType(Kx))||void 0===e?void 0:e[0].continuation;for(;s;){const t=yield $A(this,OA,"f").execute("/browse",{client:"YTMUSIC",continuation:s,parse:!0}),e=null===(i=t.continuation_contents)||void 0===i?void 0:i.as(NE),a=null===(n=null==e?void 0:e.contents)||void 0===n?void 0:n.as(vT,zT),o=null===(r=null==a?void 0:a.matchCondition((t=>t.is(vT))))||void 0===r?void 0:r.as(vT);if(o)return o;s=null==e?void 0:e.continuation}throw new bd("Target section not found.")}))}getSuggestions(t=!0){return BA(this,void 0,void 0,(function*(){const e=t||!$A(this,MA,"f")?$A(this,AA,"m",NA).call(this):Promise.resolve(null),i=yield e;return i&&(FA(this,MA,i.items,"f"),FA(this,RA,i.continuation,"f")),(null==i?void 0:i.items)||$A(this,MA,"f")}))}get page(){return $A(this,LA,"f")}get has_continuation(){return!!$A(this,DA,"f")}}LA=new WeakMap,OA=new WeakMap,DA=new WeakMap,MA=new WeakMap,RA=new WeakMap,AA=new WeakSet,NA=function(){var t,e,i,n,r;return BA(this,void 0,void 0,(function*(){const s=$A(this,RA,"f")||(null===(e=null===(t=$A(this,LA,"f").contents_memo)||void 0===t?void 0:t.get("SectionList"))||void 0===e?void 0:e[0].as(Kx).continuation);if(s){const t=yield $A(this,OA,"f").execute("/browse",{client:"YTMUSIC",continuation:s,parse:!0}),e=null===(i=t.continuation_contents)||void 0===i?void 0:i.as(NE),a=null===(n=null==e?void 0:e.contents)||void 0===n?void 0:n.as(vT,zT),o=null===(r=null==a?void 0:a.matchCondition((t=>t.is(zT))))||void 0===r?void 0:r.as(zT);return{items:(null==o?void 0:o.contents)||[],continuation:(null==o?void 0:o.continuation)||null}}return{items:[],continuation:null}}))};const jA=UA;var VA,HA,qA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},WA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};VA=new WeakMap,HA=new WeakMap;var zA,GA,KA,YA,XA,QA=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},JA=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},ZA=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class tL{constructor(t,e,i){var n,r,s;if(zA.set(this,void 0),GA.set(this,void 0),KA.set(this,void 0),JA(this,GA,e,"f"),JA(this,zA,SL.parseResponse(t.data),"f"),!ZA(this,zA,"f").contents||!ZA(this,zA,"f").contents_memo)throw new bd("Response did not contain any contents.");const a=ZA(this,zA,"f").contents.item().as(Vk).tabs.get({selected:!0});if(!a)throw new bd("Could not find target tab.");const o=null===(n=a.content)||void 0===n?void 0:n.as(Kx);if(!o)throw new bd("Target tab did not have any content.");this.header=null===(r=o.header)||void 0===r?void 0:r.item().as(Qf),this.contents=o.contents.as(zT,ob),i&&JA(this,KA,null===(s=this.contents.firstOfType(zT))||void 0===s?void 0:s.continuation,"f")}getMore(t){return QA(this,void 0,void 0,(function*(){if(!t||!t.endpoint)throw new bd("Cannot retrieve more items for this shelf because it does not have an endpoint.");const e=yield t.endpoint.call(ZA(this,GA,"f"),{client:"YTMUSIC"});if(!e)throw new bd("Endpoint did not return any data");return new tL(e,ZA(this,GA,"f"),!0)}))}getContinuation(){return QA(this,void 0,void 0,(function*(){if(!ZA(this,KA,"f"))throw new bd("Continuation not found.");const t=yield ZA(this,GA,"f").execute("/search",{continuation:ZA(this,KA,"f"),client:"YTMUSIC"});return new iL(ZA(this,GA,"f"),t)}))}applyFilter(t){var e,i;return QA(this,void 0,void 0,(function*(){let n;if("string"==typeof t){if(n=null===(i=null===(e=this.header)||void 0===e?void 0:e.chips)||void 0===i?void 0:i.as(Yf).get({text:t}),!n)throw new bd("Could not find filter with given name.",{available_filters:this.filters})}else(null==t?void 0:t.is(Yf))&&(n=t);if(!n)throw new bd("Invalid filter",{available_filters:this.filters});if(null==n?void 0:n.is_selected)return this;if(!n.endpoint)throw new bd("Selected filter does not have an endpoint.");const r=yield n.endpoint.call(ZA(this,GA,"f"),{client:"YTMUSIC"});return new tL(r,ZA(this,GA,"f"),!0)}))}get filters(){var t,e;return(null===(e=null===(t=this.header)||void 0===t?void 0:t.chips)||void 0===e?void 0:e.as(Yf).map((t=>t.text)))||[]}get has_continuation(){return!!ZA(this,KA,"f")}get did_you_mean(){var t;return null===(t=ZA(this,zA,"f").contents_memo)||void 0===t?void 0:t.getType(Iy).first()}get showing_results_for(){var t;return null===(t=ZA(this,zA,"f").contents_memo)||void 0===t?void 0:t.getType(dk).first()}get message(){var t;return null===(t=ZA(this,zA,"f").contents_memo)||void 0===t?void 0:t.getType(vy).first()}get songs(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(zT).find((t=>"Songs"===t.title.toString()))}get videos(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(zT).find((t=>"Videos"===t.title.toString()))}get albums(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(zT).find((t=>"Albums"===t.title.toString()))}get artists(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(zT).find((t=>"Artists"===t.title.toString()))}get playlists(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(zT).find((t=>"Community playlists"===t.title.toString()))}get results(){var t,e;return null===(e=null===(t=this.contents)||void 0===t?void 0:t.firstOfType(zT))||void 0===e?void 0:e.contents}get sections(){var t;return null===(t=this.contents)||void 0===t?void 0:t.filterType(zT)}get page(){return ZA(this,zA,"f")}}zA=new WeakMap,GA=new WeakMap,KA=new WeakMap;const eL=tL;class iL{constructor(t,e){var i,n;YA.set(this,void 0),XA.set(this,void 0),JA(this,YA,t,"f"),JA(this,XA,SL.parseResponse(e.data),"f"),this.header=null===(i=ZA(this,XA,"f").header)||void 0===i?void 0:i.item().as(AT),this.contents=null===(n=ZA(this,XA,"f").continuation_contents)||void 0===n?void 0:n.as(FE)}getContinuation(){var t;return QA(this,void 0,void 0,(function*(){if(!(null===(t=this.contents)||void 0===t?void 0:t.continuation))throw new bd("Continuation not found.");const e=yield ZA(this,YA,"f").execute("/search",{continuation:this.contents.continuation,client:"YTMUSIC"});return new iL(ZA(this,YA,"f"),e)}))}get has_continuation(){var t;return!!(null===(t=this.contents)||void 0===t?void 0:t.continuation)}get page(){return ZA(this,XA,"f")}}YA=new WeakMap,XA=new WeakMap;var nL,rL,sL,aL,oL=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},lL=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},cL=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};nL=new WeakMap,rL=new WeakMap,sL=new WeakMap,aL=new WeakMap;const uL=class{constructor(t,e,i){var n,r,s,a,o,l,c,u,h,d,p;nL.set(this,void 0),rL.set(this,void 0),sL.set(this,void 0),aL.set(this,void 0),lL(this,rL,e,"f");const f=SL.parseResponse(t[0].data),m=(null===(n=null==t?void 0:t[1])||void 0===n?void 0:n.data)?SL.parseResponse(t[1].data):void 0;if(lL(this,nL,[f,m],"f"),lL(this,sL,i,"f"),"ERROR"===(null===(r=f.playability_status)||void 0===r?void 0:r.status))throw new bd("This video is unavailable",f.playability_status);if(!(null===(s=f.microformat)||void 0===s?void 0:s.is(Pw)))throw new bd("Invalid microformat",f.microformat);if(this.basic_info=Object.assign(Object.assign({},f.video_details),{description:null===(a=f.microformat)||void 0===a?void 0:a.description,is_unlisted:null===(o=f.microformat)||void 0===o?void 0:o.is_unlisted,is_family_safe:null===(l=f.microformat)||void 0===l?void 0:l.is_family_safe,url_canonical:null===(c=f.microformat)||void 0===c?void 0:c.url_canonical,tags:null===(u=f.microformat)||void 0===u?void 0:u.tags}),this.streaming_data=f.streaming_data,this.playability_status=f.playability_status,this.storyboards=f.storyboards,this.endscreen=f.endscreen,lL(this,aL,f.playback_tracking,"f"),m){const t=null===(d=null===(h=m.contents_memo)||void 0===h?void 0:h.getType(hE))||void 0===d?void 0:d[0];this.tabs=null==t?void 0:t.tabs.array().as(Tk),this.current_video_endpoint=m.current_video_endpoint,this.player_overlays=null===(p=m.player_overlays)||void 0===p?void 0:p.item().as(_S)}}toDash(t,e){return zP.toDash(this.streaming_data,t,e,cL(this,sL,"f"),cL(this,rL,"f").session.player)}chooseFormat(t){return zP.chooseFormat(t,this.streaming_data)}download(t={}){return oL(this,void 0,void 0,(function*(){return zP.download(t,cL(this,rL,"f"),this.playability_status,this.streaming_data,cL(this,rL,"f").session.player)}))}getTab(t){var e,i;return oL(this,void 0,void 0,(function*(){if(!this.tabs)throw new bd("Could not find any tab");const n=this.tabs.get({title:t})||this.tabs.matchCondition((e=>{var i,n;return(null===(n=null===(i=e.endpoint.payload.browseEndpointContextSupportedConfigs)||void 0===i?void 0:i.browseEndpointContextMusicConfig)||void 0===n?void 0:n.pageType)===t}))||(null===(e=this.tabs)||void 0===e?void 0:e[0]);if(!n)throw new bd(`Tab "${t}" not found`,{available_tabs:this.available_tabs});if(n.content)return n.content;const r=yield n.endpoint.call(cL(this,rL,"f"),{client:"YTMUSIC",parse:!0});if("Message"===(null===(i=r.contents)||void 0===i?void 0:i.item().key("type").string()))return r.contents.item().as(vy);if(!r.contents)throw new bd("Page contents was empty",r);return r.contents.item().as(Kx).contents}))}getUpNext(t=!0){var e,i;return oL(this,void 0,void 0,(function*(){const n=yield this.getTab("Up next");if(!n||!n.content)throw new bd("Music queue was empty, the video id is probably invalid.",n);const r=n.content.as(VT);if(!r.playlist_id&&t){const t=r.contents.firstOfType(qp);if(!t)throw new bd("Automix item not found");const n=yield null===(e=t.playlist_video)||void 0===e?void 0:e.endpoint.call(cL(this,rL,"f"),{videoId:this.basic_info.id,client:"YTMUSIC",parse:!0});if(!n||!n.contents_memo)throw new bd("Could not fetch automix");return null===(i=n.contents_memo.getType(VT))||void 0===i?void 0:i[0]}return r}))}getRelated(){return oL(this,void 0,void 0,(function*(){return yield this.getTab("MUSIC_PAGE_TYPE_TRACK_RELATED")}))}getLyrics(){return oL(this,void 0,void 0,(function*(){return(yield this.getTab("MUSIC_PAGE_TYPE_TRACK_LYRICS")).firstOfType(_T)}))}addToWatchHistory(){return oL(this,void 0,void 0,(function*(){if(!cL(this,aL,"f"))throw new bd("Playback tracking not available");const t={cpn:cL(this,sL,"f"),fmt:251,rtn:0,rt:0},e=cL(this,aL,"f").videostats_playback_url.replace("https://s.","https://music.");return yield cL(this,rL,"f").stats(e,{client_name:jd.CLIENTS.YTMUSIC.NAME,client_version:jd.CLIENTS.YTMUSIC.VERSION},t)}))}get available_tabs(){return this.tabs?this.tabs.map((t=>t.title)):[]}get page(){return cL(this,nL,"f")}};class hL extends nI{constructor(t,e,i=!1){var n,r;super(t,e,i),this.header=null===(n=this.page.header)||void 0===n?void 0:n.item().as(uf),this.contents=this.memo.getType(ob).first()||(null===(r=this.page.continuation_contents)||void 0===r?void 0:r.as(OE))}getContinuation(){var t,e,i,n,r;return e=this,i=void 0,r=function*(){const e=yield this.actions.execute("/browse",{continuation:null===(t=this.contents)||void 0===t?void 0:t.continuation,client:"YTKIDS"});return new hL(this.actions,e)},new((n=void 0)||(n=Promise))((function(t,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,o)}l((r=r.apply(e,i||[])).next())}))}get has_continuation(){var t;return!!(null===(t=this.contents)||void 0===t?void 0:t.continuation)}}const dL=hL;class pL extends nI{constructor(t,e,i=!1){var n,r;super(t,e,i),this.header=null===(n=this.page.header)||void 0===n?void 0:n.item().as(mE),this.contents=null===(r=this.page.contents)||void 0===r?void 0:r.item().as(bE)}selectCategoryTab(t){var e,i,n,r,s;return i=this,n=void 0,s=function*(){let i;if("string"==typeof t?i=null===(e=this.header)||void 0===e?void 0:e.category_tabs.find((e=>e.title.toString()===t)):(null==t?void 0:t.is(yE))&&(i=t),!i)throw new bd(`Tab "${t}" not found`);const n=yield i.endpoint.call(this.actions,{client:"YTKIDS",parse:!0});return n.header=this.page.header,n.header_memo=this.page.header_memo,new pL(this.actions,n,!0)},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,o)}l((s=s.apply(i,n||[])).next())}))}get categories(){var t;return(null===(t=this.header)||void 0===t?void 0:t.category_tabs.map((t=>t.title.toString())))||[]}}const fL=pL,mL=class extends nI{constructor(t,e){super(t,e),this.estimated_results=this.page.estimated_results;const i=this.memo.getType(ob).first();if(!i)throw new bd("No item section found in search response.");this.contents=i.contents}};var gL,yL,vL,bL,_L=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},wL=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},TL=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};gL=new WeakMap,yL=new WeakMap,vL=new WeakMap,bL=new WeakMap;const SL=LE;var xL,kL,CL,EL,IL,PL=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},AL=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};kL=new WeakMap,xL=new WeakSet,CL=function(t){return PL(this,void 0,void 0,(function*(){return{success:t.ok,status_code:t.status,data:JSON.parse(yield t.text())}}))},EL=function(t){return"on_response_received_actions"in t},IL=function(t){return["FElibrary","FEhistory","FEsubscriptions","FEmusic_listening_review","FEmusic_library_landing","SPaccount_overview","SPaccount_notifications","SPaccount_privacy","SPtime_watched"].includes(t)};var LL,OL,DL,ML,RL=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},NL=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},BL=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class FL{constructor(t,e,i,n){LL.set(this,void 0),OL.set(this,void 0),DL.set(this,void 0),ML.set(this,void 0),NL(this,LL,i,"f"),NL(this,OL,e,"f"),NL(this,DL,t,"f"),NL(this,ML,n,"f")}static create(t,e=vd.shim.fetch){return RL(this,void 0,void 0,(function*(){const i=new URL("/iframe_api",jd.URLS.YT_BASE),n=yield e(i);if(200!==n.status)throw new Sd("Failed to request player id");const r=Ed(yield n.text(),"player\\/","\\/");if(!r)throw new Sd("Failed to get player id");if(t){const e=yield FL.fromCache(t,r);if(e)return e}const s=new URL(`/s/player/${r}/player_ias.vflset/en_US/base.js`,jd.URLS.YT_BASE),a=yield e(s,{headers:{"user-agent":Pd("desktop")}});if(!a.ok)throw new Sd(`Failed to get player data: ${a.status}`);const o=yield a.text(),l=this.extractSigTimestamp(o),c=this.extractSigSourceCode(o),u=this.extractNSigSourceCode(o);return yield FL.fromSource(t,l,c,u,r)}))}decipher(t,e,i){if(!(t=t||e||i))throw new Sd("No valid URL to decipher");const n=new URLSearchParams(t),r=new URL(n.get("url")||t);if(e||i){const t=vd.shim.eval(BL(this,OL,"f"),{sig:n.get("s")});if("string"!=typeof t)throw new Sd("Failed to decipher signature");const e=n.get("sp");e?r.searchParams.set(e,t):r.searchParams.set("signature",t)}const s=r.searchParams.get("n");if(s){const t=vd.shim.eval(BL(this,LL,"f"),{nsig:s});if("string"!=typeof t)throw new Sd("Failed to decipher nsig");t.startsWith("enhanced_except_")&&console.warn('Warning:\nCould not transform nsig, download may be throttled.\nChanging the InnerTube client to "ANDROID" might help!'),r.searchParams.set("n",t)}return r.toString()}static fromCache(t,e){return RL(this,void 0,void 0,(function*(){const i=yield t.get(e);if(!i)return null;const n=new DataView(i);if(n.getUint32(0,!0)!==FL.LIBRARY_VERSION)return null;const r=n.getUint32(4,!0),s=n.getUint32(8,!0),a=i.slice(12,12+s),o=i.slice(12+s),l=new TextDecoder,c=l.decode(a),u=l.decode(o);return new FL(r,c,u,e)}))}static fromSource(t,e,i,n,r){return RL(this,void 0,void 0,(function*(){const s=new FL(e,i,n,r);return yield s.cache(t),s}))}cache(t){return RL(this,void 0,void 0,(function*(){if(!t)return;const e=new TextEncoder,i=e.encode(BL(this,OL,"f")),n=e.encode(BL(this,LL,"f")),r=new ArrayBuffer(12+i.byteLength+n.byteLength),s=new DataView(r);s.setUint32(0,FL.LIBRARY_VERSION,!0),s.setUint32(4,BL(this,DL,"f"),!0),s.setUint32(8,i.byteLength,!0),new Uint8Array(r).set(i,12),new Uint8Array(r).set(n,12+i.byteLength),yield t.set(BL(this,ML,"f"),new Uint8Array(r))}))}static extractSigTimestamp(t){return parseInt(Ed(t,"signatureTimestamp:",",")||"0")}static extractSigSourceCode(t){var e,i,n;const r=Ed(t,'function(a){a=a.split("")','return a.join("")}'),s=null===(n=null===(i=null===(e=null==r?void 0:r.split(/\.|\[/))||void 0===e?void 0:e[0])||void 0===i?void 0:i.replace(";",""))||void 0===n?void 0:n.trim(),a=Ed(t,`var ${s}={`,"};");return a&&r||console.warn(new Sd("Failed to extract signature decipher algorithm")),`function descramble_sig(a) { a = a.split(""); let ${s}={${a}}${r} return a.join("") } descramble_sig(sig);`}static extractNSigSourceCode(t){const e=`function descramble_nsig(a) { let b=a.split("")${Ed(t,'b=a.split("")','}return b.join("")}')}} return b.join(""); } descramble_nsig(nsig)`;return e||console.warn(new Sd("Failed to extract n-token decipher algorithm")),e}get url(){return new URL(`/s/player/${BL(this,ML,"f")}/player_ias.vflset/en_US/base.js`,jd.URLS.YT_BASE).toString()}get sts(){return BL(this,DL,"f")}get nsig_sc(){return BL(this,LL,"f")}get sig_sc(){return BL(this,OL,"f")}static get LIBRARY_VERSION(){return 2}}LL=new WeakMap,OL=new WeakMap,DL=new WeakMap,ML=new WeakMap;var $L,UL,jL,VL,HL,qL,WL,zL,GL,KL,YL=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},XL=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},QL=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};UL=new WeakMap,jL=new WeakMap,VL=new WeakMap,HL=new WeakMap,$L=new WeakSet,qL=function(){var t;return YL(this,void 0,void 0,(function*(){const e=yield null===(t=QL(this,jL,"f").cache)||void 0===t?void 0:t.get("youtubei_oauth_credentials");if(!e)return!1;const i=new TextDecoder,n=JSON.parse(i.decode(e));return XL(this,VL,{access_token:n.access_token,refresh_token:n.refresh_token,expires:new Date(n.expires)},"f"),QL(this,jL,"f").emit("auth",{credentials:QL(this,VL,"f"),status:"SUCCESS"}),!0}))},WL=function(){return YL(this,void 0,void 0,(function*(){XL(this,UL,yield QL(this,$L,"m",KL).call(this),"f");const t={client_id:QL(this,UL,"f").client_id,scope:jd.OAUTH.SCOPE,device_id:vd.shim.uuidv4(),model_name:jd.OAUTH.MODEL_NAME},e=yield QL(this,jL,"f").http.fetch_function(new URL("/o/oauth2/device/code",jd.URLS.YT_BASE),{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}}),i=yield e.json();QL(this,jL,"f").emit("auth-pending",i),XL(this,HL,i.interval,"f"),QL(this,$L,"m",zL).call(this,i.device_code)}))},zL=function(t){const e=setInterval((()=>YL(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},QL(this,UL,"f")),{code:t,grant_type:jd.OAUTH.GRANT_TYPE});try{const t=yield QL(this,jL,"f").http.fetch_function(new URL("/o/oauth2/token",jd.URLS.YT_BASE),{body:JSON.stringify(i),method:"POST",headers:{"Content-Type":"application/json"}}),n=yield t.json();if(n.error){switch(n.error){case"access_denied":QL(this,jL,"f").emit("auth-error",new Td("Access was denied.",{status:"ACCESS_DENIED"}));break;case"expired_token":QL(this,jL,"f").emit("auth-error",new Td("The device code has expired, restarting auth flow.",{status:"DEVICE_CODE_EXPIRED"})),clearInterval(e),QL(this,$L,"m",WL).call(this)}return}const r=new Date((new Date).getTime()+1e3*n.expires_in);XL(this,VL,{access_token:n.access_token,refresh_token:n.refresh_token,expires:r},"f"),QL(this,jL,"f").emit("auth",{credentials:QL(this,VL,"f"),status:"SUCCESS"}),clearInterval(e)}catch(t){return clearInterval(e),QL(this,jL,"f").emit("auth-error",new Td("Could not obtain user code.",{status:"FAILED",error:t}))}}))),1e3*QL(this,HL,"f"))},GL=function(){return YL(this,void 0,void 0,(function*(){if(!QL(this,VL,"f"))return;XL(this,UL,yield QL(this,$L,"m",KL).call(this),"f");const t=Object.assign(Object.assign({},QL(this,UL,"f")),{refresh_token:QL(this,VL,"f").refresh_token,grant_type:"refresh_token"}),e=yield QL(this,jL,"f").http.fetch_function(new URL("/o/oauth2/token",jd.URLS.YT_BASE),{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}}),i=yield e.json(),n=new Date((new Date).getTime()+1e3*i.expires_in);XL(this,VL,{access_token:i.access_token,refresh_token:i.refresh_token||QL(this,VL,"f").refresh_token,expires:n},"f"),QL(this,jL,"f").emit("update-credentials",{credentials:QL(this,VL,"f"),status:"SUCCESS"})}))},KL=function(){var t;return YL(this,void 0,void 0,(function*(){const e=yield QL(this,jL,"f").http.fetch_function(new URL("/tv",jd.URLS.YT_BASE),{headers:jd.OAUTH.HEADERS}),i=yield e.text(),n=null===(t=jd.OAUTH.REGEX.AUTH_SCRIPT.exec(i))||void 0===t?void 0:t[1];if(!n)throw new Td("Could not obtain script url.",{status:"FAILED"});const r=yield QL(this,jL,"f").http.fetch(n,{baseURL:jd.URLS.YT_BASE}),s=(yield r.text()).replace(/\n/g,"").match(jd.OAUTH.REGEX.CLIENT_IDENTITY),a=null==s?void 0:s.groups;if(!a)throw new Td("Could not obtain client identity.",{status:"FAILED"});return a}))};var JL,ZL,tO,eO,iO,nO,rO,sO,aO,oO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},lO=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},cO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};!function(t){t.WEB="WEB",t.KIDS="WEB_KIDS",t.MUSIC="WEB_REMIX",t.ANDROID="ANDROID",t.ANDROID_MUSIC="ANDROID_MUSIC",t.ANDROID_CREATOR="ANDROID_CREATOR",t.TV_EMBEDDED="TVHTML5_SIMPLY_EMBEDDED_PLAYER"}(aO=aO||(aO={}));class uO extends Wd{constructor(t,e,i,n,r,s,a,o){super(),ZL.set(this,void 0),tO.set(this,void 0),eO.set(this,void 0),iO.set(this,void 0),nO.set(this,void 0),lO(this,eO,t,"f"),lO(this,iO,n,"f"),lO(this,tO,e,"f"),lO(this,ZL,i,"f"),lO(this,nO,r,"f"),this.http=new BP(this,s,a),this.actions=new class{constructor(t){xL.add(this),kL.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,kL,t,"f")}get session(){return AL(this,kL,"f")}getVideoInfo(t,e,i,n){var r;return PL(this,void 0,void 0,(function*(){const s={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,referer:"https://www.youtube.com",currentUrl:`/watch?v=${t}`,autonavState:"STATE_NONE",signatureTimestamp:(null===(r=AL(this,kL,"f").player)||void 0===r?void 0:r.sts)||0,autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1"}},attestationRequest:{omitBotguardData:!0},videoId:t};i&&(s.client=i),e&&(s.cpn=e),n&&(s.playlistId=n);const a=yield AL(this,kL,"f").http.fetch("/player",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});return AL(this,xL,"m",CL).call(this,a)}))}stats(t,e,i){return PL(this,void 0,void 0,(function*(){const n=new URL(t);n.searchParams.set("ver","2"),n.searchParams.set("c",e.client_name.toLowerCase()),n.searchParams.set("cbrver",e.client_version),n.searchParams.set("cver",e.client_version);for(const t of Object.keys(i))n.searchParams.set(t,i[t]);return yield AL(this,kL,"f").http.fetch(n)}))}execute(t,e){var i,n;return PL(this,void 0,void 0,(function*(){let r;if(e&&!e.protobuf){if(r=Object.assign({},e),Reflect.has(r,"browseId")&&AL(this,xL,"m",IL).call(this,r.browseId)&&!AL(this,kL,"f").logged_in)throw new bd("You must be signed in to perform this operation.");Reflect.has(r,"override_endpoint")&&delete r.override_endpoint,Reflect.has(r,"parse")&&delete r.parse,Reflect.has(r,"request")&&delete r.request,Reflect.has(r,"clientActions")&&delete r.clientActions,Reflect.has(r,"settingItemIdForClient")&&delete r.settingItemIdForClient,Reflect.has(r,"action")&&(r.actions=[r.action],delete r.action),Reflect.has(r,"boolValue")&&(r.newValue={boolValue:r.boolValue},delete r.boolValue),Reflect.has(r,"token")&&(r.continuation=r.token,delete r.token),"YTMUSIC"===(null==r?void 0:r.client)&&(r.isAudioOnly=!0)}else e&&(r=e.serialized_data);const s=Reflect.has(e||{},"override_endpoint")?null==e?void 0:e.override_endpoint:t,a=yield AL(this,kL,"f").http.fetch(s,{method:"POST",body:(null==e?void 0:e.protobuf)?r:JSON.stringify(r||{}),headers:{"Content-Type":(null==e?void 0:e.protobuf)?"application/x-protobuf":"application/json"}});if(null==e?void 0:e.parse){let t=SL.parseResponse(yield a.json());if(AL(this,xL,"m",EL).call(this,t)&&"navigateAction"===(null===(n=null===(i=t.on_response_received_actions)||void 0===i?void 0:i.first())||void 0===n?void 0:n.type)){const e=t.on_response_received_actions.firstOfType(DE);e&&(t=yield e.endpoint.call(this,{parse:!0}))}return t}return AL(this,xL,"m",CL).call(this,a)}))}}(this),this.oauth=new class{constructor(t){$L.add(this),UL.set(this,void 0),jL.set(this,void 0),VL.set(this,void 0),HL.set(this,5),XL(this,jL,t,"f")}init(t){return YL(this,void 0,void 0,(function*(){XL(this,VL,t,"f"),this.validateCredentials()?this.has_access_token_expired||QL(this,jL,"f").emit("auth",{credentials:QL(this,VL,"f"),status:"SUCCESS"}):(yield QL(this,$L,"m",qL).call(this))||(yield QL(this,$L,"m",WL).call(this))}))}cacheCredentials(){var t;return YL(this,void 0,void 0,(function*(){const e=(new TextEncoder).encode(JSON.stringify(QL(this,VL,"f")));yield null===(t=QL(this,jL,"f").cache)||void 0===t?void 0:t.set("youtubei_oauth_credentials",e.buffer)}))}removeCache(){var t;return YL(this,void 0,void 0,(function*(){yield null===(t=QL(this,jL,"f").cache)||void 0===t?void 0:t.remove("youtubei_oauth_credentials")}))}refreshIfRequired(){return YL(this,void 0,void 0,(function*(){this.has_access_token_expired&&(yield QL(this,$L,"m",GL).call(this))}))}revokeCredentials(){return YL(this,void 0,void 0,(function*(){if(QL(this,VL,"f"))return yield this.removeCache(),QL(this,jL,"f").http.fetch_function(new URL(`/o/oauth2/revoke?token=${encodeURIComponent(QL(this,VL,"f").access_token)}`,jd.URLS.YT_BASE),{method:"post"})}))}get credentials(){return QL(this,VL,"f")}get has_access_token_expired(){const t=QL(this,VL,"f")?new Date(QL(this,VL,"f").expires).getTime():-1/0;return(new Date).getTime()>t}validateCredentials(){return QL(this,VL,"f")&&Reflect.has(QL(this,VL,"f"),"access_token")&&Reflect.has(QL(this,VL,"f"),"refresh_token")&&Reflect.has(QL(this,VL,"f"),"expires")||!1}}(this),this.logged_in=!!s,this.cache=o}on(t,e){super.on(t,e)}once(t,e){super.once(t,e)}static create(t={}){return oO(this,void 0,void 0,(function*(){const{context:e,api_key:i,api_version:n,account_index:r}=yield uO.getSessionData(t.lang,t.location,t.account_index,t.enable_safety_mode,t.generate_session_locally,t.device_category,t.client_type,t.timezone,t.fetch);return new uO(e,i,n,r,!1===t.retrieve_player?void 0:yield FL.create(t.cache,t.fetch),t.cookie,t.fetch,t.cache)}))}static getSessionData(t="",e="",i=0,n=!1,r=!1,s="desktop",a=aO.WEB,o=Intl.DateTimeFormat().resolvedOptions().timeZone,l=vd.shim.fetch){return oO(this,void 0,void 0,(function*(){let c;return c=r?cO(this,JL,"m",sO).call(this,{lang:t,location:e,time_zone:o,device_category:s,client_name:a,enable_safety_mode:n}):yield cO(this,JL,"m",rO).call(this,{lang:t,location:e,time_zone:o,device_category:s,client_name:a,enable_safety_mode:n},l),Object.assign(Object.assign({},c),{account_index:i})}))}signIn(t){return oO(this,void 0,void 0,(function*(){return new Promise(((e,i)=>oO(this,void 0,void 0,(function*(){const n=t=>i(t);this.once("auth",(t=>{this.off("auth-error",n),"SUCCESS"===t.status&&(this.logged_in=!0,e()),i(t)})),this.once("auth-error",n);try{yield this.oauth.init(t),this.oauth.validateCredentials()&&(yield this.oauth.refreshIfRequired(),this.logged_in=!0,e())}catch(t){i(t)}}))))}))}signOut(){return oO(this,void 0,void 0,(function*(){if(!this.logged_in)throw new bd("You must be signed in to perform this operation.");const t=yield this.oauth.revokeCredentials();return this.logged_in=!1,t}))}get key(){return cO(this,tO,"f")}get api_version(){return cO(this,ZL,"f")}get client_version(){return cO(this,eO,"f").client.clientVersion}get client_name(){return cO(this,eO,"f").client.clientName}get account_index(){return cO(this,iO,"f")}get context(){return cO(this,eO,"f")}get player(){return cO(this,nO,"f")}get lang(){return cO(this,eO,"f").client.hl}}JL=uO,ZL=new WeakMap,tO=new WeakMap,eO=new WeakMap,iO=new WeakMap,nO=new WeakMap,rO=function(t,e=vd.shim.fetch){return oO(this,void 0,void 0,(function*(){const i=new URL("/sw.js_data",jd.URLS.YT_BASE),n=yield e(i,{headers:{"accept-language":t.lang||"en-US","user-agent":Pd("desktop"),accept:"*/*",referer:"https://www.youtube.com/sw.js",cookie:`PREF=tz=${t.time_zone.replace("/",".")};VISITOR_INFO1_LIVE=${jd.CLIENTS.WEB.STATIC_VISITOR_ID};`}});if(!n.ok)throw new xd(`Failed to retrieve session data: ${n.status}`);const r=yield n.text(),s=JSON.parse(r.replace(/^\)\]\}'/,""))[0][2],a=`v${s[0][0][6]}`,[[o],l]=s;return{context:{client:{hl:o[0],gl:t.location||o[2],remoteHost:o[3],screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:o[13],userAgent:o[14],clientName:t.client_name,clientVersion:o[16],osName:o[17],osVersion:o[18],platform:t.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:o[79]||t.time_zone,browserName:o[86],browserVersion:o[87],originalUrl:jd.URLS.YT_BASE,deviceMake:o[11],deviceModel:o[12],utcOffsetMinutes:(new Date).getTimezoneOffset()},user:{enableSafetyMode:t.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0}},api_key:l,api_version:a}}))},sO=function(t){const e=jd.CLIENTS.WEB.STATIC_VISITOR_ID,i=Math.floor(Date.now()/1e3);return{context:{client:{hl:t.lang||"en",gl:t.location||"US",screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:yg.encodeVisitorData(e,i),userAgent:Pd("desktop"),clientName:t.client_name,clientVersion:Fd.WEB.VERSION,osName:"Windows",osVersion:"10.0",platform:t.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:t.time_zone,originalUrl:jd.URLS.YT_BASE,deviceMake:"",deviceModel:"",utcOffsetMinutes:(new Date).getTimezoneOffset()},user:{enableSafetyMode:t.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0}},api_key:Fd.WEB.API_KEY,api_version:Fd.WEB.API_VERSION}};class hO extends pI{constructor(t,e){if(super(t,e),!this.page.contents_memo)throw new bd("Unexpected response",this.page);const i=this.page.contents_memo.getType(Tk).first();if(!i.content)throw new bd("Content tab has no content",i);this.page.header&&(this.header=this.page.header.item().as(Mv)),this.contents=i.content.as(vx)}applyFilter(t){const e=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return i=this,n=void 0,s=function*(){const i=yield e.getFilteredFeed.call(this,t);return new hO(this.actions,i.page)},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,o)}l((s=s.apply(i,n||[])).next())}));var i,n,r,s}}var dO,pO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},fO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};dO=new WeakMap;var mO,gO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},yO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};mO=new WeakMap;var vO,bO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},_O=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};vO=new WeakMap;var wO,TO,SO,xO,kO,CO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},EO=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},IO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};TO=new WeakMap,SO=new WeakMap,wO=new WeakSet,xO=function(t){var e;return CO(this,void 0,void 0,(function*(){const i=Ad(16),n=IO(this,SO,"f").execute("/player",{cpn:i,client:"YTMUSIC",videoId:t,playbackContext:{contentPlaybackContext:{signatureTimestamp:(null===(e=IO(this,TO,"f").player)||void 0===e?void 0:e.sts)||0}}}),r=IO(this,SO,"f").execute("/next",{client:"YTMUSIC",videoId:t}),s=yield Promise.all([n,r]);return new uL(s,IO(this,SO,"f"),i)}))},kO=function(t){var e;return CO(this,void 0,void 0,(function*(){if(!t)throw new bd("List item cannot be undefined");if(!t.endpoint)throw new Error("This item does not have an endpoint.");const i=Ad(16),n=t.endpoint.call(IO(this,SO,"f"),{cpn:i,client:"YTMUSIC",playbackContext:{contentPlaybackContext:{signatureTimestamp:(null===(e=IO(this,TO,"f").player)||void 0===e?void 0:e.sts)||0}}}),r=t.endpoint.call(IO(this,SO,"f"),{client:"YTMUSIC",enablePersistentPlaylistPanel:!0,override_endpoint:"/next"}),s=yield Promise.all([n,r]);return new uL(s,IO(this,SO,"f"),i)}))};var PO,AO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},LO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};PO=new WeakMap;var OO,DO,MO,RO,NO,BO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},FO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};DO=new WeakMap,OO=new WeakSet,MO=function(){return BO(this,void 0,void 0,(function*(){const t=`innertube_android:${vd.shim.uuidv4()}:0:v=3,api=1,cf=3`,e={frontendUploadId:t,deviceDisplayName:"Pixel 6 Pro",fileId:`goog-edited-video://generated?videoFileUri=content://media/external/video/media/${vd.shim.uuidv4()}`,mp4MoovAtomRelocationStatus:"UNSUPPORTED",transcodeResult:"DISABLED",connectionType:"WIFI"},i=yield FO(this,DO,"f").http.fetch("/upload/youtubei",{baseURL:Nd.YT_UPLOAD,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"start","x-goog-upload-protocol":"resumable"},body:JSON.stringify(e)});if(!i.ok)throw new bd("Could not get initial upload data");return{frontend_upload_id:t,upload_id:i.headers.get("x-guploader-uploadid"),upload_url:i.headers.get("x-goog-upload-url"),scotty_resource_id:i.headers.get("x-goog-upload-header-scotty-resource-id"),chunk_granularity:i.headers.get("x-goog-upload-chunk-granularity")}}))},RO=function(t,e){return BO(this,void 0,void 0,(function*(){const i=yield FO(this,DO,"f").http.fetch_function(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"upload, finalize","x-goog-upload-file-name":`file-${Date.now()}`,"x-goog-upload-offset":"0"},body:e});if(!i.ok)throw new bd("Could not upload video");return yield i.json()}))},NO=function(t,e,i){return BO(this,void 0,void 0,(function*(){const n={resourceId:{scottyResourceId:{id:e.scottyResourceId}},frontendUploadId:t.frontend_upload_id,initialMetadata:{title:{newTitle:i.title||(new Date).toDateString()},description:{newDescription:i.description||"",shouldSegment:!0},privacy:{newPrivacy:i.privacy||"PRIVATE"},draftState:{isDraft:i.is_draft||!1}}};return yield FO(this,DO,"f").actions.execute("/upload/createvideo",Object.assign({client:"ANDROID"},n))}))};var $O,UO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class jO{constructor(t){$O.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,$O,LE.parseResponse(t),"f"),this.contents=UO(this,$O,"f").items.array().as(Av,Ov)}get page(){return UO(this,$O,"f")}}$O=new WeakMap;var VO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))};class HO{constructor(t){this.session=t,this.account=new class{constructor(t){dO.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,dO,t,"f"),this.channel={editName:t=>{if(!fO(this,dO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");return fO(this,dO,"f").execute("/channel/edit_name",{givenName:t,client:"ANDROID"})},editDescription:t=>{if(!fO(this,dO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");return fO(this,dO,"f").execute("/channel/edit_description",{givenDescription:t,client:"ANDROID"})},getBasicAnalytics:()=>this.getAnalytics()}}getInfo(){return pO(this,void 0,void 0,(function*(){if(!fO(this,dO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");const t=yield fO(this,dO,"f").execute("/account/accounts_list",{client:"ANDROID"});return new class{constructor(t){if(HE.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,HE,SL.parseResponse(t.data),"f"),!qE(this,HE,"f").contents)throw new bd("Page contents not found");const e=qE(this,HE,"f").contents.array().as(vp).first();if(!e)throw new bd("Account section list not found");this.contents=e.contents,this.footers=e.footers}get page(){return qE(this,HE,"f")}}(t)}))}getTimeWatched(){return pO(this,void 0,void 0,(function*(){const t=yield fO(this,dO,"f").execute("/browse",{browseId:"SPtime_watched",client:"ANDROID"});return new class{constructor(t){var e;if(IP.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,IP,SL.parseResponse(t.data),"f"),!PP(this,IP,"f").contents)throw new bd("Page contents not found");const i=PP(this,IP,"f").contents.item().as(xk).tabs.get({selected:!0});if(!i)throw new bd("Could not find target tab.");this.contents=null===(e=i.content)||void 0===e?void 0:e.as(Kx).contents.as(ob)}get page(){return PP(this,IP,"f")}}(t)}))}getSettings(){return pO(this,void 0,void 0,(function*(){const t=yield fO(this,dO,"f").execute("/browse",{browseId:"SPaccount_overview"});return new EP(fO(this,dO,"f"),t)}))}getAnalytics(){var t;return pO(this,void 0,void 0,(function*(){const e=yield this.getInfo(),i=yg.encodeChannelAnalyticsParams(null===(t=e.footers)||void 0===t?void 0:t.endpoint.payload.browseId),n=yield fO(this,dO,"f").execute("/browse",{browseId:"FEanalytics_screen",client:"ANDROID",params:i});return new class{constructor(t){var e;WE.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,WE,SL.parseResponse(t.data),"f"),this.sections=null===(e=zE(this,WE,"f").contents_memo)||void 0===e?void 0:e.getType(My).map((t=>{var e;return null===(e=t.model)||void 0===e?void 0:e.item()})).flatMap((t=>t||[]))}get page(){return zE(this,WE,"f")}}(n)}))}}(this.session.actions),this.playlist=new class{constructor(t){PO.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,PO,t,"f")}create(t,e){return AO(this,void 0,void 0,(function*(){if(Od({title:t,video_ids:e}),!LO(this,PO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");const i=yield LO(this,PO,"f").execute("/playlist/create",{title:t,ids:e,parse:!1});return{success:i.success,status_code:i.status_code,playlist_id:i.data.playlistId,data:i.data}}))}delete(t){return AO(this,void 0,void 0,(function*(){if(Od({playlist_id:t}),!LO(this,PO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");const e=yield LO(this,PO,"f").execute("playlist/delete",{playlistId:t});return{playlist_id:t,success:e.success,status_code:e.status_code,data:e.data}}))}addVideos(t,e){return AO(this,void 0,void 0,(function*(){if(Od({playlist_id:t,video_ids:e}),!LO(this,PO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");const i=yield LO(this,PO,"f").execute("/browse/edit_playlist",{playlistId:t,actions:e.map((t=>({action:"ACTION_ADD_VIDEO",addedVideoId:t}))),parse:!1});return{playlist_id:t,action_result:i.data.actions}}))}removeVideos(t,e){return AO(this,void 0,void 0,(function*(){if(Od({playlist_id:t,video_ids:e}),!LO(this,PO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");const i=yield LO(this,PO,"f").execute("/browse",{browseId:`VL${t}`,parse:!0}),n=new $I(LO(this,PO,"f"),i,!0);if(!n.info.is_editable)throw new bd("This playlist cannot be edited.",t);const r={playlistId:t,actions:[]},s=t=>AO(this,void 0,void 0,(function*(){if(t.videos.filter((t=>e.includes(t.key("id").string()))).forEach((t=>r.actions.push({action:"ACTION_REMOVE_VIDEO",setVideoId:t.key("set_video_id").string()}))),r.actions.length<e.length){const e=yield t.getContinuation();return s(e)}}));if(yield s(n),!r.actions.length)throw new bd("Given video ids were not found in this playlist.",e);const a=yield LO(this,PO,"f").execute("/browse/edit_playlist",Object.assign(Object.assign({},r),{parse:!1}));return{playlist_id:t,action_result:a.data.actions}}))}moveVideo(t,e,i){return AO(this,void 0,void 0,(function*(){if(Od({playlist_id:t,moved_video_id:e,predecessor_video_id:i}),!LO(this,PO,"f").session.logged_in)throw new bd("You must be signed in to perform this operation.");const n=yield LO(this,PO,"f").execute("/browse",{browseId:`VL${t}`,parse:!0}),r=new $I(LO(this,PO,"f"),n,!0);if(!r.info.is_editable)throw new bd("This playlist cannot be edited.",t);const s={playlistId:t,actions:[]};let a,o;const l=t=>AO(this,void 0,void 0,(function*(){const n=t.videos.find((t=>e===t.key("id").string())),r=t.videos.find((t=>i===t.key("id").string()));if(a=a||(null==n?void 0:n.key("set_video_id").string()),o=o||(null==r?void 0:r.key("set_video_id").string()),!a||!o){const e=yield t.getContinuation();return l(e)}}));yield l(r),s.actions.push({action:"ACTION_MOVE_VIDEO_AFTER",setVideoId:a,movedSetVideoIdPredecessor:o});const c=yield LO(this,PO,"f").execute("/browse/edit_playlist",Object.assign(Object.assign({},s),{parse:!1}));return{playlist_id:t,action_result:c.data.actions}}))}}(this.session.actions),this.interact=new class{constructor(t){mO.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,mO,t,"f")}like(t){return gO(this,void 0,void 0,(function*(){if(Od({video_id:t}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yO(this,mO,"f").execute("/like/like",{client:"ANDROID",target:{videoId:t}})}))}dislike(t){return gO(this,void 0,void 0,(function*(){if(Od({video_id:t}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yO(this,mO,"f").execute("/like/dislike",{client:"ANDROID",target:{videoId:t}})}))}removeRating(t){return gO(this,void 0,void 0,(function*(){if(Od({video_id:t}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yO(this,mO,"f").execute("/like/removelike",{client:"ANDROID",target:{videoId:t}})}))}subscribe(t){return gO(this,void 0,void 0,(function*(){if(Od({channel_id:t}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yO(this,mO,"f").execute("/subscription/subscribe",{client:"ANDROID",channelIds:[t],params:"EgIIAhgA"})}))}unsubscribe(t){return gO(this,void 0,void 0,(function*(){if(Od({channel_id:t}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yO(this,mO,"f").execute("/subscription/unsubscribe",{client:"ANDROID",channelIds:[t],params:"CgIIAhgA"})}))}comment(t,e){return gO(this,void 0,void 0,(function*(){if(Od({video_id:t,text:e}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yO(this,mO,"f").execute("/comment/create_comment",{client:"ANDROID",commentText:e,createCommentParams:yg.encodeCommentParams(t)})}))}translate(t,e,i={}){return gO(this,void 0,void 0,(function*(){Od({text:t,target_language:e});const n=yg.encodeCommentActionParams(22,Object.assign({text:t,target_language:e},i)),r=yield yO(this,mO,"f").execute("/comment/perform_comment_action",{client:"ANDROID",actions:[n]}),s=r.data.frameworkUpdates.entityBatchUpdate.mutations[0].payload.commentEntityPayload;return{success:r.success,status_code:r.status_code,translated_content:s.translatedContent.content,data:r.data}}))}setNotificationPreferences(t,e){return gO(this,void 0,void 0,(function*(){if(Od({channel_id:t,type:e}),!yO(this,mO,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");const i={PERSONALIZED:1,ALL:2,NONE:3};if(!Object.keys(i).includes(e.toUpperCase()))throw new Error(`Invalid notification preference type: ${e}`);return yield yO(this,mO,"f").execute("/notification/modify_channel_preference",{client:"WEB",params:yg.encodeNotificationPref(t,i[e.toUpperCase()])})}))}}(this.session.actions),this.music=new class{constructor(t){wO.add(this),TO.set(this,void 0),SO.set(this,void 0),EO(this,TO,t,"f"),EO(this,SO,t.actions,"f")}getInfo(t){if(t instanceof qw)return IO(this,wO,"m",kO).call(this,t);if("string"==typeof t)return IO(this,wO,"m",xO).call(this,t);throw new bd("Invalid target, expected either a video id or a valid MusicTwoRowItem",t)}search(t,e={}){return CO(this,void 0,void 0,(function*(){Od({query:t});const i={query:t,client:"YTMUSIC"};e.type&&"all"!==e.type&&(i.params=yg.encodeMusicSearchFilters(e));const n=yield IO(this,SO,"f").execute("/search",i);return new eL(n,IO(this,SO,"f"),Reflect.has(e,"type")&&"all"!==e.type)}))}getHomeFeed(){return CO(this,void 0,void 0,(function*(){const t=yield IO(this,SO,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_home"});return new yA(t,IO(this,SO,"f"))}))}getExplore(){return CO(this,void 0,void 0,(function*(){const t=yield IO(this,SO,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_explore"});return new class{constructor(t){var e,i,n;cA.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,cA,SL.parseResponse(t.data),"f");const r=null===(e=uA(this,cA,"f").contents)||void 0===e?void 0:e.item().as(xk).tabs.get({selected:!0});if(!r)throw new bd("Could not find target tab.");const s=null===(i=r.content)||void 0===i?void 0:i.as(Kx);if(!s)throw new bd("Target tab did not have any content.");this.top_buttons=(null===(n=s.contents.firstOfType(dv))||void 0===n?void 0:n.items.as(gT))||[],this.sections=s.contents.filterType(vT)}get page(){return uA(this,cA,"f")}}(t)}))}getLibrary(){return CO(this,void 0,void 0,(function*(){const t=yield IO(this,SO,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_library_landing"});return new PA(t,IO(this,SO,"f"))}))}getArtist(t){return CO(this,void 0,void 0,(function*(){if(Od({artist_id:t}),!t.startsWith("UC")&&!t.startsWith("FEmusic_library_privately_owned_artist"))throw new bd("Invalid artist id",t);const e=yield IO(this,SO,"f").execute("/browse",{client:"YTMUSIC",browseId:t});return new class{constructor(t,e){var i,n,r;sA.set(this,void 0),aA.set(this,void 0),oA(this,sA,SL.parseResponse(t.data),"f"),oA(this,aA,e,"f"),this.header=null===(i=this.page.header)||void 0===i?void 0:i.item().as(OT,JT,AT);const s=(null===(n=lA(this,sA,"f").contents_memo)||void 0===n?void 0:n.getType(zT))||[],a=(null===(r=lA(this,sA,"f").contents_memo)||void 0===r?void 0:r.getType(vT))||[];this.sections=[...s,...a]}getAllSongs(){var t,e,i,n,r,s;return i=this,n=void 0,s=function*(){const i=this.sections.filter((t=>"MusicShelf"===t.type));if(!i.length)throw new bd("Could not find any node of type MusicShelf.");const n=i.find((t=>"Songs"===t.title.toString()));if(!n)throw new bd("Could not find target shelf (Songs).");if(!n.endpoint)throw new bd("Target shelf (Songs) did not have an endpoint.");const r=yield n.endpoint.call(lA(this,aA,"f"),{client:"YTMUSIC",parse:!0});return null===(e=null===(t=r.contents_memo)||void 0===t?void 0:t.getType(UT))||void 0===e?void 0:e.first()},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,o)}l((s=s.apply(i,n||[])).next())}))}get page(){return lA(this,sA,"f")}}(e,IO(this,SO,"f"))}))}getAlbum(t){return CO(this,void 0,void 0,(function*(){if(Od({album_id:t}),!t.startsWith("MPR")&&!t.startsWith("FEmusic_library_privately_owned_release"))throw new bd("Invalid album id",t);const e=yield IO(this,SO,"f").execute("/browse",{client:"YTMUSIC",browseId:t});return new class{constructor(t){var e,i,n;if(nA.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,nA,SL.parseResponse(t.data),"f"),this.header=null===(e=rA(this,nA,"f").header)||void 0===e?void 0:e.item().as(TT),this.url=(null===(i=rA(this,nA,"f").microformat)||void 0===i?void 0:i.as(Pw).url_canonical)||null,!rA(this,nA,"f").contents_memo)throw new Error("No contents found in the response");this.contents=null===(n=rA(this,nA,"f").contents_memo.getType(zT))||void 0===n?void 0:n.first().contents,this.sections=rA(this,nA,"f").contents_memo.getType(vT)||[]}get page(){return rA(this,nA,"f")}}(e)}))}getPlaylist(t){return CO(this,void 0,void 0,(function*(){Od({playlist_id:t}),t.startsWith("VL")||(t=`VL${t}`);const e=yield IO(this,SO,"f").execute("/browse",{client:"YTMUSIC",browseId:t});return new jA(e,IO(this,SO,"f"))}))}getUpNext(t,e=!0){var i,n,r;return CO(this,void 0,void 0,(function*(){Od({video_id:t});const s=yield IO(this,SO,"f").execute("/next",{videoId:t,client:"YTMUSIC",parse:!0}),a=null===(i=s.contents_memo)||void 0===i?void 0:i.getType(Tk),o=null==a?void 0:a.first();if(!o)throw new bd("Could not find target tab.");const l=null===(n=o.content)||void 0===n?void 0:n.as(qT);if(!l||!l.content)throw new bd("Music queue was empty, the given id is probably invalid.",l);const c=l.content.as(VT);if(!c.playlist_id&&e){const e=c.contents.firstOfType(qp);if(!e)throw new bd("Automix item not found");const i=yield null===(r=e.playlist_video)||void 0===r?void 0:r.endpoint.call(IO(this,SO,"f"),{videoId:t,client:"YTMUSIC",parse:!0});if(!i||!i.contents_memo)throw new bd("Could not fetch automix");return i.contents_memo.getType(VT).first()}return c}))}getRelated(t){var e;return CO(this,void 0,void 0,(function*(){Od({video_id:t});const i=yield IO(this,SO,"f").execute("/next",{videoId:t,client:"YTMUSIC",parse:!0}),n=null===(e=i.contents_memo)||void 0===e?void 0:e.getType(Tk),r=null==n?void 0:n.matchCondition((t=>{var e,i;return"MUSIC_PAGE_TYPE_TRACK_RELATED"===(null===(i=null===(e=t.endpoint.payload.browseEndpointContextSupportedConfigs)||void 0===e?void 0:e.browseEndpointContextMusicConfig)||void 0===i?void 0:i.pageType)}));if(!r)throw new bd("Could not find target tab.");const s=yield r.endpoint.call(IO(this,SO,"f"),{client:"YTMUSIC",parse:!0});if(!s.contents)throw new bd("Unexpected response",s);return s.contents.item().as(Kx).contents.as(vT,_T)}))}getLyrics(t){var e;return CO(this,void 0,void 0,(function*(){Od({video_id:t});const i=yield IO(this,SO,"f").execute("/next",{videoId:t,client:"YTMUSIC",parse:!0}),n=null===(e=i.contents_memo)||void 0===e?void 0:e.getType(Tk),r=null==n?void 0:n.matchCondition((t=>{var e,i;return"MUSIC_PAGE_TYPE_TRACK_LYRICS"===(null===(i=null===(e=t.endpoint.payload.browseEndpointContextSupportedConfigs)||void 0===e?void 0:e.browseEndpointContextMusicConfig)||void 0===i?void 0:i.pageType)}));if(!r)throw new bd("Could not find target tab.");const s=yield r.endpoint.call(IO(this,SO,"f"),{client:"YTMUSIC",parse:!0});if(!s.contents)throw new bd("Unexpected response",s);if("Message"===s.contents.item().key("type").string())throw new bd(s.contents.item().as(vy).text,t);return s.contents.item().as(Kx).contents.firstOfType(_T)}))}getRecap(){return CO(this,void 0,void 0,(function*(){const t=yield IO(this,SO,"f").execute("/browse",{browseId:"FEmusic_listening_review",client:"YTMUSIC_ANDROID"});return new class{constructor(t,e){var i,n,r,s,a,o,l;VA.set(this,void 0),HA.set(this,void 0),qA(this,VA,SL.parseResponse(t.data),"f"),qA(this,HA,e,"f");const c=null===(i=WA(this,VA,"f").header)||void 0===i?void 0:i.item();this.header=(null==c?void 0:c.is(IT))?null===(s=null===(r=null===(n=WA(this,VA,"f").header)||void 0===n?void 0:n.item().as(IT).element)||void 0===r?void 0:r.model)||void 0===s?void 0:s.item().as(Hv):null===(a=WA(this,VA,"f").header)||void 0===a?void 0:a.item().as(AT);const u=null===(o=WA(this,VA,"f").contents)||void 0===o?void 0:o.item().as(xk).tabs.firstOfType(Tk);if(!u)throw new bd("Target tab not found");this.sections=null===(l=u.content)||void 0===l?void 0:l.as(Kx).contents.as(ob,vT,vy)}getPlaylist(){return t=this,e=void 0,n=function*(){if(!this.header)throw new bd("Header not found");if(!this.header.is(Hv))throw new bd("Recap playlist not available, check back later.");const t=this.header.panels[0].text_on_tap_endpoint,e=yield t.call(WA(this,HA,"f"),{client:"YTMUSIC"});return new jA(e,WA(this,HA,"f"))},new((i=void 0)||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}get page(){return WA(this,VA,"f")}}(t,IO(this,SO,"f"))}))}getSearchSuggestions(t){var e,i;return CO(this,void 0,void 0,(function*(){const n=yield IO(this,SO,"f").execute("/music/get_search_suggestions",{parse:!0,input:t,client:"YTMUSIC"}),r=null===(i=null===(e=n.contents_memo)||void 0===e?void 0:e.getType(qx))||void 0===i?void 0:i[0];return(null==r?void 0:r.contents.is_array)?null==r?void 0:r.contents.array():ud([])}))}}(this.session),this.studio=new class{constructor(t){OO.add(this),DO.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,DO,t,"f")}setThumbnail(t,e){return BO(this,void 0,void 0,(function*(){if(!FO(this,DO,"f").logged_in)throw new bd("You must be signed in to perform this operation.");if(!t||!e)throw new wd("One or more parameters are missing.");const i=yg.encodeCustomThumbnailPayload(t,e);return yield FO(this,DO,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})}))}updateVideoMetadata(t,e){return BO(this,void 0,void 0,(function*(){if(!FO(this,DO,"f").logged_in)throw new bd("You must be signed in to perform this operation.");const i=yg.encodeVideoMetadataPayload(t,e);return yield FO(this,DO,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})}))}upload(t,e={}){return BO(this,void 0,void 0,(function*(){if(!FO(this,DO,"f").logged_in)throw new bd("You must be signed in to perform this operation.");const i=yield FO(this,OO,"m",MO).call(this),n=yield FO(this,OO,"m",RO).call(this,i.upload_url,t);if("STATUS_SUCCESS"!==n.status)throw new bd("Could not process video.");return yield FO(this,OO,"m",NO).call(this,i,n,e)}))}}(this.session),this.kids=new class{constructor(t){vO.set(this,void 0),function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?r.call(t,i):r?r.value=i:e.set(t,i)}(this,vO,t,"f")}search(t){return bO(this,void 0,void 0,(function*(){const e=yield _O(this,vO,"f").actions.execute("/search",{query:t,client:"YTKIDS"});return new mL(_O(this,vO,"f").actions,e)}))}getInfo(t){var e;return bO(this,void 0,void 0,(function*(){const i=Ad(16),n=_O(this,vO,"f").actions.execute("/player",{cpn:i,client:"YTKIDS",videoId:t,playbackContext:{contentPlaybackContext:{signatureTimestamp:(null===(e=_O(this,vO,"f").player)||void 0===e?void 0:e.sts)||0}}}),r=_O(this,vO,"f").actions.execute("/next",{videoId:t,client:"YTKIDS"}),s=yield Promise.all([n,r]);return new class{constructor(t,e,i){var n,r,s,a,o,l,c;gL.set(this,void 0),yL.set(this,void 0),vL.set(this,void 0),bL.set(this,void 0),wL(this,yL,e,"f");const u=SL.parseResponse(t[0].data),h=(null===(n=null==t?void 0:t[1])||void 0===n?void 0:n.data)?SL.parseResponse(t[1].data):void 0;if(wL(this,gL,[u,h],"f"),wL(this,vL,i,"f"),"ERROR"===(null===(r=u.playability_status)||void 0===r?void 0:r.status))throw new bd("This video is unavailable",u.playability_status);this.basic_info=u.video_details,this.streaming_data=u.streaming_data,this.playability_status=u.playability_status,this.captions=u.captions,wL(this,bL,u.playback_tracking,"f");const d=null===(s=null==h?void 0:h.contents)||void 0===s?void 0:s.item().as(DC),p=null==d?void 0:d.results,f=null==d?void 0:d.secondary_results;p&&f&&(this.slim_video_metadata=null===(o=null===(a=p.firstOfType(ob))||void 0===a?void 0:a.contents)||void 0===o?void 0:o.firstOfType(Ok),this.watch_next_feed=(null===(l=f.firstOfType(ob))||void 0===l?void 0:l.contents)||f,this.current_video_endpoint=null==h?void 0:h.current_video_endpoint,this.player_overlays=null===(c=null==h?void 0:h.player_overlays)||void 0===c?void 0:c.item().as(_S))}toDash(t,e){return zP.toDash(this.streaming_data,t,e,TL(this,vL,"f"),TL(this,yL,"f").session.player)}chooseFormat(t){return zP.chooseFormat(t,this.streaming_data)}download(t={}){return _L(this,void 0,void 0,(function*(){return zP.download(t,TL(this,yL,"f"),this.playability_status,this.streaming_data,TL(this,yL,"f").session.player,this.cpn)}))}addToWatchHistory(){return _L(this,void 0,void 0,(function*(){if(!TL(this,bL,"f"))throw new bd("Playback tracking not available");const t={cpn:TL(this,vL,"f"),fmt:251,rtn:0,rt:0},e=TL(this,bL,"f").videostats_playback_url.replace("https://s.","https://www.");return yield TL(this,yL,"f").stats(e,{client_name:Fd.WEB.NAME,client_version:Fd.WEB.VERSION},t)}))}get actions(){return TL(this,yL,"f")}get cpn(){return TL(this,vL,"f")}get page(){return TL(this,gL,"f")}}(s,_O(this,vO,"f").actions,i)}))}getChannel(t){return bO(this,void 0,void 0,(function*(){const e=yield _O(this,vO,"f").actions.execute("/browse",{browseId:t,client:"YTKIDS"});return new dL(_O(this,vO,"f").actions,e)}))}getHomeFeed(){return bO(this,void 0,void 0,(function*(){const t=yield _O(this,vO,"f").actions.execute("/browse",{browseId:"FEkids_home",client:"YTKIDS"});return new fL(_O(this,vO,"f").actions,t)}))}}(this.session),this.actions=this.session.actions}static create(t={}){return VO(this,void 0,void 0,(function*(){return new HO(yield uO.create(t))}))}getInfo(t,e){var i;return VO(this,void 0,void 0,(function*(){let n;if(Od({target:t}),t instanceof Zd){const e=null===(i=t.payload)||void 0===i?void 0:i.videoId;if(!e)throw new bd("Missing video id in endpoint payload.",t);n={videoId:e},t.payload.playlistId&&(n.playlistId=t.payload.playlistId),t.payload.params&&(n.params=t.payload.params),t.payload.index&&(n.playlistIndex=t.payload.index)}else{if("string"!=typeof t)throw new bd("Invalid target, expected either a video id or a valid NavigationEndpoint",t);n={videoId:t}}const r=Ad(16),s=this.actions.getVideoInfo(n.videoId,r,e),a=this.actions.execute("/next",n),o=yield Promise.all([s,a]);return new iA(o,this.actions,this.session.player,r)}))}getBasicInfo(t,e){return VO(this,void 0,void 0,(function*(){Od({video_id:t});const i=Ad(16),n=yield this.actions.getVideoInfo(t,i,e);return new iA([n],this.actions,this.session.player,i)}))}search(t,e={}){return VO(this,void 0,void 0,(function*(){Od({query:t});const i=Object.assign({query:t},{params:e?yg.encodeSearchFilters(e):void 0}),n=yield this.actions.execute("/search",i);return new wP(this.actions,n)}))}getSearchSuggestions(t){return VO(this,void 0,void 0,(function*(){Od({query:t});const e=new URL(`${jd.URLS.YT_SUGGESTIONS}search`);e.searchParams.set("q",t),e.searchParams.set("hl",this.session.context.client.hl),e.searchParams.set("gl",this.session.context.client.gl),e.searchParams.set("ds","yt"),e.searchParams.set("client","youtube"),e.searchParams.set("xssi","t"),e.searchParams.set("oe","UTF");const i=yield this.session.http.fetch(e),n=yield i.text();return JSON.parse(n.replace(")]}'",""))[1].map((t=>t[0]))}))}getComments(t,e){return VO(this,void 0,void 0,(function*(){Od({video_id:t});const i=yg.encodeCommentsSectionParams(t,{sort_by:e||"TOP_COMMENTS"}),n=yield this.actions.execute("/next",{continuation:i});return new kI(this.actions,n.data)}))}getHomeFeed(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/browse",{browseId:"FEwhat_to_watch"});return new PI(this.actions,t)}))}getGuide(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/guide");return new jO(t.data)}))}getLibrary(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/browse",{browseId:"FElibrary"});return new VI(this.actions,t)}))}getHistory(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/browse",{browseId:"FEhistory"});return new EI(this.actions,t)}))}getTrending(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/browse",{browseId:"FEtrending",parse:!0});return new uI(this.actions,t)}))}getSubscriptionsFeed(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/browse",{browseId:"FEsubscriptions",parse:!0});return new nI(this.actions,t)}))}getChannel(t){return VO(this,void 0,void 0,(function*(){Od({id:t});const e=yield this.actions.execute("/browse",{browseId:t});return new mI(this.actions,e)}))}getNotifications(){return VO(this,void 0,void 0,(function*(){const t=yield this.actions.execute("/notification/get_notification_menu",{notificationsMenuRequestType:"NOTIFICATIONS_MENU_REQUEST_TYPE_INBOX"});return new vP(this.actions,t)}))}getUnseenNotificationsCount(){var t,e,i,n;return VO(this,void 0,void 0,(function*(){const r=yield this.actions.execute("/notification/get_unseen_count");return(null===(t=r.data)||void 0===t?void 0:t.unseenCount)||(null===(n=null===(i=null===(e=r.data)||void 0===e?void 0:e.actions)||void 0===i?void 0:i[0].updateNotificationsUnseenCountAction)||void 0===n?void 0:n.unseenCount)||0}))}getPlaylist(t){return VO(this,void 0,void 0,(function*(){Od({id:t}),t.startsWith("VL")||(t=`VL${t}`);const e=yield this.actions.execute("/browse",{browseId:t});return new $I(this.actions,e)}))}getHashtag(t){return VO(this,void 0,void 0,(function*(){Od({hashtag:t});const e=yg.encodeHashtag(t),i=yield this.actions.execute("/browse",{browseId:"FEhashtag",params:e});return new hO(this.actions,i)}))}getStreamingData(t,e={}){return VO(this,void 0,void 0,(function*(){return(yield this.getBasicInfo(t)).chooseFormat(e)}))}download(t,e){return VO(this,void 0,void 0,(function*(){return(yield this.getBasicInfo(t,null==e?void 0:e.client)).download(e)}))}resolveURL(t){return VO(this,void 0,void 0,(function*(){return(yield this.actions.execute("/navigation/resolve_url",{url:t,parse:!0})).endpoint}))}call(t,e){return t.call(this.actions,e)}}const qO=HO;var WO,zO,GO,KO,YO=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},XO=function(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i},QO=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};zO=new WeakMap,GO=new WeakMap,WO=new WeakSet,KO=function(){const t=Reflect.get(globalThis,"indexedDB")||Reflect.get(globalThis,"webkitIndexedDB")||Reflect.get(globalThis,"mozIndexedDB")||Reflect.get(globalThis,"msIndexedDB");return t?new Promise(((e,i)=>{const n=t.open("youtubei.js",1);n.onsuccess=function(){e(this.result)},n.onerror=function(t){i("indexedDB request error"),console.error(t)},n.onupgradeneeded=function(){this.result.createObjectStore("kv-store",{keyPath:"k"}).transaction.oncomplete=function(){e(this.db)}}})):console.log("IndexedDB is not supported. No cache will be used.")},vd.load({runtime:"browser",server:!1,info:{version:Md.i8,bugs_url:Md.eN.H,repo_url:Md.Xh.split("#")[0]},Cache:class{constructor(t=!1,e){WO.add(this),zO.set(this,void 0),GO.set(this,void 0),XO(this,zO,e||"","f"),XO(this,GO,t,"f")}get cache_dir(){return QO(this,GO,"f")?QO(this,zO,"f"):""}get(t){return YO(this,void 0,void 0,(function*(){const e=yield QO(this,WO,"m",KO).call(this);if(e)return new Promise(((i,n)=>{const r=e.transaction("kv-store","readonly").objectStore("kv-store").get(t);r.onerror=n,r.onsuccess=function(){var t;const e=null===(t=this.result)||void 0===t?void 0:t.v;i(e?e.buffer:void 0)}}))}))}set(t,e){return YO(this,void 0,void 0,(function*(){const i=yield QO(this,WO,"m",KO).call(this);if(i)return new Promise(((n,r)=>{const s=i.transaction("kv-store","readwrite").objectStore("kv-store").put({k:t,v:e});s.onerror=r,s.onsuccess=()=>n()}))}))}remove(t){return YO(this,void 0,void 0,(function*(){const e=yield QO(this,WO,"m",KO).call(this);if(e)return new Promise(((i,n)=>{const r=e.transaction("kv-store","readwrite").objectStore("kv-store").delete(t);r.onerror=n,r.onsuccess=()=>i()}))}))}},sha1Hash:function(t){return e=this,i=void 0,r=function*(){const e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];return function(t){const i=new Uint8Array(t),n=[];for(let t=0;t<i.length;++t)n.push(e[i[t]]);return n.join("")}(yield crypto.subtle.digest("SHA-1",(new TextEncoder).encode(t)))},new((n=void 0)||(n=Promise))((function(t,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,o)}l((r=r.apply(e,i||[])).next())}));var e,i,n,r},uuidv4(){var t;return(null===(t=globalThis.crypto)||void 0===t?void 0:t.randomUUID())?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>{const e=parseInt(t);return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},eval:function(t,e){const i=new Rd.default(t);for(const[t,n]of Object.entries(e))i.scope.set(t,n);return i.interpret()},DOMParser:globalThis.DOMParser,serializeDOM:t=>(new XMLSerializer).serializeToString(t),fetch:globalThis.fetch,Request:globalThis.Request,Response:globalThis.Response,Headers:globalThis.Headers,FormData:globalThis.FormData,File:globalThis.File,ReadableStream:globalThis.ReadableStream});class JO{constructor(t){this.cacheDirectory=t}async get(t){const e=fu().resolve(this.cacheDirectory,t);try{return(await Cc().readFile(e)).buffer}catch(t){if("ENOENT"===t?.code)return;throw t}}async set(t,e){await Cc().mkdir(this.cacheDirectory,{recursive:!0});const i=fu().resolve(this.cacheDirectory,t);await Cc().writeFile(i,new Uint8Array(e))}async remove(t){const e=fu().resolve(this.cacheDirectory,t);if(await Ec(e))try{await Cc().unlink(e)}catch{}}}var ZO=i(34155);function tD(t,e={}){if("http"in Gc().plugin){const{http:i}=Gc().plugin;return new Promise(((n,r)=>{let s;if("headers"in e&&0===Object.keys(e.headers).length&&delete e.headers,t instanceof URL){const n=t.toString();s=(t,r)=>{i.get(n,{},e.headers,t,r)}}else{let n=t;"string"==typeof n&&(n={url:n}),s="POST"===n.method?(t,r)=>{i.setDataSerializer("json"),i.useBasicAuth(n.credentials),i.post(n.url,JSON.parse(e.body),e,t,r)}:(t,r)=>{i.get(n.url,{},e.headers,t,r)}}s((t=>{n(Object.assign(t,{ok:200===t.status,text:()=>t.data,json:()=>JSON.parse(t.data)}))}),(t=>{r(t)}))}))}console.error("Advanced http plugin failed to load.")}async function eD(t={withPlayer:!1,location:void 0,safetyMode:!1,clientType:void 0}){let e;if(t.withPlayer){const t=await RR();e=null!=t?new JO((0,pu.join)(t,"player_cache")):void 0}return await qO.create({retrieve_player:!!t.withPlayer,location:t.location,enable_safety_mode:!!t.safetyMode,client_type:t.clientType,fetch:(t,e={})=>{if(ZO.env.IS_CORDOVA)return tD(t,e)},cache:e,generate_session_locally:!0})}let iD=null;async function nD(t){const e=await eD();return await e.getPlaylist(t)}async function rD(t,e=!1){let i,n;if(e){const e=await eD({withPlayer:!0,clientType:aO.TV_EMBEDDED});n=e.actions.session.player,i=await e.getBasicInfo(t,"TV_EMBEDDED")}else{const e=await eD({withPlayer:!0});n=e.actions.session.player,i=await e.getInfo(t)}return i.streaming_data&&(sD(i.streaming_data.adaptive_formats,n),sD(i.streaming_data.formats,n)),i}function sD(t,e){for(const i of t)i.url=i.decipher(e),i.cipher=void 0,i.signature_cipher=void 0}async function aD(t){const e=await eD();let i;try{i=await e.getChannel(t)}catch(t){if(!(t instanceof kd))throw t;i={alert:t.message}}return i}function oD(t,e){const i=t.map(hD);return i.forEach((t=>{t.author=e.name,t.authorId=e.id})),i}function lD(t,e=undefined){let i,n=null;return t.author?t.author instanceof wE.Text?(i=t.author.text,e&&(n=e.id)):(i=t.author.name,n=t.author.id):(i=e.name,n=e.id),{type:"playlist",dataSource:"local",title:t.title.text,thumbnail:t.thumbnails[0].url,channelName:i,channelId:n,playlistId:t.id,videoCount:BR(t.video_count.text)}}function cD(t){return t.results?{results:t.results.filter((t=>"Video"===t.type||"Channel"===t.type||"Playlist"===t.type)).map((t=>function(t){switch(t.type){case"Video":return hD(t);case"Channel":{const e=t;let i=null,n=null,r=null;return e.subscribers.text.startsWith("@")?(r=e.subscribers.text,"N/A"!==e.videos.text&&(i=e.videos.text)):(n=BR(e.videos.text),"N/A"!==e.subscribers.text&&(i=e.subscribers.text)),{type:"channel",dataSource:"local",thumbnail:e.author.best_thumbnail?.url,name:e.author.name,id:e.author.id,subscribers:i,videos:n,handle:r,descriptionShort:e.description_snippet.text}}case"Playlist":return lD(t)}}(t))),continuationData:t.has_continuation?t:null}:{results:[],continuationData:null}}function uD(t){return{videoId:t.id,title:t.title.text,author:t.author.name,authorId:t.author.id,lengthSeconds:isNaN(t.duration.seconds)?"":t.duration.seconds,liveNow:t.is_live,isUpcoming:t.is_upcoming,premiereDate:t.upcoming}}function hD(t){return{type:"video",videoId:t.id,title:t.title.text,author:t.author.name,authorId:t.author.id,description:t.description,viewCount:BR(t.view_count.text),publishedText:"N/A"!==t.published.text?t.published.text:null,lengthSeconds:isNaN(t.duration.seconds)?"":t.duration.seconds,liveNow:t.is_live,isUpcoming:t.is_upcoming||t.is_premiere,premiereDate:t.upcoming}}function dD(t){return{type:"video",videoId:t.id,title:t.title.text,author:t.author.name,authorId:t.author.id,viewCount:BR(t.view_count.text),publishedText:"N/A"===t.published.text?null:t.published.text,lengthSeconds:isNaN(t.duration.seconds)?"":t.duration.seconds,liveNow:t.is_live,isUpcoming:t.is_premiere}}function pD(t,e=16){if(!Array.isArray(t))throw new Error("not an array of text runs");const i=/^(?:\d+:){1,2}\d+$/,n=[];for(const r of t)if(r instanceof wE.EmojiRun){const{emoji:t,text:i}=r;if(t.image.length>0){let r;r=t.is_custom?t.shortcuts.length>0?t.shortcuts[0]:t.search_terms.length>0?t.search_terms.join(", "):"Custom emoji":i,n.push(`<img src="${t.image[0].url}" alt="${r}" width="${e}" height="${e}" loading="lazy" style="vertical-align: middle">`)}}else{const{text:t,bold:e,italics:s,strikethrough:a,endpoint:o}=r;if(o&&!t.startsWith("#"))switch(o.metadata.page_type){case"WEB_PAGE_TYPE_WATCH":i.test(t)?n.push(t):n.push(`https://www.youtube.com${o.metadata.url}`);break;case"WEB_PAGE_TYPE_CHANNEL":{const e=t.trim();SR.test(e)?n.push(`<a href="https://www.youtube.com/channel/${o.payload.browseId}">${e}</a>`):n.push(`https://www.youtube.com${o.metadata.url}`);break}case"WEB_PAGE_TYPE_PLAYLIST":n.push(`https://www.youtube.com${o.metadata.url}`);break;default:{const t=new URL(o.payload.url);if("www.youtube.com"===t.hostname&&"/redirect"===t.pathname&&t.searchParams.has("q")){const e=new URL(t.searchParams.get("q"));e.searchParams.delete("utm_source"),e.searchParams.delete("utm_medium"),e.searchParams.delete("utm_campaign"),e.searchParams.delete("utm_term"),e.searchParams.delete("utm_content"),n.push(e.toString())}else n.push(o.payload.url);break}}else{let i=t;e&&(i=`<b>${i}</b>`),s&&(i=`<i>${i}</i>`),a&&(i=`<s>${i}</s>`),n.push(i)}}return n.join("")}function fD(t){return{itag:t.itag,qualityLabel:t.quality_label,fps:t.fps,bitrate:t.bitrate,mimeType:t.mime_type,height:t.height,url:t.url}}function mD(t,e=undefined){let i=!1,n=null;return e?.has_replies&&(i=e.comment_replies_data.has_channel_owner_replied,n=e),{dataType:"local",authorLink:t.author.id,author:t.author.name,authorThumb:t.author.best_thumbnail.url,isPinned:t.is_pinned,isOwner:t.author_is_channel_owner,isMember:t.is_member,memberIconUrl:t.is_member?t.sponsor_comment_badge.custom_badge[0].url:"",text:Rh.link(pD(t.content.runs,16)),time:xR({publishText:t.published.text.replace("(edited)","").trim()}),likes:t.vote_count,isHearted:t.is_hearted,numReplies:t.reply_count,hasOwnerReplied:i,replyToken:n,showReplies:!1,replies:[]}}function gD(t,e=!1){const i=[],n=[],r=[];return t.forEach((t=>{const s=t.mime_type;s.startsWith("audio/mp4")?i.push(t):e&&s.startsWith('video/mp4; codecs="av01')?r.push(t):s.startsWith('video/mp4; codecs="avc')&&n.push(t)})),e&&r.length>0?[...i,...r]:[...i,...n]}function yD(t){const e=t.replace(",",".").toUpperCase().match(/([\d.]+)\s*([KM]?)/);let i;return e?(i=parseFloat(e[1]),"K"===e[2]?i*=1e3:"M"===e[2]&&(i*=1e6),i=Math.trunc(i)):i=BR(t),i}function vD(t){let e=t.action_buttons.reply_button?.text??null;return null!==e&&(e=yD(t?.action_buttons.reply_button.text)),{postText:"N/A"===t.content.text?"":t.content.text,postId:t.id,authorThumbnails:t.author.thumbnails,publishedText:t.published.text,voteCount:t.vote_count,postContent:(i=t.attachment,i?"BackstageImage"===i.type?{type:"image",content:i.image}:"Video"===i.type?{type:"video",content:hD(i)}:"Playlist"===i.type?{type:"playlist",content:lD(i)}:"PostMultiImage"===i.type?{type:"multiImage",content:i.images.map((t=>t.image))}:"Poll"===i.type?{type:"poll",totalVotes:i.total_votes??0,content:i.choices.map((t=>({text:t.text.text,image:t.image})))}:(console.error(i),void console.error("unknown type")):null),commentCount:e,author:t.author.name,type:"community"};var i}var bD=i(34155);var _D=Ks({name:"Subscriptions",components:{"ft-loader":pc,"ft-card":na,"ft-button":ra,"ft-icon-button":ha,"ft-flex-box":Ys,"ft-element-list":Yh,"ft-channel-bubble":Xh},data:function(){return{isLoading:!1,dataLimit:100,videoList:[],errorChannels:[],attemptedFetch:!1}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},hideWatchedSubs:function(){return this.$store.getters.getHideWatchedSubs},useRssFeeds:function(){return this.$store.getters.getUseRssFeeds},profileList:function(){return this.$store.getters.getProfileList},activeVideoList:function(){return this.videoList.length<this.dataLimit?this.videoList:this.videoList.slice(0,this.dataLimit)},activeProfile:function(){return this.$store.getters.getActiveProfile},profileSubscriptions:function(){return this.$store.getters.getProfileSubscriptions},allSubscriptionsList:function(){return this.$store.getters.getAllSubscriptionsList},historyCache:function(){return this.$store.getters.getHistoryCache},activeSubscriptionList:function(){return this.activeProfile.subscriptions},hideLiveStreams:function(){return this.$store.getters.getHideLiveStreams},hideUpcomingPremieres:function(){return this.$store.getters.getHideUpcomingPremieres},fetchSubscriptionsAutomatically:function(){return this.$store.getters.getFetchSubscriptionsAutomatically}},watch:{activeProfile:async function(t){this.getProfileSubscriptions()}},mounted:async function(){document.addEventListener("keydown",this.keyboardShortcutHandler),this.isLoading=!0;const t=sessionStorage.getItem("subscriptionLimit");if(null!==t&&(this.dataLimit=t),0!==this.profileSubscriptions.videoList.length){if(this.profileSubscriptions.activeProfile===this.activeProfile._id){const t=JSON.parse(JSON.stringify(this.profileSubscriptions));this.hideWatchedSubs?this.videoList=await Promise.all(t.videoList.filter((t=>-1===this.historyCache.findIndex((e=>e.videoId===t.videoId))))):(this.videoList=t.videoList,this.errorChannels=t.errorChannels)}else this.getProfileSubscriptions();this.isLoading=!1}else this.fetchSubscriptionsAutomatically?setTimeout((async()=>{this.getSubscriptions()}),300):this.isLoading=!1},beforeDestroy:function(){document.removeEventListener("keydown",this.keyboardShortcutHandler)},methods:{goToChannel:function(t){this.$router.push({path:`/channel/${t}`})},getSubscriptions:function(){if(0===this.activeSubscriptionList.length)return this.isLoading=!1,void(this.videoList=[]);let t=this.useRssFeeds;this.activeSubscriptionList.length>=125&&!t&&(kR(this.$t('Subscriptions["This profile has a large number of subscriptions.  Forcing RSS to avoid rate limiting"]'),1e4),t=!0),this.isLoading=!0,this.updateShowProgressBar(!0),this.setProgressBarPercentage(0),this.attemptedFetch=!0;let e=[],i=0;this.errorChannels=[],this.activeSubscriptionList.forEach((async n=>{let r=[];r=bD.env.IS_CORDOVA&&"invidious"!==this.backendPreference?t?await this.getChannelVideosLocalRSS(n):await this.getChannelVideosLocalScraper(n):t?await this.getChannelVideosInvidiousRSS(n):await this.getChannelVideosInvidiousScraper(n),e=e.concat(r),i++;const s=i/this.activeSubscriptionList.length*100;if(this.setProgressBarPercentage(s),i===this.activeSubscriptionList.length){e=await Promise.all(e.sort(((t,e)=>e.publishedDate-t.publishedDate))),this.hideLiveStreams&&(e=e.filter((t=>!t.liveNow&&!t.isUpcoming))),this.hideUpcomingPremieres&&(e=e.filter((t=>t.isRSS?"0"!==t.viewCount:"PREMIERE"!==t.durationText)));const t={activeProfile:this.activeProfile._id,videoList:e,errorChannels:this.errorChannels};this.videoList=await Promise.all(e.filter((t=>!this.hideWatchedSubs||-1===this.historyCache.findIndex((e=>e.videoId===t.videoId))))),this.updateProfileSubscriptions(t),this.isLoading=!1,this.updateShowProgressBar(!1),this.activeProfile===wa&&this.updateAllSubscriptionsList(t.videoList)}}))},getProfileSubscriptions:async function(){0!==this.allSubscriptionsList.length?(this.isLoading=!0,this.videoList=await Promise.all(this.allSubscriptionsList.filter((t=>{const e=this.activeSubscriptionList.findIndex((e=>e.id===t.authorId)),i=this.historyCache.findIndex((e=>e.videoId===t.videoId));return this.hideWatchedSubs?-1!==e&&-1===i:-1!==e}))),this.isLoading=!1):this.fetchSubscriptionsAutomatically?this.getSubscriptions():this.activeProfile._id===this.profileSubscriptions.activeProfile?this.videoList=this.profileSubscriptions.videoList:(this.videoList=[],this.attemptedFetch=!1)},getChannelVideosLocalScraper:async function(t,e=0){try{const e=await async function(t){const e=await aD(t);return e.alert?null:e.has_videos?oD((await e.getVideos()).videos,e.header.author):[]}(t.id);return null===e?(this.errorChannels.push(t),[]):(e.map((t=>(t.liveNow?t.publishedDate=(new Date).getTime():t.isUpcoming?t.publishedDate=t.premiereDate:t.publishedDate=function(t){const e=new Date;if("Live"===t)return t;const i=t.split(" ");"streamed"===i[0].toLowerCase()&&i.shift();const n=i[1],r=parseInt(i[0]);let s=null;return n.indexOf("second")>-1?s=1e3*r:n.indexOf("minute")>-1?s=6e4*r:n.indexOf("hour")>-1?s=36e5*r:n.indexOf("day")>-1?s=864e5*r:n.indexOf("week")>-1?s=6048e5*r:n.indexOf("month")>-1?s=2592e6*r:n.indexOf("year")>-1&&(s=31556952e3*r),e.getTime()-s}(t.publishedText),t))),e)}catch(i){switch(console.error(i),kR(`${this.$t("Local API Error (Click to copy)")}: ${i}`,1e4,(()=>{CR(i)})),e){case 0:case 2:return await this.getChannelVideosLocalRSS(t,e+1);case 1:return this.backendFallback?(kR(this.$t("Falling back to Invidious API")),await this.getChannelVideosInvidiousScraper(t,e+1)):[];default:return[]}}},getChannelVideosLocalRSS:async function(t,e=0){const i=`https://www.youtube.com/feeds/videos.xml?channel_id=${t.id}`;try{let e;return e=bD.env.IS_CORDOVA?await tD(i):await fetch(i),404===e.status?(this.errorChannels.push(t),[]):await this.parseYouTubeRSSFeed(await e.text(),t.id)}catch(i){switch(console.error(i),kR(`${this.$t("Local API Error (Click to copy)")}: ${i}`,1e4,(()=>{CR(i)})),e){case 0:case 2:return this.getChannelVideosLocalScraper(t,e+1);case 1:return this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getChannelVideosInvidiousRSS(t,e+1)):[];default:return[]}}},getChannelVideosInvidiousScraper:function(t,e=0){return new Promise(((i,n)=>{Bh({resource:"channels/latest",id:t.id,params:{}}).then((async t=>{let e=t;"videos"in t&&(e=t.videos),i(await Promise.all(e.map((t=>(t.publishedDate=new Date(1e3*t.published),t)))))})).catch((n=>{switch(console.error(n),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${n.responseText}`,1e4,(()=>{CR(n.responseText)})),e){case 0:case 2:i(this.getChannelVideosInvidiousRSS(t,e+1));break;default:i([])}}))}))},getChannelVideosInvidiousRSS:async function(t,e=0){const i=`${this.currentInvidiousInstance}/feed/channel/${t.id}`;try{let e;return e=bD.env.IS_CORDOVA?await tD(i):await fetch(i),500===e.status?(this.errorChannels.push(t),[]):await this.parseYouTubeRSSFeed(await e.text(),t.id)}catch(i){switch(console.error(i),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${i}`,1e4,(()=>{CR(i)})),e){case 0:case 2:return this.getChannelVideosInvidiousScraper(t,e+1);default:return[]}}},async parseYouTubeRSSFeed(t,e){const i=(new DOMParser).parseFromString(t,"application/xml"),n=i.querySelector("author > name").textContent,r=i.querySelectorAll("entry"),s=[];for(const t of r)s.push(this.parseRSSEntry(t,e,n));return await Promise.all(s)},async parseRSSEntry(t,e,i){const n=new Date(t.querySelector("published").textContent);return{authorId:e,author:i,videoId:t.getElementsByTagName("yt:videoId")[0].textContent,title:t.querySelector("title").textContent,publishedDate:n,publishedText:n.toLocaleString(),viewCount:t.getElementsByTagName("media:statistics")[0]?.getAttribute("views")||null,type:"video",lengthSeconds:"0:00",isRSS:!0}},increaseLimit:function(){this.dataLimit+=100,sessionStorage.setItem("subscriptionLimit",this.dataLimit)},keyboardShortcutHandler:function(t){if(!t.ctrlKey&&!document.activeElement.classList.contains("ft-input"))switch(t.key){case"r":case"R":this.isLoading||this.getSubscriptions()}},...Is(["updateShowProgressBar","updateProfileSubscriptions","updateAllSubscriptionsList"]),...Cs(["setProgressBarPercentage"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):e("ft-card",{staticClass:"card"},[0!==t.errorChannels.length?e("div",[e("h3",[t._v(" "+t._s(t.$t("Subscriptions.Error Channels")))]),e("div",t._l(t.errorChannels,(function(i,n){return e("ft-channel-bubble",{key:n,staticClass:"channelBubble",attrs:{"channel-name":i.name,"channel-id":i.id,"channel-thumbnail":i.thumbnail},on:{click:function(e){return t.goToChannel(i.id)}}})})),1)]):t._e(),e("h3",[t._v(t._s(t.$t("Subscriptions.Subscriptions")))]),0===t.activeVideoList.length?e("ft-flex-box",[0===t.activeSubscriptionList.length?e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Subscriptions['Your Subscription list is currently empty. Start adding subscriptions to see them here.']"))+" ")]):t.fetchSubscriptionsAutomatically||t.attemptedFetch?e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Subscriptions.Empty Channels"))+" ")]):e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Subscriptions.Disabled Automatic Fetching"))+" ")])]):e("ft-element-list",{attrs:{data:t.activeVideoList}}),e("ft-flex-box",[t.videoList.length>t.dataLimit?e("ft-button",{attrs:{label:t.$t("Subscriptions.Load More Videos"),"background-color":"var(--primary-color)","text-color":"var(--text-with-main-color)"},on:{click:t.increaseLimit}}):t._e()],1)],1),t.isLoading?t._e():e("ft-icon-button",{staticClass:"floatingTopButton",attrs:{icon:["fas","sync"],title:t.$t("Subscriptions.Refresh Subscriptions"),size:12,theme:"primary"},on:{click:t.getSubscriptions}})],1)}),[],!1,null,"006e7c7e",null);const wD=_D.exports,TD={name:"SubscribedChannels",components:{"ft-button":ra,"ft-card":na,"ft-flex-box":Ys,"ft-input":ta,"ft-prompt":la},data:function(){return{query:"",subscribedChannels:[],filteredChannels:[],re:{url:/(.+=\w)\d+(.+)/,ivToYt:/^.+ggpht\/(.+)/},thumbnailSize:176,ytBaseURL:"https://yt3.ggpht.com",showUnsubscribePrompt:!1,unsubscribePromptValues:["yes","no"],channelToUnsubscribe:null,errorCount:0}},computed:{activeProfile:function(){return this.$store.getters.getActiveProfile},activeProfileId:function(){return this.activeProfile._id},activeSubscriptionList:function(){return this.activeProfile.subscriptions},channelList:function(){return""!==this.query?this.filteredChannels:this.subscribedChannels},hideUnsubscribeButton:function(){return this.$store.getters.getHideUnsubscribeButton},locale:function(){return this.$i18n.locale.replace("_","-")},backendPreference:function(){return this.$store.getters.getBackendPreference},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},unsubscribePromptNames:function(){return[this.$t("Yes"),this.$t("No")]}},watch:{activeProfileId:function(){this.query="",this.getSubscription()},activeSubscriptionList:function(){this.getSubscription(),this.filterChannels()}},mounted:function(){this.getSubscription()},methods:{getSubscription:function(){this.subscribedChannels=this.activeSubscriptionList.slice().sort(((t,e)=>t.name.localeCompare(e.name,this.locale)))},handleInput:function(t){this.query=t,this.filterChannels()},filterChannels:function(){if(""===this.query)return void(this.filteredChannels=[]);const t=this.query.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&"),e=new RegExp(t,"i");this.filteredChannels=this.subscribedChannels.filter((t=>e.test(t.name)))},handleUnsubscribeButtonClick:function(t){this.channelToUnsubscribe=t,this.showUnsubscribePrompt=!0},handleUnsubscribePromptClick:function(t){this.showUnsubscribePrompt=!1,"yes"===t?this.unsubscribeChannel():this.channelToUnsubscribe=null},unsubscribeChannel:function(){const t=JSON.parse(JSON.stringify(this.activeProfile));let e=t.subscriptions.findIndex((t=>t.id===this.channelToUnsubscribe.id));t.subscriptions.splice(e,1),this.updateProfile(t),kR(this.$t("Channels.Unsubscribed",{channelName:this.channelToUnsubscribe.name})),e=this.subscribedChannels.findIndex((t=>t.id===this.channelToUnsubscribe.id)),this.subscribedChannels.splice(e,1),e=this.filteredChannels.findIndex((t=>t.id===this.channelToUnsubscribe.id)),-1!==e&&this.filteredChannels.splice(e,1),this.channelToUnsubscribe=null},thumbnailURL:function(t){let e=t;const i=new URL(t).hostname;return"yt3.ggpht.com"===i||"yt3.googleusercontent.com"===i?"invidious"===this.backendPreference&&(e=Uh(t,this.currentInvidiousInstance)):e="local"===this.backendPreference?t.replace(this.re.ivToYt,`${this.ytBaseURL}/$1`):function(t,e=null){return t.replace(/^.+(ggpht.+)/,e)}(t,this.currentInvidiousInstance),e.replace(this.re.url,`$1${this.thumbnailSize}$2`)},updateThumbnail:function(t){this.errorCount+=1,"local"===this.backendPreference?setTimeout((()=>{aD(t.id).then((e=>{e.alert||this.updateSubscriptionDetails({channelThumbnailUrl:this.thumbnailURL(e.header.author.thumbnails[0].url),channelName:t.name,channelId:t.id})}))}),500*this.errorCount):setTimeout((()=>{Fh(t.id).then((e=>{this.updateSubscriptionDetails({channelThumbnailUrl:this.thumbnailURL(e.authorThumbnails[0].url),channelName:t.name,channelId:t.id})}))}),500*this.errorCount)},...Is(["updateProfile","updateSubscriptionDetails"])}},SD=Ks(TD,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-card",{staticClass:"card"},[e("h3",[t._v(t._s(t.$t("Channels.Title")))]),e("ft-input",{directives:[{name:"show",rawName:"v-show",value:t.subscribedChannels.length>0,expression:"subscribedChannels.length > 0"}],ref:"searchBarChannels",attrs:{placeholder:t.$t("Channels.Search bar placeholder"),"show-clear-text-button":!0,"show-action-button":!1,spellcheck:!1},on:{input:t.handleInput,clear:function(e){t.query=""}}}),0===t.activeSubscriptionList.length?e("ft-flex-box",[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Channels.Empty"))+" ")])]):[e("ft-flex-box",{staticClass:"count"},[t._v(" "+t._s(t.$t("Channels.Count",{number:t.channelList.length}))+" ")]),e("ft-flex-box",{staticClass:"channels"},t._l(t.channelList,(function(i){return e("div",{key:i.key,staticClass:"channel"},[e("router-link",{staticClass:"thumbnailContainer",attrs:{tabindex:"-1",to:`/channel/${i.id}`}},[e("img",{staticClass:"channelThumbnail",attrs:{src:t.thumbnailURL(i.thumbnail),alt:""},on:{"~error":function(e){return t.updateThumbnail(i)}}})]),e("router-link",{staticClass:"channelName",attrs:{title:i.name,to:`/channel/${i.id}`}},[t._v(" "+t._s(i.name)+" ")]),t.hideUnsubscribeButton?t._e():e("div",{staticClass:"unsubscribeContainer"},[e("ft-button",{attrs:{label:t.$t("Channels.Unsubscribe"),"background-color":"var(--search-bar-color)","text-color":"var(--secondary-text-color)"},on:{click:function(e){return t.handleUnsubscribeButtonClick(i)}}})],1)],1)})),0)]],2),t.showUnsubscribePrompt?e("ft-prompt",{attrs:{label:t.$t("Channels.Unsubscribe Prompt",{channelName:t.channelToUnsubscribe.name}),"option-names":t.unsubscribePromptNames,"option-values":t.unsubscribePromptValues},on:{click:t.handleUnsubscribePromptClick}}):t._e()],1)}),[],!1,null,"efd03dbe",null).exports;var xD=Ks({name:"FtProfileBubble",props:{profileName:{type:String,required:!0},profileId:{type:String,required:!0},backgroundColor:{type:String,required:!0},textColor:{type:String,required:!0}},computed:{profileInitial:function(){return this?.profileName?.length>0?Array.from(this.profileName)[0].toUpperCase():""}},methods:{goToProfile:function(){this.$router.push({path:`/settings/profile/edit/${this.profileId}`})}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"bubblePadding",on:{click:t.goToProfile}},[e("div",{staticClass:"bubble",style:{background:t.backgroundColor,color:t.textColor}},[e("div",{staticClass:"initial"},[t._v(" "+t._s(t.profileInitial)+" ")])]),e("div",{staticClass:"profileName"},[t._v(" "+t._s(t.profileName)+" ")])])}),[],!1,null,"5da9947f",null),kD=Ks({name:"ProfileSettings",components:{"ft-card":na,"ft-flex-box":Ys,"ft-profile-bubble":xD.exports,"ft-button":ra},computed:{profileList:function(){return this.$store.getters.getProfileList}},methods:{newProfile:function(){this.$router.push({path:"/settings/profile/new/"})}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-card",{staticClass:"card"},[e("h3",[t._v(t._s(t.$t("Profile.Profile Manager")))]),e("ft-flex-box",{staticClass:"profileList"},t._l(t.profileList,(function(t,i){return e("ft-profile-bubble",{key:i,attrs:{"profile-id":t._id,"profile-name":t.name,"background-color":t.bgColor,"text-color":t.textColor}})})),1),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Profile.Create New Profile")},on:{click:t.newProfile}})],1)],1)],1)}),[],!1,null,"4ba5edd6",null);const CD=kD.exports;var ED=Ks({name:"FtProfileEdit",components:{"ft-card":na,"ft-prompt":la,"ft-flex-box":Ys,"ft-input":ta,"ft-button":ra},props:{profile:{type:Object,required:!0},isNew:{type:Boolean,required:!0}},data:function(){return{showDeletePrompt:!1,profileId:"",profileName:"",profileBgColor:"",profileTextColor:"",profileSubscriptions:[],deletePromptValues:["yes","no"]}},computed:{isMainProfile:function(){return this.profileId===wa},colorValues:function(){return Nc.map((t=>t.value))},profileInitial:function(){return this?.profileName?.length>0?Array.from(this.profileName)[0].toUpperCase():""},profileList:function(){return this.$store.getters.getProfileList},activeProfile:function(){return this.$store.getters.getActiveProfile},defaultProfile:function(){return this.$store.getters.getDefaultProfile},deletePromptLabel:function(){return`${this.$t("Profile.Are you sure you want to delete this profile?")} ${this.$t('Profile["All subscriptions will also be deleted."]')}`},deletePromptNames:function(){return[this.$t("Yes"),this.$t("No")]}},watch:{profileBgColor:function(t){this.profileTextColor=$c(t)}},created:function(){this.profileId=this.$route.params.id,this.profileName=this.profile.name,this.profileBgColor=this.profile.bgColor,this.profileTextColor=this.profile.textColor},methods:{openDeletePrompt:function(){this.showDeletePrompt=!0},handleDeletePrompt:function(t){"yes"===t?this.deleteProfile():this.showDeletePrompt=!1},saveProfile:function(){if(""===this.profileName)return void kR(this.$t("Profile.Your profile name cannot be empty"));const t={name:this.profileName,bgColor:this.profileBgColor,textColor:this.profileTextColor,subscriptions:this.profile.subscriptions};this.isNew||(t._id=this.profileId),this.isNew?(this.createProfile(t),kR(this.$t("Profile.Profile has been created")),this.$router.push({path:"/settings/profile/"})):(this.updateProfile(t),kR(this.$t("Profile.Profile has been updated")))},setDefaultProfile:function(){this.updateDefaultProfile(this.profileId),kR(this.$t("Profile.Your default profile has been set to {profile}",{profile:this.profileName}))},deleteProfile:function(){this.activeProfile._id===this.profileId&&this.updateActiveProfile(wa),this.removeProfile(this.profileId),kR(this.$t("Profile.Removed {profile} from your profiles",{profile:this.profileName})),this.defaultProfile===this.profileId&&(this.updateDefaultProfile(wa),kR(this.$t("Profile.Your default profile has been changed to your primary profile"))),this.$router.push({path:"/settings/profile/"})},...Is(["createProfile","updateProfile","removeProfile","updateDefaultProfile","updateActiveProfile"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-card",{staticClass:"card"},[e("h2",[t._v(t._s(t.$t("Profile.Edit Profile")))]),e("ft-flex-box",[e("ft-input",{staticClass:"profileName",attrs:{placeholder:"Profile Name",value:t.profileName,"show-action-button":!1},on:{input:e=>t.profileName=e}})],1),e("h3",[t._v(t._s(t.$t("Profile.Color Picker")))]),e("ft-flex-box",{staticClass:"bottomMargin colorOptions"},t._l(t.colorValues,(function(i,n){return e("div",{key:n,staticClass:"colorOption",style:{background:i},on:{click:function(e){t.profileBgColor=i}}})})),0),e("ft-flex-box",{staticClass:"bottomMargin"},[e("div",[e("label",{attrs:{for:"colorPicker"}},[t._v(t._s(t.$t("Profile.Custom Color")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profileBgColor,expression:"profileBgColor"}],attrs:{id:"colorPicker",type:"color"},domProps:{value:t.profileBgColor},on:{input:function(e){e.target.composing||(t.profileBgColor=e.target.value)}}})])]),e("ft-flex-box",[e("ft-input",{staticClass:"profileName",attrs:{placeholder:"",value:t.profileBgColor,"show-action-button":!1,disabled:!0}})],1),e("h3",[t._v(t._s(t.$t("Profile.Profile Preview")))]),e("ft-flex-box",{staticClass:"bottomMargin"},[e("div",{staticClass:"colorOption",staticStyle:{cursor:"default"},style:{background:t.profileBgColor,color:t.profileTextColor}},[e("div",{staticClass:"initial"},[t._v(" "+t._s(t.profileInitial)+" ")])])]),e("ft-flex-box",[t.isNew?e("ft-button",{attrs:{label:t.$t("Profile.Create Profile")},on:{click:t.saveProfile}}):t._e(),t.isNew?t._e():e("ft-button",{attrs:{label:t.$t("Profile.Update Profile")},on:{click:t.saveProfile}}),t.isNew?t._e():e("ft-button",{attrs:{label:t.$t("Profile.Make Default Profile")},on:{click:t.setDefaultProfile}}),t.isMainProfile||t.isNew?t._e():e("ft-button",{attrs:{label:t.$t("Profile.Delete Profile"),"text-color":"var(--text-with-main-color)","background-color":"var(--primary-color)"},on:{click:t.openDeletePrompt}})],1)],1),t.showDeletePrompt?e("ft-prompt",{attrs:{label:t.deletePromptLabel,"option-names":t.deletePromptNames,"option-values":t.deletePromptValues},on:{click:t.handleDeletePrompt}}):t._e()],1)}),[],!1,null,"0ad15f32",null);const ID=ED.exports,PD={name:"FtProfileChannelList",components:{"ft-card":na,"ft-flex-box":Ys,"ft-channel-bubble":Xh,"ft-button":ra,"ft-prompt":la},props:{profile:{type:Object,required:!0},isMainProfile:{type:Boolean,required:!0}},data:function(){return{showDeletePrompt:!1,subscriptions:[],selectedLength:0,componentKey:0,deletePromptValues:["yes","no"]}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},profileList:function(){return this.$store.getters.getProfileList},selectedText:function(){return this.$t("Profile.{number} selected",{number:this.selectedLength})},deletePromptMessage:function(){return this.isMainProfile?this.$t('Profile["This is your primary profile.  Are you sure you want to delete the selected channels?  The same channels will be deleted in any profile they are found in."]'):this.$t('Profile["Are you sure you want to delete the selected channels?  This will not delete the channel from any other profile."]')},deletePromptNames:function(){return[this.$t("Yes"),this.$t("No")]}},watch:{profile:function(){this.subscriptions=JSON.parse(JSON.stringify(this.profile.subscriptions)).sort(((t,e)=>{const i=t.name.toLowerCase(),n=e.name.toLowerCase();return i<n?-1:i>n?1:0})).map((t=>("invidious"===this.backendPreference&&(t.thumbnail=Uh(t.thumbnail,this.currentInvidiousInstance)),t.selected=!1,t)))}},mounted:function(){void 0!==this.profile.subscriptions&&(this.subscriptions=JSON.parse(JSON.stringify(this.profile.subscriptions)).sort(((t,e)=>{const i=t.name.toLowerCase(),n=e.name.toLowerCase();return i<n?-1:i>n?1:0})).map((t=>("invidious"===this.backendPreference&&(t.thumbnail=Uh(t.thumbnail,this.currentInvidiousInstance)),t.selected=!1,t))))},methods:{displayDeletePrompt:function(){0===this.selectedLength?kR(this.$t("Profile.No channel(s) have been selected")):this.showDeletePrompt=!0},handleDeletePromptClick:function(t){if("no"!==t&&null!==t)if(this.isMainProfile){const t=this.subscriptions.filter((t=>t.selected));this.subscriptions=this.subscriptions.filter((t=>!t.selected)),this.profileList.forEach((e=>{const i=JSON.parse(JSON.stringify(e));i.subscriptions=i.subscriptions.filter((e=>-1===t.findIndex((t=>t.id===e.id)))),this.updateProfile(i)})),kR(this.$t("Profile.Profile has been updated")),this.selectNone()}else{const t=JSON.parse(JSON.stringify(this.profile));this.subscriptions=this.subscriptions.filter((t=>!t.selected)),t.subscriptions=this.subscriptions,this.selectedLength=0,this.updateProfile(t),kR(this.$t("Profile.Profile has been updated")),this.selectNone()}this.showDeletePrompt=!1},handleChannelClick:function(t){this.subscriptions[t].selected=!this.subscriptions[t].selected,this.selectedLength=this.subscriptions.filter((t=>t.selected)).length},selectAll:function(){Object.keys(this.$refs).forEach((t=>{void 0!==this.$refs[t][0]&&(this.$refs[t][0].selected=!0)})),this.subscriptions=this.subscriptions.map((t=>(t.selected=!0,t))),this.selectedLength=this.subscriptions.filter((t=>t.selected)).length},selectNone:function(){Object.keys(this.$refs).forEach((t=>{void 0!==this.$refs[t][0]&&(this.$refs[t][0].selected=!1)})),this.subscriptions=this.subscriptions.map((t=>(t.selected=!1,t))),this.selectedLength=this.subscriptions.filter((t=>t.selected)).length},...Is(["updateProfile"])}};var AD=Ks(PD,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-card",{staticClass:"card"},[e("h2",[t._v(" "+t._s(t.$t("Profile.Subscription List"))+" ")]),e("p",[t._v(" "+t._s(t.selectedText)+" ")]),e("ft-flex-box",t._l(t.subscriptions,(function(i,n){return e("ft-channel-bubble",{key:n,ref:`channel-${n}`,refInFor:!0,attrs:{"channel-name":i.name,"channel-thumbnail":i.thumbnail,"show-selected":!0},on:{click:function(e){return t.handleChannelClick(n)}}})})),1),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Profile.Select All")},on:{click:t.selectAll}}),e("ft-button",{attrs:{label:t.$t("Profile.Select None")},on:{click:t.selectNone}}),e("ft-button",{attrs:{label:t.$t("Profile.Delete Selected"),"text-color":"var(--text-with-main-color)","background-color":"var(--primary-color)"},on:{click:t.displayDeletePrompt}})],1)],1),t.showDeletePrompt?e("ft-prompt",{attrs:{label:t.deletePromptMessage,"option-names":t.deletePromptNames,"option-values":t.deletePromptValues},on:{click:t.handleDeletePromptClick}}):t._e()],1)}),[],!1,null,"a3ccef1e",null);const LD=AD.exports;var OD=Ks({name:"FtSelect",components:{"ft-tooltip":Qs},props:{placeholder:{type:String,required:!0},value:{type:[String,Number],required:!0},selectNames:{type:Array,required:!0},selectValues:{type:Array,required:!0},tooltip:{type:String,default:""},disabled:{type:Boolean,default:!1},sanitizedId:{type:String,default:null},describeById:{type:String,default:null}},computed:{sanitizedPlaceholder:function(){return sa(this.placeholder)}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"select"},[e("select",{staticClass:"select-text",class:{disabled:t.disabled},attrs:{id:t.sanitizedId??t.sanitizedPlaceholder,"describe-by-id":t.describeById,name:t.sanitizedId??t.sanitizedPlaceholder,disabled:t.disabled},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}},t._l(t.selectNames,(function(i,n){return e("option",{key:n,domProps:{value:t.selectValues[n]}},[t._v(" "+t._s(i)+" ")])})),0),e("font-awesome-icon",{staticClass:"iconSelect",attrs:{icon:["fas","sort-down"]}}),e("span",{staticClass:"select-highlight"}),e("span",{staticClass:"select-bar"}),e("label",{staticClass:"select-label",attrs:{for:t.sanitizedId??t.sanitizedPlaceholder,hidden:t.disabled}},[t._v(" "+t._s(t.placeholder)+" ")]),""!==t.tooltip?e("ft-tooltip",{staticClass:"selectTooltip",attrs:{tooltip:t.tooltip}}):t._e()],1)}),[],!1,null,"5fb41356",null);const DD=OD.exports,MD={name:"FtProfileFilterChannelsList",components:{"ft-card":na,"ft-flex-box":Ys,"ft-channel-bubble":Xh,"ft-button":ra,"ft-select":DD},props:{profile:{type:Object,required:!0}},data:function(){return{channels:[],selectedLength:0,filteredProfileIndex:0}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},profileList:function(){return this.$store.getters.getProfileList},profileNameList:function(){return this.profileList.flatMap((t=>t.name!==this.profile.name?[t.name]:[]))},selectedText:function(){return this.$t("Profile.{number} selected",{number:this.selectedLength})}},watch:{profile:"updateChannelList",filteredProfileIndex:"updateChannelList"},mounted:function(){void 0!==this.profile.subscriptions&&(this.channels=JSON.parse(JSON.stringify(this.profileList[this.filteredProfileIndex].subscriptions)).sort(((t,e)=>{const i=t.name.toLowerCase(),n=e.name.toLowerCase();return i<n?-1:i>n?1:0})).filter((t=>-1===this.profile.subscriptions.findIndex((e=>e.id===t.id)))).map((t=>("invidious"===this.backendPreference&&(t.thumbnail=Uh(t.thumbnail,this.currentInvidiousInstance)),t.selected=!1,t))))},methods:{updateChannelList(){this.channels=JSON.parse(JSON.stringify(this.profileList[this.filteredProfileIndex].subscriptions)).sort(((t,e)=>{const i=t.name.toLowerCase(),n=e.name.toLowerCase();return i<n?-1:i>n?1:0})).filter((t=>-1===this.profile.subscriptions.findIndex((e=>e.id===t.id)))).map((t=>("invidious"===this.backendPreference&&(t.thumbnail=Uh(t.thumbnail,this.currentInvidiousInstance)),t.selected=!1,t)))},handleChannelClick:function(t){this.channels[t].selected=!this.channels[t].selected,this.selectedLength=this.channels.filter((t=>t.selected)).length},handleProfileFilterChange:function(t){this.filteredProfileIndex=this.profileList.findIndex((e=>e.name===t))},addChannelToProfile:function(){if(0===this.selectedLength)kR(this.$t("Profile.No channel(s) have been selected"));else{const t=this.channels.filter((t=>t.selected)),e=JSON.parse(JSON.stringify(this.profile));e.subscriptions=e.subscriptions.concat(t),this.updateProfile(e),kR(this.$t("Profile.Profile has been updated")),this.selectNone()}},selectAll:function(){Object.keys(this.$refs).forEach((t=>{void 0!==this.$refs[t][0]&&(this.$refs[t][0].selected=!0)})),this.channels=this.channels.map((t=>(t.selected=!0,t))),this.selectedLength=this.channels.filter((t=>t.selected)).length},selectNone:function(){Object.keys(this.$refs).forEach((t=>{void 0!==this.$refs[t][0]&&(this.$refs[t][0].selected=!1)})),this.channels=this.channels.map((t=>(t.selected=!1,t))),this.selectedLength=this.channels.filter((t=>t.selected)).length},...Is(["updateProfile"])}};var RD=Ks(MD,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-card",{staticClass:"card"},[e("h2",[t._v(" "+t._s(t.$t("Profile.Other Channels"))+" ")]),e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Profile.Profile Filter"),value:t.profileNameList[0],"select-names":t.profileNameList,"select-values":t.profileNameList},on:{change:t.handleProfileFilterChange}})],1),e("p",{staticClass:"selected"},[t._v(" "+t._s(t.selectedText)+" ")]),e("ft-flex-box",t._l(t.channels,(function(i,n){return e("ft-channel-bubble",{key:n,ref:`all-channels-${n}`,refInFor:!0,attrs:{"channel-name":i.name,"channel-thumbnail":i.thumbnail,"show-selected":!0},on:{click:function(e){return t.handleChannelClick(n)}}})})),1),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Profile.Select All")},on:{click:t.selectAll}}),e("ft-button",{attrs:{label:t.$t("Profile.Select None")},on:{click:t.selectNone}}),e("ft-button",{attrs:{label:t.$t("Profile.Add Selected To Profile"),"text-color":"var(--text-with-main-color)","background-color":"var(--primary-color)"},on:{click:t.addChannelToProfile}})],1)],1)],1)}),[],!1,null,"baf5ec48",null);const ND=Ks({name:"ProfileEdit",components:{"ft-loader":pc,"ft-profile-edit":ID,"ft-profile-channel-list":LD,"ft-profile-filter-channels-list":RD.exports},data:function(){return{isLoading:!0,isNew:!1,profileId:"",profile:{}}},computed:{...Es(["profileById"]),profileList:function(){return this.$store.getters.getProfileList},isMainProfile:function(){return this.profileId===wa}},watch:{profileList:{handler:function(){const t=this.profileById(this.profileId);t||(kR(this.$t("Profile.Profile could not be found")),this.$router.push({path:"/settings/profile/"})),this.profile=t},deep:!0}},mounted:function(){const t=this.$route.name;if(this.deletePromptLabel=`${this.$t("Profile.Are you sure you want to delete this profile?")} ${this.$t('Profile["All subscriptions will also be deleted."]')}`,"newProfile"===t){this.isNew=!0;const t=Fc(),e=$c(t);this.profile={name:"",bgColor:t,textColor:e,subscriptions:[]}}else{this.isNew=!1,this.profileId=this.$route.params.id;const t=this.profileById(this.profileId);t||(kR(this.$t("Profile.Profile could not be found")),this.$router.push({path:"/settings/profile/"})),this.profile=t}this.isLoading=!1}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):e("div",[e("ft-profile-edit",{attrs:{profile:t.profile,"is-new":t.isNew}}),t.isNew?t._e():e("ft-profile-channel-list",{attrs:{profile:t.profile,"is-main-profile":t.isMainProfile}}),t.isNew||t.isMainProfile?t._e():e("ft-profile-filter-channels-list",{attrs:{profile:t.profile}})],1)],1)}),[],!1,null,"8381e26a",null).exports;var BD=i(34155);const FD=Ks({name:"Trending",components:{"ft-card":na,"ft-loader":pc,"ft-element-list":Yh,"ft-icon-button":ha,"ft-flex-box":Ys},data:function(){return{isLoading:!1,shownResults:[],currentTab:"default",trendingInstance:null}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},region:function(){return this.$store.getters.getRegion.toUpperCase()},trendingCache(){return this.$store.getters.getTrendingCache}},mounted:function(){document.addEventListener("keydown",this.keyboardShortcutHandler),this.trendingCache[this.currentTab]&&this.trendingCache[this.currentTab].length>0?this.getTrendingInfoCache():this.getTrendingInfo()},beforeDestroy:function(){document.removeEventListener("keydown",this.keyboardShortcutHandler)},methods:{changeTab:function(t){t!==this.currentTab&&(this.currentTab=t,this.trendingCache[this.currentTab]&&this.trendingCache[this.currentTab].length>0?this.getTrendingInfoCache():this.getTrendingInfo())},focusTab:function(t,e){t.altKey||(t.preventDefault(),this.$refs[e].focus(),this.$emit("showOutlines"))},getTrendingInfo:function(){BD.env.IS_CORDOVA&&"invidious"!==this.backendPreference?this.getTrendingInfoLocal():this.getTrendingInfoInvidious()},getTrendingInfoLocal:async function(){this.isLoading=!0;try{const{results:t,instance:e}=await async function(t,e,i){if(null===i){const e=await eD({location:t});i=await e.getTrending()}const n=["default","music","gaming","movies"].indexOf(e),r=await i.getTabByName(i.tabs[n]);return{results:r.videos.filter((t=>"Video"===t.type)).map(hD),instance:r}}(this.region,this.currentTab,this.trendingInstance);this.shownResults=t,this.isLoading=!1,this.trendingInstance=e,this.$store.commit("setTrendingCache",{value:t,page:this.currentTab}),setTimeout((()=>{this.$refs[this.currentTab].focus()}))}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getTrendingInfoInvidious()):this.isLoading=!1}},getTrendingInfoCache:function(){this.isLoading=!0,setTimeout((()=>{this.shownResults=this.trendingCache[this.currentTab],this.isLoading=!1,setTimeout((()=>{this.$refs[this.currentTab].focus()}))}))},getTrendingInfoInvidious:function(){this.isLoading=!0;const t={resource:"trending",id:"",params:{region:this.region}};"default"!==this.currentTab&&(t.params.type=this.currentTab.charAt(0).toUpperCase()+this.currentTab.slice(1)),Bh(t).then((t=>{if(!t)return;const e=t.filter((t=>"video"===t.type||"channel"===t.type||"playlist"===t.type));this.shownResults=e,this.isLoading=!1,this.$store.commit("setTrendingCache",{value:e,page:this.currentTab}),setTimeout((()=>{this.$refs[this.currentTab].focus()}))})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t.responseText}`,1e4,(()=>{CR(t.responseText)})),BD.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Local API")),this.getTrendingInfoLocal()):this.isLoading=!1}))},keyboardShortcutHandler:function(t){if(!t.ctrlKey&&!document.activeElement.classList.contains("ft-input"))switch(t.key){case"r":case"R":this.isLoading||this.getTrendingInfo()}}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):e("ft-card",{staticClass:"card"},[e("h3",[t._v(t._s(t.$t("Trending.Trending")))]),e("ft-flex-box",{staticClass:"trendingInfoTabs",attrs:{role:"tablist","aria-label":t.$t("Trending.Trending Tabs")}},[e("div",{ref:"default",staticClass:"tab",class:{selectedTab:"default"===t.currentTab},attrs:{role:"tab","aria-selected":String("default"===t.currentTab),"aria-controls":"trendingPanel",tabindex:"default"===t.currentTab?0:-1},on:{click:function(e){return t.changeTab("default")},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.changeTab("default"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.focusTab(e,"movies")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.focusTab(e,"music")}]}},[t._v(" "+t._s(t.$t("Trending.Default").toUpperCase())+" ")]),e("div",{ref:"music",staticClass:"tab",class:{selectedTab:"music"===t.currentTab},attrs:{role:"tab","aria-selected":String("music"===t.currentTab),"aria-controls":"trendingPanel",tabindex:"music"===t.currentTab?0:-1},on:{click:function(e){return t.changeTab("music")},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.changeTab("music"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.focusTab(e,"default")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.focusTab(e,"gaming")}]}},[t._v(" "+t._s(t.$t("Trending.Music").toUpperCase())+" ")]),e("div",{ref:"gaming",staticClass:"tab",class:{selectedTab:"gaming"===t.currentTab},attrs:{role:"tab","aria-selected":String("gaming"===t.currentTab),"aria-controls":"trendingPanel",tabindex:"gaming"===t.currentTab?0:-1},on:{click:function(e){return t.changeTab("gaming")},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.changeTab("gaming"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.focusTab(e,"music")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.focusTab(e,"movies")}]}},[t._v(" "+t._s(t.$t("Trending.Gaming").toUpperCase())+" ")]),e("div",{ref:"movies",staticClass:"tab",class:{selectedTab:"movies"===t.currentTab},attrs:{role:"tab","aria-selected":String("movies"===t.currentTab),"aria-controls":"trendingPanel",tabindex:"movies"===t.currentTab?0:-1},on:{click:function(e){return t.changeTab("movies")},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.changeTab("movies"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.focusTab(e,"gaming")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.focusTab(e,"default")}]}},[t._v(" "+t._s(t.$t("Trending.Movies").toUpperCase())+" ")])]),e("ft-element-list",{attrs:{id:"trendingPanel",role:"tabpanel",data:t.shownResults}})],1),t.isLoading?t._e():e("ft-icon-button",{staticClass:"floatingTopButton",attrs:{icon:["fas","sync"],size:12,theme:"primary"},on:{click:t.getTrendingInfo}})],1)}),[],!1,null,"61842bd4",null).exports,$D=Ks({name:"Popular",components:{"ft-loader":pc,"ft-card":na,"ft-element-list":Yh,"ft-icon-button":ha},data:function(){return{isLoading:!1,shownResults:[]}},computed:{popularCache:function(){return this.$store.getters.getPopularCache}},mounted:function(){document.addEventListener("keydown",this.keyboardShortcutHandler),this.shownResults=this.popularCache,(!this.shownResults||this.shownResults.length<1)&&this.fetchPopularInfo()},beforeDestroy:function(){document.removeEventListener("keydown",this.keyboardShortcutHandler)},methods:{fetchPopularInfo:async function(){this.isLoading=!0;const t=await Bh({resource:"popular",id:"",params:{}}).catch((t=>{console.error(t)}));t?(this.shownResults=t.filter((t=>"video"===t.type||"shortVideo"===t.type||"channel"===t.type||"playlist"===t.type)),this.isLoading=!1,this.$store.commit("setPopularCache",this.shownResults)):this.isLoading=!1},keyboardShortcutHandler:function(t){if(!t.ctrlKey&&!document.activeElement.classList.contains("ft-input"))switch(t.key){case"r":case"R":this.isLoading||this.fetchPopularInfo()}}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):e("ft-card",{staticClass:"card"},[e("h3",[t._v(t._s(t.$t("Most Popular")))]),e("ft-element-list",{attrs:{data:t.shownResults}})],1),t.isLoading?t._e():e("ft-icon-button",{staticClass:"floatingTopButton",attrs:{icon:["fas","sync"],size:12,theme:"primary"},on:{click:t.fetchPopularInfo}})],1)}),[],!1,null,"364606a0",null).exports,UD=Ks({name:"UserPlaylists",components:{"ft-card":na,"ft-flex-box":Ys,"ft-tooltip":Qs,"ft-loader":pc,"ft-button":ra,"ft-element-list":Yh,"ft-input":ta},data:function(){return{isLoading:!1,dataLimit:100,searchDataLimit:100,showLoadMoreButton:!1,query:"",hasQuery:!1,activeData:[]}},computed:{favoritesPlaylist:function(){return this.$store.getters.getFavorites},fullData:function(){const t=[].concat(this.favoritesPlaylist.videos).reverse();return this.favoritesPlaylist.videos.length<this.dataLimit?t:t.slice(0,this.dataLimit)}},watch:{query(){this.searchDataLimit=100,this.filterPlaylist()},activeData(){this.refreshPage()},fullData(){this.activeData=this.fullData,this.filterPlaylist()}},mounted:function(){const t=sessionStorage.getItem("favoritesLimit");null!==t&&(this.dataLimit=t),this.activeData.length<this.favoritesPlaylist.videos.length?this.showLoadMoreButton=!0:this.showLoadMoreButton=!1,this.activeData=this.fullData},methods:{increaseLimit:function(){""!==this.query?(this.searchDataLimit+=100,this.filterPlaylist()):(this.dataLimit+=100,sessionStorage.setItem("favoritesLimit",this.dataLimit))},filterPlaylist:function(){if(""===this.query)this.activeData=this.fullData,this.activeData.length<this.favoritesPlaylist.videos.length?this.showLoadMoreButton=!0:this.showLoadMoreButton=!1;else{const t=this.favoritesPlaylist.videos.filter((t=>"string"==typeof t.title&&"string"==typeof t.author&&(t.title.toLowerCase().includes(this.query.toLowerCase())||t.author.toLowerCase().includes(this.query.toLowerCase())))).sort(((t,e)=>e.timeAdded-t.timeAdded));t.length<=this.searchDataLimit?this.showLoadMoreButton=!1:this.showLoadMoreButton=!0,this.activeData=t.length<this.searchDataLimit?t:t.slice(0,this.searchDataLimit)}},refreshPage:function(){const t=window.scrollY||window.scrollTop||document.getElementsByTagName("html")[0].scrollTop;this.isLoading=!0,Be((()=>{this.isLoading=!1,Be((()=>{window.scrollTo(0,t)}))}))}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-loader",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{fullscreen:!0}}),e("ft-card",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"card"},[e("h3",[t._v(" "+t._s(t.$t("User Playlists.Your Playlists"))+" "),e("ft-tooltip",{staticClass:"selectTooltip",attrs:{position:"bottom",tooltip:t.$t("User Playlists.Playlist Message")}})],1),e("ft-input",{directives:[{name:"show",rawName:"v-show",value:t.fullData.length>0,expression:"fullData.length > 0"}],ref:"searchBar",attrs:{placeholder:t.$t("User Playlists.Search bar placeholder"),"show-clear-text-button":!0,"show-action-button":!1},on:{input:e=>t.query=e,clear:function(e){t.query=""}}}),e("ft-flex-box",{directives:[{name:"show",rawName:"v-show",value:0===t.fullData.length,expression:"fullData.length === 0"}]},[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("User Playlists['Your saved videos are empty. Click on the save button on the corner of a video to have it listed here']"))+" ")])]),e("ft-flex-box",{directives:[{name:"show",rawName:"v-show",value:0===t.activeData.length&&t.fullData.length>0,expression:"activeData.length === 0 && fullData.length > 0"}]},[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("User Playlists['Empty Search Message']"))+" ")])]),t.activeData.length>0&&!t.isLoading?e("ft-element-list",{attrs:{data:t.activeData}}):t._e(),t.showLoadMoreButton?e("ft-flex-box",[e("ft-button",{attrs:{label:"Load More","background-color":"var(--primary-color)","text-color":"var(--text-with-main-color)"},on:{click:t.increaseLimit}})],1):t._e()],1)],1)}),[],!1,null,"5def4c92",null).exports,jD=Ks({name:"History",components:{"ft-loader":pc,"ft-card":na,"ft-flex-box":Ys,"ft-element-list":Yh,"ft-button":ra,"ft-input":ta},data:function(){return{isLoading:!1,dataLimit:100,searchDataLimit:100,showLoadMoreButton:!1,hasQuery:!1,query:"",activeData:[]}},computed:{historyCache:function(){return this.$store.getters.getHistoryCache},fullData:function(){return this.historyCache.length<this.dataLimit?this.historyCache:this.historyCache.slice(0,this.dataLimit)}},watch:{query(){this.searchDataLimit=100,this.filterHistory()},activeData(){this.refreshPage()},fullData(){this.activeData=this.fullData,this.filterHistory()}},mounted:function(){const t=sessionStorage.getItem("historyLimit");null!==t&&(this.dataLimit=t),this.activeData=this.fullData,this.activeData.length<this.historyCache.length?this.showLoadMoreButton=!0:this.showLoadMoreButton=!1},methods:{increaseLimit:function(){""!==this.query?(this.searchDataLimit+=100,this.filterHistory()):(this.dataLimit+=100,sessionStorage.setItem("historyLimit",this.dataLimit))},filterHistory:function(t){if(""===this.query)this.activeData=this.fullData,this.activeData.length<this.historyCache.length?this.showLoadMoreButton=!0:this.showLoadMoreButton=!1;else{const t=this.historyCache.filter((t=>"string"==typeof t.title&&"string"==typeof t.author&&(t.title.toLowerCase().includes(this.query.toLowerCase())||t.author.toLowerCase().includes(this.query.toLowerCase())))).sort(((t,e)=>e.timeWatched-t.timeWatched));t.length<=this.searchDataLimit?this.showLoadMoreButton=!1:this.showLoadMoreButton=!0,this.activeData=t.length<this.searchDataLimit?t:t.slice(0,this.searchDataLimit)}},refreshPage:function(){const t=window.scrollY||window.scrollTop||document.getElementsByTagName("html")[0].scrollTop;this.isLoading=!0,Be((()=>{this.isLoading=!1,Be((()=>{window.scrollTo(0,t)}))}))}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-loader",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{fullscreen:!0}}),e("ft-card",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"card"},[e("h3",[t._v(t._s(t.$t("History.History")))]),e("ft-input",{directives:[{name:"show",rawName:"v-show",value:t.fullData.length>0,expression:"fullData.length > 0"}],ref:"searchBar",attrs:{placeholder:t.$t("History.Search bar placeholder"),"show-clear-text-button":!0,"show-action-button":!1},on:{input:e=>t.query=e,clear:function(e){t.query=""}}}),e("ft-flex-box",{directives:[{name:"show",rawName:"v-show",value:0===t.fullData.length,expression:"fullData.length === 0"}]},[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("History['Your history list is currently empty.']"))+" ")])]),e("ft-flex-box",{directives:[{name:"show",rawName:"v-show",value:0===t.activeData.length&&t.fullData.length>0,expression:"activeData.length === 0 && fullData.length > 0"}]},[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("History['Empty Search Message']"))+" ")])]),t.activeData.length>0&&!t.isLoading?e("ft-element-list",{attrs:{data:t.activeData,"show-video-with-last-viewed-playlist":!0}}):t._e(),t.showLoadMoreButton?e("ft-flex-box",[e("ft-button",{attrs:{label:"Load More","background-color":"var(--primary-color)","text-color":"var(--text-with-main-color)"},on:{click:t.increaseLimit}})],1):t._e()],1)],1)}),[],!1,null,"4f500a6f",null).exports,VD=Ks({name:"FtSettingsSection",props:{title:{type:String,required:!0}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("details",{staticClass:"settingsSection"},[e("summary",{staticClass:"sectionHeader"},[e("h3",{staticClass:"sectionTitle"},[t._v(" "+t._s(t.title)+" ")])]),e("hr",{staticClass:"sectionLine"}),t._t("default")],2)}),[],!1,null,"1b57dfd0",null).exports,HD=Ks({name:"FtToggleSwitch",components:{"ft-tooltip":Qs},props:{label:{type:String,required:!0},defaultValue:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:String,default:""},tooltipPosition:{type:String,default:"bottom-left"}},data:function(){return{id:"",currentValue:!1}},watch:{defaultValue:function(){this.currentValue=this.defaultValue}},mounted:function(){this.id=this._uid,this.currentValue=this.defaultValue}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"switch-ctn",class:{compact:t.compact,disabled:t.disabled,containsTooltip:t.tooltip.length>0}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"switch-input",attrs:{id:t.id,type:"checkbox",name:"set-name",disabled:t.disabled},domProps:{checked:t.currentValue,checked:Array.isArray(t.currentValue)?t._i(t.currentValue,null)>-1:t.currentValue},on:{change:[function(e){var i=t.currentValue,n=e.target,r=!!n.checked;if(Array.isArray(i)){var s=t._i(i,null);n.checked?s<0&&(t.currentValue=i.concat([null])):s>-1&&(t.currentValue=i.slice(0,s).concat(i.slice(s+1)))}else t.currentValue=r},function(e){return t.$emit("change",t.currentValue)}]}}),e("label",{staticClass:"switch-label",attrs:{for:t.id}},[e("span",{staticClass:"switch-label-text"},[t._v(" "+t._s(t.label)+" ")]),""!==t.tooltip?e("ft-tooltip",{staticClass:"selectTooltip",attrs:{position:t.tooltipPosition,tooltip:t.tooltip}}):t._e()],1)])}),[],!1,null,"54e9381d",null).exports;var qD=i(91296),WD=i.n(qD);const zD=Ks({name:"GeneralSettings",components:{"ft-settings-section":VD,"ft-select":DD,"ft-input":ta,"ft-toggle-switch":HD,"ft-flex-box":Ys,"ft-button":ra},data:function(){return{instanceNames:[],instanceValues:[],backendValues:["invidious","local"],defaultPageNames:["Subscriptions","Trending","Most Popular","Playlists","History"],defaultPageValues:["subscriptions","trending","mostPopular","playlists","history"],viewTypeValues:["grid","list"],thumbnailTypeValues:["","start","middle","end"],externalLinkHandlingValues:["","openLinkAfterPrompt","doNothing"]}},computed:{currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},enableSearchSuggestions:function(){return this.$store.getters.getEnableSearchSuggestions},backendFallback:function(){return this.$store.getters.getBackendFallback},checkForUpdates:function(){return this.$store.getters.getCheckForUpdates},checkForBlogPosts:function(){return this.$store.getters.getCheckForBlogPosts},backendPreference:function(){return this.$store.getters.getBackendPreference},landingPage:function(){return this.$store.getters.getLandingPage},region:function(){return this.$store.getters.getRegion},listType:function(){return this.$store.getters.getListType},thumbnailPreference:function(){return this.$store.getters.getThumbnailPreference},currentLocale:function(){return this.$store.getters.getCurrentLocale},regionNames:function(){return this.$store.getters.getRegionNames},regionValues:function(){return this.$store.getters.getRegionValues},invidiousInstancesList:function(){return this.$store.getters.getInvidiousInstancesList},defaultInvidiousInstance:function(){return this.$store.getters.getDefaultInvidiousInstance},localeOptions:function(){return["system",...this.$i18n.allLocales]},localeNames:function(){return[this.$t("Settings.General Settings.System Default"),"English (US)","English (UK)","","","catal","etina","dansk","Deutsch"," (EL)","espaol (Espaa)","espaol (Argentina)","espaol (MX)","eesti keel","Euskera","suomi","franais","galego","","magyar","Hrvatski","Bahasa Indonesia","slenska","Italiano","","","lietuvi","Norsk bokml","Nederlands (NL)","Norsk nynorsk","polski","portugus","portugus (BR)","Portugus","romn","","slovenina","slovenina","","Svenska","Trke","","Ting Anh","",""]},backendNames:function(){return[this.$t("Settings.General Settings.Preferred API Backend.Invidious API")]},viewTypeNames:function(){return[this.$t("Settings.General Settings.Video View Type.Grid"),this.$t("Settings.General Settings.Video View Type.List")]},thumbnailTypeNames:function(){return[this.$t("Settings.General Settings.Thumbnail Preference.Default"),this.$t("Settings.General Settings.Thumbnail Preference.Beginning"),this.$t("Settings.General Settings.Thumbnail Preference.Middle"),this.$t("Settings.General Settings.Thumbnail Preference.End")]},externalLinkHandling:function(){return this.$store.getters.getExternalLinkHandling},externalLinkHandlingNames:function(){return[this.$t("Settings.General Settings.External Link Handling.Open Link"),this.$t("Settings.General Settings.External Link Handling.Ask Before Opening Link"),this.$t("Settings.General Settings.External Link Handling.No Action")]}},mounted:function(){this.setCurrentInvidiousInstanceBounce=WD()(this.setCurrentInvidiousInstance,500)},beforeDestroy:function(){if(""===this.currentInvidiousInstance){const t=this.invidiousInstancesList,e=Math.floor(Math.random()*t.length);this.setCurrentInvidiousInstance(t[e])}},methods:{handleInvidiousInstanceInput:function(t){const e=t.replace(/\/$/,"");this.setCurrentInvidiousInstanceBounce(e)},handleSetDefaultInstanceClick:function(){const t=this.currentInvidiousInstance;this.updateDefaultInvidiousInstance(t),kR(this.$t("Default Invidious instance has been set to {instance}",{instance:t}))},handleClearDefaultInstanceClick:function(){this.updateDefaultInvidiousInstance(""),kR(this.$t("Default Invidious instance has been cleared"))},handlePreferredApiBackend:function(t){this.updateBackendPreference(t),"local"===t&&this.updateForceLocalBackendForLegacy(!1)},...Cs(["setCurrentInvidiousInstance"]),...Is(["updateEnableSearchSuggestions","updateBackendFallback","updateCheckForUpdates","updateCheckForBlogPosts","updateBarColor","updateBackendPreference","updateDefaultInvidiousInstance","updateLandingPage","updateRegion","updateListType","updateThumbnailPreference","updateForceLocalBackendForLegacy","updateCurrentLocale","updateExternalLinkHandling"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.General Settings.General Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.General Settings.Check for Updates"),"default-value":t.checkForUpdates,compact:!0},on:{change:t.updateCheckForUpdates}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.General Settings.Fallback to Non-Preferred Backend on Failure"),"default-value":t.backendFallback,compact:!0,tooltip:t.$t("Tooltips.General Settings.Fallback to Non-Preferred Backend on Failure")},on:{change:t.updateBackendFallback}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.General Settings.Check for Latest Blog Posts"),"default-value":t.checkForBlogPosts,compact:!0},on:{change:t.updateCheckForBlogPosts}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.General Settings.Enable Search Suggestions"),"default-value":t.enableSearchSuggestions,compact:!0},on:{change:t.updateEnableSearchSuggestions}})],1)]),e("div",{staticClass:"switchGrid"},[e("ft-select",{attrs:{placeholder:t.$t("Settings.General Settings.Preferred API Backend.Preferred API Backend"),value:t.backendPreference,"select-names":t.backendNames,"select-values":t.backendValues,tooltip:t.$t("Tooltips.General Settings.Preferred API Backend")},on:{change:t.handlePreferredApiBackend}}),t._e(),e("ft-select",{attrs:{placeholder:t.$t("Settings.General Settings.Video View Type.Video View Type"),value:t.listType,"select-names":t.viewTypeNames,"select-values":t.viewTypeValues},on:{change:t.updateListType}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.General Settings.Thumbnail Preference.Thumbnail Preference"),value:t.thumbnailPreference,"select-names":t.thumbnailTypeNames,"select-values":t.thumbnailTypeValues,tooltip:t.$t("Tooltips.General Settings.Thumbnail Preference")},on:{change:t.updateThumbnailPreference}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.General Settings.Locale Preference"),value:t.currentLocale,"select-names":t.localeNames,"select-values":t.localeOptions},on:{change:t.updateCurrentLocale}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.General Settings.Region for Trending"),value:t.region,"select-names":t.regionNames,"select-values":t.regionValues,tooltip:t.$t("Tooltips.General Settings.Region for Trending")},on:{change:t.updateRegion}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.General Settings.External Link Handling.External Link Handling"),value:t.externalLinkHandling,"select-names":t.externalLinkHandlingNames,"select-values":t.externalLinkHandlingValues,tooltip:t.$t("Tooltips.General Settings.External Link Handling")},on:{change:t.updateExternalLinkHandling}})],1),"invidious"===t.backendPreference||t.backendFallback?e("div",[e("ft-flex-box",{staticClass:"settingsFlexStart460px"},[e("ft-input",{attrs:{placeholder:t.$t("Settings.General Settings.Current Invidious Instance"),"show-action-button":!1,"show-label":!0,value:t.currentInvidiousInstance,"data-list":t.invidiousInstancesList,tooltip:t.$t("Tooltips.General Settings.Invidious Instance")},on:{input:t.handleInvidiousInstanceInput}})],1),e("ft-flex-box",[e("div",[e("a",{attrs:{href:"https://api.invidious.io"}},[t._v(" "+t._s(t.$t("Settings.General Settings.View all Invidious instance information"))+" ")])])]),""!==t.defaultInvidiousInstance?e("p",{staticClass:"center"},[t._v(" "+t._s(t.$t("Settings.General Settings.The currently set default instance is {instance}",{instance:t.defaultInvidiousInstance}))+" ")]):[e("p",{staticClass:"center"},[t._v(" "+t._s(t.$t("Settings.General Settings.No default instance has been set"))+" ")]),e("p",{staticClass:"center"},[t._v(" "+t._s(t.$t("Settings.General Settings.Current instance will be randomized on startup"))+" ")])],e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.General Settings.Set Current Instance as Default")},on:{click:t.handleSetDefaultInstanceClick}}),e("ft-button",{attrs:{label:t.$t("Settings.General Settings.Clear Default Instance")},on:{click:t.handleClearDefaultInstanceClick}})],1)],2):t._e()])}),[],!1,null,"9143c7fe",null).exports,GD=Ks({name:"FtSlider",props:{label:{type:String,required:!0},defaultValue:{type:Number,required:!0},minValue:{type:Number,required:!0},maxValue:{type:Number,required:!0},step:{type:Number,required:!0},valueExtension:{type:String,default:null},disabled:{type:Boolean,default:!1}},data:function(){return{id:"",currentValue:0}},computed:{displayLabel:function(){return null===this.valueExtension?this.currentValue:`${this.currentValue}${this.valueExtension}`}},watch:{defaultValue:function(){this.currentValue=this.defaultValue}},mounted:function(){this.id=this._uid,this.currentValue=this.defaultValue}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("label",{staticClass:"pure-material-slider"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentValue,expression:"currentValue",modifiers:{number:!0}}],attrs:{id:t.id,disabled:t.disabled,type:"range",min:t.minValue,max:t.maxValue,step:t.step},domProps:{value:t.currentValue},on:{change:function(e){return t.$emit("change",t.currentValue)},__r:function(e){t.currentValue=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),e("span",[t._v(" "+t._s(t.label)+": "),e("span",[t._v(" "+t._s(t.displayLabel)+" ")])])])}),[],!1,null,"6348f8dc",null).exports,KD={name:"ThemeSettings",components:{"ft-settings-section":VD,"ft-select":DD,"ft-toggle-switch":HD,"ft-slider":GD,"ft-flex-box":Ys,"ft-prompt":la},data:function(){return{minUiScale:50,maxUiScale:300,uiScaleStep:5,disableSmoothScrollingToggleValue:!1,showRestartPrompt:!1,restartPromptValues:["yes","no"],baseThemeValues:["system","light","dark","black","dracula","catppuccinMocha"]}},computed:{barColor:function(){return this.$store.getters.getBarColor},baseTheme:function(){return this.$store.getters.getBaseTheme},mainColor:function(){return this.$store.getters.getMainColor},secColor:function(){return this.$store.getters.getSecColor},isSideNavOpen:function(){return this.$store.getters.getIsSideNavOpen},uiScale:function(){return this.$store.getters.getUiScale},disableSmoothScrolling:function(){return this.$store.getters.getDisableSmoothScrolling},expandSideBar:function(){return this.$store.getters.getExpandSideBar},hideLabelsSideBar:function(){return this.$store.getters.getHideLabelsSideBar},hideHeaderLogo:function(){return this.$store.getters.getHideHeaderLogo},restartPromptMessage:function(){return this.$t('Settings["The app needs to restart for changes to take effect. Restart and apply change?"]')},restartPromptNames:function(){return[this.$t("Yes"),this.$t("No")]},baseThemeNames:function(){return[this.$t("Settings.Theme Settings.Base Theme.System Default"),this.$t("Settings.Theme Settings.Base Theme.Light"),this.$t("Settings.Theme Settings.Base Theme.Dark"),this.$t("Settings.Theme Settings.Base Theme.Black"),this.$t("Settings.Theme Settings.Base Theme.Dracula"),this.$t("Settings.Theme Settings.Base Theme.Catppuccin Mocha")]},colorValues:function(){return Nc.map((t=>t.name))},colorNames:function(){return this.colorValues.map((t=>{const e=t.replaceAll(/([A-Z])/g," $1").trim();return this.$t(`Settings.Theme Settings.Main Color Theme.${e}`)}))},usingElectron:function(){return!1}},mounted:function(){this.disableSmoothScrollingToggleValue=this.disableSmoothScrolling},methods:{handleExpandSideBar:function(t){this.isSideNavOpen!==t&&this.$store.commit("toggleSideNav"),this.updateExpandSideBar(t)},handleRestartPrompt:function(t){this.disableSmoothScrollingToggleValue=t,this.showRestartPrompt=!0},handleSmoothScrolling:function(t){this.showRestartPrompt=!1,null!==t&&"no"!==t?this.updateDisableSmoothScrolling(this.disableSmoothScrollingToggleValue).then((()=>{const{ipcRenderer:t}=i(10651);t.send("relaunchRequest")})):this.disableSmoothScrollingToggleValue=!this.disableSmoothScrollingToggleValue},...Is(["updateBarColor","updateBaseTheme","updateMainColor","updateSecColor","updateExpandSideBar","updateUiScale","updateDisableSmoothScrolling","updateHideLabelsSideBar","updateHideHeaderLogo"])}},YD=Ks(KD,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Theme Settings.Theme Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Theme Settings.Match Top Bar with Main Color"),compact:!0,"default-value":t.barColor},on:{change:t.updateBarColor}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Theme Settings.Expand Side Bar by Default"),compact:!0,"default-value":t.expandSideBar},on:{change:t.handleExpandSideBar}}),t.usingElectron?e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Theme Settings.Disable Smooth Scrolling"),compact:!0,"default-value":t.disableSmoothScrollingToggleValue},on:{change:t.handleRestartPrompt}}):t._e()],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Theme Settings.Hide Side Bar Labels"),compact:!0,"default-value":t.hideLabelsSideBar},on:{change:t.updateHideLabelsSideBar}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Theme Settings.Hide FreeTube Header Logo"),compact:!0,"default-value":t.hideHeaderLogo},on:{change:t.updateHideHeaderLogo}})],1)]),e("ft-flex-box",[e("ft-slider",{attrs:{label:t.$t("Settings.Theme Settings.UI Scale"),"default-value":t.uiScale,"min-value":t.minUiScale,"max-value":t.maxUiScale,step:t.uiScaleStep,"value-extension":"%"},on:{change:function(e){t.updateUiScale(parseInt(e))}}})],1),e("br"),e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Settings.Theme Settings.Base Theme.Base Theme"),value:t.baseTheme,"select-names":t.baseThemeNames,"select-values":t.baseThemeValues},on:{change:t.updateBaseTheme}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.Theme Settings.Main Color Theme.Main Color Theme"),value:t.mainColor,"select-names":t.colorNames,"select-values":t.colorValues},on:{change:t.updateMainColor}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.Theme Settings.Secondary Color Theme"),value:t.secColor,"select-names":t.colorNames,"select-values":t.colorValues},on:{change:t.updateSecColor}})],1),t.showRestartPrompt?e("ft-prompt",{attrs:{label:t.restartPromptMessage,"option-names":t.restartPromptNames,"option-values":t.restartPromptValues},on:{click:t.handleSmoothScrolling}}):t._e()],1)}),[],!1,null,null,null).exports,XD=Ks({name:"PlayerSettings",components:{"ft-settings-section":VD,"ft-select":DD,"ft-toggle-switch":HD,"ft-slider":GD,"ft-flex-box":Ys,"ft-button":ra,"ft-input":ta,"ft-tooltip":Qs},data:function(){return{formatValues:["dash","legacy","audio"],qualityValues:["auto",144,240,360,480,720,1080],playbackRateIntervalValues:[.1,.25,.5,1],screenshotFormatNames:["PNG","JPEG"],screenshotFormatValues:["png","jpg"],screenshotFolderPlaceholder:"",screenshotFilenameExample:"",screenshotDefaultPattern:"%Y%M%D-%H%N%S"}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},autoplayVideos:function(){return this.$store.getters.getAutoplayVideos},autoplayPlaylists:function(){return this.$store.getters.getAutoplayPlaylists},playNextVideo:function(){return this.$store.getters.getPlayNextVideo},enableSubtitles:function(){return this.$store.getters.getEnableSubtitles},forceLocalBackendForLegacy:function(){return this.$store.getters.getForceLocalBackendForLegacy},proxyVideos:function(){return this.$store.getters.getProxyVideos},defaultSkipInterval:function(){return parseInt(this.$store.getters.getDefaultSkipInterval)},defaultInterval:function(){return parseInt(this.$store.getters.getDefaultInterval)},defaultVolume:function(){return Math.round(100*parseFloat(this.$store.getters.getDefaultVolume))},defaultPlayback:function(){return parseFloat(this.$store.getters.getDefaultPlayback)},defaultVideoFormat:function(){return this.$store.getters.getDefaultVideoFormat},defaultQuality:function(){return this.$store.getters.getDefaultQuality},allowDashAv1Formats:function(){return this.$store.getters.getAllowDashAv1Formats},defaultTheatreMode:function(){return this.$store.getters.getDefaultTheatreMode},hideRecommendedVideos:function(){return this.$store.getters.getHideRecommendedVideos},videoVolumeMouseScroll:function(){return this.$store.getters.getVideoVolumeMouseScroll},videoPlaybackRateMouseScroll:function(){return this.$store.getters.getVideoPlaybackRateMouseScroll},videoSkipMouseScroll:function(){return this.$store.getters.getVideoSkipMouseScroll},displayVideoPlayButton:function(){return this.$store.getters.getDisplayVideoPlayButton},enterFullscreenOnDisplayRotate:function(){return this.$store.getters.getEnterFullscreenOnDisplayRotate},maxVideoPlaybackRate:function(){return parseInt(this.$store.getters.getMaxVideoPlaybackRate)},videoPlaybackRateInterval:function(){return this.$store.getters.getVideoPlaybackRateInterval},formatNames:function(){return[this.$t("Settings.Player Settings.Default Video Format.Dash Formats"),this.$t("Settings.Player Settings.Default Video Format.Legacy Formats"),this.$t("Settings.Player Settings.Default Video Format.Audio Formats")]},qualityNames:function(){return[this.$t("Settings.Player Settings.Default Quality.Auto"),this.$t("Settings.Player Settings.Default Quality.144p"),this.$t("Settings.Player Settings.Default Quality.240p"),this.$t("Settings.Player Settings.Default Quality.360p"),this.$t("Settings.Player Settings.Default Quality.480p"),this.$t("Settings.Player Settings.Default Quality.720p"),this.$t("Settings.Player Settings.Default Quality.1080p")]},enableScreenshot:function(){return this.$store.getters.getEnableScreenshot},screenshotFormat:function(){return this.$store.getters.getScreenshotFormat},screenshotQuality:function(){return this.$store.getters.getScreenshotQuality},screenshotAskPath:function(){return this.$store.getters.getScreenshotAskPath},screenshotFolder:function(){return this.$store.getters.getScreenshotFolderPath},screenshotFilenamePattern:function(){return this.$store.getters.getScreenshotFilenamePattern}},watch:{screenshotFolder:function(){this.getScreenshotFolderPlaceholder()}},mounted:function(){this.getScreenshotFolderPlaceholder(),this.getScreenshotFilenameExample(this.screenshotFilenamePattern)},methods:{handleUpdateScreenshotFormat:async function(t){await this.updateScreenshotFormat(t),this.getScreenshotFilenameExample(this.screenshotFilenamePattern)},getScreenshotEmptyFolderPlaceholder:async function(){return fu().join(await NR(),"Freetube")},getScreenshotFolderPlaceholder:function(){""===this.screenshotFolder||(this.screenshotFolderPlaceholder=this.screenshotFolder)},chooseScreenshotFolder:async function(){const t=await zc.ipcRenderer.invoke(da,{properties:["openDirectory"]});t.canceled||(await this.updateScreenshotFolderPath(t.filePaths[0]),this.getScreenshotFolderPlaceholder())},handleScreenshotFilenamePatternChanged:async function(t){const e=t.trim();await this.getScreenshotFilenameExample(e)&&(e?this.updateScreenshotFilenamePattern(e):this.updateScreenshotFilenamePattern(this.screenshotDefaultPattern))},getScreenshotFilenameExample:function(t){return this.parseScreenshotCustomFileName({pattern:t||this.screenshotDefaultPattern,date:new Date(Date.now()),playerTime:123.456,videoId:"dQw4w9WgXcQ"}).then((t=>(this.screenshotFilenameExample=`${t}.${this.screenshotFormat}`,!0))).catch((t=>(this.screenshotFilenameExample=` ${this.$t(`Settings.Player Settings.Screenshot.Error.${t.message}`)}`,!1)))},...Is(["updateAutoplayVideos","updateAutoplayPlaylists","updatePlayNextVideo","updateEnableSubtitles","updateForceLocalBackendForLegacy","updateProxyVideos","updateDefaultTheatreMode","updateDefaultSkipInterval","updateDefaultInterval","updateDefaultVolume","updateDefaultPlayback","updateDefaultVideoFormat","updateDefaultQuality","updateAllowDashAv1Formats","updateVideoVolumeMouseScroll","updateVideoPlaybackRateMouseScroll","updateVideoSkipMouseScroll","updateDisplayVideoPlayButton","updateEnterFullscreenOnDisplayRotate","updateMaxVideoPlaybackRate","updateVideoPlaybackRateInterval","updateEnableScreenshot","updateScreenshotFormat","updateScreenshotQuality","updateScreenshotAskPath","updateScreenshotFolderPath","updateScreenshotFilenamePattern","parseScreenshotCustomFileName"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Player Settings.Player Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[t._e(),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Force Local Backend for Legacy Formats"),compact:!0,disabled:"local"===t.backendPreference,"default-value":t.forceLocalBackendForLegacy,tooltip:t.$t("Tooltips.Player Settings.Force Local Backend for Legacy Formats")},on:{change:t.updateForceLocalBackendForLegacy}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Proxy Videos Through Invidious"),compact:!0,"default-value":t.proxyVideos,tooltip:t.$t("Tooltips.Player Settings.Proxy Videos Through Invidious")},on:{change:t.updateProxyVideos}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Enable Theatre Mode by Default"),compact:!0,"default-value":t.defaultTheatreMode},on:{change:t.updateDefaultTheatreMode}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Scroll Volume Over Video Player"),compact:!0,disabled:t.videoSkipMouseScroll,"default-value":t.videoVolumeMouseScroll},on:{change:t.updateVideoVolumeMouseScroll}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Scroll Playback Rate Over Video Player"),compact:!0,"default-value":t.videoPlaybackRateMouseScroll,tooltip:t.$t("Tooltips.Player Settings.Scroll Playback Rate Over Video Player")},on:{change:t.updateVideoPlaybackRateMouseScroll}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Skip by Scrolling Over Video Player"),compact:!0,disabled:t.videoVolumeMouseScroll,"default-value":t.videoSkipMouseScroll,tooltip:t.$t("Tooltips.Player Settings.Skip by Scrolling Over Video Player")},on:{change:t.updateVideoSkipMouseScroll}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Autoplay Videos"),compact:!0,"default-value":t.autoplayVideos},on:{change:t.updateAutoplayVideos}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Autoplay Playlists"),compact:!0,"default-value":t.autoplayPlaylists},on:{change:t.updateAutoplayPlaylists}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Play Next Video"),compact:!0,disabled:t.hideRecommendedVideos,"default-value":t.playNextVideo},on:{change:t.updatePlayNextVideo}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Display Play Button In Video Player"),compact:!0,"default-value":t.displayVideoPlayButton},on:{change:t.updateDisplayVideoPlayButton}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Enter Fullscreen on Display Rotate"),compact:!0,"default-value":t.enterFullscreenOnDisplayRotate},on:{change:t.updateEnterFullscreenOnDisplayRotate}})],1)]),e("ft-flex-box",[e("ft-slider",{attrs:{label:t.$t("Settings.Player Settings.Fast-Forward / Rewind Interval"),"default-value":t.defaultSkipInterval,"min-value":1,"max-value":70,step:1,"value-extension":"s"},on:{change:t.updateDefaultSkipInterval}}),e("ft-slider",{attrs:{label:t.$t("Settings.Player Settings.Next Video Interval"),"default-value":t.defaultInterval,"min-value":0,"max-value":60,step:1,"value-extension":"s"},on:{change:t.updateDefaultInterval}}),e("ft-slider",{attrs:{label:t.$t("Settings.Player Settings.Default Volume"),"default-value":t.defaultVolume,"min-value":0,"max-value":100,step:1,"value-extension":"%"},on:{change:function(e){return t.updateDefaultVolume(e/100)}}}),e("ft-slider",{attrs:{label:t.$t("Settings.Player Settings.Default Playback Rate"),"default-value":t.defaultPlayback,"min-value":.25,"max-value":8,step:.25,"value-extension":""},on:{change:t.updateDefaultPlayback}}),e("ft-slider",{attrs:{label:t.$t("Settings.Player Settings.Max Video Playback Rate"),"default-value":t.maxVideoPlaybackRate,"min-value":2,"max-value":10,step:1,"value-extension":"x"},on:{change:t.updateMaxVideoPlaybackRate}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.Player Settings.Video Playback Rate Interval"),value:t.videoPlaybackRateInterval,"select-names":t.playbackRateIntervalValues,"select-values":t.playbackRateIntervalValues},on:{change:t.updateVideoPlaybackRateInterval}})],1),e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Settings.Player Settings.Default Video Format.Default Video Format"),value:t.defaultVideoFormat,"select-names":t.formatNames,"select-values":t.formatValues,tooltip:t.$t("Tooltips.Player Settings.Default Video Format")},on:{change:t.updateDefaultVideoFormat}}),e("ft-select",{attrs:{placeholder:t.$t("Settings.Player Settings.Default Quality.Default Quality"),value:t.defaultQuality,"select-names":t.qualityNames,"select-values":t.qualityValues},on:{change:t.updateDefaultQuality}}),e("ft-toggle-switch",{staticClass:"av1Switch",attrs:{label:t.$t("Settings.Player Settings.Allow DASH AV1 formats"),compact:!0,"default-value":t.allowDashAv1Formats,tooltip:t.$t("Tooltips.Player Settings.Allow DASH AV1 formats")},on:{change:t.updateAllowDashAv1Formats}})],1),e("br"),e("ft-flex-box",[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Screenshot.Enable"),"default-value":t.enableScreenshot},on:{change:t.updateEnableScreenshot}})],1),t.enableScreenshot?e("div",[e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Settings.Player Settings.Screenshot.Format Label"),value:t.screenshotFormat,"select-names":t.screenshotFormatNames,"select-values":t.screenshotFormatValues},on:{change:t.handleUpdateScreenshotFormat}}),e("ft-slider",{attrs:{label:t.$t("Settings.Player Settings.Screenshot.Quality Label"),"default-value":t.screenshotQuality,"min-value":0,"max-value":100,step:1,"value-extension":"%",disabled:"jpg"!==t.screenshotFormat},on:{change:t.updateScreenshotQuality}})],1),e("ft-flex-box",[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Player Settings.Screenshot.Ask Path"),"default-value":t.screenshotAskPath},on:{change:t.updateScreenshotAskPath}})],1),t.screenshotAskPath?t._e():e("ft-flex-box",{staticClass:"screenshotFolderContainer"},[e("p",{staticClass:"screenshotFolderLabel"},[t._v(" "+t._s(t.$t("Settings.Player Settings.Screenshot.Folder Label"))+" ")]),e("ft-input",{staticClass:"screenshotFolderPath",attrs:{placeholder:t.screenshotFolderPlaceholder,"show-action-button":!1,"show-label":!1,disabled:!0}}),e("ft-button",{staticClass:"screenshotFolderButton",attrs:{label:t.$t("Settings.Player Settings.Screenshot.Folder Button")},on:{click:t.chooseScreenshotFolder}})],1),e("ft-flex-box",{staticClass:"screenshotFolderContainer"},[e("p",{staticClass:"screenshotFilenamePatternTitle"},[t._v(" "+t._s(t.$t("Settings.Player Settings.Screenshot.File Name Label"))+" "),e("ft-tooltip",{staticClass:"selectTooltip",attrs:{position:"bottom",tooltip:t.$t("Settings.Player Settings.Screenshot.File Name Tooltip")}})],1),e("ft-input",{staticClass:"screenshotFilenamePatternInput",attrs:{placeholder:"",value:t.screenshotFilenamePattern,spellcheck:!1,"show-action-button":!1,"show-label":!1},on:{input:t.handleScreenshotFilenamePatternChanged}}),e("ft-input",{staticClass:"screenshotFilenamePatternExample",attrs:{placeholder:`${t.screenshotFilenameExample}`,"show-action-button":!1,"show-label":!1,disabled:!0}})],1)],1):t._e()],1)}),[],!1,null,"762f4061",null).exports,QD=Ks({name:"ExternalPlayerSettings",components:{"ft-settings-section":VD,"ft-select":DD,"ft-input":ta,"ft-toggle-switch":HD,"ft-flex-box":Ys},data:function(){return{}},computed:{externalPlayerNames:function(){const t=this.$store.getters.getExternalPlayerNames;return this.$store.getters.getExternalPlayerNameTranslationKeys.map(((e,i)=>this.$te(e)?this.$t(e):t[i]))},externalPlayerValues:function(){return this.$store.getters.getExternalPlayerValues},externalPlayer:function(){return this.$store.getters.getExternalPlayer},externalPlayerExecutable:function(){return this.$store.getters.getExternalPlayerExecutable},externalPlayerIgnoreWarnings:function(){return this.$store.getters.getExternalPlayerIgnoreWarnings},externalPlayerCustomArgs:function(){return this.$store.getters.getExternalPlayerCustomArgs},externalPlayerCustomArgsTooltip:function(){const t=this.$t("Tooltips.External Player Settings.Custom External Player Arguments"),e=this.$store.getters.getExternalPlayerCmdArguments[this.externalPlayer];return e&&"string"==typeof e.defaultCustomArguments&&""!==e.defaultCustomArguments?`${t} ${this.$t("Tooltips.External Player Settings.DefaultCustomArgumentsTemplate",{defaultCustomArguments:e.defaultCustomArguments})}`:t}},methods:{...Is(["updateExternalPlayer","updateExternalPlayerExecutable","updateExternalPlayerIgnoreWarnings","updateExternalPlayerCustomArgs"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.External Player Settings.External Player Settings")}},[e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Settings.External Player Settings.External Player"),value:t.externalPlayer,"select-names":t.externalPlayerNames,"select-values":t.externalPlayerValues,tooltip:t.$t("Tooltips.External Player Settings.External Player")},on:{change:t.updateExternalPlayer}})],1),e("ft-flex-box",[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.External Player Settings.Ignore Unsupported Action Warnings"),"default-value":t.externalPlayerIgnoreWarnings,disabled:""===t.externalPlayer,compact:!0,tooltip:t.$t("Tooltips.External Player Settings.Ignore Warnings")},on:{change:t.updateExternalPlayerIgnoreWarnings}})],1),""!==t.externalPlayer?e("ft-flex-box",{staticClass:"settingsFlexStart460px"},[e("ft-input",{attrs:{placeholder:t.$t("Settings.External Player Settings.Custom External Player Executable"),"show-action-button":!1,"show-label":!0,value:t.externalPlayerExecutable,tooltip:t.$t("Tooltips.External Player Settings.Custom External Player Executable")},on:{input:t.updateExternalPlayerExecutable}}),e("ft-input",{attrs:{placeholder:t.$t("Settings.External Player Settings.Custom External Player Arguments"),"show-action-button":!1,"show-label":!0,value:t.externalPlayerCustomArgs,tooltip:t.externalPlayerCustomArgsTooltip},on:{input:t.updateExternalPlayerCustomArgs}})],1):t._e()],1)}),[],!1,null,null,null).exports,JD=Ks({name:"SubscriptionSettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD},data:function(){return{title:"Subscription Settings"}},computed:{hideWatchedSubs:function(){return this.$store.getters.getHideWatchedSubs},useRssFeeds:function(){return this.$store.getters.getUseRssFeeds},fetchSubscriptionsAutomatically:function(){return this.$store.getters.getFetchSubscriptionsAutomatically}},methods:{...Is(["updateHideWatchedSubs","updateUseRssFeeds","updateFetchSubscriptionsAutomatically"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Subscription Settings.Subscription Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Subscription Settings.Fetch Automatically"),"default-value":t.fetchSubscriptionsAutomatically,tooltip:t.$t("Tooltips.Subscription Settings.Fetch Automatically"),compact:!0},on:{change:t.updateFetchSubscriptionsAutomatically}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Subscription Settings.Fetch Feeds from RSS"),"default-value":t.useRssFeeds,tooltip:t.$t("Tooltips.Subscription Settings.Fetch Feeds from RSS"),compact:!0},on:{change:t.updateUseRssFeeds}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Subscription Settings.Hide Videos on Watch"),"default-value":t.hideWatchedSubs,compact:!0},on:{change:t.updateHideWatchedSubs}})],1)])])}),[],!1,null,null,null).exports,ZD=Ks({name:"DownloadSettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD,"ft-flex-box":Ys,"ft-select":DD,"ft-button":ra,"ft-input":ta},data:function(){return{askForDownloadPath:!1,downloadBehaviorValues:["download","open"]}},computed:{downloadPath:function(){return this.$store.getters.getDownloadFolderPath},downloadBehaviorNames:function(){return[this.$t("Settings.Download Settings.Download in app"),this.$t("Settings.Download Settings.Open in web browser")]},downloadBehavior:function(){return this.$store.getters.getDownloadBehavior}},mounted:function(){this.askForDownloadPath=""===this.downloadPath},methods:{handleDownloadingSettingChange:function(t){this.askForDownloadPath=t,!0===t&&this.updateDownloadFolderPath("")},chooseDownloadingFolder:async function(){const t=await zc.ipcRenderer.invoke(da,{properties:["openDirectory"]});this.updateDownloadFolderPath(t.filePaths[0])},...Is(["updateDownloadFolderPath","updateDownloadBehavior"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Download Settings.Download Settings")}},[e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Settings.Download Settings.Download Behavior"),value:t.downloadBehavior,"select-names":t.downloadBehaviorNames,"select-values":t.downloadBehaviorValues},on:{change:t.updateDownloadBehavior}})],1),"download"===t.downloadBehavior?e("ft-flex-box",{staticClass:"settingsFlexStart500px"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Download Settings.Ask Download Path"),"default-value":t.askForDownloadPath},on:{change:t.handleDownloadingSettingChange}})],1):t._e(),t.askForDownloadPath||"download"!==t.downloadBehavior?t._e():e("ft-flex-box",[e("ft-input",{staticClass:"folderDisplay",attrs:{placeholder:t.downloadPath,"show-action-button":!1,"show-label":!1,disabled:!0}})],1),t.askForDownloadPath||"download"!==t.downloadBehavior?t._e():e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.Download Settings.Choose Path")},on:{click:t.chooseDownloadingFolder}})],1)],1)}),[],!1,null,"1ed0ce28",null).exports,tM=Ks({name:"PrivacySettings",components:{"ft-settings-section":VD,"ft-button":ra,"ft-toggle-switch":HD,"ft-flex-box":Ys,"ft-prompt":la},data:function(){return{showSearchCachePrompt:!1,showRemoveHistoryPrompt:!1,showRemoveSubscriptionsPrompt:!1,promptValues:["yes","no"]}},computed:{rememberHistory:function(){return this.$store.getters.getRememberHistory},saveWatchedProgress:function(){return this.$store.getters.getSaveWatchedProgress},saveVideoHistoryWithLastViewedPlaylist:function(){return this.$store.getters.getSaveVideoHistoryWithLastViewedPlaylist},removeVideoMetaFiles:function(){return this.$store.getters.getRemoveVideoMetaFiles},profileList:function(){return this.$store.getters.getProfileList},removeSubscriptionsPromptMessage:function(){return this.$t('Settings.Privacy Settings["Are you sure you want to remove all subscriptions and profiles?  This cannot be undone."]')},promptNames:function(){return[this.$t("Yes"),this.$t("No")]}},methods:{handleSearchCache:function(t){this.showSearchCachePrompt=!1,"yes"===t&&(this.clearSessionSearchHistory(),kR(this.$t("Settings.Privacy Settings.Search cache has been cleared")))},handleRememberHistory:function(t){t||this.updateSaveWatchedProgress(!1),this.updateRememberHistory(t)},handleVideoMetaFiles:function(t){t||this.updateRemoveVideoMetaFiles(!1),this.updateRemoveVideoMetaFiles(t)},handleRemoveHistory:function(t){this.showRemoveHistoryPrompt=!1,"yes"===t&&(this.removeAllHistory(),kR(this.$t("Settings.Privacy Settings.Watch history has been cleared")))},handleRemoveSubscriptions:function(t){this.showRemoveSubscriptionsPrompt=!1,this.updateActiveProfile(wa),"yes"===t&&(this.profileList.forEach((t=>{if(t._id===wa){const e={_id:wa,name:t.name,bgColor:t.bgColor,textColor:t.textColor,subscriptions:[]};this.updateProfile(e)}else this.removeProfile(t._id)})),this.updateAllSubscriptionsList([]),this.updateProfileSubscriptions({activeProfile:wa,videoList:[],errorChannels:[]}))},...Is(["updateRememberHistory","updateRemoveVideoMetaFiles","removeAllHistory","updateSaveWatchedProgress","updateSaveVideoHistoryWithLastViewedPlaylist","clearSessionSearchHistory","updateProfile","removeProfile","updateActiveProfile","updateAllSubscriptionsList","updateProfileSubscriptions"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Privacy Settings.Privacy Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Privacy Settings.Remember History"),compact:!0,"default-value":t.rememberHistory},on:{change:t.handleRememberHistory}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Privacy Settings.Save Watched Progress"),compact:!0,disabled:!t.rememberHistory,"default-value":t.saveWatchedProgress},on:{change:t.updateSaveWatchedProgress}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Privacy Settings.Save Watched Videos With Last Viewed Playlist"),compact:!0,disabled:!t.rememberHistory,"default-value":t.saveVideoHistoryWithLastViewedPlaylist},on:{change:t.updateSaveVideoHistoryWithLastViewedPlaylist}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Privacy Settings.Automatically Remove Video Meta Files"),compact:!0,"default-value":t.removeVideoMetaFiles,tooltip:t.$t("Tooltips.Privacy Settings.Remove Video Meta Files")},on:{change:t.handleVideoMetaFiles}})],1)]),e("br"),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.Privacy Settings.Clear Search Cache"),"text-color":"var(--text-with-main-color)","background-color":"var(--primary-color)"},on:{click:function(e){t.showSearchCachePrompt=!0}}}),e("ft-button",{attrs:{label:t.$t("Settings.Privacy Settings.Remove Watch History"),"text-color":"var(--text-with-main-color)","background-color":"var(--primary-color)"},on:{click:function(e){t.showRemoveHistoryPrompt=!0}}}),e("ft-button",{attrs:{label:t.$t("Settings.Privacy Settings.Remove All Subscriptions / Profiles"),"text-color":"var(--text-with-main-color)","background-color":"var(--primary-color)"},on:{click:function(e){t.showRemoveSubscriptionsPrompt=!0}}})],1),t.showSearchCachePrompt?e("ft-prompt",{attrs:{label:t.$t("Settings.Privacy Settings.Are you sure you want to clear out your search cache?"),"option-names":t.promptNames,"option-values":t.promptValues},on:{click:t.handleSearchCache}}):t._e(),t.showRemoveHistoryPrompt?e("ft-prompt",{attrs:{label:t.$t("Settings.Privacy Settings.Are you sure you want to remove your entire watch history?"),"option-names":t.promptNames,"option-values":t.promptValues},on:{click:t.handleRemoveHistory}}):t._e(),t.showRemoveSubscriptionsPrompt?e("ft-prompt",{attrs:{label:t.removeSubscriptionsPromptMessage,"option-names":t.promptNames,"option-values":t.promptValues},on:{click:t.handleRemoveSubscriptions}}):t._e()],1)}),[],!1,null,null,null).exports,eM={name:"DataSettings",components:{"ft-settings-section":VD,"ft-button":ra,"ft-flex-box":Ys,"ft-prompt":la},data:function(){return{showImportSubscriptionsPrompt:!1,showExportSubscriptionsPrompt:!1,subscriptionsPromptValues:["freetube","youtubenew","youtube","youtubeold","newpipe"]}},computed:{rememberHistory:function(){return this.$store.getters.getRememberHistory},saveWatchedProgress:function(){return this.$store.getters.getSaveWatchedProgress},backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},profileList:function(){return this.$store.getters.getProfileList},allPlaylists:function(){return this.$store.getters.getAllPlaylists},historyCache:function(){return this.$store.getters.getHistoryCache},exportSubscriptionsPromptNames:function(){const t=this.$t("Settings.Data Settings.Export FreeTube"),e=this.$t("Settings.Data Settings.Export YouTube");return[`${t} (.db)`,`${e} (.csv)`,`${e} (.json)`,`${e} (.opml)`,`${this.$t("Settings.Data Settings.Export NewPipe")} (.json)`]},primaryProfile:function(){return JSON.parse(JSON.stringify(this.profileList[0]))}},methods:{openProfileSettings:function(){this.$router.push({path:"/settings/profile/"})},importSubscriptions:async function(){const t={properties:["openFile"],filters:[{name:this.$t("Settings.Data Settings.Subscription File"),extensions:["db","csv","json","opml","xml"]}]},e=await PR(t);if(e.canceled||0===e.filePaths?.length)return;let i;try{i=await AR(e)}catch(t){return void kR(`${this.$t("Settings.Data Settings.Unable to read file")}: ${t}`)}e.filePaths.forEach((t=>{t.endsWith(".csv")?this.importCsvYouTubeSubscriptions(i):t.endsWith(".db")?this.importFreeTubeSubscriptions(i):t.endsWith(".opml")||t.endsWith(".xml")?this.importOpmlYouTubeSubscriptions(i):t.endsWith(".json")&&(i=JSON.parse(i),i.subscriptions?this.importNewPipeSubscriptions(i):this.importYouTubeSubscriptions(i))}))},importFreeTubeSubscriptions:function(t){(t=t.split("\n")).pop();const e=(t=t.map((t=>JSON.parse(t))))[0];e.channelId&&e.channelName&&e.channelThumbnail&&e._id&&e.profile&&(t=this.convertOldFreeTubeFormatToNew(t)),t.forEach((t=>{const e=["_id","name","bgColor","textColor","subscriptions"],i={};if(Object.keys(t).forEach((n=>{e.includes(n)?i[n]=t[n]:kR(`${this.$t("Settings.Data Settings.Unknown data key")}: ${n}`)})),Object.keys(i).length<e.length)kR(this.$t("Settings.Data Settings.Profile object has insufficient data, skipping item"));else if("All Channels"===i.name||i._id===wa)this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.concat(i.subscriptions),this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.filter(((t,e)=>this.primaryProfile.subscriptions.findIndex((e=>e.name===t.name))===e)),this.updateProfile(this.primaryProfile);else{const t=this.profileList.findIndex((t=>t.name.includes(i.name)));if(-1!==t){const e=JSON.parse(JSON.stringify(this.profileList[t]));e.subscriptions=e.subscriptions.concat(i.subscriptions),e.subscriptions=e.subscriptions.filter(((t,i)=>e.subscriptions.findIndex((e=>e.name===t.name))===i)),this.updateProfile(e)}else this.updateProfile(i);this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.concat(i.subscriptions),this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.filter(((t,e)=>this.primaryProfile.subscriptions.findIndex((e=>e.name===t.name))===e)),this.updateProfile(this.primaryProfile)}})),kR(this.$t("Settings.Data Settings.All subscriptions and profiles have been successfully imported"))},importCsvYouTubeSubscriptions:async function(t){const e=t.split("\n").filter((t=>""!==t)),i=[],n=[];kR(this.$t("Settings.Data Settings.This might take a while, please wait")),this.updateShowProgressBar(!0),this.setProgressBarPercentage(0);let r=0;const s=e.slice(1).map((t=>[...t.matchAll(/(?:,|\n|^)("(?:(?:"")*[^"]*)*"|[^\n",]*|(?:\n|$))/g)].map((t=>{let e=t[1];return e.startsWith('"')&&(e=e.substring(1,e.length-2).replace('""','"')),e})))).filter((t=>t.length>0));new Promise((t=>{let e=0;s.forEach((async a=>{const{subscription:o,result:l}=await this.subscribeToChannel({channelId:a[0],subscriptions:i,channelName:a[2],count:r++,total:s.length});1===l?i.push(o):-1===l&&n.push(a),e++,e===s.length&&t(!0)}))})).then((t=>{this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.concat(i),this.updateProfile(this.primaryProfile),0!==n.length?(n.forEach((t=>{console.error(`failed to import ${t[2]}. Url to channel: ${t[1]}.`)})),kR(this.$t("Settings.Data Settings.One or more subscriptions were unable to be imported"))):kR(this.$t("Settings.Data Settings.All subscriptions have been successfully imported"))})).finally((t=>{this.updateShowProgressBar(!1)}))},importYouTubeSubscriptions:async function(t){const e=[],i=[];kR(this.$t("Settings.Data Settings.This might take a while, please wait")),this.updateShowProgressBar(!0),this.setProgressBarPercentage(0);let n=0;new Promise((r=>{let s=0;t.forEach((async a=>{const o=a.snippet;if(void 0===o)throw kR(this.$t("Settings.Data Settings.Invalid subscriptions file")),new Error("Unable to find channel data");const{subscription:l,result:c}=await this.subscribeToChannel({channelId:o.resourceId.channelId,subscriptions:e,channelName:o.title,thumbnail:o.thumbnails.default.url,count:n++,total:t.length});1===c?e.push(l):-1===c&&i.push([o.resourceId.channelId,`https://www.youtube.com/channel/${o.resourceId.channelId}`,o.title]),s++,s===t.length&&r(!0)}))})).then((t=>{this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.concat(e),this.updateProfile(this.primaryProfile),0!==i.length?(i.forEach((t=>{console.error(`failed to import ${t[2]}. Url to channel: ${t[1]}.`)})),kR(this.$t("Settings.Data Settings.One or more subscriptions were unable to be imported"))):kR(this.$t("Settings.Data Settings.All subscriptions have been successfully imported"))})).finally((t=>{this.updateShowProgressBar(!1)}))},importOpmlYouTubeSubscriptions:async function(t){let e;const i=new DOMParser;try{e=i.parseFromString(t,"application/xml");const n=e.querySelector("parsererror");if(n)throw n.textContent}catch(n){console.error("error reading OPML subscriptions file, falling back to HTML parser..."),console.error(n);try{e=i.parseFromString(t,"text/html")}catch{return void kR(`${this.$t("Settings.Data Settings.Invalid subscriptions file")}: ${n}`)}}const n=e.querySelectorAll("body outline[xmlUrl]");if(0===n.length)return void kR(this.$t("Settings.Data Settings.Invalid subscriptions file"));const r=[];kR(this.$t("Settings.Data Settings.This might take a while, please wait")),this.updateShowProgressBar(!0),this.setProgressBarPercentage(0);let s=0;n.forEach((async t=>{const e=t.getAttribute("xmlUrl");let i;e.includes("https://www.youtube.com/feeds/videos.xml?channel_id=")?i=new URL(e).searchParams.get("channel_id"):e.includes("/feed/channel/")?i=new URL(e).pathname.split("/").filter((t=>t)).at(-1):console.error(`Unknown xmlUrl format: ${e}`);if(-1===this.primaryProfile.subscriptions.findIndex((t=>t.id===i))){let t;if(t="invidious"===this.backendPreference?await this.getChannelInfoInvidious(i):await this.getChannelInfoLocal(i),void 0!==t.author){const e={id:i,name:t.author,thumbnail:t.authorThumbnails[1].url};r.push(e)}}s++;const a=s/n.length*100;this.setProgressBarPercentage(a),s===n.length&&(this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.concat(r),this.updateProfile(this.primaryProfile),r.length<s?kR(this.$t("Settings.Data Settings.One or more subscriptions were unable to be imported")):kR(this.$t("Settings.Data Settings.All subscriptions have been successfully imported")),this.updateShowProgressBar(!1))}))},importNewPipeSubscriptions:async function(t){if(void 0===t.subscriptions)return void kR(this.$t("Settings.Data Settings.Invalid subscriptions file"));const e=t.subscriptions.filter(((t,e)=>0===t.service_id)),i=[],n=[];kR(this.$t("Settings.Data Settings.This might take a while, please wait")),this.updateShowProgressBar(!0),this.setProgressBarPercentage(0);let r=0;new Promise((t=>{let s=0;e.forEach((async(a,o)=>{const l=a.url.replace(/https:\/\/(www\.)?youtube\.com\/channel\//,""),{subscription:c,result:u}=await this.subscribeToChannel({channelId:l,subscriptions:i,channelName:a.name,count:r++,total:e.length});1===u&&i.push(c),-1===u&&n.push([l,a.url,a.name]),s++,s===e.length&&t(!0)}))})).then((t=>{this.primaryProfile.subscriptions=this.primaryProfile.subscriptions.concat(i),this.updateProfile(this.primaryProfile),n.count>0?(n.forEach((t=>{console.error(`failed to import ${t[2]}. Url to channel: ${t[1]}.`)})),kR(this.$t("Settings.Data Settings.One or more subscriptions were unable to be imported"))):kR(this.$t("Settings.Data Settings.All subscriptions have been successfully imported"))})).finally((t=>{this.updateShowProgressBar(!1)}))},exportSubscriptions:function(t){if(this.showExportSubscriptionsPrompt=!1,null!==t)switch(t){case"freetube":this.exportFreeTubeSubscriptions();break;case"youtubenew":this.exportCsvYouTubeSubscriptions();break;case"youtube":this.exportYouTubeSubscriptions();break;case"youtubeold":this.exportOpmlYouTubeSubscriptions();break;case"newpipe":this.exportNewPipeSubscriptions()}},exportFreeTubeSubscriptions:async function(){const t=this.profileList.map((t=>JSON.stringify(t))).join("\n")+"\n",e={defaultPath:"freetube-subscriptions-"+jR()+".db",filters:[{name:this.$t("Settings.Data Settings.Subscription File"),extensions:["db"]}]};await this.promptAndWriteToFile(e,t,"Subscriptions have been successfully exported")},exportYouTubeSubscriptions:async function(){const t={defaultPath:"youtube-subscriptions-"+jR()+".json",filters:[{name:this.$t("Settings.Data Settings.Subscription File"),extensions:["json"]}]},e=this.profileList[0].subscriptions.map((t=>({contentDetails:{activityType:"all",newItemCount:0,totalItemCount:0},etag:"",id:"",kind:"youtube#subscription",snippet:{channelId:t.id,description:"",publishedAt:new Date,resourceId:{channelId:t.id,kind:"youtube#channel"},thumbnails:{default:{url:t.thumbnail},high:{url:t.thumbnail},medium:{url:t.thumbnail}},title:t.name}})));await this.promptAndWriteToFile(t,JSON.stringify(e),"Subscriptions have been successfully exported")},exportOpmlYouTubeSubscriptions:async function(){const t={defaultPath:"youtube-subscriptions-"+jR()+".opml",filters:[{name:this.$t("Settings.Data Settings.Subscription File"),extensions:["opml"]}]};let e='<opml version="1.1"><body><outline text="YouTube Subscriptions" title="YouTube Subscriptions">';this.profileList[0].subscriptions.forEach((t=>{const i=t.name.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),n=`<outline text="${i}" title="${i}" type="rss" xmlUrl="https://www.youtube.com/feeds/videos.xml?channel_id=${t.id}"/>`;e+=n})),e+="</outline></body></opml>",await this.promptAndWriteToFile(t,e,"Subscriptions have been successfully exported")},exportCsvYouTubeSubscriptions:async function(){const t={defaultPath:"youtube-subscriptions-"+jR()+".csv",filters:[{name:this.$t("Settings.Data Settings.Subscription File"),extensions:["csv"]}]};let e="Channel ID,Channel URL,Channel title\n";this.profileList[0].subscriptions.forEach((t=>{const i=`https://www.youtube.com/channel/${t.id}`;let n=t.name;-1!==n.search(",")&&(n=`"${n.replaceAll('"','""')}"`),e+=`${t.id},${i},${n}\n`})),e+="\n",await this.promptAndWriteToFile(t,e,"Subscriptions have been successfully exported")},exportNewPipeSubscriptions:async function(){const t={defaultPath:"newpipe-subscriptions-"+jR()+".json",filters:[{name:this.$t("Settings.Data Settings.Subscription File"),extensions:["json"]}]},e={app_version:"0.19.8",app_version_int:953,subscriptions:[]};this.profileList[0].subscriptions.forEach((t=>{const i={service_id:0,url:`https://www.youtube.com/channel/${t.id}`,name:t.name};e.subscriptions.push(i)})),await this.promptAndWriteToFile(t,JSON.stringify(e),"Subscriptions have been successfully exported")},importHistory:async function(){const t={properties:["openFile"],filters:[{name:this.$t("Settings.Data Settings.History File"),extensions:["db"]}]},e=await PR(t);if(e.canceled||0===e.filePaths?.length)return;let i;try{i=await AR(e)}catch(t){return void kR(`${this.$t("Settings.Data Settings.Unable to read file")}: ${t}`)}i=i.split("\n"),i.pop(),i.forEach((t=>{const e=JSON.parse(t),i=["_id","author","authorId","description","isLive","lengthSeconds","paid","published","timeWatched","title","type","videoId","viewCount","watchProgress"],n={};Object.keys(e).forEach((t=>{i.includes(t)?n[t]=e[t]:kR(`Unknown data key: ${t}`)})),Object.keys(n).length<i.length-2?kR(this.$t("Settings.Data Settings.History object has insufficient data, skipping item")):this.updateHistory(n)})),kR(this.$t("Settings.Data Settings.All watched history has been successfully imported"))},exportHistory:async function(){const t=this.historyCache.map((t=>JSON.stringify(t))).join("\n")+"\n",e={defaultPath:"freetube-history-"+jR()+".db",filters:[{name:this.$t("Settings.Data Settings.Playlist File"),extensions:["db"]}]};await this.promptAndWriteToFile(e,t,"All watched history has been successfully exported")},importPlaylists:async function(){const t={properties:["openFile"],filters:[{name:this.$t("Settings.Data Settings.Playlist File"),extensions:["db"]}]},e=await PR(t);if(e.canceled||0===e.filePaths?.length)return;let i;try{i=await AR(e)}catch(t){return void kR(`${this.$t("Settings.Data Settings.Unable to read file")}: ${t}`)}JSON.parse(i).forEach((async t=>{const e=["playlistName","videos"],i=["_id","protected","removeOnWatched"],n=["videoId","title","author","authorId","published","lengthSeconds","timeAdded","isLive","paid","type"],r={};if(Object.keys(t).forEach((s=>{if(e.includes(s)||i.includes(s))if("videos"===s){const e=[];t.videos.forEach((t=>{let i=!0;n.forEach((e=>{Object.keys(t).includes(e)||(i=!1)})),i&&e.push(t)})),r[s]=e}else r[s]=t[s];else kR(`${this.$t("Settings.Data Settings.Unknown data key")}: ${s}`)})),Object.keys(r).length<e.length||0===r.videos.length)kR(this.$t("Settings.Data Settings.Playlist insufficient data",{playlist:t.playlistName}));else{const t=this.allPlaylists.find((t=>t.playlistName===r.playlistName));void 0!==t?r.videos.forEach((e=>{if(void 0===t.videos.find((t=>t.videoId===e.videoId))){const i={playlistName:t.playlistName,videoData:e};this.addVideo(i)}})):this.addPlaylist(r)}})),kR(this.$t("Settings.Data Settings.All playlists has been successfully imported"))},exportPlaylists:async function(){const t={defaultPath:"freetube-playlists-"+jR()+".db",filters:[{name:"Database File",extensions:["db"]}]};await this.promptAndWriteToFile(t,JSON.stringify(this.allPlaylists),"All playlists has been successfully exported")},convertOldFreeTubeFormatToNew(t){const e=[];for(const i of t){const t=[];for(const n of i.profile){let r=e.findIndex((t=>t.name===n.value));if(-1===r){const t=Fc(),s=$c(t);e.push({name:n.value,bgColor:t,textColor:s,subscriptions:[],_id:i._id}),r=e.length-1}else if(-1!==t.indexOf(r))continue;t.push(r),e[r].subscriptions.push({id:i.channelId,name:i.channelName,thumbnail:i.channelThumbnail})}}return e},promptAndWriteToFile:async function(t,e,i){const n=await LR(t);if(!n.canceled&&""!==n.filePath){try{await async function(t,e){if(TR.env.IS_CORDOVA){if("plugins"in Gc()&&"saveDialog"in Gc().plugins)return new Promise(((i,n)=>{const{filePath:r}=t,s=new Blob([e],{type:"application/octet-stream"});Gc().plugins.saveDialog.saveFile(s,r).then((()=>{i()})).catch((t=>{n(t)}))}));console.error("Save dialog plugin failed to load.")}else if("showOpenFilePicker"in window){const{handle:i}=t,n=await i.createWritable();await n.write(e),await n.close()}else{const{filePath:i}=t,n=i.split("/").at(-1),r=document.createElement("a"),s=URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}));r.setAttribute("href",s),r.setAttribute("download",encodeURI(n)),r.click()}}(n,e)}catch(t){return void kR(`${this.$t("Settings.Data Settings.Unable to write file")}: ${t}`)}kR(this.$t(`Settings.Data Settings.${i}`))}},getChannelInfoInvidious:function(t){return new Promise(((e,i)=>{Bh({resource:"channels",id:t,params:{}}).then((t=>{e(t)})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t.responseJSON.error}`,1e4,(()=>{CR(t.responseJSON.error)})),e([])}))}))},getChannelInfoLocal:async function(t){try{const e=await aD(t);if(e.alert)return;return{author:e.header.author.name,authorThumbnails:e.header.author.thumbnails}}catch(e){return console.error(e),kR(`${this.$t("Local API Error (Click to copy)")}: ${e}`,1e4,(()=>{CR(e)})),this.backendFallback&&"local"===this.backendPreference?(kR(this.$t("Falling back to the Invidious API")),await this.getChannelInfoInvidious(t)):[]}},async subscribeToChannel({channelId:t,subscriptions:e,channelName:i=null,thumbnail:n=null,count:r=0,total:s=0}){let a,o=1;if(this.isChannelSubscribed(t,e))return{subscription:null,successMessage:0};let l=null;if(null===i||null===n)try{a="invidious"===this.backendPreference?await this.getChannelInfoInvidious(t):await this.getChannelInfoLocal(t)}catch(t){console.error(t),o=-1}else a={author:i,authorThumbnails:[null,{url:n}]};void 0!==a.author?l={id:t,name:a.author,thumbnail:a.authorThumbnails[1].url}:o=-1;const c=r/(s-1)*100;return this.setProgressBarPercentage(c),{subscription:l,result:o}},isChannelSubscribed(t,e){if(null===t)return!0;const i=-1!==this.primaryProfile.subscriptions.findIndex((e=>e.id===t)),n=-1!==e.findIndex((e=>e.id===t));return i||n},...Is(["updateProfile","compactProfiles","updateShowProgressBar","updateHistory","compactHistory","addPlaylist","addVideo"]),...Cs(["setProgressBarPercentage"])}},iM=Ks(eM,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Data Settings.Data Settings")}},[e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Import Subscriptions")},on:{click:t.importSubscriptions}}),e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Export Subscriptions")},on:{click:function(e){t.showExportSubscriptionsPrompt=!0}}}),e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Import History")},on:{click:t.importHistory}}),e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Export History")},on:{click:t.exportHistory}})],1),e("ft-flex-box",[e("p",[e("a",{attrs:{href:"https://docs.freetubeapp.io/usage/importing-subscriptions/"}},[t._v(" "+t._s(t.$t("Settings.Data Settings.How do I import my subscriptions?"))+" ")])])]),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Manage Subscriptions")},on:{click:t.openProfileSettings}})],1),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Import Playlists")},on:{click:t.importPlaylists}}),e("ft-button",{attrs:{label:t.$t("Settings.Data Settings.Export Playlists")},on:{click:t.exportPlaylists}})],1),t.showExportSubscriptionsPrompt?e("ft-prompt",{attrs:{label:t.$t("Settings.Data Settings.Select Export Type"),"option-names":t.exportSubscriptionsPromptNames,"option-values":t.subscriptionsPromptValues,"show-close":!0},on:{click:t.exportSubscriptions}}):t._e()],1)}),[],!1,null,null,null).exports,nM={name:"FtInputTags",components:{"ft-input":ta,"ft-tooltip":Qs},props:{placeholder:{type:String,required:!0},label:{type:String,required:!0},showActionButton:{type:Boolean,default:!0},tagList:{type:Array,default:()=>[]},tooltip:{type:String,default:""}},methods:{updateTags:function(t,e){if(!this.tagList.includes(t.trim())){const e=this.tagList.slice(0);e.push(t.trim()),this.$emit("change",e)}this.$refs.childinput.handleClearTextClick()},removeTag:function(t){const e=t.trim();if(this.tagList.includes(e)){const t=this.tagList.slice(0),i=t.indexOf(e);t.splice(i,1),this.$emit("change",t)}}}};var rM=Ks(nM,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-input-tags-component"},[e("ft-input",{ref:"childinput",attrs:{placeholder:t.placeholder,label:t.label,"show-label":!0,tooltip:t.tooltip,"show-action-button":t.showActionButton,"select-on-focus":!0,"force-action-button-icon-name":["fas","arrow-right"]},on:{click:t.updateTags}}),e("div",{staticClass:"ft-tag-box"},[e("ul",t._l(t.tagList,(function(i){return e("li",{key:i.id},[e("span",[t._v(t._s(i))]),e("font-awesome-icon",{staticClass:"removeTagButton",attrs:{icon:["fas","fa-times"],tabindex:"0",role:"button"},on:{click:function(e){return t.removeTag(i)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.removeTag(i))}}})],1)})),0)])],1)}),[],!1,null,"59153fa7",null);const sM=Ks({name:"PlayerSettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD,"ft-input-tags":rM.exports,"ft-flex-box":Ys},computed:{hideVideoViews:function(){return this.$store.getters.getHideVideoViews},hideVideoLikesAndDislikes:function(){return this.$store.getters.getHideVideoLikesAndDislikes},hideChannelSubscriptions:function(){return this.$store.getters.getHideChannelSubscriptions},hideCommentLikes:function(){return this.$store.getters.getHideCommentLikes},hideRecommendedVideos:function(){return this.$store.getters.getHideRecommendedVideos},hideTrendingVideos:function(){return this.$store.getters.getHideTrendingVideos},hidePopularVideos:function(){return this.$store.getters.getHidePopularVideos},hidePlaylists:function(){return this.$store.getters.getHidePlaylists},hideLiveChat:function(){return this.$store.getters.getHideLiveChat},hideActiveSubscriptions:function(){return this.$store.getters.getHideActiveSubscriptions},hideVideoDescription:function(){return this.$store.getters.getHideVideoDescription},hideComments:function(){return this.$store.getters.getHideComments},hideLiveStreams:function(){return this.$store.getters.getHideLiveStreams},hideUpcomingPremieres:function(){return this.$store.getters.getHideUpcomingPremieres},hideSharingActions:function(){return this.$store.getters.getHideSharingActions},backendPreference:function(){return this.$store.getters.getBackendPreference},hideChapters:function(){return this.$store.getters.getHideChapters},showDistractionFreeTitles:function(){return this.$store.getters.getShowDistractionFreeTitles},channelsHidden:function(){return JSON.parse(this.$store.getters.getChannelsHidden)}},methods:{handleHideRecommendedVideos:function(t){t&&this.updatePlayNextVideo(!1),this.updateHideRecommendedVideos(t)},handleChannelsHidden:function(t){this.updateChannelsHidden(JSON.stringify(t))},...Is(["updateHideVideoViews","updateHideVideoLikesAndDislikes","updateHideChannelSubscriptions","updateHideCommentLikes","updateHideRecommendedVideos","updateHideTrendingVideos","updateHidePopularVideos","updateHidePlaylists","updateHideLiveChat","updateHideActiveSubscriptions","updatePlayNextVideo","updateDefaultTheatreMode","updateHideVideoDescription","updateHideComments","updateHideLiveStreams","updateHideUpcomingPremieres","updateHideSharingActions","updateHideChapters","updateChannelsHidden","updateShowDistractionFreeTitles"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Distraction Free Settings.Distraction Free Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Video Views"),compact:!0,"default-value":t.hideVideoViews},on:{change:t.updateHideVideoViews}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Video Likes And Dislikes"),compact:!0,"default-value":t.hideVideoLikesAndDislikes},on:{change:t.updateHideVideoLikesAndDislikes}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Channel Subscribers"),compact:!0,"default-value":t.hideChannelSubscriptions},on:{change:t.updateHideChannelSubscriptions}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Comment Likes"),compact:!0,"default-value":t.hideCommentLikes},on:{change:t.updateHideCommentLikes}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Active Subscriptions"),compact:!0,"default-value":t.hideActiveSubscriptions},on:{change:t.updateHideActiveSubscriptions}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Video Description"),compact:!0,"default-value":t.hideVideoDescription},on:{change:t.updateHideVideoDescription}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Sharing Actions"),compact:!0,"default-value":t.hideSharingActions},on:{change:t.updateHideSharingActions}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Chapters"),compact:!0,"default-value":t.hideChapters},on:{change:t.updateHideChapters}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Recommended Videos"),compact:!0,"default-value":t.hideRecommendedVideos},on:{change:t.handleHideRecommendedVideos}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Trending Videos"),compact:!0,"default-value":t.hideTrendingVideos},on:{change:t.updateHideTrendingVideos}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Popular Videos"),compact:!0,"default-value":t.hidePopularVideos},on:{change:t.updateHidePopularVideos}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Playlists"),compact:!0,"default-value":t.hidePlaylists},on:{change:t.updateHidePlaylists}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Live Chat"),compact:!0,"default-value":t.hideLiveChat},on:{change:t.updateHideLiveChat}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Live Streams"),compact:!0,"default-value":t.hideLiveStreams},on:{change:t.updateHideLiveStreams}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Upcoming Premieres"),compact:!0,"default-value":t.hideUpcomingPremieres},on:{change:t.updateHideUpcomingPremieres}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Comments"),compact:!0,"default-value":t.hideComments},on:{change:t.updateHideComments}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Distraction Free Settings.Display Titles Without Excessive Capitalisation"),compact:!0,"default-value":t.showDistractionFreeTitles},on:{change:t.updateShowDistractionFreeTitles}})],1)]),e("br",{staticClass:"hide-on-mobile"}),e("ft-flex-box",[e("ft-input-tags",{attrs:{label:t.$t("Settings.Distraction Free Settings.Hide Channels"),placeholder:t.$t("Settings.Distraction Free Settings.Hide Channels Placeholder"),"show-action-button":!0,"tag-list":t.channelsHidden,tooltip:t.$t("Tooltips.Distraction Free Settings.Hide Channels")},on:{change:t.handleChannelsHidden}})],1)],1)}),[],!1,null,null,null).exports,aM=Ks({name:"ProxySettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD,"ft-button":ra,"ft-select":DD,"ft-input":ta,"ft-loader":pc,"ft-flex-box":Ys},data:function(){return{isLoading:!1,dataAvailable:!1,proxyTestUrl:"https://ipwho.is/",proxyId:"",proxyCountry:"",proxyRegion:"",proxyCity:"",proxyHost:"",protocolNames:["HTTP","HTTPS","SOCKS4","SOCKS5"],protocolValues:["http","https","socks4","socks5"]}},computed:{useProxy:function(){return this.$store.getters.getUseProxy},proxyProtocol:function(){return this.$store.getters.getProxyProtocol},proxyHostname:function(){return this.$store.getters.getProxyHostname},proxyPort:function(){return this.$store.getters.getProxyPort},proxyUrl:function(){return`${this.proxyProtocol}://${this.proxyHostname}:${this.proxyPort}`}},mounted:function(){this.debounceEnableProxy=WD()(this.enableProxy,200)},beforeDestroy:function(){""===this.proxyHostname&&this.updateProxyHostname("127.0.0.1"),""===this.proxyPort&&this.updateProxyPort("9050")},methods:{handleUpdateProxy:function(t){t?this.enableProxy():this.disableProxy(),this.updateUseProxy(t)},handleUpdateProxyProtocol:function(t){this.useProxy&&this.enableProxy(),this.updateProxyProtocol(t)},handleUpdateProxyHostname:function(t){this.useProxy&&this.debounceEnableProxy(),this.updateProxyHostname(t)},handleUpdateProxyPort:function(t){this.useProxy&&this.debounceEnableProxy(),this.updateProxyPort(t)},enableProxy:function(){zc.ipcRenderer.send("enable-proxy",this.proxyUrl)},disableProxy:function(){zc.ipcRenderer.send("disable-proxy")},testProxy:function(){this.isLoading=!0,this.useProxy||this.enableProxy(),fetch(this.proxyTestUrl).then((t=>t.json())).then((t=>{this.proxyIp=t.ip,this.proxyCountry=t.country,this.proxyRegion=t.region,this.proxyCity=t.city,this.dataAvailable=!0})).catch((t=>{console.error("errored while testing proxy:",t),kR(this.$t('Settings.Proxy Settings["Error getting network information. Is your proxy configured properly?"]')),this.dataAvailable=!1})).finally((()=>{this.useProxy||this.disableProxy(),this.isLoading=!1}))},...Is(["updateUseProxy","updateProxyProtocol","updateProxyHostname","updateProxyPort"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Proxy Settings.Proxy Settings")}},[e("ft-flex-box",{staticClass:"settingsFlexStart500px"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Proxy Settings.Enable Tor / Proxy"),"default-value":t.useProxy},on:{change:t.handleUpdateProxy}})],1),t.useProxy?e("div",[e("ft-flex-box",[e("ft-select",{attrs:{placeholder:t.$t("Settings.Proxy Settings.Proxy Protocol"),value:t.proxyProtocol,"select-names":t.protocolNames,"select-values":t.protocolValues},on:{change:t.handleUpdateProxyProtocol}})],1),e("ft-flex-box",[e("ft-input",{attrs:{placeholder:t.$t("Settings.Proxy Settings.Proxy Host"),"show-action-button":!1,"show-label":!0,value:t.proxyHostname},on:{input:t.handleUpdateProxyHostname}}),e("ft-input",{attrs:{placeholder:t.$t("Settings.Proxy Settings.Proxy Port Number"),"show-action-button":!1,"show-label":!0,value:t.proxyPort},on:{input:t.handleUpdateProxyPort}})],1),e("p",{staticClass:"center",style:{opacity:t.useProxy?1:.4}},[t._v(" "+t._s(t.$t("Settings.Proxy Settings.Clicking on Test Proxy will send a request to"))+" "+t._s(t.proxyTestUrl)+" ")]),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Settings.Proxy Settings.Test Proxy")},on:{click:t.testProxy}})],1),t.isLoading?e("ft-loader"):t._e(),!t.isLoading&&t.dataAvailable?e("div",{staticClass:"center"},[e("h3",[t._v(" "+t._s(t.$t("Settings.Proxy Settings.Your Info"))+" ")]),e("p",[t._v(" "+t._s(t.$t("Settings.Proxy Settings.Ip"))+": "+t._s(t.proxyIp)+" ")]),e("p",[t._v(" "+t._s(t.$t("Settings.Proxy Settings.Country"))+": "+t._s(t.proxyCountry)+" ")]),e("p",[t._v(" "+t._s(t.$t("Settings.Proxy Settings.Region"))+": "+t._s(t.proxyRegion)+" ")]),e("p",[t._v(" "+t._s(t.$t("Settings.Proxy Settings.City"))+": "+t._s(t.proxyCity)+" ")])]):t._e()],1):t._e()],1)}),[],!1,null,null,null).exports;var oM=Ks({name:"FtSponsorBlockCategory",components:{"ft-select":DD},props:{categoryName:{type:String,required:!0}},data:function(){return{categoryColor:"",skipOption:"",skipValues:["autoSkip","showInSeekBar","doNothing"]}},computed:{colorValues:function(){return Nc.map((t=>t.name))},colorNames:function(){return this.colorValues.map((t=>{const e=t.replaceAll(/([A-Z])/g," $1").trim();return this.$t(`Settings.Theme Settings.Main Color Theme.${e}`)}))},sponsorBlockValues:function(){let t="";switch(this.categoryName.toLowerCase()){case"sponsor":t=this.$store.getters.getSponsorBlockSponsor;break;case"self-promotion":t=this.$store.getters.getSponsorBlockSelfPromo;break;case"interaction":t=this.$store.getters.getSponsorBlockInteraction;break;case"intro":t=this.$store.getters.getSponsorBlockIntro;break;case"outro":t=this.$store.getters.getSponsorBlockOutro;break;case"recap":t=this.$store.getters.getSponsorBlockRecap;break;case"music offtopic":t=this.$store.getters.getSponsorBlockMusicOffTopic;break;case"filler":t=this.$store.getters.getSponsorBlockFiller}return t},sanitizedId:function(){return sa(this.categoryName)},skipNames:function(){return[this.$t("Settings.SponsorBlock Settings.Skip Options.Auto Skip"),this.$t("Settings.SponsorBlock Settings.Skip Options.Show In Seek Bar"),this.$t("Settings.SponsorBlock Settings.Skip Options.Do Nothing")]}},methods:{updateColor:function(t){const e={color:t,skip:this.sponsorBlockValues.skip};this.updateSponsorCategory(e)},updateSkipOption:function(t){const e={color:this.sponsorBlockValues.color,skip:t};this.updateSponsorCategory(e)},updateSponsorCategory:function(t){switch(this.categoryName.toLowerCase()){case"sponsor":this.updateSponsorBlockSponsor(t);break;case"self-promotion":this.updateSponsorBlockSelfPromo(t);break;case"interaction":this.updateSponsorBlockInteraction(t);break;case"intro":this.updateSponsorBlockIntro(t);break;case"outro":this.updateSponsorBlockOutro(t);break;case"recap":this.updateSponsorBlockRecap(t);break;case"music offtopic":this.updateSponsorBlockMusicOffTopic(t);break;case"filler":this.updateSponsorBlockFiller(t)}},...Is(["updateSponsorBlockSponsor","updateSponsorBlockSelfPromo","updateSponsorBlockInteraction","updateSponsorBlockIntro","updateSponsorBlockOutro","updateSponsorBlockRecap","updateSponsorBlockMusicOffTopic","updateSponsorBlockFiller"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"sponsorBlockCategory"},[e("div",{staticClass:"sponsorTitle",attrs:{id:t.sanitizedId}},[t._v(" "+t._s(t.$t("Video.Sponsor Block category."+t.categoryName))+" ")]),e("ft-select",{attrs:{"sanitized-id":t.sanitizedId+"categoryColor","describe-by-id":t.sanitizedId,placeholder:t.$t("Settings.SponsorBlock Settings.Category Color"),value:t.sponsorBlockValues.color,"select-names":t.colorNames,"select-values":t.colorValues},on:{change:t.updateColor}}),e("ft-select",{attrs:{"sanitized-id":t.sanitizedId+"skipOption","describe-by-id":t.sanitizedId,placeholder:t.$t("Settings.SponsorBlock Settings.Skip Options.Skip Option"),value:t.sponsorBlockValues.skip,"select-names":t.skipNames,"select-values":t.skipValues},on:{change:t.updateSkipOption}})],1)}),[],!1,null,"5b738f40",null);const lM=Ks({name:"SponsorBlockSettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD,"ft-input":ta,"ft-flex-box":Ys,"ft-sponsor-block-category":oM.exports},data:function(){return{categories:["sponsor","self-promotion","interaction","intro","outro","recap","music offtopic","filler"]}},computed:{useSponsorBlock:function(){return this.$store.getters.getUseSponsorBlock},sponsorBlockUrl:function(){return this.$store.getters.getSponsorBlockUrl},sponsorBlockShowSkippedToast:function(){return this.$store.getters.getSponsorBlockShowSkippedToast}},methods:{handleUpdateSponsorBlock:function(t){this.updateUseSponsorBlock(t)},handleUpdateSponsorBlockUrl:function(t){const e=t.replace(/\/$/,"").replace(/\/api$/,"");this.updateSponsorBlockUrl(e)},handleUpdateSponsorBlockShowSkippedToast:function(t){this.updateSponsorBlockShowSkippedToast(t)},...Is(["updateUseSponsorBlock","updateSponsorBlockUrl","updateSponsorBlockShowSkippedToast"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.SponsorBlock Settings.SponsorBlock Settings")}},[e("ft-flex-box",{staticClass:"settingsFlexStart500px"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.SponsorBlock Settings.Enable SponsorBlock"),"default-value":t.useSponsorBlock},on:{change:t.handleUpdateSponsorBlock}})],1),t.useSponsorBlock?e("div",[e("ft-flex-box",{staticClass:"settingsFlexStart500px"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.SponsorBlock Settings.Notify when sponsor segment is skipped"),"default-value":t.sponsorBlockShowSkippedToast},on:{change:t.handleUpdateSponsorBlockShowSkippedToast}})],1),e("ft-flex-box",[e("ft-input",{attrs:{placeholder:t.$t("Settings.SponsorBlock Settings['SponsorBlock API Url (Default is https://sponsor.ajay.app)']"),"show-action-button":!1,"show-label":!0,value:t.sponsorBlockUrl},on:{input:t.handleUpdateSponsorBlockUrl}})],1),e("ft-flex-box",t._l(t.categories,(function(t){return e("ft-sponsor-block-category",{key:t,attrs:{"category-name":t}})})),1)],1):t._e()],1)}),[],!1,null,null,null).exports,cM=Ks({name:"ParentalControlSettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD},computed:{hideSearchBar:function(){return this.$store.getters.getHideSearchBar},hideUnsubscribeButton:function(){return this.$store.getters.getHideUnsubscribeButton},showFamilyFriendlyOnly:function(){return this.$store.getters.getShowFamilyFriendlyOnly}},methods:{...Is(["updateHideSearchBar","updateHideUnsubscribeButton","updateShowFamilyFriendlyOnly"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Parental Control Settings.Parental Control Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Parental Control Settings.Hide Unsubscribe Button"),compact:!0,"default-value":t.hideUnsubscribeButton},on:{change:t.updateHideUnsubscribeButton}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Parental Control Settings.Show Family Friendly Only"),compact:!0,"default-value":t.showFamilyFriendlyOnly},on:{change:t.updateShowFamilyFriendlyOnly}})],1),e("div",{staticClass:"switchColumn"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Parental Control Settings.Hide Search Bar"),compact:!0,"default-value":t.hideSearchBar},on:{change:t.updateHideSearchBar}})],1)])])}),[],!1,null,null,null).exports,uM={name:"ExperimentalSettings",components:{"ft-settings-section":VD,"ft-flex-box":Ys,"ft-toggle-switch":HD,"ft-prompt":la},data:function(){return{replaceHttpCacheLoading:!0,replaceHttpCache:!1,replaceHttpCachePath:"",showRestartPrompt:!1}},mounted:function(){RR().then((t=>{this.replaceHttpCachePath=`${t}/experiment-replace-http-cache`,Ec(this.replaceHttpCachePath).then((t=>{this.replaceHttpCache=t,this.replaceHttpCacheLoading=!1}))}))},methods:{handleRestartPrompt:function(t){this.replaceHttpCache=t,this.showRestartPrompt=!0},handleReplaceHttpCache:async function(t){if(this.showRestartPrompt=!1,null===t||"no"===t)return void(this.replaceHttpCache=!this.replaceHttpCache);if(this.replaceHttpCache){const t=await Cc().open(this.replaceHttpCachePath,"w");await t.close()}else await Cc().rm(this.replaceHttpCachePath);const{ipcRenderer:e}=i(10651);e.send("relaunchRequest")}}},hM=Ks(uM,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Experimental Settings.Experimental Settings")}},[e("p",{staticClass:"experimental-warning"},[t._v(" "+t._s(t.$t("Settings.Experimental Settings.Warning"))+" ")]),e("ft-flex-box",[e("ft-toggle-switch",{attrs:{"tooltip-position":"top",label:t.$t("Settings.Experimental Settings.Replace HTTP Cache"),compact:!0,"default-value":t.replaceHttpCache,disabled:t.replaceHttpCacheLoading,tooltip:t.$t("Tooltips.Experimental Settings.Replace HTTP Cache")},on:{change:t.handleRestartPrompt}})],1),t.showRestartPrompt?e("ft-prompt",{attrs:{label:t.$t("Settings['The app needs to restart for changes to take effect. Restart and apply change?']"),"option-names":[t.$t("Yes"),t.$t("No")],"option-values":["yes","no"]},on:{click:t.handleReplaceHttpCache}}):t._e()],1)}),[],!1,null,"2089a8c4",null).exports,dM=Ks({name:"PasswordSettings",components:{"ft-settings-section":VD,"ft-input":ta,"ft-flex-box":Ys,"ft-button":ra},data:function(){return{password:""}},computed:{settingsPassword:function(){return this.$store.getters.getSettingsPassword},hasStoredPassword:function(){return""!==this.settingsPassword}},methods:{handleSetPassword:function(){this.updateSettingsPassword(this.password),this.password=""},handleRemovePassword:function(){this.updateSettingsPassword(""),this.password=""},...Is(["updateSettingsPassword"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Password Settings.Password Settings")}},[t.hasStoredPassword?e("ft-flex-box",{staticClass:"settingsFlexStart460px"},[e("ft-button",{attrs:{label:t.$t("Settings.Password Settings.Remove Password")},on:{click:t.handleRemovePassword}})],1):e("ft-flex-box",{staticClass:"settingsFlexStart460px"},[e("ft-input",{attrs:{placeholder:t.$t("Settings.Password Settings.Set Password To Prevent Access"),"show-action-button":!1,"show-label":!0,"input-type":"password",value:t.password},on:{input:e=>t.password=e}}),e("ft-button",{staticClass:"centerButton",attrs:{label:t.$t("Settings.Password Settings.Set Password")},on:{click:t.handleSetPassword}})],1)],1)}),[],!1,null,"c7193dd6",null).exports,pM=Ks({name:"PasswordDialog",components:{"ft-input":ta,"ft-card":na},emits:["unlocked"],computed:{settingsPassword:function(){return this.$store.getters.getSettingsPassword}},mounted:function(){this.$refs.password.focus()},methods:{handlePasswordInput:function(t){t===this.settingsPassword&&this.$emit("unlocked")}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-card",{staticClass:"card"},[e("h3",[t._v(t._s(t.$t("Settings.Password Dialog.Enter Password To Unlock")))]),e("ft-input",{ref:"password",staticClass:"passwordInput",attrs:{placeholder:t.$t("Settings.Password Dialog.Password"),"show-action-button":!1,"input-type":"password"},on:{input:t.handlePasswordInput}})],1)}),[],!1,null,"c7aad2f6",null).exports,fM=Ks({name:"CordovaSettings",components:{"ft-settings-section":VD,"ft-toggle-switch":HD},computed:{getDisableBackgroundModeNotification:function(){return this.$store.getters.getDisableBackgroundModeNotification},getShowThumbnailInMediaControls:function(){return this.$store.getters.getShowThumbnailInMediaControls}},methods:{...Is(["updateDisableBackgroundModeNotification","updateShowThumbnailInMediaControls"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-settings-section",{attrs:{title:t.$t("Settings.Cordova Settings.Cordova Settings")}},[e("div",{staticClass:"switchColumnGrid"},[e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Cordova Settings.Disable Background Notification"),compact:!0,tooltip:t.$t("Tooltips.Cordova Settings.Disable Background Notification"),"default-value":t.getDisableBackgroundModeNotification},on:{change:t.updateDisableBackgroundModeNotification}}),e("ft-toggle-switch",{attrs:{label:t.$t("Settings.Cordova Settings.Show Thumbnail in Media Controls"),compact:!0,tooltip:t.$t("Tooltips.Cordova Settings.Show Thumbnail in Media Controls"),"default-value":t.getShowThumbnailInMediaControls},on:{change:t.updateShowThumbnailInMediaControls}})],1)])}),[],!1,null,null,null).exports;var mM=i(34155);const gM=Ks({name:"Settings",components:{"general-settings":zD,"theme-settings":YD,"player-settings":XD,"external-player-settings":QD,"subscription-settings":JD,"privacy-settings":tM,"data-settings":iM,"distraction-settings":sM,"proxy-settings":aM,"sponsor-block-settings":lM,"download-settings":ZD,"parental-control-settings":cM,"experimental-settings":hM,"cordova-settings":fM,"password-settings":dM,"password-dialog":pM},data:function(){return{unlocked:!1}},computed:{usingElectron:function(){return!1},usingCordova:function(){return mM.env.IS_CORDOVA},settingsPassword:function(){return this.$store.getters.getSettingsPassword}},mounted:function(){""===this.settingsPassword&&(this.unlocked=!0)}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[t.unlocked?[e("general-settings"),e("hr"),e("theme-settings"),e("hr"),e("player-settings"),e("hr"),t.usingElectron?e("external-player-settings"):t._e(),t.usingElectron?e("hr"):t._e(),e("subscription-settings"),e("hr"),e("distraction-settings"),e("hr"),e("privacy-settings"),e("hr"),e("data-settings"),e("hr"),t.usingElectron?e("proxy-settings"):t._e(),t.usingElectron?e("hr"):t._e(),t.usingElectron?e("download-settings"):t._e(),t.usingElectron?e("hr"):t._e(),e("parental-control-settings"),e("hr"),e("sponsor-block-settings"),t.usingElectron?e("hr"):t._e(),t.usingElectron?e("experimental-settings"):t._e(),t.usingCordova?e("hr"):t._e(),t.usingCordova?e("cordova-settings"):t._e(),e("hr"),e("password-settings")]:e("password-dialog",{on:{unlocked:function(e){t.unlocked=!0}}})],2)}),[],!1,null,"b6dde4a0",null).exports,yM=JSON.parse('{"N$":"Youtubub","i8":"0.1.1"}'),vM=Ks({name:"About",components:{"ft-card":na},data:function(){return{versionNumber:`v${yM.i8}`,chunks:[{icon:["fab","github"],title:this.$t("About.Source code"),content:`<a href="https://github.com/MarmadileManteater/FreeTubeCordova">GitHub: FreeTubeCordova</a><br>${this.$t("About.Licensed under the AGPLv3")} <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">${this.$t("About.View License")}</a>.<br/> This is a fork of the official <a href="https://github.com/FreeTubeApp/FreeTube">FreeTube</a> repo with modifications to work better in a browser and on phones.`},{icon:["fas","file-download"],title:this.$t("About.Downloads / Changelog"),content:`<a href="https://github.com/MarmadileManteater/FreeTubeCordova/releases">${this.$t("About.GitHub releases")}</a>`},{icon:["fas","question-circle"],title:this.$t("About.Help"),content:`<a href="https://docs.freetubeapp.io/">${this.$t("About.FreeTube Wiki")}</a> / <a href="https://docs.freetubeapp.io/faq/">${this.$t("About.FAQ")}</a>`},{icon:["fas","globe"],title:this.$t("About.Website"),content:'<a href="https://youtubub.com/">https://youtubub.com/</a>'},{icon:["fas","envelope"],title:this.$t("About.Email"),content:'<a href="mailto:youtubub@protonmail.com">youtubub@protonmail.com</a>'}]}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("ft-card",{staticClass:"card"},[e("h1",[t._v(" "+t._s(t.$t("About.About"))+" ")]),e("section",{staticClass:"brand"},[e("img",{staticClass:"logo",attrs:{src:i(42741),alt:""}}),e("div",{staticClass:"version"},[t._v(" "+t._s(t.versionNumber)+" "+t._s(t.$t("About.Beta"))+" ")])]),e("section",{staticClass:"about-chunks"},t._l(t.chunks,(function(i){return e("figure",{key:i.title,staticClass:"chunk"},[e("font-awesome-icon",{staticClass:"icon",attrs:{icon:i.icon}}),e("h3",{staticClass:"title"},[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(i.content)}})],1)})),0)]),e("ft-card",{staticClass:"card"},[e("h1",[t._v("Release Note")]),e("div",{staticClass:"about-chunks mt-1"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-lg-8 col-md-10 col-12"},[e("h4",{staticClass:"mt-4"},[e("span",{staticClass:"p-2 bg-light shadow rounded text-success"},[t._v(" Version 1.2.0")]),t._v(" - 28th March 2023")]),e("ul",{staticClass:"list-unstyled mt-3"},[e("li",{staticClass:"text-muted ml-3"},[e("i",{staticClass:"mdi mdi-circle-medium mr-2"}),t._v("Release android app")])]),e("h4",{staticClass:"mt-4"},[e("span",{staticClass:"p-2 bg-light shadow rounded text-success"},[t._v(" Version 1.0.0")]),t._v(" - 20th March, 2023")]),e("ul",{staticClass:"list-unstyled mt-3"},[e("li",{staticClass:"text-muted ml-3"},[e("i",{staticClass:"mdi mdi-circle-medium mr-2"}),t._v("Initial Released")])]),e("h3",[t._v("Assets")]),e("div",{staticClass:"mt-4"},[e("p",[e("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"https://youtubub.com/adr/1.2.0/youtubub-arm64-v8a-1.2.0.apk"}},[t._v("youtubub-arm64-v8a-1.2.0.apk")])]),e("p",[e("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"https://youtubub.com/adr/1.2.0/youtubub-armeabi-v7a-1.2.0.apk"}},[t._v("youtubub-armeabi-v7a-1.2.0.apk")])]),e("p",[e("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"https://youtubub.com/adr/1.2.0/youtubub-universal-1.2.0.apk"}},[t._v("youtubub-universal-1.2.0.apk")])]),e("p",[e("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"https://youtubub.com/adr/1.2.0/youtubub-x86_64-1.2.0.apk"}},[t._v("youtubub-x86_64-1.2.0.apk")])]),e("p",[e("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"https://youtubub.com/adr/1.2.0/youtubub-x86-debug.apk"}},[t._v("youtubub-x86-debug.apk")])])])])])])])],1)}),[],!1,null,"4ba01a64",null).exports;var bM=i(34155);const _M=Ks({name:"Search",components:{"ft-loader":pc,"ft-card":na,"ft-element-list":Yh},data:function(){return{isLoading:!1,apiUsed:"local",amountOfResults:0,query:"",searchPage:1,nextPageRef:null,lastSearchQuery:"",searchSettings:{},shownResults:[]}},computed:{sessionSearchHistory:function(){return this.$store.getters.getSessionSearchHistory},backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},hideLiveStreams:function(){return this.$store.getters.getHideLiveStreams},hideUpcomingPremieres:function(){return this.$store.getters.getHideUpcomingPremieres},showFamilyFriendlyOnly:function(){return this.$store.getters.getShowFamilyFriendlyOnly}},watch:{$route(){const t=this.$route.params.query,e={query:t,options:{},searchSettings:{sortBy:this.$route.query.sortBy,time:this.$route.query.time,type:this.$route.query.type,duration:this.$route.query.duration}};this.query=t,this.checkSearchCache(e)}},mounted:function(){this.query=this.$route.params.query,this.searchSettings={sortBy:this.$route.query.sortBy,time:this.$route.query.time,type:this.$route.query.type,duration:this.$route.query.duration};const t={query:this.query,options:{},searchSettings:this.searchSettings};this.checkSearchCache(t)},methods:{checkSearchCache:function(t){const e=this.sessionSearchHistory.filter((e=>e.query===t.query&&MR(t.searchSettings,e.searchSettings)));if(this.shownResults=[],this.isLoading=!0,e.length>0)setTimeout(this.replaceShownResults,100,e[0]);else switch(this.searchSettings=t.searchSettings,this.backendPreference){case"local":this.performSearchLocal(t);break;case"invidious":this.performSearchInvidious(t)}},performSearchLocal:async function(t){this.isLoading=!0;try{const{results:e,continuationData:i}=await async function(t,e,i){const n=await eD({safetyMode:i}),r=await n.search(t,function(t){const e={};return t&&(t.sortBy&&(e.sort_by=t.sortBy),t.time&&(e.upload_date=t.time),t.type&&(e.type=t.type),t.duration&&(e.duration=t.duration)),e}(e));return cD(r)}(t.query,t.searchSettings,this.showFamilyFriendlyOnly);if(0===e.length)return;this.apiUsed="local",this.shownResults=e,this.nextPageRef=i,this.isLoading=!1;const n={query:t.query,data:this.shownResults,searchSettings:this.searchSettings,nextPageRef:this.nextPageRef};this.$store.commit("addToSessionSearchHistory",n)}catch(e){console.error(e),kR(`${this.$t("Local API Error (Click to copy)")}: ${e}`,1e4,(()=>{CR(e)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.performSearchInvidious(t)):this.isLoading=!1}},getNextpageLocal:async function(t){try{const{results:e,continuationData:i}=await async function(t){return cD(await t.getContinuation())}(t.options.nextPageRef);if(0===e.length)return;this.apiUsed="local",this.shownResults=this.shownResults.concat(e),this.nextPageRef=i;const n={query:t.query,data:this.shownResults,searchSettings:this.searchSettings,nextPageRef:this.nextPageRef};this.$store.commit("addToSessionSearchHistory",n)}catch(e){console.error(e),kR(`${this.$t("Local API Error (Click to copy)")}: ${e}`,1e4,(()=>{CR(e)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.performSearchInvidious(t)):this.isLoading=!1}},performSearchInvidious:function(t){1===this.searchPage&&(this.isLoading=!0),Bh({resource:"search",id:"",params:{q:t.query,page:this.searchPage,sort_by:t.searchSettings.sortBy,date:t.searchSettings.time,duration:t.searchSettings.duration,type:t.searchSettings.type}}).then((e=>{if(!e)return;this.apiUsed="invidious";const i=e.filter((t=>"video"===t.type||"channel"===t.type||"playlist"===t.type));1!==this.searchPage?this.shownResults=this.shownResults.concat(i):this.shownResults=i,this.searchPage++,this.isLoading=!1;const n={query:t.query,data:this.shownResults,searchSettings:this.searchSettings,searchPage:this.searchPage};this.$store.commit("addToSessionSearchHistory",n)})).catch((e=>{console.error(e),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${e}`,1e4,(()=>{CR(e)})),bM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Local API")),this.performSearchLocal(t)):this.isLoading=!1}))},nextPage:function(){const t={query:this.query,searchSettings:this.searchSettings,options:{nextPageRef:this.nextPageRef}};"local"===this.apiUsed?null!==this.nextPageRef?(kR(this.$t('Search Filters["Fetching results. Please wait"]')),this.getNextpageLocal(t)):kR(this.$t("Search Filters.There are no more results for this search")):(kR(this.$t('Search Filters["Fetching results. Please wait"]')),this.performSearchInvidious(t))},replaceShownResults:function(t){this.query=t.query,this.shownResults=t.data,this.searchSettings=t.searchSettings,this.amountOfResults=t.amountOfResults,void 0!==t.nextPageRef&&(this.nextPageRef=t.nextPageRef),void 0!==t.searchPage&&(this.searchPage=t.searchPage),this.isLoading=!1}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{ref:"search"},[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):e("ft-card",{staticClass:"card"},[e("h3",[t._v(t._s(t.$t("Search Filters.Search Results")))]),e("ft-element-list",{attrs:{data:t.shownResults}}),e("div",{staticClass:"getNextPage",attrs:{role:"button",tabindex:"0"},on:{click:t.nextPage,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.nextPage.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.nextPage.apply(null,arguments))}]}},[e("font-awesome-icon",{attrs:{icon:["fas","search"]}}),t._v(" "+t._s(t.$t("Search Filters.Fetch more results"))+" ")],1)],1)],1)}),[],!1,null,"60684b32",null).exports,wM=Ks({name:"FtShareButton",components:{"ft-flex-box":Ys,"ft-icon-button":ha,"ft-button":ra,"ft-toggle-switch":HD},props:{shareTargetType:{type:String,default:"Video"},id:{type:String,required:!0},playlistId:{type:String,default:""},getTimestamp:{type:Function,default:null},dropdownPositionY:{type:String,default:"bottom"}},data:function(){return{includeTimestamp:!1}},computed:{isChannel:function(){return"Channel"===this.shareTargetType},isPlaylist:function(){return"Playlist"===this.shareTargetType},isVideo:function(){return"Video"===this.shareTargetType},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},invidiousURL(){if(this.isChannel)return`${this.currentInvidiousInstance}/channel/${this.id}`;if(this.isPlaylist)return`${this.currentInvidiousInstance}/playlist?list=${this.id}`;let t=`${this.currentInvidiousInstance}/watch?v=${this.id}`;return this.playlistId&&0!==this.playlistId.length&&(t+=`&list=${this.playlistId}`),t},invidiousEmbedURL(){return this.isPlaylist?`${this.currentInvidiousInstance}/embed/videoseries?list=${this.id}`:`${this.currentInvidiousInstance}/embed/${this.id}`},youtubeChannelUrl(){return`https://www.youtube.com/channel/${this.id}`},youtubePlaylistUrl(){return`https://youtube.com/playlist?list=${this.id}`},youtubeURL(){if(this.isChannel)return this.youtubeChannelUrl;if(this.isPlaylist)return this.youtubePlaylistUrl;let t=`https://www.youtube.com/watch?v=${this.id}`;return this.playlistId&&0!==this.playlistId.length&&(t+=`&list=${this.playlistId}`),t},youtubeShareURL(){return this.isChannel?this.youtubeChannelUrl:this.isPlaylist?this.youtubePlaylistUrl:this.playlistId&&0!==this.playlistId.length?`https://www.youtube.com/watch?v=${this.id}&list=${this.playlistId}`:`https://youtu.be/${this.id}`},youtubeEmbedURL(){return this.isPlaylist?`https://www.youtube-nocookie.com/embed/videoseries?list=${this.id}`:`https://www.youtube-nocookie.com/embed/${this.id}`}},mounted(){this.isVideo&&!this.getTimestamp&&console.error("Error in props validation: A Video ft-share-button requires a valid get-timestamp function.")},methods:{openInvidious(){ER(this.getFinalUrl(this.invidiousURL)),this.$refs.iconButton.hideDropdown()},copyInvidious(){CR(this.getFinalUrl(this.invidiousURL),{messageOnSuccess:this.$t("Share.Invidious URL copied to clipboard")}),this.$refs.iconButton.hideDropdown()},openYoutube(){ER(this.getFinalUrl(this.youtubeURL)),this.$refs.iconButton.hideDropdown()},copyYoutube(){CR(this.getFinalUrl(this.youtubeShareURL),{messageOnSuccess:this.$t("Share.YouTube URL copied to clipboard")}),this.$refs.iconButton.hideDropdown()},openYoutubeEmbed(){ER(this.getFinalUrl(this.youtubeEmbedURL)),this.$refs.iconButton.hideDropdown()},copyYoutubeEmbed(){CR(this.getFinalUrl(this.youtubeEmbedURL),{messageOnSuccess:this.$t("Share.YouTube Embed URL copied to clipboard")}),this.$refs.iconButton.hideDropdown()},openInvidiousEmbed(){ER(this.getFinalUrl(this.invidiousEmbedURL)),this.$refs.iconButton.hideDropdown()},copyInvidiousEmbed(){CR(this.getFinalUrl(this.invidiousEmbedURL),{messageOnSuccess:this.$t("Share.Invidious Embed URL copied to clipboard")}),this.$refs.iconButton.hideDropdown()},updateIncludeTimestamp(){this.includeTimestamp=!this.includeTimestamp},getFinalUrl(t){return this.isChannel||this.isPlaylist?t:-1===t.indexOf("?")?this.includeTimestamp?`${t}?t=${this.getTimestamp()}`:t:this.includeTimestamp?`${t}&t=${this.getTimestamp()}`:t}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-icon-button",{ref:"iconButton",attrs:{title:t.$t(`Share.Share ${t.shareTargetType}`),theme:"secondary",icon:["fas","share-alt"],"dropdown-modal-on-mobile":!0,"dropdown-position-x":"left","dropdown-position-y":t.dropdownPositionY,"force-dropdown":!0}},[e("ft-flex-box",[t.isVideo?e("ft-toggle-switch",{attrs:{label:t.$t("Share.Include Timestamp"),compact:!0,"default-value":t.includeTimestamp},on:{change:t.updateIncludeTimestamp}}):t._e()],1),e("div",{staticClass:"shareLinks"},[e("div",{staticClass:"header"},[e("img",{staticClass:"youtubeLogo",attrs:{id:"youtubeShareImage",src:i(85275),alt:"YouTube",width:"794",height:"178"}})]),e("div",{staticClass:"buttons"},[e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"youtubeShareImage"},on:{click:function(e){return t.copyYoutube()}}},[e("font-awesome-icon",{attrs:{icon:["fas","copy"]}}),t._v(" "+t._s(t.$t("Share.Copy Link"))+" ")],1),e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"youtubeShareImage"},on:{click:function(e){return t.openYoutube()}}},[e("font-awesome-icon",{attrs:{icon:["fas","globe"]}}),t._v(" "+t._s(t.$t("Share.Open Link"))+" ")],1),t.isVideo||t.isPlaylist?e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"youtubeShareImage","background-color":"var(--accent-color-active)"},on:{click:function(e){return t.copyYoutubeEmbed()}}},[e("font-awesome-icon",{attrs:{icon:["fas","copy"]}}),t._v(" "+t._s(t.$t("Share.Copy Embed"))+" ")],1):t._e(),t.isVideo||t.isPlaylist?e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"youtubeShareImage","background-color":"var(--accent-color-active)"},on:{click:function(e){return t.openYoutubeEmbed()}}},[e("font-awesome-icon",{attrs:{icon:["fas","globe"]}}),t._v(" "+t._s(t.$t("Share.Open Embed"))+" ")],1):t._e()],1),e("div",{staticClass:"divider"}),e("div",{staticClass:"header invidious",attrs:{id:"invidiousShare"}},[e("span",{staticClass:"invidiousLogo"}),t._v("Invidious ")]),e("div",{staticClass:"buttons"},[e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"invidiousShare"},on:{click:function(e){return t.copyInvidious()}}},[e("font-awesome-icon",{attrs:{icon:["fas","copy"]}}),t._v(" "+t._s(t.$t("Share.Copy Link"))+" ")],1),e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"invidiousShare"},on:{click:function(e){return t.openInvidious()}}},[e("font-awesome-icon",{attrs:{icon:["fas","globe"]}}),t._v(" "+t._s(t.$t("Share.Open Link"))+" ")],1),t.isVideo||t.isPlaylist?e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"invidiousShare","background-color":"var(--accent-color-active)"},on:{click:function(e){return t.copyInvidiousEmbed()}}},[e("font-awesome-icon",{attrs:{icon:["fas","copy"]}}),t._v(" "+t._s(t.$t("Share.Copy Embed"))+" ")],1):t._e(),t.isVideo||t.isPlaylist?e("ft-button",{staticClass:"action",attrs:{"aria-describedby":"invidiousShare","background-color":"var(--accent-color-active)"},on:{click:function(e){return t.openInvidiousEmbed()}}},[e("font-awesome-icon",{attrs:{icon:["fas","globe"]}}),t._v(" "+t._s(t.$t("Share.Open Embed"))+" ")],1):t._e()],1)])],1)}),[],!1,null,"0692511d",null).exports,TM=Ks({name:"PlaylistInfo",components:{"ft-share-button":wM},props:{data:{type:Object,required:!0}},data:function(){return{id:"",firstVideoId:"",title:"",channelThumbnail:"",channelName:"",channelId:"",videoCount:0,viewCount:0,lastUpdated:"",description:"",infoSource:""}},computed:{hideSharingActions:function(){return this.$store.getters.getHideSharingActions},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},listType:function(){return this.$store.getters.getListType},thumbnailPreference:function(){return this.$store.getters.getThumbnailPreference},hideViews:function(){return this.$store.getters.getHideVideoViews},thumbnail:function(){switch(this.thumbnailPreference){case"start":return`https://i.ytimg.com/vi/${this.firstVideoId}/mq1.jpg`;case"middle":return`https://i.ytimg.com/vi/${this.firstVideoId}/mq2.jpg`;case"end":return`https://i.ytimg.com/vi/${this.firstVideoId}/mq3.jpg`;default:return`https://i.ytimg.com/vi/${this.firstVideoId}/mqdefault.jpg`}}},mounted:function(){this.id=this.data.id,this.firstVideoId=this.data.firstVideoId,this.title=this.data.title,this.channelName=this.data.channelName,this.channelThumbnail=this.data.channelThumbnail,this.channelId=this.data.channelId,this.uploadedTime=this.data.uploaded_at,this.description=this.data.description,this.infoSource=this.data.infoSource,void 0===this.data.viewCount||isNaN(this.data.viewCount)||(this.viewCount=this.hideViews?null:$R(this.data.viewCount)),void 0===this.data.videoCount||isNaN(this.data.videoCount)||(this.videoCount=$R(this.data.videoCount)),this.lastUpdated=this.data.lastUpdated},methods:{sharePlaylist:function(t){const e=`https://youtube.com/playlist?list=${this.id}`,i=`${this.currentInvidiousInstance}/playlist?list=${this.id}`;switch(t){case"copyYoutube":CR(e,{messageOnSuccess:this.$t("Share.YouTube URL copied to clipboard")});break;case"openYoutube":ER(e);break;case"copyInvidious":CR(i,{messageOnSuccess:this.$t("Share.Invidious URL copied to clipboard")});break;case"openInvidious":ER(i)}}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"playlistInfo"},[e("div",{staticClass:"playlistThumbnail"},[e("router-link",{attrs:{to:{path:`/watch/${t.firstVideoId}`,query:{playlistId:t.id}},tabindex:"-1"}},[e("img",{attrs:{src:t.thumbnail,alt:""}})])],1),e("div",{staticClass:"playlistStats"},[e("h2",{staticClass:"playlistTitle"},[t._v(" "+t._s(t.title)+" ")]),e("p",[t._v(" "+t._s(t.videoCount)+" "+t._s(t.$t("Playlist.Videos"))+" - "),t.hideViews?t._e():e("span",[t._v(t._s(t.viewCount)+" "+t._s(t.$t("Playlist.Views"))+" -")]),"local"!==t.infoSource?e("span",[t._v(" "+t._s(t.$t("Playlist.Last Updated On"))+" ")]):t._e(),t._v(" "+t._s(t.lastUpdated)+" ")])]),e("p",{staticClass:"playlistDescription",domProps:{textContent:t._s(t.description)}}),e("hr"),e("div",{staticClass:"channelShareWrapper"},[e("router-link",{staticClass:"playlistChannel",attrs:{to:`/channel/${t.channelId}`}},[e("img",{staticClass:"channelThumbnail",attrs:{src:t.channelThumbnail,alt:""}}),e("h3",{staticClass:"channelName"},[t._v(" "+t._s(t.channelName)+" ")])]),t.hideSharingActions?t._e():e("ft-share-button",{attrs:{id:t.id,"dropdown-position-y":t.description?"top":"bottom","share-target-type":"Playlist"}})],1)])}),[],!1,null,"f8cce8dc",null).exports,SM=Ks({name:"FtListVideoLazy",components:{"ft-list-video":gc},props:{data:{type:Object,required:!0},playlistId:{type:String,default:null},playlistIndex:{type:Number,default:null},playlistReverse:{type:Boolean,default:!1},playlistShuffle:{type:Boolean,default:!1},playlistLoop:{type:Boolean,default:!1},forceListType:{type:String,default:null},appearance:{type:String,required:!0}},data:function(){return{visible:!1}},methods:{onVisibilityChanged:function(t){t&&(this.visible=t)}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:t.onVisibilityChanged,once:!0},expression:"{\n    callback: onVisibilityChanged,\n    once: true,\n  }"}]},[t.visible?e("ft-list-video",{attrs:{data:t.data,"playlist-id":t.playlistId,"playlist-index":t.playlistIndex,"playlist-reverse":t.playlistReverse,"playlist-shuffle":t.playlistShuffle,"playlist-loop":t.playlistLoop,"force-list-type":t.forceListType,appearance:t.appearance},on:{"pause-player":function(e){return t.$emit("pause-player")}}}):t._e()],1)}),[],!1,null,null,null).exports;var xM=i(34155),kM=Ks({name:"Playlist",components:{"ft-loader":pc,"ft-card":na,"playlist-info":TM,"ft-list-video-lazy":SM,"ft-flex-box":Ys,"ft-button":ra},beforeRouteLeave(t,e,i){!this.isLoading&&t.path.startsWith("/watch")&&t.query.playlistId===this.playlistId&&this.setCachedPlaylist({id:this.playlistId,title:this.infoData.title,channelName:this.infoData.channelName,channelId:this.infoData.channelId,items:this.playlistItems,continuationData:this.continuationData}),i()},data:function(){return{isLoading:!1,playlistId:null,infoData:{},playlistItems:[],continuationData:null,isLoadingMore:!1}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},currentLocale:function(){return this.$i18n.locale.replace("_","-")}},watch:{$route(){this.getPlaylist()}},mounted:function(){this.getPlaylist()},methods:{getPlaylist:function(){switch(this.playlistId=this.$route.params.id,this.backendPreference){case"local":this.getPlaylistLocal();break;case"invidious":this.getPlaylistInvidious()}},getPlaylistLocal:function(){this.isLoading=!0,nD(this.playlistId).then((t=>{this.infoData={id:this.playlistId,title:t.info.title,description:t.info.description??"",firstVideoId:t.items[0].id,viewCount:BR(t.info.views),videoCount:BR(t.info.total_items),lastUpdated:t.info.last_updated??"",channelName:t.info.author?.name??"",channelThumbnail:t.info.author?.best_thumbnail?.url??"",channelId:t.info.author?.id,infoSource:"local"},this.updateSubscriptionDetails({channelThumbnailUrl:this.infoData.channelThumbnail,channelName:this.infoData.channelName,channelId:this.infoData.channelId}),this.playlistItems=t.items.map(uD),t.has_continuation&&(this.continuationData=t),this.isLoading=!1})).catch((t=>{console.error(t),"local"===this.backendPreference&&this.backendFallback?(console.warn("Falling back to Invidious API"),this.getPlaylistInvidious()):this.isLoading=!1}))},getPlaylistInvidious:function(){this.isLoading=!0,$h(this.playlistId).then((t=>{this.infoData={id:t.playlistId,title:t.title,description:t.description,firstVideoId:t.videos[0].videoId,viewCount:t.viewCount,videoCount:t.videoCount,channelName:t.author,channelThumbnail:Uh(t.authorThumbnails[2].url,this.currentInvidiousInstance),channelId:t.authorId,infoSource:"invidious"},this.updateSubscriptionDetails({channelThumbnailUrl:t.authorThumbnails[2].url,channelName:this.infoData.channelName,channelId:this.infoData.channelId});const e=new Date(1e3*t.updated);this.infoData.lastUpdated=e.toLocaleDateString(this.currentLocale,{year:"numeric",month:"short",day:"numeric"}),this.playlistItems=this.playlistItems.concat(t.videos),this.isLoading=!1})).catch((t=>{console.error(t),xM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(console.warn("Error getting data with Invidious, falling back to local backend"),this.getPlaylistLocal()):this.isLoading=!1}))},getNextPage:function(){switch(this.infoData.infoSource){case"local":this.getNextPageLocal();break;case"invidious":console.error("Playlist pagination is not currently supported when the Invidious backend is selected.")}},getNextPageLocal:function(){this.isLoadingMore=!0,this.continuationData.getContinuation().then((t=>{const e=t.items.map(uD);this.playlistItems=this.playlistItems.concat(e),t.has_continuation?this.continuationData=t:this.continuationData=null,this.isLoadingMore=!1}))},...Is(["updateSubscriptionDetails"]),...Cs(["setCachedPlaylist"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):t._e(),t.isLoading?t._e():e("playlist-info",{staticClass:"playlistInfo",attrs:{data:t.infoData}}),t.isLoading?t._e():e("ft-card",{staticClass:"playlistItems"},[t._l(t.playlistItems,(function(i,n){return e("div",{key:n,staticClass:"playlistItem"},[e("p",{staticClass:"videoIndex"},[t._v(" "+t._s(n+1)+" ")]),e("ft-list-video-lazy",{attrs:{data:i,"playlist-id":t.playlistId,"playlist-index":n,appearance:"result","force-list-type":"list"}})],1)})),null===t.continuationData||t.isLoadingMore?t._e():e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Subscriptions.Load More Videos"),"background-color":"var(--primary-color)","text-color":"var(--text-with-main-color)"},on:{click:t.getNextPage}})],1),t.isLoadingMore?e("div",{staticClass:"loadNextPageWrapper"},[e("ft-loader")],1):t._e()],2)],1)}),[],!1,null,"9b188da4",null);const CM=kM.exports,EM=Ks({name:"FtAgeRestricted",props:{contentTypeString:{type:String,required:!0}},computed:{emoji:function(){const t=["","","","","","",""];return t[Math.floor(Math.random()*t.length)]},restrictedMessage:function(){const t=this.$t("Age Restricted.Type."+this.contentTypeString);return this.$t("Age Restricted.This {videoOrPlaylist} is age restricted",{videoOrPlaylist:t})}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ft-age-restricted"},[e("h2",[t._v(" "+t._s(t.restrictedMessage)+" ")]),e("div",{staticClass:"frown"},[t._v(" "+t._s(t.emoji)+" ")])])}),[],!1,null,"85589eca",null).exports;var IM=i(34155);const PM={name:"Channel",components:{"ft-card":na,"ft-button":ra,"ft-input":ta,"ft-select":DD,"ft-flex-box":Ys,"ft-channel-bubble":Xh,"ft-loader":pc,"ft-element-list":Yh,"ft-age-restricted":EM,"ft-share-button":wM},data:function(){return{isLoading:!1,isElementListLoading:!1,currentTab:"videos",id:"",channelInstance:null,channelName:"",bannerUrl:"",thumbnailUrl:"",subCount:0,searchPage:2,videoContinuationData:null,liveContinuationData:null,playlistContinuationData:null,searchContinuationData:null,communityContinuationData:null,description:"",tags:[],views:0,joined:0,location:null,videoSortBy:"newest",liveSortBy:"newest",playlistSortBy:"newest",lastSearchQuery:"",relatedChannels:[],latestVideos:[],latestLive:[],latestPlaylists:[],latestCommunityPosts:[],searchResults:[],shownElementList:[],apiUsed:"",isFamilyFriendly:!1,errorMessage:"",showSearchBar:!0,showShareMenu:!0,videoShortLiveSelectValues:["newest","popular"],playlistSelectValues:["newest","last"]}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},hideUnsubscribeButton:function(){return this.$store.getters.getHideUnsubscribeButton},showFamilyFriendlyOnly:function(){return this.$store.getters.getShowFamilyFriendlyOnly},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},sessionSearchHistory:function(){return this.$store.getters.getSessionSearchHistory},currentLocale:function(){return this.$i18n.locale.replace("_","-")},profileList:function(){return this.$store.getters.getProfileList},activeProfile:function(){return this.$store.getters.getActiveProfile},subscriptionInfo:function(){return this.activeProfile.subscriptions.find((t=>t.id===this.id))??null},isSubscribed:function(){return null!==this.subscriptionInfo},subscribedText:function(){return this.isSubscribed?this.$t("Channel.Unsubscribe").toUpperCase():this.$t("Channel.Subscribe").toUpperCase()},videoShortLiveSelectNames:function(){return[this.$t("Channel.Videos.Sort Types.Newest"),this.$t("Channel.Videos.Sort Types.Most Popular")]},playlistSelectNames:function(){return[this.$t("Channel.Playlists.Sort Types.Newest"),this.$t("Channel.Playlists.Sort Types.Last Video Added")]},formattedSubCount:function(){return this.hideChannelSubscriptions?null:$R(this.subCount)},formattedViews:function(){return $R(this.views)},formattedJoined:function(){return new Intl.DateTimeFormat([this.currentLocale,"en"],{dateStyle:"long"}).format(this.joined)},showFetchMoreButton:function(){switch(this.currentTab){case"videos":return!UR(this.videoContinuationData);case"live":return!UR(this.liveContinuationData);case"playlists":return!UR(this.playlistContinuationData);case"community":return!UR(this.communityContinuationData);case"search":return!UR(this.searchContinuationData)}return!1},hideChannelSubscriptions:function(){return this.$store.getters.getHideChannelSubscriptions},searchSettings:function(){return this.$store.getters.getSearchSettings},hideSearchBar:function(){return this.$store.getters.getHideSearchBar},hideSharingActions:function(){return this.$store.getters.getHideSharingActions},hideLiveStreams:function(){return this.$store.getters.getHideLiveStreams},tabInfoValues:function(){const t=["videos","live","playlists","community","about"];if(this.hideLiveStreams){const e=t.indexOf("live");t.splice(e,1)}return t}},watch:{$route(){if(this.isLoading=!0,this.$route.query.url)return void this.resolveChannelUrl(this.$route.query.url,this.$route.params.currentTab);this.id=this.$route.params.id;let t=this.$route.params.currentTab??"videos";if(this.searchPage=2,this.relatedChannels=[],this.latestVideos=[],this.latestLive=[],this.liveSortBy="newest",this.latestPlaylists=[],this.searchResults=[],this.shownElementList=[],this.apiUsed="",this.channelInstance="",this.videoContinuationData=null,this.liveContinuationData=null,this.playlistContinuationData=null,this.searchContinuationData=null,this.communityContinuationData=null,this.showSearchBar=!0,this.hideLiveStreams&&"live"===t&&(t="videos"),this.currentTab=t,"@@@"===this.id)return this.showShareMenu=!1,void this.setErrorMessage(this.$i18n.t("Channel.This channel does not exist"));this.showShareMenu=!0,this.errorMessage="",IM.env.IS_CORDOVA&&"invidious"!==this.backendPreference?this.getChannelLocal():this.getChannelInfoInvidious()},videoSortBy(){switch(this.isElementListLoading=!0,this.latestVideos=[],this.apiUsed){case"local":default:this.getChannelVideosLocal();break;case"invidious":this.channelInvidiousVideos(!0)}},liveSortBy(){switch(this.isElementListLoading=!0,this.latestLive=[],this.apiUsed){case"local":default:this.getChannelLiveLocal();break;case"invidious":this.channelInvidiousLive(!0)}},playlistSortBy(){switch(this.isElementListLoading=!0,this.latestPlaylists=[],this.playlistContinuationData=null,this.apiUsed){case"local":default:this.getChannelPlaylistsLocal();break;case"invidious":this.getPlaylistsInvidious()}}},mounted:function(){if(this.isLoading=!0,this.$route.query.url)return void this.resolveChannelUrl(this.$route.query.url,this.$route.params.currentTab);this.id=this.$route.params.id;let t=this.$route.params.currentTab??"videos";if(this.hideLiveStreams&&"live"===t&&(t="videos"),this.currentTab=t,"@@@"===this.id)return this.showShareMenu=!1,void this.setErrorMessage(this.$i18n.t("Channel.This channel does not exist"));IM.env.IS_CORDOVA&&"invidious"!==this.backendPreference?this.getChannelLocal():this.getChannelInfoInvidious()},methods:{resolveChannelUrl:async function(t,e=undefined){let i;i=IM.env.IS_CORDOVA&&"invidious"!==this.backendPreference?await async function(t){try{const e=await eD(),i=await e.resolveURL(t);return"WEB_PAGE_TYPE_CHANNEL"===i.metadata.page_type?i.payload.browseId:null}catch{return null}}(t):await async function(t){try{const e=await Bh({resource:"resolveurl",params:{url:t},doLogError:!1});return"WEB_PAGE_TYPE_CHANNEL"===e.pageType?e.ucid:null}catch{return null}}(t),null===i&&(i="@@@"),e?this.$router.replace({path:`/channel/${i}/${e}`}):this.$router.replace({path:`/channel/${i}`})},goToChannel:function(t){this.$router.push({path:`/channel/${t}`})},getChannelLocal:async function(){this.apiUsed="local",this.isLoading=!0;const t=this.id;try{const e=await aD(this.id);let i,n,r;if(e.alert)return void this.setErrorMessage(e.alert);if(e.memo.has("ChannelAgeGate")){const t=e.memo.get("ChannelAgeGate")[0];return i=t.channel_title,n=t.avatar[0].url,this.channelName=i,this.thumbnailUrl=n,document.title=`${i} - ${yM.N$}`,this.updateSubscriptionDetails({channelThumbnailUrl:n,channelName:i,channelId:this.id}),void this.setErrorMessage(this.$t('Channel["This channel is age resticted and currently cannot be viewed in Youtubub."]'),!0)}if(this.errorMessage="",t!==this.id)return;let s=null,a=[];switch(e.header.type){case"C4TabbedHeader":{const t=e.header;r=t.author.id,i=t.author.name,n=t.author.best_thumbnail.url,s=t.subscribers?.text;break}case"CarouselHeader":{const t=e.header.contents.find((t=>"TopicChannelDetails"===t.type));i=t.title.text,s=t.subtitle.text,n=t.avatar[0].url,r=e.metadata.external_id?e.metadata.external_id:t.subscribe_button.channel_id;break}case"InteractiveTabbedHeader":{const t=e.header;i=t.title.text,r=this.id,n=t.box_art.at(-1).url;const s=t.badges.map((t=>t.label)).filter((t=>t));a.push(...s);break}}if(this.channelName=i,this.thumbnailUrl=n,this.isFamilyFriendly=!!e.metadata.is_family_safe,e.metadata.tags&&a.push(...e.metadata.tags),a.length>0&&(a=Array.from(new Set(a))),this.tags=a,document.title=`${i} - ${yM.N$}`,!this.hideChannelSubscriptions&&s){const t=yD(s);isNaN(t)?this.subCount=null:this.subCount=t}else this.subCount=null;this.updateSubscriptionDetails({channelThumbnailUrl:n,channelName:i,channelId:r}),e.header.banner?.length>0?this.bannerUrl=e.header.banner[0].url:this.bannerUrl=null,this.relatedChannels=e.channels.map((({author:t})=>{let e=t.best_thumbnail.url;return e.startsWith("//")&&(e=`https:${e}`),{name:t.name,id:t.id,thumbnailUrl:e}})),this.channelInstance=e,e.has_about?this.getChannelAboutLocal():(this.description="",this.views=null,this.joined=0,this.location=null),e.has_videos&&this.getChannelVideosLocal(),!this.hideLiveStreams&&e.has_live_streams&&this.getChannelLiveLocal(),e.has_playlists&&this.getChannelPlaylistsLocal(),e.has_community&&this.getCommunityPostsLocal(),this.showSearchBar=e.has_search,this.isLoading=!1}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getChannelInfoInvidious()):this.isLoading=!1}},getChannelAboutLocal:async function(){try{const t=this.channelInstance,e=await t.getAbout();this.description="N/A"!==e.description.text?Rh.link(e.description.text):"";const i=BR(e.views.text);this.views=isNaN(i)?null:i,this.joined=new Date(e.joined.text.replace("Joined").trim()),this.location="N/A"!==e.country.text?e.country.text:null}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getChannelInfoInvidious()):this.isLoading=!1}},getChannelVideosLocal:async function(){this.isElementListLoading=!0;const t=this.id;try{const e=this.channelInstance;let i=await e.getVideos();if("newest"!==this.videoSortBy){const t=this.videoShortLiveSelectValues.indexOf(this.videoSortBy);i=await i.applyFilter(i.filters[t])}if(t!==this.id)return;this.latestVideos=oD(i.videos,e.header.author),this.videoContinuationData=i.has_continuation?i:null,this.isElementListLoading=!1}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getChannelInfoInvidious()):this.isLoading=!1}},channelLocalNextPage:async function(){try{const t=await this.videoContinuationData.getContinuation();this.latestVideos=this.latestVideos.concat(oD(t.videos,this.channelInstance.header.author)),this.videoContinuationData=t.has_continuation?t:null}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)}))}},getChannelLiveLocal:async function(){this.isElementListLoading=!0;const t=this.id;try{const e=this.channelInstance;let i=await e.getLiveStreams();if("newest"!==this.liveSortBy){const t=this.videoShortLiveSelectValues.indexOf(this.liveSortBy);i=await i.applyFilter(i.filters[t])}if(t!==this.id)return;this.latestLive=oD(i.videos,e.header.author),this.liveContinuationData=i.has_continuation?i:null,this.isElementListLoading=!1}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getChannelInfoInvidious()):this.isLoading=!1}},getChannelLiveLocalMore:async function(){try{const t=await this.liveContinuationData.getContinuation();this.latestLive.push(...oD(t.videos,this.channelInstance.header.author)),this.liveContinuationData=t.has_continuation?t:null}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)}))}},getChannelInfoInvidious:function(){this.isLoading=!0,this.apiUsed="invidious",this.channelInstance=null;const t=this.id;Fh(this.id).then((e=>{if(t!==this.id)return;const i=e.author,n=e.authorId;this.channelName=i,document.title=`${this.channelName} - ${yM.N$}`,this.id=n,this.isFamilyFriendly=e.isFamilyFriendly,this.hideChannelSubscriptions?this.subCount=null:this.subCount=e.subCount;const r=e.authorThumbnails[3].url;this.thumbnailUrl=Uh(r,this.currentInvidiousInstance),this.updateSubscriptionDetails({channelThumbnailUrl:r,channelName:i,channelId:n}),this.description=Rh.link(e.description),this.views=e.totalViews,this.joined=new Date(1e3*e.joined),this.relatedChannels=e.relatedChannels.map((t=>{const e=t.authorThumbnails.at(-1).url;return{name:t.author,id:t.authorId,thumbnailUrl:Uh(e,this.currentInvidiousInstance)}})),this.latestVideos=e.latestVideos,e.authorBanners instanceof Array&&e.authorBanners.length>0?this.bannerUrl=Uh(e.authorBanners[0].url,this.currentInvidiousInstance):this.bannerUrl=null,this.errorMessage="",e.tabs.includes("videos")&&this.channelInvidiousVideos(),!this.hideLiveStreams&&e.tabs.includes("streams")&&this.channelInvidiousLive(),e.tabs.includes("playlists")&&this.getPlaylistsInvidious(),e.tabs.includes("community")&&this.getCommunityPostsInvidious(),this.isLoading=!1})).catch((t=>{this.setErrorMessage(t),console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),IM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Local API")),this.getChannelLocal()):this.isLoading=!1}))},channelInvidiousVideos:function(t){const e={resource:"channels/videos",id:this.id,params:{sort_by:this.videoSortBy}};t&&(this.videoContinuationData=null);let i=!1;this.videoContinuationData&&(e.params.continuation=this.videoContinuationData,i=!0),i||(this.isElementListLoading=!0),Bh(e).then((t=>{this.latestVideos=i?this.latestVideos.concat(t.videos):t.videos,this.videoContinuationData=t.continuation||null,this.isElementListLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)}))}))},channelInvidiousLive:function(t){const e={resource:"channels",id:this.id,subResource:"streams",params:{sort_by:this.liveSortBy}};t&&(this.liveContinuationData=null);let i=!1;this.liveContinuationData&&(e.params.continuation=this.liveContinuationData,i=!0),i||(this.isElementListLoading=!0),Bh(e).then((t=>{i?this.latestLive.push(...t.videos):this.latestLive=t.videos,this.liveContinuationData=t.continuation||null,this.isElementListLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)}))}))},getChannelPlaylistsLocal:async function(){const t=this.id;try{const e=this.channelInstance;let i=await e.getPlaylists();if(i.content_type_filters.length>1){const t=i.current_tab.content.sub_menu.content_type_sub_menu_items.find((t=>{const e=`https://youtube.com/${t.endpoint.metadata.url}`;return"1"===new URL(e).searchParams.get("view")})).title;i=await i.applyContentTypeFilter(t)}if("newest"!==this.playlistSortBy&&i.sort_filters.length>0){const t=this.playlistSelectValues.indexOf(this.playlistSortBy);i=await i.applySort(i.sort_filters[t])}if(t!==this.id)return;this.latestPlaylists=i.playlists.map((t=>lD(t,e.header.author))),this.playlistContinuationData=i.has_continuation?i:null,this.isElementListLoading=!1}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getPlaylistsInvidious()):this.isLoading=!1}},getChannelPlaylistsLocalMore:async function(){try{const t=await this.playlistContinuationData.getContinuation(),e=t.playlists.map((t=>lD(t,this.channelInstance.header.author)));this.latestPlaylists=this.latestPlaylists.concat(e),this.playlistContinuationData=t.has_continuation?t:null}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)}))}},getPlaylistsInvidious:function(){this.isElementListLoading=!0,Bh({resource:"channels/playlists",id:this.id,params:{sort_by:this.playlistSortBy}}).then((t=>{this.playlistContinuationData=t.continuation||null,this.latestPlaylists=t.playlists,this.isElementListLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),IM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Local API")),this.getChannelLocal()):this.isLoading=!1}))},getPlaylistsInvidiousMore:function(){if(null===this.playlistContinuationData)return void console.warn("There are no more playlists available for this channel");const t={resource:"channels/playlists",id:this.id,params:{sort_by:this.playlistSortBy}};this.playlistContinuationData&&(t.params.continuation=this.playlistContinuationData),Bh(t).then((t=>{this.playlistContinuationData=t.continuation||null,this.latestPlaylists=this.latestPlaylists.concat(t.playlists),this.isElementListLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),IM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Local API")),this.getChannelLocal()):this.isLoading=!1}))},getCommunityPostsLocal:async function(){const t=this.id;try{const e=this.channelInstance,i=await e.getCommunity();if(t!==this.id)return;this.latestCommunityPosts=i.posts.map(vD),this.communityContinuationData=i.has_continuation?i:null}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getCommunityPostsInvidious()):this.isLoading=!1}},getCommunityPostsLocalMore:async function(){try{const t=await this.communityContinuationData.getContinuation();this.latestCommunityPosts=this.latestCommunityPosts.concat(t.posts.map(vD)),this.communityContinuationData=t.has_continuation?t:null}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)}))}},getCommunityPostsInvidious:function(){(async function(t){const e={resource:"channels",id:t,subResource:"community"},i=await Bh(e);return i.comments=i.comments.map((t=>{return{postText:(e=t).contentHtml,postId:e.commentId,authorThumbnails:e.authorThumbnails.map((t=>(t.url=Uh(t.url),t))),publishedText:e.publishedText,voteCount:e.likeCount,postContent:Vh(e.attachment),commentCount:e?.replyCount??0,author:e.author,type:"community"};var e})),i.comments})(this.id).then((t=>{this.latestCommunityPosts=t})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),IM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback&&(kR(this.$t("Falling back to Local API")),this.getCommunityPostsLocal())}))},handleSubscription:function(){const t=JSON.parse(JSON.stringify(this.activeProfile)),e=JSON.parse(JSON.stringify(this.profileList[0]));if(this.isSubscribed){if(t.subscriptions=t.subscriptions.filter((t=>t.id!==this.id)),this.updateProfile(t),kR(this.$t("Channel.Channel has been removed from your subscriptions")),this.activeProfile._id===wa){let t=0;this.profileList.forEach((e=>{if(e._id===wa)return;const i=JSON.parse(JSON.stringify(e));-1!==i.subscriptions.findIndex((t=>t.id===this.id))&&(t++,i.subscriptions=i.subscriptions.filter((t=>t.id!==this.id)),this.updateProfile(i))})),t>0&&kR(this.$t("Channel.Removed subscription from {count} other channel(s)",{count:t}))}}else{const i={id:this.id,name:this.channelName,thumbnail:this.thumbnailUrl};t.subscriptions.push(i),this.updateProfile(t),kR(this.$t("Channel.Added channel to your subscriptions")),this.activeProfile._id!==wa&&-1===e.subscriptions.findIndex((t=>t.id===this.id))&&(e.subscriptions.push(i),this.updateProfile(e))}},setErrorMessage:function(t,e=!1){this.isLoading=!1,this.errorMessage=t,e||(this.channelName=this.subscriptionInfo?.name,this.thumbnailUrl=this.subscriptionInfo?.thumbnail),this.bannerUrl=null,this.subCount=null},handleFetchMore:function(){switch(this.currentTab){case"videos":switch(this.apiUsed){case"local":this.channelLocalNextPage();break;case"invidious":this.channelInvidiousVideos()}break;case"live":switch(this.apiUsed){case"local":this.getChannelLiveLocalMore();break;case"invidious":this.channelInvidiousLive()}break;case"playlists":switch(this.apiUsed){case"local":this.getChannelPlaylistsLocalMore();break;case"invidious":this.getPlaylistsInvidiousMore()}break;case"search":switch(this.apiUsed){case"local":this.searchChannelLocal();break;case"invidious":this.searchChannelInvidious()}break;case"community":"local"===this.apiUsed&&this.getCommunityPostsLocalMore();break;default:console.error(this.currentTab)}},changeTab:function(t,e){if(e instanceof KeyboardEvent&&(e.preventDefault(),"ArrowLeft"===e.key||"ArrowRight"===e.key)){const i=this.tabInfoValues.indexOf(t);t="ArrowLeft"===e.key?this.tabInfoValues[(i>0?i:this.tabInfoValues.length)-1]:this.tabInfoValues[(i+1)%this.tabInfoValues.length];const n=document.getElementById(`${t}Tab`);return e.target.setAttribute("tabindex","-1"),n.setAttribute("tabindex",0),void n.focus({focusVisible:!0})}const i=document.querySelector('.tabs > .tab[aria-selected="true"]'),n=document.getElementById(`${t}Tab`);document.querySelector('.tabs > .tab[tabindex="0"]')?.setAttribute("tabindex","-1"),n?.setAttribute("tabindex","0"),i?.setAttribute("aria-selected","false"),n?.setAttribute("aria-selected","true"),this.currentTab=t,n?.focus({focusVisible:!0})},newSearch:function(t){switch(this.lastSearchQuery=t,this.searchContinuationData=null,this.isElementListLoading=!0,this.searchPage=1,this.searchResults=[],this.changeTab("search"),this.apiUsed){case"local":this.searchChannelLocal();break;case"invidious":this.searchChannelInvidious()}},searchChannelLocal:async function(){const t=null===this.searchContinuationData;try{let e,i;if(t){if(!this.channelInstance.has_search)return kR(this.$t("Channel.This channel does not allow searching"),5e3),void(this.showSearchBar=!1);e=await this.channelInstance.search(this.lastSearchQuery),i=e.current_tab.content.contents}else e=await this.searchContinuationData.getContinuation(),i=e.contents.contents;const n=i.filter((t=>"ItemSection"===t.type)).flatMap((t=>t.contents)).filter((t=>"Video"===t.type||"Playlist"===t.type)).map((t=>"Video"===t.type?hD(t):lD(t,this.channelInstance.header.author)));this.searchResults=t?n:this.searchResults.concat(n),this.searchContinuationData=e.has_continuation?e:null,this.isElementListLoading=!1}catch(e){console.error(e),kR(`${this.$t("Local API Error (Click to copy)")}: ${e}`,1e4,(()=>{CR(e)})),t&&("local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.searchChannelInvidious()):this.isLoading=!1)}},searchChannelInvidious:function(){Bh({resource:"channels/search",id:this.id,params:{q:this.lastSearchQuery,page:this.searchPage}}).then((t=>{this.searchResults=this.searchResults.concat(t),this.isElementListLoading=!1,this.searchPage++})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),IM.env.IS_CORDOVA&&"invidious"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Local API")),this.searchChannelLocal()):this.isLoading=!1}))},...Is(["updateProfile","updateSubscriptionDetails"])}};var AM=Ks(PM,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{ref:"search"},[t.isLoading&&!t.errorMessage?e("ft-loader",{attrs:{fullscreen:!0}}):t.isFamilyFriendly||!t.showFamilyFriendlyOnly?e("ft-card",{staticClass:"card channelDetails"},[e("div",{staticClass:"channelBannerContainer",class:{default:!t.bannerUrl},style:{"--banner-url":`url('${t.bannerUrl}')`}}),e("div",{staticClass:"channelInfoContainer"},[e("div",{staticClass:"channelInfo",class:{channelInfoHasError:t.errorMessage}},[e("div",{staticClass:"thumbnailContainer"},[t.thumbnailUrl?e("img",{staticClass:"channelThumbnail",attrs:{src:t.thumbnailUrl,alt:""}}):e("font-awesome-icon",{staticClass:"channelThumbnail",attrs:{icon:["fas","circle-user"]}}),e("div",{staticClass:"channelLineContainer"},[e("h1",{staticClass:"channelName"},[t._v(" "+t._s(t.channelName)+" ")]),null!==t.subCount?e("p",{staticClass:"channelSubCount"},[t._v(" "+t._s(t.formattedSubCount)+" "),1===t.subCount?e("span",[t._v(t._s(t.$t("Channel.Subscriber")))]):e("span",[t._v(t._s(t.$t("Channel.Subscribers")))])]):t._e()])],1),e("div",{staticClass:"channelInfoActionsContainer"},[!t.hideSharingActions&&t.showShareMenu?e("ft-share-button",{staticClass:"shareIcon",attrs:{id:t.id,"share-target-type":"Channel"}}):t._e(),t.hideUnsubscribeButton||t.errorMessage&&!t.isSubscribed?t._e():e("ft-button",{staticClass:"subscribeButton",attrs:{label:t.subscribedText,"background-color":"var(--primary-color)","text-color":"var(--text-with-main-color)"},on:{click:t.handleSubscription}})],1)]),t.errorMessage?t._e():e("ft-flex-box",{staticClass:"channelInfoTabs"},[e("div",{staticClass:"tabs",attrs:{role:"tablist","aria-label":t.$t("Channel.Channel Tabs")}},[e("div",{staticClass:"tab",class:"videos"===t.currentTab?"selectedTab":"",attrs:{id:"videosTab",role:"tab","aria-selected":"true","aria-controls":"videoPanel",tabindex:"0"},on:{click:function(e){return t.changeTab("videos")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||"button"in e&&0!==e.button||"button"in e&&2!==e.button?null:t.changeTab("videos",e)}}},[t._v(" "+t._s(t.$t("Channel.Videos.Videos").toUpperCase())+" ")]),t.hideLiveStreams?t._e():e("div",{staticClass:"tab",class:"live"===t.currentTab?"selectedTab":"",attrs:{id:"liveTab",role:"tab","aria-selected":"true","aria-controls":"livePanel",tabindex:"0"},on:{click:function(e){return t.changeTab("live")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||"button"in e&&0!==e.button||"button"in e&&2!==e.button?null:t.changeTab("live",e)}}},[t._v(" "+t._s(t.$t("Channel.Live.Live").toUpperCase())+" ")]),e("div",{staticClass:"tab",class:"playlists"===t.currentTab?"selectedTab":"",attrs:{id:"playlistsTab",role:"tab","aria-selected":"false","aria-controls":"playlistPanel",tabindex:"-1"},on:{click:function(e){return t.changeTab("playlists")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||"button"in e&&0!==e.button||"button"in e&&2!==e.button?null:t.changeTab("playlists",e)}}},[t._v(" "+t._s(t.$t("Channel.Playlists.Playlists").toUpperCase())+" ")]),e("div",{staticClass:"tab",class:"community"===t.currentTab?"selectedTab":"",attrs:{id:"communityTab",role:"tab","aria-selected":"false","aria-controls":"communityPanel",tabindex:"-1"},on:{click:function(e){return t.changeTab("community")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||"button"in e&&0!==e.button||"button"in e&&2!==e.button?null:t.changeTab("community",e)}}},[t._v(" "+t._s(t.$t("Channel.Community.Community").toUpperCase())+" ")]),e("div",{staticClass:"tab",class:"about"===t.currentTab?"selectedTab":"",attrs:{id:"aboutTab",role:"tab","aria-selected":"false","aria-controls":"aboutPanel",tabindex:"-1"},on:{click:function(e){return t.changeTab("about")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||"button"in e&&0!==e.button||"button"in e&&2!==e.button?null:t.changeTab("about",e)}}},[t._v(" "+t._s(t.$t("Channel.About.About").toUpperCase())+" ")])]),t.showSearchBar?e("ft-input",{staticClass:"channelSearch",attrs:{placeholder:t.$t("Channel.Search Channel"),"show-clear-text-button":!0},on:{click:t.newSearch}}):t._e()],1)],1)]):t._e(),t.isLoading||t.errorMessage||!t.isFamilyFriendly&&t.showFamilyFriendlyOnly?t._e():e("ft-card",{staticClass:"card"},["about"===t.currentTab?e("div",{staticClass:"aboutTab",attrs:{id:"aboutPanel"}},[t.description?e("h2",[t._v(" "+t._s(t.$t("Channel.About.Channel Description"))+" ")]):t._e(),t.description?e("div",{staticClass:"aboutInfo",domProps:{innerHTML:t._s(t.description)}}):t._e(),t.joined||null!==t.views||t.location?e("h2",[t._v(" "+t._s(t.$t("Channel.About.Details"))+" ")]):t._e(),t.joined||null!==t.views||t.location?e("table",{staticClass:"aboutDetails"},[t.joined?e("tr",[e("th",{attrs:{scope:"row"}},[t._v(" "+t._s(t.$t("Channel.About.Joined"))+" ")]),e("td",[t._v(t._s(t.formattedJoined))])]):t._e(),null!==t.views?e("tr",[e("th",{attrs:{scope:"row"}},[t._v(" "+t._s(t.$t("Video.Views"))+" ")]),e("td",[t._v(t._s(t.formattedViews))])]):t._e(),t.location?e("tr",[e("th",{attrs:{scope:"row"}},[t._v(" "+t._s(t.$t("Channel.About.Location"))+" ")]),e("td",[t._v(t._s(t.location))])]):t._e()]):t._e(),t.tags.length>0?e("h2",[t._v(" "+t._s(t.$t("Channel.About.Tags.Tags"))+" ")]):t._e(),t.tags.length>0?e("ul",{staticClass:"aboutTags"},t._l(t.tags,(function(i){return e("li",{key:i,staticClass:"aboutTag"},[t.hideSearchBar?e("span",{staticClass:"aboutTagLink"},[t._v(" "+t._s(i)+" ")]):e("router-link",{staticClass:"aboutTagLink",attrs:{title:t.$t("Channel.About.Tags.Search for",{tag:i}),to:{path:`/search/${encodeURIComponent(i)}`,query:t.searchSettings}}},[t._v(" "+t._s(i)+" ")])],1)})),0):t._e(),t.relatedChannels.length>0?e("h2",[t._v(" "+t._s(t.$t("Channel.About.Featured Channels"))+" ")]):t._e(),t.relatedChannels.length>0?e("ft-flex-box",t._l(t.relatedChannels,(function(i,n){return e("ft-channel-bubble",{key:n,attrs:{"channel-name":i.name,"channel-id":i.id,"channel-thumbnail":i.thumbnailUrl,role:"link"},on:{click:function(e){return t.goToChannel(i.id)}}})})),1):t._e()],1):t._e(),e("ft-select",{directives:[{name:"show",rawName:"v-show",value:"videos"===t.currentTab&&t.latestVideos.length>0,expression:"currentTab === 'videos' && latestVideos.length > 0"}],staticClass:"sortSelect",attrs:{value:t.videoShortLiveSelectValues[0],"select-names":t.videoShortLiveSelectNames,"select-values":t.videoShortLiveSelectValues,placeholder:t.$t("Search Filters.Sort By.Sort By")},on:{change:function(e){t.videoSortBy=e}}}),t.hideLiveStreams?t._e():e("ft-select",{directives:[{name:"show",rawName:"v-show",value:"live"===t.currentTab&&t.latestLive.length>0,expression:"currentTab === 'live' && latestLive.length > 0"}],staticClass:"sortSelect",attrs:{value:t.videoShortLiveSelectValues[0],"select-names":t.videoShortLiveSelectNames,"select-values":t.videoShortLiveSelectValues,placeholder:t.$t("Search Filters.Sort By.Sort By")},on:{change:function(e){t.liveSortBy=e}}}),e("ft-select",{directives:[{name:"show",rawName:"v-show",value:"playlists"===t.currentTab&&t.latestPlaylists.length>0,expression:"currentTab === 'playlists' && latestPlaylists.length > 0"}],staticClass:"sortSelect",attrs:{value:t.playlistSelectValues[0],"select-names":t.playlistSelectNames,"select-values":t.playlistSelectValues,placeholder:t.$t("Search Filters.Sort By.Sort By")},on:{change:function(e){t.playlistSortBy=e}}}),t.isElementListLoading?e("ft-loader"):t._e(),"about"===t.currentTab||t.isElementListLoading?t._e():e("div",{staticClass:"elementList"},[e("ft-element-list",{directives:[{name:"show",rawName:"v-show",value:"videos"===t.currentTab,expression:"currentTab === 'videos'"}],attrs:{id:"videoPanel",data:t.latestVideos,role:"tabpanel","aria-labelledby":"videosTab"}}),"videos"===t.currentTab&&0===t.latestVideos.length?e("ft-flex-box",[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Channel.Videos.This channel does not currently have any videos"))+" ")])]):t._e(),t.hideLiveStreams?t._e():e("ft-element-list",{directives:[{name:"show",rawName:"v-show",value:"live"===t.currentTab,expression:"currentTab === 'live'"}],attrs:{id:"livePanel",data:t.latestLive,role:"tabpanel","aria-labelledby":"liveTab"}}),t.hideLiveStreams||"live"!==t.currentTab||0!==t.latestLive.length?t._e():e("ft-flex-box",[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Channel.Live.This channel does not currently have any live streams"))+" ")])]),e("ft-element-list",{directives:[{name:"show",rawName:"v-show",value:"playlists"===t.currentTab,expression:"currentTab === 'playlists'"}],attrs:{id:"playlistPanel",data:t.latestPlaylists,role:"tabpanel","aria-labelledby":"playlistsTab"}}),"playlists"===t.currentTab&&0===t.latestPlaylists.length?e("ft-flex-box",[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Channel.Playlists.This channel does not currently have any playlists"))+" ")])]):t._e(),e("ft-element-list",{directives:[{name:"show",rawName:"v-show",value:"community"===t.currentTab,expression:"currentTab === 'community'"}],attrs:{id:"communityPanel",data:t.latestCommunityPosts,role:"tabpanel","aria-labelledby":"communityTab",display:"list"}}),"community"===t.currentTab&&0===t.latestCommunityPosts.length?e("ft-flex-box",[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Channel.Community.This channel currently does not have any posts"))+" ")])]):t._e(),e("ft-element-list",{directives:[{name:"show",rawName:"v-show",value:"search"===t.currentTab,expression:"currentTab === 'search'"}],attrs:{data:t.searchResults}}),"search"===t.currentTab&&0===t.searchResults.length?e("ft-flex-box",[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Channel.Your search results have returned 0 results"))+" ")])]):t._e(),t.showFetchMoreButton?e("div",{staticClass:"getNextPage",attrs:{role:"button",tabindex:"0"},on:{click:t.handleFetchMore,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.handleFetchMore.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleFetchMore.apply(null,arguments))}]}},[e("font-awesome-icon",{attrs:{icon:["fas","search"]}}),t._v(" "+t._s(t.$t("Search Filters.Fetch more results"))+" ")],1):t._e()],1)],1),t.errorMessage?e("ft-card",{staticClass:"card"},[e("p",[t._v(" "+t._s(t.errorMessage)+" ")])]):t.isLoading||t.isFamilyFriendly||!t.showFamilyFriendlyOnly?t._e():e("ft-age-restricted",{staticClass:"ageRestricted",attrs:{"content-type-string":"Channel"}})],1)}),[],!1,null,"7be2c9ec",null);const LM=AM.exports;var OM=i(61928),DM=i(61470),MM=i.n(DM),RM=(i(86453),{}),NM={},BM=OM.default.registerPlugin||OM.default.plugin,FM=function(t){var e=this;this.ready((function(){!function(t,e){t.addClass("vjs-vtt-thumbnails"),t.vttThumbnails=new $M(t,e)}(e,OM.default.mergeOptions(RM,t))}))},$M=function(){function t(t,e){return this.player=t,this.options=e,this.listenForDurationChange(),this.initializeThumbnails(),this.registeredEvents={},this}var e=t.prototype;return e.src=function(t){this.resetPlugin(),this.options.src=t,this.initializeThumbnails()},e.detach=function(){this.resetPlugin()},e.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),this.progressBar&&(this.progressBar.removeEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.removeEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave),this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove)),delete this.registeredEvents.progressBarMouseEnter,delete this.registeredEvents.progressBarMouseLeave,delete this.registeredEvents.progressBarMouseMove,delete this.progressBar,delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},e.listenForDurationChange=function(){this.player.on("durationchange",(function(){}))},e.initializeThumbnails=function(){var t=this;if(this.options.src){var e=this.getBaseUrl(),i=this.getFullyQualifiedUrl(this.options.src,e);this.getVttFile(i).then((function(e){t.vttData=t.processVtt(e),t.setupThumbnailElement()}))}},e.getBaseUrl=function(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"",window.location.pathname].join("").split(/([^\/]*)$/gi).shift()},e.getVttFile=function(t){var e=this;return new Promise((function(i,n){var r=new XMLHttpRequest;r.data={resolve:i},r.addEventListener("load",e.vttFileLoaded),r.open("GET",t),r.send()}))},e.vttFileLoaded=function(){this.data.resolve(this.responseText)},e.setupThumbnailElement=function(t){var e=this,i=null;this.options.showTimestamp||(i=this.player.$(".vjs-mouse-display"));var n=document.createElement("div");n.setAttribute("class","vjs-vtt-thumbnail-display"),this.progressBar=this.player.$(".vjs-progress-control"),this.progressBar.appendChild(n),this.thumbnailHolder=n,i&&!this.options.showTimestamp&&i.classList.add("vjs-hidden"),this.registeredEvents.progressBarMouseEnter=function(){return e.onBarMouseenter()},this.registeredEvents.progressBarMouseLeave=function(){return e.onBarMouseleave()},this.progressBar.addEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave)},e.onBarMouseenter=function(){var t=this;this.mouseMoveCallback=function(e){t.onBarMousemove(e)},this.registeredEvents.progressBarMouseMove=this.mouseMoveCallback,this.progressBar.addEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.showThumbnailHolder()},e.onBarMouseleave=function(){this.registeredEvents.progressBarMouseMove&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.hideThumbnailHolder()},e.getXCoord=function(t,e){var i=t.getBoundingClientRect(),n=document.documentElement;return e-(i.left+(window.pageXOffset||n.scrollLeft||0))},e.onBarMousemove=function(t){this.updateThumbnailStyle(OM.default.dom.getPointerPosition(this.progressBar,t).x,this.progressBar.offsetWidth)},e.getStyleForTime=function(t){for(var e=0;e<this.vttData.length;++e){var i=this.vttData[e];if(t>=i.start&&t<i.end){if(i.css.url&&!NM[i.css.url]){var n=new Image;n.src=i.css.url,NM[i.css.url]=n}return i.css}}},e.showThumbnailHolder=function(){this.thumbnailHolder.style.opacity="1"},e.hideThumbnailHolder=function(){this.thumbnailHolder.style.opacity="0"},e.updateThumbnailStyle=function(t,e){var i=t*this.player.duration(),n=this.getStyleForTime(i);if(!n)return this.hideThumbnailHolder();var r=t*e,s=parseInt(n.width,10),a=s>>1,o=e-(r+a),l=r-a;if(l>0&&o>0?this.thumbnailHolder.style.transform="translateX("+(r-a)+"px)":l<=0?this.thumbnailHolder.style.transform="translateX(0px)":o<=0&&(this.thumbnailHolder.style.transform="translateX("+(e-s)+"px)"),!this.lastStyle||this.lastStyle!==n)for(var c in this.lastStyle=n,n)n.hasOwnProperty(c)&&(this.thumbnailHolder.style[c]=n[c])},e.processVtt=function(t){var e=this,i=[];return t.split(/[\r\n][\r\n]/i).forEach((function(t){if(t.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)){var n=t.split(/[\r\n]/i),r=n[0].split(/ ?--> ?/i),s=r[0],a=r[1],o=n[1],l=e.getVttCss(o);i.push({start:e.getSecondsFromTimestamp(s),end:e.getSecondsFromTimestamp(a),css:l})}})),i},e.getFullyQualifiedUrl=function(t,e){return t.indexOf("//")>=0?t:0===e.indexOf("//")?[e.replace(/\/$/gi,""),this.trim(t,"/")].join("/"):e.indexOf("//")>0?[this.trim(e,"/"),this.trim(t,"/")].join("/"):t},e.getPropsFromDef=function(t){var e=t.split(/#xywh=/i),i=e[0],n=e[1].match(/[0-9]+/gi);return{x:n[0],y:n[1],w:n[2],h:n[3],image:i}},e.getVttCss=function(t){var e,i={};if(e=this.options.src.indexOf("//")>=0?this.options.src.split(/([^\/]*)$/gi).shift():this.getBaseUrl()+this.options.src.split(/([^\/]*)$/gi).shift(),!(t=this.getFullyQualifiedUrl(t,e)).match(/#xywh=/i))return i.background='url("'+t+'")',i;var n=this.getPropsFromDef(t);return i.background='url("'+n.image+'") no-repeat -'+n.x+"px -"+n.y+"px",i.width=n.w+"px",i.height=n.h+"px",i.url=n.image,i},e.deconstructTimestamp=function(t){var e=t.split("."),i=e[0].split(":");return{milliseconds:parseInt(e[1],10)||0,seconds:parseInt(i.pop(),10)||0,minutes:parseInt(i.pop(),10)||0,hours:parseInt(i.pop(),10)||0}},e.getSecondsFromTimestamp=function(t){var e=this.deconstructTimestamp(t);return parseInt(3600*e.hours+60*e.minutes+e.seconds+e.milliseconds/1e3,10)},e.trim=function(t,e){var i=[" ","\n","\r","\t","\f","\v","","","","","","","","","","","","","","\u2028","\u2029",""].join(""),n=0,r=0;for(t+="",e&&(i=(e+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),n=t.length,r=0;r<n;r++)if(-1===i.indexOf(t.charAt(r))){t=t.substring(r);break}for(r=(n=t.length)-1;r>=0;r--)if(-1===i.indexOf(t.charAt(r))){t=t.substring(0,r+1);break}return-1===i.indexOf(t.charAt(0))?t:""},t}();function UM(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function jM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}BM("vttThumbnails",FM),FM.VERSION="0.0.15",i(78984);var VM=OM.default.getComponent("MenuItem"),HM=OM.default.getComponent("Component"),qM=function(t){function e(e,i){return i.selectable=!0,i.multiSelectable=!1,t.call(this,e,i)||this}UM(e,t);var i=e.prototype;return i.handleClick=function(){var e=this.options_;console.log("Changing quality to:",e.label),t.prototype.handleClick.call(this);for(var i=this.player().qualityLevels(),n=0;n<i.length;n++)e.index==i.length||e.index==n?i[n].enabled=!0:i[n].enabled=!1},i.update=function(){var t=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==t)},e}(VM);HM.registerComponent("SourceMenuItem",qM);var WM=OM.default.getComponent("MenuButton"),zM=function(t){function e(e,i){var n;n=t.call(this,e,i)||this,WM.apply(jM(n),arguments);var r=n.player().qualityLevels();if(i&&i.default)if("low"==i.default)for(var s=0;s<r.length;s++)r[s].enabled=0==s;else if(i.default="high")for(s=0;s<r.length;s++)r[s].enabled=s==r.length-1;return n.player().qualityLevels().on(["change","addqualitylevel"],OM.default.bind(jM(n),n.update)),n}UM(e,t);var i=e.prototype;return i.createEl=function(){return OM.default.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},i.buildCSSClass=function(){return WM.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},i.update=function(){return WM.prototype.update.call(this)},i.createItems=function(){for(var t=[],e=this.player().qualityLevels(),i=[],n=0;n<e.length;n++){var r=e.length-(n+1),s=r===e.selectedIndex,a=""+r,o=r;e[r].height?(a=e[r].height+"p",o=parseInt(e[r].height,10)):e[r].bitrate&&(a=Math.floor(e[r].bitrate/1e3)+" kbps",o=parseInt(e[r].bitrate,10)),i.indexOf(a)>=0||(i.push(a),t.push(new qM(this.player_,{label:a,index:r,selected:s,sortVal:o})))}return e.length>1&&t.push(new qM(this.player_,{label:"Auto",index:e.length,selected:!1,sortVal:99999})),t.sort((function(t,e){return t.options_.sortVal<e.options_.sortVal?1:t.options_.sortVal>e.options_.sortVal?-1:0})),t},e}(WM),GM={},KM=function(t){var e=this;this.ready((function(){!function(t,e){if(t.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+t.techName_),"Html5"!=t.techName_)return!1;t.on(["loadedmetadata"],(function(e){if(t.qualityLevels(),OM.default.log("loadmetadata event"),"undefined"==t.videojs_http_source_selector_initialized||1==t.videojs_http_source_selector_initialized)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),t.videojs_http_source_selector_initialized=!0;var i=t.controlBar,n=i.getChild("fullscreenToggle").el();i.el().insertBefore(i.addChild("SourceMenuButton").el(),n)}}))}(e,OM.default.mergeOptions(GM,t))})),OM.default.registerComponent("SourceMenuButton",zM),OM.default.registerComponent("SourceMenuItem",qM)};(OM.default.registerPlugin||OM.default.plugin)("httpSourceSelector",KM),KM.VERSION="1.1.6",i(68390);var YM=i(34155);OM.default.Vhs.xhr.beforeRequest=t=>{t.headers?.Range&&new URL(t.uri).hostname.endsWith(".googlevideo.com")&&(t.uri+=`&range=${t.headers.Range.split("=")[1]}`,delete t.headers.Range)};const XM={name:"FtVideoPlayer",props:{format:{type:String,required:!0},sourceList:{type:Array,default:()=>[]},adaptiveFormats:{type:Array,default:()=>[]},dashSrc:{type:Array,default:null},hlsSrc:{type:Array,default:null},captionHybridList:{type:Array,default:()=>[]},storyboardSrc:{type:String,default:""},thumbnail:{type:String,default:""},videoId:{type:String,required:!0},lengthSeconds:{type:Number,required:!0},chapters:{type:Array,default:()=>[]}},data:function(){return{id:"",powerSaveBlocker:null,volume:1,muted:!1,player:null,useDash:!1,useHls:!1,selectedDefaultQuality:"",selectedQuality:"",selectedResolution:"",selectedBitrate:"",selectedMimeType:"",selectedFPS:0,using60Fps:!1,maxFramerate:0,activeSourceList:[],activeAdaptiveFormats:[],playerStats:null,statsModal:null,showStatsModal:!1,statsModalEventName:"updateStats",usingTouch:!1,skipSponsors:!0,skipCountdown:1,dataSetup:{fluid:!0,nativeTextTracks:!1,plugins:{},controlBar:{children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","screenshotButton","playbackRateMenuButton","loopButton","chaptersButton","descriptionsButton","subsCapsButton","pictureInPictureToggle","toggleTheatreModeButton","fullWindowButton","qualitySelector","fullscreenToggle"]}}}},computed:{currentLocale:function(){return this.$i18n.locale},defaultPlayback:function(){return this.$store.getters.getDefaultPlayback},defaultSkipInterval:function(){return this.$store.getters.getDefaultSkipInterval},defaultQuality:function(){return parseInt(this.$store.getters.getDefaultQuality)},defaultCaptionSettings:function(){try{return JSON.parse(this.$store.getters.getDefaultCaptionSettings)}catch(t){return console.error(t),{}}},defaultVideoFormat:function(){return this.$store.getters.getDefaultVideoFormat},autoplayVideos:function(){return this.$store.getters.getAutoplayVideos},videoVolumeMouseScroll:function(){return this.$store.getters.getVideoVolumeMouseScroll},videoPlaybackRateMouseScroll:function(){return this.$store.getters.getVideoPlaybackRateMouseScroll},videoSkipMouseScroll:function(){return this.$store.getters.getVideoSkipMouseScroll},useSponsorBlock:function(){return this.$store.getters.getUseSponsorBlock},sponsorBlockShowSkippedToast:function(){return this.$store.getters.getSponsorBlockShowSkippedToast},displayVideoPlayButton:function(){return this.$store.getters.getDisplayVideoPlayButton},enterFullscreenOnDisplayRotate:function(){return this.$store.getters.getEnterFullscreenOnDisplayRotate},sponsorSkips:function(){const t={},e=[],i={},n={};return["sponsor","selfpromo","interaction","intro","outro","preview","music_offtopic","filler"].forEach((r=>{let s={};switch(r){case"sponsor":s=this.$store.getters.getSponsorBlockSponsor;break;case"selfpromo":s=this.$store.getters.getSponsorBlockSelfPromo;break;case"interaction":s=this.$store.getters.getSponsorBlockInteraction;break;case"intro":s=this.$store.getters.getSponsorBlockIntro;break;case"outro":s=this.$store.getters.getSponsorBlockOutro;break;case"preview":s=this.$store.getters.getSponsorBlockRecap;break;case"music_offtopic":s=this.$store.getters.getSponsorBlockMusicOffTopic;break;case"filler":s=this.$store.getters.getSponsorBlockFiller}"doNothing"!==s.skip&&e.push(r),"autoSkip"===s.skip&&(t[r]=!0),"promptToSkip"===s.skip&&(i[r]=!0),n[r]=s})),{autoSkip:t,seekBar:e,promptSkip:i,categoryData:n}},maxVideoPlaybackRate:function(){return parseInt(this.$store.getters.getMaxVideoPlaybackRate)},videoPlaybackRateInterval:function(){return parseFloat(this.$store.getters.getVideoPlaybackRateInterval)},playbackRates:function(){const t=[];let e=this.videoPlaybackRateInterval;for(;e<=this.maxVideoPlaybackRate;)t.push(e),e+=this.videoPlaybackRateInterval,e=parseFloat(e.toFixed(2));return t},enableScreenshot:function(){return this.$store.getters.getEnableScreenshot},screenshotFormat:function(){return this.$store.getters.getScreenshotFormat},screenshotQuality:function(){return this.$store.getters.getScreenshotQuality},screenshotAskPath:function(){return this.$store.getters.getScreenshotAskPath},screenshotFolder:function(){return this.$store.getters.getScreenshotFolderPath}},watch:{showStatsModal:function(){this.player.trigger(this.statsModalEventName)},enableScreenshot:function(){this.toggleScreenshotButton()}},mounted:function(){const t=sessionStorage.getItem("volume"),e=sessionStorage.getItem("muted");null!==t&&(this.volume=t),null!==e&&(this.muted="true"===e),this.dataSetup.playbackRates=this.playbackRates,this.createFullWindowButton(),this.createLoopButton(),this.createToggleTheatreModeButton(),this.createScreenshotButton(),this.determineFormatType(),this.determineMaxFramerate(),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",(()=>this.player.play())),navigator.mediaSession.setActionHandler("pause",(()=>this.player.pause())))},beforeDestroy:function(){document.removeEventListener("keydown",this.keyboardShortcutHandler),null!==this.player&&(this.exitFullWindow(),this.player.isInPictureInPicture()||(this.player.dispose(),this.player=null)),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.playbackState="none")},methods:{initializePlayer:async function(){if(void 0!==this.$refs.video){if(this.useDash||(MM()(OM.default,{showQualitySelectionLabelInControlBar:!0}),await this.determineDefaultQualityLegacy()),"audio"===this.format){const t=this.dataSetup.controlBar.children,e=t.indexOf("pictureInPictureToggle");t.splice(e,1)}this.player=(0,OM.default)(this.$refs.video,{html5:{preloadTextTracks:!1,vhs:{limitRenditionByPlayerDimensions:!1,smoothQualityChange:!1,allowSeeksWithinUnsafeLiveWindow:!0,handlePartialData:!0,overrideNative:OM.default.browser.IS_IPHONE||OM.default.browser.IS_IPAD}}}),this.player.mobileUi({fullscreen:{enterOnRotate:this.enterFullscreenOnDisplayRotate,exitOnRotate:this.enterFullscreenOnDisplayRotate,lockOnRotate:!1},forceForTesting:!0,touchControls:{seekSeconds:this.defaultSkipInterval,tapTimeout:300}}),this.player.volume(this.volume),this.player.muted(this.muted),this.player.playbackRate(this.defaultPlayback),this.player.textTrackSettings.setValues(this.defaultCaptionSettings),this.displayVideoPlayButton||this.player.removeChild("BigPlayButton");const t=this.player.controlBar.getChild("playbackRateMenuButton");t.on(t.menuButton_,"mouseenter",(()=>{const e=this.player.playbackRate(),i=this.player.playbackRates(),n=i.slice().reverse().findIndex((t=>t===e||t<e));if(0!==n&&n!==i.length-1){const e=t.menu,i=e.contentEl(),r=e.children()[n].contentEl().clientHeight,s=r*n-(i.clientHeight-r)/2;i.scrollTo({top:s})}})),""!==this.storyboardSrc&&this.player.vttThumbnails({src:this.storyboardSrc,showTimestamp:!0}),this.autoplayVideos&&setTimeout((()=>{this.player.play()}),200),this.player.controlBar.progressControl.seekBar.playProgressBar.removeChild("timeTooltip"),this.chapters.length>0&&this.chapters.forEach(this.addChapterMarker),this.useSponsorBlock&&this.initializeSponsorBlock(),document.removeEventListener("keydown",this.keyboardShortcutHandler),document.addEventListener("keydown",this.keyboardShortcutHandler),this.player.on("volumechange",this.updateVolume),this.videoVolumeMouseScroll?this.player.on("wheel",this.mouseScrollVolume):this.player.controlBar.getChild("volumePanel").on("wheel",this.mouseScrollVolume),this.videoPlaybackRateMouseScroll&&(this.player.on("wheel",this.mouseScrollPlaybackRate),this.player.el_.firstChild.style.pointerEvents="none",this.player.on("click",this.handlePlayerClick)),this.videoSkipMouseScroll&&this.player.on("wheel",this.mouseScrollSkip),this.player.on("fullscreenchange",(()=>{this.fullscreenOverlay(),this.toggleFullscreenClass()})),this.player.on("ready",(()=>{this.$emit("ready"),this.createStatsModal(),0!==this.captionHybridList.length&&this.transformAndInsertCaptions(),this.toggleScreenshotButton()})),this.player.one("loadedmetadata",(()=>{this.useDash&&this.createDashQualitySelector(this.player.qualityLevels()),this.checkAspectRatio()})),this.player.on("ended",(()=>{this.$emit("ended"),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="none")})),this.player.on("error",((t,e)=>{this.$emit("error",t.target.player.error_),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="none")})),this.player.on("play",(async()=>{"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing")})),this.player.on("pause",(()=>{"mediaSession"in navigator&&(navigator.mediaSession.playbackState="paused")})),this.player.on(this.statsModalEventName,(()=>{this.showStatsModal?(this.statsModal.open(),this.player.controls(!0),this.statsModal.contentEl().innerHTML=this.getFormattedStats()):this.statsModal.close()})),this.player.on("timeupdate",(()=>{"dash"===this.format&&(this.playerStats=this.player.tech({IWillNotUseThisInPlugins:!0}).vhs.stats,this.updateStatsContent()),this.$emit("timeupdate")})),this.player.textTrackSettings.on("modalclose",(t=>{const e=this.player.textTrackSettings.getValues();this.updateDefaultCaptionSettings(JSON.stringify(e))}))}},initializeSponsorBlock(){(async function(t,e){const i=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",i),r=Array.from(new Uint8Array(n)).map((t=>t.toString(16).padStart(2,"0"))).slice(0,4).join(""),s=`${bu.getters.getSponsorBlockUrl}/api/skipSegments/${r}?categories=${JSON.stringify(e)}`;try{const e=await fetch(s);return 404===e.status?[]:(await e.json()).filter((e=>e.videoID===t)).flatMap((t=>t.segments))}catch(t){throw console.error("failed to fetch SponsorBlock segments",s,t),t}})(this.videoId,this.sponsorSkips.seekBar).then((t=>{0!==t.length&&this.player.ready((()=>{this.player.on("timeupdate",(()=>{this.skipSponsorBlocks(t)})),this.player.on("seeking",(()=>{this.skipSponsors=!1})),t.forEach((({category:t,segment:[e,i]})=>{this.addSponsorBlockMarker({time:e,duration:i-e,color:"var(--primary-color)",category:t})}))}))}))},skipSponsorBlocks(t){const e=this.player.currentTime(),i=this.player.duration();let n=null,r=null;t.forEach((({category:t,segment:[i,s]})=>{i<=e&&e<s&&(n=s,r=t)})),this.skipSponsors&&null!==n&&Math.abs(i-e)>.5&&this.sponsorSkips.autoSkip[r]&&(0===this.skipCountdown?(this.sponsorBlockShowSkippedToast&&this.showSkippedSponsorSegmentInformation(r),this.player.currentTime(n)):this.skipCountdown--),null!==n||this.skipSponsors||(this.skipSponsors=!0,this.skipCountdown=1)},showSkippedSponsorSegmentInformation(t){const e=this.sponsorBlockTranslatedCategory(t);kR(`${this.$t("Video.Skipped segment")} ${e}`)},sponsorBlockTranslatedCategory(t){switch(t){case"sponsor":return this.$t("Video.Sponsor Block category.sponsor");case"intro":return this.$t("Video.Sponsor Block category.intro");case"outro":return this.$t("Video.Sponsor Block category.outro");case"selfpromo":return this.$t("Video.Sponsor Block category.self-promotion");case"interaction":return this.$t("Video.Sponsor Block category.interaction");case"music_offtopic":return this.$t("Video.Sponsor Block category.music offtopic");case"filler":return this.$t("Video.Sponsor Block category.filler");default:return console.error(`Unknown translation for SponsorBlock category ${t}`),t}},addSponsorBlockMarker(t){const e=OM.default.dom.createEl("div");e.title=this.sponsorBlockTranslatedCategory(t.category),e.className=`sponsorBlockMarker main${this.sponsorSkips.categoryData[t.category].color}`,e.style.width=t.duration/this.lengthSeconds*100+"%",e.style.marginLeft=t.time/this.lengthSeconds*100+"%",this.player.el().querySelector(".vjs-progress-holder").appendChild(e)},addChapterMarker(t){const e=OM.default.dom.createEl("div");e.title=t.title,e.className="chapterMarker",e.style.marginLeft=`calc(${t.startSeconds/this.lengthSeconds*100}% - 1px)`,this.player.el().querySelector(".vjs-progress-holder").appendChild(e)},checkAspectRatio(){this.player.videoWidth()-this.player.videoHeight()<=240&&(this.player.fluid(!1),this.player.aspectRatio("16:9"))},updateVolume:function(t){if("false"===sessionStorage.getItem("muted")&&0===this.player.volume()){const t=parseFloat(sessionStorage.getItem("defaultVolume")),e=!0;sessionStorage.setItem("volume",t),sessionStorage.setItem("muted",e)}else{const t=this.player.volume(),e=this.player.muted();sessionStorage.setItem("volume",t),sessionStorage.setItem("muted",e)}},mouseScrollVolume:function(t){t.target&&!t.currentTarget.querySelector(".vjs-menu:hover")&&(t.preventDefault(),this.player.muted()&&t.wheelDelta>0&&(this.player.muted(!1),this.player.volume(0)),t.ctrlKey||t.metaKey||this.player.muted()||(t.wheelDelta>0?this.changeVolume(.05):t.wheelDelta<0&&this.changeVolume(-.05)))},mouseScrollPlaybackRate:function(t){t.target&&!t.currentTarget.querySelector(".vjs-menu:hover")&&(t.preventDefault(),(t.ctrlKey||t.metaKey)&&(t.wheelDelta>0?this.changePlayBackRate(.05):t.wheelDelta<0&&this.changePlayBackRate(-.05)))},mouseScrollSkip:function(t){(t.ctrlKey||t.metaKey)&&this.videoPlaybackRateMouseScroll||t.target&&(t.target.matches(".vjs-tech")||t.target.matches(".ftVideoPlayer"))&&(t.preventDefault(),t.wheelDelta>0&&this.changeDurationBySeconds(this.defaultSkipInterval*this.player.playbackRate()),t.wheelDelta<0&&this.changeDurationBySeconds(-this.defaultSkipInterval*this.player.playbackRate()))},handlePlayerClick:function(t){t.target.matches(".ftVideoPlayer")&&(t.ctrlKey||t.metaKey?this.player.playbackRate(this.defaultPlayback):this.player.paused()||!this.player.hasStarted()?this.player.play():this.player.pause())},determineFormatType:function(){"dash"===this.format?this.enableDashFormat():this.enableLegacyFormat()},determineMaxFramerate:async function(){if(0!==this.dashSrc.length)try{(await Cc().readFile(this.dashSrc[0].url)).includes('frameRate="60"')?this.maxFramerate=60:this.maxFramerate=30}catch{this.maxFramerate=60}else this.maxFramerate=60},determineDefaultQualityLegacy:function(){if(this.useDash)return;if(0===this.sourceList.length)return"";if("number"==typeof this.sourceList[0].qualityLabel)return"";if(this.sourceList[this.sourceList.length-1].qualityLabel===this.$t("Video.Audio.Low"))return void(this.selectedDefaultQuality=this.sourceList[0].qualityLabel);let t=this.defaultQuality;"auto"===t&&(t=720);let e=parseInt(this.sourceList[this.sourceList.length-1].qualityLabel.replace(/p|k/,""));4===e&&(e=2160),8===e&&(e=4320),e<t&&(this.selectedDefaultQuality=this.sourceList[this.sourceList.length-1].qualityLabel);const i=[].concat(this.sourceList).reverse();i.forEach(((e,n)=>{let r=parseInt(e.qualityLabel.replace(/p|k/,""));if(4===r&&(r=2160),8===r&&(r=4320),t===r&&(this.selectedDefaultQuality=e.qualityLabel),n<this.sourceList.length-1){let s=parseInt(i[n+1].qualityLabel.replace(/p|k/,""));4===s&&(s=2160),8===s&&(s=4320),t>=r&&t<s&&(this.selectedDefaultQuality=e.qualityLabel)}else r<=t&&(this.selectedDefaultQuality=e.qualityLabel)})),""===this.selectedDefaultQuality&&(this.selectedDefaultQuality=this.sourceList[this.sourceList.length-1].qualityLabel)},determineDefaultQualityDash:function(){let t;"auto"===this.defaultQuality&&this.setDashQualityLevel("auto"),void 0!==this.activeAdaptiveFormats&&this.activeAdaptiveFormats.length>0?(t=this.activeAdaptiveFormats.filter((t=>t.height===this.defaultQuality)),0===t.length&&(t=this.activeAdaptiveFormats.filter((t=>t.height<this.defaultQuality))),t=t.sort(((t,e)=>t.height===e.height?e.bitrate-t.bitrate:e.height-t.height))):(t=this.player.qualityLevels().levels_.filter((t=>t.height===this.defaultQuality)),0===t.length&&(t=this.player.qualityLevels().levels_.filter((t=>t.height<this.defaultQuality))),t=t.sort(((t,e)=>t.height===e.height?e.bitrate-t.bitrate:e.height-t.height))),this.setDashQualityLevel(t[0].bitrate)},setDashQualityLevel:function(t){let e=null;"auto"!==t&&(e=this.activeAdaptiveFormats.find((e=>e.bitrate===t)));let i=e?e.qualityLabel:"";this.player.qualityLevels().levels_.sort(((t,e)=>t.height===e.height?t.bitrate-e.bitrate:t.height-e.height)).forEach(((e,n,r)=>{"auto"===t||t===e.bitrate?(e.enabled=!0,e.enabled_(!0),"auto"!==t&&""===i&&(i=e.height+"p")):(e.enabled=!1,e.enabled_(!1))}));let n="auto"===t?"auto":i;document.getElementById("vjs-current-quality").innerText=n,this.selectedQuality=n,"auto"!==n?(this.selectedResolution=`${e.width}x${e.height}`,this.selectedFPS=e.fps,this.selectedBitrate=e.bitrate,this.selectedMimeType=e.mimeType):(this.selectedResolution="auto",this.selectedFPS="auto",this.selectedBitrate="auto",this.selectedMimeType="auto");const r=document.querySelectorAll(".quality-item");n||(n="auto"),r.forEach((t=>{t.classList.remove("quality-selected"),t.querySelector(".vjs-menu-item-text").innerText===n.toLowerCase()&&t.classList.add("quality-selected")}))},enableDashFormat:function(){null!==this.dashSrc?(this.useDash=!0,this.useHls=!1,this.activeSourceList=this.dashSrc,setTimeout(this.initializePlayer,100)):console.warn("No dash format available.")},enableLegacyFormat:function(){0!==this.sourceList.length?(this.useDash=!1,this.useHls=!1,this.activeSourceList=this.sourceList,setTimeout(this.initializePlayer,100)):console.error("No sources available")},togglePlayPause:function(){this.player.paused()?this.player.play():this.player.pause()},changeDurationBySeconds:function(t){const e=this.player.currentTime()+t;e<0?this.player.currentTime(0):e>this.player.duration?this.player.currentTime(this.player.duration):this.player.currentTime(e)},changePlayBackRate:function(t){const e=(this.player.playbackRate()+t).toFixed(2);e>=this.videoPlaybackRateInterval&&e<=this.maxVideoPlaybackRate&&this.player.playbackRate(e)},framebyframe:function(t){this.player.pause();const e=this.useDash?this.player.qualityLevels()[this.player.qualityLevels().selectedIndex]:{};let i=30;if(60===this.maxFramerate&&e.height>=480)for(let t=0;t<this.adaptiveFormats.length;t++)if(this.adaptiveFormats[t].bitrate===e.bitrate){i=this.adaptiveFormats[t].fps?this.adaptiveFormats[t].fps:30;break}const n=1/i*t;this.player.currentTime(this.player.currentTime()+n)},changeVolume:function(t){const e=this.player.volume()+t;e<0?this.player.volume(0):e>1?this.player.volume(1):this.player.volume(e)},toggleMute:function(){this.player.muted()?this.player.muted(!1):this.player.muted(!0)},toggleCaptions:function(){const t=this.player.textTracks().tracks_;t.length>1&&("showing"===t[1].mode?t[1].mode="disabled":t[1].mode="showing")},createLoopButton:function(){const t=this.toggleVideoLoop,e=OM.default.getComponent("Button");OM.default.registerComponent("loopButton",class extends e{handleClick(){t()}createControlTextEl(t){t.title="Toggle Loop";const e=document.createElement("div");return e.id="loopButton",e.className="vjs-icon-loop loop-white vjs-button",t.appendChild(e),e}})},toggleVideoLoop:function(){const t=document.getElementById("loopButton");if(this.player.loop())t.classList.remove("vjs-icon-loop-active"),t.classList.remove("loop-black"),t.classList.add("loop-white"),this.player.loop(!1);else{const e=this.$store.state.settings.mainColor,i=$c(Nc.find((t=>t.name===e)).value);t.classList.add("vjs-icon-loop-active"),"#000000"===i&&(t.classList.add("loop-black"),t.classList.remove("loop-white")),this.player.loop(!0)}},createFullWindowButton:function(){const t=this.toggleFullWindow,e=OM.default.getComponent("Button");OM.default.registerComponent("fullWindowButton",class extends e{handleClick(){t()}createControlTextEl(t){t.classList.add("vjs-button-fullwindow"),t.title="Full Window";const e=document.createElement("div");return e.id="fullwindow",e.className="vjs-icon-fullwindow-enter vjs-button",t.appendChild(e),e}})},createToggleTheatreModeButton:function(){if(!this.$parent.theatrePossible)return;const t=this.$parent.useTheatreMode?" vjs-icon-theatre-active":"",e=this.toggleTheatreMode,i=OM.default.getComponent("Button");OM.default.registerComponent("toggleTheatreModeButton",class extends i{handleClick(){e()}createControlTextEl(e){e.classList.add("vjs-button-theatre"),e.title="Toggle Theatre Mode";const i=document.createElement("div");return i.id="toggleTheatreModeButton",i.className=`vjs-icon-theatre-inactive${t} vjs-button`,e.appendChild(i),e}})},toggleTheatreMode:function(){if(!this.player.isFullscreen_){const t=document.getElementById("toggleTheatreModeButton");this.$parent.useTheatreMode?t.classList.remove("vjs-icon-theatre-active"):t.classList.add("vjs-icon-theatre-active")}this.$parent.toggleTheatreMode()},createScreenshotButton:function(){const t=this.takeScreenshot,e=OM.default.getComponent("Button");OM.default.registerComponent("screenshotButton",class extends e{handleClick(){t();const e=document.getElementsByTagName("video")[0];e.focus(),e.blur()}createControlTextEl(t){t.classList.add("vjs-hidden"),t.title="Screenshot";const e=document.createElement("div");return e.id="screenshotButton",e.className="vjs-icon-screenshot vjs-button",t.appendChild(e),e}})},toggleScreenshotButton:function(){const t=document.getElementById("screenshotButton").parentNode;this.enableScreenshot&&"audio"!==this.format?t.classList.remove("vjs-hidden"):t.classList.add("vjs-hidden")},takeScreenshot:async function(){if(!this.enableScreenshot||"audio"===this.format)return;const t=this.player.videoWidth(),e=this.player.videoHeight();if(t<=0)return;const i=document.querySelector("video"),n=document.createElement("canvas");n.width=t,n.height=e,n.getContext("2d").drawImage(i,0,0);const r=this.screenshotFormat,s=`image/${"jpg"===r?"jpeg":r}`,a="jpg"===r?this.screenshotQuality/100:1;let o;try{o=await this.parseScreenshotCustomFileName({date:new Date(Date.now()),playerTime:this.player.currentTime(),videoId:this.videoId})}catch(t){return console.error(`Parse failed: ${t.message}`),kR(this.$t("Screenshot Error",{error:t.message})),void n.remove()}let l="";if(-1!==o.indexOf(fu().sep)){const t=o.lastIndexOf(fu().sep);l=o.substring(0,t),o=o.substring(t+1)}const c=`${o}.${r}`;let u,h;if(this.screenshotAskPath){const t=!this.player.paused();t&&this.player.pause(),u=""!==this.screenshotFolder&&await Ec(this.screenshotFolder)?this.screenshotFolder:await NR();const e={defaultPath:fu().join(u,c),filters:[{name:r.toUpperCase(),extensions:[r]}]},i=await LR(e);if(t&&this.player.play(),i.canceled||""===i.filePath)return void n.remove();h=i.filePath,h.endsWith(`.${r}`)||(h=`${h}.${r}`),u=fu().dirname(h),this.updateScreenshotFolderPath(u)}else{if(u=""===this.screenshotFolder?fu().join(await NR(),"Freetube",l):fu().join(this.screenshotFolder,l),!await Ec(u))try{Cc().mkdir(u,{recursive:!0})}catch(t){return console.error(t),kR(this.$t("Screenshot Error",{error:t})),void n.remove()}h=fu().join(u,c)}n.toBlob((t=>{t.arrayBuffer().then((t=>{const e=new Uint8Array(t);Cc().writeFile(h,e).then((()=>{kR(this.$t("Screenshot Success",{filePath:h}))})).catch((t=>{console.error(t),kR(this.$t("Screenshot Error",{error:t}))}))}))}),s,a),n.remove()},createDashQualitySelector:function(t){const e=this.adaptiveFormats,i=this.activeAdaptiveFormats,n=this.setDashQualityLevel,r=OM.default.getComponent("Button");OM.default.registerComponent("dashQualitySelector",class extends r{handleClick(t){const e="auto"===t.target.innerText?"auto":parseInt(t.target.attributes.bitrate.value);n(e)}createControlTextEl(n){let r='<li class="vjs-menu-item quality-item" role="menuitemradio" tabindex="-1" aria-checked="false" aria-disabled="false">\n            <span class="vjs-menu-item-text">Auto</span>\n            <span class="vjs-control-text" aria-live="polite"></span>\n          </li>';return t.levels_?.reduce(((t,e)=>{let i=t?.find((t=>t.height==e.height));return i?i.bitrate<e.bitrate&&(t=t.filter((t=>t.height!=i.height))).push(e):t.push(e),t}),[]).sort(((t,e)=>e.height===t.height?e.bitrate-t.bitrate:e.height-t.height)).forEach(((t,n,s)=>{let a,o,l;if(void 0!==e&&e.length>0){const n=e.find((e=>e.bitrate===t.bitrate));if(void 0===n)return;i.push(n),a=n.fps?n.fps:30,n.qualityLabel=o=n.qualityLabel?n.qualityLabel:t.height+"p",l=t.bitrate}else a=30,o=t.height+"p",l=t.bitrate;r+=`<li class="vjs-menu-item quality-item" role="menuitemradio" tabindex="-1" aria-checked="false" aria-disabled="false" fps="${a}" bitrate="${l}">\n              <span class="vjs-menu-item-text" fps="${a}" bitrate="${l}">${o}</span>\n              <span class="vjs-control-text" aria-live="polite"></span>\n            </li>`})),n.style.width="4em",n.title="Select Quality",n.innerHTML='<div class="vjs-quality-level-value">\n           <span id="vjs-current-quality">1080p</span>\n          </div>\n          <div class="vjs-quality-level-menu vjs-menu">\n             <ul class="vjs-menu-content" role="menu">'+r+"</ul></div>",n.children[0]}}),this.player.controlBar.addChild("dashQualitySelector",{},this.player.controlBar.children_.length-1),this.determineDefaultQualityDash()},sortCaptions:function(t){return t.sort(((t,e)=>{const i=t.language_code.split("-"),n=e.language_code.split("-"),r=t.label,s=e.label,a=this.currentLocale.split(/-|_/);if(i[0]===a[0]){if(n[0]!==a[0])return-1;if(-1!==s.search("auto"))return-1;if(-1!==r.search("auto"))return 1;if(i[1]===a[1])return-1;if(n[1]===a[1])return 1;if(void 0===i[1])return-1;if(void 0===n[1])return 1}else if(n[0]===a[0])return 1;return r.localeCompare(s)}))},transformAndInsertCaptions:async function(){let t;this.captionHybridList[0]instanceof Promise?(t=await Promise.all(this.captionHybridList),this.$emit("store-caption-list",t)):t=this.captionHybridList;for(const e of this.sortCaptions(t))this.player.addRemoteTextTrack({kind:"subtitles",src:e.url,srclang:e.language_code,label:e.label,type:e.type},!0)},toggleFullWindow:function(){this.player.isFullscreen_||(this.player.isFullWindow?(this.player.removeClass("vjs-full-screen"),this.player.isFullWindow=!1,document.documentElement.style.overflow=this.player.docOrigOverflow,document.body.classList.remove("vjs-full-window"),document.getElementById("fullwindow").classList.remove("vjs-icon-fullwindow-exit"),this.player.trigger("exitFullWindow")):(this.player.addClass("vjs-full-screen"),this.player.isFullscreen_=!1,this.player.isFullWindow=!0,this.player.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",document.body.classList.add("vjs-full-window"),document.getElementById("fullwindow").classList.add("vjs-icon-fullwindow-exit"),this.player.trigger("enterFullWindow")))},exitFullWindow:function(){this.player.isFullWindow&&(this.player.isFullWindow=!1,document.documentElement.style.overflow=this.player.docOrigOverflow,this.player.removeClass("vjs-full-screen"),document.body.classList.remove("vjs-full-window"),document.getElementById("fullwindow").classList.remove("vjs-icon-fullwindow-exit"),this.player.trigger("exitFullWindow"))},toggleFullscreen:function(){this.player.isFullscreen()?this.player.exitFullscreen():this.player.requestFullscreen()},fullscreenOverlay:function(){const t=document.title.replace("- FreeTube","");this.player.isFullscreen()?this.player.ready((()=>{this.player.overlay({overlays:[{showBackground:!1,content:t,start:"mousemove",end:"userinactive"}]})})):this.player.ready((()=>{this.player.overlay({overlays:[{showBackground:!1,content:" ",start:"play",end:"loadstart"}]})}))},toggleFullscreenClass:function(){this.player.isFullscreen()?document.body.classList.add("vjs--full-screen-enabled"):document.body.classList.remove("vjs--full-screen-enabled")},handleTouchStart:function(){this.usingTouch=!0},handleMouseOver:function(){-1!==navigator.userAgent.search("Firefox")&&(OM.default.browser.IS_ANDROID||OM.default.browser.IS_IOS)||(this.usingTouch=!1)},toggleShowStatsModal:function(){"dash"!==this.format?kR(this.$t("Video.Stats.Video statistics are not available for legacy videos")):this.showStatsModal=!this.showStatsModal},createStatsModal:function(){const t=OM.default.getComponent("ModalDialog");this.statsModal=new t(this.player,{temporary:!1,pauseOnOpen:!1}),this.statsModal.handleKeyDown_=t=>{"Escape"!==t.key&&"Tab"!==t.key||this.statsModal.handleKeyDown(t)},this.player.addChild(this.statsModal),this.statsModal.el_.classList.add("statsModal"),this.statsModal.on("modalclose",(()=>{this.showStatsModal=!1}))},updateStatsContent:function(){this.showStatsModal&&(this.statsModal.contentEl().innerHTML=this.getFormattedStats())},getFormattedStats:function(){const t=`${(100*(this.player.muted()?0:this.player.volume())).toFixed(0)}%`,e=`${(this.playerStats.bandwidth/1e3).toFixed(2)}kbps`,i=`${(100*this.player.bufferedPercent()).toFixed(0)}%`,n=`${this.playerStats.videoPlaybackQuality.droppedVideoFrames} / ${this.playerStats.videoPlaybackQuality.totalVideoFrames}`,r="auto"===this.selectedResolution?"auto":`${this.selectedResolution}@${this.selectedFPS}fps`,s=`${this.playerStats.playerDimensions.width}x${this.playerStats.playerDimensions.height}`,a=[[this.$t("Video.Stats.Video ID"),this.videoId],[this.$t("Video.Stats.Resolution"),r],[this.$t("Video.Stats.Player Dimensions"),s],[this.$t("Video.Stats.Bitrate"),this.selectedBitrate],[this.$t("Video.Stats.Volume"),t],[this.$t("Video.Stats.Bandwidth"),e],[this.$t("Video.Stats.Buffered"),i],[this.$t("Video.Stats.Dropped / Total Frames"),n],[this.$t("Video.Stats.Mimetype"),this.selectedMimeType]];let o="";return a.forEach((t=>{const e=`<p>${t[0]}: ${t[1]}</p>`;o+=e})),o},canChapterJump:function(t,e){const i=this.$parent.videoCurrentChapterIndex;return this.chapters.length>0&&("previous"===e?i>0:this.chapters.length-1!==i)&&("darwin"!==YM.platform&&t.ctrlKey||"darwin"===YM.platform&&t.metaKey)},keyboardShortcutHandler:function(t){if(!document.activeElement.classList.contains("ft-input")&&!t.altKey&&!(t.ctrlKey&&("darwin"===YM.platform||"ArrowLeft"!==t.key&&"ArrowRight"!==t.key)||(t.ctrlKey||t.metaKey)&&"c"===t.key.toLowerCase()||null===this.player))switch(t.key){case" ":case"Spacebar":case"K":case"k":t.preventDefault(),this.togglePlayPause();break;case"J":case"j":t.preventDefault(),this.changeDurationBySeconds(-this.defaultSkipInterval*this.player.playbackRate()*2);break;case"L":case"l":t.preventDefault(),this.changeDurationBySeconds(this.defaultSkipInterval*this.player.playbackRate()*2);break;case"O":case"o":t.preventDefault(),this.changePlayBackRate(-this.videoPlaybackRateInterval);break;case"P":case"p":t.preventDefault(),this.changePlayBackRate(this.videoPlaybackRateInterval);break;case"F":case"f":t.preventDefault(),this.toggleFullscreen();break;case"M":case"m":t.metaKey||(t.preventDefault(),this.toggleMute());break;case"C":case"c":t.preventDefault(),this.toggleCaptions();break;case"ArrowUp":t.preventDefault(),this.changeVolume(.05);break;case"ArrowDown":t.preventDefault(),this.changeVolume(-.05);break;case"ArrowLeft":t.preventDefault(),this.canChapterJump(t,"previous")?this.player.currentTime(this.chapters[this.$parent.videoCurrentChapterIndex-1].startSeconds):this.changeDurationBySeconds(-this.defaultSkipInterval*this.player.playbackRate());break;case"ArrowRight":t.preventDefault(),this.canChapterJump(t,"next")?this.player.currentTime(this.chapters[this.$parent.videoCurrentChapterIndex+1].startSeconds):this.changeDurationBySeconds(this.defaultSkipInterval*this.player.playbackRate());break;case"I":case"i":t.preventDefault(),"audio"===this.format||this.player.isInPictureInPicture()?this.player.isInPictureInPicture()&&this.player.exitPictureInPicture():this.player.requestPictureInPicture();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{t.preventDefault();const e=parseInt(t.key)/10,i=this.player.duration()*e;this.player.currentTime(i);break}case",":this.framebyframe(-1);break;case".":this.framebyframe(1);break;case"D":case"d":t.preventDefault(),this.toggleShowStatsModal();break;case"Escape":t.preventDefault(),this.exitFullWindow();break;case"S":case"s":this.toggleFullWindow();break;case"T":case"t":this.toggleTheatreMode();break;case"U":case"u":this.takeScreenshot()}},...Is(["updateDefaultCaptionSettings","parseScreenshotCustomFileName","updateScreenshotFolderPath"])}};var QM=Ks(XM,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"relative",class:{"vjs-using-touch":t.usingTouch,"vjs-hide-play-button":!t.displayVideoPlayButton},on:{mouseover:t.handleMouseOver}},[e("video",{ref:"video",staticClass:"ftVideoPlayer video-js vjs-default-skin dark",attrs:{poster:t.thumbnail,controls:"",preload:"auto",playsinline:"","data-setup":JSON.stringify(t.dataSetup)},on:{touchstart:t.handleTouchStart}},t._l(t.activeSourceList,(function(i,n){return e("source",{key:n+"_source",attrs:{src:i.url,type:i.type||i.mimeType,label:i.qualityLabel,selected:i.qualityLabel===t.selectedDefaultQuality}})})),0)])}),[],!1,null,"035a7cbc",null);const JM=QM.exports,ZM={name:"WatchVideoInfo",components:{"ft-card":na,"ft-button":ra,"ft-icon-button":ha,"ft-share-button":wM},props:{id:{type:String,required:!0},title:{type:String,required:!0},channelId:{type:String,required:!0},channelName:{type:String,required:!0},channelThumbnail:{type:String,required:!0},published:{type:Number,required:!0},viewCount:{type:Number,required:!0},subscriptionCountText:{type:String,required:!0},likeCount:{type:Number,default:0},dislikeCount:{type:Number,default:0},getTimestamp:{type:Function,required:!0},isLive:{type:Boolean,required:!1},isLiveContent:{type:Boolean,required:!0},isUpcoming:{type:Boolean,required:!0},downloadLinks:{type:Array,required:!0},watchingPlaylist:{type:Boolean,required:!0},playlistId:{type:String,default:null},getPlaylistIndex:{type:Function,required:!0},getPlaylistReverse:{type:Function,required:!0},getPlaylistShuffle:{type:Function,required:!0},getPlaylistLoop:{type:Function,required:!0},theatrePossible:{type:Boolean,required:!0},lengthSeconds:{type:Number,required:!0},videoThumbnail:{type:String,required:!0}},data:function(){return{formatTypeLabel:"VIDEO FORMATS"}},computed:{currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},hideSharingActions:function(){return this.$store.getters.getHideSharingActions},hideUnsubscribeButton:function(){return this.$store.getters.getHideUnsubscribeButton},currentLocale:function(){return this.$i18n.locale.replace("_","-")},profileList:function(){return this.$store.getters.getProfileList},activeProfile:function(){return this.$store.getters.getActiveProfile},hideRecommendedVideos:function(){return this.$store.getters.getHideRecommendedVideos},hideLiveChat:function(){return this.$store.getters.getHideLiveChat},hideVideoLikesAndDislikes:function(){return this.$store.getters.getHideVideoLikesAndDislikes},hideVideoViews:function(){return this.$store.getters.getHideVideoViews},favoritesPlaylist:function(){return this.$store.getters.getFavorites},inFavoritesPlaylist:function(){return-1!==this.favoritesPlaylist.videos.findIndex((t=>t.videoId===this.id))},favoriteIconTheme:function(){return this.inFavoritesPlaylist?"base favorite":"base"},downloadLinkOptions:function(){return this.downloadLinks.map((t=>({label:t.label,value:t.url})))},downloadBehavior:function(){return this.$store.getters.getDownloadBehavior},formatTypeOptions:function(){return[{label:this.$t("Change Format.Use Dash Formats").toUpperCase(),value:"dash"},{label:this.$t("Change Format.Use Legacy Formats").toUpperCase(),value:"legacy"},{label:this.$t("Change Format.Use Audio Formats").toUpperCase(),value:"audio"}]},totalLikeCount:function(){return this.likeCount+this.dislikeCount},parsedLikeCount:function(){return this.hideVideoLikesAndDislikes||null===this.likeCount?null:$R(this.likeCount)},parsedDislikeCount:function(){return this.hideVideoLikesAndDislikes||null===this.dislikeCount?null:$R(this.dislikeCount)},likePercentageRatio:function(){return parseInt(this.likeCount/this.totalLikeCount*100)},parsedViewCount:function(){return this.hideVideoViews?null:$R(this.viewCount)+` ${this.$t("Video.Views").toLowerCase()}`},isSubscribed:function(){return-1!==this.activeProfile.subscriptions.findIndex((t=>t.id===this.channelId))},subscribedText:function(){return this.isSubscribed?`${this.$t("Channel.Unsubscribe").toUpperCase()} ${this.subscriptionCountText}`:`${this.$t("Channel.Subscribe").toUpperCase()} ${this.subscriptionCountText}`},dateString(){const t=new Date(this.published);return`${new Intl.DateTimeFormat([this.currentLocale,"en"],{dateStyle:"medium"}).format(t)}`.replaceAll(" ","")},publishedString(){return this.isLiveContent&&this.isLive?this.$t("Video.Started streaming on"):this.isLiveContent&&!this.isLive?this.$t("Video.Streamed on"):this.$t("Video.Published on")},externalPlayer:function(){return this.$store.getters.getExternalPlayer},defaultPlayback:function(){return this.$store.getters.getDefaultPlayback}},mounted:function(){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.title,artist:this.channelName,artwork:[{src:this.videoThumbnail,sizes:"128x128",type:"image/png"}]}),this.$watch("$refs.downloadButton.dropdownShown",(t=>{this.$parent.infoAreaSticky=!t,t&&window.innerWidth>=901&&Promise.resolve().then((()=>{this.$parent.$refs.infoArea.scrollIntoView()}))})))},methods:{handleExternalPlayer:function(){this.$emit("pause-player"),this.openInExternalPlayer({watchProgress:this.getTimestamp(),playbackRate:this.defaultPlayback,videoId:this.id,videoLength:this.lengthSeconds,playlistId:this.playlistId,playlistIndex:this.getPlaylistIndex(),playlistReverse:this.getPlaylistReverse(),playlistShuffle:this.getPlaylistShuffle(),playlistLoop:this.getPlaylistLoop()})},toggleSave:function(){this.inFavoritesPlaylist?this.removeFromPlaylist():this.addToPlaylist()},handleSubscription:function(){if(""===this.channelId)return;const t=JSON.parse(JSON.stringify(this.activeProfile)),e=JSON.parse(JSON.stringify(this.profileList[0]));if(this.isSubscribed){if(t.subscriptions=t.subscriptions.filter((t=>t.id!==this.channelId)),this.updateProfile(t),kR(this.$t("Channel.Channel has been removed from your subscriptions")),this.activeProfile._id===wa){let t=0;this.profileList.forEach((e=>{if(e._id===wa)return;const i=JSON.parse(JSON.stringify(e));-1!==i.subscriptions.findIndex((t=>t.id===this.channelId))&&(t++,i.subscriptions=i.subscriptions.filter((t=>t.id!==this.channelId)),this.updateProfile(i))})),t>0&&kR(this.$t("Channel.Removed subscription from {count} other channel(s)",{count:t}))}}else{const i={id:this.channelId,name:this.channelName,thumbnail:this.channelThumbnail};t.subscriptions.push(i),this.updateProfile(t),kR(this.$t("Channel.Added channel to your subscriptions")),this.activeProfile._id!==wa&&-1===e.subscriptions.findIndex((t=>t.id===this.channelId))&&(e.subscriptions.push(i),this.updateProfile(e))}},handleFormatChange:function(t){switch(t){case"dash":this.$parent.enableDashFormat();break;case"legacy":this.$parent.enableLegacyFormat();break;case"audio":this.$parent.enableAudioFormat()}},handleDownload:function(t){const e=this.downloadLinkOptions[t],i=e.value,n=e.label;this.grabExtensionFromUrl(n),this.downloadBehavior,ER(i)},grabExtensionFromUrl:function(t){const e=t.match(/\/(\w*)/i);return 0===e.length?"":e[1]},addToPlaylist:function(){const t={playlistName:"Favorites",videoData:{videoId:this.id,title:this.title,author:this.channelName,authorId:this.channelId,published:"",description:this.description,viewCount:this.viewCount,lengthSeconds:this.lengthSeconds,timeAdded:(new Date).getTime(),isLive:!1,paid:!1,type:"video"}};this.addVideo(t),kR(this.$t("Video.Video has been saved"))},removeFromPlaylist:function(){const t={playlistName:"Favorites",videoId:this.id};this.removeVideo(t),kR(this.$t("Video.Video has been removed from your saved list"))},...Is(["openInExternalPlayer","updateProfile","addVideo","removeVideo","downloadMedia"])}},tR=Ks(ZM,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-card",{staticClass:"watchVideoInfo"},[e("div",[e("h1",{staticClass:"videoTitle"},[t._v(" "+t._s(t.title)+" ")]),e("div",{staticClass:"channelInformation"},[e("div",{staticClass:"profileRow"},[e("div",[e("router-link",{attrs:{to:`/channel/${t.channelId}`}},[e("img",{staticClass:"channelThumbnail",attrs:{src:t.channelThumbnail,alt:""}})])],1),e("div",[e("router-link",{staticClass:"channelName",attrs:{to:`/channel/${t.channelId}`}},[t._v(" "+t._s(t.channelName)+" ")]),t.hideUnsubscribeButton?t._e():e("ft-button",{staticClass:"subscribeButton",attrs:{label:t.subscribedText,"background-color":"var(--primary-color)","text-color":"var(--text-with-main-color)"},on:{click:t.handleSubscription}})],1)])])]),e("div",[e("div",{staticClass:"datePublished"},[t._v(" "+t._s(t.publishedString)+" "+t._s(t.dateString)+" ")]),e("div",{staticClass:"viewCount"},[t._v(" "+t._s(t.parsedViewCount)+" ")]),t.hideVideoLikesAndDislikes?t._e():e("div",{staticClass:"likeBarContainer"},[e("div",{staticClass:"likeSection"},[e("div",[e("span",{staticClass:"likeCount"},[e("font-awesome-icon",{attrs:{icon:["fas","thumbs-up"]}}),t._v(" "+t._s(t.parsedLikeCount))],1)])])]),e("div",{staticClass:"videoOptions"},[t.isUpcoming?t._e():e("ft-icon-button",{staticClass:"option",attrs:{title:t.$t("Video.Save Video"),icon:["fas","star"],theme:t.favoriteIconTheme},on:{click:t.toggleSave}}),""!==t.externalPlayer?e("ft-icon-button",{staticClass:"option",attrs:{title:t.$t("Video.External Player.OpenInTemplate",{externalPlayer:t.externalPlayer}),icon:["fas","external-link-alt"],theme:"secondary"},on:{click:t.handleExternalPlayer}}):t._e(),!t.isUpcoming&&t.downloadLinks.length>0?e("ft-icon-button",{ref:"downloadButton",staticClass:"option",attrs:{title:t.$t("Video.Download Video"),theme:"secondary",icon:["fas","download"],"return-index":!0,"dropdown-options":t.downloadLinkOptions},on:{click:t.handleDownload}}):t._e(),t.isUpcoming?t._e():e("ft-icon-button",{staticClass:"option",attrs:{title:t.$t("Change Format.Change Media Formats"),theme:"secondary",icon:["fas","file-video"],"dropdown-options":t.formatTypeOptions},on:{click:t.handleFormatChange}}),t.hideSharingActions?t._e():e("ft-share-button",{staticClass:"option",attrs:{id:t.id,"get-timestamp":t.getTimestamp,"playlist-id":t.playlistId}})],1)])])}),[],!1,null,"7bfbeb53",null).exports,eR={name:"WatchVideoChapters",components:{"ft-card":na},props:{chapters:{type:Array,required:!0},currentChapterIndex:{type:Number,required:!0}},data:function(){return{showChapters:!1,currentIndex:0}},computed:{currentTitle:function(){return this.chapters[this.currentIndex].title},compact:function(){return!this.chapters[0].thumbnail}},watch:{currentChapterIndex:function(t){this.currentIndex!==t&&(this.currentIndex=t)}},mounted:function(){this.currentIndex=this.currentChapterIndex},methods:{changeChapter:function(t){this.currentIndex=t,this.$emit("timestamp-event",this.chapters[t].startSeconds)},navigateChapters(t){const e=Array.from(this.$refs.chaptersWrapper.children),i=e.indexOf(document.activeElement);let n=i;"up"===t?0===i?n=e.length-1:n--:i===e.length-1?n=0:n++,e[n].focus()}}};var iR=Ks(eR,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-card",{staticClass:"videoChapters"},[e("h3",{staticClass:"chaptersTitle",attrs:{tabindex:"0","aria-label":t.showChapters?t.$t("Chapters.Chapters list visible, current chapter: {chapterName}",null,{chapterName:t.currentTitle}):t.$t("Chapters.Chapters list hidden, current chapter: {chapterName}",null,{chapterName:t.currentTitle}),"aria-pressed":t.showChapters},on:{click:function(e){t.showChapters=!t.showChapters},keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.stopPropagation(),e.preventDefault(),t.showChapters=!t.showChapters},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault(),t.showChapters=!t.showChapters}]}},[t._v(" "+t._s(t.$t("Chapters.Chapters"))+" "),e("span",{staticClass:"currentChapter"},[t._v("  "+t._s(t.currentTitle)+" ")]),e("font-awesome-icon",{staticClass:"chaptersChevron",class:{open:t.showChapters},attrs:{icon:["fas","chevron-right"],rotation:t.showChapters?90:null}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showChapters,expression:"showChapters"}],ref:"chaptersWrapper",staticClass:"chaptersWrapper",class:{compact:t.compact},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-up",void 0,e.key,void 0)?null:(e.stopPropagation(),e.preventDefault(),t.navigateChapters("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-down",void 0,e.key,void 0)?null:(e.stopPropagation(),e.preventDefault(),t.navigateChapters("down"))}]}},t._l(t.chapters,(function(i,n){return e("div",{key:n,staticClass:"chapter",class:{current:n===t.currentIndex},attrs:{role:"button",tabindex:"0","aria-selected":n===t.currentIndex},on:{click:function(e){return t.changeChapter(n)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.stopPropagation(),e.preventDefault(),t.changeChapter(n))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),t.changeChapter(n))}]}},[t.compact?t._e():e("img",{staticClass:"chapterThumbnail",attrs:{alt:"","aria-hidden":"true",loading:"lazy",src:i.thumbnail}}),e("div",{staticClass:"chapterTimestamp"},[t._v(" "+t._s(i.timestamp)+" ")]),e("p",{staticClass:"chapterTitle"},[t._v(" "+t._s(i.title)+" ")])])})),0)])}),[],!1,null,"507fdd05",null);const nR=iR.exports,rR=Ks({name:"FtTimestampCatcher",props:{inputHtml:{type:String,default:""}},methods:{catchTimestampClick:function(t){const e=t.detail.match(/(\d+):(\d+):?(\d+)?/);if(void 0!==e[3]){const t=3600*Number(e[1])+60*Number(e[2])+Number(e[3]);this.$emit("timestamp-event",t)}else{const t=60*Number(e[1])+Number(e[2]);this.$emit("timestamp-event",t)}},detectTimestamps:function(t){return t.replaceAll(/(\d+(:\d+)+)/g,"<a href=\"#\" onclick=\"this.dispatchEvent(new CustomEvent('timestamp-clicked',{bubbles:true, detail:'$1'}))\">$1</a>")}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("p",{domProps:{innerHTML:t._s(t.detectTimestamps(t.inputHtml))},on:{"timestamp-clicked":t.catchTimestampClick}})}),[],!1,null,null,null).exports,sR=Ks({name:"WatchVideoDescription",components:{"ft-card":na,"ft-timestamp-catcher":rR},props:{published:{type:Number,required:!0},description:{type:String,required:!0},descriptionHtml:{type:String,default:""}},data:function(){return{shownDescription:""}},mounted:function(){if(""!==this.descriptionHtml){const t=this.parseDescriptionHtml(this.descriptionHtml),e=document.createElement("div");e.innerHTML=t,/^\s*$/.test(e.innerText)||(this.shownDescription=t)}else/^\s*$/.test(this.description)||(this.shownDescription=Rh.link(this.description))},methods:{onTimestamp:function(t){this.$emit("timestamp-event",t)},parseDescriptionHtml:function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replaceAll('target="_blank"',"")).replaceAll(/\/redirect.+?(?=q=)/g,"")).replaceAll("q=","")).replaceAll(/rel="nofollow\snoopener"/g,"")).replaceAll(/class=.+?(?=")./g,"")).replaceAll(/id=.+?(?=")./g,"")).replaceAll(/data-target-new-window=.+?(?=")./g,"")).replaceAll(/data-url=.+?(?=")./g,"")).replaceAll(/data-sessionlink=.+?(?=")./g,"")).replaceAll("&amp;","&")).replaceAll("%3A",":")).replaceAll("%2F","/")).replaceAll(/&v.+?(?=")/g,"")).replaceAll(/&redirect-token.+?(?=")/g,"")).replaceAll(/&redir_token.+?(?=")/g,"")).replaceAll('href="/','href="https://www.youtube.com/')).replaceAll('href="/hashtag/','href="freetube://')).replaceAll("yt.www.watch.player.seekTo","changeDuration")}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,t.shownDescription.length>0?e("ft-card",{staticClass:"videoDescription"},[e("ft-timestamp-catcher",{staticClass:"description",attrs:{"input-html":t.shownDescription},on:{"timestamp-event":t.onTimestamp}})],1):t._e()}),[],!1,null,"68a907e4",null).exports;var aR=i(34155);const oR={name:"WatchVideoComments",components:{"ft-card":na,"ft-loader":pc,"ft-select":DD,"ft-timestamp-catcher":rR},props:{id:{type:String,required:!0},channelName:{type:String,required:!0},channelThumbnail:{type:String,required:!0}},data:function(){return{isLoading:!1,showComments:!1,nextPageToken:null,commentData:[],sortNewest:!1}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},hideCommentLikes:function(){return this.$store.getters.getHideCommentLikes},sortNames:function(){return[this.$t("Comments.Top comments"),this.$t("Comments.Newest first")]},sortValues:function(){return["top","newest"]},currentSortValue:function(){return this.sortNewest?"newest":"top"}},methods:{onTimestamp:function(t){this.$emit("timestamp-event",t)},handleSortChange:function(){this.sortNewest=!this.sortNewest,this.commentData=[],this.nextPageToken=null,this.getCommentData()},getCommentData:function(){this.isLoading=!0,aR.env.IS_CORDOVA&&"invidious"!==this.backendPreference?this.getCommentDataLocal():this.getCommentDataInvidious()},getMoreComments:function(){0===this.commentData.length||null===this.nextPageToken||void 0===this.nextPageToken?kR(this.$t("Comments.There are no more comments for this video")):aR.env.IS_CORDOVA&&"invidious"!==this.backendPreference?this.getCommentDataLocal(!0):this.getCommentDataInvidious()},toggleCommentReplies:function(t){this.commentData[t].showReplies||this.commentData[t].replies.length>0?this.commentData[t].showReplies=!this.commentData[t].showReplies:this.getCommentReplies(t)},getCommentReplies:function(t){if(aR.env.IS_CORDOVA)switch(this.commentData[t].dataType){case"local":this.getCommentRepliesLocal(t);break;case"invidious":this.getCommentRepliesInvidious(t)}else this.getCommentRepliesInvidious(t)},getCommentDataLocal:async function(t){try{let e;e=t?await this.nextPageToken.getContinuation():await async function(t,e=!1){return(await eD()).getComments(t,e?"NEWEST_FIRST":"TOP_COMMENTS")}(this.id,this.sortNewest);const i=e.contents.map((t=>mD(t.comment,t)));this.commentData=t?this.commentData.concat(i):i,this.nextPageToken=e.has_continuation?e:null,this.isLoading=!1,this.showComments=!0}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),this.backendFallback&&"local"===this.backendPreference?(kR(this.$t("Falling back to Invidious API")),this.getCommentDataInvidious()):this.isLoading=!1}},getCommentRepliesLocal:async function(t){kR(this.$t("Comments.Getting comment replies, please wait"));try{const e=this.commentData[t],i=e.replyToken;e.replies.length>0?(await i.getContinuation(),e.replies=e.replies.concat(i.replies.map((t=>mD(t))))):(await i.getReplies(),e.replies=i.replies.map((t=>mD(t)))),e.replyToken=i.has_continuation?i:null,e.showReplies=!0}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),this.backendFallback&&"local"===this.backendPreference?(kR(this.$t("Falling back to Invidious API")),this.getCommentDataInvidious()):this.isLoading=!1}},getCommentDataInvidious:function(){(async function({id:t,nextPageToken:e="",sortNewest:i=!0}){const n={resource:"comments",id:t,params:{continuation:e??"",sort_by:i?"new":"top"}},r=await Bh(n);return{response:r,commentData:jh(r)}})({id:this.id,nextPageToken:this.nextPageToken,sortNewest:this.sortNewest}).then((({response:t,commentData:e})=>{this.commentData=this.commentData.concat(e),this.nextPageToken=t.continuation,this.isLoading=!1,this.showComments=!0})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t.responseText}`,1e4,(()=>{CR(t.responseText)})),this.isLoading=!1}))},getCommentRepliesInvidious:function(t){kR(this.$t("Comments.Getting comment replies, please wait"));const e=this.commentData[t].replyToken;(async function({id:t,replyToken:e}){const i={resource:"comments",id:t,params:{continuation:e}},n=await Bh(i);return{commentData:jh(n),continuation:n.continuation??null}})({id:this.id,replyToken:e}).then((({commentData:e,continuation:i})=>{this.commentData[t].replies=e,this.commentData[t].showReplies=!0,this.commentData[t].replyToken=i,this.isLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t.responseText}`,1e4,(()=>{CR(t.responseText)})),this.isLoading=!1}))}}};var lR=Ks(oR,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-card",{staticClass:"card"},[0!==t.commentData.length||t.isLoading?t._e():e("h4",{staticClass:"getCommentsTitle",attrs:{role:"button",tabindex:"0"},on:{click:t.getCommentData,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.getCommentData.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.getCommentData.apply(null,arguments))}]}},[t._v(" "+t._s(t.$t("Comments.Click to View Comments"))+" ")]),t.commentData.length>0&&!t.isLoading&&!t.showComments?e("h4",{staticClass:"getCommentsTitle",attrs:{role:"button",tabindex:"0"},on:{click:function(e){t.showComments=!0},keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault(),t.showComments=!0},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.showComments=!0}]}},[t._v(" "+t._s(t.$t("Comments.Click to View Comments"))+" ")]):t._e(),t.commentData.length>0&&!t.isLoading&&t.showComments?e("ft-select",{staticClass:"commentSort",attrs:{placeholder:t.$t("Comments.Sort by"),value:t.currentSortValue,"select-names":t.sortNames,"select-values":t.sortValues},on:{change:t.handleSortChange}}):t._e(),t.commentData.length>0&&!t.isLoading&&t.showComments?e("h3",{staticClass:"commentsTitle"},[t._v(" "+t._s(t.$t("Comments.Comments"))+" "),e("span",{staticClass:"hideComments",attrs:{role:"button",tabindex:"0"},on:{click:function(e){t.showComments=!1},keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault(),t.showComments=!1},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.showComments=!1}]}},[t._v(" "+t._s(t.$t("Comments.Hide Comments"))+" ")])]):t._e(),t.commentData.length>0&&t.showComments?e("div",t._l(t.commentData,(function(i,n){return e("div",{key:n,staticClass:"comment",attrs:{id:"comment"+n}},[e("router-link",{attrs:{to:`/channel/${i.authorLink}`,tabindex:"-1"}},[e("img",{staticClass:"commentThumbnail",attrs:{src:i.authorThumb,alt:""}})]),i.isPinned?e("p",{staticClass:"commentPinned"},[e("font-awesome-icon",{attrs:{icon:["fas","thumbtack"]}}),t._v(" "+t._s(t.$t("Comments.Pinned by"))+" "+t._s(t.channelName)+" ")],1):t._e(),e("p",{staticClass:"commentAuthorWrapper"},[e("router-link",{staticClass:"commentAuthor",class:{commentOwner:i.isOwner},attrs:{to:`/channel/${i.authorLink}`}},[t._v(" "+t._s(i.author)+" ")]),i.isMember?e("img",{staticClass:"commentMemberIcon",attrs:{src:i.memberIconUrl,title:t.$t("Comments.Member"),"aria-label":t.$t("Comments.Member"),alt:""}}):t._e(),e("span",{staticClass:"commentDate"},[t._v(" "+t._s(i.time)+" ")])],1),e("ft-timestamp-catcher",{staticClass:"commentText",attrs:{"input-html":i.text},on:{"timestamp-event":t.onTimestamp}}),e("p",{staticClass:"commentLikeCount"},[t.hideCommentLikes?t._e():[e("font-awesome-icon",{attrs:{icon:["fas","thumbs-up"]}}),t._v(" "+t._s(i.likes)+" ")],i.isHearted?e("span",{staticClass:"commentHeartBadge"},[e("img",{staticClass:"commentHeartBadgeImg",attrs:{src:t.channelThumbnail,title:t.$t("Comments.Hearted"),"aria-label":t.$t("Comments.Hearted"),alt:""}}),e("font-awesome-icon",{staticClass:"commentHeartBadgeWhite",attrs:{icon:["fas","heart"]}}),e("font-awesome-icon",{staticClass:"commentHeartBadgeRed",attrs:{icon:["fas","heart"]}})],1):t._e(),i.numReplies>0?e("span",{staticClass:"commentMoreReplies",attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.toggleCommentReplies(n)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.toggleCommentReplies(n))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleCommentReplies(n))}]}},[i.showReplies?e("span",[t._v(t._s(t.$t("Comments.Hide")))]):e("span",[t._v(t._s(t.$t("Comments.View")))]),t._v(" "+t._s(i.numReplies)+" "),1===i.numReplies?e("span",[t._v(t._s(t.$t("Comments.Reply").toLowerCase()))]):e("span",[t._v(t._s(t.$t("Comments.Replies").toLowerCase()))]),i.hasOwnerReplied&&!i.showReplies?e("span",[t._v(" "+t._s(t.$t("Comments.From {channelName}",{channelName:t.channelName})))]):t._e(),i.numReplies>1&&i.hasOwnerReplied&&!i.showReplies?e("span",[t._v(" "+t._s(t.$t("Comments.And others")))]):t._e()]):t._e()],2),i.showReplies?e("div",{staticClass:"commentReplies"},[t._l(i.replies,(function(i,r){return e("div",{key:r,staticClass:"comment",attrs:{id:"comment"+n+"-"+r}},[e("router-link",{attrs:{to:`/channel/${i.authorLink}`,tabindex:"-1"}},[e("img",{staticClass:"commentThumbnail",attrs:{src:i.authorThumb,alt:""}})]),e("p",{staticClass:"commentAuthorWrapper"},[e("router-link",{staticClass:"commentAuthor",class:{commentOwner:i.isOwner},attrs:{to:`/channel/${i.authorLink}`}},[t._v(" "+t._s(i.author)+" ")]),i.isMember?e("img",{staticClass:"commentMemberIcon",attrs:{src:i.memberIconUrl,alt:""}}):t._e(),e("span",{staticClass:"commentDate"},[t._v(" "+t._s(i.time)+" ")])],1),e("ft-timestamp-catcher",{staticClass:"commentText",attrs:{"input-html":i.text},on:{"timestamp-event":t.onTimestamp}}),e("p",{staticClass:"commentLikeCount"},[t.hideCommentLikes?t._e():[t.hideCommentLikes?t._e():e("font-awesome-icon",{attrs:{icon:["fas","thumbs-up"]}}),t._v(" "+t._s(i.likes)+" ")]],2),i.numReplies>0?e("p",{staticClass:"commentMoreReplies"},[t._v(" "+t._s(t.$t("Comments.View {replyCount} replies",{replyCount:i.numReplies}))+" ")]):t._e()],1)})),null!==i.replyToken?e("div",{staticClass:"showMoreReplies",attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.getCommentReplies(n,i.replies.length)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.getCommentReplies(n,i.replies.length))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.getCommentReplies(n,i.replies.length))}]}},[e("span",[t._v(t._s(t.$t("Comments.Show More Replies")))])]):t._e()],2):t._e()],1)})),0):t.showComments&&!t.isLoading?e("div",[e("h3",{staticClass:"center"},[t._v(" "+t._s(t.$t("There are no comments available for this video"))+" ")])]):t._e(),t.commentData.length>0&&!t.isLoading&&t.showComments&&t.nextPageToken?e("h4",{staticClass:"getMoreComments",attrs:{role:"button",tabindex:"0"},on:{click:t.getMoreComments,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.getMoreComments.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.getMoreComments.apply(null,arguments))}]}},[t._v(" "+t._s(t.$t("Comments.Load More Comments"))+" ")]):t._e(),t.isLoading?e("ft-loader"):t._e()],1)}),[],!1,null,"7521f5a2",null);const cR=lR.exports;var uR=Ks({name:"WatchVideoLiveChat",components:{"ft-loader":pc,"ft-card":na,"ft-button":ra},props:{liveChat:{type:EventTarget,default:null},videoId:{type:String,required:!0},channelId:{type:String,required:!0}},data:function(){return{liveChatInstance:null,isLoading:!0,hasError:!1,hasEnded:!1,showEnableChat:!1,errorMessage:"",stayAtBottom:!0,showSuperChat:!1,showScrollToBottom:!1,comments:[],superChatComments:[],superChat:{id:"",author:{name:"",thumbnailUrl:""},message:"",superChat:{amount:"",colorClass:""}}}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},chatHeight:function(){return this.superChatComments.length>0?"390px":"445px"},scrollingBehaviour:function(){return this.$store.getters.getDisableSmoothScrolling?"auto":"smooth"}},beforeDestroy:function(){this.hasEnded=!0,this.liveChatInstance?.stop(),this.liveChatInstance=null},created:function(){this.hasError=!0,this.errorMessage=this.$t('Video["Live Chat is currently not supported in this build."]')},methods:{enableLiveChat:function(){this.hasError=!1,this.showEnableChat=!1,this.isLoading=!0,this.getLiveChatLocal()},getLiveChatLocal:async function(){const t=await rD(this.videoId);this.liveChatInstance=t.getLiveChat(),this.startLiveChatLocal()},startLiveChatLocal:function(){this.liveChatInstance.once("start",(t=>{const e=t.actions.filter((t=>"AddChatItemAction"===t.type));for(const{item:t}of e)switch(t.type){case"LiveChatTextMessage":this.parseLiveChatComment(t);break;case"LiveChatPaidMessage":this.parseLiveChatSuperChat(t)}this.isLoading=!1,setTimeout((()=>{this.$refs.liveChatComments?.scrollTo({top:this.$refs.liveChatComments.scrollHeight,behavior:"instant"})}))})),this.liveChatInstance.on("chat-update",(t=>{if(!this.hasEnded&&"AddChatItemAction"===t.type)switch(t.item.type){case"LiveChatTextMessage":this.parseLiveChatComment(t.item);break;case"LiveChatPaidMessage":this.parseLiveChatSuperChat(t.item)}})),this.liveChatInstance.once("end",(()=>{this.hasEnded=!0,this.liveChatInstance=null})),this.liveChatInstance.once("error",(t=>{this.liveChatInstance.stop(),this.liveChatInstance=null,console.error(t),this.errorMessage=t,this.hasError=!0,this.isLoading=!1,this.hasEnded=!0})),this.liveChatInstance.start()},parseLiveChatComment:function(t){const e=t.author.badges.find((t=>"LiveChatAuthorBadge"===t.type&&t.custom_thumbnail)),i={message:Rh.link(pD(t.message.runs,20)),author:{name:t.author.name.text,thumbnailUrl:t.author.thumbnails.at(-1).url,isOwner:t.author.id===this.channelId,isModerator:t.author.is_moderator,isMember:!!e}};e&&(i.badge={url:e.custom_thumbnail.at(-1).url,tooltip:e.tooltip??""}),this.pushComment(i)},parseLiveChatSuperChat:function(t){const e={id:t.id,message:Rh.link(pD(t.message.runs,20)),author:{name:t.author.name.text,thumbnailUrl:t.author.thumbnails[0].url},superChat:{amount:t.purchase_amount,colorClass:Bc()}};this.superChatComments.unshift(e),setTimeout((()=>{this.removeFromSuperChat(e.id)}),12e4),this.pushComment(e)},pushComment:function(t){this.comments.push(t),!this.isLoading&&this.stayAtBottom&&setTimeout((()=>{this.$refs.liveChatComments?.scrollTo({top:this.$refs.liveChatComments.scrollHeight,behavior:this.scrollingBehaviour})})),this.comments.length>150&&this.stayAtBottom&&(this.comments=this.comments.splice(this.comments.length-150,this.comments.length))},removeFromSuperChat:function(t){this.superChatComments=this.superChatComments.filter((e=>e.id!==t))},showSuperChatComment:function(t){this.superChat.id===t.id&&this.showSuperChat?this.showSuperChat=!1:(this.superChat=t,this.showSuperChat=!0)},onScroll:function(t){const e=this.$refs.liveChatComments;t.wheelDelta>=0&&this.stayAtBottom?(this.stayAtBottom=!1,e.scrollHeight>e.clientHeight&&(this.showScrollToBottom=!0)):t.wheelDelta<0&&!this.stayAtBottom&&e.scrollHeight-e.scrollTop===e.clientHeight&&this.scrollToBottom()},scrollToBottom:function(){this.$refs.liveChatComments.scrollTo({top:this.$refs.liveChatComments.scrollHeight,behavior:this.scrollingBehaviour}),this.stayAtBottom=!0,this.showScrollToBottom=!1}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-card",{staticClass:"relative"},[t.isLoading?e("ft-loader"):t.hasError?e("div",{staticClass:"messageContainer"},[e("p",{staticClass:"message"},[t._v(" "+t._s(t.errorMessage)+" ")]),e("font-awesome-icon",{staticClass:"errorIcon",attrs:{icon:["fas","exclamation-circle"]}}),t.showEnableChat?e("ft-button",{staticClass:"enableLiveChat",attrs:{label:t.$t("Video.Enable Live Chat")},on:{click:t.enableLiveChat}}):t._e()],1):0===t.comments.length?e("div",{ref:"liveChatMessage",staticClass:"messageContainer liveChatMessage"},[e("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("Video['Live chat is enabled. Chat messages will appear here once sent.']"))+" ")])]):e("div",{staticClass:"relative"},[e("h4",[t._v(t._s(t.$t("Video.Live Chat")))]),t.superChatComments.length>0?e("div",{staticClass:"superChatComments"},t._l(t.superChatComments,(function(i,n){return e("div",{key:n,staticClass:"superChat",class:i.superChat.colorClass,style:{backgroundColor:"var(--primary-color)"},attrs:{"aria-label":t.$t("Video.Show Super Chat Comment"),role:"button",tabindex:"0"},on:{click:function(e){return t.showSuperChatComment(i)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.showSuperChatComment(i))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.showSuperChatComment(i))}]}},[e("img",{staticClass:"channelThumbnail",attrs:{src:i.author.thumbnailUrl,alt:""}}),e("p",{staticClass:"superChatContent"},[e("span",{staticClass:"donationAmount"},[t._v(" "+t._s(i.superChat.amount)+" ")])])])})),0):t._e(),t.showSuperChat?e("div",{staticClass:"openedSuperChat",class:t.superChat.superChat.colorClass,attrs:{role:"button",tabindex:"0"},on:{click:function(e){t.showSuperChat=!1},keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault(),t.showSuperChat=!1},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.showSuperChat=!1}]}},[e("div",{staticClass:"superChatMessage",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[e("div",{staticClass:"upperSuperChatMessage"},[e("img",{staticClass:"channelThumbnail",attrs:{src:t.superChat.author.thumbnailUrl,alt:""}}),e("p",{staticClass:"channelName"},[t._v(" "+t._s(t.superChat.author.name)+" ")]),e("p",{staticClass:"donationAmount"},[t._v(" "+t._s(t.superChat.superChat.amount)+" ")])]),e("p",{staticClass:"chatMessage",domProps:{innerHTML:t._s(t.superChat.message)}})])]):t._e(),e("div",{ref:"liveChatComments",staticClass:"liveChatComments",style:{height:t.chatHeight},on:{mousewheel:e=>t.onScroll(e)}},t._l(t.comments,(function(i,n){return e("div",{key:n,staticClass:"comment",class:i.superChat?`superChatMessage ${i.superChat.colorClass}`:""},[i.superChat?[e("div",{staticClass:"upperSuperChatMessage"},[e("img",{staticClass:"channelThumbnail",attrs:{src:i.author.thumbnailUrl,alt:""}}),e("p",{staticClass:"channelName"},[t._v(" "+t._s(i.author.name)+" ")]),e("p",{staticClass:"donationAmount"},[t._v(" "+t._s(i.superChat.amount)+" ")])]),i.message?e("p",{staticClass:"chatMessage",domProps:{innerHTML:t._s(i.message)}}):t._e()]:[e("img",{staticClass:"channelThumbnail",attrs:{src:i.author.thumbnailUrl,alt:""}}),e("p",{staticClass:"chatContent"},[e("span",{staticClass:"channelName",class:{member:i.author.isMember,moderator:i.author.isModerator,owner:i.author.isOwner}},[t._v(" "+t._s(i.author.name)+" ")]),i.author.badge?e("span",{staticClass:"badge"},[e("img",{staticClass:"badgeImage",attrs:{src:i.author.badge.url,alt:"",title:i.author.badge.tooltip}})]):t._e(),e("span",{staticClass:"chatMessage",domProps:{innerHTML:t._s(i.message)}})])]],2)})),0),t.showScrollToBottom?e("div",{staticClass:"scrollToBottom",attrs:{"aria-label":t.$t("Video.Scroll to Bottom"),role:"button",tabindex:"0"},on:{click:t.scrollToBottom,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.scrollToBottom.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.scrollToBottom.apply(null,arguments))}]}},[e("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","arrow-down"]}})],1):t._e()])],1)}),[],!1,null,"48fbd335",null);const hR=uR.exports;var dR=Ks({name:"WatchVideoPlaylist",components:{"ft-loader":pc,"ft-card":na,"ft-list-video-lazy":SM},props:{playlistId:{type:String,required:!0},videoId:{type:String,required:!0}},data:function(){return{isLoading:!1,shuffleEnabled:!1,loopEnabled:!1,reversePlaylist:!1,channelName:"",channelId:"",playlistTitle:"",playlistItems:[],randomizedPlaylistItems:[]}},computed:{backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentVideoIndex:function(){return this.playlistItems.findIndex((t=>void 0!==t.videoId?t.videoId===this.videoId:t.id===this.videoId))+1},playlistVideoCount:function(){return this.playlistItems.length}},watch:{videoId:function(t,e){this.shuffleEnabled&&this.randomizedPlaylistItems.findIndex((e=>e===t))-1!==this.randomizedPlaylistItems.findIndex((t=>t===e))&&this.shufflePlaylistItems()}},mounted:function(){const t=this.$store.getters.getCachedPlaylist;t?.id===this.playlistId?this.loadCachedPlaylistInformation(t):this.getPlaylistInformationInvidious(),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("previoustrack",this.playPreviousVideo),navigator.mediaSession.setActionHandler("nexttrack",this.playNextVideo))},beforeDestroy:function(){"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null))},methods:{toggleLoop:function(){this.loopEnabled?(this.loopEnabled=!1,kR(this.$t("Loop is now disabled"))):(this.loopEnabled=!0,kR(this.$t("Loop is now enabled")))},toggleShuffle:function(){this.shuffleEnabled?(this.shuffleEnabled=!1,kR(this.$t("Shuffle is now disabled"))):(this.shuffleEnabled=!0,kR(this.$t("Shuffle is now enabled")),this.shufflePlaylistItems())},toggleReversePlaylist:function(){this.isLoading=!0,kR(this.$t("The playlist has been reversed")),this.reversePlaylist=!this.reversePlaylist,this.playlistItems=this.playlistItems.reverse(),setTimeout((()=>{this.isLoading=!1}),1)},playNextVideo:function(){const t={playlistId:this.playlistId};if(this.shuffleEnabled){const e=this.randomizedPlaylistItems.findIndex((t=>t===this.videoId));e===this.randomizedPlaylistItems.length-1?this.loopEnabled?(this.$router.push({path:`/watch/${this.randomizedPlaylistItems[0]}`,query:t}),kR(this.$t("Playing Next Video")),this.shufflePlaylistItems()):kR(this.$t("The playlist has ended.  Enable loop to continue playing")):(this.$router.push({path:`/watch/${this.randomizedPlaylistItems[e+1]}`,query:t}),kR(this.$t("Playing Next Video")))}else{const e=this.playlistItems.findIndex((t=>(t.id??t.videoId)===this.videoId));e===this.playlistItems.length-1?(this.loopEnabled&&(this.$router.push({path:`/watch/${this.playlistItems[0].id??this.playlistItems[0].videoId}`,query:t}),kR(this.$t("Playing Next Video"))),kR(this.$t("The playlist has ended.  Enable loop to continue playing"))):(this.$router.push({path:`/watch/${this.playlistItems[e+1].id??this.playlistItems[e+1].videoId}`,query:t}),kR(this.$t("Playing Next Video")))}},playPreviousVideo:function(){kR("Playing previous video");const t={playlistId:this.playlistId};if(this.shuffleEnabled){const e=this.randomizedPlaylistItems.findIndex((t=>t===this.videoId));0===e?this.$router.push({path:`/watch/${this.randomizedPlaylistItems[this.randomizedPlaylistItems.length-1]}`,query:t}):this.$router.push({path:`/watch/${this.randomizedPlaylistItems[e-1]}`,query:t})}else{const e=this.playlistItems.findIndex((t=>(t.id??t.videoId)===this.videoId));0===e?this.$router.push({path:`/watch/${this.playlistItems[this.randomizedPlaylistItems.length-1].id??this.playlistItems[this.randomizedPlaylistItems.length-1].videoId}`,query:t}):this.$router.push({path:`/watch/${this.playlistItems[e-1].id??this.playlistItems[e-1].videoId}`,query:t})}},loadCachedPlaylistInformation:async function(t){this.isLoading=!0,this.setCachedPlaylist(null),this.playlistTitle=t.title,this.channelName=t.channelName,this.channelId=t.channelId,this.playlistItems=t.items,this.isLoading=!1},getPlaylistInformationLocal:async function(){this.isLoading=!0;try{let t=await nD(this.playlistId);this.playlistTitle=t.info.title,this.channelName=t.info.author?.name,this.channelId=t.info.author?.id;const e=t.items.map(uD);for(;t.has_continuation;){t=await t.getContinuation();const i=t.items.map(uD);e.push(...i)}this.playlistItems=e,this.isLoading=!1}catch(t){console.error(t),kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),"local"===this.backendPreference&&this.backendFallback?(kR(this.$t("Falling back to Invidious API")),this.getPlaylistInformationInvidious()):this.isLoading=!1}},getPlaylistInformationInvidious:function(){this.isLoading=!0,$h(this.playlistId).then((t=>{this.playlistTitle=t.title,this.channelName=t.author,this.channelId=t.authorId,this.playlistItems=this.playlistItems.concat(t.videos),this.isLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),this.isLoading=!1}))},shufflePlaylistItems:function(){const t=[].concat(this.playlistItems),e=[];e.push(this.videoId),this.playlistItems.forEach((i=>{const n=Math.floor(Math.random()*t.length);(t[n].id??t[n].videoId)!==this.videoId&&e.push(t[n].id??t[n].videoId),t.splice(n,1)})),this.randomizedPlaylistItems=e},...Cs(["setCachedPlaylist"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-card",{staticClass:"relative"},[t.isLoading?e("ft-loader"):e("div",[e("h3",[e("router-link",{staticClass:"playlistTitle",attrs:{to:`/playlist/${t.playlistId}`}},[t._v(" "+t._s(t.playlistTitle)+" ")])],1),e("router-link",{staticClass:"channelName",attrs:{to:`/channel/${t.channelId}`}},[t._v(" "+t._s(t.channelName)+" ")]),e("span",{staticClass:"playlistIndex"},[t._v(" - "+t._s(t.currentVideoIndex)+" / "+t._s(t.playlistVideoCount)+" "),t.shuffleEnabled||t.reversePlaylist?t._e():e("progress",{staticClass:"playlistProgressBar",attrs:{max:t.playlistVideoCount},domProps:{value:t.currentVideoIndex}})]),e("p",[e("font-awesome-icon",{staticClass:"playlistIcon",class:{playlistIconActive:t.loopEnabled},attrs:{icon:["fas","retweet"],title:t.$t("Video.Loop Playlist"),role:"button",tabindex:"0"},on:{click:t.toggleLoop,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleLoop.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.toggleLoop.apply(null,arguments))}]}}),e("font-awesome-icon",{staticClass:"playlistIcon",class:{playlistIconActive:t.shuffleEnabled},attrs:{icon:["fas","random"],title:t.$t("Video.Shuffle Playlist"),role:"button",tabindex:"0"},on:{click:t.toggleShuffle,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleShuffle.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.toggleShuffle.apply(null,arguments))}]}}),e("font-awesome-icon",{staticClass:"playlistIcon",class:{playlistIconActive:t.reversePlaylist},attrs:{icon:["fas","exchange-alt"],title:t.$t("Video.Reverse Playlist"),role:"button",tabindex:"0"},on:{click:t.toggleReversePlaylist,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleReversePlaylist.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.toggleReversePlaylist.apply(null,arguments))}]}}),e("font-awesome-icon",{staticClass:"playlistIcon",attrs:{icon:["fas","step-backward"],title:t.$t("Video.Play Previous Video"),role:"button",tabindex:"0"},on:{click:t.playPreviousVideo,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.playPreviousVideo.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.playPreviousVideo.apply(null,arguments))}]}}),e("font-awesome-icon",{staticClass:"playlistIcon",attrs:{icon:["fas","step-forward"],title:t.$t("Video.Play Next Video"),role:"button",tabindex:"0"},on:{click:t.playNextVideo,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.playNextVideo.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.playNextVideo.apply(null,arguments))}]}})],1),t.isLoading?t._e():e("div",{staticClass:"playlistItems"},t._l(t.playlistItems,(function(i,n){return e("div",{key:n,staticClass:"playlistItem"},[e("div",{staticClass:"videoIndexContainer"},[t.currentVideoIndex===n+1?e("font-awesome-icon",{staticClass:"videoIndexIcon",attrs:{icon:["fas","play"]}}):e("p",{staticClass:"videoIndex"},[t._v(" "+t._s(n+1)+" ")])],1),e("ft-list-video-lazy",{attrs:{data:i,"playlist-id":t.playlistId,"playlist-index":t.reversePlaylist?t.playlistItems.length-n-1:n,"playlist-reverse":t.reversePlaylist,"playlist-shuffle":t.shuffleEnabled,"playlist-loop":t.loopEnabled,appearance:"watchPlaylistItem","force-list-type":"list"},on:{"pause-player":function(e){return t.$emit("pause-player")}}})],1)})),0)],1)],1)}),[],!1,null,"383c67b5",null);const pR=dR.exports;var fR=Ks({name:"WatchVideoRecommendations",components:{"ft-card":na,"ft-list-video-lazy":SM,"ft-toggle-switch":HD},props:{data:{type:Array,required:!0},showAutoplay:{type:Boolean,default:!1}},computed:{listType:function(){return this.$store.getters.getListType},playNextVideo:function(){return this.$store.getters.getPlayNextVideo},hideRecommendedVideos:function(){return this.$store.getters.getHideRecommendedVideos}},methods:{...Is(["updatePlayNextVideo"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,t.hideRecommendedVideos?t._e():e("ft-card",{staticClass:"relative watchVideoRecommendations"},[e("div",{staticClass:"VideoRecommendationsTopBar"},[e("h3",[t._v(" "+t._s(t.$t("Up Next"))+" ")]),t.showAutoplay?e("ft-toggle-switch",{staticClass:"autoPlayToggle",attrs:{label:t.$t("Video.Autoplay"),compact:!0,"default-value":t.playNextVideo},on:{change:t.updatePlayNextVideo}}):t._e()],1),t._l(t.data,(function(t,i){return e("ft-list-video-lazy",{key:i,attrs:{data:t,appearance:"recommendation","force-list-type":"list"}})}))],2)}),[],!1,null,"59bab3d5",null);const mR=fR.exports;var gR=i(34155);const yR={name:"Watch",components:{"ft-loader":pc,"ft-video-player":JM,"watch-video-info":tR,"watch-video-chapters":nR,"watch-video-description":sR,"watch-video-comments":cR,"watch-video-live-chat":hR,"watch-video-playlist":pR,"watch-video-recommendations":mR,"ft-age-restricted":EM},beforeRouteLeave:function(t,e,i){this.handleRouteChange(this.videoId),window.removeEventListener("beforeunload",this.handleWatchProgress),i()},data:function(){return{isLoading:!0,firstLoad:!0,useTheatreMode:!1,showDashPlayer:!0,showLegacyPlayer:!1,showYouTubeNoCookieEmbed:!1,hidePlayer:!1,isFamilyFriendly:!1,isLive:!1,liveChat:null,isLiveContent:!1,isUpcoming:!1,upcomingTimestamp:null,upcomingTimeLeft:null,activeFormat:"legacy",thumbnail:"",videoId:"",videoTitle:"",videoDescription:"",videoDescriptionHtml:"",videoViewCount:0,videoLikeCount:0,videoDislikeCount:0,videoLengthSeconds:0,videoChapters:[],videoCurrentChapterIndex:0,channelName:"",channelThumbnail:"",channelId:"",channelSubscriptionCountText:"",videoPublished:0,videoStoryboardSrc:"",audioUrl:"",dashSrc:[],activeSourceList:[],videoSourceList:[],audioSourceList:[],adaptiveFormats:[],captionHybridList:[],recommendedVideos:[],downloadLinks:[],watchingPlaylist:!1,playlistId:"",timestamp:null,playNextTimeout:null,playNextCountDownIntervalId:null,infoAreaSticky:!0}},computed:{historyCache:function(){return this.$store.getters.getHistoryCache},rememberHistory:function(){return this.$store.getters.getRememberHistory},removeVideoMetaFiles:function(){return this.$store.getters.getRemoveVideoMetaFiles},saveWatchedProgress:function(){return this.$store.getters.getSaveWatchedProgress},saveVideoHistoryWithLastViewedPlaylist:function(){return this.$store.getters.getSaveVideoHistoryWithLastViewedPlaylist},backendPreference:function(){return this.$store.getters.getBackendPreference},backendFallback:function(){return this.$store.getters.getBackendFallback},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},proxyVideos:function(){return this.$store.getters.getProxyVideos},defaultInterval:function(){return this.$store.getters.getDefaultInterval},defaultTheatreMode:function(){return this.$store.getters.getDefaultTheatreMode},defaultVideoFormat:function(){return this.$store.getters.getDefaultVideoFormat},forceLocalBackendForLegacy:function(){return this.$store.getters.getForceLocalBackendForLegacy},thumbnailPreference:function(){return this.$store.getters.getThumbnailPreference},playNextVideo:function(){return this.$store.getters.getPlayNextVideo},autoplayPlaylists:function(){return this.$store.getters.getAutoplayPlaylists},hideRecommendedVideos:function(){return this.$store.getters.getHideRecommendedVideos},hideLiveChat:function(){return this.$store.getters.getHideLiveChat},hideComments:function(){return this.$store.getters.getHideComments},hideVideoDescription:function(){return this.$store.getters.getHideVideoDescription},showFamilyFriendlyOnly:function(){return this.$store.getters.getShowFamilyFriendlyOnly},hideChannelSubscriptions:function(){return this.$store.getters.getHideChannelSubscriptions},hideVideoLikesAndDislikes:function(){return this.$store.getters.getHideVideoLikesAndDislikes},theatrePossible:function(){return!this.hideRecommendedVideos||!this.hideLiveChat&&this.isLive||this.watchingPlaylist},currentLocale:function(){return this.$i18n.locale.replace("_","-")},hideChapters:function(){return this.$store.getters.getHideChapters},allowDashAv1Formats:function(){return this.$store.getters.getAllowDashAv1Formats},showThumbnailInMediaControls:function(){return this.$store.getters.getShowThumbnailInMediaControls}},watch:{thumbnail(){if(gR.env.IS_CORDOVA)if(void 0===Gc())console.error("Music controls plugin failed to load.");else{const t={track:this.videoTitle,artist:this.channelName};this.showThumbnailInMediaControls&&(t.cover=this.thumbnail),Gc().create(t);const e=[];Gc().subscribe((t=>{try{const{player:i}=this.$refs.videoPlayer;if(0===e.length&&e.push(i.el().querySelector("video").addEventListener("pause",(()=>{Gc().updateIsPlaying(!1)})),i.el().querySelector("video").addEventListener("play",(()=>{Gc().updateIsPlaying(!0)}))),"music-controls-play"===JSON.parse(t).message||"music-controls-pause"===JSON.parse(t).message)i.paused()?i.play():i.pause();else switch(JSON.parse(t).message){case"music-controls-next":if(this.watchingPlaylist)this.$refs.watchVideoPlaylist.playNextVideo();else{const t=this.recommendedVideos[0].videoId;this.$router.push({path:`/watch/${t}`}),kR(this.$t("Playing Next Video"))}break;case"music-controls-previous":history.back()}Gc().updateIsPlaying(!i.paused())}catch(t){console.warn(t)}})),Gc().listen()}},$route(){switch(this.handleRouteChange(this.videoId),this.videoId=this.$route.params.id,this.firstLoad=!0,this.activeFormat=this.defaultVideoFormat,this.videoStoryboardSrc="",this.captionHybridList=[],this.downloadLinks=[],this.checkIfPlaylist(),this.checkIfTimestamp(),this.backendPreference){case"local":this.getVideoInformationLocal(this.videoId);break;case"invidious":this.getVideoInformationInvidious(this.videoId),this.forceLocalBackendForLegacy&&this.getVideoInformationLocal(this.videoId)}}},mounted:function(){this.videoId=this.$route.params.id,this.activeFormat=this.defaultVideoFormat,this.useTheatreMode=this.defaultTheatreMode,this.checkIfPlaylist(),this.checkIfTimestamp(),gR.env.IS_CORDOVA&&"invidious"!==this.backendPreference?this.getVideoInformationLocal():this.getVideoInformationInvidious(),window.addEventListener("beforeunload",this.handleWatchProgress)},methods:{changeTimestamp:function(t){this.$refs.videoPlayer.player.currentTime(t)},toggleTheatreMode:function(){this.useTheatreMode=!this.useTheatreMode},getVideoInformationLocal:async function(){this.firstLoad&&(this.isLoading=!0);try{let t=await rD(this.videoId);if(t.streaming_data.formats=t.streaming_data.formats.map((t=>({...t,url:`${this.currentInvidiousInstance}/${t.url.split(".googlevideo.com/")[1]}`}))),this.isFamilyFriendly=t.basic_info.is_family_safe,this.recommendedVideos=t.watch_next_feed?.filter((t=>"CompactVideo"===t.type)).map(dD)??[],this.showFamilyFriendlyOnly&&!this.isFamilyFriendly)return this.isLoading=!1,void this.handleVideoEnded();let e=t.playability_status,i=null;if("LOGIN_REQUIRED"===e.status&&(i=await rD(this.videoId,!0),e=t.playability_status),"UNPLAYABLE"===e.status){const t=e.error_screen;throw new Error(`[${e.status}] ${t.reason.text}: ${t.subreason.text}`)}if(this.videoTitle=t.primary_info?.title.text??t.basic_info.title,this.videoViewCount=t.basic_info.view_count,this.channelId=t.basic_info.channel_id,this.channelName=t.basic_info.author,t.secondary_info.owner?.author?this.channelThumbnail=t.secondary_info.owner.author.best_thumbnail?.url??"":this.channelThumbnail="",this.updateSubscriptionDetails({channelThumbnailUrl:0===this.channelThumbnail.length?null:this.channelThumbnail,channelName:this.channelName,channelId:this.channelId}),this.videoPublished=new Date(t.page[0].microformat.publish_date.replace("-","/")).getTime(),t.secondary_info?.description.runs)try{this.videoDescription=pD(t.secondary_info.description.runs)}catch(e){console.error("Failed to extract the localised description, falling back to the standard one.",e,JSON.stringify(t.secondary_info.description.runs)),this.videoDescription=t.basic_info.short_description}else this.videoDescription=t.basic_info.short_description;switch(this.thumbnailPreference){case"start":this.thumbnail=`https://i.ytimg.com/vi/${this.videoId}/maxres1.jpg`;break;case"middle":this.thumbnail=`https://i.ytimg.com/vi/${this.videoId}/maxres2.jpg`;break;case"end":this.thumbnail=`https://i.ytimg.com/vi/${this.videoId}/maxres3.jpg`;break;default:this.thumbnail=t.basic_info.thumbnail[0].url}if(this.hideVideoLikesAndDislikes?(this.videoLikeCount=null,this.videoDislikeCount=null):(this.videoLikeCount=isNaN(t.basic_info.like_count)?0:t.basic_info.like_count,this.videoDislikeCount=0),this.isLive=!!t.basic_info.is_live,this.isUpcoming=!!t.basic_info.is_upcoming,this.isLiveContent=!!t.basic_info.is_live_content,this.hideChannelSubscriptions)this.channelSubscriptionCountText="";else{const e=yD(t.secondary_info.owner.subscriber_count.text);isNaN(e)?this.channelSubscriptionCountText="":this.channelSubscriptionCountText=e>=1e4?$R(e,{notation:"compact"}):$R(e)}let n=[];if(!this.hideChapters){const e=t.player_overlays?.decorated_player_bar?.player_bar?.markers_map?.get({marker_key:"DESCRIPTION_CHAPTERS"})?.value.chapters;if(e)for(const t of e){const e=t.time_range_start_millis/1e3;n.push({title:t.title.text,timestamp:DR(e),startSeconds:e,endSeconds:0,thumbnail:t.thumbnail[0].url})}else n=this.extractChaptersFromDescription(this.videoDescription);n.length>0&&(this.addChaptersEndSeconds(n,t.basic_info.duration),n.forEach(Object.freeze))}if(this.videoChapters=n,!this.hideLiveChat&&this.isLive&&this.isLiveContent&&t.livechat?this.liveChat=t.getLiveChat():this.liveChat=null,i&&(t=i),this.isLive&&this.isLiveContent&&!this.isUpcoming){try{const e=await async function(t){const e=await fetch(t),i=(await e.text()).split("\n").filter((t=>t)),n=[];let r=0;for(const t of i)if(t.startsWith("#")){if(!t.startsWith("#EXT-X-STREAM-INF:"))continue;const e=t.split(",").find((t=>t.startsWith("RESOLUTION"))).split("x")[1];r=parseInt(e)}else n.push({height:r,url:t.trim()});return n}(t.streaming_data.hls_manifest_url);this.videoSourceList=e.sort(((t,e)=>e.height-t.height)).map((t=>({url:t.url,type:"application/x-mpegURL",label:"Dash",qualityLabel:`${t.height}p`})))}catch(e){console.error("Failed to extract formats form HLS manifest, falling back to passing it directly to video.js",e),this.videoSourceList=[{url:t.streaming_data.hls_manifest_url,type:"application/x-mpegURL",label:"Dash",qualityLabel:"Live"}]}this.showLegacyPlayer=!0,this.showDashPlayer=!1,this.activeFormat="legacy"}else if(this.isUpcoming){const e=t.basic_info.start_timestamp;if(e){const t={month:"long",day:"numeric",hour:"numeric",minute:"2-digit"},i=new Date;i.getFullYear()<e.getFullYear()&&Object.defineProperty(t,"year",{value:"numeric"}),this.upcomingTimestamp=Intl.DateTimeFormat(this.currentLocale,t).format(e);let n=e-i;n=n/1e3/60;let r="minute";n>120&&(n/=60,r="hour"),"hour"===r&&n>24&&(n/=24,r="day"),n=Math.floor(n),this.upcomingTimeLeft=n<1?this.$t("Video.Published.In less than a minute").toLowerCase():new Intl.RelativeTimeFormat(this.currentLocale).format(n,r)}else this.upcomingTimestamp=null,this.upcomingTimeLeft=null}else{if(this.videoLengthSeconds=t.basic_info.duration,!t.streaming_data)return kR(this.$t("This video is unavailable because of missing formats. This can happen due to country unavailability."),7e3),void this.handleVideoEnded();{t.streaming_data.formats.length>0?this.videoSourceList=t.streaming_data.formats.map(fD).reverse():this.videoSourceList=gD(t.streaming_data.adaptive_formats,this.allowDashAv1Formats).map(fD).reverse(),this.adaptiveFormats=this.videoSourceList;const e=[...t.streaming_data.formats,...t.streaming_data.adaptive_formats];if(this.downloadLinks=e.map((t=>{let e=`${t.quality_label??t.bitrate} ${t.fps?`${t.fps}fps`:"kbps"} - ${t.mime_type.match(/.*;/)[0].replace(";","")}`;return t.has_audio!==t.has_video&&(t.has_video?e+=` ${this.$t("Video.video only")}`:e+=` ${this.$t("Video.audio only")}`),{url:t.url,label:e}})),t.captions){const e=t.captions.caption_tracks.map((t=>({url:t.base_url,label:t.name.text,language_code:t.language_code,kind:t.kind})));if(this.currentLocale){const t=!e.some((t=>t.language_code===this.currentLocale&&"asr"!==t.kind));!this.currentLocale.startsWith("en")&&t&&e.forEach((t=>{this.tryAddingTranslatedLocaleCaption(e,this.currentLocale,t.url)}))}this.captionHybridList=this.createCaptionPromiseList(e);const i=e.map((t=>{const e=`${t.label} (${t.language_code}) - text/vtt`;return{url:t.url,label:e}}));this.downloadLinks=this.downloadLinks.concat(i)}}t.streaming_data?.adaptive_formats.length>0?(this.audioSourceList=t.streaming_data.adaptive_formats.filter((t=>t.has_audio)).sort(((t,e)=>t.bitrate-e.bitrate)).map(((t,e)=>({url:t.url,type:t.mime_type,label:"Audio",qualityLabel:(e=>{switch(e){case 0:return this.$t("Video.Audio.Low");case 1:return this.$t("Video.Audio.Medium");case 2:return this.$t("Video.Audio.High");case 3:return this.$t("Video.Audio.Best");default:return t.bitrate}})(e)}))).reverse(),t.streaming_data.adaptive_formats=gD(t.streaming_data.adaptive_formats,this.allowDashAv1Formats),this.adaptiveFormats=t.streaming_data.adaptive_formats.map(fD),this.proxyVideos?this.dashSrc=await this.createInvidiousDashManifest():this.dashSrc=await this.createLocalDashManifest(t),"audio"===this.activeFormat?this.activeSourceList=this.audioSourceList:this.activeSourceList=this.videoSourceList):(this.activeSourceList=this.videoSourceList,this.audioSourceList=null,this.dashSrc=null,this.enableLegacyFormat()),"PlayerStoryboardSpec"===t.storyboards?.type&&await this.createLocalStoryboardUrls(t.storyboards.boards.at(-1))}this.isLoading=!1,this.updateTitle()}catch(t){kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),console.error(t),"local"===this.backendPreference&&this.backendFallback&&!t.toString().includes("private")?(kR(this.$t("Falling back to Invidious API")),this.getVideoInformationInvidious()):this.isLoading=!1}},getVideoInformationInvidious:function(){this.firstLoad&&(this.isLoading=!0),this.dashSrc=this.createInvidiousDashManifest(),this.videoStoryboardSrc=`${this.currentInvidiousInstance}/api/v1/storyboards/${this.videoId}?height=90`,async function(t){return await Bh({resource:"videos",id:t})}(this.videoId).then((t=>{if(t.error)throw new Error(t.error);this.videoTitle=t.title,this.videoViewCount=t.viewCount,this.hideVideoLikesAndDislikes?(this.videoLikeCount=null,this.videoDislikeCount=null):(this.videoLikeCount=t.likeCount,this.videoDislikeCount=t.dislikeCount),this.hideChannelSubscriptions?this.channelSubscriptionCountText="":this.channelSubscriptionCountText=t.subCountText||"FT-0",this.channelId=t.authorId,this.channelName=t.author;const e=t.authorThumbnails[1];switch(this.channelThumbnail=e?Uh(e.url,this.currentInvidiousInstance):"",this.updateSubscriptionDetails({channelThumbnailUrl:e?.url,channelName:t.author,channelId:t.authorId}),this.videoPublished=1e3*t.published,this.videoDescriptionHtml=t.descriptionHtml,this.recommendedVideos=t.recommendedVideos,this.adaptiveFormats=t.adaptiveFormats.map((t=>(t.bitrate=parseInt(t.bitrate),void 0!==t.resolution&&(t.height=parseInt(t.resolution.replace("p",""))),t))),this.isLive=t.liveNow,this.isFamilyFriendly=t.isFamilyFriendly,this.captionHybridList=t.captions.map((t=>(t.url=this.currentInvidiousInstance+t.url,t.type="",t.dataSource="invidious",t))),this.thumbnailPreference){case"start":this.thumbnail=`${this.currentInvidiousInstance}/vi/${this.videoId}/maxres1.jpg`;break;case"middle":this.thumbnail=`${this.currentInvidiousInstance}/vi/${this.videoId}/maxres2.jpg`;break;case"end":this.thumbnail=`${this.currentInvidiousInstance}/vi/${this.videoId}/maxres3.jpg`;break;default:this.thumbnail=this.currentInvidiousInstance+t.videoThumbnails[0].url}let i=[];this.hideChapters||(i=this.extractChaptersFromDescription(t.description),i.length>0&&(this.addChaptersEndSeconds(i,t.lengthSeconds),i.forEach(Object.freeze))),this.videoChapters=i,this.isLive?(this.showLegacyPlayer=!0,this.showDashPlayer=!1,this.activeFormat="legacy",this.videoSourceList=[{url:t.hlsUrl,type:"application/x-mpegURL",label:"Dash",qualityLabel:"Live"}],this.activeSourceList=this.videoSourceList):this.forceLocalBackendForLegacy?this.getLegacyFormats():(this.videoLengthSeconds=t.lengthSeconds,this.videoSourceList=t.formatStreams.reverse(),this.videoSourceList=this.videoSourceList.map((t=>({...t,url:`${this.currentInvidiousInstance}/${t.url.split(".googlevideo.com/")[1]}`}))),this.downloadLinks=t.adaptiveFormats.concat(this.videoSourceList).map((t=>{const e=t.qualityLabel||t.bitrate,i=parseInt(t.itag),n=t.fps?t.fps+"fps":"kbps",r=t.type.match(/.*;/)[0].replace(";","");let s=`${e} ${n} - ${r}`;return 18!==i&&22!==i&&(r.includes("video")?s+=` ${this.$t("Video.video only")}`:s+=` ${this.$t("Video.audio only")}`),{url:t.url,label:s}})).reverse().concat(t.captions.map((t=>{const e=`${t.label} (${t.languageCode}) - text/vtt`;return{url:t.url,label:e}}))),this.audioSourceList=t.adaptiveFormats.filter((t=>t.type.includes("audio"))).map((t=>({url:t.url,type:t.type,label:"Audio",qualityLabel:parseInt(t.bitrate)}))).sort(((t,e)=>t.qualityLabel-e.qualityLabel)),"audio"===this.activeFormat?this.activeSourceList=this.audioSourceList:this.activeSourceList=this.videoSourceList),this.updateTitle(),this.isLoading=!1})).catch((t=>{console.error(t),kR(`${this.$t("Invidious API Error (Click to copy)")}: ${t.responseText}`,1e4,(()=>{CR(t.responseText)})),console.error(t),this.isLoading=!1}))},extractChaptersFromDescription:function(t){const e=[],i=t.matchAll(/^(?<timestamp>((?<hours>\d+):)?(?<minutes>\d+):(?<seconds>\d+))(\s*[-]\s*(?:\d+:){1,2}\d+)?\s+([-]\s*)?(?<title>.+)$/gm);for(const{groups:t}of i){let i=60*Number(t.minutes)+Number(t.seconds);t.hours&&(i+=3600*Number(t.hours)),e.length>0&&e[e.length-1].startSeconds===i&&e.pop(),e.push({title:t.title.trim(),timestamp:t.timestamp,startSeconds:i,endSeconds:0})}return e},addChaptersEndSeconds:function(t,e){for(let e=0;e<t.length-1;e++)t[e].endSeconds=t[e+1].startSeconds;t.at(-1).endSeconds=e},updateCurrentChapter:function(){const t=this.videoChapters,e=this.getTimestamp(),i=t[this.videoCurrentChapterIndex].startSeconds;if(e!==i){let n=e<i?0:this.videoCurrentChapterIndex;for(;n<t.length;n++)if(e<t[n].endSeconds){this.videoCurrentChapterIndex=n;break}}},addToHistory:function(t){const e={videoId:this.videoId,title:this.videoTitle,author:this.channelName,authorId:this.channelId,published:this.videoPublished,description:this.videoDescription,viewCount:this.videoViewCount,lengthSeconds:this.videoLengthSeconds,watchProgress:t,timeWatched:(new Date).getTime(),isLive:!1,paid:!1,type:"video"};this.updateHistory(e)},handleWatchProgress:function(){if(this.rememberHistory&&!this.isUpcoming&&!this.isLoading&&!this.isLive&&null!==this.$refs.videoPlayer.player&&this.saveWatchedProgress){const t=this.getWatchedProgress(),e={videoId:this.videoId,watchProgress:t};this.updateWatchProgress(e)}},handlePlaylistPersisting:function(){if(!this.rememberHistory||!this.saveVideoHistoryWithLastViewedPlaylist)return;if(this.isUpcoming||this.isLive)return;const t={videoId:this.videoId,lastViewedPlaylistId:this.$route.query?.playlistId};this.updateLastViewedPlaylist(t)},checkIfWatched:function(){const t=this.historyCache.findIndex((t=>t.videoId===this.videoId));if(!this.isLive)if(this.timestamp)this.timestamp<0?this.$refs.videoPlayer.player.currentTime(0):this.timestamp>this.videoLengthSeconds-10?this.$refs.videoPlayer.player.currentTime(this.videoLengthSeconds-10):this.$refs.videoPlayer.player.currentTime(this.timestamp);else if(-1!==t){const e=this.historyCache[t].watchProgress;e<this.videoLengthSeconds-10&&this.$refs.videoPlayer.player.currentTime(e)}this.rememberHistory&&(this.timestamp?this.addToHistory(this.timestamp):-1!==t?this.addToHistory(this.historyCache[t].watchProgress):this.addToHistory(0),this.handlePlaylistPersisting())},checkIfPlaylist:function(){void 0!==this.$route.query?(this.playlistId=this.$route.query.playlistId,void 0!==this.playlistId?this.watchingPlaylist=!0:this.watchingPlaylist=!1):this.watchingPlaylist=!1},checkIfTimestamp:function(){if(void 0!==this.$route.query)try{this.timestamp=parseInt(this.$route.query.timestamp)}catch{this.timestamp=null}},getLegacyFormats:function(){rD(this.videoId).then((t=>{this.videoSourceList=t.streaming_data.formats.map(fD)})).catch((t=>{kR(`${this.$t("Local API Error (Click to copy)")}: ${t}`,1e4,(()=>{CR(t)})),console.error(t),kR(this.$t("Falling back to Invidious API")),this.getVideoInformationInvidious()}))},enableDashFormat:function(){if("dash"===this.activeFormat||this.isLive)return;if(null===this.dashSrc)return void kR(this.$t("Change Format.Dash formats are not available for this video"));const t=this.getWatchedProgress();this.activeFormat="dash",this.hidePlayer=!0,setTimeout((()=>{this.hidePlayer=!1,setTimeout((()=>{const e=this.$refs.videoPlayer.player;null!==e&&e.currentTime(t)}),500)}),100)},enableLegacyFormat:function(){if("legacy"===this.activeFormat)return;const t=this.getWatchedProgress();this.activeFormat="legacy",this.videoSourceList=this.videoSourceList.map((t=>-1===t.url.indexOf(".googlevideo.com/")?t:{...t,url:`${this.currentInvidiousInstance}/${t.url.split(".googlevideo.com/")[1]}`})),this.activeSourceList=this.videoSourceList,this.hidePlayer=!0,setTimeout((()=>{this.hidePlayer=!1,setTimeout((()=>{const e=this.$refs.videoPlayer.player;null!==e&&e.currentTime(t)}),500)}),100)},enableAudioFormat:function(){if("audio"===this.activeFormat)return;if(null===this.audioSourceList)return void kR(this.$t("Change Format.Audio formats are not available for this video"));const t=this.getWatchedProgress();this.activeFormat="audio",this.activeSourceList=this.audioSourceList,this.hidePlayer=!0,setTimeout((()=>{this.hidePlayer=!1,setTimeout((()=>{const e=this.$refs.videoPlayer.player;null!==e&&e.currentTime(t)}),500)}),100)},handleVideoEnded:function(){if(!(this.watchingPlaylist&&this.autoplayPlaylists||this.playNextVideo))return;const t=this.defaultInterval;this.playNextTimeout=setTimeout((()=>{const t=this.$refs.videoPlayer.player;if(null!==t&&t.paused())if(this.watchingPlaylist)this.$refs.watchVideoPlaylist.playNextVideo();else{const t=this.recommendedVideos[0].videoId;this.$router.push({path:`/watch/${t}`}),kR(this.$t("Playing Next Video"))}}),1e3*t);let e=t;const i=()=>{e<=0?clearInterval(this.playNextCountDownIntervalId):(kR(this.$tc("Playing Next Video Interval",e,{nextVideoInterval:e}),700,(()=>{clearTimeout(this.playNextTimeout),clearInterval(this.playNextCountDownIntervalId),kR(this.$t("Canceled next video autoplay"))})),e-=1)};i(),this.playNextCountDownIntervalId=setInterval(i,1e3)},handleRouteChange:async function(t){if(gR.env.IS_CORDOVA&&Gc().destroy(),clearTimeout(this.playNextTimeout),clearInterval(this.playNextCountDownIntervalId),this.videoChapters=[],this.handleWatchProgress(),!this.isUpcoming&&!this.isLoading){const e=this.$refs.videoPlayer.player;null!==e&&!e.paused()&&e.isInPictureInPicture()&&setTimeout((()=>{e.play(),e.on("leavepictureinpicture",(i=>{const n=e.currentTime();this.$route.fullPath.includes("/watch")&&this.$route.params.id===t&&(this.$refs.videoPlayer.$refs.video.currentTime=n),e.pause(),e.dispose()}))}),200)}},handleVideoError:function(t){console.error(t),this.isLive||4===t.code&&("dash"===this.activeFormat?(console.warn("Unable to play dash formats.  Reverting to legacy formats..."),this.enableLegacyFormat()):this.enableDashFormat())},createLocalDashManifest:async function(t){return t.toDash(),await RR(),[{url:void 0,type:"application/dash+xml",label:"Dash",qualityLabel:"Auto"}]},createInvidiousDashManifest:function(){let t=`${this.currentInvidiousInstance}/api/manifest/dash/id/${this.videoId}`;return t+="?local=true",[{url:t,type:"application/dash+xml",label:"Dash",qualityLabel:"Auto"}]},createLocalStoryboardUrls:async function(t){(function(t,e){let i="WEBVTT\n\n";const n=t.columns*t.rows,r=Math.ceil(t.thumbnail_count/n);let s;s=t.interval>0?t.interval/1e3:e/(r*n);let a=0,o=0,l=0,c=0,u=0,h=s;for(let e=0;e<r;e++){const r=t.template_url.replace("$M.jpg",`${e}.jpg`);let d=0,p=0;for(let e=0;e<n;e++)i+=`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${l.toFixed(3).padStart(6,"0")} --\x3e ${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${h.toFixed(3).padStart(6,"0")}\n`,i+=`${r}#xywh=${d},${p},${t.thumbnail_width},${t.thumbnail_height}\n\n`,a=c,o=u,l=h,h+=s,h>=60&&(h-=60,u+=1),u>=60&&(u-=60,c+=1),d=(d+t.thumbnail_width)%(t.thumbnail_width*t.columns),0===d&&(p+=t.thumbnail_height)}})(t,this.videoLengthSeconds),await RR(),this.videoStoryboardSrc=void 0},tryAddingTranslatedLocaleCaption:function(t,e,i){const n=t.findIndex((t=>"en"===t.language_code&&"asr"!==t.kind)),r=-1!==n,s=t.some((t=>"asr"===t.kind));if(r||s){let s,a;if(s=this.$te("Video.translated from English")&&""!==this.$t("Video.translated from English")?`${this.$t("Locale Name")} (${this.$t("Video.translated from English")})`:`${this.$t("Locale Name")} (translated from English)`,-1!==t.findIndex((t=>t.label===s)))return;r?a=new URL(t[n].url):(a=new URL(i),a.searchParams.set("lang","en"),a.searchParams.set("kind","asr")),a.searchParams.set("tlang",e),t.unshift({url:a.toString(),label:s,language_code:e})}},createCaptionPromiseList:function(t){return t.map((t=>new Promise(((e,i)=>{t.type="text/vtt",t.charset="charset=utf-8",t.dataSource="local";const n=new URL(t.url);n.searchParams.set("fmt","vtt"),fetch(n).then((t=>t.text())).then((i=>{let n=i.replaceAll("#","%23");n="asr"===t.kind?n.replaceAll(/ align:start| position:\d{1,3}%/g,""):n.replaceAll(/ position:\d{1,3}%/g,""),t.url=`data:${t.type};${t.charset},${n}`,e(t)})).catch((t=>{console.error(t),i(t)}))}))))},pausePlayer:function(){const t=this.$refs.videoPlayer.player;t&&!t.paused()&&t.pause()},getWatchedProgress:function(){return this.$refs.videoPlayer&&this.$refs.videoPlayer.player?this.$refs.videoPlayer.player.currentTime():0},getTimestamp:function(){return Math.floor(this.getWatchedProgress())},getPlaylistIndex:function(){return this.$refs.watchVideoPlaylist?this.getPlaylistReverse()?this.$refs.watchVideoPlaylist.playlistItems.length-this.$refs.watchVideoPlaylist.currentVideoIndex:this.$refs.watchVideoPlaylist.currentVideoIndex-1:-1},getPlaylistReverse:function(){return!!this.$refs.watchVideoPlaylist&&this.$refs.watchVideoPlaylist.reversePlaylist},getPlaylistShuffle:function(){return!!this.$refs.watchVideoPlaylist&&this.$refs.watchVideoPlaylist.shuffleEnabled},getPlaylistLoop:function(){return!!this.$refs.watchVideoPlaylist&&this.$refs.watchVideoPlaylist.loopEnabled},updateTitle:function(){document.title=`${this.videoTitle} - Youtubub`},...Is(["updateHistory","updateWatchProgress","updateLastViewedPlaylist","updateSubscriptionDetails"])}},vR=Ks(yR,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"videoLayout",class:{isLoading:t.isLoading,useTheatreMode:t.useTheatreMode,noSidebar:!t.theatrePossible}},[t.isLoading?e("ft-loader",{attrs:{fullscreen:!0}}):t._e(),t.isFamilyFriendly||!t.showFamilyFriendlyOnly?e("div",{staticClass:"videoArea"},[e("div",{staticClass:"videoAreaMargin"},[t.isLoading||t.hidePlayer||t.isUpcoming?t._e():e("ft-video-player",t._g({ref:"videoPlayer",staticClass:"videoPlayer",class:{theatrePlayer:t.useTheatreMode},attrs:{"dash-src":t.dashSrc,"source-list":t.activeSourceList,"adaptive-formats":t.adaptiveFormats,"caption-hybrid-list":t.captionHybridList,"storyboard-src":t.videoStoryboardSrc,format:t.activeFormat,thumbnail:t.thumbnail,"video-id":t.videoId,"length-seconds":t.videoLengthSeconds,chapters:t.videoChapters},on:{ready:t.checkIfWatched,ended:t.handleVideoEnded,error:t.handleVideoError,"store-caption-list":function(e){t.captionHybridList=e}}},!t.hideChapters&&t.videoChapters.length>0?{timeupdate:t.updateCurrentChapter}:{})),!t.isLoading&&t.isUpcoming?e("div",{staticClass:"videoPlayer"},[e("img",{staticClass:"upcomingThumbnail",attrs:{src:t.thumbnail,alt:""}}),e("div",{staticClass:"premiereDate"},[e("font-awesome-icon",{staticClass:"premiereIcon",attrs:{icon:["fas","satellite-dish"]}}),null!==t.upcomingTimestamp?e("p",{staticClass:"premiereText"},[e("span",{staticClass:"premiereTextTimeLeft"},[t._v(" "+t._s(t.$t("Video.Premieres"))+" "+t._s(t.upcomingTimeLeft)+" ")]),e("br"),e("span",{staticClass:"premiereTextTimestamp"},[t._v(" "+t._s(t.upcomingTimestamp)+" ")])]):e("p",{staticClass:"premiereText"},[t._v(" "+t._s(t.$t("Video.Starting soon, please refresh the page to check again"))+" ")])],1)]):t._e()],1)]):t._e(),t.isLoading||t.isFamilyFriendly||!t.showFamilyFriendlyOnly?t._e():e("ft-age-restricted",{staticClass:"ageRestricted",attrs:{"content-type-string":"Video"}}),t.isFamilyFriendly||!t.showFamilyFriendlyOnly?e("div",{ref:"infoArea",staticClass:"infoArea",class:{infoAreaSticky:t.infoAreaSticky}},[t.isLoading?t._e():e("watch-video-info",{staticClass:"watchVideo",class:{theatreWatchVideo:t.useTheatreMode},attrs:{id:t.videoId,title:t.videoTitle,"channel-id":t.channelId,"channel-name":t.channelName,"channel-thumbnail":t.channelThumbnail,published:t.videoPublished,"subscription-count-text":t.channelSubscriptionCountText,"like-count":t.videoLikeCount,"dislike-count":t.videoDislikeCount,"view-count":t.videoViewCount,"get-timestamp":t.getTimestamp,"is-live-content":t.isLiveContent,"is-live":t.isLive,"is-upcoming":t.isUpcoming,"download-links":t.downloadLinks,"playlist-id":t.playlistId,"watching-playlist":t.watchingPlaylist,"get-playlist-index":t.getPlaylistIndex,"get-playlist-reverse":t.getPlaylistReverse,"get-playlist-shuffle":t.getPlaylistShuffle,"get-playlist-loop":t.getPlaylistLoop,"theatre-possible":t.theatrePossible,"length-seconds":t.videoLengthSeconds,"video-thumbnail":t.thumbnail},on:{"pause-player":t.pausePlayer}}),!t.hideChapters&&!t.isLoading&&t.videoChapters.length>0?e("watch-video-chapters",{staticClass:"watchVideo",class:{theatreWatchVideo:t.useTheatreMode},attrs:{chapters:t.videoChapters,"current-chapter-index":t.videoCurrentChapterIndex},on:{"timestamp-event":t.changeTimestamp}}):t._e(),t.isLoading||t.hideVideoDescription?t._e():e("watch-video-description",{staticClass:"watchVideo",class:{theatreWatchVideo:t.useTheatreMode},attrs:{published:t.videoPublished,description:t.videoDescription,"description-html":t.videoDescriptionHtml},on:{"timestamp-event":t.changeTimestamp}}),t.isLoading||t.isLive||t.hideComments?t._e():e("watch-video-comments",{staticClass:"watchVideo",class:{theatreWatchVideo:t.useTheatreMode},attrs:{id:t.videoId,"channel-thumbnail":t.channelThumbnail,"channel-name":t.channelName},on:{"timestamp-event":t.changeTimestamp}})],1):t._e(),t.isFamilyFriendly||!t.showFamilyFriendlyOnly?e("div",{staticClass:"sidebarArea"},[t.isLoading||t.hideLiveChat||!t.isLive?t._e():e("watch-video-live-chat",{staticClass:"watchVideoSideBar watchVideoPlaylist",class:{theatrePlaylist:t.useTheatreMode},attrs:{"live-chat":t.liveChat,"video-id":t.videoId,"channel-id":t.channelId}}),t.watchingPlaylist?e("watch-video-playlist",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],ref:"watchVideoPlaylist",staticClass:"watchVideoSideBar watchVideoPlaylist",class:{theatrePlaylist:t.useTheatreMode},attrs:{"playlist-id":t.playlistId,"video-id":t.videoId},on:{"pause-player":t.pausePlayer}}):t._e(),t.isLoading?t._e():e("watch-video-recommendations",{staticClass:"watchVideoSideBar watchVideoRecommendations",class:{theatreRecommendations:t.useTheatreMode,watchVideoRecommendationsLowerCard:t.watchingPlaylist||t.isLive,watchVideoRecommendationsNoCard:!t.watchingPlaylist||!t.isLive},attrs:{"show-autoplay":!t.watchingPlaylist,data:t.recommendedVideos}})],1):t._e()],1)}),[],!1,null,"239f682a",null).exports;class bR extends hc{push(t){const e=new URLSearchParams(_R.currentRoute.query);let i="",n=new URLSearchParams;if("string"==typeof t)if(t.includes("?")){const e=t.split("?");i=e[0],n=new URLSearchParams(e[1])}else i=t;else i=t.path,n=new URLSearchParams(t.query);const r=_R.currentRoute.path!==i,s=n.toString()!==e.toString();if(r||s)return super.push(t)}}Wi.use(bR);const _R=new bR({routes:[{path:"/",meta:{title:"Trending.Trending"},component:FD},{path:"/subscriptions",meta:{title:"Subscriptions.Subscriptions"},component:wD},{path:"/subscribedchannels",meta:{title:"Channels.Title"},component:SD},{path:"/settings/profile",meta:{title:"Profile.Profile Settings"},component:CD},{path:"/settings/profile/new",name:"newProfile",meta:{title:"Profile.Create New Profile"},component:ND},{path:"/settings/profile/edit/:id",name:"editProfile",meta:{title:"Profile.Edit Profile"},component:ND},{path:"/trending",meta:{title:"Trending.Trending"},component:FD},{path:"/popular",meta:{title:"Most Popular"},component:$D},{path:"/userplaylists",meta:{title:"User Playlists.Your Playlists"},component:UD},{path:"/history",name:"history",meta:{title:"History.History"},component:jD},{path:"/settings",meta:{title:"Settings.Settings"},component:gM},{path:"/about",meta:{title:"About.About"},component:vM},{path:"/search/:query",meta:{title:"Search Filters.Search Results"},component:_M},{path:"/playlist/:id",meta:{title:"Playlist.Playlist"},component:CM},{path:"/channel/:id/:currentTab?",meta:{title:"Channel"},component:LM},{path:"/watch/:id",meta:{title:"Watch"},component:vR}],scrollBehavior:(t,e,i)=>new Promise(((t,e)=>{setTimeout((()=>{t(null!==i?i:{x:0,y:0})}),500)}))}),wR=_R;var TR=i(34155);const SR=/^@[\w.-]{3,30}$/;function xR({publishText:t,isLive:e=!1,isUpcoming:i=!1,isRSS:n=!1}){if(e)return"0"+xo.t("Video.Watching");if(i||null===t)return`${xo.t("Video.Published.Upcoming")}: ${t}`;if(n)return t;const r=t.split(" ");"streamed"===r[0].toLowerCase()&&r.shift();const s="1"===r[0];let a="";switch(r[1].substring(0,2)){case"se":a="Video.Published.Second";break;case"mi":a="Video.Published.Minute";break;case"ho":a="Video.Published.Hour";break;case"da":a="Video.Published.Day";break;case"we":a="Video.Published.Week";break;case"mo":a="Video.Published.Month";break;case"ye":a="Video.Published.Year";break;default:return t}s||(a+="s");const o=xo.t(a);return xo.t("Video.Publicationtemplate",{number:r[0],unit:o})}function kR(t,e=null,i=null){Ta.$emit("toast-open",t,e,i)}async function CR(t,{messageOnSuccess:e=null,messageOnError:i=null}){let n=navigator.clipboard.writeText.bind(navigator.clipboard);if(TR.env.IS_CORDOVA&&(n=t=>new Promise(((e,i)=>{Gc().plugins.clipboard.copy(t,e,i)}))),void 0!==n&&window.isSecureContext)try{await n(t),null!==e&&kR(e)}catch(e){console.error(`Failed to copy ${t} to clipboard`,e),kR(null!==i?`${i}: ${e}`:`${xo.t("Clipboard.Copy failed")}: ${e}`,5e3)}else kR(xo.t("Clipboard.Cannot access clipboard without a secure connection"),5e3)}function ER(t){window.open(t,"_blank")}function IR({path:t,query:e={},doCreateNewWindow:i,searchQueryText:n=null}){wR.push({path:t,query:e})}async function PR(t){return await new Promise((e=>{const i=document.createElement("input");i.setAttribute("type","file"),TR.env.IS_CORDOVA||void 0!==t?.filters[0]?.extensions&&i.setAttribute("accept",t.filters[0].extensions.map((t=>`.${t}`)).join(", ")),i.onchange=()=>{const t=Array.from(i.files);e({canceled:!1,files:t,filePaths:t.map((({name:t})=>t))}),delete i.onchange};const n=()=>{window.removeEventListener("focus",n),setTimeout((()=>{0===i.files.length&&"function"==typeof i.onchange&&(e({canceled:!0}),delete i.onchange)}),1e3)};window.addEventListener("focus",n),i.click()}))}function AR(t,e=0){return new Promise(((i,n)=>{try{const n=new FileReader;n.onload=function(t){i(t.currentTarget.result)},n.readAsText(t.files[e])}catch(t){n(t)}}))}async function LR(t){if("showSaveFilePicker"in window){const e=t.defaultPath.split("/");return{canceled:!1,handle:await window.showSaveFilePicker({suggestedName:e[e.length-1],types:t.filters[0]?.extensions?.map((t=>({accept:{"application/octet-stream":"."+t}})))})}}return{canceled:!1,filePath:t.defaultPath}}function OR(t){const e=new URL(window.location.href),{origin:i}=e;let n=e.pathname;return n.endsWith(".html")&&(n=n.replace(/[^./]*\.html$/,"")),t.startsWith("/")&&(t=t.substring(1,t.length)),n.endsWith("/")&&(n=n.substring(0,n.length-1)),`${i}${n}/${t}`}function DR(t){if("string"==typeof t)return t;if(0===t)return"0:00";let e=0;t>=3600&&(e=Math.floor(t/3600),t-=3600*e);let i=Math.floor(t/60);i<10&&e>0&&(i="0"+i);let n=t-60*i;n<10&&(n="0"+n);let r="";return r=e>0?e+":"+i+":"+n:i+":"+n,r}function MR(t,e){return t?.sortBy===e?.sortBy&&t?.time===e?.time&&t?.type===e?.type&&t?.duration===e?.duration}async function RR(){return null}async function NR(){return null}function BR(t){return"string"==typeof t?parseInt(t.replaceAll(/\D+/g,"")):NaN}function FR(t,e){const i=xo.t(`Video.External Player.Unsupported Actions.${e}`);kR(xo.t("Video.External Player.UnsupportedActionTemplate",{externalPlayer:t,action:i}))}function $R(t,e=undefined){return Intl.NumberFormat([xo.locale.replace("_","-"),"en"],e).format(t)}function UR(t){return null==t||""===t}function jR(){const t=new Date;return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T")[0]}var VR=Ks({name:"FtProfileSelector",components:{"ft-card":na,"ft-icon-button":ha},data:function(){return{profileListShown:!1,mouseDownOnIcon:!1}},computed:{profileList:function(){return this.$store.getters.getProfileList},activeProfile:function(){return this.$store.getters.getActiveProfile},defaultProfile:function(){return this.$store.getters.getDefaultProfile},activeProfileInitial:function(){return this.activeProfile?.name?.length>0?Array.from(this.activeProfile.name)[0].toUpperCase():""},profileInitials:function(){return this.profileList.map((t=>t?.name?.length>0?Array.from(t.name)[0].toUpperCase():""))}},methods:{toggleProfileList:function(){this.profileListShown=!this.profileListShown,this.profileListShown&&setTimeout((()=>{this.$refs.profileList.$el.focus()}))},openProfileSettings:function(){this.$router.push({path:"/settings/profile/"}),this.profileListShown=!1},handleIconMouseDown:function(){this.profileListShown&&(this.mouseDownOnIcon=!0)},handleProfileListFocusOut:function(){this.mouseDownOnIcon?this.mouseDownOnIcon=!1:this.$refs.profileList.$el.matches(":focus-within")||(this.profileListShown=!1)},setActiveProfile:function(t){if(this.activeProfile._id!==t._id){const e=this.profileList.find((e=>e._id===t._id));e&&(this.updateActiveProfile(e._id),kR(this.$t("Profile.{profile} is now the active profile",{profile:t.name})))}this.profileListShown=!1},...Is(["updateActiveProfile"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("div",{staticClass:"colorOption",style:{background:t.activeProfile.bgColor,color:t.activeProfile.textColor},on:{click:t.toggleProfileList,mousedown:t.handleIconMouseDown}},[e("div",{staticClass:"initial"},[t._v(" "+t._s(t.activeProfileInitial)+" ")])]),e("ft-card",{directives:[{name:"show",rawName:"v-show",value:t.profileListShown,expression:"profileListShown"}],ref:"profileList",staticClass:"profileList",attrs:{tabindex:"-1"},on:{focusout:t.handleProfileListFocusOut}},[e("h3",{staticClass:"profileListTitle"},[t._v(" "+t._s(t.$t("Profile.Profile Select"))+" ")]),e("ft-icon-button",{staticClass:"profileSettings",attrs:{icon:["fas","sliders-h"]},on:{click:t.openProfileSettings}}),e("div",{staticClass:"profileWrapper"},t._l(t.profileList,(function(i,n){return e("div",{key:n,staticClass:"profile",on:{click:function(e){return t.setActiveProfile(i)}}},[e("div",{staticClass:"colorOption",style:{background:i.bgColor,color:i.textColor}},[e("div",{staticClass:"initial"},[t._v(" "+t._s(t.profileInitials[n])+" ")])]),e("p",{staticClass:"profileName"},[t._v(" "+t._s(i.name)+" ")])])})),0)],1)],1)}),[],!1,null,"fca69278",null);const HR=Ks({name:"TopNav",components:{FtInput:ta,FtSearchFilters:ia,FtProfileSelector:VR.exports},data:()=>({component:void 0,showSearchContainer:!0,showFilters:!1,searchFilterValueChanged:!1,historyIndex:1,isForwardOrBack:!1,searchSuggestionsDataList:[],lastSuggestionQuery:""}),computed:{hideSearchBar:function(){return this.$store.getters.getHideSearchBar},hideHeaderLogo:function(){return this.$store.getters.getHideHeaderLogo},enableSearchSuggestions:function(){return this.$store.getters.getEnableSearchSuggestions},searchInput:function(){return this.$refs.searchInput.$refs.input},searchSettings:function(){return this.$store.getters.getSearchSettings},barColor:function(){return this.$store.getters.getBarColor},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},backendFallback:function(){return this.$store.getters.getBackendFallback},backendPreference:function(){return this.$store.getters.getBackendPreference},expandSideBar:function(){return this.$store.getters.getExpandSideBar},forwardText:function(){return this.$t("Forward")},backwardText:function(){return this.$t("Back")},newWindowText:function(){return this.$t("Open New Window")}},mounted:function(){let t=window.innerWidth;window.innerWidth<=680&&(this.showSearchContainer=!1),setTimeout((()=>{this.expandSideBar&&this.toggleSideNav()}),0),window.addEventListener("resize",(()=>{t!==window.innerWidth&&(this.showSearchContainer=window.innerWidth>680,t=window.innerWidth)})),this.debounceSearchResults=WD()(this.getSearchSuggestions,200)},methods:{goToSearch:async function(t,{event:e}){const i=e&&e.shiftKey;window.innerWidth<=680?(this.$refs.searchContainer.blur(),this.showSearchContainer=!1):this.searchInput.blur(),iD=null,this.getYoutubeUrlInfo(t).then((e=>{switch(e.urlType){case"video":{const{videoId:t,timestamp:n,playlistId:r}=e,s={};n&&(s.timestamp=n),r&&r.length>0&&(s.playlistId=r),IR({path:`/watch/${t}`,query:s,doCreateNewWindow:i});break}case"playlist":{const{playlistId:t,query:n}=e;IR({path:`/playlist/${t}`,query:n,doCreateNewWindow:i});break}case"search":{const{searchQuery:t,query:n}=e;IR({path:`/search/${encodeURIComponent(t)}`,query:n,doCreateNewWindow:i,searchQueryText:t});break}case"hashtag":{let t="Hashtags have not yet been implemented, try again later";this.$t(t)&&""!==this.$t(t)&&(t=this.$t(t)),kR(t);break}case"channel":{const{channelId:t,subPath:n,url:r}=e;IR({path:`/channel/${t}/${n}`,doCreateNewWindow:i,query:{url:r}});break}default:IR({path:`/search/${encodeURIComponent(t)}`,query:{sortBy:this.searchSettings.sortBy,time:this.searchSettings.time,type:this.searchSettings.type,duration:this.searchSettings.duration},doCreateNewWindow:i,searchQueryText:t})}})),this.showFilters=!1},focusSearch:function(){this.hideSearchBar||this.searchInput.focus()},getSearchSuggestionsDebounce:function(t){if(this.enableSearchSuggestions){const e=t.trim();e!==this.lastSuggestionQuery&&(this.lastSuggestionQuery=e,this.debounceSearchResults(e))}},getSearchSuggestions:function(t){switch(this.backendPreference){case"local":this.getSearchSuggestionsLocal(t);break;case"invidious":this.getSearchSuggestionsInvidious(t)}},getSearchSuggestionsLocal:function(t){""!==t?async function(t){return null===iD&&(iD=await eD()),await iD.getSearchSuggestions(t)}(t).then((t=>{this.searchSuggestionsDataList=t})):this.searchSuggestionsDataList=[]},getSearchSuggestionsInvidious:function(t){""!==t?Bh({resource:"search/suggestions",id:"",params:{q:t}}).then((t=>{this.searchSuggestionsDataList=t.suggestions})).catch((t=>{console.error(t)})):this.searchSuggestionsDataList=[]},toggleSearchContainer:function(){this.showSearchContainer=!this.showSearchContainer,this.showFilters=!1},handleSearchFilterValueChanged:function(t){this.searchFilterValueChanged=t},navigateHistory:function(){this.isForwardOrBack?this.isForwardOrBack=!1:(this.historyIndex=window.history.length,this.$refs.historyArrowBack.classList.remove("fa-arrow-left"),this.$refs.historyArrowForward.classList.add("fa-arrow-right"))},historyBack:function(){this.isForwardOrBack=!0,window.history.back(),this.historyIndex>1&&(this.historyIndex--,this.$refs.historyArrowForward.classList.remove("fa-arrow-right"),1===this.historyIndex&&this.$refs.historyArrowBack.classList.add("fa-arrow-left"))},historyForward:function(){this.isForwardOrBack=!0,window.history.forward(),this.historyIndex<window.history.length&&(this.historyIndex++,this.$refs.historyArrowBack.classList.remove("fa-arrow-left"),this.historyIndex===window.history.length&&this.$refs.historyArrowForward.classList.add("fa-arrow-right"))},toggleSideNav:function(){this.$store.commit("toggleSideNav")},createNewWindow:function(){},navigate:function(t){this.$router.push("/"+t)},hideFilters:function(){this.showFilters=!1},updateSearchInputText:function(t){this.$refs.searchInput.updateInputData(t)},...Is(["getYoutubeUrlInfo"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"topNav",class:{topNavBarColor:t.barColor}},[e("div",{staticClass:"side"},[e("font-awesome-icon",{staticClass:"menuIcon navIcon",attrs:{icon:["fas","bars"],role:"button",tabindex:"0"},on:{click:t.toggleSideNav,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleSideNav.apply(null,arguments))}}}),e("font-awesome-icon",{ref:"historyArrowBack",staticClass:"navBackIcon navIcon fa-arrow-left",attrs:{icon:["fas","arrow-left"],role:"button",tabindex:"0",title:t.backwardText},on:{click:t.historyBack,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.historyBack.apply(null,arguments))}}}),e("font-awesome-icon",{ref:"historyArrowForward",staticClass:"navForwardIcon navIcon fa-arrow-right",attrs:{icon:["fas","arrow-right"],role:"button",tabindex:"0",title:t.forwardText},on:{click:t.historyForward,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.historyForward.apply(null,arguments))}}}),t.hideSearchBar?t._e():e("font-awesome-icon",{staticClass:"navSearchIcon navIcon",attrs:{icon:["fas","search"],role:"button",tabindex:"0"},on:{click:t.toggleSearchContainer,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleSearchContainer.apply(null,arguments))}}}),t.hideHeaderLogo?t._e():e("div",{staticClass:"logo",attrs:{role:"link",tabindex:"0",title:t.$t("Subscriptions.Subscriptions")},on:{click:function(e){return t.navigate("")},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.navigate("subscriptions"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.navigate("subscriptions"))}]}},[e("div",{staticClass:"logoIcon"}),e("div",{staticClass:"logoText"})]),t._m(0)],1),e("div",{staticClass:"middle"},[t.hideSearchBar?t._e():e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSearchContainer,expression:"showSearchContainer"}],ref:"searchContainer",staticClass:"searchContainer"},[e("ft-input",{ref:"searchInput",staticClass:"searchInput",attrs:{placeholder:t.$t("Search / Go to URL"),"is-search":!0,"data-list":t.searchSuggestionsDataList,spellcheck:!1,"show-clear-text-button":!0},on:{input:t.getSearchSuggestionsDebounce,click:t.goToSearch}}),e("font-awesome-icon",{staticClass:"navFilterIcon navIcon",class:{filterChanged:t.searchFilterValueChanged},attrs:{icon:["fas","filter"],role:"button",tabindex:"0"},on:{click:function(e){t.showFilters=!t.showFilters},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.showFilters=!t.showFilters}}})],1),t.hideSearchBar?t._e():e("ft-search-filters",{directives:[{name:"show",rawName:"v-show",value:t.showFilters,expression:"showFilters"}],staticClass:"searchFilters",on:{filterValueUpdated:t.handleSearchFilterValueChanged}})],1),e("ft-profile-selector",{staticClass:"side profiles"})],1)}),[function(){var t=this,e=t._self._c;return t._self._setupProxy,e("span",{staticClass:"slogan"},[t._v("No "),e("span",{staticClass:"high-line"},[t._v("Ads.")]),t._v(" And "),e("span",{staticClass:"high-line"},[t._v("More")]),t._v(".")])}],!1,null,"2c8a5041",null).exports;var qR=Ks({name:"SideNav",data:function(){return{openMoreOptions:!1}},computed:{backendFallback:function(){return this.$store.getters.getBackendFallback},backendPreference:function(){return this.$store.getters.getBackendPreference},hidePopularVideos:function(){return this.$store.getters.getHidePopularVideos},hideTrendingVideos:function(){return this.$store.getters.getHideTrendingVideos},hideLabelsSideBar:function(){return this.$store.getters.getHideLabelsSideBar},applyNavIconExpand:function(){return{navIconExpand:this.hideLabelsSideBar}}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"sideNavMoreOptions"},[e("div",{staticClass:"navOption moreOptionNav",attrs:{tabindex:"0",role:"button","aria-labelledby":"moreNavLabel",title:t.$t("More")},on:{click:function(e){t.openMoreOptions=!t.openMoreOptions},keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault(),t.openMoreOptions=!t.openMoreOptions},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.openMoreOptions=!t.openMoreOptions}]}},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","ellipsis-h"]}}),t.hideLabelsSideBar?t._e():e("p",{staticClass:"navLabel",attrs:{id:"moreNavLabel"}},[t._v(" "+t._s(t.$t("More"))+" ")])],1),t.openMoreOptions?e("div",{staticClass:"moreOptionContainer"},[e("router-link",{staticClass:"navOption mobileHidden",attrs:{title:t.$t("Channels.Channels"),"aria-label":t.hideLabelsSideBar?t.$t("Channels.Channels"):null,to:"/subscribedchannels"}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","list"],"fixed-width":""}})],1),e("p",{staticClass:"navLabel",attrs:{id:"channelLabel"}},[t._v(" "+t._s(t.$t("Channels.Channels"))+" ")])]),t.hideTrendingVideos?t._e():e("router-link",{staticClass:"navOption",attrs:{title:t.$t("Trending.Trending"),"aria-label":t.hideLabelsSideBar?t.$t("Trending.Trending"):null,to:"/trending"}},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","fire"]}}),t.hideLabelsSideBar?t._e():e("p",{staticClass:"navLabel",attrs:{id:"trendingNavLabel"}},[t._v(" "+t._s(t.$t("Trending.Trending"))+" ")])],1),t.hidePopularVideos||!t.backendFallback&&"invidious"!==t.backendPreference?t._e():e("router-link",{staticClass:"navOption",attrs:{title:t.$t("Most Popular"),"aria-label":t.hideLabelsSideBar?t.$t("Most Popular"):null,to:"/popular"}},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","users"]}}),t.hideLabelsSideBar?t._e():e("p",{staticClass:"navLabel",attrs:{id:"mostPopularNavLabel"}},[t._v(" "+t._s(t.$t("Most Popular"))+" ")])],1)],1):t._e(),e("router-link",{staticClass:"navOption mobileShow",attrs:{title:t.$t("History.History"),"aria-label":t.hideLabelsSideBar?t.$t("History.History"):null,to:"/history"}},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","history"]}}),e("p",{staticClass:"navLabel",attrs:{id:"historyNavLabel"}},[t._v(" "+t._s(t.$t("History.History"))+" ")])],1),e("hr"),e("router-link",{staticClass:"navOption mobileShow",attrs:{title:t.$t("Settings.Settings"),"aria-label":t.hideLabelsSideBar?t.$t("Settings.Settings"):null,to:"/settings"}},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","sliders-h"]}}),e("p",{staticClass:"navLabel",attrs:{id:"settingsNavLabel"}},[t._v(" "+t._s(t.$t("Settings.Settings"))+" ")])],1)],1)}),[],!1,null,"3701b8c9",null),WR=Ks({name:"SideNav",components:{"ft-flex-box":Ys,"side-nav-more-options":qR.exports},computed:{isOpen:function(){return this.$store.getters.getIsSideNavOpen},backendFallback:function(){return this.$store.getters.getBackendFallback},backendPreference:function(){return this.$store.getters.getBackendPreference},currentInvidiousInstance:function(){return this.$store.getters.getCurrentInvidiousInstance},profileList:function(){return this.$store.getters.getProfileList},activeProfile:function(){return this.$store.getters.getActiveProfile},activeSubscriptions:function(){return JSON.parse(JSON.stringify(this.activeProfile)).subscriptions.sort(((t,e)=>{const i=t.name.toLowerCase(),n=e.name.toLowerCase();return i<n?-1:i>n?1:0})).map((t=>("invidious"===this.backendPreference&&(t.thumbnail=Uh(t.thumbnail,this.currentInvidiousInstance)),t)))},hidePopularVideos:function(){return this.$store.getters.getHidePopularVideos},hidePlaylists:function(){return this.$store.getters.getHidePlaylists},hideTrendingVideos:function(){return this.$store.getters.getHideTrendingVideos},hideActiveSubscriptions:function(){return this.$store.getters.getHideActiveSubscriptions},hideLabelsSideBar:function(){return this.$store.getters.getHideLabelsSideBar},hideText:function(){return!this.isOpen&&this.hideLabelsSideBar},applyNavIconExpand:function(){return{navIconExpand:this.hideText}},applyHiddenLabels:function(){return{hiddenLabels:this.hideText}}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("ft-flex-box",{ref:"sideNav",staticClass:"sideNav",class:[{closed:!t.isOpen},t.applyHiddenLabels]},[e("div",{staticClass:"inner",class:t.applyHiddenLabels},[t.hideTrendingVideos?t._e():e("router-link",{staticClass:"navOption mobileHidden",attrs:{role:"button",to:"/trending",title:t.$t("Trending.Trending")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","fire"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("Trending.Trending"))+" ")])]),e("router-link",{staticClass:"navOption topNavOption mobileShow",attrs:{role:"button",to:"/subscriptions",title:t.$t("Subscriptions.Subscriptions")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","rss"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("Subscriptions.Subscriptions"))+" ")])]),e("router-link",{staticClass:"navOption mobileHidden",attrs:{role:"button",to:"/subscribedchannels",title:t.$t("Channels.Channels")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","list"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("Channels.Channels"))+" ")])]),t.hidePopularVideos||!t.backendFallback&&"invidious"!==t.backendPreference?t._e():e("router-link",{staticClass:"navOption mobileHidden",attrs:{role:"button",to:"/popular",title:t.$t("Most Popular")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","users"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("Most Popular"))+" ")])]),t.hidePlaylists?t._e():e("router-link",{staticClass:"navOption mobileShow",attrs:{role:"button",to:"/userplaylists",title:t.$t("Playlists")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","bookmark"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("Playlists"))+" ")])]),e("side-nav-more-options"),e("router-link",{staticClass:"navOption mobileShow",attrs:{role:"button",to:"/history",title:t.$t("History.History")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","history"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("History.History"))+" ")])]),e("hr"),e("router-link",{staticClass:"navOption mobileShow",attrs:{role:"button",to:"/settings",title:t.$t("Settings.Settings")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","sliders-h"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("Settings.Settings"))+" ")])]),e("router-link",{staticClass:"navOption mobileHidden",attrs:{role:"button",to:"/about",title:t.$t("About.About")}},[e("div",{staticClass:"thumbnailContainer"},[e("font-awesome-icon",{staticClass:"navIcon",class:t.applyNavIconExpand,attrs:{icon:["fas","info-circle"],"fixed-width":""}})],1),t.hideText?t._e():e("p",{staticClass:"navLabel"},[t._v(" "+t._s(t.$t("About.About"))+" ")])]),e("hr"),t.hideActiveSubscriptions?t._e():e("div",t._l(t.activeSubscriptions,(function(i,n){return e("router-link",{key:n,staticClass:"navChannel channelLink mobileHidden",attrs:{to:`/channel/${i.id}`,title:i.name,role:"button"}},[e("div",{staticClass:"thumbnailContainer"},[e("img",{staticClass:"channelThumbnail",attrs:{height:"35",width:"35",loading:"lazy",src:i.thumbnail,alt:t.isOpen?"":i.name}})]),t.isOpen?e("p",{staticClass:"navLabel"},[t._v(" "+t._s(i.name)+" ")]):t._e()])})),1)],1)])}),[],!1,null,"60304983",null);const zR=WR.exports,GR=Ks({name:"FtNotificationBanner",props:{message:{type:String,required:!0}},computed:{progressBarPercentage:function(){return this.$store.getters.getProgressBarPercentage}},methods:{handleClick:function(t){this.$emit("click",t)},handleClose:function(){this.handleClick(!1)}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"ftNotificationBanner",attrs:{tabindex:"0",role:"link",title:t.message,"aria-describedby":t.message},on:{click:function(e){return t.handleClick(!0)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleClick(!0))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.handleClick(!0))}]}},[e("div",{staticClass:"message"},[t._t("default",(function(){return[e("p",[t._v(" "+t._s(t.message)+" ")])]}))],2),e("font-awesome-icon",{staticClass:"bannerIcon",attrs:{icon:["fas","times"],tabindex:"0",title:t.$t("Close Banner")},on:{click:function(e){return e.stopPropagation(),t.handleClose.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),t.handleClose.apply(null,arguments))}}})],1)}),[],!1,null,"7bdfd8ff",null).exports,KR={name:"FtToast",data:function(){return{toasts:[]}},mounted:function(){Ta.$on("toast-open",this.open)},beforeDestroy:function(){Ta.$off("toast-open",this.open)},methods:{performAction:function(t){this.toasts[t].action(),this.remove(t)},close:function(t){setTimeout(this.remove,300,0),t.isOpen=!1},open:function(t,e,i){const n={message:t,action:i||(()=>{}),isOpen:!1,timeout:null};n.timeout=setTimeout(this.close,e||3e3,n),setTimeout((()=>{n.isOpen=!0})),this.toasts.length>4&&this.remove(0),this.toasts.push(n)},remove:function(t){const e=this.toasts.splice(t,1);clearTimeout(e[0].timeout)}}};var YR=Ks(KR,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"toast-holder"},t._l(t.toasts,(function(i,n){return e("div",{key:"toast-"+n,staticClass:"toast",class:{closed:!i.isOpen,open:i.isOpen},attrs:{tabindex:"0",role:"status"},on:{click:function(e){return t.performAction(n)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.performAction(n))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.performAction(n))}]}},[e("p",{staticClass:"message"},[t._v(" "+t._s(i.message)+" ")])])})),0)}),[],!1,null,"892827de",null);const XR=YR.exports,QR=Ks({name:"FtProgressBar",computed:{progressBarPercentage:function(){return this.$store.getters.getProgressBarPercentage}}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"progressBar",style:{width:t.progressBarPercentage+"%"}})}),[],!1,null,"a8b5867e",null).exports;let JR={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const ZR=/[&<>"']/,tN=new RegExp(ZR.source,"g"),eN=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,iN=new RegExp(eN.source,"g"),nN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rN=t=>nN[t];function sN(t,e){if(e){if(ZR.test(t))return t.replace(tN,rN)}else if(eN.test(t))return t.replace(iN,rN);return t}const aN=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function oN(t){return t.replace(aN,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const lN=/(^|[^\[])\^/g;function cN(t,e){t="string"==typeof t?t:t.source,e=e||"";const i={replace:(e,n)=>(n=(n=n.source||n).replace(lN,"$1"),t=t.replace(e,n),i),getRegex:()=>new RegExp(t,e)};return i}const uN=/[^\w:]/g,hN=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function dN(t,e,i){if(t){let t;try{t=decodeURIComponent(oN(i)).replace(uN,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!hN.test(i)&&(i=function(t,e){pN[" "+t]||(fN.test(t)?pN[" "+t]=t+"/":pN[" "+t]=_N(t,"/",!0));const i=-1===(t=pN[" "+t]).indexOf(":");return"//"===e.substring(0,2)?i?e:t.replace(mN,"$1")+e:"/"===e.charAt(0)?i?e:t.replace(gN,"$1")+e:t+e}(e,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(t){return null}return i}const pN={},fN=/^[^:]+:\/*[^/]*$/,mN=/^([^:]+:)[\s\S]*$/,gN=/^([^:]+:\/*[^/]*)[\s\S]*$/,yN={exec:function(){}};function vN(t){let e,i,n=1;for(;n<arguments.length;n++)for(i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function bN(t,e){const i=t.replace(/\|/g,((t,e,i)=>{let n=!1,r=e;for(;--r>=0&&"\\"===i[r];)n=!n;return n?"|":" |"})).split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function _N(t,e,i){const n=t.length;if(0===n)return"";let r=0;for(;r<n;){const s=t.charAt(n-r-1);if(s!==e||i){if(s===e||!i)break;r++}else r++}return t.slice(0,n-r)}function wN(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function TN(t,e){if(e<1)return"";let i="";for(;e>1;)1&e&&(i+=t),e>>=1,t+=t;return i+t}function SN(t,e,i,n){const r=e.href,s=e.title?sN(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){n.state.inLink=!0;const t={type:"link",raw:i,href:r,title:s,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,t}return{type:"image",raw:i,href:r,title:s,text:sN(a)}}class xN{constructor(t){this.options=t||JR}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const t=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:_N(t,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const t=e[0],i=function(t,e){const i=t.match(/^(\s+)(?:```)/);if(null===i)return e;const n=i[1];return e.split("\n").map((t=>{const e=t.match(/^\s+/);if(null===e)return t;const[i]=e;return i.length>=n.length?t.slice(n.length):t})).join("\n")}(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(/#$/.test(t)){const e=_N(t,"#");this.options.pedantic?t=e.trim():e&&!/ $/.test(e)||(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const t=e[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const n=this.lexer.blockTokens(t);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:n,text:t}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i,n,r,s,a,o,l,c,u,h,d,p,f=e[1].trim();const m=f.length>1,g={type:"list",raw:"",ordered:m,start:m?+f.slice(0,-1):"",loose:!1,items:[]};f=m?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=m?f:"[*+-]");const y=new RegExp(`^( {0,3}${f})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;t&&(p=!1,e=y.exec(t))&&!this.rules.block.hr.test(t);){if(i=e[0],t=t.substring(i.length),c=e[2].split("\n",1)[0].replace(/^\t+/,(t=>" ".repeat(3*t.length))),u=t.split("\n",1)[0],this.options.pedantic?(s=2,d=c.trimLeft()):(s=e[2].search(/[^ ]/),s=s>4?1:s,d=c.slice(s),s+=e[1].length),o=!1,!c&&/^ *$/.test(u)&&(i+=u+"\n",t=t.substring(u.length+1),p=!0),!p){const e=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),r=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),a=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;t&&(h=t.split("\n",1)[0],u=h,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!r.test(u))&&!a.test(u)&&!e.test(u)&&!n.test(t);){if(u.search(/[^ ]/)>=s||!u.trim())d+="\n"+u.slice(s);else{if(o)break;if(c.search(/[^ ]/)>=4)break;if(r.test(c))break;if(a.test(c))break;if(n.test(c))break;d+="\n"+u}o||u.trim()||(o=!0),i+=h+"\n",t=t.substring(h.length+1),c=u.slice(s)}}g.loose||(l?g.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(d),n&&(r="[ ] "!==n[0],d=d.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:i,task:!!n,checked:r,loose:!1,text:d}),g.raw+=i}g.items[g.items.length-1].raw=i.trimRight(),g.items[g.items.length-1].text=d.trimRight(),g.raw=g.raw.trimRight();const v=g.items.length;for(a=0;a<v;a++)if(this.lexer.state.top=!1,g.items[a].tokens=this.lexer.blockTokens(g.items[a].text,[]),!g.loose){const t=g.items[a].tokens.filter((t=>"space"===t.type)),e=t.length>0&&t.some((t=>/\n.*\n/.test(t.raw)));g.loose=e}if(g.loose)for(a=0;a<v;a++)g.items[a].loose=!0;return g}}html(t){const e=this.rules.block.html.exec(t);if(e){const t={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(e[0]):sN(e[0]);t.type="paragraph",t.text=i,t.tokens=this.lexer.inline(i)}return t}}def(t){const e=this.rules.block.def.exec(t);if(e){const t=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:n}}}table(t){const e=this.rules.block.table.exec(t);if(e){const t={type:"table",header:bN(e[1]).map((t=>({text:t}))),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(t.header.length===t.align.length){t.raw=e[0];let i,n,r,s,a=t.align.length;for(i=0;i<a;i++)/^ *-+: *$/.test(t.align[i])?t.align[i]="right":/^ *:-+: *$/.test(t.align[i])?t.align[i]="center":/^ *:-+ *$/.test(t.align[i])?t.align[i]="left":t.align[i]=null;for(a=t.rows.length,i=0;i<a;i++)t.rows[i]=bN(t.rows[i],t.header.length).map((t=>({text:t})));for(a=t.header.length,n=0;n<a;n++)t.header[n].tokens=this.lexer.inline(t.header[n].text);for(a=t.rows.length,n=0;n<a;n++)for(s=t.rows[n],r=0;r<s.length;r++)s[r].tokens=this.lexer.inline(s[r].text);return t}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:sN(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):sN(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const e=_N(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{const t=function(t,e){if(-1===t.indexOf(e[1]))return-1;const i=t.length;let n=0,r=0;for(;r<i;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}(e[2],"()");if(t>-1){const i=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let i=e[2],n="";if(this.options.pedantic){const t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);t&&(i=t[1],n=t[3])}else n=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(t)?i.slice(1):i.slice(1,-1)),SN(e,{href:i?i.replace(this.rules.inline._escapes,"$1"):i,title:n?n.replace(this.rules.inline._escapes,"$1"):n},e[0],this.lexer)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let t=(i[2]||i[1]).replace(/\s+/g," ");if(t=e[t.toLowerCase()],!t){const t=i[0].charAt(0);return{type:"text",raw:t,text:t}}return SN(i,t,i[0],this.lexer)}}emStrong(t,e,i=""){let n=this.rules.inline.emStrong.lDelim.exec(t);if(!n)return;if(n[3]&&i.match(/[\p{L}\p{N}]/u))return;const r=n[1]||n[2]||"";if(!r||r&&(""===i||this.rules.inline.punctuation.exec(i))){const i=n[0].length-1;let r,s,a=i,o=0;const l="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+i);null!=(n=l.exec(e));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(s=r.length,n[3]||n[4]){a+=s;continue}if((n[5]||n[6])&&i%3&&!((i+s)%3)){o+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+o);const e=t.slice(0,i+n.index+(n[0].length-r.length)+s);if(Math.min(i,s)%2){const t=e.slice(1,-1);return{type:"em",raw:e,text:t,tokens:this.lexer.inlineTokens(t)}}const l=e.slice(2,-2);return{type:"strong",raw:e,text:l,tokens:this.lexer.inlineTokens(l)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(/\n/g," ");const i=/[^ ]/.test(t),n=/^ /.test(t)&&/ $/.test(t);return i&&n&&(t=t.substring(1,t.length-1)),t=sN(t,!0),{type:"codespan",raw:e[0],text:t}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const i=this.rules.inline.autolink.exec(t);if(i){let t,n;return"@"===i[2]?(t=sN(this.options.mangle?e(i[1]):i[1]),n="mailto:"+t):(t=sN(i[1]),n=t),{type:"link",raw:i[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(t,e){let i;if(i=this.rules.inline.url.exec(t)){let t,n;if("@"===i[2])t=sN(this.options.mangle?e(i[0]):i[0]),n="mailto:"+t;else{let e;do{e=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(e!==i[0]);t=sN(i[0]),n="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t,e){const i=this.rules.inline.text.exec(t);if(i){let t;return t=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):sN(i[0]):i[0]:sN(this.options.smartypants?e(i[0]):i[0]),{type:"text",raw:i[0],text:t}}}}const kN={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:yN,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};kN.def=cN(kN.def).replace("label",kN._label).replace("title",kN._title).getRegex(),kN.bullet=/(?:[*+-]|\d{1,9}[.)])/,kN.listItemStart=cN(/^( *)(bull) */).replace("bull",kN.bullet).getRegex(),kN.list=cN(kN.list).replace(/bull/g,kN.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+kN.def.source+")").getRegex(),kN._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kN._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,kN.html=cN(kN.html,"i").replace("comment",kN._comment).replace("tag",kN._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kN.paragraph=cN(kN._paragraph).replace("hr",kN.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kN._tag).getRegex(),kN.blockquote=cN(kN.blockquote).replace("paragraph",kN.paragraph).getRegex(),kN.normal=vN({},kN),kN.gfm=vN({},kN.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),kN.gfm.table=cN(kN.gfm.table).replace("hr",kN.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kN._tag).getRegex(),kN.gfm.paragraph=cN(kN._paragraph).replace("hr",kN.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",kN.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kN._tag).getRegex(),kN.pedantic=vN({},kN.normal,{html:cN("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",kN._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:yN,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:cN(kN.normal._paragraph).replace("hr",kN.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",kN.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const CN={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:yN,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:yN,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function EN(t){return t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function IN(t){let e,i,n="";const r=t.length;for(e=0;e<r;e++)i=t.charCodeAt(e),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}CN._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",CN.punctuation=cN(CN.punctuation).replace(/punctuation/g,CN._punctuation).getRegex(),CN.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,CN.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,CN._comment=cN(kN._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),CN.emStrong.lDelim=cN(CN.emStrong.lDelim).replace(/punct/g,CN._punctuation).getRegex(),CN.emStrong.rDelimAst=cN(CN.emStrong.rDelimAst,"g").replace(/punct/g,CN._punctuation).getRegex(),CN.emStrong.rDelimUnd=cN(CN.emStrong.rDelimUnd,"g").replace(/punct/g,CN._punctuation).getRegex(),CN._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,CN._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,CN._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,CN.autolink=cN(CN.autolink).replace("scheme",CN._scheme).replace("email",CN._email).getRegex(),CN._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,CN.tag=cN(CN.tag).replace("comment",CN._comment).replace("attribute",CN._attribute).getRegex(),CN._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,CN._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,CN._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,CN.link=cN(CN.link).replace("label",CN._label).replace("href",CN._href).replace("title",CN._title).getRegex(),CN.reflink=cN(CN.reflink).replace("label",CN._label).replace("ref",kN._label).getRegex(),CN.nolink=cN(CN.nolink).replace("ref",kN._label).getRegex(),CN.reflinkSearch=cN(CN.reflinkSearch,"g").replace("reflink",CN.reflink).replace("nolink",CN.nolink).getRegex(),CN.normal=vN({},CN),CN.pedantic=vN({},CN.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:cN(/^!?\[(label)\]\((.*?)\)/).replace("label",CN._label).getRegex(),reflink:cN(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",CN._label).getRegex()}),CN.gfm=vN({},CN.normal,{escape:cN(CN.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),CN.gfm.url=cN(CN.gfm.url,"i").replace("email",CN.gfm._extended_email).getRegex(),CN.breaks=vN({},CN.gfm,{br:cN(CN.br).replace("{2,}","*").getRegex(),text:cN(CN.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class PN{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||JR,this.options.tokenizer=this.options.tokenizer||new xN,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:kN.normal,inline:CN.normal};this.options.pedantic?(e.block=kN.pedantic,e.inline=CN.pedantic):this.options.gfm&&(e.block=kN.gfm,this.options.breaks?e.inline=CN.breaks:e.inline=CN.gfm),this.tokenizer.rules=e}static get rules(){return{block:kN,inline:CN}}static lex(t,e){return new PN(e).lex(t)}static lexInline(t,e){return new PN(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let i,n,r,s;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,((t,e,i)=>e+"    ".repeat(i.length)));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(i=n.call({lexer:this},t,e))&&(t=t.substring(i.raw.length),e.push(i),!0)))))if(i=this.tokenizer.space(t))t=t.substring(i.raw.length),1===i.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(i);else if(i=this.tokenizer.code(t))t=t.substring(i.raw.length),n=e[e.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?e.push(i):(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.fences(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.heading(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.hr(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.blockquote(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.list(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.html(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.def(t))t=t.substring(i.raw.length),n=e[e.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.table(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.lheading(t))t=t.substring(i.raw.length),e.push(i);else{if(r=t,this.options.extensions&&this.options.extensions.startBlock){let e=1/0;const i=t.slice(1);let n;this.options.extensions.startBlock.forEach((function(t){n=t.call({lexer:this},i),"number"==typeof n&&n>=0&&(e=Math.min(e,n))})),e<1/0&&e>=0&&(r=t.substring(0,e+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r)))n=e[e.length-1],s&&"paragraph"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(i),s=r.length!==t.length,t=t.substring(i.raw.length);else if(i=this.tokenizer.text(t))t=t.substring(i.raw.length),n=e[e.length-1],n&&"text"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(i);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i,n,r,s,a,o,l=t;if(this.tokens.links){const t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(l));)t.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,s.index)+"["+TN("a",s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,s.index)+"["+TN("a",s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,s.index+s[0].length-2)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(a||(o=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(i=n.call({lexer:this},t,e))&&(t=t.substring(i.raw.length),e.push(i),!0)))))if(i=this.tokenizer.escape(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.tag(t))t=t.substring(i.raw.length),n=e[e.length-1],n&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):e.push(i);else if(i=this.tokenizer.link(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(i.raw.length),n=e[e.length-1],n&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):e.push(i);else if(i=this.tokenizer.emStrong(t,l,o))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.codespan(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.br(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.del(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.autolink(t,IN))t=t.substring(i.raw.length),e.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(t,IN))){if(r=t,this.options.extensions&&this.options.extensions.startInline){let e=1/0;const i=t.slice(1);let n;this.options.extensions.startInline.forEach((function(t){n=t.call({lexer:this},i),"number"==typeof n&&n>=0&&(e=Math.min(e,n))})),e<1/0&&e>=0&&(r=t.substring(0,e+1))}if(i=this.tokenizer.inlineText(r,EN))t=t.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(o=i.raw.slice(-1)),a=!0,n=e[e.length-1],n&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):e.push(i);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}else t=t.substring(i.raw.length),e.push(i);return e}}class AN{constructor(t){this.options=t||JR}code(t,e,i){const n=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,n);null!=e&&e!==t&&(i=!0,t=e)}return t=t.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+sN(n)+'">'+(i?t:sN(t,!0))+"</code></pre>\n":"<pre><code>"+(i?t:sN(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,i,n){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+n.slug(i)}">${t}</h${e}>\n`:`<h${e}>${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,i){const n=e?"ol":"ul";return"<"+n+(e&&1!==i?' start="'+i+'"':"")+">\n"+t+"</"+n+">\n"}listitem(t){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,i){if(null===(t=dN(this.options.sanitize,this.options.baseUrl,t)))return i;let n='<a href="'+t+'"';return e&&(n+=' title="'+e+'"'),n+=">"+i+"</a>",n}image(t,e,i){if(null===(t=dN(this.options.sanitize,this.options.baseUrl,t)))return i;let n=`<img src="${t}" alt="${i}"`;return e&&(n+=` title="${e}"`),n+=this.options.xhtml?"/>":">",n}text(t){return t}}class LN{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,i){return""+i}image(t,e,i){return""+i}br(){return""}}class ON{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let i=t,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[t];do{n++,i=t+"-"+n}while(this.seen.hasOwnProperty(i))}return e||(this.seen[t]=n,this.seen[i]=0),i}slug(t,e={}){const i=this.serialize(t);return this.getNextSafeSlug(i,e.dryrun)}}class DN{constructor(t){this.options=t||JR,this.options.renderer=this.options.renderer||new AN,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new LN,this.slugger=new ON}static parse(t,e){return new DN(e).parse(t)}static parseInline(t,e){return new DN(e).parseInline(t)}parse(t,e=!0){let i,n,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,b,_,w="";const T=t.length;for(i=0;i<T;i++)if(h=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(_=this.options.extensions.renderers[h.type].call({parser:this},h),!1!==_||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))w+=_||"";else switch(h.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(h.tokens),h.depth,oN(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(c="",l="",s=h.header.length,n=0;n<s;n++)l+=this.renderer.tablecell(this.parseInline(h.header[n].tokens),{header:!0,align:h.align[n]});for(c+=this.renderer.tablerow(l),u="",s=h.rows.length,n=0;n<s;n++){for(o=h.rows[n],l="",a=o.length,r=0;r<a;r++)l+=this.renderer.tablecell(this.parseInline(o[r].tokens),{header:!1,align:h.align[r]});u+=this.renderer.tablerow(l)}w+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(h.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(d=h.ordered,p=h.start,f=h.loose,s=h.items.length,u="",n=0;n<s;n++)g=h.items[n],y=g.checked,v=g.task,m="",g.task&&(b=this.renderer.checkbox(y),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=b+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=b+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(g.tokens,f),u+=this.renderer.listitem(m,v,y);w+=this.renderer.list(u,d,p);continue;case"html":w+=this.renderer.html(h.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;i+1<T&&"text"===t[i+1].type;)h=t[++i],u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text);w+=e?this.renderer.paragraph(u):u;continue;default:{const t='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(t);throw new Error(t)}}return w}parseInline(t,e){e=e||this.renderer;let i,n,r,s="";const a=t.length;for(i=0;i<a;i++)if(n=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(r=this.options.extensions.renderers[n.type].call({parser:this},n),!1!==r||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)))s+=r||"";else switch(n.type){case"escape":case"text":s+=e.text(n.text);break;case"html":s+=e.html(n.text);break;case"link":s+=e.link(n.href,n.title,this.parseInline(n.tokens,e));break;case"image":s+=e.image(n.href,n.title,n.text);break;case"strong":s+=e.strong(this.parseInline(n.tokens,e));break;case"em":s+=e.em(this.parseInline(n.tokens,e));break;case"codespan":s+=e.codespan(n.text);break;case"br":s+=e.br();break;case"del":s+=e.del(this.parseInline(n.tokens,e));break;default:{const t='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(t);throw new Error(t)}}return s}}function MN(t,e,i){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(i=e,e=null),wN(e=vN({},MN.defaults,e||{})),i){const n=e.highlight;let r;try{r=PN.lex(t,e)}catch(t){return i(t)}const s=function(t){let s;if(!t)try{e.walkTokens&&MN.walkTokens(r,e.walkTokens),s=DN.parse(r,e)}catch(e){t=e}return e.highlight=n,t?i(t):i(null,s)};if(!n||n.length<3)return s();if(delete e.highlight,!r.length)return s();let a=0;return MN.walkTokens(r,(function(t){"code"===t.type&&(a++,setTimeout((()=>{n(t.text,t.lang,(function(e,i){if(e)return s(e);null!=i&&i!==t.text&&(t.text=i,t.escaped=!0),a--,0===a&&s()}))}),0))})),void(0===a&&s())}function n(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+sN(t.message+"",!0)+"</pre>";throw t}try{const i=PN.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(MN.walkTokens(i,e.walkTokens)).then((()=>DN.parse(i,e))).catch(n);MN.walkTokens(i,e.walkTokens)}return DN.parse(i,e)}catch(t){n(t)}}MN.options=MN.setOptions=function(t){var e;return vN(MN.defaults,t),e=MN.defaults,JR=e,MN},MN.getDefaults=function(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},MN.defaults=JR,MN.use=function(...t){const e=MN.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((t=>{const i=vN({},t);if(i.async=MN.defaults.async||i.async,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if(t.renderer){const i=e.renderers[t.name];e.renderers[t.name]=i?function(...e){let n=t.renderer.apply(this,e);return!1===n&&(n=i.apply(this,e)),n}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");e[t.level]?e[t.level].unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),i.extensions=e),t.renderer){const e=MN.defaults.renderer||new AN;for(const i in t.renderer){const n=e[i];e[i]=(...r)=>{let s=t.renderer[i].apply(e,r);return!1===s&&(s=n.apply(e,r)),s}}i.renderer=e}if(t.tokenizer){const e=MN.defaults.tokenizer||new xN;for(const i in t.tokenizer){const n=e[i];e[i]=(...r)=>{let s=t.tokenizer[i].apply(e,r);return!1===s&&(s=n.apply(e,r)),s}}i.tokenizer=e}if(t.walkTokens){const e=MN.defaults.walkTokens;i.walkTokens=function(i){let n=[];return n.push(t.walkTokens.call(this,i)),e&&(n=n.concat(e.call(this,i))),n}}MN.setOptions(i)}))},MN.walkTokens=function(t,e){let i=[];for(const n of t)switch(i=i.concat(e.call(MN,n)),n.type){case"table":for(const t of n.header)i=i.concat(MN.walkTokens(t.tokens,e));for(const t of n.rows)for(const n of t)i=i.concat(MN.walkTokens(n.tokens,e));break;case"list":i=i.concat(MN.walkTokens(n.items,e));break;default:MN.defaults.extensions&&MN.defaults.extensions.childTokens&&MN.defaults.extensions.childTokens[n.type]?MN.defaults.extensions.childTokens[n.type].forEach((function(t){i=i.concat(MN.walkTokens(n[t],e))})):n.tokens&&(i=i.concat(MN.walkTokens(n.tokens,e)))}return i},MN.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");wN(e=vN({},MN.defaults,e||{}));try{const i=PN.lexInline(t,e);return e.walkTokens&&MN.walkTokens(i,e.walkTokens),DN.parseInline(i,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+sN(t.message+"",!0)+"</pre>";throw t}},MN.Parser=DN,MN.parser=DN.parse,MN.Renderer=AN,MN.TextRenderer=LN,MN.Lexer=PN,MN.lexer=PN.lex,MN.Tokenizer=xN,MN.Slugger=ON,MN.parse=MN,MN.options,MN.setOptions,MN.use,MN.walkTokens,MN.parseInline,DN.parse,PN.lex,i(28594);var RN=i(34155);let NN=null;Wi.directive("observe-visibility",Ws);const BN=Ks({name:"App",components:{FtFlexBox:Ys,TopNav:HR,SideNav:zR,FtNotificationBanner:GR,FtPrompt:la,FtButton:ra,FtToast:XR,FtProgressBar:QR},data:function(){return{dataReady:!1,hideOutlines:!0,showUpdatesBanner:!1,showBlogBanner:!1,showReleaseNotes:!1,updateBannerMessage:"",blogBannerMessage:"",latestBlogUrl:"",updateChangelog:"",changeLogTitle:"",lastExternalLinkToBeOpened:"",showExternalLinkOpeningPrompt:!1,externalLinkOpeningPromptValues:["yes","no"]}},computed:{isOpen:function(){return this.$store.getters.getIsSideNavOpen},showProgressBar:function(){return this.$store.getters.getShowProgressBar},isRightAligned:function(){return"ar"===this.$i18n.locale},checkForUpdates:function(){return this.$store.getters.getCheckForUpdates},checkForBlogPosts:function(){return this.$store.getters.getCheckForBlogPosts},searchSettings:function(){return this.$store.getters.getSearchSettings},profileList:function(){return this.$store.getters.getProfileList},windowTitle:function(){if("Channel"!==this.$route.meta.title&&"Watch"!==this.$route.meta.title){let t="/home"===this.$route.meta.path?yM.N$:`${this.$t(this.$route.meta.title)} - ${yM.N$}`;return t||(t=yM.N$),t}return null},defaultProfile:function(){return this.$store.getters.getDefaultProfile},externalPlayer:function(){return this.$store.getters.getExternalPlayer},defaultInvidiousInstance:function(){return this.$store.getters.getDefaultInvidiousInstance},baseTheme:function(){return this.$store.getters.getBaseTheme},mainColor:function(){return this.$store.getters.getMainColor},secColor:function(){return this.$store.getters.getSecColor},systemTheme:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},externalLinkOpeningPromptNames:function(){return[this.$t("Yes"),this.$t("No")]},externalLinkHandling:function(){return this.$store.getters.getExternalLinkHandling}},watch:{windowTitle:"setWindowTitle",baseTheme:"checkThemeSettings",mainColor:"checkThemeSettings",secColor:"checkThemeSettings",$route(){this.$refs.topNav.hideFilters()}},created(){this.checkThemeSettings(),this.setWindowTitle()},mounted:function(){if(RN.env.IS_CORDOVA)if("plugins"in Gc()&&"backgroundMode"in Gc().plugins){const{backgroundMode:t}=Gc().plugins;t.setDefaults({title:"Youtubub",text:"Youtubub is running in the background."}),t.enable(),t.on("activate",(()=>{t.disableWebViewOptimizations()}))}else console.error("Background mode plugin failed to load.");this.grabUserSettings().then((async()=>{this.checkThemeSettings(),await this.fetchInvidiousInstances(),""===this.defaultInvidiousInstance&&await this.setRandomCurrentInvidiousInstance(),this.grabAllProfiles(this.$t("Profile.All Channels")).then((async()=>{this.grabHistory(),this.grabAllPlaylists(),this.watchSystemTheme(),document.addEventListener("visibilitychange",(()=>{document.hidden||this.watchSystemTheme()})),this.dataReady=!0,setTimeout((()=>{RN.env.IS_CORDOVA&&navigator.splashscreen.hide()}),250),setTimeout((()=>{this.checkForNewUpdates(),this.checkForNewBlogPosts()}),500)})),this.$router.afterEach(((t,e)=>{this.$refs.topNav.navigateHistory()}))}))},methods:{checkThemeSettings:function(){const t={baseTheme:this.baseTheme||"dark",mainColor:this.mainColor||"mainRed",secColor:this.secColor||"secBlue"};this.updateTheme(t)},updateTheme:function(t){document.body.className=`${t.baseTheme} main${t.mainColor} sec${t.secColor}`,document.body.dataset.systemTheme=this.systemTheme},checkForNewUpdates:function(){if(this.checkForUpdates){const t="https://api.github.com/repos/marmadilemanteater/freetubecordova/releases?per_page=1";-1===yM.i8.indexOf("nightly")&&fetch(t).then((t=>t.json())).then((t=>{const e=t[0].tag_name.split("."),i=e[e.length-1];this.updateChangelog=MN.parse(t[0].body),this.changeLogTitle=t[0].name;const n=this.$t("Version $ is now available!  Click for more details");this.updateBannerMessage=n.replace("$",i);const r=yM.i8.split("."),s=r[r.length-1];parseInt(i)>parseInt(s)&&(this.showUpdatesBanner=!0)})).catch((e=>{console.error("errored while checking for updates",t,e)}))}},checkForNewBlogPosts:function(){if(this.checkForBlogPosts){let t=localStorage.getItem("lastAppWasRunning");null!==t&&(t=new Date(t)),fetch("https://write.as/freetube/feed/").then((t=>t.text())).then((e=>{const i=(new DOMParser).parseFromString(e,"application/xml").querySelector("item"),n=new Date(i.querySelector("pubDate").textContent);if(null===t||n>t){const t=i.querySelector("title").textContent;this.blogBannerMessage=this.$t("A new blog is now available, {blogTitle}. Click to view more",{blogTitle:t}),this.latestBlogUrl=i.querySelector("link").textContent,this.showBlogBanner=!0}localStorage.setItem("lastAppWasRunning",new Date)}))}},checkExternalPlayer:async function(){const t={externalPlayer:this.externalPlayer};this.getExternalPlayerCmdArgumentsData(t)},handleUpdateBannerClick:function(t){!1!==t?this.showReleaseNotes=!0:this.showUpdatesBanner=!1},handleNewBlogBannerClick:function(t){t&&ER(this.latestBlogUrl),this.showBlogBanner=!1},openDownloadsPage:function(){ER("https://github.com/MarmadileManteater/FreeTubeCordova/releases"),this.showReleaseNotes=!1,this.showUpdatesBanner=!1},activateKeyboardShortcuts:function(){document.addEventListener("keydown",this.handleKeyboardShortcuts),document.addEventListener("mousedown",(()=>{this.hideOutlines=!0}))},activateIPCListeners:function(){NN.on("history-back",(t=>{this.$refs.topNav.historyBack()})),NN.on("history-forward",(t=>{this.$refs.topNav.historyForward()}))},handleKeyboardShortcuts:function(t){if(t.altKey)switch(t.key){case"D":case"d":this.$refs.topNav.focusSearch()}switch(t.key){case"Tab":this.hideOutlines=!1;break;case"L":case"l":("darwin"!==RN.platform&&t.ctrlKey||"darwin"===RN.platform&&t.metaKey)&&this.$refs.topNav.focusSearch()}},openAllLinksExternally:function(){const t=t=>"A"===t.target.tagName&&!t.target.href.startsWith(window.location.origin);document.addEventListener("click",(e=>{t(e)&&this.handleLinkClick(e)})),document.addEventListener("auxclick",(e=>{t(e)&&1===e.button&&this.handleLinkClick(e)}))},handleLinkClick:function(t){const e=t.target;t.preventDefault(),/^https?:\/\/((www\.)?youtube\.com(\/embed)?|youtu\.be)\/.*$/.test(e.href)?this.handleYoutubeLink(e.href,{doCreateNewWindow:"auxclick"===t.type}):"doNothing"===this.externalLinkHandling?kR(this.$t("External link opening has been disabled in the general settings")):"openLinkAfterPrompt"===this.externalLinkHandling?(this.lastExternalLinkToBeOpened=e.href,this.showExternalLinkOpeningPrompt=!0):ER(e.href)},handleYoutubeLink:function(t,{doCreateNewWindow:e=!1}={}){this.getYoutubeUrlInfo(t).then((t=>{switch(t.urlType){case"video":{const{videoId:i,timestamp:n,playlistId:r}=t,s={};n&&(s.timestamp=n),r&&r.length>0&&(s.playlistId=r),IR({path:`/watch/${i}`,query:s,doCreateNewWindow:e});break}case"playlist":{const{playlistId:i,query:n}=t;IR({path:`/playlist/${i}`,query:n,doCreateNewWindow:e});break}case"search":{const{searchQuery:i,query:n}=t;IR({path:`/search/${encodeURIComponent(i)}`,query:n,doCreateNewWindow:e,searchQueryText:i});break}case"hashtag":{let t="Hashtags have not yet been implemented, try again later";this.$te(t)&&""!==this.$t(t)&&(t=this.$t(t)),kR(t);break}case"channel":{const{channelId:i,subPath:n,url:r}=t;IR({path:`/channel/${i}/${n}`,doCreateNewWindow:e,query:{url:r}});break}case"invalid_url":break;default:{let t="Unknown YouTube url type, cannot be opened in app";this.$te(t)&&""!==this.$t(t)&&(t=this.$t(t)),kR(t)}}}))},watchSystemTheme:function(){RN.env.IS_CORDOVA&&("plugins"in Gc()&&"ThemeDetection"in Gc().plugins?Gc().plugins.ThemeDetection.isAvailable((t=>{t&&Gc().plugins.ThemeDetection.isDarkModeEnabled((t=>{document.body.dataset.systemTheme=t.value?"dark":"light"}))}),console.error):console.error("Theme detection plugin failed to load."))},openInternalPath:function({path:t,doCreateNewWindow:e,query:i={},searchQueryText:n=null}){this.$router.push({path:t,query:i})},enableSetSearchQueryText:function(){NN.on("updateSearchInputText",((t,e)=>{e&&this.$refs.topNav.updateSearchInputText(e)})),NN.send("searchInputHandlingReady")},enableOpenUrl:function(){NN.on("openUrl",((t,e)=>{e&&this.handleYoutubeLink(e)})),NN.send("appReady")},handleExternalLinkOpeningPromptAnswer:function(t){this.showExternalLinkOpeningPrompt=!1,"yes"===t&&this.lastExternalLinkToBeOpened.length>0&&ER(this.lastExternalLinkToBeOpened)},setWindowTitle:function(){null!==this.windowTitle&&(document.title=this.windowTitle)},...Cs(["setInvidiousInstancesList"]),...Is(["grabUserSettings","grabAllProfiles","grabHistory","grabAllPlaylists","getYoutubeUrlInfo","getExternalPlayerCmdArgumentsData","fetchInvidiousInstances","setRandomCurrentInvidiousInstance","setupListenersToSyncWindows","updateBaseTheme","updateMainColor","updateSecColor"])}},(function(){var t=this,e=t._self._c;return t._self._setupProxy,t.dataReady?e("div",{class:{hideOutlines:t.hideOutlines,rightAligned:t.isRightAligned},attrs:{id:"app"}},[e("top-nav",{ref:"topNav"}),e("side-nav",{ref:"sideNav"}),e("ft-flex-box",{staticClass:"flexBox routerView"},[t.showUpdatesBanner||t.showBlogBanner?e("div",{staticClass:"banner-wrapper"},[t.showUpdatesBanner?e("ft-notification-banner",{staticClass:"banner",attrs:{message:t.updateBannerMessage,role:"link"},on:{click:t.handleUpdateBannerClick}}):t._e(),t.showBlogBanner?e("ft-notification-banner",{staticClass:"banner",attrs:{message:t.blogBannerMessage,role:"link"},on:{click:t.handleNewBlogBannerClick}}):t._e()],1):t._e(),t.dataReady?e("transition",{attrs:{mode:"out-in",name:"fade"}},[e("RouterView",{ref:"router",staticClass:"routerView",on:{showOutlines:function(e){t.hideOutlines=!1}}})],1):t._e()],1),t.showReleaseNotes?e("ft-prompt",{attrs:{label:t.changeLogTitle},on:{click:function(e){t.showReleaseNotes=!t.showReleaseNotes}}},[e("span",{attrs:{id:"changeLogText"},domProps:{innerHTML:t._s(t.updateChangelog)}}),e("ft-flex-box",[e("ft-button",{attrs:{label:t.$t("Download From Site")},on:{click:t.openDownloadsPage}}),e("ft-button",{attrs:{label:t.$t("Close")},on:{click:function(e){t.showReleaseNotes=!t.showReleaseNotes}}})],1)],1):t._e(),t.showExternalLinkOpeningPrompt?e("ft-prompt",{attrs:{label:t.$t("Are you sure you want to open this link?"),"extra-labels":[t.lastExternalLinkToBeOpened],"option-names":t.externalLinkOpeningPromptNames,"option-values":t.externalLinkOpeningPromptValues},on:{click:t.handleExternalLinkOpeningPromptAnswer}}):t._e(),e("ft-toast"),t.showProgressBar?e("ft-progress-bar"):t._e()],1):t._e()}),[],!1,null,"7bcf290c",null).exports;function FN(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function $N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?FN(Object(i),!0).forEach((function(e){VN(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):FN(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function UN(t){return UN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UN(t)}function jN(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VN(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function HN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,s=[],a=!0,o=!1;try{for(i=i.call(t);!(a=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return s}}(t,e)||WN(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qN(t){return function(t){if(Array.isArray(t))return zN(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||WN(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WN(t,e){if(t){if("string"==typeof t)return zN(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?zN(t,e):void 0}}function zN(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var GN=function(){},KN={},YN={},XN=null,QN={mark:GN,measure:GN};try{"undefined"!=typeof window&&(KN=window),"undefined"!=typeof document&&(YN=document),"undefined"!=typeof MutationObserver&&(XN=MutationObserver),"undefined"!=typeof performance&&(QN=performance)}catch(t){}var JN,ZN,tB,eB,iB,nB=(KN.navigator||{}).userAgent,rB=void 0===nB?"":nB,sB=KN,aB=YN,oB=XN,lB=QN,cB=(sB.document,!!aB.documentElement&&!!aB.head&&"function"==typeof aB.addEventListener&&"function"==typeof aB.createElement),uB=~rB.indexOf("MSIE")||~rB.indexOf("Trident/"),hB="___FONT_AWESOME___",dB=16,pB="fa",fB="svg-inline--fa",mB="data-fa-i2svg",gB="data-fa-pseudo-element",yB="data-fa-pseudo-element-pending",vB="data-prefix",bB="data-icon",_B="fontawesome-i2svg",wB="async",TB=["HTML","HEAD","STYLE","SCRIPT"],SB=function(){try{return!0}catch(t){return!1}}(),xB="classic",kB="sharp",CB=[xB,kB];function EB(t){return new Proxy(t,{get:function(t,e){return e in t?t[e]:t[xB]}})}var IB=EB((VN(JN={},xB,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),VN(JN,kB,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),JN)),PB=EB((VN(ZN={},xB,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),VN(ZN,kB,{solid:"fass",regular:"fasr"}),ZN)),AB=EB((VN(tB={},xB,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),VN(tB,kB,{fass:"fa-solid",fasr:"fa-regular"}),tB)),LB=EB((VN(eB={},xB,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),VN(eB,kB,{"fa-solid":"fass","fa-regular":"fasr"}),eB)),OB=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,DB="fa-layers-text",MB=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,RB=EB((VN(iB={},xB,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),VN(iB,kB,{900:"fass",400:"fasr"}),iB)),NB=[1,2,3,4,5,6,7,8,9,10],BB=NB.concat([11,12,13,14,15,16,17,18,19,20]),FB=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],$B={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},UB=new Set;Object.keys(PB[xB]).map(UB.add.bind(UB)),Object.keys(PB[kB]).map(UB.add.bind(UB));var jB=[].concat(CB,qN(UB),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",$B.GROUP,$B.SWAP_OPACITY,$B.PRIMARY,$B.SECONDARY]).concat(NB.map((function(t){return"".concat(t,"x")}))).concat(BB.map((function(t){return"w-".concat(t)}))),VB=sB.FontAwesomeConfig||{};aB&&"function"==typeof aB.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(t){var e=HN(t,2),i=e[0],n=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=aB.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(i));null!=r&&(VB[n]=r)}));var HB={styleDefault:"solid",familyDefault:"classic",cssPrefix:pB,replacementClass:fB,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};VB.familyPrefix&&(VB.cssPrefix=VB.familyPrefix);var qB=$N($N({},HB),VB);qB.autoReplaceSvg||(qB.observeMutations=!1);var WB={};Object.keys(HB).forEach((function(t){Object.defineProperty(WB,t,{enumerable:!0,set:function(e){qB[t]=e,zB.forEach((function(t){return t(WB)}))},get:function(){return qB[t]}})})),Object.defineProperty(WB,"familyPrefix",{enumerable:!0,set:function(t){qB.cssPrefix=t,zB.forEach((function(t){return t(WB)}))},get:function(){return qB.cssPrefix}}),sB.FontAwesomeConfig=WB;var zB=[],GB=dB,KB={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},YB="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function XB(){for(var t=12,e="";t-- >0;)e+=YB[62*Math.random()|0];return e}function QB(t){for(var e=[],i=(t||[]).length>>>0;i--;)e[i]=t[i];return e}function JB(t){return t.classList?QB(t.classList):(t.getAttribute("class")||"").split(" ").filter((function(t){return t}))}function ZB(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function tF(t){return Object.keys(t||{}).reduce((function(e,i){return e+"".concat(i,": ").concat(t[i].trim(),";")}),"")}function eF(t){return t.size!==KB.size||t.x!==KB.x||t.y!==KB.y||t.rotate!==KB.rotate||t.flipX||t.flipY}var iF=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function nF(){var t=pB,e=fB,i=WB.cssPrefix,n=WB.replacementClass,r=iF;if(i!==t||n!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),a=new RegExp("\\--".concat(t,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(i,"-")).replace(a,"--".concat(i,"-")).replace(o,".".concat(n))}return r}var rF=!1;function sF(){WB.autoAddCss&&!rF&&(function(t){if(t&&cB){var e=aB.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var i=aB.head.childNodes,n=null,r=i.length-1;r>-1;r--){var s=i[r],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(n=s)}aB.head.insertBefore(e,n)}}(nF()),rF=!0)}var aF={mixout:function(){return{dom:{css:nF,insertCss:sF}}},hooks:function(){return{beforeDOMElementCreation:function(){sF()},beforeI2svg:function(){sF()}}}},oF=sB||{};oF[hB]||(oF[hB]={}),oF[hB].styles||(oF[hB].styles={}),oF[hB].hooks||(oF[hB].hooks={}),oF[hB].shims||(oF[hB].shims=[]);var lF=oF[hB],cF=[],uF=!1;function hF(t){var e=t.tag,i=t.attributes,n=void 0===i?{}:i,r=t.children,s=void 0===r?[]:r;return"string"==typeof t?ZB(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce((function(e,i){return e+"".concat(i,'="').concat(ZB(t[i]),'" ')}),"").trim()}(n),">").concat(s.map(hF).join(""),"</").concat(e,">")}function dF(t,e,i){if(t&&t[e]&&t[e][i])return{prefix:e,iconName:i,icon:t[e][i]}}cB&&((uF=(aB.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(aB.readyState))||aB.addEventListener("DOMContentLoaded",(function t(){aB.removeEventListener("DOMContentLoaded",t),uF=1,cF.map((function(t){return t()}))})));var pF=function(t,e,i,n){var r,s,a,o=Object.keys(t),l=o.length,c=void 0!==n?function(t,e){return function(i,n,r,s){return t.call(e,i,n,r,s)}}(e,n):e;for(void 0===i?(r=1,a=t[o[0]]):(r=0,a=i);r<l;r++)a=c(a,t[s=o[r]],s,t);return a};function fF(t){var e=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),i--)}else e.push(r)}return e}(t);return 1===e.length?e[0].toString(16):null}function mF(t){return Object.keys(t).reduce((function(e,i){var n=t[i];return n.icon?e[n.iconName]=n.icon:e[i]=n,e}),{})}function gF(t,e){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,n=void 0!==i&&i,r=mF(e);"function"!=typeof lF.hooks.addPack||n?lF.styles[t]=$N($N({},lF.styles[t]||{}),r):lF.hooks.addPack(t,mF(e)),"fas"===t&&gF("fa",e)}var yF,vF,bF,_F=lF.styles,wF=lF.shims,TF=(VN(yF={},xB,Object.values(AB[xB])),VN(yF,kB,Object.values(AB[kB])),yF),SF=null,xF={},kF={},CF={},EF={},IF={},PF=(VN(vF={},xB,Object.keys(IB[xB])),VN(vF,kB,Object.keys(IB[kB])),vF);var AF,LF=function(){var t=function(t){return pF(_F,(function(e,i,n){return e[n]=pF(i,t,{}),e}),{})};xF=t((function(t,e,i){return e[3]&&(t[e[3]]=i),e[2]&&e[2].filter((function(t){return"number"==typeof t})).forEach((function(e){t[e.toString(16)]=i})),t})),kF=t((function(t,e,i){return t[i]=i,e[2]&&e[2].filter((function(t){return"string"==typeof t})).forEach((function(e){t[e]=i})),t})),IF=t((function(t,e,i){var n=e[2];return t[i]=i,n.forEach((function(e){t[e]=i})),t}));var e="far"in _F||WB.autoFetchSvg,i=pF(wF,(function(t,i){var n=i[0],r=i[1],s=i[2];return"far"!==r||e||(r="fas"),"string"==typeof n&&(t.names[n]={prefix:r,iconName:s}),"number"==typeof n&&(t.unicodes[n.toString(16)]={prefix:r,iconName:s}),t}),{names:{},unicodes:{}});CF=i.names,EF=i.unicodes,SF=BF(WB.styleDefault,{family:WB.familyDefault})};function OF(t,e){return(xF[t]||{})[e]}function DF(t,e){return(IF[t]||{})[e]}function MF(t){return CF[t]||{prefix:null,iconName:null}}function RF(){return SF}AF=function(t){SF=BF(t.styleDefault,{family:WB.familyDefault})},zB.push(AF),LF();var NF=function(){return{prefix:null,iconName:null,rest:[]}};function BF(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,i=void 0===e?xB:e,n=IB[i][t],r=PB[i][t]||PB[i][n],s=t in lF.styles?t:null;return r||s||null}var FF=(VN(bF={},xB,Object.keys(AB[xB])),VN(bF,kB,Object.keys(AB[kB])),bF);function $F(t){var e,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,n=void 0!==i&&i,r=(VN(e={},xB,"".concat(WB.cssPrefix,"-").concat(xB)),VN(e,kB,"".concat(WB.cssPrefix,"-").concat(kB)),e),s=null,a=xB;(t.includes(r[xB])||t.some((function(t){return FF[xB].includes(t)})))&&(a=xB),(t.includes(r[kB])||t.some((function(t){return FF[kB].includes(t)})))&&(a=kB);var o=t.reduce((function(t,e){var i=function(t,e){var i,n=e.split("-"),r=n[0],s=n.slice(1).join("-");return r!==t||""===s||(i=s,~jB.indexOf(i))?null:s}(WB.cssPrefix,e);if(_F[e]?(e=TF[a].includes(e)?LB[a][e]:e,s=e,t.prefix=e):PF[a].indexOf(e)>-1?(s=e,t.prefix=BF(e,{family:a})):i?t.iconName=i:e!==WB.replacementClass&&e!==r[xB]&&e!==r[kB]&&t.rest.push(e),!n&&t.prefix&&t.iconName){var o="fa"===s?MF(t.iconName):{},l=DF(t.prefix,t.iconName);o.prefix&&(s=null),t.iconName=o.iconName||l||t.iconName,t.prefix=o.prefix||t.prefix,"far"!==t.prefix||_F.far||!_F.fas||WB.autoFetchSvg||(t.prefix="fas")}return t}),NF());return(t.includes("fa-brands")||t.includes("fab"))&&(o.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(o.prefix="fad"),o.prefix||a!==kB||!_F.fass&&!WB.autoFetchSvg||(o.prefix="fass",o.iconName=DF(o.prefix,o.iconName)||o.iconName),"fa"!==o.prefix&&"fa"!==s||(o.prefix=RF()||"fas"),o}var UF=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,i;return e=t,i=[{key:"add",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(e){t.definitions[e]=$N($N({},t.definitions[e]||{}),r[e]),gF(e,r[e]);var i=AB[xB][e];i&&gF(i,r[e]),LF()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var i=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(i).map((function(e){var n=i[e],r=n.prefix,s=n.iconName,a=n.icon,o=a[2];t[r]||(t[r]={}),o.length>0&&o.forEach((function(e){"string"==typeof e&&(t[r][e]=a)})),t[r][s]=a})),t}}],i&&jN(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),jF=[],VF={},HF={},qF=Object.keys(HF);function WF(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return(VF[t]||[]).forEach((function(t){e=t.apply(null,[e].concat(n))})),e}function zF(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(VF[t]||[]).forEach((function(t){t.apply(null,i)}))}function GF(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return HF[t]?HF[t].apply(null,e):void 0}function KF(t){"fa"===t.prefix&&(t.prefix="fas");var e=t.iconName,i=t.prefix||RF();if(e)return e=DF(i,e)||e,dF(YF.definitions,i,e)||dF(lF.styles,i,e)}var YF=new UF,XF={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cB?(zF("beforeI2svg",t),GF("pseudoElements2svg",t),GF("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.autoReplaceSvgRoot;!1===WB.autoReplaceSvg&&(WB.autoReplaceSvg=!0),WB.observeMutations=!0,t=function(){JF({autoReplaceSvgRoot:i}),zF("watch",e)},cB&&(uF?setTimeout(t,0):cF.push(t))}},QF={noAuto:function(){WB.autoReplaceSvg=!1,WB.observeMutations=!1,zF("noAuto")},config:WB,dom:XF,parse:{icon:function(t){if(null===t)return null;if("object"===UN(t)&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:DF(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){var e=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],i=BF(t[0]);return{prefix:i,iconName:DF(i,e)||e}}if("string"==typeof t&&(t.indexOf("".concat(WB.cssPrefix,"-"))>-1||t.match(OB))){var n=$F(t.split(" "),{skipLookups:!0});return{prefix:n.prefix||RF(),iconName:DF(n.prefix,n.iconName)||n.iconName}}if("string"==typeof t){var r=RF();return{prefix:r,iconName:DF(r,t)||t}}}},library:YF,findIconDefinition:KF,toHtml:hF},JF=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,e=void 0===t?aB:t;(Object.keys(lF.styles).length>0||WB.autoFetchSvg)&&cB&&WB.autoReplaceSvg&&QF.dom.i2svg({node:e})};function ZF(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(t){return hF(t)}))}}),Object.defineProperty(t,"node",{get:function(){if(cB){var e=aB.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function t$(t){var e=t.icons,i=e.main,n=e.mask,r=t.prefix,s=t.iconName,a=t.transform,o=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,p=void 0!==d&&d,f=n.found?n:i,m=f.width,g=f.height,y="fak"===r,v=[WB.replacementClass,s?"".concat(WB.cssPrefix,"-").concat(s):""].filter((function(t){return-1===h.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(h.classes).join(" "),b={children:[],attributes:$N($N({},h.attributes),{},{"data-prefix":r,"data-icon":s,class:v,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},_=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(b.attributes[mB]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||XB())},children:[l]}),delete b.attributes.title);var w=$N($N({},b),{},{prefix:r,iconName:s,main:i,mask:n,maskId:c,transform:a,symbol:o,styles:$N($N({},_),h.styles)}),T=n.found&&i.found?GF("generateAbstractMask",w)||{children:[],attributes:{}}:GF("generateAbstractIcon",w)||{children:[],attributes:{}},S=T.children,x=T.attributes;return w.children=S,w.attributes=x,o?function(t){var e=t.prefix,i=t.iconName,n=t.children,r=t.attributes,s=t.symbol,a=!0===s?"".concat(e,"-").concat(WB.cssPrefix,"-").concat(i):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:$N($N({},r),{},{id:a}),children:n}]}]}(w):function(t){var e=t.children,i=t.main,n=t.mask,r=t.attributes,s=t.styles,a=t.transform;if(eF(a)&&i.found&&!n.found){var o={x:i.width/i.height/2,y:.5};r.style=tF($N($N({},s),{},{"transform-origin":"".concat(o.x+a.x/16,"em ").concat(o.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(w)}function e$(t){var e=t.content,i=t.width,n=t.height,r=t.transform,s=t.title,a=t.extra,o=t.watchable,l=void 0!==o&&o,c=$N($N($N({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});l&&(c[mB]="");var u=$N({},a.styles);eF(r)&&(u.transform=function(t){var e=t.transform,i=t.width,n=void 0===i?dB:i,r=t.height,s=void 0===r?dB:r,a=t.startCentered,o=void 0!==a&&a,l="";return l+=o&&uB?"translate(".concat(e.x/GB-n/2,"em, ").concat(e.y/GB-s/2,"em) "):o?"translate(calc(-50% + ".concat(e.x/GB,"em), calc(-50% + ").concat(e.y/GB,"em)) "):"translate(".concat(e.x/GB,"em, ").concat(e.y/GB,"em) "),(l+="scale(".concat(e.size/GB*(e.flipX?-1:1),", ").concat(e.size/GB*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:i,height:n}),u["-webkit-transform"]=u.transform);var h=tF(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}var i$=lF.styles;function n$(t){var e=t[0],i=t[1],n=HN(t.slice(4),1)[0];return{found:!0,width:e,height:i,icon:Array.isArray(n)?{tag:"g",attributes:{class:"".concat(WB.cssPrefix,"-").concat($B.GROUP)},children:[{tag:"path",attributes:{class:"".concat(WB.cssPrefix,"-").concat($B.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(WB.cssPrefix,"-").concat($B.PRIMARY),fill:"currentColor",d:n[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:n}}}}var r$={found:!1,width:512,height:512};function s$(t,e){var i=e;return"fa"===e&&null!==WB.styleDefault&&(e=RF()),new Promise((function(n,r){if(GF("missingIconAbstract"),"fa"===i){var s=MF(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&i$[e]&&i$[e][t])return n(n$(i$[e][t]));!function(t,e){SB||WB.showMissingIcons||!t||console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}(t,e),n($N($N({},r$),{},{icon:WB.showMissingIcons&&t&&GF("missingIconAbstract")||{}}))}))}var a$=function(){},o$=WB.measurePerformance&&lB&&lB.mark&&lB.measure?lB:{mark:a$,measure:a$},l$='FA "6.3.0"',c$=function(t){o$.mark("".concat(l$," ").concat(t," ends")),o$.measure("".concat(l$," ").concat(t),"".concat(l$," ").concat(t," begins"),"".concat(l$," ").concat(t," ends"))},u$={begin:function(t){return o$.mark("".concat(l$," ").concat(t," begins")),function(){return c$(t)}},end:c$},h$=function(){};function d$(t){return"string"==typeof(t.getAttribute?t.getAttribute(mB):null)}function p$(t){return aB.createElementNS("http://www.w3.org/2000/svg",t)}function f$(t){return aB.createElement(t)}function m$(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,i=void 0===e?"svg"===t.tag?p$:f$:e;if("string"==typeof t)return aB.createTextNode(t);var n=i(t.tag);return Object.keys(t.attributes||[]).forEach((function(e){n.setAttribute(e,t.attributes[e])})),(t.children||[]).forEach((function(t){n.appendChild(m$(t,{ceFn:i}))})),n}var g$={replace:function(t){var e=t[0];if(e.parentNode)if(t[1].forEach((function(t){e.parentNode.insertBefore(m$(t),e)})),null===e.getAttribute(mB)&&WB.keepOriginalSource){var i=aB.createComment(function(t){var e=" ".concat(t.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(e));e.parentNode.replaceChild(i,e)}else e.remove()},nest:function(t){var e=t[0],i=t[1];if(~JB(e).indexOf(WB.replacementClass))return g$.replace(t);var n=new RegExp("".concat(WB.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var r=i[0].attributes.class.split(" ").reduce((function(t,e){return e===WB.replacementClass||e.match(n)?t.toSvg.push(e):t.toNode.push(e),t}),{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" "),0===r.toNode.length?e.removeAttribute("class"):e.setAttribute("class",r.toNode.join(" "))}var s=i.map((function(t){return hF(t)})).join("\n");e.setAttribute(mB,""),e.innerHTML=s}};function y$(t){t()}function v$(t,e){var i="function"==typeof e?e:h$;if(0===t.length)i();else{var n=y$;WB.mutateApproach===wB&&(n=sB.requestAnimationFrame||y$),n((function(){var e=!0===WB.autoReplaceSvg?g$.replace:g$[WB.autoReplaceSvg]||g$.replace,n=u$.begin("mutate");t.map(e),n(),i()}))}}var b$=!1;function _$(){b$=!0}function w$(){b$=!1}var T$=null;function S$(t){if(oB&&WB.observeMutations){var e=t.treeCallback,i=void 0===e?h$:e,n=t.nodeCallback,r=void 0===n?h$:n,s=t.pseudoElementsCallback,a=void 0===s?h$:s,o=t.observeMutationsRoot,l=void 0===o?aB:o;T$=new oB((function(t){if(!b$){var e=RF();QB(t).forEach((function(t){if("childList"===t.type&&t.addedNodes.length>0&&!d$(t.addedNodes[0])&&(WB.searchPseudoElements&&a(t.target),i(t.target)),"attributes"===t.type&&t.target.parentNode&&WB.searchPseudoElements&&a(t.target.parentNode),"attributes"===t.type&&d$(t.target)&&~FB.indexOf(t.attributeName))if("class"===t.attributeName&&function(t){var e=t.getAttribute?t.getAttribute(vB):null,i=t.getAttribute?t.getAttribute(bB):null;return e&&i}(t.target)){var n=$F(JB(t.target)),s=n.prefix,o=n.iconName;t.target.setAttribute(vB,s||e),o&&t.target.setAttribute(bB,o)}else(l=t.target)&&l.classList&&l.classList.contains&&l.classList.contains(WB.replacementClass)&&r(t.target);var l}))}})),cB&&T$.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function x$(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},i=function(t){var e,i,n=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),s=void 0!==t.innerText?t.innerText.trim():"",a=$F(JB(t));return a.prefix||(a.prefix=RF()),n&&r&&(a.prefix=n,a.iconName=r),a.iconName&&a.prefix||(a.prefix&&s.length>0&&(a.iconName=(e=a.prefix,i=t.innerText,(kF[e]||{})[i]||OF(a.prefix,fF(t.innerText)))),!a.iconName&&WB.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(a.iconName=t.firstChild.data)),a}(t),n=i.iconName,r=i.prefix,s=i.rest,a=function(t){var e=QB(t.attributes).reduce((function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t}),{}),i=t.getAttribute("title"),n=t.getAttribute("data-fa-title-id");return WB.autoA11y&&(i?e["aria-labelledby"]="".concat(WB.replacementClass,"-title-").concat(n||XB()):(e["aria-hidden"]="true",e.focusable="false")),e}(t),o=WF("parseNodeAttributes",{},t),l=e.styleParser?function(t){var e=t.getAttribute("style"),i=[];return e&&(i=e.split(";").reduce((function(t,e){var i=e.split(":"),n=i[0],r=i.slice(1);return n&&r.length>0&&(t[n]=r.join(":").trim()),t}),{})),i}(t):[];return $N({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:KB,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:a}},o)}var k$=lF.styles;function C$(t){var e="nest"===WB.autoReplaceSvg?x$(t,{styleParser:!1}):x$(t);return~e.extra.classes.indexOf(DB)?GF("generateLayersText",t,e):GF("generateSvgReplacementMutation",t,e)}var E$=new Set;function I$(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!cB)return Promise.resolve();var i=aB.documentElement.classList,n=function(t){return i.add("".concat(_B,"-").concat(t))},r=function(t){return i.remove("".concat(_B,"-").concat(t))},s=WB.autoFetchSvg?E$:CB.map((function(t){return"fa-".concat(t)})).concat(Object.keys(k$));s.includes("fa")||s.push("fa");var a=[".".concat(DB,":not([").concat(mB,"])")].concat(s.map((function(t){return".".concat(t,":not([").concat(mB,"])")}))).join(", ");if(0===a.length)return Promise.resolve();var o=[];try{o=QB(t.querySelectorAll(a))}catch(t){}if(!(o.length>0))return Promise.resolve();n("pending"),r("complete");var l=u$.begin("onTree"),c=o.reduce((function(t,e){try{var i=C$(e);i&&t.push(i)}catch(t){SB||"MissingIcon"===t.name&&console.error(t)}return t}),[]);return new Promise((function(t,i){Promise.all(c).then((function(i){v$(i,(function(){n("active"),n("complete"),r("pending"),"function"==typeof e&&e(),l(),t()}))})).catch((function(t){l(),i(t)}))}))}function P$(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;C$(t).then((function(t){t&&v$([t],e)}))}CB.map((function(t){E$.add("fa-".concat(t))})),Object.keys(IB[xB]).map(E$.add.bind(E$)),Object.keys(IB[kB]).map(E$.add.bind(E$)),E$=qN(E$);var A$=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?KB:i,r=e.symbol,s=void 0!==r&&r,a=e.mask,o=void 0===a?null:a,l=e.maskId,c=void 0===l?null:l,u=e.title,h=void 0===u?null:u,d=e.titleId,p=void 0===d?null:d,f=e.classes,m=void 0===f?[]:f,g=e.attributes,y=void 0===g?{}:g,v=e.styles,b=void 0===v?{}:v;if(t){var _=t.prefix,w=t.iconName,T=t.icon;return ZF($N({type:"icon"},t),(function(){return zF("beforeDOMElementCreation",{iconDefinition:t,params:e}),WB.autoA11y&&(h?y["aria-labelledby"]="".concat(WB.replacementClass,"-title-").concat(p||XB()):(y["aria-hidden"]="true",y.focusable="false")),t$({icons:{main:n$(T),mask:o?n$(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:w,transform:$N($N({},KB),n),symbol:s,title:h,maskId:c,titleId:p,extra:{attributes:y,styles:b,classes:m}})}))}},L$={mixout:function(){return{icon:(t=A$,function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:KF(e||{}),r=i.mask;return r&&(r=(r||{}).icon?r:KF(r||{})),t(n,$N($N({},i),{},{mask:r}))})};var t},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=I$,t.nodeCallback=P$,t}}},provides:function(t){t.i2svg=function(t){var e=t.node,i=void 0===e?aB:e,n=t.callback;return I$(i,void 0===n?function(){}:n)},t.generateSvgReplacementMutation=function(t,e){var i=e.iconName,n=e.title,r=e.titleId,s=e.prefix,a=e.transform,o=e.symbol,l=e.mask,c=e.maskId,u=e.extra;return new Promise((function(e,h){Promise.all([s$(i,s),l.iconName?s$(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var h=HN(l,2),d=h[0],p=h[1];e([t,t$({icons:{main:d,mask:p},prefix:s,iconName:i,transform:a,symbol:o,maskId:c,title:n,titleId:r,extra:u,watchable:!0})])})).catch(h)}))},t.generateAbstractIcon=function(t){var e,i=t.children,n=t.attributes,r=t.main,s=t.transform,a=tF(t.styles);return a.length>0&&(n.style=a),eF(s)&&(e=GF("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),i.push(e||r.icon),{children:i,attributes:n}}}},O$={mixout:function(){return{layer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.classes,n=void 0===i?[]:i;return ZF({type:"layer"},(function(){zF("beforeDOMElementCreation",{assembler:t,params:e});var i=[];return t((function(t){Array.isArray(t)?t.map((function(t){i=i.concat(t.abstract)})):i=i.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(WB.cssPrefix,"-layers")].concat(qN(n)).join(" ")},children:i}]}))}}}},D$={mixout:function(){return{counter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.title,n=void 0===i?null:i,r=e.classes,s=void 0===r?[]:r,a=e.attributes,o=void 0===a?{}:a,l=e.styles,c=void 0===l?{}:l;return ZF({type:"counter",content:t},(function(){return zF("beforeDOMElementCreation",{content:t,params:e}),function(t){var e=t.content,i=t.title,n=t.extra,r=$N($N($N({},n.attributes),i?{title:i}:{}),{},{class:n.classes.join(" ")}),s=tF(n.styles);s.length>0&&(r.style=s);var a=[];return a.push({tag:"span",attributes:r,children:[e]}),i&&a.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),a}({content:t.toString(),title:n,extra:{attributes:o,styles:c,classes:["".concat(WB.cssPrefix,"-layers-counter")].concat(qN(s))}})}))}}}},M$={mixout:function(){return{text:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?KB:i,r=e.title,s=void 0===r?null:r,a=e.classes,o=void 0===a?[]:a,l=e.attributes,c=void 0===l?{}:l,u=e.styles,h=void 0===u?{}:u;return ZF({type:"text",content:t},(function(){return zF("beforeDOMElementCreation",{content:t,params:e}),e$({content:t,transform:$N($N({},KB),n),title:s,extra:{attributes:c,styles:h,classes:["".concat(WB.cssPrefix,"-layers-text")].concat(qN(o))}})}))}}},provides:function(t){t.generateLayersText=function(t,e){var i=e.title,n=e.transform,r=e.extra,s=null,a=null;if(uB){var o=parseInt(getComputedStyle(t).fontSize,10),l=t.getBoundingClientRect();s=l.width/o,a=l.height/o}return WB.autoA11y&&!i&&(r.attributes["aria-hidden"]="true"),Promise.resolve([t,e$({content:t.innerHTML,width:s,height:a,transform:n,title:i,extra:r,watchable:!0})])}}},R$=new RegExp('"',"ug"),N$=[1105920,1112319];function B$(t,e){var i="".concat(yB).concat(e.replace(":","-"));return new Promise((function(n,r){if(null!==t.getAttribute(i))return n();var s,a,o,l=QB(t.children).filter((function(t){return t.getAttribute(gB)===e}))[0],c=sB.getComputedStyle(t,e),u=c.getPropertyValue("font-family").match(MB),h=c.getPropertyValue("font-weight"),d=c.getPropertyValue("content");if(l&&!u)return t.removeChild(l),n();if(u&&"none"!==d&&""!==d){var p=c.getPropertyValue("content"),f=~["Sharp"].indexOf(u[2])?kB:xB,m=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(u[2])?PB[f][u[2].toLowerCase()]:RB[f][h],g=function(t){var e,i,n,r,s=t.replace(R$,""),a=(n=(e=s).length,(r=e.charCodeAt(0))>=55296&&r<=56319&&n>1&&(i=e.charCodeAt(1))>=56320&&i<=57343?1024*(r-55296)+i-56320+65536:r),o=a>=N$[0]&&a<=N$[1],l=2===s.length&&s[0]===s[1];return{value:fF(l?s[0]:s),isSecondary:o||l}}(p),y=g.value,v=g.isSecondary,b=u[0].startsWith("FontAwesome"),_=OF(m,y),w=_;if(b){var T=(a=EF[s=y],o=OF("fas",s),a||(o?{prefix:"fas",iconName:o}:null)||{prefix:null,iconName:null});T.iconName&&T.prefix&&(_=T.iconName,m=T.prefix)}if(!_||v||l&&l.getAttribute(vB)===m&&l.getAttribute(bB)===w)n();else{t.setAttribute(i,w),l&&t.removeChild(l);var S={iconName:null,title:null,titleId:null,prefix:null,transform:KB,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},x=S.extra;x.attributes[gB]=e,s$(_,m).then((function(r){var s=t$($N($N({},S),{},{icons:{main:r,mask:NF()},prefix:m,iconName:w,extra:x,watchable:!0})),a=aB.createElement("svg");"::before"===e?t.insertBefore(a,t.firstChild):t.appendChild(a),a.outerHTML=s.map((function(t){return hF(t)})).join("\n"),t.removeAttribute(i),n()})).catch(r)}}else n()}))}function F$(t){return Promise.all([B$(t,"::before"),B$(t,"::after")])}function $$(t){return!(t.parentNode===document.head||~TB.indexOf(t.tagName.toUpperCase())||t.getAttribute(gB)||t.parentNode&&"svg"===t.parentNode.tagName)}function U$(t){if(cB)return new Promise((function(e,i){var n=QB(t.querySelectorAll("*")).filter($$).map(F$),r=u$.begin("searchPseudoElements");_$(),Promise.all(n).then((function(){r(),w$(),e()})).catch((function(){r(),w$(),i()}))}))}var j$=!1,V$=function(t){return t.toLowerCase().split(" ").reduce((function(t,e){var i=e.toLowerCase().split("-"),n=i[0],r=i.slice(1).join("-");if(n&&"h"===r)return t.flipX=!0,t;if(n&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(n){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},H$={mixout:function(){return{parse:{transform:function(t){return V$(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,e){var i=e.getAttribute("data-fa-transform");return i&&(t.transform=V$(i)),t}}},provides:function(t){t.generateAbstractTransformGrouping=function(t){var e=t.main,i=t.transform,n=t.containerWidth,r=t.iconWidth,s={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*i.x,", ").concat(32*i.y,") "),o="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),l="rotate(".concat(i.rotate," 0 0)"),c={outer:s,inner:{transform:"".concat(a," ").concat(o," ").concat(l)},path:{transform:"translate(".concat(r/2*-1," -256)")}};return{tag:"g",attributes:$N({},c.outer),children:[{tag:"g",attributes:$N({},c.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:$N($N({},e.icon.attributes),c.path)}]}]}}}},q$={x:0,y:0,width:"100%",height:"100%"};function W$(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}var z$,G$={hooks:function(){return{parseNodeAttributes:function(t,e){var i=e.getAttribute("data-fa-mask"),n=i?$F(i.split(" ").map((function(t){return t.trim()}))):NF();return n.prefix||(n.prefix=RF()),t.mask=n,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides:function(t){t.generateAbstractMask=function(t){var e,i=t.children,n=t.attributes,r=t.main,s=t.mask,a=t.maskId,o=t.transform,l=r.width,c=r.icon,u=s.width,h=s.icon,d=function(t){var e=t.transform,i=t.iconWidth,n={transform:"translate(".concat(t.containerWidth/2," 256)")},r="translate(".concat(32*e.x,", ").concat(32*e.y,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:n,inner:{transform:"".concat(r," ").concat(s," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:o,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:$N($N({},q$),{},{fill:"white"})},f=c.children?{children:c.children.map(W$)}:{},m={tag:"g",attributes:$N({},d.inner),children:[W$($N({tag:c.tag,attributes:$N($N({},c.attributes),d.path)},f))]},g={tag:"g",attributes:$N({},d.outer),children:[m]},y="mask-".concat(a||XB()),v="clip-".concat(a||XB()),b={tag:"mask",attributes:$N($N({},q$),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,g]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(e=h,"g"===e.tag?e.children:[e])},b]};return i.push(_,{tag:"rect",attributes:$N({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(y,")")},q$)}),{children:i,attributes:n}}}},K$={provides:function(t){var e=!1;sB.matchMedia&&(e=sB.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var t=[],i={fill:"currentColor"},n={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:$N($N({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var r=$N($N({},n),{},{attributeName:"opacity"}),s={tag:"circle",attributes:$N($N({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||s.children.push({tag:"animate",attributes:$N($N({},n),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:$N($N({},r),{},{values:"1;0;1;1;0;1;"})}),t.push(s),t.push({tag:"path",attributes:$N($N({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:$N($N({},r),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:$N($N({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:$N($N({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}};z$={mixoutsTo:QF}.mixoutsTo,jF=[aF,L$,O$,D$,M$,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=U$,t}}},provides:function(t){t.pseudoElements2svg=function(t){var e=t.node,i=void 0===e?aB:e;WB.searchPseudoElements&&U$(i)}}},{mixout:function(){return{dom:{unwatch:function(){_$(),j$=!0}}}},hooks:function(){return{bootstrap:function(){S$(WF("mutationObserverCallbacks",{}))},noAuto:function(){T$&&T$.disconnect()},watch:function(t){var e=t.observeMutationsRoot;j$?w$():S$(WF("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}},H$,G$,K$,{hooks:function(){return{parseNodeAttributes:function(t,e){var i=e.getAttribute("data-fa-symbol"),n=null!==i&&(""===i||i);return t.symbol=n,t}}}}],VF={},Object.keys(HF).forEach((function(t){-1===qF.indexOf(t)&&delete HF[t]})),jF.forEach((function(t){var e=t.mixout?t.mixout():{};if(Object.keys(e).forEach((function(t){"function"==typeof e[t]&&(z$[t]=e[t]),"object"===UN(e[t])&&Object.keys(e[t]).forEach((function(i){z$[t]||(z$[t]={}),z$[t][i]=e[t][i]}))})),t.hooks){var i=t.hooks();Object.keys(i).forEach((function(t){VF[t]||(VF[t]=[]),VF[t].push(i[t])}))}t.provides&&t.provides(HF)})),QF.noAuto,QF.config;var Y$=QF.library,X$=(QF.dom,QF.parse),Q$=(QF.findIconDefinition,QF.toHtml,QF.icon),J$=(QF.layer,QF.text,QF.counter,{prefix:"fas",iconName:"sort-down",icon:[320,512,["sort-desc"],"f0dd","M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"]}),Z$={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416V96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241V96c0-17.7 14.3-32 32-32s32 14.3 32 32V416c0 17.7-14.3 32-32 32s-32-14.3-32-32V271l-11.5 9.6-192 160z"]},tU={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},eU={prefix:"fas",iconName:"share-nodes",icon:[448,512,["share-alt"],"f1e0","M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"]},iU={prefix:"fas",iconName:"shuffle",icon:[512,512,[128256,"random"],"f074","M403.8 34.4c12-5 25.7-2.2 34.9 6.9l64 64c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-64 64c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6V160H352c-10.1 0-19.6 4.7-25.6 12.8L284 229.3 244 176l31.2-41.6C293.3 110.2 321.8 96 352 96h32V64c0-12.9 7.8-24.6 19.8-29.6zM164 282.7L204 336l-31.2 41.6C154.7 401.8 126.2 416 96 416H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H96c10.1 0 19.6-4.7 25.6-12.8L164 282.7zm274.6 188c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6V416H352c-30.2 0-58.7-14.2-76.8-38.4L121.6 172.8c-6-8.1-15.5-12.8-25.6-12.8H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H96c30.2 0 58.7 14.2 76.8 38.4L326.4 339.2c6 8.1 15.5 12.8 25.6 12.8h32V320c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l64 64c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-64 64z"]},nU={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},rU={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},sU={prefix:"fas",iconName:"up-right-from-square",icon:[512,512,["external-link-alt"],"f35d","M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V32c0-17.7-14.3-32-32-32H352zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"]},aU={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},oU={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29V96c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241V96c0-17.7-14.3-32-32-32S0 78.3 0 96V416c0 17.7 14.3 32 32 32s32-14.3 32-32V271l11.5 9.6 192 160z"]},lU={prefix:"fas",iconName:"sliders",icon:[512,512,["sliders-h"],"f1de","M0 416c0-17.7 14.3-32 32-32l54.7 0c12.3-28.3 40.5-48 73.3-48s61 19.7 73.3 48L480 384c17.7 0 32 14.3 32 32s-14.3 32-32 32l-246.7 0c-12.3 28.3-40.5 48-73.3 48s-61-19.7-73.3-48L32 448c-17.7 0-32-14.3-32-32zm192 0a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM384 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm-32-80c32.8 0 61 19.7 73.3 48l54.7 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-54.7 0c-12.3 28.3-40.5 48-73.3 48s-61-19.7-73.3-48L32 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l246.7 0c12.3-28.3 40.5-48 73.3-48zM192 64a32 32 0 1 0 0 64 32 32 0 1 0 0-64zm73.3 0L480 64c17.7 0 32 14.3 32 32s-14.3 32-32 32l-214.7 0c-12.3 28.3-40.5 48-73.3 48s-61-19.7-73.3-48L32 128C14.3 128 0 113.7 0 96S14.3 64 32 64l86.7 0C131 35.7 159.2 16 192 16s61 19.7 73.3 48z"]},cU={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M56 472a56 56 0 1 1 0-112 56 56 0 1 1 0 112zm0-160a56 56 0 1 1 0-112 56 56 0 1 1 0 112zM0 96a56 56 0 1 1 112 0A56 56 0 1 1 0 96z"]},uU={prefix:"fas",iconName:"file-arrow-down",icon:[384,512,["file-download"],"f56d","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z"]},hU={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M0 256a56 56 0 1 1 112 0A56 56 0 1 1 0 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"]},dU={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},pU={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},fU={prefix:"fas",iconName:"clock-rotate-left",icon:[512,512,["history"],"f1da","M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"]},mU={prefix:"fas",iconName:"right-left",icon:[512,512,["exchange-alt"],"f362","M32 96l320 0V32c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l96 96c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-96 96c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6V160L32 160c-17.7 0-32-14.3-32-32s14.3-32 32-32zM480 352c17.7 0 32 14.3 32 32s-14.3 32-32 32H160v64c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-96-96c-6-6-9.4-14.1-9.4-22.6s3.4-16.6 9.4-22.6l96-96c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 64H480z"]},gU={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]};function yU(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function vU(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?yU(Object(i),!0).forEach((function(e){_U(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):yU(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function bU(t){return bU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bU(t)}function _U(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var wU,TU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},SU={exports:{}};wU=SU,function(t){var e=function(t,i,n){if(!o(i)||c(i)||u(i)||h(i)||a(i))return i;var r,s=0,d=0;if(l(i))for(r=[],d=i.length;s<d;s++)r.push(e(t,i[s],n));else for(var p in r={},i)Object.prototype.hasOwnProperty.call(i,p)&&(r[t(p,n)]=e(t,i[p],n));return r},i=function(t){return d(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))).substr(0,1).toLowerCase()+t.substr(1)},n=function(t){var e=i(t);return e.substr(0,1).toUpperCase()+e.substr(1)},r=function(t,e){return function(t,e){var i=(e=e||{}).separator||"_",n=e.split||/(?=[A-Z])/;return t.split(n).join(i)}(t,e).toLowerCase()},s=Object.prototype.toString,a=function(t){return"function"==typeof t},o=function(t){return t===Object(t)},l=function(t){return"[object Array]"==s.call(t)},c=function(t){return"[object Date]"==s.call(t)},u=function(t){return"[object RegExp]"==s.call(t)},h=function(t){return"[object Boolean]"==s.call(t)},d=function(t){return(t-=0)==t},p=function(t,e){var i=e&&"process"in e?e.process:e;return"function"!=typeof i?t:function(e,n){return i(e,t,n)}},f={camelize:i,decamelize:r,pascalize:n,depascalize:r,camelizeKeys:function(t,n){return e(p(i,n),t)},decamelizeKeys:function(t,i){return e(p(r,i),t,i)},pascalizeKeys:function(t,i){return e(p(n,i),t)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};wU.exports?wU.exports=f:t.humps=f}(TU);var xU=SU.exports,kU=["class","style","attrs"];function CU(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce((function(t,e){return Array.isArray(e)?t=t.concat(e):t.push(e),t}),[])}function EU(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(e.children||[]).map(EU.bind(null,t)),s=Object.keys(e.attributes||{}).reduce((function(t,i){var n=e.attributes[i];switch(i){case"class":t.class=n.split(/\s+/).reduce((function(t,e){return t[e]=!0,t}),{});break;case"style":t.style=function(t){return t.split(";").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.indexOf(":"),n=xU.camelize(e.slice(0,i)),r=e.slice(i+1).trim();return t[n]=r,t}),{})}(n);break;default:t.attrs[i]=n}return t}),{class:{},style:{},attrs:{}}),a=n.class,o=void 0===a?{}:a,l=n.style,c=void 0===l?{}:l,u=n.attrs,h=void 0===u?{}:u,d=function(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},s=Object.keys(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}(n,kU);return"string"==typeof e?e:t(e.tag,vU(vU({class:CU(s.class,o),style:vU(vU({},s.style),c),attrs:vU(vU({},s.attrs),h)},d),{},{props:i}),r)}var IU=!1;try{IU=!0}catch(t){}function PU(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?_U({},t,e):{}}function AU(t){return t&&"object"===bU(t)&&t.prefix&&t.iconName&&t.icon?t:X$.icon?X$.icon(t):null===t?null:"object"===bU(t)&&t.prefix&&t.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"==typeof t?{prefix:"fas",iconName:t}:void 0}var LU={name:"FontAwesomeIcon",functional:!0,props:{beat:{type:Boolean,default:!1},border:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(t){return[!0,!1,"horizontal","vertical","both"].indexOf(t)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(t){return["right","left"].indexOf(t)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(t){return[90,180,270].indexOf(parseInt(t,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(t){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(t)>-1}},spin:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1}},render:function(t,e){var i=e.props,n=i.icon,r=i.mask,s=i.symbol,a=i.title,o=AU(n),l=PU("classes",function(t){var e,i=(_U(e={"fa-spin":t.spin,"fa-spin-pulse":t.spinPulse,"fa-spin-reverse":t.spinReverse,"fa-pulse":t.pulse,"fa-beat":t.beat,"fa-fade":t.fade,"fa-flash":t.flash,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":!0===t.flip,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip},"fa-".concat(t.size),null!==t.size),_U(e,"fa-rotate-".concat(t.rotation),null!==t.rotation),_U(e,"fa-pull-".concat(t.pull),null!==t.pull),_U(e,"fa-swap-opacity",t.swapOpacity),_U(e,"fa-bounce",t.bounce),_U(e,"fa-shake",t.shake),_U(e,"fa-beat-fade",t.beatFade),e);return Object.keys(i).map((function(t){return i[t]?t:null})).filter((function(t){return t}))}(i)),c=PU("transform","string"==typeof i.transform?X$.transform(i.transform):i.transform),u=PU("mask",AU(r)),h=Q$(o,vU(vU(vU(vU({},l),c),u),{},{symbol:s,title:a}));if(!h)return function(){var t;!IU&&console&&"function"==typeof console.error&&(t=console).error.apply(t,arguments)}("Could not find one or more icon(s)",o,u);var d=h.abstract;return EU.bind(null,t)(d[0],{},e.data)}};Boolean,Boolean,Wi.config.devtools=!1,Wi.config.performance=!1,Wi.config.productionTip=!1,Y$.add({prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M169.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 274.7 54.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},{prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},{prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},{prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},{prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},{prefix:"fas",iconName:"bookmark",icon:[384,512,[128278,61591],"f02e","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"]},{prefix:"fas",iconName:"check",icon:[512,512,[10003,10004],"f00c","M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},{prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},{prefix:"fas",iconName:"circle-user",icon:[512,512,[62142,"user-circle"],"f2bd","M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"]},{prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]},{prefix:"fas",iconName:"comment",icon:[512,512,[128489,61669],"f075","M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"]},{prefix:"fas",iconName:"comment-dots",icon:[512,512,[128172,62075,"commenting"],"f4ad","M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3 0 0 0 0 0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},{prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},{prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},hU,cU,{prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},mU,tU,sU,uU,{prefix:"fas",iconName:"file-video",icon:[384,512,[],"f1c8","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM64 288c0-17.7 14.3-32 32-32h96c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V288zM300.9 397.9L256 368V304l44.9-29.9c2-1.3 4.4-2.1 6.8-2.1c6.8 0 12.3 5.5 12.3 12.3V387.7c0 6.8-5.5 12.3-12.3 12.3c-2.4 0-4.8-.7-6.8-2.1z"]},{prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},{prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},{prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 21 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"]},{prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},fU,aU,{prefix:"fas",iconName:"language",icon:[640,512,[],"f1ab","M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3 0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"]},{prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z"]},{prefix:"fas",iconName:"newspaper",icon:[512,512,[128240],"f1ea","M96 96c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H80c-44.2 0-80-35.8-80-80V128c0-17.7 14.3-32 32-32s32 14.3 32 32V400c0 8.8 7.2 16 16 16s16-7.2 16-16V96zm64 24v80c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24H184c-13.3 0-24 10.7-24 24zm0 184c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16zm160 0c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H336c-8.8 0-16 7.2-16 16zM160 400c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16zm160 0c0 8.8 7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"]},{prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},rU,iU,{prefix:"fas",iconName:"retweet",icon:[576,512,[],"f079","M272 416c17.7 0 32-14.3 32-32s-14.3-32-32-32H160c-17.7 0-32-14.3-32-32V192h32c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-64-64c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l32 0 0 128c0 53 43 96 96 96H272zM304 96c-17.7 0-32 14.3-32 32s14.3 32 32 32l112 0c17.7 0 32 14.3 32 32l0 128H416c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8l-32 0V192c0-53-43-96-96-96L304 96z"]},{prefix:"fas",iconName:"rss",icon:[448,512,["feed"],"f09e","M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},{prefix:"fas",iconName:"satellite-dish",icon:[512,512,[128225],"f7c0","M192 32c0-17.7 14.3-32 32-32C383.1 0 512 128.9 512 288c0 17.7-14.3 32-32 32s-32-14.3-32-32C448 164.3 347.7 64 224 64c-17.7 0-32-14.3-32-32zM60.6 220.6L164.7 324.7l28.4-28.4c-.7-2.6-1.1-5.4-1.1-8.3c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32c-2.9 0-5.6-.4-8.3-1.1l-28.4 28.4L291.4 451.4c14.5 14.5 11.8 38.8-7.3 46.3C260.5 506.9 234.9 512 208 512C93.1 512 0 418.9 0 304c0-26.9 5.1-52.5 14.4-76.1c7.5-19 31.8-21.8 46.3-7.3zM224 96c106 0 192 86 192 192c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-70.7-57.3-128-128-128c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},dU,eU,lU,J$,{prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},oU,Z$,nU,{prefix:"fas",iconName:"thumbs-down",icon:[512,512,[128078,61576],"f165","M313.4 479.1c26-5.2 42.9-30.5 37.7-56.5l-2.3-11.4c-5.3-26.7-15.1-52.1-28.8-75.2H464c26.5 0 48-21.5 48-48c0-18.5-10.5-34.6-25.9-42.6C497 236.6 504 223.1 504 208c0-23.4-16.8-42.9-38.9-47.1c4.4-7.3 6.9-15.8 6.9-24.9c0-21.3-13.9-39.4-33.1-45.6c.7-3.3 1.1-6.8 1.1-10.4c0-26.5-21.5-48-48-48H294.5c-19 0-37.5 5.6-53.3 16.1L202.7 73.8C176 91.6 160 121.6 160 153.7V192v48 24.9c0 29.2 13.3 56.7 36 75l7.4 5.9c26.5 21.2 44.6 51 51.2 84.2l2.3 11.4c5.2 26 30.5 42.9 56.5 37.7zM32 384H96c17.7 0 32-14.3 32-32V128c0-17.7-14.3-32-32-32H32C14.3 96 0 110.3 0 128V352c0 17.7 14.3 32 32 32z"]},{prefix:"fas",iconName:"thumbs-up",icon:[512,512,[128077,61575],"f164","M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2H464c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48H294.5c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3V320 272 247.1c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192H96c17.7 0 32 14.3 32 32V448c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V224c0-17.7 14.3-32 32-32z"]},{prefix:"fas",iconName:"thumbtack",icon:[384,512,[128204,128392,"thumb-tack"],"f08d","M32 32C32 14.3 46.3 0 64 0H320c17.7 0 32 14.3 32 32s-14.3 32-32 32H290.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8s-15.7 13.3-26 13.3H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64C46.3 64 32 49.7 32 32zM160 384h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V384z"]},pU,gU,{prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0H21.3C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7h42.7C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3H405.3zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352H378.7C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"]},{prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},{prefix:"fab",iconName:"bitcoin",icon:[512,512,[],"f379","M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"]},{prefix:"fab",iconName:"mastodon",icon:[448,512,[],"f4f6","M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"]},{prefix:"fab",iconName:"monero",icon:[496,512,[],"f3d0","M352 384h108.4C417 455.9 338.1 504 248 504S79 455.9 35.6 384H144V256.2L248 361l104-105v128zM88 336V128l159.4 159.4L408 128v208h74.8c8.5-25.1 13.2-52 13.2-80C496 119 385 8 248 8S0 119 0 256c0 28 4.6 54.9 13.2 80H88z"]},{prefix:"fab",iconName:"android",icon:[576,512,[],"f17b","M420.55,301.93a24,24,0,1,1,24-24,24,24,0,0,1-24,24m-265.1,0a24,24,0,1,1,24-24,24,24,0,0,1-24,24m273.7-144.48,47.94-83a10,10,0,1,0-17.27-10h0l-48.54,84.07a301.25,301.25,0,0,0-246.56,0L116.18,64.45a10,10,0,1,0-17.27,10h0l47.94,83C64.53,202.22,8.24,285.55,0,384H576c-8.24-98.45-64.54-181.78-146.85-226.55"]}),Wi.component("FontAwesomeIcon",LU),new Wi({el:"#app",router:wR,store:bu,i18n:xo,render:t=>t(BN)})})()})();